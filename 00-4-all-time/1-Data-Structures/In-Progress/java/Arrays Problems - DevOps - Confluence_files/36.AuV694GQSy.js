/*! License: FQ7fG5UvNu.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"+1K0":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const o={seenCount:0,dontShow:!1},r={seenCount:99,dontShow:!0};class i{static readFromLocalStorage(){try{let e=localStorage.getItem("atlassian.people.context.team.mention.highlight");return e||(localStorage.setItem("atlassian.people.context.team.mention.highlight",JSON.stringify(o)),e=localStorage.getItem("atlassian.people.context.team.mention.highlight")),e?JSON.parse(e):r}catch(e){return r}}static saveToLocalStorage(e){try{localStorage.setItem("atlassian.people.context.team.mention.highlight",JSON.stringify(e))}catch(t){}}}i.markAsDone=()=>{const e=i.readFromLocalStorage();e.dontShow=!0,i.saveToLocalStorage(e)},i.isHighlightEnabled=()=>{const e=i.readFromLocalStorage();return e.seenCount<5&&!e.dontShow},i.registerRender=()=>{const e=i.readFromLocalStorage();return e.seenCount+=1,e.seenCount>5&&(e.dontShow=!0),i.saveToLocalStorage(e),e},i.getSeenCount=()=>i.readFromLocalStorage().seenCount,i.registerCreateLinkClick=i.markAsDone,i.registerTeamMention=i.markAsDone,i.registerClosed=i.markAsDone},"+Leu":function(e,t,n){"use strict";var o=n("Czhu"),r=n("Pxjv"),i=n("ERkP"),a=n.n(i),s=n("ehfC"),c=n("C3UR"),l=n("RFyg"),d=n("xuWu"),u=n("xwvf"),p=n("3IV/"),h=n("L21V"),f=n("m23B"),m=n("pZXv"),b=n("XxXR"),g=n.n(b),v=n("R50B"),y=n.n(v),O=n("cU7i"),E=n("KsTJ");const w=["codeBlock","layoutSection","expand"];function C(e){return-1!==w.indexOf(e.type.name)}function T(e){if(e instanceof s.NodeSelection){if(C(e.node))return{pos:e.from,start:e.from,node:e.node,depth:e.$anchor.depth}}const t=Object(f.findParentNode)(C)(e);if(t&&0!==t.depth)return{node:t.node,start:t.start,pos:t.pos,depth:t.depth-1}}var S=n("bQC9"),k=n("saIY");const x=new s.PluginKey("breakoutPlugin"),{B300:A,N300:j,N20A:I}=p,M=E.default.div`
  && button {
    background: ${I};
    color: ${j};
    :hover {
      background: ${A};
      color: white !important;
    }
  }
`,N={FULL_WIDTH:"full-width",CENTER:"center",WIDE:"wide"};class R extends a.a.Component{constructor(){super(...arguments),this.handleClick=e=>()=>{const{state:t,dispatch:n}=this.props.editorView;var o;-1!==[N.WIDE,N.FULL_WIDTH].indexOf(e)?(o=e,(e,t)=>{const n=T(e.selection);if(!n)return!1;const r=e.tr.setNodeMarkup(n.pos,n.node.type,n.node.attrs,[e.schema.marks.breakout.create({mode:o})]);return r.setMeta("scrollIntoView",!1),e.selection instanceof s.NodeSelection&&e.selection.$anchor.pos===n.pos&&r.setSelection(s.NodeSelection.create(r.doc,n.pos)),t&&t(r),!0})(t,n):((e,t)=>{const n=T(e.selection);if(!n)return!1;const o=n.node.marks.filter(e=>"breakout"!==e.type.name),r=e.tr.setNodeMarkup(n.pos,n.node.type,n.node.attrs,o);r.setMeta("scrollIntoView",!1),e.selection instanceof s.NodeSelection&&e.selection.$anchor.pos===n.pos&&r.setSelection(s.NodeSelection.create(r.doc,n.pos)),t&&t(r)})(t,n)}}render(){const{intl:{formatMessage:e},mountPoint:t,boundariesElement:n,scrollableElement:o,editorView:r,node:i}=this.props,{state:c}=r;if(!i||!function(e){if(!e.schema.marks.breakout)return!1;const t=T(e.selection);return!!t&&e.selection.$from.node(t.depth).type.allowsMarkType(e.schema.marks.breakout)}(c))return null;const l=function(e){const t=T(e.selection);if(!t)return;const n=t.node.marks.find(e=>"breakout"===e.type.name);return n?n.attrs.mode:void 0}(r.state),d=(e=>{switch(e){case N.FULL_WIDTH:return S.a.layoutFixedWidth;case N.WIDE:return S.a.layoutFullWidth;default:return S.a.layoutWide}})(l),u=e(d),p=(h=l)===N.FULL_WIDTH?N.CENTER:h===N.WIDE?N.FULL_WIDTH:N.WIDE;var h;let b=function(e,t,n){return t instanceof s.NodeSelection&&C(t.node)?Object(f.findDomRefAtPos)(t.from,n.domAtPos.bind(n)):Object(f.findParentDomRefOfType)(e.breakoutNode.type,n.domAtPos.bind(n))(t)}((e=>x.getState(e))(c),c.selection,r);if(!b)return null;const v=b.querySelector("."+k.a.BREAKOUT_MARK_DOM);return v&&v.firstChild&&(b=v.firstChild),a.a.createElement(m.a,{ariaLabel:u,target:b,offset:[5,0],alignY:"start",alignX:"end",mountTo:t,boundariesElement:n,scrollableElement:o,stick:!0,forcePlacement:!0},a.a.createElement(M,null,a.a.createElement(O.a,{title:u,testId:d.id,onClick:this.handleClick(p),iconBefore:l===N.FULL_WIDTH?a.a.createElement(g.a,{label:u}):a.a.createElement(y.a,{label:u})})))}}R.displayName="LayoutButton";var P=Object(h.g)(R),L=n("DBvH");class D{constructor(e,t,n){this.updateWidth=e=>{const t=Object(l.c)(this.node.attrs.mode,e.width);let n=`width: ${t}; `;const o=e.lineLength,r=Object(L.e)(t);if(o&&r){n+=`transform: none; margin-left: ${-(r-o)/2}px;`}else n+="transform: translateX(-50%); margin-left: 50%;";const i=this.view.domObserver;i&&this.view.dom&&(i.stop(),setTimeout(()=>{i.start()},0)),void 0!==this.dom.style.cssText?this.dom.style.cssText=n:this.dom.setAttribute("style",n)};const o=document.createElement("div");o.className=k.a.BREAKOUT_MARK_DOM;const r=document.createElement("div");r.className=k.a.BREAKOUT_MARK,r.setAttribute("data-layout",e.attrs.mode),r.appendChild(o),this.dom=r,this.node=e,this.view=t,this.contentDOM=o,this.eventDispatcher=n,n.on(u.b.key,this.updateWidth),this.updateWidth(u.b.getState(this.view.state))}destroy(){this.eventDispatcher.off(u.b.key,this.updateWidth)}}function _({dispatch:e,eventDispatcher:t}){return new s.Plugin({state:{init:()=>({breakoutNode:null}),apply(t,n){const r=T(t.selection),i=r?r.node:null;if(a=i,s=n.breakoutNode,a&&s?!a.eq(s):a||s){const t=Object(o.a)(Object(o.a)({},n),{},{breakoutNode:i});return e(x,t),t}var a,s;return n}},key:x,props:{nodeViews:{breakout:(e,n)=>new D(e,n,t)}}})}var B=e=>({name:"breakout",pmPlugins:()=>[{name:"breakout",plugin:_}],marks:()=>[{name:"breakout",mark:c.a}],contentComponent:({editorView:t,popupsMountPoint:n,popupsBoundariesElement:o,popupsScrollableElement:r})=>e&&!e.allowBreakoutButton?null:a.a.createElement(d.a,{plugins:{pluginState:x},render:({pluginState:e})=>a.a.createElement(P,{editorView:t,mountPoint:n,boundariesElement:o,scrollableElement:r,node:e.breakoutNode})})}),$=n("dB+l"),z=n("rEY+"),F=n("Z0f3");var U=n("czJC");const H=e=>{if(e.selection instanceof U.a){const t=[];return e.selection.forEachCell(n=>{const o=n.firstChild.marks.filter(t=>t.type===e.schema.marks.alignment)[0];t.push(o?o.attrs.align:"start")}),t.every(e=>e===t[0])?t[0]:"start"}const t=Object(f.findParentNodeOfType)([e.schema.nodes.paragraph,e.schema.nodes.heading])(e.selection),n=t&&t.node.marks.filter(t=>t.type===e.schema.marks.alignment)[0];return n&&n.attrs.align||"start"};const W=new s.PluginKey("alignmentPlugin");function V(e,t){return new s.Plugin({key:W,state:{init:(e,n)=>function(e,t){return{align:H(e)||t.align,isEnabled:!0}}(n,t),apply(t,n,r,i){const a=H(i),s=(c=a,(e,t)=>{const{nodes:{paragraph:n,heading:o},marks:{alignment:r}}=e.schema;return Object(z.k)(r,()=>c?"start"!==c&&{align:c}:void 0,[n,o])(e,t)})(i);var c;const l=Object(o.a)(Object(o.a)({},n),{},{align:a,isEnabled:s});return a===n.align&&s===n.isEnabled||e(W,l),l}}})}var K=n("PLaw"),q=n.n(K),G=n("uo6K");const Y=E.default.div`
  display: flex;
`,X=E.default.span`
  background: ${p.N30};
  width: 1px;
  height: 24px;
  display: inline-block;
  margin: 0 8px;
`,J=E.default.span`
  display: flex;
  align-items: center;
  div {
    display: flex;
  }
`,Z=E.default.span`
  margin-left: -8px;
`;class Q extends i.PureComponent{constructor(){super(...arguments),this.onClick=e=>{const{onClick:t,value:n}=this.props;e.preventDefault(),t(n)}}render(){const{label:e,isSelected:t,content:n}=this.props;return a.a.createElement(O.a,{disabled:!1,selected:t,title:e,"aria-label":e,onClick:this.onClick,iconBefore:n})}}var ee=Q,te=n("BMbf");const ne=E.default.div`
  padding: 0 ${Object(te.h)()}px;
  display: flex;
  flex-wrap: wrap;
`;var oe=n("xN8d"),re=n.n(oe),ie=n("RMEM"),ae=n.n(ie),se=n("ZinM"),ce=n.n(se);const le={start:a.a.createElement(re.a,{label:"Align left"}),end:a.a.createElement(ae.a,{label:"Align right"}),center:a.a.createElement(ce.a,{label:"Align center"})},de=[{title:"Align left",value:"start"},{title:"Align center",value:"center"},{title:"Align right",value:"end"}];class ue extends i.PureComponent{render(){const{onClick:e,selectedAlignment:t,className:n}=this.props;return a.a.createElement(ne,{className:n,style:{maxWidth:96}},de.map(n=>{const{value:o,title:r}=n;return a.a.createElement(ee,{content:le[o],key:o,value:o,label:r,onClick:e,isSelected:o===t})}))}}class pe extends a.a.Component{constructor(){super(...arguments),this.state={isOpen:!1},this.changeAlignment=e=>(this.toggleOpen(),this.props.changeAlignment(e)),this.toggleOpen=()=>{this.handleOpenChange({isOpen:!this.state.isOpen})},this.handleOpenChange=({isOpen:e})=>{this.setState({isOpen:e})},this.hide=()=>{!0===this.state.isOpen&&this.setState({isOpen:!1})}}render(){const{isOpen:e}=this.state,{popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,isReducedSpacing:r,pluginState:i,disabled:s}=this.props;return a.a.createElement(J,null,a.a.createElement(G.a,{mountTo:t,boundariesElement:n,scrollableElement:o,isOpen:this.state.isOpen,handleClickOutside:this.hide,handleEscapeKeydown:this.hide,fitWidth:242,fitHeight:80,trigger:a.a.createElement(O.a,{spacing:r?"none":"default",disabled:s,selected:e,title:"Text alignment","aria-label":"Text alignment",className:"align-btn",onClick:this.toggleOpen,iconBefore:a.a.createElement(Y,null,le[i.align],a.a.createElement(Z,null,a.a.createElement(q.a,{label:"Alignment"})))})},a.a.createElement(ue,{onClick:e=>this.changeAlignment(e),selectedAlignment:i.align})),a.a.createElement(X,null))}}pe.displayName="AlignmentToolbar";var he=pe;const fe={align:"start"};var me=()=>({name:"alignment",marks:()=>[{name:"alignment",mark:$.a}],pmPlugins:()=>[{name:"alignmentPlugin",plugin:({dispatch:e})=>V(e,fe)}],primaryToolbarComponent:({editorView:e,popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,disabled:r,isToolbarReducedSpacing:i})=>a.a.createElement(d.a,{plugins:{align:W},render:({align:s})=>a.a.createElement(he,{pluginState:s,isReducedSpacing:i,changeAlignment:t=>(e=>(t,n)=>{const{nodes:{paragraph:o,heading:r},marks:{alignment:i}}=t.schema;return Object(F.b)([Object(z.a)(e),Object(z.k)(i,()=>e?"start"!==e&&{align:e}:void 0,[o,r])])(t,n)})(t)(e.state,e.dispatch),disabled:r||!s.isEnabled,popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o})})}),be=n("X/3Q"),ge=n("m/AV"),ve=n("XayN"),ye=n("Iqa1"),Oe=n("UQv1"),Ee=n.n(Oe),we=n("ybZl"),Ce=n.n(we),Te=n("IWmk"),Se=n("S6ul"),ke=n("mQlO"),xe=n("2suc"),Ae=n("a8dO"),je=n("qPpp"),Ie=n("WuRq");const Me=E.default.div`
  /* tooltip in ToolbarButton is display:block */
  & > div > div {
    display: flex;
  }
`,Ne=Object(Ie.a)(Se.a),Re=E.default.div`
  ${e=>e.isSelected?"&& > span, && > span:hover { background: #6c798f; color: #fff; }":""};
`,Pe=E.default.span`
  ${e=>e.hasElemBefore?"margin-left: 8px;":""};
`;class Le extends i.PureComponent{constructor(){super(...arguments),this.state={popupPlacement:["bottom","left"]},this.handleRef=e=>{this.setState({target:e||void 0})},this.updatePopupPlacement=e=>{this.setState({popupPlacement:e})},this.handleClose=()=>{this.props.onOpenChange&&this.props.onOpenChange({isOpen:!1})}}renderItem(e){const{onItemActivated:t,onMouseEnter:n,onMouseLeave:o}=this.props;if(!e.onClick&&!e.value&&!e.value.name)return a.a.createElement("span",{key:String(e.content)},e.content);const r=a.a.createElement(Re,{key:e.key||e.content,isSelected:e.isActive},a.a.createElement(ke.a,{elemBefore:e.elemBefore,elemAfter:e.elemAfter,isDisabled:e.isDisabled,onClick:()=>t&&t({item:e}),onMouseEnter:()=>n&&n({item:e}),onMouseLeave:()=>o&&o({item:e}),className:e.className},a.a.createElement(Pe,{hasElemBefore:!!e.elemBefore},e.content)));return e.tooltipDescription?a.a.createElement(Ae.a,{key:e.key||e.content,content:e.tooltipDescription,position:e.tooltipPosition},r):r}renderDropdownMenu(){const{target:e,popupPlacement:t}=this.state,{items:n,mountTo:o,boundariesElement:r,scrollableElement:i,offset:s,fitHeight:c,fitWidth:l,isOpen:d,zIndex:u}=this.props;return a.a.createElement(m.a,{target:d?e:void 0,mountTo:o,boundariesElement:r,scrollableElement:i,onPlacementChanged:this.updatePopupPlacement,fitHeight:c,fitWidth:l,zIndex:u||je.n,offset:s},a.a.createElement(Ne,{isOpen:!0,appearance:"tall",position:t.join(" "),shouldFlip:!1,shouldFitContainer:!0,isTriggerNotTabbable:!0,handleClickOutside:this.handleClose,handleEscapeKeydown:this.handleClose},a.a.createElement("div",{style:{height:0,minWidth:l||0}}),n.map((e,t)=>a.a.createElement(xe.a,{key:t},e.items.map(e=>this.renderItem(e))))))}render(){const{children:e,isOpen:t}=this.props;return a.a.createElement(Me,null,a.a.createElement("div",{ref:this.handleRef},e),t?this.renderDropdownMenu():null)}}var De,_e=n("VEgZ"),Be=n("I9T1"),$e=n("UdmJ"),ze=n("DA0Z"),Fe=n("RMGf"),Ue=n("UP2C"),He=n("TIUX"),We=n("3rZS");function Ve(e){return Boolean(e&&e.type&&["orderedList","bulletList"].includes(e.type.name))}function Ke(e){return Boolean(e&&e.type&&"paragraph"===e.type.name)}function qe(e){return Boolean(e&&e.type&&"listItem"===e.type.name)}function Ge(e){return Boolean(e&&e.type&&"bulletList"===e.type.name)}function Ye(e){const{bulletList:t}=e.type.schema.nodes;if(!t)return!1;const n=Be.Fragment.from(t.createAndFill());return!qe(e)&&e.type.validContent(n)}!function(e){e[e.LEFT=1]="LEFT",e[e.RIGHT=-1]="RIGHT"}(De||(De={}));const Xe=({tr:e,direction:t,forceListType:n})=>{const o={orderedList:0,bulletList:0},{doc:r,selection:{$from:i,$to:a},selection:s}=e,c=i.blockRange(a,Ye);if(!c)return o;const l=r.nodeAt(c.start),d=Ve(l)?c.start:0,u=Ve(l)?c.end:e.doc.content.size,p=[];if(r.nodesBetween(d,u,(o,i,a)=>{const s=r.resolve(i),{nodeBefore:c,nodeAfter:l}=s;if(!(c&&l&&Ve(c)&&Ve(l)))return;const d=qe(a);if(!d&&c.type!==l.type&&!n)return;const u=s.index(),h=s.posAtIndex(u-1),f=s.posAtIndex(u);if(n&&(e.setNodeMarkup(h,n),e.setNodeMarkup(f,n)),d&&c.type!==l.type){const n=t===De.RIGHT?l.type:c.type;e.setNodeMarkup(h,n)}p.push(i)}),s.empty&&l&&Ve(l)){const e=r.resolve(c.start+l.nodeSize),{nodeBefore:t,nodeAfter:n}=e;t&&n&&Ve(t)&&Ve(n)&&n.type===t.type&&p.push(e.pos)}for(let h=p.length-1;h>=0;h--){const t=e.doc.nodeAt(p[h]);if(t){const e=o[t.type.name]||0;o[t.type.name]=e+1}e.join(p[h])}return o};var Je=n("eObz"),Ze=n("eGvA");const Qe=e=>"paragraph"===e.parent.type.name,et=e=>{const t=e.node(-1);return qe(e.parent)||Ve(e.parent)||qe(t)},tt=(e,t)=>{const{$from:n,$to:o}=t,r=n.blockRange(o);if(!r)return!1;return!!Object($e.findWrapping)(r,e)},nt=e=>{const{parent:t}=e.selection.$from,{listItem:n}=e.schema.nodes;return e.selection instanceof Ze.a?qe(t):Object(f.hasParentNodeOfType)(n)(e.selection)&&Ke(t)},ot=e=>{const{$from:t}=e.selection,n=e.doc.resolve(t.pos-1);let o=n?n.nodeBefore:null;return e.selection instanceof Ze.a&&(o=t.nodeBefore),Ve(o)},rt=e=>{let t=0;for(let n=e.depth-1;n>0;n--){Ve(e.node(n))&&(t+=1)}return t},it=e=>{const t=rt(e)-1,n=Object(f.findParentNodeClosestToPos)(e,qe);return{indentLevel:t,itemIndex:e.index(n?n.depth-1:void 0)}},at=({selection:e,doc:t})=>{if(e.empty)return e;const{$from:n,$to:o}=e;if(e instanceof s.NodeSelection){const e=st(n);return new s.TextSelection(e,e)}const r=st(n),i=ct(o);return new s.TextSelection(i,r)},st=e=>{const t=e.blockRange(e,qe);return t&&0===e.textOffset&&t.end-1===e.pos?s.Selection.near(e.doc.resolve(t.end+1),1).$from:e},ct=e=>{const t=e.blockRange(e,qe);return t&&0===e.textOffset&&t.start+1===e.pos?s.Selection.near(e.doc.resolve(t.start-1),-1).$to:e},lt=e=>{let t=e.depth;for(let n=e.depth;n>0;n--){const o=e.node(n);if(Ve(o)&&(t=n),!qe(o)&&!Ve(o))break}return t-1};function dt(e,t){let{$from:n,$to:o}=e;const r=t.doc.type.schema.nodes.listItem;let i=n.blockRange(o,e=>!!e.childCount&&!!e.firstChild&&e.firstChild.type===r);if(!i||i.depth<2||n.node(i.depth-1).type!==r)return t;let a=i.end,s=o.end(i.depth);return a<s&&(t.step(new $e.ReplaceAroundStep(a-1,s,a,s,new Be.Slice(Be.Fragment.from(r.create(void 0,i.parent.copy())),1,0),1,!0)),i=new Be.NodeRange(t.doc.resolve(n.pos),t.doc.resolve(s),i.depth)),t.lift(i,Object($e.liftTarget)(i)).scrollIntoView()}const ut=/^\s*[\*\-\u2022](\s+|\s+$)/,pt=/^\s*\d[\.\)](\s+|$)/,ht=(e,t,n)=>{const{hardBreak:o,bulletList:r,orderedList:i}=n.nodes,a=Object(Je.c)(e.content,e=>e),c=[r,i],l=a.map((e,r)=>{const i=((e,t)=>{if(!e.text)return null;const{bulletList:n,orderedList:o}=t.nodes;return[{node:n,matcher:ut},{node:o,matcher:pt}].reduce((t,n)=>{if(t)return t;const o=e.text.match(n.matcher);return o?[n.node,o[0].length]:t},null)})(e,n),s=r>0&&a[r-1];if(s&&s.type!==o)return e;if(!i||!e.text)return e;const[c,l]=i,d=e.text.substr(l),u=n.nodes.listItem.createAndFill(void 0,n.nodes.paragraph.createChecked(void 0,d.length?n.text(d):void 0));if(!u)return e;const p=c.createChecked(void 0,[u]);return t&&!t.type.validContent(Be.Fragment.from(p))?e:p}).filter((e,t,n)=>e.type!==o?e:t>0&&c.indexOf(n[t-1].type)>-1||t<n.length-1&&c.indexOf(n[t+1].type)>-1?null:e),d=s.EditorState.create({schema:n});let u;Object(ze.a)((e,t)=>!!t&&(!l.some(e=>e.isText)&&(t(e.tr.replaceWith(0,2,l)),!0)),(e,t)=>Ve(e)&&Ve(t))(d,e=>{u=e});const p=u?u.doc.content:Be.Fragment.from(l),{paragraph:h}=n.nodes;return h.validContent(p)?Be.Fragment.from(h.create(e.attrs,p,e.marks)):p},ft=({fragment:e,blockMarks:t=[],schema:n})=>{const o=[];let r=[],i=null;const{hardBreak:a,paragraph:s}=n.nodes;return e.forEach(e=>{if(i&&i.type===a&&e.type===a)return r.pop(),o.push(s.createChecked(void 0,r,[...t])),void(r=[]);r.push(e),i=e}),r.length&&o.push(s.createChecked(void 0,r,[...t])),Be.Fragment.from(o.length?o:[s.createAndFill(void 0,void 0,[...t])])};var mt=n("4FMG"),bt=n("tVIO");const gt=e=>{const{selection:{$from:t,$to:n}}=e,o=it(t),r=it(n);return{itemIndexAtSelectionStart:o.itemIndex,itemIndexAtSelectionEnd:r.itemIndex,indentLevelAtSelectionStart:o.indentLevel,indentLevelAtSelectionEnd:r.indentLevel,itemsInSelection:vt(e)}},vt=e=>{const{from:t,to:n}=e.selection;if(t===n)return 1;let o=0;const r=e.doc.cut(t,n);return r.content.nodesBetween(0,r.content.size,(e,t,n,r)=>{n&&qe(n)&&!Ve(e)&&0===r&&o++}),o};var yt=n("mOMa");const Ot={[yt.b.JOIN_SIBLINGS]:(e,t,n,o)=>{const r=o.node(-1);if(!r.firstChild)return!1;const i=o.before(-1),a=o.after(-1),s=n.pos-1,c=n.pos,l=o.parent.content,d=r.content.cut(r.firstChild.nodeSize);return Object(He.d)(e,e=>e.doc.resolve(s),[[l,s],[d,c]],[[i,a]]),t&&t(e),!0},[yt.b.JOIN_DESCENDANT_TO_PARENT]:(e,t,n,o)=>{const r=o.node(-2),i=o.node(-1);if(!i.firstChild||!i.lastChild)return!1;const a=o.before(-2),s=o.before(-1),c=n.after(),l=o.after(-2),d=o.after(-1),u=o.start(-2),p=Ve(i.lastChild),h=1===r.childCount&&!p,f=n.pos,m=c,b=u,g=o.parent.content,v=p?i.content.cut(i.firstChild.nodeSize,i.nodeSize-i.lastChild.nodeSize-2):i.content.cut(i.firstChild.nodeSize),y=i.lastChild.content;return Object(He.d)(e,e=>e.doc.resolve(f),p?[[g,f],[v,m],[y,b]]:[[g,f],[v,m]],[h?[a,l]:[s,d]]),t&&t(e),!0},[yt.b.JOIN_TO_SIBLING_DESCENDANT]:(e,t,n,o,r)=>{if(!r)return!1;const i=o.node(-1);if(!i.firstChild||!i.lastChild)return!1;const a=o.parent,s=o.before(-1),c=r.after(),l=o.after(-1),d=Ve(i.lastChild),u=r.pos,p=c,h=n.pos-1,f=a.content,m=d?i.content.cut(i.firstChild.nodeSize,i.nodeSize-i.lastChild.nodeSize-2):i.content.cut(i.firstChild.nodeSize),b=i.lastChild.content;return Object(He.d)(e,e=>e.doc.resolve(u),d?[[f,u],[m,p],[b,h]]:[[f,u],[m,p]],[[s,l]]),t&&t(e),!0}},Et=(e,t)=>{const{tr:n,selection:{$head:o}}=e,r=Object(He.k)(o);if(!Object(He.f)(e))return!1;const i=((e,t,n)=>{const{$pos:o,foundNode:r}=e,i=et(o),a=Qe(t),s=0===t.index(-1),c=et(t);if(!(r&&i&&a&&s&&c))return!1;if(Qe(o))return[yt.b.JOIN_DESCENDANT_TO_PARENT,null];const l=o.parent.lastChild&&Ve(o.parent.lastChild),d=Ke(o.parent.lastChild);let u,p=n.doc.resolve(o.pos);do{let e=Object(He.k)(p);p=e.$pos,u=e.foundNode}while(u&&!p.parent.isTextblock);const h=Qe(p);return u&&l&&h?[yt.b.JOIN_TO_SIBLING_DESCENDANT,p]:!!d&&[yt.b.JOIN_SIBLINGS,null]})(r,o,n);if(!i)return!1;const{bulletList:a,orderedList:s}=e.schema.nodes,c=Object(f.findParentNodeOfType)([a,s])(n.selection);let l=mt.c.FORMAT_LIST_BULLET;return c&&c.node.type===s&&(l=mt.c.FORMAT_LIST_NUMBER),Object(bt.a)(e,n,{action:mt.a.LIST_ITEM_JOINED,actionSubject:mt.b.LIST,actionSubjectId:l,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.KEYBOARD,direction:yt.a.BACKWARD,scenario:i[0]}}),Ot[i[0]](n,t,r.$pos,o,i[1])},wt=({tr:e,$next:t,$head:n})=>{if(n.parent.content.size<1)return Object(He.d)(e,e=>e.doc.resolve(n.pos),[],[[n.pos-1,n.pos]]),!0;const o=n.pos,r=e.doc.nodeAt(t.pos-1),i=e.doc.nodeAt(t.pos);if(!r||!i)return!1;const a=i.firstChild;if(!a)return!1;const s=i.lastChild,c=a.firstChild,l=Ct(i)&&a.childCount<2&&t.nodeAfter,d=!Ct(i)&&s&&Ve(s),u=[],p=[];if(Ct(r)&&Ct(i)&&t.nodeAfter&&p.push([e.mapping.map(t.pos-1),e.mapping.map(t.pos+t.nodeAfter.nodeSize+1)]),d){const n=Be.Fragment.from(s.content);u.push([n,e.mapping.map(t.pos)])}if(l||d){p.push([e.mapping.map(t.pos),e.mapping.map(t.pos+i.nodeSize-1)]);const r=Be.Fragment.from(a.content);return u.push([r,o]),Object(He.d)(e,e=>e.doc.resolve(n.pos),u,p),!0}if(i.childCount>1)return u.push([Be.Fragment.from(a.content),o]),p.push([e.mapping.map(t.pos+1),e.mapping.map(t.pos+a.nodeSize+1)]),Object(He.d)(e,e=>e.doc.resolve(n.pos),u,p),!0;if(c&&"hardBreak"===c.type.name){const n=c?c.nodeSize:0;p.push([e.mapping.map(t.pos+2),e.mapping.map(t.pos+2+n)])}else{u.push([Be.Fragment.from(a.content),o]);const n=a.nodeSize;p.push([e.mapping.map(t.pos),e.mapping.map(t.pos+2+n)])}return Object(He.d)(e,e=>e.doc.resolve(n.pos),u,p),!0},Ct=e=>1===e.childCount,Tt=({tr:e,$next:t,$head:n})=>{const o=t.parent,r=t.before(),i=t.after(),a=n.pos,s=o.content;return Object(He.d)(e,e=>e.doc.resolve(a),[[s,a]],[[r,i]]),!0},St=({tr:e,$next:t,$head:n})=>{const o=t.parent,r=t.nodeAfter;if(!r||!r.lastChild)return!1;const i=r.firstChild;if(!i)return!1;const a=t.before(),s=t.pos,c=n.after(),l=t.after(),d=e.doc.resolve(t.pos+1).after(),u=Ve(r.lastChild),p=1===o.childCount&&!u,h=n.pos,f=c,m=t.pos,b=i.content,g=u?r.content.cut(i.nodeSize,r.nodeSize-r.lastChild.nodeSize-2):r.content.cut(i.nodeSize),v=r.lastChild.content;return Object(He.d)(e,e=>e.doc.resolve(h),u?[[b,h],[g,f],[v,m]]:[[b,h],[g,f]],[p?[a,l]:[s,d]]),!0},kt=({tr:e,$next:t,$head:n})=>{const o=t.parent,r=t.nodeAfter;if(!r)return!1;const i=t.before(),a=t.after(),s=n.end(-1),c=n.pos,l=s,d=r.content,u=o.content.cut(r.nodeSize);return Object(He.d)(e,e=>e.doc.resolve(c),[[d,c],[u,l]],[[i,a]]),!0},xt=({tr:e,$next:t,$head:n})=>{const o=t.parent;if(!o.firstChild||!o.lastChild)return!1;const r=t.before(),i=t.before(),a=t.after(),s=Ve(o.lastChild),c=n.pos,l=n.pos+1,d=i-2,u=o.firstChild.content,p=s?o.content.cut(o.firstChild.nodeSize,o.nodeSize-o.lastChild.nodeSize-2):o.content.cut(o.firstChild.nodeSize),h=o.lastChild.content;return Object(He.d)(e,e=>e.doc.resolve(c),s?[[u,c],[p,l],[h,d]]:[[u,c],[p,l]],[[r,a]]),!0};const At=({tr:e,nextListNodeType:t})=>{const{selection:n,selection:{from:o,to:r}}=e,i=[];n instanceof s.TextSelection&&n.$cursor?i.push(o):e.doc.nodesBetween(o,r,(e,t)=>{if(!e.isLeaf)return!0;i.push(t)}),i.reduce((t,n)=>{const o=Object(f.findParentNodeClosestToPos)(e.doc.resolve(n),Ve);if(!o)return t;return t.find(e=>e.pos===o.pos&&e.start===o.start&&e.depth===o.depth)||t.push(o),t},[]).forEach(n=>{e.setNodeMarkup(n.pos,t)})},jt=({tr:e,nextListNodeType:t,nodeRange:n})=>{for(let o=n.endIndex-1;o>=n.startIndex;o--){const r=n.$from.posAtIndex(o,n.depth),i=e.doc.resolve(r+1),a=i.blockRange(i);if(!a)return;const s=Object($e.findWrapping)(a,t);if(!a||!s)return;e.wrap(a,s)}};function It(e){let t=null;if(Ve(e.doc.nodeAt(e.pos)))t=e.pos;else{const n=Object(f.findParentNodeClosestToPos)(e,Ve);t=n&&n.pos}if(null==t)return null;const n=e.doc.nodeAt(t);return n?{node:n,pos:t}:null}function Mt(e){const t=qe(e.doc.nodeAt(e.pos))?e:Object(f.findParentNodeClosestToPos)(e,qe);if(!t||null===t.pos)return null;const n=e.doc.nodeAt(t.pos);return n?{node:n,pos:t.pos}:null}const Nt=e=>{const t=e.selection,n=at({selection:e.selection,doc:e.doc}),o=function e(t){const{doc:n}=t;if(0===t.depth)return n.resolve(t.pos+1);const o=n.nodeAt(t.pos),r=t.before(),i=n.nodeAt(r);if(Ve(o)&&!qe(i))return n.resolve(t.pos+1);const a=Object(f.findParentNodeClosestToPos)(t,Ve);return a?e(n.resolve(a.pos)):null}(n.$from);if(!o)return;const r=n.$from.blockRange(o,Ve);if(!r)return;let i=!1,a=!1;const{from:s,to:c}=n;Pt(n).forEach(t=>{const n=e.doc.resolve(e.mapping.map(t.from)),o=e.doc.resolve(e.mapping.map(t.to)),r=n.blockRange(o,Ve);r&&(qe(n.node(r.depth-1))?Lt({tr:e,range:r}):(Dt({tr:e,range:r}),i=i||c>=t.from&&c<t.to,a=a||s>=t.from&&s<t.to))});const l=r.start!==e.mapping.map(r.start),d=Rt({originalSelection:t,normalizedSelection:n,tr:e,hasCommonListMoved:l,hasNormalizedToPositionLiftedOut:i,hasNormalizedFromPositionLiftedOut:a});e.setSelection(d),Xe({tr:e,direction:De.RIGHT})},Rt=({tr:e,originalSelection:t,normalizedSelection:n,hasCommonListMoved:o,hasNormalizedToPositionLiftedOut:r,hasNormalizedFromPositionLiftedOut:i})=>{const{$from:a,$to:c}=n,l=n.empty;let d=e.mapping.map(a.pos),u=e.mapping.map(c.pos);const p=a.sameParent(c);if(i){const e=p?a.pos:d;d=i?a.pos:e,d=o?d-2:d,d=Math.max(d,0)}if(r){const t=p?c.pos:u;u=r?c.pos:t,u=o?u-2:u,u=Math.min(u,e.doc.nodeSize-2)}if(n instanceof Ze.a){const t=e.doc.resolve(d);return new Ze.a(t,n.side)}return t instanceof s.NodeSelection?s.NodeSelection.create(e.doc,d):l?s.TextSelection.between(e.doc.resolve(u),e.doc.resolve(u),-1):s.TextSelection.between(e.doc.resolve(d),e.doc.resolve(u),-1)},Pt=e=>{const t=(({selection:e})=>{const{$from:t,$to:n}=e,o=t.blockRange(n,Ve);return o||null})({selection:e});if(!t)return[];const{$from:n,$to:o}=e;if(n.pos===o.pos&&n.sameParent(o))return[{from:t.start,to:t.end,depth:t.depth}];const r=_t(n);if(!r)return[];const i=[],{doc:a}=n;let s=_t(o);for(;s&&s.pos>=r.pos&&s.pos>=t.start;){const e=a.nodeAt(s.pos);if(!e||!qe(e))return[];let t=0;e&&e.lastChild&&Ve(e.lastChild)&&(t=e.lastChild.nodeSize);const n=s.pos+1;i.push({from:n,to:a.resolve(n).end()-t,depth:s.depth}),s=_t(s)}return i},Lt=({tr:e,range:t})=>{const n=t.end,o=t.$to.end(t.depth),{listItem:r}=e.doc.type.schema.nodes;if(n<o){const i=new Be.Slice(Be.Fragment.from(r.create(null,t.parent.copy())),1,0),a=new $e.ReplaceAroundStep(n-1,o,n,o,i,1,!0);e.step(a),t=new Be.NodeRange(e.doc.resolve(t.$from.pos),e.doc.resolve(o),t.depth)}const i=Object($e.liftTarget)(t);i&&e.lift(t,i)},Dt=({tr:e,range:t})=>{const n=t.parent,o=e.doc.resolve(t.start),r=o.start(t.depth),i=o.end(t.depth),a=r===t.start,s=i===t.end,c=a&&s;let l=a?Be.Fragment.empty:Be.Fragment.from(n.copy(Be.Fragment.empty));for(let u=t.startIndex;u<t.endIndex;u++)l=l.append(n.child(u).content);if(a)for(let u=0;u<l.childCount;u++){const e=l.child(u);if(e&&Ve(e)&&e.type!==n.type){const t=n.type.create(null,e.content);l=l.replaceChild(u,t)}}const d=l.append(Be.Fragment.from(n.copy(Be.Fragment.empty)));if(c){const n=new Be.Slice(l,0,0),r=new $e.ReplaceStep(o.pos-1,t.end+1,n,!1);e.step(r)}else if(a){const n=new Be.Slice(d,0,1),r=new $e.ReplaceStep(o.pos-1,t.end,n,!1);e.step(r)}else if(s){const t=new Be.Slice(l,1,0),n=new $e.ReplaceStep(o.pos,i+1,t,!1);e.step(n)}else{const n=new Be.Slice(d,1,1),r=new $e.ReplaceAroundStep(o.pos,i,t.end,i,n,n.size,!1);e.step(r)}},_t=e=>{const t=e.doc,n=Ve(e.node());let o=e;if(!n){const n=Mt(e);return n?t.resolve(n.pos):null}const r=t.resolve(o.pos),i=s.Selection.findFrom(r,-1);if(!i)return null;const a=Mt(i.$from);return a?t.resolve(a.pos):null};function Bt(e=mt.e.KEYBOARD){return function(t,n){if(!nt(t))return!1;const{$from:r}=t.selection,i=It(r);if(!i)return!0;const a=Ge(i.node)?mt.c.FORMAT_LIST_BULLET:mt.c.FORMAT_LIST_NUMBER;let s=t.tr;return Nt(s),!s||!s.docChanged||(Object(bt.a)(t,s,{action:mt.a.OUTDENTED,actionSubject:mt.b.LIST,actionSubjectId:a,eventType:mt.d.TRACK,attributes:Object(o.a)(Object(o.a)({},gt(t)),{},{inputMethod:e})}),n&&n(s),!0)}}const $t=(e,t)=>{const{selection:n}=e;if(n.empty){const{$from:r}=n,{listItem:i,codeBlock:a}=e.schema.nodes,s=r.node(r.depth),c=r.node(r.depth-1);if(c&&c.type===i){const r=Object(Ue.e)(c);if(Object(Ue.i)(s)&&!r)return Bt(mt.e.KEYBOARD)(e,t);if(!Object(f.hasParentNodeOfType)(a)(n))return(o=i,function(e,t){const n=e.selection,r=n.$from,i=n.$to,a=n.node;if(a&&a.isBlock||r.depth<2||!r.sameParent(i))return!1;const s=r.node(-1);if(s.type!==o)return!1;if(s.content.content.length<=1&&0===r.parent.content.size&&0!==s.content.size){if(2===r.depth||r.node(-3).type!==o||r.index(-2)!==r.node(-2).childCount-1)return!1;if(t){let n=Be.Fragment.empty;const i=r.index(-1)>0;for(let e=r.depth-(i?1:2);e>=r.depth-3;e--)n=Be.Fragment.from(r.node(e).copy(n));n=n.append(Be.Fragment.from(o.createAndFill()));const a=e.tr.replace(r.before(i?void 0:-1),r.after(-3),new Be.Slice(n,i?3:2,2));a.setSelection(e.selection.constructor.near(a.doc.resolve(r.pos+(i?3:2)))),t(a.scrollIntoView())}return!0}const c=i.pos===r.end()?s.contentMatchAt(0).defaultType:void 0,l=e.tr.delete(r.pos,i.pos),d=c&&[void 0,{type:c}];return t&&t(l.split(r.pos,2,d).scrollIntoView()),!0})(e,t)}}var o;return!1},zt=(e,t)=>ze.c(Et,Object(He.b)([He.f,He.g,nt],ze.c(Wt,Bt(mt.e.KEYBOARD))),Object(He.b)([He.f,ot],Vt))(e,t),Ft=(e,t)=>{const{tr:n,selection:{$head:o}}=e,r=Object(He.j)(o);if(!Object(He.e)(e))return!1;const i=((e,t)=>{const{$pos:n,foundNode:o}=e,r=t.parent,i=t.node(-1),a=et(t),s=Qe(t),c=i&&i.lastChild&&(i.lastChild===r||i.childCount>1&&i.child(i.childCount-2)===r&&Ve(i.lastChild)),l=et(n),d=Qe(n);if(!a&&s&&l)return[yt.b.JOIN_LIST_ITEM_WITH_PARAGRAPH,wt];if(!(o&&a&&s&&c))return!1;if(!l&&d)return[yt.b.JOIN_PARAGRAPH_WITH_LIST,Tt];if(!l)return!1;const u=n.nodeAfter,p=n.node(-1),h=t.node(-2),f=qe(n.parent),m=qe(u),b=u&&m&&Ke(u.firstChild);if(!f&&b)return[yt.b.JOIN_DESCENDANT_TO_PARENT,St];if(!f)return!1;const g=p&&p===h;return!!Ke(u)&&(g?[yt.b.JOIN_SIBLINGS,kt]:[yt.b.JOIN_PARENT_SIBLING_TO_PARENT_CHILD,xt])})(r,o);if(!i)return!1;const[a,s]=i;if(!s({tr:n,$next:r.$pos,$head:o}))return!1;const{bulletList:c,orderedList:l}=e.schema.nodes,d=Object(f.findParentNodeOfType)([c,l])(n.selection);let u=mt.c.FORMAT_LIST_BULLET;return d&&d.node.type===l&&(u=mt.c.FORMAT_LIST_NUMBER),Object(bt.a)(e,n,{action:mt.a.LIST_ITEM_JOINED,actionSubject:mt.b.LIST,actionSubjectId:u,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.KEYBOARD,direction:yt.a.FORWARD,scenario:a}}),t&&t(n),!0};function Ut(e){const{selection:t}=e,n=((e,t)=>{const{bulletList:n,orderedList:o,listItem:r}=t;let i;for(let a=e.depth-1;a>0;a--){const t=e.node(a);if(t.type!==n&&t.type!==o||(i=a),t.type!==n&&t.type!==o&&t.type!==r)break}return i})(t.$to,e.doc.type.schema.nodes);e=function(e,t,n,o){const{listItem:r}=o.doc.type.schema.nodes;let i=!1;return o.doc.nodesBetween(e,t,(t,a)=>{if(!i&&t.type===r&&a>e){i=!0;let e=n+3;for(;e>n+2;){const n=o.doc.resolve(o.mapping.map(a));e=n.depth;const r=o.doc.resolve(o.mapping.map(a+t.textContent.length)),i=new s.TextSelection(n,r);o=dt(i,o)}}}),o}(t.$to.pos,t.$to.end(n),n||0,e),e=function(e,t){const{from:n,to:o}=e,{paragraph:r}=t.doc.type.schema.nodes,i=[];t.doc.nodesBetween(n,o,(e,t)=>{e.type===r&&i.push({node:e,pos:t})});for(let a=i.length-1;a>=0;a--){const e=i[a],n=t.doc.resolve(t.mapping.map(e.pos));if(n.depth>0){let o;o=e.node.textContent&&e.node.textContent.length>0?t.doc.resolve(t.mapping.map(e.pos+e.node.textContent.length)):t.doc.resolve(t.mapping.map(e.pos+1));const r=n.blockRange(o);r&&t.lift(r,lt(n))}}return t}(t,e)}function Ht(e,t){return function(n,r){let i=n.tr;const a=(e=>{const{selection:{from:t,to:n}}=e;let o=null;return e.doc.nodesBetween(t,n,e=>(Ve(e)&&(o=e),!o)),o})(i),s=n.schema.nodes[t],c="bulletList"===t?mt.c.FORMAT_LIST_BULLET:mt.c.FORMAT_LIST_NUMBER;if(a){const{selection:l}=n,d=l.$from.node(l.$from.depth-2),u=l.$to.node(l.$to.depth-2),p="bulletList"===a.type.name?mt.c.FORMAT_LIST_BULLET:mt.c.FORMAT_LIST_NUMBER;if(d.type.name===t&&u.type.name===t){let t=n.tr;return Ut(t),Object(bt.a)(n,t,{action:mt.a.CONVERTED,actionSubject:mt.b.LIST,actionSubjectId:mt.c.TEXT,eventType:mt.d.TRACK,attributes:Object(o.a)(Object(o.a)({},gt(n)),{},{transformedFrom:p,inputMethod:e})}),r&&r(t),!0}!function({tr:e,nextListNodeType:t}){const{doc:n,selection:{$from:o,$to:r}}=e;if(o.blockRange(r,Ve))return At({tr:e,nextListNodeType:t});const i=o.blockRange(r);if(!i)return;const a=i.parent,{startIndex:s,endIndex:c,depth:l}=i,d={from:Ve(a.child(s))?null:n.resolve(i.$from.posAtIndex(s,l)+1),to:null},u={from:null,to:Ve(a.child(c-1))?null:n.resolve(i.$from.posAtIndex(c-1,l)+1)};let p,h,f,m,b=!1,g=!1;for(let v=s;v<c;v++){const e=i.$from.posAtIndex(v,l),t=n.resolve(e);if(Object(Ue.g)(a.child(v))&&!b&&(d.from=n.resolve(i.$from.posAtIndex(v,l)+2)),Object(Ue.g)(a.child(v))&&b&&!g&&(u.to=t,g=!0),Ve(a.child(v))||b){if(!b){b=!0;const e=n.resolve(t.pos+1).end()+1;n.resolve(e).nodeAfter&&(u.from=n.resolve(e+1))}}else d.to=n.resolve(t.pos+1)}if(u.from&&u.to){const n=e.mapping.map(u.from.pos),o=e.mapping.map(u.to.pos);m=new Be.NodeRange(e.doc.resolve(n),e.doc.resolve(o),i.depth),f={tr:e,nextListNodeType:t,nodeRange:m}}if(d.from&&d.to){const n=e.mapping.map(d.from.pos),o=e.mapping.map(d.to.pos);h=new Be.NodeRange(e.doc.resolve(n),e.doc.resolve(o),i.depth),p={tr:e,nextListNodeType:t,nodeRange:h}}!m&&!h||m&&!Object($e.findWrapping)(m,t)||h&&!Object($e.findWrapping)(h,t)||(f&&jt(f),p&&jt(p),e.docChanged&&Xe({tr:e,forceListType:t}))}({tr:i,nextListNodeType:s}),Object(bt.a)(n,i,{action:mt.a.CONVERTED,actionSubject:mt.b.LIST,actionSubjectId:c,eventType:mt.d.TRACK,attributes:Object(o.a)(Object(o.a)({},gt(n)),{},{transformedFrom:p,inputMethod:e})})}else{const t=e=>{i=e};(l=s,ze.a(Fe.c(l),(e,t)=>e.type===t.type&&e.type===l))(n,t),Object(bt.a)(n,i,{action:mt.a.INSERTED,actionSubject:mt.b.LIST,actionSubjectId:c,eventType:mt.d.TRACK,attributes:{inputMethod:e}})}var l;return!!i.docChanged&&(Object(We.d)(i,s),r&&r(i),!0)}}const Wt=(e,t)=>{const{$from:n}=e.selection,{listItem:o}=e.schema.nodes,r=Object(He.c)(n);if(!r||!r.nodeBefore||r.nodeBefore.type!==o)return!1;if(1===r.nodeBefore.childCount&&r.nodeBefore.firstChild.nodeSize<=2){const{tr:o}=e;return t&&t(o.delete(r.pos-r.nodeBefore.nodeSize,n.pos).scrollIntoView()),!0}return!1},Vt=(e,t)=>{const{$from:n}=e.selection,{paragraph:o,listItem:r,codeBlock:i,bulletList:a,orderedList:s}=e.schema.nodes,c=e.selection instanceof Ze.a,l=c?e.doc.resolve(n.pos+1):n;let d=Object(He.c)(l);if(!d)return!1;if(d.nodeBefore&&[a,s].indexOf(d.nodeBefore.type)>-1&&d.nodeAfter&&(d.nodeAfter.type===o||d.nodeAfter.type===i)){let i=d.doc.resolve(d.pos-1);for(;i.parent.type!==o;)i=e.doc.resolve(i.pos-1);let{tr:l}=e;if(c){const e=Object(f.findPositionOfNodeBefore)(l.selection);if("number"!=typeof e)return!1;const t=d.nodeBefore.copy(d.nodeBefore.content.append(Be.Fragment.from(r.createChecked({},d.nodeAfter))));l.replaceWith(e,n.pos+d.nodeAfter.nodeSize,t)}else l=e.tr.step(new $e.ReplaceAroundStep(i.pos,d.pos+d.nodeAfter.nodeSize,d.pos+1,d.pos+d.nodeAfter.nodeSize-1,e.tr.doc.slice(i.pos,d.pos),0,!0));let u=l.doc.resolve(l.mapping.map(d.pos+d.nodeAfter.nodeSize));return u.nodeBefore&&u.nodeAfter&&u.nodeBefore.type===u.nodeAfter.type&&[a,s].indexOf(u.nodeBefore.type)>-1&&(l=l.join(u.pos)),t&&t(l.scrollIntoView()),!0}return!1};var Kt=n("+rkc");class qt extends i.PureComponent{constructor(){super(...arguments),this.state={isDropdownOpen:!1},this.onOpenChange=e=>{this.setState({isDropdownOpen:e.isDropdownOpen})},this.handleTriggerClick=()=>{this.onOpenChange({isDropdownOpen:!this.state.isDropdownOpen})},this.createItems=()=>{const{bulletListDisabled:e,orderedListDisabled:t,bulletListActive:n,orderedListActive:o,intl:{formatMessage:r}}=this.props,i=r(Kt.a.unorderedList),s=r(Kt.a.orderedList);return[{items:[{key:"unorderedList",content:i,value:{name:"bullet_list"},isDisabled:e,isActive:Boolean(n),elemAfter:a.a.createElement(_e.h,null,Object(Te.tooltip)(Te.toggleBulletList))},{key:"orderedList",content:s,value:{name:"ordered_list"},isDisabled:t,isActive:Boolean(o),elemAfter:a.a.createElement(_e.h,null,Object(Te.tooltip)(Te.toggleOrderedList))}]}]},this.handleBulletListClick=()=>!(this.props.bulletListDisabled||!function(e,t=mt.e.TOOLBAR){return Ht(t,"bulletList")(e.state,e.dispatch)}(this.props.editorView,mt.e.TOOLBAR)),this.handleOrderedListClick=()=>!(this.props.orderedListDisabled||!function(e,t=mt.e.TOOLBAR){return Ht(t,"orderedList")(e.state,e.dispatch)}(this.props.editorView,mt.e.TOOLBAR)),this.onItemActivated=({item:e})=>{switch(this.setState({isDropdownOpen:!1}),e.value.name){case"bullet_list":this.handleBulletListClick();break;case"ordered_list":this.handleOrderedListClick()}}}render(){const{disabled:e,isSmall:t,isReducedSpacing:n,isSeparator:o,bulletListActive:r,bulletListDisabled:i,orderedListActive:s,orderedListDisabled:c,intl:{formatMessage:l}}=this.props,{isDropdownOpen:d}=this.state;if(t){const t=this.createItems(),{popupsMountPoint:i,popupsBoundariesElement:c,popupsScrollableElement:u}=this.props,p=l(Kt.a.lists);return a.a.createElement(_e.j,null,a.a.createElement(Le,{items:t,onItemActivated:this.onItemActivated,mountTo:i,boundariesElement:c,scrollableElement:u,isOpen:d,onOpenChange:this.onOpenChange,fitHeight:188,fitWidth:175},a.a.createElement(O.a,{spacing:n?"none":"default",selected:r||s,disabled:e,onClick:this.handleTriggerClick,title:p,iconBefore:a.a.createElement(_e.j,null,a.a.createElement(Ee.a,{label:p}),a.a.createElement(_e.e,null,a.a.createElement(q.a,{label:p})))})),o&&a.a.createElement(_e.g,null))}{const t=l(Kt.a.unorderedList),d=l(Kt.a.orderedList);return a.a.createElement(_e.b,{width:n?"small":"large"},a.a.createElement(O.a,{spacing:n?"none":"default",onClick:this.handleBulletListClick,selected:r,disabled:i||e,title:a.a.createElement(Te.ToolTipContent,{description:t,keymap:Te.toggleBulletList}),iconBefore:a.a.createElement(Ee.a,{label:t})}),a.a.createElement(O.a,{spacing:n?"none":"default",onClick:this.handleOrderedListClick,selected:s,disabled:c||e,title:a.a.createElement(Te.ToolTipContent,{description:d,keymap:Te.toggleOrderedList}),iconBefore:a.a.createElement(Ce.a,{label:d})}),o&&a.a.createElement(_e.g,null))}}}var Gt=Object(h.g)(qt),Yt=n("lELC"),Xt=n("9dFV");const Jt=new s.PluginKey("listsPredictablePlugin"),Zt=Jt,Qt={bulletListActive:!1,bulletListDisabled:!1,orderedListActive:!1,orderedListDisabled:!1,decorationSet:Yt.b.empty},en=e=>{const t=[],n=[];return e.nodesBetween(0,e.content.size,(e,o)=>{if(n.length>0){let e=!0;for(;e&&n.length>0;){const t=n[n.length-1];e=o>=t.startPos+t.node.nodeSize,e&&n.pop()}}if(Ve(e)){n.push({node:e,startPos:o});const r=o,i=o+e.nodeSize,a=n.length;t.push(Yt.a.node(r,i,{"data-indent-level":""+a}))}}),Yt.b.empty.add(e,t)},tn=(e,t)=>{const{bulletList:n,orderedList:r}=e.doc.type.schema.nodes,i=Object(f.findParentNodeOfType)([n,r])(e.selection),a=!!i&&i.node.type===n,s=!!i&&i.node.type===r,c=!(a||s||tt(n,e.selection)),l=!(a||s||tt(r,e.selection));if(a!==t.bulletListActive||s!==t.orderedListActive||c!==t.bulletListDisabled||l!==t.orderedListDisabled){return Object(o.a)(Object(o.a)({},t),{},{bulletListActive:a,orderedListActive:s,bulletListDisabled:c,orderedListDisabled:l})}return t},{getPluginState:nn,createPluginState:on}=Object(Xt.a)(Jt,e=>e,{onDocChanged:(e,t)=>{const n=tn(e,t),r=en(e.doc);return Object(o.a)(Object(o.a)({},n),{},{decorationSet:r})},onSelectionChanged:tn}),rn=e=>Object(o.a)(Object(o.a)({},Qt),{},{decorationSet:en(e.doc)});var an=n("AcaO"),sn=n("r8pW");function cn({listType:e,expression:t}){const n="bulletList"===e.name,o=Object(sn.e)(t,e,{},(t,n)=>n.type===e);return function({inputRule:e,listType:t}){const n="bulletList"===t?mt.c.FORMAT_LIST_BULLET:mt.c.FORMAT_LIST_NUMBER,o=e.handler;return e.handler=(e,t,r,i)=>{const a=o(e,t,r,i);if(a){Object(We.d)(a).forEach(({node:t,marksRemoved:o})=>{Object(bt.a)(e,a,{action:mt.a.NODE_CONTENT_SANITIZED,actionSubject:mt.b.LIST,actionSubjectId:n,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.FORMATTING,nodeSanitized:t.type.name,marksRemoved:o.map(e=>e.type.name)}})}),Object(bt.a)(e,a,{action:mt.a.INSERTED,actionSubject:mt.b.LIST,actionSubjectId:n,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.FORMATTING}})}return a},e}({listType:n?"bulletList":"orderedList",inputRule:Object(an.b)(o,!0)})}var ln=n("ALnk");const dn=({selection:e})=>{const{$from:t,$to:n}=e,o=t.blockRange(n,Ve);return o||null},un=({tr:e,normalizedSelection:t,originalSelection:n,hasPreviousNestedList:o})=>{const r=o?2:0,{$from:i,$to:a}=t;if(t instanceof Ze.a){const n=e.doc.resolve(i.pos-r);return new Ze.a(n,t.side)}if(n instanceof s.NodeSelection)return s.NodeSelection.create(e.doc,i.pos-r);const{$from:c}=s.Selection.near(e.doc.resolve(i.pos-r)),{$to:l}=s.Selection.near(e.doc.resolve(a.pos-r),-1);return new s.TextSelection(c,l)},pn=({tr:e,from:t,to:n,listNodeType:o,range:r})=>{const i=e.doc.slice(t,n-2),a=Be.Fragment.from(o.create(null,i.content)),s=e.doc.slice(n,r.end-2),c=e.doc.slice(t-1,r.end).openStart;return[new Be.Slice(a,c,0),s]};function hn(e=mt.e.KEYBOARD){return function(t,n){const{tr:r,selection:{$from:i}}=t;if(!nt(t))return!1;const a=it(i);if(a&&0===a.indentLevel&&0===a.itemIndex)return!0;const s=It(i);if(!s)return!0;const c=Ge(s.node)?mt.c.FORMAT_LIST_BULLET:mt.c.FORMAT_LIST_NUMBER;(e=>{const t=e.selection,n=at({selection:t,doc:e.doc}),{$from:o,$to:r}=n,i=dn({selection:n});if(!i)return!1;const a={from:Mt(o),to:Mt(r)};if(null===a.from||null===a.to)return null;const s=e.doc.resolve(a.from.pos),c=s.index(),l=s.posAtIndex(c-1),d=e.doc.nodeAt(l);if(!d||!qe(d))return null;if(qe(d)&&0===c)return null;const u=i.parent,p=Ve(d.lastChild)?d.lastChild:null,h=p?p.type:u.type,f=a.to.node.lastChild,m=f&&Ve(f)?f.nodeSize:0,b=a.from.pos,g=a.to.pos+a.to.node.nodeSize-m,[v,y]=pn({tr:e,listNodeType:h,range:i,from:b,to:g}),O=Boolean(p),E=b-1;e.replaceRange(O?E-1:E,i.end,v);const w=e.mapping.map(g)-2;0===y.openStart?e.insert(w,y.content):e.replace(w-y.openStart,w-y.openStart,y);const C=un({originalSelection:t,normalizedSelection:n,tr:e,hasPreviousNestedList:O});e.setSelection(C)})(r);return!(({tr:e,maxIndentation:t})=>{const n=rt(e.selection.$from);let o,r=e.selection.$to.pos;do{const n=e.doc.resolve(r);if(o=rt(n),o>t)return!1;r++}while(o>=n);return!0})({tr:r,maxIndentation:6})||!r.docChanged||(Object(bt.a)(t,r,{action:mt.a.INDENTED,actionSubject:mt.b.LIST,actionSubjectId:c,eventType:mt.d.TRACK,attributes:Object(o.a)(Object(o.a)({},gt(t)),{},{inputMethod:e})}),n&&n(r),!0)}}var fn=function(){const e={};return Te.bindKeymapWithCommand(Te.findShortcutByKeymap(Te.toggleOrderedList),Ht(mt.e.KEYBOARD,"orderedList"),e),Te.bindKeymapWithCommand(Te.findShortcutByKeymap(Te.toggleBulletList),Ht(mt.e.KEYBOARD,"bulletList"),e),Te.bindKeymapWithCommand(Te.indentList.common,hn(mt.e.KEYBOARD),e),Te.bindKeymapWithCommand(Te.outdentList.common,Bt(mt.e.KEYBOARD),e),Te.bindKeymapWithCommand(Te.enter.common,$t,e),Te.bindKeymapWithCommand(Te.backspace.common,zt,e),Te.bindKeymapWithCommand(Te.deleteKey.common,Ft,e),Te.bindKeymapWithCommand(Te.findKeyMapForBrowser(Te.forwardDelete),Ft,e),Object(ln.b)(e)},mn=n("5FKe"),bn=n("y3ol");var gn=()=>({name:"listPredictable",nodes:()=>[{name:"bulletList",node:ge.a},{name:"orderedList",node:ve.a},{name:"listItem",node:ye.a}],pmPlugins:()=>[{name:"listsPredictable",plugin:({dispatch:e})=>{return t=e,new s.Plugin({state:on(t,rn),key:Jt,appendTransaction(e,t,n){if(!e[e.length-1].docChanged)return;const o=n.tr,r=Xe({tr:o,direction:De.RIGHT});if(o.docChanged){const{orderedList:e,bulletList:t}=r;return Object(bt.a)(n,o,{action:mt.a.FIXED,actionSubject:mt.b.LIST,eventType:mt.d.TRACK,attributes:{orderedListsJoined:e,bulletListsJoined:t}}),o}},props:{decorations(e){const{decorationSet:t}=nn(e);return t}}});var t}},{name:"listsPredictableInputRule",plugin:({schema:e})=>function(e){const{nodes:{bulletList:t,orderedList:n}}=e,o=[];if(t&&o.push(cn({expression:/^\s*([\*\-]) $/,listType:t})),n&&o.push(cn({expression:/^(1)[\.\)] $/,listType:n})),0!==o.length)return Object(an.c)("lists",{rules:o})}(e)},{name:"listsPredictableKeymap",plugin:()=>fn()}],pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"unorderedList",title:e(Kt.a.unorderedList),description:e(Kt.a.unorderedListDescription),keywords:["ul","unordered"],priority:1100,keyshortcut:Object(Te.tooltip)(Te.toggleBulletList),icon:()=>a.a.createElement(mn.m,{label:e(Kt.a.unorderedList)}),action(e,t){const n=e(t.schema.nodes.bulletList.createChecked({},t.schema.nodes.listItem.createChecked({},t.schema.nodes.paragraph.createChecked())));return Object(bt.a)(t,n,{action:mt.a.INSERTED,actionSubject:mt.b.LIST,actionSubjectId:mt.c.FORMAT_LIST_BULLET,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.QUICK_INSERT}})}},{id:"orderedList",title:e(Kt.a.orderedList),description:e(Kt.a.orderedListDescription),keywords:["ol","ordered"],priority:1200,keyshortcut:Object(Te.tooltip)(Te.toggleOrderedList),icon:()=>a.a.createElement(mn.n,{label:e(Kt.a.orderedList)}),action(e,t){const n=e(t.schema.nodes.orderedList.createChecked({},t.schema.nodes.listItem.createChecked({},t.schema.nodes.paragraph.createChecked())));return Object(bt.a)(t,n,{action:mt.a.INSERTED,actionSubject:mt.b.LIST,actionSubjectId:mt.c.FORMAT_LIST_NUMBER,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.QUICK_INSERT}})}}]},primaryToolbarComponent({editorView:e,popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,toolbarSize:r,disabled:i,isToolbarReducedSpacing:s}){const c=r<bn.a.L,l=r>=bn.a.S;return a.a.createElement(d.a,{plugins:{listsState:Zt},render:({listsState:r})=>a.a.createElement(Gt,{isSmall:c,isSeparator:l,isReducedSpacing:s,disabled:i,editorView:e,popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,bulletListActive:r.bulletListActive,bulletListDisabled:r.bulletListDisabled,orderedListActive:r.orderedListActive,orderedListDisabled:r.orderedListDisabled})})}}),vn=n("de4v");class yn extends i.PureComponent{constructor(){super(...arguments),this.state={isDropdownOpen:!1},this.onOpenChange=e=>{this.setState({isDropdownOpen:e.isDropdownOpen})},this.handleTriggerClick=()=>{this.onOpenChange({isDropdownOpen:!this.state.isDropdownOpen})},this.createItems=()=>{const{bulletListDisabled:e,orderedListDisabled:t,bulletListActive:n,orderedListActive:o,intl:{formatMessage:r}}=this.props,i=r(Kt.a.unorderedList),s=r(Kt.a.orderedList);return[{items:[{key:"unorderedList",content:i,value:{name:"bullet_list"},isDisabled:e,isActive:Boolean(n),elemAfter:a.a.createElement(_e.h,null,Object(Te.tooltip)(Te.toggleBulletList))},{key:"orderedList",content:s,value:{name:"ordered_list"},isDisabled:t,isActive:Boolean(o),elemAfter:a.a.createElement(_e.h,null,Object(Te.tooltip)(Te.toggleOrderedList))}]}]},this.handleBulletListClick=()=>!(this.props.bulletListDisabled||!Object(vn.f)(this.props.editorView,mt.e.TOOLBAR)),this.handleOrderedListClick=()=>!(this.props.orderedListDisabled||!Object(vn.h)(this.props.editorView,mt.e.TOOLBAR)),this.onItemActivated=({item:e})=>{switch(this.setState({isDropdownOpen:!1}),e.value.name){case"bullet_list":this.handleBulletListClick();break;case"ordered_list":this.handleOrderedListClick()}}}render(){const{disabled:e,isSmall:t,isReducedSpacing:n,isSeparator:o,bulletListActive:r,bulletListDisabled:i,orderedListActive:s,orderedListDisabled:c,intl:{formatMessage:l}}=this.props,{isDropdownOpen:d}=this.state;if(t){const t=this.createItems(),{popupsMountPoint:i,popupsBoundariesElement:c,popupsScrollableElement:u}=this.props,p=l(Kt.a.lists);return a.a.createElement(_e.j,null,a.a.createElement(Le,{items:t,onItemActivated:this.onItemActivated,mountTo:i,boundariesElement:c,scrollableElement:u,isOpen:d,onOpenChange:this.onOpenChange,fitHeight:188,fitWidth:175},a.a.createElement(O.a,{spacing:n?"none":"default",selected:r||s,disabled:e,onClick:this.handleTriggerClick,title:p,iconBefore:a.a.createElement(_e.j,null,a.a.createElement(Ee.a,{label:p}),a.a.createElement(_e.e,null,a.a.createElement(q.a,{label:p})))})),o&&a.a.createElement(_e.g,null))}{const t=l(Kt.a.unorderedList),d=l(Kt.a.orderedList);return a.a.createElement(_e.b,{width:n?"small":"large"},a.a.createElement(O.a,{spacing:n?"none":"default",onClick:this.handleBulletListClick,selected:r,disabled:i||e,title:a.a.createElement(Te.ToolTipContent,{description:t,keymap:Te.toggleBulletList}),iconBefore:a.a.createElement(Ee.a,{label:t})}),a.a.createElement(O.a,{spacing:n?"none":"default",onClick:this.handleOrderedListClick,selected:s,disabled:c||e,title:a.a.createElement(Te.ToolTipContent,{description:d,keymap:Te.toggleOrderedList}),iconBefore:a.a.createElement(Ce.a,{label:d})}),o&&a.a.createElement(_e.g,null))}}}var On=Object(h.g)(yn),En=n("LUcZ");function wn(e,t){return Object(sn.e)(e,t,{},(e,n)=>n.type===t)}const Cn=(e,t,n,o)=>{const{hardBreak:r}=e.schema.nodes;if(e.doc.resolve(n).nodeAfter.type!==r)return null;if(e.doc.resolve(n).depth>1)return null;let i=e.tr.delete(n,o).split(n),a=i.doc.nodeAt(n+1);i.doc.nodesBetween(n,n+a.nodeSize,(e,t)=>{e.type===r&&(i=i.split(t+1).delete(t,t+1))});const{listItem:s}=e.schema.nodes,c=i.doc.resolve(n+2);let l=c.blockRange(c);return i=i.wrap(l,[{type:t},{type:s}]),i};function Tn(e){const t=[];if(e.nodes.bulletList&&t.push(...function(e){const t=Object(bt.c)(()=>({action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_LIST_BULLET,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.FORMATTING}})),n=Object(an.b)(wn(/^\s*([\*\-]) $/,e.nodes.bulletList),!0),o=Object(an.a)(new RegExp(an.d+"\\s*([\\*\\-]) $"),(t,n,o,r)=>Cn(t,e.nodes.bulletList,o,r),!0);return[t(n),t(o)]}(e)),e.nodes.orderedList&&t.push(...function(e){const t=Object(bt.c)(()=>({action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_LIST_NUMBER,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.FORMATTING}})),n=Object(an.b)(wn(/^(1)[\.\)] $/,e.nodes.orderedList),!0),o=Object(an.a)(new RegExp(an.d+"(1)[\\.\\)] $"),(t,n,o,r)=>Cn(t,e.nodes.orderedList,o,r),!0);return[t(n),t(o)]}(e)),0!==t.length)return Object(an.c)("lists",{rules:t})}var Sn=function(){const e={};return Te.bindKeymapWithCommand(Te.findShortcutByKeymap(Te.toggleOrderedList),Object(vn.g)(mt.e.KEYBOARD,"orderedList"),e),Te.bindKeymapWithCommand(Te.findShortcutByKeymap(Te.toggleBulletList),Object(vn.g)(mt.e.KEYBOARD,"bulletList"),e),Te.bindKeymapWithCommand(Te.indentList.common,Object(vn.d)(mt.e.KEYBOARD),e),Te.bindKeymapWithCommand(Te.outdentList.common,Object(vn.e)(mt.e.KEYBOARD),e),Te.bindKeymapWithCommand(Te.enter.common,vn.c,e),Te.bindKeymapWithCommand(Te.backspace.common,vn.a,e),Te.bindKeymapWithCommand(Te.deleteKey.common,vn.b,e),Object(ln.b)(e)};var kn=()=>({name:"list",nodes:()=>[{name:"bulletList",node:ge.a},{name:"orderedList",node:ve.a},{name:"listItem",node:ye.a}],pmPlugins:()=>[{name:"lists",plugin:({dispatch:e})=>Object(En.a)(e)},{name:"listsInputRule",plugin:({schema:e})=>Tn(e)},{name:"listsKeymap",plugin:()=>Sn()}],pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"unorderedList",title:e(Kt.a.unorderedList),description:e(Kt.a.unorderedListDescription),keywords:["ul","unordered"],priority:1100,keyshortcut:Object(Te.tooltip)(Te.toggleBulletList),icon:()=>a.a.createElement(mn.m,{label:e(Kt.a.unorderedList)}),action(e,t){const n=e(t.schema.nodes.bulletList.createChecked({},t.schema.nodes.listItem.createChecked({},t.schema.nodes.paragraph.createChecked())));return Object(bt.a)(t,n,{action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_LIST_BULLET,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.QUICK_INSERT}})}},{id:"orderedList",title:e(Kt.a.orderedList),description:e(Kt.a.orderedListDescription),keywords:["ol","ordered"],priority:1200,keyshortcut:Object(Te.tooltip)(Te.toggleOrderedList),icon:()=>a.a.createElement(mn.n,{label:e(Kt.a.orderedList)}),action(e,t){const n=e(t.schema.nodes.orderedList.createChecked({},t.schema.nodes.listItem.createChecked({},t.schema.nodes.paragraph.createChecked())));return Object(bt.a)(t,n,{action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_LIST_NUMBER,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.QUICK_INSERT}})}}]},primaryToolbarComponent({editorView:e,popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,toolbarSize:r,disabled:i,isToolbarReducedSpacing:s}){const c=r<bn.a.L;return a.a.createElement(d.a,{plugins:{listsState:En.b},render:({listsState:r})=>a.a.createElement(On,{isSmall:c,isSeparator:!0,isReducedSpacing:s,disabled:i,editorView:e,popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,bulletListActive:r.bulletListActive,bulletListDisabled:r.bulletListDisabled,orderedListActive:r.orderedListActive,orderedListDisabled:r.orderedListDisabled})})}}),xn=n("LZ3D"),An=n("3uux"),jn=n("1Z4V"),In=n("4AGm");const Mn=(e,t,n,o)=>{if(!e.selection.empty)return null;let r=null;const{newInsertionBehaviour:i}=Object(jn.b)(e);return i&&(r=e.tr.replaceWith(t,n,Be.Fragment.empty),r=Object(An.b)(e.schema.nodes.rule.createChecked(),r.selection.from)(r)),r||(r=e.tr.replaceRange(t,n,new Be.Slice(Be.Fragment.from(e.schema.nodes.rule.createChecked()),0,0))),Object(bt.a)(e,r,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.DIVIDER,attributes:{inputMethod:o},eventType:mt.d.TRACK})},Nn=(e,t,n)=>Mn(e,t,n,mt.e.FORMATTING);var Rn=function(e){const t=[];if(e.nodes.rule&&(t.push(Object(an.a)(/^(\-\-\-|\*\*\*)$/,(e,t,n,o)=>Nn(e,n,o),!0)),t.push(Object(an.a)(new RegExp(an.d+"(\\-\\-\\-|\\*\\*\\*)"),(e,t,n,o)=>{const{hardBreak:r}=e.schema.nodes;return e.doc.resolve(n).nodeAfter.type!==r?null:Nn(e,n,o)},!0))),0!==t.length)return Object(an.c)("rule",{rules:t})};var Pn=function(){const e={};return Te.bindKeymapWithCommand(Te.insertRule.common,Object(bt.d)({action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.DIVIDER,attributes:{inputMethod:mt.e.SHORTCUT},eventType:mt.d.TRACK})(z.i()),e),Te.bindKeymapWithCommand(Te.escape.common,()=>!0,e),Object(ln.b)(e)};var Ln=()=>({name:"rule",nodes:()=>[{name:"rule",node:xn.a}],pmPlugins:()=>[{name:"ruleInputRule",plugin:({schema:e})=>Rn(e)},{name:"ruleKeymap",plugin:()=>Pn()}],pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"rule",title:e(In.a.horizontalRule),description:e(In.a.horizontalRuleDescription),keywords:["horizontal","rule","line","hr"],priority:1200,keyshortcut:"---",icon:()=>a.a.createElement(mn.e,{label:e(In.a.horizontalRule)}),action(e,t){let n=null;const{newInsertionBehaviour:o}=Object(jn.b)(t);return o&&(n=e(Be.Fragment.empty),n=Object(An.b)(t.schema.nodes.rule.createChecked(),n.selection.from)(n)),n||(n=e(t.schema.nodes.rule.createChecked())),Object(bt.a)(t,n,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.DIVIDER,attributes:{inputMethod:mt.e.QUICK_INSERT},eventType:mt.d.TRACK})}}]}}),Dn=n("634R"),_n=n("ErTH"),Bn=n("r1uL"),$n=n("7nmT"),zn=n.n($n),Fn=n("HbGN"),Un=n("zJ/j"),Hn=n("bxm/"),Wn=n("5ypJ"),Vn=n.n(Wn),Kn=n("E40X");const qn=Object(i.forwardRef)((function(e,t){return a.a.createElement(Hn.b,Object.assign({},e,{innerRef:t}))})),Gn=e=>{const{label:t,allowInteractiveExpand:n}=e,r=Object(i.useCallback)((t,n)=>{const r=t(n),{buttonStyles:i}=r,a=Object(Fn.a)(r,["buttonStyles"]);return Object(o.a)({buttonStyles:Object(o.a)(Object(o.a)({},i),{},{height:"100%","& svg":{transform:e.expanded?"transform: rotate(90deg);":"tranform: rotate(0deg);",transition:`transform 0.2s ${je.M};`}})},a)},[e]);return a.a.createElement(Un.a,{appearance:"subtle",className:Kn.a.iconContainer,iconBefore:a.a.createElement(Vn.a,{label:t}),shouldFitContainer:!0,theme:r,isDisabled:!n})},Yn=(Xn=Gn,class extends a.a.Component{constructor(e){super(e)}render(){const{label:e}=this.props;return a.a.createElement(Ae.a,{content:e,position:"top",tag:qn},a.a.createElement(Xn,Object.assign({},this.props)))}});var Xn;const Jn=Gn,Zn=e=>{const{expanded:t,intl:n}=e,o=t?Hn.c.collapseNode:Hn.c.expandNode,r=n&&n.formatMessage(o)||o.defaultMessage,i=!(!!window.matchMedia&&window.matchMedia("(any-hover: hover)").matches!==window.matchMedia("(any-hover: none)").matches)||window.matchMedia("(any-hover: hover)").matches;return e.allowInteractiveExpand&&i?a.a.createElement(Yn,Object.assign({label:r},e)):a.a.createElement(Hn.b,null,a.a.createElement(Jn,Object.assign({label:r},e)))};var Qn,eo=n("hj8b"),to=n("CP8u"),no=n("WyF7"),oo=n("EYzQ"),ro=n("hS8s");!function(e){e.SET_DECORATIONS="SET_DECORATIONS",e.SET_RELATIVE_SELECTION="SET_RELATIVE_SELECTION"}(Qn||(Qn={}));const{createCommand:io,getPluginState:ao,createPluginState:so}=Object(Xt.a)(oo.d,(function(e,t){switch(t.type){case Qn.SET_DECORATIONS:return Object(o.a)(Object(o.a)({},e),{},{decorationSet:t.decorationSet,selection:t.selection});case Qn.SET_RELATIVE_SELECTION:return Object(o.a)(Object(o.a)({},e),{},{selectionRelativeToNode:t.selectionRelativeToNode});default:return e}}),{onDocChanged:(e,t)=>{try{if(0===t.decorationSet.find().length&&(!e.selectionSet||0===Object(Bn.i)(e).find().length))return t;const n=t.decorationSet.map(e.mapping,e.doc);return Object(o.a)(Object(o.a)({},t),{},{decorationSet:n})}catch(n){return Object(o.a)(Object(o.a)({},t),{},{decorationSet:Yt.b.empty})}},onSelectionChanged:(e,t)=>(e.selection instanceof s.NodeSelection&&Object(Bn.l)(e.selection.node)||e.selection instanceof U.a)&&!e.getMeta(oo.d)?Object(o.a)(Object(o.a)({},t),{},{selectionRelativeToNode:void 0}):t}),co=(e,t)=>io({type:Qn.SET_RELATIVE_SELECTION,selectionRelativeToNode:e},e=>t?e.setSelection(t):e),lo=(e,t)=>{const{selection:n}=e;return n instanceof Ze.a?po(n)(e,t):n instanceof s.NodeSelection?fo(n)(e,t):n instanceof s.TextSelection&&bo(n)(e,t)},uo=(e,t)=>{const{selection:n}=e;return n instanceof Ze.a?ho(n)(e,t):n instanceof s.NodeSelection?mo(n)(e,t):n instanceof s.TextSelection&&go(n)(e,t)},po=e=>(t,n)=>{const{$from:o,$to:r,side:i}=e;if(i===Ze.c.LEFT){const e=Object(Bn.d)(r,t.doc);if(e)return co(oo.a.Start,s.NodeSelection.create(t.doc,e.pos))(t,n)}else if(i===Ze.c.RIGHT&&Object(Bn.m)(o,e)){const o=Object(Bn.f)(e);if(o)return co(oo.a.End,s.NodeSelection.create(t.doc,o.pos))(t,n)}return!1},ho=e=>(t,n)=>{const{$from:o,side:r}=e,{selectionRelativeToNode:i}=ao(t);if(r===Ze.c.RIGHT){const e=Object(Bn.e)(o,t.doc);if(e)return co(oo.a.End,s.NodeSelection.create(t.doc,e.pos))(t,n)}else if(r===Ze.c.LEFT&&Object(Bn.n)(o,e))if(i===oo.a.Before){const o=t.doc.resolve(e.$from.before(e.$from.depth));if(o){const e=Object(Bn.e)(o,t.doc);if(e&&Object(ro.a)(e.node))return co(oo.a.End,s.NodeSelection.create(t.doc,e.pos))(t,n)}co()(t,n)}else{const o=Object(Bn.f)(e);if(o)return co(oo.a.Start,s.NodeSelection.create(t.doc,o.pos))(t,n)}return!1},fo=e=>(t,n)=>{const{node:o,from:r,$to:i}=e,{selectionRelativeToNode:a}=ao(t);if(o.isAtom)return!!Object(Bn.m)(i,e)&&vo(oo.a.End,t.doc.resolve(r+1),oo.b.After)(t,n);if(a===oo.a.Start)return yo(oo.a.Inside,o,r)(t,n);if(Object(ro.a)(o)&&(!a||a===oo.a.End)){const e=Object(Bn.d)(i,t.doc);if(e&&Object(ro.a)(e.node))return co(oo.a.Start,s.NodeSelection.create(t.doc,e.pos))(t,n)}return!1},mo=e=>(t,n)=>{const{node:o,from:r,to:i,$from:a}=e,{selectionRelativeToNode:c}=ao(t);if(o.isAtom)return!!Object(Bn.n)(a,e)&&vo(oo.a.Start,t.doc.resolve(r),oo.b.Before)(t,n);if(c===oo.a.End)return Oo(oo.a.Inside,o,r,i)(t,n);if(!c||c===oo.a.Inside)return yo(oo.a.Before,o,r)(t,n);if(Object(ro.a)(o)&&c===oo.a.Start){const e=Object(Bn.e)(a,t.doc);if(e&&Object(ro.a)(e.node))return co(oo.a.End,s.NodeSelection.create(t.doc,e.pos))(t,n)}return!1},bo=e=>(t,n)=>{if(Object(Bn.m)(e.$to,e)){const o=Object(Bn.f)(e);if(o)return co(oo.a.End,s.NodeSelection.create(t.doc,o.pos))(t,n)}return!1},go=e=>(t,n)=>{const{selectionRelativeToNode:o}=ao(t);if(o===oo.a.Before){const o=Object(Bn.e)(e.$from,t.doc);if(o&&Object(ro.a)(o.node))return co(oo.a.End,s.NodeSelection.create(t.doc,o.pos))(t,n);co(void 0)(t,n)}else if(Object(Bn.n)(e.$from,e)){const o=Object(Bn.f)(e);if(o)return co(oo.a.Start,s.NodeSelection.create(t.doc,o.pos))(t,n)}return!1},vo=(e,t,n)=>(o,r)=>{const i=s.Selection.findFrom(t,n,!0);return!!i&&co(e,i)(o,r)},yo=(e,t,n)=>(o,r)=>{if(Object(Ue.i)(t))return vo(e,o.doc.resolve(n),oo.b.After)(o,r);const i=Object(Bn.b)(t);if(i){const{node:a,pos:c}=i,l=n+c+1;if(a.isText||a.isAtom)return vo(e,o.doc.resolve(l),oo.b.Before)(o,r);if(Object(Ue.g)(a))return vo(e,o.doc.resolve(l+1),oo.b.Before)(o,r);if(!Object(ro.a)(t))return co(e,new Ze.a(o.doc.resolve(l),Ze.c.LEFT))(o,r);if(Object(Bn.l)(t))return co(e,s.NodeSelection.create(o.doc,l))(o,r)}return!1},Oo=(e,t,n,o)=>(r,i)=>{if(Object(Ue.i)(t))return vo(e,r.doc.resolve(o),oo.b.Before)(r,i);const a=Object(Bn.c)(t);if(a){const{node:o,pos:c}=a,l=n+c+o.nodeSize;if(o.isText||o.isAtom)return vo(e,r.doc.resolve(l+1),oo.b.After)(r,i);if(Object(Ue.g)(o))return vo(e,r.doc.resolve(l),oo.b.After)(r,i);if(!Object(ro.a)(t))return co(e,new Ze.a(r.doc.resolve(l+1),Ze.c.RIGHT))(r,i);if(Object(Bn.l)(t))return co(e,s.NodeSelection.create(r.doc,l))(r,i)}return!1};class Eo{constructor(e,t,n,o){this.allowInteractiveExpand=!0,this.focusTitle=()=>{if(this.input){const{state:e,dispatch:t}=this.view;co(oo.a.Start)(e,t),Object(no.g)(e,t,this.view),this.input.focus()}},this.handleIconKeyDown=e=>{switch(Object(eo.b)(e)){case"Tab":e.preventDefault(),this.focusTitle();break;case"Enter":e.preventDefault(),this.handleClick(e)}},this.isAllowInteractiveExpandEnabled=()=>{const{state:e}=this.view,t=Object(jn.b)(e);return t&&!!t.interactiveExpand},this.handleClick=e=>{const t=e.target,{state:n,dispatch:o}=this.view;if(Object(L.b)(t,"."+Kn.a.icon)){if(!this.isAllowInteractiveExpandEnabled())return;return e.stopPropagation(),this.view.dom instanceof HTMLElement&&this.view.dom.blur(),void Object(no.h)(this.getPos(),this.node.type)(n,o)}if(t===this.input)return e.stopPropagation(),void this.focusTitle()},this.handleInput=e=>{const t=e.target;if(t===this.input){e.stopPropagation();const{state:n,dispatch:o}=this.view;Object(no.i)(t.value,this.getPos(),this.node.type)(n,o)}},this.handleFocus=e=>{e.stopImmediatePropagation()},this.handleTitleKeydown=e=>{switch(Object(eo.b)(e)){case"Enter":this.toggleExpand();break;case"Tab":case"ArrowDown":this.moveToOutsideOfTitle(e);break;case"ArrowRight":this.handleArrowRightFromTitle(e);break;case"ArrowLeft":this.handleArrowLeftFromTitle(e);break;case"ArrowUp":this.setLeftGapCursor(e);break;case"Backspace":this.deleteExpand(e)}},this.deleteExpand=e=>{if(!this.input)return;const{selectionStart:t,selectionEnd:n}=this.input;if(t!==n||0!==t)return;const{state:o}=this.view,r=this.node;r&&Object(to.l)(o.schema)(r)&&Object(no.c)(this.getPos(),r)(o,this.view.dispatch)},this.toggleExpand=()=>{if(this.isAllowInteractiveExpandEnabled()){const{state:e,dispatch:t}=this.view;Object(no.h)(this.getPos(),this.node.type)(e,t)}},this.moveToOutsideOfTitle=e=>{e.preventDefault();const{state:t,dispatch:n}=this.view,o=this.getPos();if("number"!=typeof o)return;let r=o;this.isCollapsed()&&(r=o+this.node.nodeSize);const i=t.doc.resolve(r);if(!i)return;if(this.isCollapsed()&&i.nodeAfter&&["expand","nestedExpand"].indexOf(i.nodeAfter.type.name)>-1)return this.setRightGapCursor(e);const a=s.Selection.findFrom(i,1,!0);a&&(this.view.focus(),n(t.tr.setSelection(a)))},this.isCollapsed=()=>!this.node.attrs.__expanded,this.setRightGapCursor=e=>{if(!this.input)return;const{value:t,selectionStart:n,selectionEnd:o}=this.input;if(n===o&&n===t.length){const{state:t,dispatch:n}=this.view;e.preventDefault(),this.view.focus(),n(t.tr.setSelection(new Ze.a(t.doc.resolve(this.node.nodeSize+this.getPos()),Ze.c.RIGHT)))}},this.setLeftGapCursor=e=>{if(!this.input)return;const{selectionStart:t,selectionEnd:n}=this.input;if(t===n&&0===t){e.preventDefault();const{state:t,dispatch:n}=this.view;this.view.focus(),n(t.tr.setSelection(new Ze.a(t.doc.resolve(this.getPos()),Ze.c.LEFT)))}},this.handleArrowRightFromTitle=e=>{if(!this.input)return;const{value:t,selectionStart:n,selectionEnd:o}=this.input;if(n===o&&n===t.length){e.preventDefault();const{state:t,dispatch:n}=this.view;this.view.focus(),co(oo.a.End,s.NodeSelection.create(t.doc,this.getPos()))(t,n)}},this.handleArrowLeftFromTitle=e=>{if(!this.input)return;const{selectionStart:t,selectionEnd:n}=this.input;if(t===n&&0===t){e.preventDefault();const{state:t,dispatch:n}=this.view;this.view.focus(),void 0===ao(t).selectionRelativeToNode?co(void 0,new Ze.a(t.doc.resolve(this.getPos()),Ze.c.LEFT))(t,n):co(oo.a.Start,s.NodeSelection.create(t.doc,this.getPos()))(t,n)}},this.reactContext=o()||{};const{dom:r,contentDOM:i}=Be.DOMSerializer.renderSpec(document,((e,t)=>{return["div",{class:(n=e.type.name,o=e.attrs.__expanded,`${Kn.a.prefix} ${Kn.a.type(n)} ${o?Kn.a.expanded:""}`),"data-node-type":e.type.name,"data-title":e.attrs.title},["div",{class:Kn.a.titleContainer,contenteditable:"false",tabindex:"-1"},["div",{class:Kn.a.icon}],["div",{class:Kn.a.inputContainer},["input",{class:Kn.a.titleInput,value:e.attrs.title,placeholder:t&&t.formatMessage(Hn.c.expandPlaceholderText)||Hn.c.expandPlaceholderText.defaultMessage,type:"text"}]]],["div",{class:Kn.a.content},0]];var n,o})(e,this.reactContext.intl));this.getPos=n,this.pos=n(),this.view=t,this.node=e,this.dom=r,this.contentDOM=i,this.icon=this.dom.querySelector("."+Kn.a.icon),this.input=this.dom.querySelector("."+Kn.a.titleInput),this.titleContainer=this.dom.querySelector("."+Kn.a.titleContainer),this.content=this.dom.querySelector("."+Kn.a.content),this.renderIcon(this.reactContext.intl),this.initHandlers()}initHandlers(){this.dom&&(this.dom.addEventListener("click",this.handleClick),this.dom.addEventListener("input",this.handleInput)),this.input&&this.input.addEventListener("keydown",this.handleTitleKeydown),this.titleContainer&&this.titleContainer.addEventListener("focus",this.handleFocus),this.icon&&this.icon.addEventListener("keydown",this.handleIconKeyDown)}renderIcon(e,t){if(!this.icon)return;const{__expanded:n}=t&&t.attrs||this.node.attrs;zn.a.render(a.a.createElement(Zn,{allowInteractiveExpand:this.isAllowInteractiveExpandEnabled(),expanded:n}),this.icon)}stopEvent(e){const t=e.target;return t===this.input||t===this.icon||!!Object(L.b)(t,"."+Kn.a.icon)}ignoreMutation(e){return"selection"!==e.type}update(e,t){return this.node.type===e.type&&(this.node.attrs.__expanded!==e.attrs.__expanded&&(this.dom&&(this.dom.classList.toggle(Kn.a.expanded),this.renderIcon(this.reactContext&&this.reactContext.intl,e)),this.content&&this.content.setAttribute("contenteditable",e.attrs.__expanded)),window.requestAnimationFrame(()=>{this.input&&this.node.attrs.title!==this.input.value&&(this.input.value=this.node.attrs.title)}),this.node=e,!0)}destroy(){this.dom&&(this.dom.removeEventListener("click",this.handleClick),this.dom.removeEventListener("input",this.handleInput)),this.input&&this.input.removeEventListener("keydown",this.handleTitleKeydown),this.titleContainer&&this.titleContainer.removeEventListener("focus",this.handleFocus),this.icon&&(this.icon.removeEventListener("keydown",this.handleIconKeyDown),zn.a.unmountComponentAtNode(this.icon)),this.dom=void 0,this.contentDOM=void 0,this.icon=void 0,this.input=void 0,this.titleContainer=void 0,this.content=void 0}}var wo=function(e){return(t,n,o)=>new Eo(t,n,o,e)},Co=n("F3Zm"),To=n("eryT");function So(e,t){return!!e&&e.classList.contains(t)}var ko=n("c9+K");const xo=e=>e instanceof s.NodeSelection&&("expand"===e.node.type.name||"nestedExpand"===e.node.type.name);function Ao(){const e={};return Te.bindKeymapWithCommand(Te.moveRight.common,(e,t,n)=>{if(!n)return!1;const{selection:o}=e,{selectionRelativeToNode:r}=ao(e);return!(!xo(o)||r!==oo.a.Start)&&Object(no.d)(o.from+1)(e,t,n)},e),Te.bindKeymapWithCommand(Te.moveLeft.common,(e,t,n)=>{if(!n)return!1;const{selection:o}=e,{selectionRelativeToNode:r}=ao(e);return!(!xo(o)||void 0!==r&&r!==oo.a.End)&&Object(no.d)(o.from+1)(e,t,n)},e),Te.bindKeymapWithCommand(Te.tab.common,(e,t,n)=>{if(e.selection instanceof s.NodeSelection&&e.selection.node.type===e.schema.nodes.expand&&n&&n.dom instanceof HTMLElement){const{from:o}=e.selection,r=n.nodeDOM(o);if(!(r&&r instanceof HTMLElement))return!1;const i=r.querySelector("."+Kn.a.iconContainer);if(i&&i.focus){const{tr:o}=e,r=e.selection.from;o.setSelection(new s.TextSelection(o.doc.resolve(r))),t&&t(o),n.dom.blur(),i.focus()}return!0}return!1},e),Te.bindKeymapWithCommand(Te.moveUp.common,(e,t,n)=>{const o=Object(ko.a)(e);if(-1!==o.start&&-1!==o.end||!n)return!1;const{selection:r,schema:i}=e,{nodeBefore:a}=r.$from;if(r instanceof Ze.a&&r.side===Ze.c.RIGHT&&a&&(a.type===i.nodes.expand||a.type===i.nodes.nestedExpand)&&!a.attrs.__expanded){const{$from:o}=r;return Object(no.d)(Math.max(o.pos-1,0))(e,t,n)}const{$from:c}=e.selection;if(n.endOfTextblock("up")){const o=Object(Co.a)(e),r=Math.max(c.pos-c.parentOffset-1,0);if(o&&o.start===r)return Object(no.d)(o.start)(e,t,n);const i=s.Selection.findFrom(e.doc.resolve(r),-1),a=Object(Co.a)(e,i);if(i&&a)return a.node.attrs.__expanded?(t&&t(e.tr.setSelection(i)),!0):Object(no.d)(a.start)(e,t,n)}return!1},e),Te.bindKeymapWithCommand(Te.moveDown.common,(e,t,n)=>{if(!n)return!1;const{expand:o,nestedExpand:r}=e.schema.nodes,{selection:i}=e,{nodeAfter:a}=i.$from;if(i instanceof Ze.a&&i.side===Ze.c.LEFT&&a&&(a.type===o||a.type===r)&&!a.attrs.__expanded){const{$from:o}=i;return Object(no.d)(o.pos+1)(e,t,n)}if(n.endOfTextblock("down")){const{$from:i}=e.selection,a=e.doc.resolve(i.after());if(a.nodeAfter&&(a.nodeAfter.type===o||a.nodeAfter.type===r))return Object(no.d)(a.pos+1)(e,t,n)}return!1},e),Te.bindKeymapWithCommand(Te.backspace.common,(e,t,n)=>{const{selection:o}=e;if(!n||!o.empty)return!1;const{expand:r,nestedExpand:i}=e.schema.nodes,a=Object(Co.a)(e);if(!a){const a=s.Selection.findFrom(e.doc.resolve(Math.max(o.$from.pos-1,0)),-1),c=Object(Co.a)(e,a);return!(!c||c.node.type!==r&&c.node.type!==i||c.node.attrs.__expanded)&&Object(no.d)(c.start)(e,t,n)}const c=s.Selection.findFrom(e.doc.resolve(a.pos),1,!0);return!!(c&&o.$from.pos===c.$from.pos&&Object(to.l)(e.schema)(a.node)&&t)&&Object(no.b)()(e,t)},e),Object(ln.b)(e)}var jo=n("xzME"),Io=n.n(jo),Mo=n("QF9V");const No=(e,{formatMessage:t})=>{const{expandRef:n}=Object(To.c)(e);if(n){const{nestedExpand:o,expand:r}=e.schema.nodes;return{title:"Expand toolbar",getDomRef:()=>n,nodeType:[o,r],offset:[0,6],items:[{type:"button",appearance:"danger",icon:Io.a,onClick:Object(no.b)(),onMouseEnter:Object(Mo.b)([o,r],!0),onMouseLeave:Object(Mo.b)([o,r],!1),title:t(S.a.remove)}]}}};var Ro=(e={})=>({name:"expand",nodes:()=>[{name:"expand",node:Dn.a},{name:"nestedExpand",node:_n.a}],pmPlugins:()=>[{name:"expand",plugin:({dispatch:t,reactContext:n})=>((e,t,n=!1)=>{const o=Object(To.b)(e,{});return new s.Plugin({state:o,key:To.d,props:{nodeViews:{expand:wo(t),nestedExpand:wo(t)},handleKeyDown:(e,t)=>So(t.target,Kn.a.titleContainer),handleKeyPress:(e,t)=>So(t.target,Kn.a.titleContainer),handleScrollToSelection:()=>So(document.activeElement,Kn.a.titleInput),handleClickOn:Object(Bn.a)(["expand","nestedExpand"],e=>e.classList.contains(Kn.a.prefix),{useLongPressSelection:n})},filterTransaction:e=>!(So(document.activeElement,Kn.a.titleInput)&&e.selectionSet&&(!e.steps.length||e.isGeneric)),view:e=>{const t=e.domAtPos.bind(e);return{update:e=>{const{state:n,dispatch:o}=e,r=Object(Co.a)(n);if(r){const e=Object(f.findDomRefAtPos)(r.pos,t);Object(To.c)(n).expandRef!==e&&Object(no.f)(e)(n,o)}}}}})})(t,n,e.useLongPressSelection)},{name:"expandKeymap",plugin:Ao}],pluginsOptions:{floatingToolbar:No,quickInsert:({formatMessage:t})=>e&&!0!==e.allowInsertion?[]:[{id:"expand",title:t(In.a.expand),description:t(In.a.expandDescription),keywords:["accordion","collapse"],priority:600,icon:()=>a.a.createElement(mn.g,{label:t(In.a.expand)}),action(e,t){const n=Object(no.a)(t),o=e(n);return Object(bt.a)(t,o,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:n.type===t.schema.nodes.nestedExpand?mt.c.NESTED_EXPAND:mt.c.EXPAND,attributes:{inputMethod:mt.e.QUICK_INSERT},eventType:mt.d.TRACK})}}]}});function Po({allowExpand:e}){return!(!e||"object"!=typeof e)&&!!e.allowInsertion}var Lo=n("1TJf"),Do=n("HwP6"),_o=n("8J+t"),Bo=n("db9m"),$o=n("LxhQ"),zo=n.n($o),Fo=n("mjri"),Uo=n("cH8Y"),Ho=n("/zGV"),Wo=n("lyoF"),Vo=n("sjO7");Object(Wo.a)({background:"white",border:"1px solid "+Vo.h,borderRadius:Vo.i,boxShadow:Vo.j,color:"#333",width:Vo.g}),Object(Wo.a)({display:"none"});const Ko=Object(Wo.a)({cursor:"pointer",display:"block",listStyleType:"none",overflow:"hidden",width:Vo.g,$nest:{"&.emoji-typeahead-selected":{backgroundColor:Vo.e}}}),qo=Object(Wo.a)({display:"flex",flexDirection:"row",flexWrap:"wrap",verticalAlign:"middle"});Object(Wo.a)({position:"relative",height:Vo.f+"px",paddingTop:((Vo.f-30)/2).toFixed()+"px",boxSizing:"border-box"}),Object(Wo.a)({textAlign:"center"});class Go extends i.PureComponent{constructor(){super(...arguments),this.onEmojiSelected=e=>{const{emoji:t,onSelection:n}=this.props;Object(Uo.a)(e)&&n&&(e.preventDefault(),n(Object(Fo.q)(t),t,e))},this.onEmojiMenuItemMouseMove=e=>{const{emoji:t,onMouseMove:n}=this.props;n&&n(Object(Fo.q)(t),t,e)}}render(){const{selected:e,emoji:t}=this.props,n=zo()({"ak-emoji-typeahead-item":!0,[Ko]:!0,"emoji-typeahead-selected":e});return a.a.createElement("div",{className:n,onMouseDown:this.onEmojiSelected,onMouseMove:this.onEmojiMenuItemMouseMove,"data-emoji-id":t.shortName},a.a.createElement("div",{className:qo},a.a.createElement(Ho.a,{emoji:t})))}}var Yo=n("ox06"),Xo=n("wMQd");let Jo;function Zo(e,t){if(e.nodes.emoji&&t){!function(e){e.subscribe("emojiProvider",(e,t)=>{t&&t.then(e=>{e.getAsciiMap().then(t=>{Jo=new rr(e,t)})})})}(t);const e=Object(an.a)(or.REGEX,Qo);return Object(an.c)("emoji",{rules:[e]})}}function Qo(e,t,n,o){if(!Jo)return null;if(!function(e){const t=e.schema.marks.typeAheadQuery;return e.selection.$from.marks().some(e=>e.type===t)||Object(to.p)(t,e)}(e))return null;const r=Jo.match(t);if(r){return new ir(e,r,n,o).create()}return null}const er=(e,t=!0)=>e[1]+(t?e[2]:""),tr=(e,t=!1)=>(t?e[2]:"")+e[3].trim(),nr=e=>e[4]||"";class or{constructor(e){this.asciiToEmojiMap=e}match(e){return this.getAsciiEmojiMatch(er(e,!1),(e=>tr(e,!0))(e),nr(e))||this.getAsciiEmojiMatch(er(e),tr(e),nr(e))}getAsciiEmojiMatch(e,t,n){const o=this.asciiToEmojiMap.get(t);return o?{emoji:o,leadingString:e,trailingString:n}:void 0}}or.REGEX=new RegExp(`((?:^|[\\s${an.d}])(?:\\(*?))(\\(?)([^:\\s${an.d}\\(]\\S{1,3}|:\\S{1,3}( ))$`);class rr extends or{constructor(e,t){super(t),this.emojiProvider=e}match(e){const t=super.match(e);return t&&this.emojiProvider.recordSelection&&this.emojiProvider.recordSelection(t.emoji),t}}class ir{constructor(e,t,n,o){this.state=e,this.match=t,this.start=n,this.end=o}create(){const e=this.state.tr.replaceWith(this.from,this.to,this.createNodes());return Object(bt.a)(this.state,e,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.EMOJI,attributes:{inputMethod:mt.e.ASCII},eventType:mt.d.TRACK})}get from(){return this.start+this.match.leadingString.length}get to(){return this.end}createNodes(){const e=[this.createEmojiNode()];return this.trailingTextNodeRequired()&&e.push(this.createTrailingTextNode()),e}createEmojiNode(){const{emoji:e}=this.state.schema.nodes;return e.create(this.getEmojiNodeAttrs())}getEmojiNodeAttrs(){const e=this.match.emoji;return{id:e.id,shortName:e.shortName,text:e.fallback||e.shortName}}trailingTextNodeRequired(){return this.match.trailingString.length>0}createTrailingTextNode(){return this.state.schema.text(this.match.trailingString)}}new s.PluginKey("asciiEmojiPlugin");var ar=n("gyAA"),sr=n("LO/B");function cr(e){return a.a.createElement(_e.d,null,a.a.createElement(sr.a,Object.assign({},e)))}var lr=n("IkHm"),dr=n("Ejnt");class ur extends lr.a{createDomRef(){return this.reactComponentProps.options&&this.reactComponentProps.options.useInlineWrapper?Object(dr.a)():super.createDomRef()}render(e){const{providerFactory:t,options:n}=e,{shortName:o,id:r,text:i}=this.node.attrs;return a.a.createElement(dr.b,{useInlineWrapper:n&&n.useInlineWrapper},a.a.createElement(cr,{providers:t,id:r,shortName:o,fallback:i}),n&&n.allowZeroWidthSpaceAfter&&ar.a)}}function pr(e,t,n,o){return(r,i,a)=>new ur(r,i,a,e,t,{providerFactory:n,options:o}).init()}var hr=n("aWzz"),fr=n.n(hr);class mr extends a.a.Component{getChildContext(){return{emoji:{emojiProvider:this.props.emojiProvider}}}render(){return this.props.children}}mr.childContextTypes={emoji:fr.a.object};const br=function(e){const t=new Map;return{call:function(n,o){const r=t.get(n.id||n.shortName);if(r)return r;const i=e(n,o);return t.set(n.id||n.shortName,i),i},clear:t.clear.bind(t)}}((e,t)=>({title:e.shortName||"",key:e.id||e.shortName,render:({isSelected:n,onClick:o,onHover:r})=>a.a.createElement(mr,{emojiProvider:t},a.a.createElement(Go,{emoji:e,selected:n,onMouseMove:r,onSelection:o})),emoji:e}));var gr=e=>({name:"emoji",nodes:()=>[{name:"emoji",node:Bo.a}],pmPlugins:()=>[{name:"emoji",plugin:({providerFactory:t,dispatch:n,portalProviderAPI:r,eventDispatcher:i})=>function(e,t,n,r,i){let a,c;return new s.Plugin({key:Er,state:{init:()=>({}),apply(t,n){const{action:r,params:i}=t.getMeta(Er)||{action:null,params:null};let a=n;switch(r){case vr:return a=Object(o.a)(Object(o.a)({},n),{},{emojiProvider:i.provider}),e(Er,a),a;case yr:return a=Object(o.a)(Object(o.a)({},n),{},{emojis:i.results.emojis}),e(Er,a),a}return a}},props:{nodeViews:{emoji:pr(n,r,t,i)}},view(e){const n=(t,n)=>{switch(t){case"emojiProvider":if(!n)return Or(void 0)(e.state,e.dispatch);n.then(t=>{a&&c&&a.unsubscribe(c),a=t,Or(t)(e.state,e.dispatch),c={result(t){Promise.resolve().then(()=>{var n;(n=t,(e,t)=>(t&&t(e.tr.setMeta(Er,{action:yr,params:{results:n}})),!0))(e.state,e.dispatch)})}},t.subscribe(c)}).catch(()=>Or(void 0)(e.state,e.dispatch))}};return t.subscribe("emojiProvider",n),{destroy(){t&&t.unsubscribe("emojiProvider",n),a&&c&&a.unsubscribe(c)}}}})}(n,t,r,i,e)},{name:"emojiAsciiInputRule",plugin:({schema:e,providerFactory:t})=>Zo(e,t)}],pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"emoji",title:e(In.a.emoji),description:e(In.a.emojiDescription),priority:500,keyshortcut:":",icon:()=>a.a.createElement(mn.f,{label:e(In.a.emoji)}),action(e,t){const n=t.schema.mark("typeAheadQuery",{trigger:":"}),o=e(t.schema.text(":",[n]));return Object(bt.a)(t,o,{action:mt.a.INVOKED,actionSubject:mt.b.TYPEAHEAD,actionSubjectId:mt.c.TYPEAHEAD_EMOJI,attributes:{inputMethod:mt.e.QUICK_INSERT},eventType:mt.d.UI})}}],typeAhead:{trigger:":",customRegex:"\\(?(:)",headless:e?e.headless:void 0,getItems(e,t,n,{prevActive:o,queryChanged:r}){const i=function(e){return Er.getState(e)||{}}(t),{emojiProvider:a,emojis:s}=i,c=!o&&r?[]:s||[];return r&&a&&(br.clear(),a.filter(e?":"+e:"",{limit:50,skinTone:a.getSelectedTone(),sort:e.length?Yo.a.Default:Yo.a.UsageFrequency})),c.map(e=>br.call(e,a))},forceSelect(e,t){const n=":"+e;return!!(e=>e&&e.length>1&&":"===e.charAt(0)&&":"===e.charAt(e.length-1))(n)&&!!t.find(e=>e.title.toLowerCase()===n)},selectItem(t,n,o,{mode:r}){const{id:i="",fallback:a,shortName:s}=n.emoji,c=a||s,l=Er.getState(t);return l.emojiProvider&&l.emojiProvider.recordSelection&&n.emoji&&l.emojiProvider.recordSelection(n.emoji).then(Object(Xo.m)(e)).catch(Object(Xo.l)(e)),Object(bt.a)(t,o(t.schema.nodes.emoji.createChecked({shortName:s,id:i,text:c})),{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.EMOJI,attributes:{inputMethod:mt.e.TYPEAHEAD},eventType:mt.d.TRACK})}}}});const vr="SET_PROVIDER",yr="SET_RESULTS",Or=e=>(t,n)=>(n&&n(t.tr.setMeta(Er,{action:vr,params:{provider:e}})),!0),Er=new s.PluginKey("emojiPlugin");var wr=n("jyPs"),Cr=n("hrqP"),Tr=n("5p9S"),Sr=n("fbzS"),kr=n("rYm2");function xr(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:o}=e;if(!t.firstChild)throw new Error("pastedCells: no firstChild defined for content");for(;1===t.childCount&&(n>0&&o>0||"table"===t.firstChild.type.spec.tableRole);)if(n--,o--,t=t.firstChild.content,!t.firstChild)throw new Error("pastedCells: no firstChild defined for content");const r=t.firstChild,i=r.type.spec.tableRole,{schema:a}=r.type,s=[];if("row"===i)for(let c=0;c<t.childCount;c++){let e=t.child(c).content;const r=c?0:Math.max(0,n-1),i=c<t.childCount-1?0:Math.max(0,o-1);(r||i)&&(e=Ar(Object(Tr.a)(a).row,new Be.Slice(e,r,i)).content),s.push(e)}else{if("cell"!==i&&"header_cell"!==i)return null;s.push(n||o?Ar(Object(Tr.a)(a).row,new Be.Slice(t,n,o)).content:t)}return function(e,t){const n=t,o=[];for(let i=0;i<n.length;i++){const e=n[i];for(let t=e.childCount-1;t>=0;t--){const{rowspan:n,colspan:r}=e.child(t).attrs;for(let e=i;e<i+n;e++)o[e]=(o[e]||0)+r}}let r=0;for(let i=0;i<o.length;i++)r=Math.max(r,o[i]);for(let i=0;i<o.length;i++)if(i>=n.length&&n.push(Be.Fragment.empty),o[i]<r){const t=Object(Tr.a)(e).cell.createAndFill(),a=[];for(let e=o[i];e<r;e++)a.push(t);n[i]=n[i].append(Be.Fragment.from(a))}return{height:n.length,width:r,rows:n}}(a,s)}function Ar(e,t){const n=e.createAndFill();if(!n)throw new Error("fitSlice: unable to create node");return new $e.Transform(n).replace(0,n.content.size,t).doc}function jr(e,t,n,r,i,a,s,c){if(0===s||s===t.height)return!1;let l=!1;for(let d=i;d<a;d++){const i=s*t.width+d,a=t.map[i];if(t.map[i-t.width]===a){l=!0;const i=n.nodeAt(a);if(!i)throw new Error("isolateHorizontal: no cell found at pos "+a);const{top:u,left:p}=t.findCell(a);e.setNodeMarkup(e.mapping.slice(c).map(a+r),void 0,Object(o.a)(Object(o.a)({},i.attrs),{},{rowspan:s-u}));const h=i.type.createAndFill(Object(o.a)(Object(o.a)({},i.attrs),{},{rowspan:u+i.attrs.rowspan-s}));if(!h)throw new Error("isolateHorizontal: failed to create cell");e.insert(e.mapping.slice(c).map(t.positionAt(s,p,n)),h),d+=i.attrs.colspan-1}}return l}function Ir(e,t,n,o,r,i,a,s){if(0===a||a===t.width)return!1;let c=!1;for(let l=r;l<i;l++){const r=l*t.width+a,i=t.map[r];if(t.map[r-1]===i){c=!0;const r=n.nodeAt(i);if(!r)throw new Error("isolateVertical: could not find cell at pos "+i);const d=t.colCount(i),u=e.mapping.slice(s).map(i+o);e.setNodeMarkup(u,void 0,Object(kr.c)(r.attrs,a-d,r.attrs.colspan-(a-d)));const p=r.type.createAndFill(Object(kr.c)(r.attrs,0,a-d));if(!p)throw new Error("isolateVertical: failed to create cell");e.insert(u+r.nodeSize,p),l+=r.attrs.rowspan-1}}return c}function Mr(e,t,n,o,r){let i=e.doc;if(n&&(i=e.doc.nodeAt(n-1),!i))throw new Error("insertCells: could not find table at pos "+(n-1));let a=wr.b.get(i);const{top:s,left:c}=o,l=c+r.width,d=s+r.height,{tr:u}=e;let p=0;function h(){i=n?u.doc.nodeAt(n-1):u.doc,a=wr.b.get(i),p=u.mapping.maps.length}(function(e,t,n,o,r,i,a){const{schema:s}=e.doc.type,c=Object(Tr.a)(s);let l,d;if(r>t.width)for(let u=0,p=0;u<t.height;u++){const i=n.child(u);p+=i.nodeSize;const s=[];let h;h=null==i.lastChild||i.lastChild.type===c.cell?l||(l=c.cell.createAndFill()):d||(d=c.header_cell.createAndFill());for(let e=t.width;e<r;e++)s.push(h);e.insert(e.mapping.slice(a).map(p-1+o),s)}if(i>t.height){const s=[];for(let e=0,o=(t.height-1)*t.width;e<Math.max(t.width,r);e++){let r;if(e>=t.width)r=!1;else{const i=t.map[o+e],a=n.nodeAt(i);if(!a)throw new Error("growTable: no node found at pos "+i);r=a.type===c.header_cell}s.push(r?d||(d=c.header_cell.createAndFill()):l||(l=c.cell.createAndFill()))}const u=c.row.create(null,Be.Fragment.from(s)),p=[];for(let e=t.height;e<i;e++)p.push(u);e.insert(e.mapping.slice(a).map(o+n.nodeSize-2),p)}return!(!l&&!d)})(u,a,i,n,l,d,p)&&h(),jr(u,a,i,n,c,l,s,p)&&h(),jr(u,a,i,n,c,l,d,p)&&h(),Ir(u,a,i,n,s,d,c,p)&&h(),Ir(u,a,i,n,s,d,l,p)&&h();for(let f=s;f<d;f++){const e=a.positionAt(f,c,i),t=a.positionAt(f,l,i);u.replace(u.mapping.slice(p).map(e+n),u.mapping.slice(p).map(t+n),new Be.Slice(r.rows[f-s],0,0))}h(),u.setSelection(new U.a(u.doc.resolve(n+a.positionAt(s,c,i)),u.doc.resolve(n+a.positionAt(d-1,l-1,i)))),t(u)}function Nr(e,t,n){if(!Object(Sr.b)(e.state))return!1;let r=xr(n);const i=e.state.selection;if(i instanceof U.a){r||(r={width:1,height:1,rows:[Be.Fragment.from(Ar(Object(Tr.a)(e.state.schema).cell,n))]});const t=i.$anchorCell.node(-1),a=i.$anchorCell.start(-1),s=wr.b.get(t).rectBetween(i.$anchorCell.pos-a,i.$headCell.pos-a);return r=function({width:e,height:t,rows:n},r,i){let a=n,s=e,c=t;if(s!==r){const e=[],t=[];for(let n=0;n<a.length;n++){const o=a[n],i=[];for(let t=e[n]||0,a=0;t<r;a++){let s=o.child(a%o.childCount);t+s.attrs.colspan>r&&(s=s.type.create(Object(kr.c)(s.attrs,s.attrs.colspan,t+s.attrs.colspan-r),s.content)),i.push(s),t+=s.attrs.colspan;for(let t=1;t<s.attrs.rowspan;t++)e[n+t]=(e[n+t]||0)+s.attrs.colspan}t.push(Be.Fragment.from(i))}a=t,s=r}if(c!==i){const e=[];for(let t=0,n=0;t<i;t++,n++){const r=[],s=a[n%c];for(let e=0;e<s.childCount;e++){let n=s.child(e);t+n.attrs.rowspan>i&&(n=n.type.create(Object(o.a)(Object(o.a)({},n.attrs),{},{rowspan:Math.max(1,i-n.attrs.rowspan)}),n.content)),r.push(n)}e.push(Be.Fragment.from(r))}a=e,c=i}return{width:s,height:c,rows:a}}(r,s.right-s.left,s.bottom-s.top),Mr(e.state,e.dispatch,a,s,r),!0}if(r){const t=Object(Cr.a)(i);if(!t)throw new Error("handlePaste: no cell found");const n=t.start(-1);return Mr(e.state,e.dispatch,n,wr.b.get(t.node(-1)).findCell(t.pos-n),r),!0}return!1}function Rr(e){if(!(e.selection instanceof U.a))return null;const t=[];return e.selection.forEachCell((e,n)=>{t.push(Yt.a.node(n,n+e.nodeSize,{class:"selectedCell"}))}),Yt.b.create(e.doc,t)}const Pr=new s.PluginKey("selectingCells"),Lr=new s.PluginKey("fix-tables");function Dr(e,t){let n;const r=(t,r)=>{"table"===t.type.spec.tableRole&&(n=function(e,t,n,r){let i=r;const a=wr.b.get(t);if(!a.problems)return i;i||(i=e.tr);const s=[];for(let o=0;o<a.height;o++)s.push(0);for(let d=0;d<a.problems.length;d++){const e=a.problems[d];if(e.type===wr.c.COLLISION){const o=e,r=t.nodeAt(e.pos);if(!r)throw new Error("fixTable: unable to find cell at pos "+e.pos);for(let e=0;e<r.attrs.rowspan;e++)s[o.row+e]+=o.n;i.setNodeMarkup(i.mapping.map(n+1+e.pos),void 0,Object(kr.c)(r.attrs,r.attrs.colspan-o.n,o.n))}else if(e.type===wr.c.MISSING){const t=e;s[t.row]+=t.n}else if(e.type===wr.c.OVERLONG_ROWSPAN){const r=e,a=t.nodeAt(r.pos);if(!a)throw new Error("fixTable: unable to find cell at pos "+e.pos);i.setNodeMarkup(i.mapping.map(n+1+r.pos),void 0,Object(o.a)(Object(o.a)({},a.attrs),{},{rowspan:a.attrs.rowspan-r.n}))}else if(e.type===wr.c.COLWIDTH_MISMATCH){const r=t.nodeAt(e.pos);if(!r)throw new Error("fixTable: unable to find cell at pos "+e.pos);i.setNodeMarkup(i.mapping.map(n+1+e.pos),void 0,Object(o.a)(Object(o.a)({},r.attrs),{},{colwidth:e.colwidth}))}}let c,l;for(let o=0;o<s.length;o++)s[o]&&(null==c&&(c=o),l=o);for(let o=0,d=n+1;o<a.height;o++){const n=t.child(o),r=d+n.nodeSize,a=s[o];if(a>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);const s=[];for(let n=0;n<a;n++)s.push(Object(Tr.a)(e.schema)[t].createAndFill());const u=0!==o&&c!==o-1||l!==o?r-1:d+1;i.insert(i.mapping.map(u),s)}d=r}return i.setMeta(Lr,{fixTables:!0})}(e,t,r,n))};return t?t.doc!==e.doc&&function e(t,n,o,r){let i=o;const a=t.childCount,s=n.childCount;e:for(let c=0,l=0;c<s;c++){const o=n.child(c);for(let e=l,n=Math.min(a,c+3);e<n;e++)if(t.child(e)===o){l=e+1,i+=o.nodeSize;continue e}r(o,i),l<a&&t.child(l).sameMarkup(o)?e(t.child(l),o,i+1,r):o.nodesBetween(0,o.content.size,r,i+1),i+=o.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}var _r=n("kf0m");const Br=Object(ln.a)({ArrowLeft:zr("horiz",-1),ArrowRight:zr("horiz",1),ArrowUp:zr("vert",-1),ArrowDown:zr("vert",1),"Shift-ArrowLeft":Fr("horiz",-1),"Shift-ArrowRight":Fr("horiz",1),"Shift-ArrowUp":Fr("vert",-1),"Shift-ArrowDown":Fr("vert",1),Backspace:Ur,"Mod-Backspace":Ur,Delete:Ur,"Mod-Delete":Ur});function $r(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function zr(e,t){return(n,o,r)=>{if(o){const i=n.selection;if(i instanceof U.a)return $r(n,o,s.Selection.near(i.$headCell,t));if("horiz"!==e&&!i.empty)return!1;const a=r?Vr(r,e,t):null;if(null===a)return!1;if("horiz"===e)return $r(n,o,s.Selection.near(n.doc.resolve(i.head+t),t));const c=n.doc.resolve(a),l=Object(_r.c)(c,e,t);let d;return d=l?s.Selection.near(l,1):t<0?s.Selection.near(n.doc.resolve(c.before(-1)),-1):s.Selection.near(n.doc.resolve(c.after(-1)),1),$r(n,o,d)}return!0}}function Fr(e,t){return(n,o,r)=>{let i=n.selection;if(!(i instanceof U.a)){const o=r?Vr(r,e,t):null;if(null===o)return!1;i=new U.a(n.doc.resolve(o))}const a=Object(_r.c)(i.$headCell,e,t);return!!a&&(!o||$r(n,o,new U.a(i.$anchorCell,a)))}}function Ur(e,t){const n=e.selection;if(!(n instanceof U.a))return!1;if(t){const{tr:o}=e,r=Object(Tr.a)(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(r)||o.replace(o.mapping.map(t+1),o.mapping.map(t+e.nodeSize-1),new Be.Slice(r,0,0))}),o.docChanged&&t(o)}return!0}function Hr(e,t){const{doc:n}=e.state,o=Object(_r.a)(n.resolve(t));return!!o&&(e.dispatch(e.state.tr.setSelection(new U.a(o))),!0)}function Wr(e,t){const n=t;if(n.ctrlKey||n.metaKey)return!1;const o=Kr(e,n.target),r=Object(_r.a)(e.state.selection.$anchor);if(n.shiftKey&&e.state.selection instanceof U.a)i(e.state.selection.$anchorCell,n),n.preventDefault();else if(n.shiftKey&&o&&null!==r&&qr(e,n).pos!==r.pos)i(r,n),n.preventDefault();else if(!o)return!1;function i(t,n){let o=qr(e,n);const r=null==Pr.getState(e.state);if(!o||!Object(Sr.a)(t,o)){if(!r)return!1;o=t}const i=new U.a(t,o);if(r||!e.state.selection.eq(i)){const n=e.state.tr.setSelection(i);r&&n.setMeta(Pr,t.pos),e.dispatch(n)}}function a(){e.root.removeEventListener("mouseup",a),e.root.removeEventListener("dragstart",a),e.root.removeEventListener("mousemove",s),null!=Pr.getState(e.state)&&e.dispatch(e.state.tr.setMeta(Pr,-1))}function s(t){const r=Pr.getState(e.state);let s;if(null!=r)s=e.state.doc.resolve(r);else if(Kr(e,t.target)!==o&&(s=qr(e,n),!s))return void a();s&&i(s,t)}return e.root.addEventListener("mouseup",a),e.root.addEventListener("dragstart",a),e.root.addEventListener("mousemove",s),!1}function Vr(e,t,n){if(!(e.state.selection instanceof s.TextSelection))return null;const{$head:o}=e.state.selection;for(let r=o.depth-1;r>=0;r--){const i=o.node(r);if((n<0?o.index(r):o.indexAfter(r))!==(n<0?0:i.childCount))return null;if("cell"===i.type.spec.tableRole||"header_cell"===i.type.spec.tableRole){const i=o.before(r),a="vert"===t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?i:null}}return null}function Kr(e,t){let n=t;for(;n&&n!==e.dom;n=n.parentNode)if("TD"===n.nodeName||"TH"===n.nodeName)return n;return null}function qr(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n?Object(_r.a)(e.state.doc.resolve(n.pos)):null}function Gr({allowTableNodeSelection:e=!1}={}){return new s.Plugin({key:Pr,state:{init:()=>null,apply(e,t){const n=e.getMeta(Pr);if(null!=n)return-1===n?null:n;if(null==t||!e.docChanged)return t;const{deleted:o,pos:r}=e.mapping.mapResult(t);return o?null:r}},props:{decorations:Rr,handleDOMEvents:{mousedown:Wr},createSelectionBetween:e=>null!=Pr.getState(e.state)?e.state.selection:null,handleTripleClick:Hr,handleKeyDown:Br,handlePaste:Nr},appendTransaction:(t,n,o)=>function(e,t,n){let o=t;const r=(o||e).selection,{doc:i}=o||e;let a,c;if(r instanceof s.NodeSelection&&(c=r.node.type.spec.tableRole),r instanceof s.NodeSelection&&c){if("cell"===c||"header_cell"===c)a=U.a.create(i,r.from);else if("row"===c){const e=i.resolve(r.from+1);a=U.a.rowSelection(e,e)}else if(!n){const e=wr.b.get(r.node),t=r.from+1,n=t+e.map[e.width*e.height-1];a=U.a.create(i,t+1,n)}}else r instanceof s.TextSelection&&function({$from:e,$to:t}){if(e.pos===t.pos||e.pos<e.pos-6)return!1;let n=e.pos,o=t.pos,{depth:r}=e;for(;r>=0&&!(e.after(r+1)<e.end(r));r--,n++);for(let i=t.depth;i>=0&&!(t.before(i+1)>t.start(i));i--,o--);return n===o&&/row|table/.test(e.node(r).type.spec.tableRole)}(r)?a=s.TextSelection.create(i,r.from):r instanceof s.TextSelection&&function({$from:e,$to:t}){let n,o;for(let r=e.depth;r>0;r--){const t=e.node(r);if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){n=t;break}}for(let r=t.depth;r>0;r--){const e=t.node(r);if("cell"===e.type.spec.tableRole||"header_cell"===e.type.spec.tableRole){o=e;break}}return n!==o&&0===t.parentOffset}(r)&&(a=s.TextSelection.create(i,r.$from.start(),r.$from.end()));return a&&(o||(o=e.tr)).setSelection(a),o}(o,Dr(o,n),e)})}var Yr=n("V/yS"),Xr=n("qFXU");const Jr=(e={})=>e.advanced?Object(o.a)({allowBackgroundColor:!0,allowColumnResizing:!0,allowHeaderColumn:!0,allowHeaderRow:!0,allowMergeCells:!0,allowNumberColumn:!0,stickToolbarToBottom:!0,permittedLayouts:"all",allowControls:!0},e):e;var Zr=n("tV3p"),Qr=n("JzyM"),ei=n("Vqim"),ti=n("cZYF"),ni=n("MaKF");const oi=(e,t)=>t.find(void 0,void 0,t=>t.key.indexOf(e)>-1),ri=e=>oi(ei.d.COLUMN_SELECTED,e),ii=e=>oi(ei.d.ALL_CONTROLS_HOVER,e),ai=(e,t,n)=>e.map(e=>{const o=[ei.c.HOVERED_CELL];let r;switch(n&&o.push(ei.c.HOVERED_CELL_IN_DANGER),o.push("column"===t?ei.c.HOVERED_COLUMN:"row"===t?ei.c.HOVERED_ROW:ei.c.HOVERED_TABLE),t){case"row":r=ei.d.ROW_CONTROLS_HOVER;break;case"column":r=ei.d.COLUMN_CONTROLS_HOVER;break;default:r=ei.d.TABLE_CONTROLS_HOVER}return Yt.a.node(e.pos,e.pos+e.node.nodeSize,{class:o.join(" ")},{key:r})}),si=e=>{const{selection:t,doc:n}=e,o=Object(Qr.c)(t),r=Object(ti.a)(t);if(!o||!r)return[];return wr.b.get(o.node).cellsInRect(r).map((e,t)=>{const r=n.nodeAt(e+o.start);return Yt.a.node(e+o.start,e+o.start+r.nodeSize,{class:ei.c.COLUMN_SELECTED},{key:`${ei.d.COLUMN_SELECTED}_${t}`})})},ci=e=>{const t=Object(ni.a)(0)(e)||[];let n=0;return t.map(e=>{const t=e.node.attrs.colspan||1,o=document.createElement("div");return o.classList.add(ei.c.COLUMN_CONTROLS_DECORATIONS),o.dataset.startIndex=""+n,n+=t,o.dataset.endIndex=""+n,Yt.a.widget(e.pos+1,o,{key:`${ei.d.COLUMN_CONTROLS_DECORATIONS}_${n}`,side:-100})})},li=(e,t,n,o)=>{const r=oi(o,t);return t.remove(r).add(e,n)},di=(e,t)=>{const n=Object(Qr.c)(e);if(!n||null===t.right)return[];const o=t.right-1,r=wr.b.get(n.node);var i;return(i=r.height,Array.from(Array(i).keys())).map(e=>r.map[r.width*e+o]).filter((e,t)=>{if(o===r.width)return!0;return e!==r.map[r.width*t+o+1]}).map(e=>({pos:e+n.start,node:n.node.nodeAt(e)})).map((e,n)=>{if(e&&e.node)return Yt.a.node(e.pos,e.pos+e.node.nodeSize,{class:ei.c.WITH_RESIZE_LINE},{key:`${ei.d.COLUMN_RESIZING_HANDLE_LINE}_${t.right}_${n}`})}).filter(to.t)},ui=e=>({decorationSet:t,tr:n})=>e.reduce((e,t)=>t({decorationSet:e,tr:n}),t),pi=({decorationSet:e})=>e.remove(ii(e)),hi=({decorationSet:e,tr:t})=>(e=>e.selection instanceof U.a&&e.selection.isColSelection())(t)?li(t.doc,e,si(t),ei.d.COLUMN_SELECTED):e,fi=({decorationSet:e,tr:t})=>Object(Qr.c)(t.selection)?li(t.doc,e,ci(t.selection),ei.d.COLUMN_CONTROLS_DECORATIONS):e,mi=({decorationSet:e})=>e.remove(ri(e)),bi=({decorationSet:e,tr:t})=>(e=>!!ri(e).length)(e)?mi({decorationSet:e,tr:t}):e,gi=new s.PluginKey("tableDecorationsPlugin"),vi=e=>gi.getState(e),yi=(e,t,n)=>{if(e.docChanged||e.selection instanceof U.a)return(({decorationSet:e,tr:t})=>ui([mi,pi,hi,fi])({decorationSet:Yt.b.empty,tr:t}))({decorationSet:t,tr:e});if(e.selectionSet){if(!e.docChanged&&e.selectionSet&&e.getMeta("pointer")||n.selection instanceof U.a)return bi({decorationSet:t,tr:e})}return t};var Oi=n("V0iC");var Ei=n("Xq3U"),wi=n("KWMf"),Ci=n("stHy");const Ti=(e,t)=>n=>{if(e){const o=Object(Tr.a)(t).cell.createAndFill();if(o&&!e.node.content.eq(o.content))return n.replaceWith(e.pos+1,e.pos+e.node.nodeSize,o.content),Object(Ci.a)(n)}return n},Si=e=>{const{$from:t}=e.selection;for(let n=t.depth;n>0;n--){if("table"===t.node(n).type.spec.tableRole)return Object(Ci.a)(e.delete(t.before(n),t.after(n)))}return e};var ki=n("ANI8"),xi=n("lsWn");const Ai=e=>t=>{const n=Object(Qr.c)(t);if(!n)return;const o=wr.b.get(n.node);return(Array.isArray(e)?e:[e]).filter(e=>e>=0&&e<=o.width-1).reduce((e,t)=>{const r=o.cellsInRect({left:t,right:t+1,top:0,bottom:o.height});return e.concat(r.map(e=>{const t=n.node.nodeAt(e),o=e+n.start;return{pos:o,start:o+1,node:t,depth:n.depth+2}}))},[])},ji=e=>(t,n)=>o=>{const r=Object(Qr.c)(o.selection),i="row"===e;if(r){const e=wr.b.get(r.node);if(t>=0&&t<(i?e.height:e.width)){let a=i?0:t,s=i?t:0,c=i?e.width:t+1,l=i?t+1:e.height;if(n){const t=Object(Qr.a)(o.selection.$from);if(!t)return o;const n=e.findCell(t.pos-r.start);i?(s=Math.min(s,n.top),l=Math.max(l,n.bottom)):(a=Math.min(a,n.left),c=Math.max(c,n.right))}const d=e.cellsInRect({left:a,top:s,right:i?c:a+1,bottom:i?s+1:l}),u=l-s==1?d:e.cellsInRect({left:i?a:c-1,top:i?l-1:s,right:c,bottom:l}),p=r.start+d[0],h=r.start+u[u.length-1],f=o.doc.resolve(p),m=o.doc.resolve(h);return Object(Ci.a)(o.setSelection(new U.a(m,f)))}}return o},Ii=ji("column"),Mi=ji("row");var Ni=n("h75s");const Ri=[[],[]],Pi=e=>({decorationSet:t,tr:n})=>li(n.doc,t,e,ei.d.COLUMN_RESIZING_HANDLE),Li=e=>({decorationSet:t,tr:n})=>li(n.doc,t,e,ei.d.LAST_CELL_ELEMENT),Di=e=>({tr:t,decorationSet:n})=>{const[o,r]=e<0?Ri:((e,t)=>{const n=[[],[]],o=Object(Qr.c)(e.selection);if(!o||!o.node)return n;const r=wr.b.get(o.node);if(!r.width)return n;const i=(e,t,n,o,r)=>{const i=document.createElement("div");i.classList.add(ei.c.RESIZE_HANDLE_DECORATION),i.dataset.startIndex=""+e.left,i.dataset.endIndex=""+e.right;const a=o+r.nodeSize-1;return Yt.a.widget(a,i,{key:`${ei.d.COLUMN_RESIZING_HANDLE}_${n}_${t}`})},a=(e,t,n)=>{let o;return n.forEach((e,r,i)=>{if(i===n.childCount-1){const n=r+t+1;o={from:n,to:n+e.nodeSize}}}),o?Yt.a.node(o.from,o.to,{class:ei.c.LAST_ITEM_IN_CELL},{key:`${ei.d.LAST_CELL_ELEMENT}_${e.left}_${e.right}`}):null},s=[],c=[];for(let l=0;l<r.height;l++){const n={};for(let d=0;d<r.width;d++){const u=r.map[r.width*l+d];if(n[u])continue;n[u]=!0;const p=o.start+u,h=e.doc.nodeAt(p);if(!h)continue;const f=d,m=(h.attrs.colspan||1)+f;if(m!==t.right)continue;const b=i({left:f,right:m},d,l,p,h),g=a({left:f,right:m},p,h);s.push(b),c.push(g)}}return[s,c.filter(to.t)]})(t,{right:e});return ui([Pi(o),Li(r)])({decorationSet:n,tr:t})};var _i=n("HL7A");var Bi=n("3yjy"),$i=n("u55h");const zi={default:je.g,wide:je.X,"full-width":je.q};function Fi(e,t=0,n){const{dynamicTextSizing:o,isFullWidthModeEnabled:r}=n;if(r)return t?Math.min(t-2*je.s,je.q):je.q;const i=Object(_i.b)(e,t,!0);return i.endsWith("px")?parseInt(i,10):o&&"default"===e?function(e){return Object(Bi.b)(Object($i.c)(e))}(t):zi[e]||t}function Ui(e){return"row"===e.parent.type.spec.tableRole&&e.nodeAfter}const Hi=e=>e?parseInt(e,10):0;function Wi(e,t,n=[],o=document.createElement("canvas")){return function(e,t,n,o){const r=[];let i=0;for(let a=0;a<e.childNodes.length;a++){const s=e.childNodes[a];if(s.nodeType!==Node.COMMENT_NODE)if(s.nodeType===Node.TEXT_NODE){const e=s.parentNode,a=getComputedStyle(e);let c=0;c="CODE"===e.nodeName||"PRE"===e.nodeName?Ki(n,e,s.textContent,a.font):Vi(n,s.textContent,a.font);const l=e.offsetLeft-t.offsetLeft;r.push(i),i+=c+l,"nowrap"===a.whiteSpace&&o.push(e.offsetWidth+3)}else{const e=getComputedStyle(s);e.minWidth&&e.minWidth.endsWith("px")&&"0px"!==e.minWidth&&o.push(Hi(e.minWidth));const{width:a}=Wi(s,t,o,n);e.display&&e.display.indexOf("inline")>-1?i+=a:(r.push(i),i=a)}}return r.push(i),{minWidth:o.reduce((e,t)=>Math.max(t,e),0),width:r.reduce((e,t)=>Math.max(t,e),0)}}(e,t||e,o,n)}function Vi(e,t,n){const o=e.getContext("2d");return o?(n&&(o.font=n),Math.round(o.measureText(t||"").width)):0}function Ki(e,t,n,o){let r=t;"CODE"===t.nodeName&&(r=t.parentNode);const i=getComputedStyle(r);return n&&"pre"===i.whiteSpace?n.split("\n").reduce((t,n)=>Math.max(Vi(e,n,o),t),0):Vi(e,n,o)}const qi=(e,t,n)=>{const o=Xi(e,Ji),r=o<n?_i.i:Xi(e,function(e){return(t,n,o)=>{if(o&&o>1)return Hi(t.width);const{minWidth:r}=Wi(n,n);return Math.max(((e,t)=>e+Hi(t.paddingLeft)+Hi(t.paddingRight))(r,t),r,e)}}(n));return{index:t,width:o<n?_i.i:o,minWidth:r}},Gi=e=>Math.max(e.width-e.minWidth,0),Yi=(e,t,n,o)=>{const r=wr.b.get(t),i=r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height}),a=[];return i.forEach(e=>{const t=Object(f.findDomRefAtPos)(e+n,o);t&&a.push(t)}),a},Xi=(e,t)=>{let n=0,o=0;return e.forEach(e=>{const r=getComputedStyle(e),i=Number(e.getAttribute("colspan")||1);if(i>1)o=t(r,e,i);else if(r){const o=t(r,e,i);n=Math.max(o,n)}}),n||o};function Ji(e){return Hi(e.width)}const Zi=(e={})=>{return t={events:[{name:"atlaskit.fabric.editor.fixtable",product:"atlaskit",properties:e,serverTime:(new Date).getTime(),server:"local",user:"-"}]},fetch("https://analytics.atlassian.com/analytics/events",{method:"POST",headers:{Accept:"application/json, */*","Content-Type":"application/json"},body:JSON.stringify(t)});var t},Qi=e=>{let t=!1;if(e.doc.descendants((n,r)=>{"table"===n.type.name&&(t=((e,t,n)=>{let r=!1;return n=na(n,e,t,e=>{const{colwidth:t,colspan:n}=e.attrs;return t&&t.length>n?(r=!0,e.type.createChecked(Object(o.a)(Object(o.a)({},e.attrs),{},{colwidth:t.slice(0,n)}),e.content,e.marks)):e}),!!r&&(Zi({message:"removeExtraneousColumnWidths"}),!0)})(n,e.mapping.map(r),e))}),t)return e},ea=(e,t,n,r,i)=>{let{tr:a}=e.state;const s=function(e,t,n,o){const r=o.querySelector("tr");if(!r)return[];let i=[];for(let a=0;a<r.childElementCount;a++){const s=r.children[a],c=Number(s.getAttribute("colspan")||1);for(let r=0;r<c;r++){const s=a+r,c=Yi(s,t,n,e),l=Xi(c,(e,t)=>Wi(t,o).width);i[s]=Math.max(l,_i.d)}}return i}(e.domAtPos.bind(e),t,r+1,n),c=s.reduce((e,t)=>e+t,0),l=ta(c),d=Fi(l,i.containerWidth,{dynamicTextSizing:i.dynamicTextSizing});let u=1;c!==d&&(u=d/c);const p=s.map(e=>Math.floor(e*u));return a=na(a,t,r,(e,t,n)=>{const r=p.slice(n,n+e.attrs.colspan);return e.type.createChecked(Object(o.a)(Object(o.a)({},e.attrs),{},{colwidth:r.length?r:null}),e.content,e.marks)}),a.setNodeMarkup(r,void 0,Object(o.a)(Object(o.a)({},t.attrs),{},{layout:l,__autoSize:!1})).setMeta("addToHistory",!1)},ta=e=>e>je.X?"full-width":e>je.g&&e<je.X?"wide":"default";const na=(e,t,n,o)=>{const r=[];let i=0;for(let a=0;a<t.childCount;a++){const e=t.child(a),n=[];for(let t=0;t<e.childCount;t++){const r=e.child(t),s=o(r,a,t);!1===s.sameMarkup(r)&&i++,n.push(s)}n.length&&r.push(e.type.createChecked(e.attrs,n,e.marks))}if(r.length&&0!==i){const o=t.type.createChecked(t.attrs,r,t.marks);return e.replaceWith(n,n+t.nodeSize,o)}return e};var oa=n("q4xv");const ra=(e,t,n)=>li(e.doc,vi(e),t,n),ia=e=>Object(Zr.a)({type:"SET_EDITOR_FOCUS",data:{editorHasFocus:e}}),aa=(e,t)=>(t&&t(Si(e.tr)),!0),sa=(e,t)=>!!Object(ki.c)(e.selection)&&aa(e,t),ca=(e,t)=>{const{$cursor:n}=e.selection;if(!n||n.parentOffset>0)return!1;let o,r;if(!Object(oa.f)(n.parent))for(let s=n.depth-1;!o&&s>=0&&(n.index(s)>0&&(r=n.before(s+1),o=n.node(s).child(n.index(s)-1)),!Object(oa.f)(n.node(s)));s--);if(!o||o.type!==e.schema.nodes.table)return!1;const i=n.node(n.depth-1),{listItem:a}=e.schema.nodes;if(n.parent.type!==e.schema.nodes.paragraph||i&&i.type!==e.schema.nodes.doc)return!(!i||i.type!==a)&&Object(vn.e)()(e,t);const{tr:c}=e,l=(r||0)-4;c.setSelection(new s.TextSelection(e.doc.resolve(l)));const{$from:d}=c.selection,u=d.start(-1)+d.parent.nodeSize-1;return t&&t(c.setSelection(new s.TextSelection(e.doc.resolve(u)))),!0},la=e=>Object(Zr.a)(t=>e>-1&&{type:"SHOW_INSERT_ROW_BUTTON",data:{insertRowButtonIndex:e}},e=>e.setMeta("addToHistory",!1)),da=()=>Object(Zr.a)({type:"HIDE_INSERT_COLUMN_OR_ROW_BUTTON"},e=>e.setMeta("addToHistory",!1)),ua=(e,t)=>{const n=[],o=wr.b.get(e);for(let r=0;r<o.height;r++){const i=e.child(r),a=[];for(let n=0;n<o.width;n++){if(!t[r][n])continue;const i=o.map[r*o.width+n],s=t[r][n],c=e.nodeAt(i);if(!s||!c)continue;const l=c.type.createChecked(Object.assign({},s.attrs),s.content,s.marks);a.push(l)}n.push(i.type.createChecked(i.attrs,a,i.marks))}return e.type.createChecked(e.attrs,n,e.marks)},pa=e=>{const t=wr.b.get(e),n=[];for(let o=0;o<t.height;o++){const r=[],i={};for(let n=0;n<t.width;n++){const a=t.map[o*t.width+n],s=e.nodeAt(a),c=t.findCell(a);s&&!i[a]&&c.top===o?(i[a]=!0,r.push(s)):r.push(null)}n.push(r)}return n};var ha=n("O8ZN"),fa=n("4icS"),ma=n("AY2A");function ba(e){const t=fa.a.getState(e);return t?e=>{const{url:n}=e;if(n){const e=t.cards.find(({url:e})=>e===n);if(e&&e.title)return e.title}return null}:()=>null}var ga=n("Ncve");function va(e){return(t,n)=>{let r,i,a=t.selection;if(a instanceof U.a){if(a.$anchorCell.pos!==a.$headCell.pos)return!1;r=a.$anchorCell.nodeAfter,i=a.$anchorCell.pos}else{if(r=function(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(a.$from),!r)return!1;const e=Object(_r.a)(a.$from);i=e&&e.pos}if(r&&1===r.attrs.colspan&&1===r.attrs.rowspan)return!1;if(r&&n){let s=r.attrs,c=[],l=s.colwidth;s.rowspan&&s.rowspan>1&&(s=Object(o.a)(Object(o.a)({},s),{},{rowspan:1})),s.colspan&&s.colspan>1&&(s=Object(o.a)(Object(o.a)({},s),{},{colspan:1}));let d=Object(ga.a)(t),u=t.tr;for(let e=0;e<d.right-d.left;e++)c.push(l?Object(o.a)(Object(o.a)({},s),{},{colwidth:l&&l[e]?[l[e]]:null}):s);let p=null;for(let t=d.top;t<d.bottom;t++){let n=d.map.positionAt(t,d.left,d.table);t===d.top&&(n+=r.nodeSize);for(let o=d.left,i=0;o<d.right;o++,i++){if(o===d.left&&t===d.top)continue;const a=e({node:r,row:t,col:o}).createAndFill(c[i]);a&&u.insert(p=u.mapping.map(n+d.tableStart,1),a)}}"number"==typeof i&&u.setNodeMarkup(i,e({node:r,row:d.top,col:d.left}),c[0]);const h=p&&u.doc.resolve(p);a instanceof U.a&&h instanceof Be.ResolvedPos&&u.setSelection(new U.a(u.doc.resolve(a.$anchorCell.pos),h)),n(u)}return!0}}const ya=(e,t)=>{const n=Object(Zr.c)(e),{tableHeader:o,tableCell:r}=e.schema.nodes;return!t||va(({row:e,col:t})=>0===e&&n.isHeaderRowEnabled||0===t&&n.isHeaderColumnEnabled?o:r)(e,t)};function Oa(e,t,n){const o=t.map.cellsInRect({left:0,top:0,right:"row"===e?t.map.width:1,bottom:"column"===e?t.map.height:1});for(let r=0;r<o.length;r++){const e=t.table.nodeAt(o[r]);if(e&&e.type!==n.header_cell)return!1}return!0}function Ea(e){return function(t,n){if(!Object(Sr.b)(t))return!1;if(n){let o=Object(Tr.a)(t.schema),r=Object(ga.a)(t),i=t.tr,a=Oa("row",r,o),s=Oa("column",r,o),c=("column"===e?a:"row"===e&&s)?1:0;const l="column"===e?new wr.a(0,c,1,r.map.height):"row"===e?new wr.a(c,0,r.map.width,1):r;let d;d="column"===e?s?o.cell:o.header_cell:"row"===e?a?o.cell:o.header_cell:o.cell,r.map.cellsInRect(l).forEach(e=>{const t=e+r.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,d,n.attrs)}),n(i)}return!0}}const wa=e=>{switch(e){case"default":return"wide";case"wide":return"full-width";case"full-width":default:return"default"}},Ca=(e,t)=>Ea("row")(e,n=>Object(Zr.a)({type:"TOGGLE_HEADER_ROW"},()=>n.setMeta("scrollIntoView",!1))(e,t)),Ta=(e,t)=>Ea("column")(e,n=>Object(Zr.a)({type:"TOGGLE_HEADER_COLUMN"},()=>n.setMeta("scrollIntoView",!1))(e,t)),Sa=(e,t)=>{const{tr:n}=e,{node:r,pos:i}=Object(Qr.c)(e.selection);return n.setNodeMarkup(i,e.schema.nodes.table,Object(o.a)(Object(o.a)({},r.attrs),{},{isNumberColumnEnabled:!r.attrs.isNumberColumnEnabled})),n.setMeta("scrollIntoView",!1),t&&t(n),!0},ka=(e,t)=>{const n=Object(Qr.c)(e.selection);if(!n)return!1;const r=wa(n.node.attrs.layout);return Object(Zr.a)({type:"SET_TABLE_LAYOUT",data:{layout:r}},t=>(t.setNodeMarkup(n.pos,e.schema.nodes.table,Object(o.a)(Object(o.a)({},n.node.attrs),{},{layout:r})),t.setMeta("scrollIntoView",!1)))(e,t)},xa=()=>Object(Zr.a)({type:"TOGGLE_CONTEXTUAL_MENU"},e=>e.setMeta("addToHistory",!1)),Aa=e=>t=>("problem"in e&&Zi(e),t.setMeta(Zr.d,e));function ja(e){const{selection:t}=e;if(!(t instanceof U.a)||t.$anchorCell.pos===t.$headCell.pos)return!1;const n=Object(ti.a)(t);if(!n)return!1;const o=t.$anchorCell.node(-1);return!function({width:e,height:t,map:n},o){let r=o.top*e+o.left,i=r,a=(o.bottom-1)*e+o.left,s=r+(o.right-o.left-1);for(let c=o.top;c<o.bottom;c++){if(o.left>0&&n[i]===n[i-1]||o.right<e&&n[s]===n[s+1])return!0;i+=e,s+=e}for(let c=o.left;c<o.right;c++){if(o.top>0&&n[r]===n[r-e]||o.bottom<t&&n[a]===n[a+e])return!0;r++,a++}return!1}(wr.b.get(o),n)}function Ia(e){const{content:t}=e;return 1===t.childCount&&t.firstChild&&t.firstChild.isTextblock&&0===t.firstChild.childCount}function Ma(e,t,n=1){const r=Object(o.a)(Object(o.a)({},e),{},{colspan:(e.colspan||1)+n});if(r.colwidth){r.colwidth=r.colwidth.slice();for(let e=0;e<n;e++)r.colwidth.splice(t,0,0)}return r}function Na(e){const t=wr.b.get(e),n=function(e){const t=wr.b.get(e),n=[];for(let o=t.width-1;o>=0;o--){const r=t.cellsInRect({left:o,right:o+1,top:0,bottom:t.height});if(r.length){const t=r.map(t=>{const n=e.nodeAt(t);if(n)return n.attrs.colspan}),i=Math.min(...t);n[o+1]?n[o]=1:n[o]=i}}return n}(e);if(!n.some(e=>e>1))return e;const r=[];for(let i=0;i<t.height;i++){const a={},s=Object.keys(n).map(Number);for(let r in s){const c=s[r],l=t.map[c+i*t.width],d=t.findCell(l),u=a[d.left]||e.nodeAt(l);if(u&&d.top===i)if(n[c]>1){const e=u.attrs.colspan-n[c]+1;if(e<1)return null;const{colwidth:t}=u.attrs,r=u.type.createChecked(Object(o.a)(Object(o.a)({},u.attrs),{},{colspan:e,colwidth:t?t.slice(0,e):null}),u.content,u.marks);a[d.left]=r}else a[d.left]=u}const c=Object.keys(a).map(e=>a[e]),l=e.child(i);l&&r.push(l.type.createChecked(l.attrs,c,l.marks))}return r.length?e.type.createChecked(e.attrs,r,e.marks):null}const Ra=(e,t=!1)=>n=>{const r=Object(Qr.c)(n.selection);if(!r)return n;const i=[],a=wr.b.get(r.node);for(let o=e.top;o<e.bottom;o++)if(t){const e=r.node.nodeAt(a.map[o*a.width]);e&&e.type!==e.type.schema.nodes.tableHeader&&i.push(o)}else i.push(o);if(!i.length)return n;const c=[],l={},d={};for(let e=0;e<a.height;e++){const t=[],n=r.node.child(e);for(let s=0;s<a.width;s++){const n=a.map[e*a.width+s],c=r.node.nodeAt(n);if(!c)continue;const u=a.cellsInRect({left:0,top:e,right:a.width,bottom:e+1});if(-1!==i.indexOf(e)||l[n])u.indexOf(n)>-1&&(d[n]=!0);else{if(u.indexOf(n)>-1){let r=0;if(i.forEach(t=>{e<t&&c.attrs.rowspan+e-1>=t&&(r+=1)}),r>0){const e=c.type.createChecked(Object(o.a)(Object(o.a)({},c.attrs),{},{rowspan:c.attrs.rowspan-r}),c.content,c.marks);t.push(e),l[n]=!0;continue}}else if(d[n]){const e=Object(o.a)(Object(o.a)({},c.attrs),{},{colspan:1,rowspan:1});if(c.attrs.colwidth){const t=s>0?s-a.colCount(n):0;e.colwidth=c.attrs.colwidth.slice().splice(t,1)}const r=c.type.createChecked(e,c.type.schema.nodes.paragraph.createChecked(),c.marks);t.push(r);continue}l[n]||(l[n]=!0,t.push(c))}}t.length&&c.push(n.type.createChecked(n.attrs,t,n.marks))}if(!c.length)return Aa({type:"DELETE_ROWS",problem:"EMPTY_TABLE"})(n);const u=r.node.type.createChecked(r.node.attrs,c,r.node.marks),p=Na(u);if(null===p)return Aa({type:"DELETE_ROWS",problem:"REMOVE_EMPTY_COLUMNS"})(n);const h=function(e,t){const n=Math.min(...t),o=n>0?n-1:0,r=wr.b.get(e);return r.map[o*r.width]}(u,i);return Aa({type:"DELETE_ROWS"})(n.replaceWith(r.pos,r.pos+r.node.nodeSize,p).setSelection(s.Selection.near(n.doc.resolve(r.pos+h))))};var Pa=n("GlS5");const La=e=>t=>{const n=Object(Qr.c)(t.selection);if(!n)return t;!function(e,t,n,r){let i=e.mapping.maps.length;const a=e.doc.nodeAt(t);if(!a)return e;const s=e.doc.resolve(t).start(1),c=wr.b.get(a);for(let l=n;l<r;l++)for(let t=0;t<c.height;t++){const n=t*c.width+l,r=c.map[n],d=l>0&&c.map[n-1]===r||t>0&&c.map[(t-1)*c.width+l]===r,u=l<c.width-1&&c.map[n+1]===r||t<c.height-1&&c.map[(t+1)*c.width+l]===r;if(!d&&u){const n=a.nodeAt(r);if(!n)continue;const{colwidth:d,colspan:u=1,rowspan:p=1}=n.attrs;let h=e.mapping.slice(i);const f=Object(o.a)(Object(o.a)({},n.attrs),{},{colspan:1,rowspan:1});for(let r=t;r<t+p;r++)for(let t=0;t<u;t++){let u=e.mapping.slice(i);const p=c.positionAt(r,l+t,a);e.insert(u.map(p+s),n.type.createAndFill(Object(o.a)(Object(o.a)({},f),{},{colwidth:d?[d[t]]:void 0})))}h=e.mapping.slice(i),e.delete(h.map(r+s),h.map(r+s+n.nodeSize)),p&&p>1&&(t+=p-1)}}}(t,n.pos,e.left,e.right);let r=t.mapping.maps.length;const i=t.doc,a=[];for(let o=e.left;o<e.right;o++){const e=Pa.a.create(i,n.pos,o,!0);a.push(o),t.step(e.map(t.mapping.slice(r)))}const c=t.mapping.mapResult(n.pos);if(c.deleted){const e=Math.min(c.pos,t.doc.nodeSize-1);t.setSelection(s.Selection.near(t.doc.resolve(e)))}else{const e=t.doc.nodeAt(c.pos);if(e){const o=_a(e,a);t.setSelection(s.Selection.near(t.doc.resolve(n.pos+o)))}}return t},Da=e=>t=>{const n=Object(Qr.c)(t.selection);if(!n)return t;const r=[];for(let o=e.left;o<e.right;o++)r.push(o);if(!r.length)return t;const i=wr.b.get(n.node),a=[],c={},l={};for(let e=0;e<i.height;e++){const t=[],s=n.node.child(e);for(let a=0;a<i.width;a++){const s=i.map[e*i.width+a],d=n.node.nodeAt(s);if(!d)continue;const u=i.cellsInRect({left:a,top:0,right:a+1,bottom:i.height});if(-1===r.indexOf(a)){if(u.indexOf(s)>-1&&!c[s]){let e=0;if(r.forEach(t=>{a<t&&d.attrs.colspan+a-1>=t&&(e+=1)}),e>0){const n=Object(o.a)(Object(o.a)({},d.attrs),{},{colspan:d.attrs.colspan-e});if(d.attrs.colwidth){const t=Math.min(...r),o=t>0?t-i.colCount(s):0,a=d.attrs.colwidth.slice()||[];a.splice(o,e),n.colwidth=a}const a=d.type.createChecked(n,d.content,d.marks);t.push(a),c[s]=!0;continue}}else if(l[s]){const e=Object(o.a)(Object(o.a)({},d.attrs),{},{colspan:1,rowspan:1});if(d.attrs.colwidth){const t=a>0?a-i.colCount(s):0;e.colwidth=d.attrs.colwidth.slice().splice(t,1)}const n=d.type.createChecked(e,d.type.schema.nodes.paragraph.createChecked(),d.marks);t.push(n);continue}c[s]||(c[s]=!0,t.push(d))}else u.indexOf(s)>-1&&(l[s]=!0)}t.length&&a.push(s.type.createChecked(s.attrs,t,s.marks))}if(!a.length)return Aa({type:"DELETE_COLUMNS",problem:"EMPTY_TABLE"})(t);const d=n.node.type.createChecked(n.node.attrs,a,n.node.marks),u=function(e){const t=wr.b.get(e),n=function(e){const t=[];for(let n=0;n<e.childCount;n++){const o=[],r=e.child(n);for(let e=0;e<r.childCount;e++){const t=r.child(e);o.push(t.attrs.rowspan)}t[n]=Math.min(...o)}return t}(e);if(!n.some(e=>e>1))return e;const r=[];for(let i=0;i<t.height;i++){const t=e.child(i);if(1===n[i])r.push(t);else{const e=[];for(let r=0;r<t.childCount;r++){const a=t.child(r),s=a.attrs.rowspan-n[i]+1;if(s<1)return null;const c=a.type.createChecked(Object(o.a)(Object(o.a)({},a.attrs),{},{rowspan:s}),a.content,a.marks);e.push(c)}r.push(t.type.createChecked(t.attrs,e,t.marks))}}if(!r.length)return null;return e.type.createChecked(e.attrs,r,e.marks)}(d);if(null===u)return Aa({type:"DELETE_COLUMNS",problem:"FIX_ROWSPANS"})(t);const p=_a(d,r);return Aa({type:"DELETE_COLUMNS"})(t.replaceWith(n.pos,n.pos+n.node.nodeSize,u).setSelection(s.Selection.near(t.doc.resolve(n.pos+p))))};function _a(e,t){const n=Math.min(...t),o=n>0?n-1:0;return wr.b.get(e).map[o]}const Ba=(e,t=!1)=>n=>t?La(e)(n):Da(e)(n);function $a(e){let t,n=0,o=0;const r=Object(Qr.c)(e);return r&&(t=wr.b.get(r.node),n=t.height,o=t.width),{table:r,map:t,totalRowCount:n,totalColumnCount:o}}function za(e){let t=1,n=1,o=1;const{table:r,map:i,totalRowCount:a,totalColumnCount:s}=$a(e);if(r&&i){const r=Object(ti.a)(e);r&&(o=i.cellsInRect(r).length,t=r.right-r.left,n=r.bottom-r.top)}return{totalRowCount:a,totalColumnCount:s,horizontalCells:t,verticalCells:n,totalCells:o}}var Fa=n("Pudr");const Ua={default:Ei.b.NORMAL,wide:Ei.b.WIDE,"full-width":Ei.b.FULL_WIDTH},Ha=(e,t)=>Object(bt.d)(({selection:t})=>{const{horizontalCells:n,verticalCells:o,totalRowCount:r,totalColumnCount:i}=za(t);return{action:Ei.a.CLEARED,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{inputMethod:e,horizontalCells:n,verticalCells:o,totalRowCount:r,totalColumnCount:i},eventType:mt.d.TRACK}})((e=>(t,n)=>{let o,{tr:r}=t;if(Object(wi.a)(r.selection,"cell")){const e=r.selection;e.forEachCell((e,n)=>{const o=r.doc.resolve(r.mapping.map(n+1));r=Ti(Object(Qr.a)(o),t.schema)(r)}),o=e.$headCell.pos}else if(e){const n=Object(Qr.a)(r.doc.resolve(e+1));r=Ti(n,t.schema)(r),o=n.pos}if(r.docChanged&&o){const e=r.doc.resolve(r.mapping.map(o)),t=s.Selection.findFrom(e,1,!0);return t&&r.setSelection(t),n&&n(r),!0}return!1})(t)),Wa=()=>Object(bt.d)(({selection:e})=>{const{horizontalCells:t,verticalCells:n,totalCells:o,totalRowCount:r,totalColumnCount:i}=za(e);return{action:Ei.a.MERGED,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{horizontalCells:t,verticalCells:n,totalCells:o,totalRowCount:r,totalColumnCount:i},eventType:mt.d.TRACK}})((e,t)=>(t&&t(function(e){const{selection:t}=e;if(!(t instanceof U.a&&ja(e)))return e;const n=Object(ti.a)(t),r=Object(Qr.c)(t),i=wr.b.get(r.node),a=[],c=i.cellsInRect(n);let l;const d=[];for(let s=0;s<i.height;s++){const t=[],u=r.node.child(s);for(let d=0;d<i.width;d++){const u=i.map[s*i.width+d],p=r.node.nodeAt(u);if(p&&!(a.indexOf(u)>-1))if(a.push(u),d===n.left&&s===n.top){l=u;let a=Ia(p)?Be.Fragment.empty:p.content;const s=[l];for(let e=n.top;e<n.bottom;e++)for(let t=n.left;t<n.right;t++){const n=i.map[e*i.width+t];if(-1===s.indexOf(n)){s.push(n);const e=r.node.nodeAt(n);e&&!Ia(e)&&(a=a.append(e.content))}}const c=n.bottom-n.top;if(c<1)return Aa({type:"MERGE_CELLS",problem:"NEGATIVE_ROWSPAN"})(e);const d=Ma(Object(o.a)(Object(o.a)({},p.attrs),{},{rowspan:c}),p.attrs.colspan,n.right-n.left-p.attrs.colspan),h=a===Be.Fragment.empty?p.type.createAndFill(d,a,p.marks):p.type.createChecked(d,a,p.marks);t.push(h)}else-1===c.indexOf(u)&&t.push(p)}if(t.length)d.push(u.type.createChecked(u.attrs,t,u.marks));else for(let n=d.length-1;n>=0;n--){const t=d[n],r=[];let i=!1;for(let a=0;a<t.childCount;a++){const s=t.child(a),{rowspan:c}=s.attrs;if(c&&c+n-1>=d.length){if(i=!0,c<2)return Aa({type:"MERGE_CELLS",problem:"NEGATIVE_ROWSPAN"})(e);r.push(s.type.createChecked(Object(o.a)(Object(o.a)({},s.attrs),{},{rowspan:c-1}),s.content,s.marks))}else r.push(s)}i&&(d[n]=u.type.createChecked(t.attrs,r,t.marks))}}if(!d.length)return Aa({type:"MERGE_CELLS",problem:"EMPTY_TABLE"})(e);const u=Na(r.node.type.createChecked(r.node.attrs,d,r.node.marks));return null===u?Aa({type:"MERGE_CELLS",problem:"REMOVE_EMPTY_COLUMNS"})(e):Aa({type:"MERGE_CELLS"})(e.replaceWith(r.pos,r.pos+r.node.nodeSize,u).setSelection(s.Selection.near(e.doc.resolve((l||0)+r.start))))}(e.tr)),!0)),Va=(e,t)=>Object(bt.d)(({selection:t})=>{const{horizontalCells:n,verticalCells:o,totalCells:r,totalRowCount:i,totalColumnCount:a}=za(t);return{action:Ei.a.COLORED,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{cellColor:(Xr.e.get(e.toLowerCase())||e).toLowerCase(),horizontalCells:n,verticalCells:o,totalCells:r,totalRowCount:i,totalColumnCount:a},eventType:mt.d.TRACK}})(((e,t)=>(n,o)=>{let r,{tr:i}=n;if(Object(wi.a)(i.selection,"cell")){const t=i.selection;t.forEachCell((t,n)=>{const o=i.doc.resolve(i.mapping.map(n+1));i=Object(xi.a)(Object(Qr.a)(o),e)(i)}),r=t.$headCell.pos}else if(t){const n=Object(Qr.a)(i.doc.resolve(t+1));i=Object(xi.a)(n,e)(i),r=n.pos}if(i.docChanged&&void 0!==r){const e=i.doc.resolve(i.mapping.map(r));return o&&o(i.setSelection(s.Selection.near(e))),!0}return!1})({background:e},t)),Ka=e=>(t,n)=>{const{selection:o}=t,r=o instanceof U.a,i=r?Object(ti.a)(o):Object(Qr.b)(o.$from);if(!i)return!1;const a=r&&"TOP"===e?i.top:i.bottom-1,s="BOTTOM"===e?1:0;return qa(mt.e.SHORTCUT,{index:a+s,moveCursorToInsertedRow:!1})(t,n)},qa=(e,t)=>Object(bt.d)(n=>{const{totalRowCount:o,totalColumnCount:r}=$a(n.selection);return{action:Ei.a.ADDED_ROW,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{inputMethod:e,position:t.index,totalRowCount:o,totalColumnCount:r},eventType:mt.d.TRACK}})(Object(Oi.e)(t.index,t.moveCursorToInsertedRow)),Ga=(e,t)=>Object(bt.d)(n=>{const{totalRowCount:o,totalColumnCount:r}=$a(n.selection);return{action:Ei.a.ADDED_COLUMN,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{inputMethod:e,position:t,totalRowCount:o,totalColumnCount:r},eventType:mt.d.TRACK}})(Object(Oi.d)(t)),Ya=(e,t,n)=>Object(bt.d)(({selection:n})=>{const{totalRowCount:o,totalColumnCount:r}=$a(n);return{action:Ei.a.DELETED_ROW,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{inputMethod:e,position:t.top,count:t.bottom-t.top,totalRowCount:o,totalColumnCount:r},eventType:mt.d.TRACK}})((e,o)=>(o&&o(Ra(t,n)(e.tr)),!0)),Xa=(e,t)=>Object(bt.d)(({selection:n})=>{const{totalRowCount:o,totalColumnCount:r}=$a(n);return{action:Ei.a.DELETED_COLUMN,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{inputMethod:e,position:t.left,count:t.right-t.left,totalRowCount:o,totalColumnCount:r},eventType:mt.d.TRACK}})((e,n)=>(n&&n(Ba(t,Object(Fa.a)(e))(e.tr)),!0)),Ja=(e,t)=>{const{totalRowCount:n,totalColumnCount:o}=$a(e);return{action:Ei.a.DELETED,actionSubject:mt.b.TABLE,attributes:{inputMethod:t,totalRowCount:n,totalColumnCount:o},eventType:mt.d.TRACK}},Za=(e,t,n)=>Object(bt.d)(o=>{const{totalRowCount:r,totalColumnCount:i}=$a(o.selection);return{action:Ei.a.SORTED_COLUMN,actionSubject:mt.b.TABLE,attributes:{inputMethod:e,totalRowCount:r,totalColumnCount:i,position:t,sortOrder:n,mode:"editor"},eventType:mt.d.TRACK}})(((e,t=ei.b.DESC)=>Object(Zr.a)(n=>({type:"SORT_TABLE",data:{ordering:{columnIndex:e,order:t}}}),(n,o)=>{const r=Object(Qr.c)(n.selection);if(!r||!r.node)return n;const i=Object(wi.a)(n.selection,"cell")?Object(ti.a)(n.selection):Object(Qr.b)(n.selection.$from);if(!i)return n;const a=Object(Zr.c)(o),c=pa(r.node);let l;a.isHeaderRowEnabled&&(l=c.shift());const d=Object(ha.a)({getInlineCardTextFromStore:ba(o)},t),u=c.sort((t,n)=>d(t[e],n[e]));l&&u.unshift(l);const p=ua(r.node,u);n.replaceWith(r.pos,r.pos+r.node.nodeSize,p);const h=wr.b.get(r.node).positionAt(i.top,e,r.node),f=a.ordering,m={columnIndex:e,order:t};return n.step(new ma.a(r.pos,f,m)),n.setSelection(s.Selection.near(n.doc.resolve(r.start+h)))}))(t,n)),Qa=e=>(t,n)=>{const o=Object(Qr.c)(t.selection);if(!o)return!1;const r=wr.b.get(o.node),{tableCell:i,tableHeader:a}=t.schema.nodes,c=Object(f.findParentNodeOfType)([i,a])(t.selection),l=r.positionAt(0,0,o.node)+o.start,d=r.positionAt(r.height-1,r.width-1,o.node)+o.start;return l===c.pos&&-1===e?(qa(mt.e.KEYBOARD,{index:0,moveCursorToInsertedRow:!0})(t,n),!0):d===c.pos&&1===e?(qa(mt.e.KEYBOARD,{index:r.height,moveCursorToInsertedRow:!0})(t,n),!0):!n||function(e){return function(t,n){if(!Object(Sr.b)(t))return!1;const o=Object(Cr.a)(t.selection);if(!o)return!1;const r=function(e,t){if(-1===t){const t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let n=e.index(-1)-1,o=e.before();n>=0;n--){const t=e.node(-1).child(n);if(t.childCount&&t.lastChild)return o-1-t.lastChild.nodeSize;o-=t.nodeSize}}else{if(e.index()<e.parent.childCount-1&&e.nodeAfter)return e.pos+e.nodeAfter.nodeSize;const t=e.node(-1);for(let n=e.indexAfter(-1),o=e.after();n<t.childCount;n++){const e=t.child(n);if(e.childCount)return o+1;o+=e.nodeSize}}}(o,e);if(void 0===r)return!1;if(n){const e=t.doc.resolve(r);n(t.tr.setSelection(s.TextSelection.between(e,function(e){const t=e.nodeAfter?e.nodeAfter.nodeSize:0;return e.node(0).resolve(e.pos+t)}(e))).scrollIntoView())}return!0}}(e)(t,n)};function es(){const e={};var t,n;return Te.bindKeymapWithCommand(Te.nextCell.common,Qa(1),e),Te.bindKeymapWithCommand(Te.previousCell.common,Qa(-1),e),Te.bindKeymapWithCommand(Te.toggleTable.common,Object(bt.d)({action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.TABLE,attributes:{inputMethod:mt.e.SHORTCUT},eventType:mt.d.TRACK})(Oi.c),e),Te.bindKeymapWithCommand(Te.backspace.common,Object(ze.c)((t=mt.e.KEYBOARD,Object(bt.d)(({selection:e})=>Ja(e,t))(sa)),Ha(mt.e.KEYBOARD)),e),Te.bindKeymapWithCommand(Te.backspace.common,ca,e),Te.bindKeymapWithCommand(Te.addRowBefore.common,Ka("TOP"),e),Te.bindKeymapWithCommand(Te.addRowAfter.common,Ka("BOTTOM"),e),Te.bindKeymapWithCommand(Te.addColumnBefore.common,(n=Oi.b,(e,t)=>{const{selection:o,schema:{nodes:{tableHeader:r}}}=e;if(o instanceof s.TextSelection){const i=Object(Qr.a)(o.$from);if(i&&i.node.type!==r)return n(e,t)}if(o instanceof U.a){const r=Object(ti.a)(o);if(!Object(oa.b)(e)||r&&r.top>0)return n(e,t)}return!1}),e),Te.bindKeymapWithCommand(Te.addColumnAfter.common,Oi.a,e),Object(ln.b)(e)}var ts,ns=n("MWcs");!function(e){e.TopToBottom="TopToBottom",e.BottomToTop="BottomToTop"}(ts||(ts={}));const os=(e,t)=>{const{selection:n}=e;return n instanceof U.a?is(n)(e,t):n instanceof Ze.a?ss(n)(e,t):n instanceof s.TextSelection&&ls(n)(e,t)},rs=(e,t)=>{const{selection:n}=e;return n instanceof U.a?as(n)(e,t):n instanceof Ze.a?cs(n)(e,t):n instanceof s.TextSelection&&ds(n)(e,t)},is=e=>(t,n)=>{if(Object(ki.c)(t.selection)){const{selectionRelativeToNode:o}=ao(t);if(o===oo.a.Start)return fs()(t,n);if(o===oo.a.End)return hs(e)(t,n);if(void 0===o)return ps(e,oo.a.Before)(t,n)}return!1},as=e=>(t,n)=>{if(Object(ki.c)(t.selection)){const{selectionRelativeToNode:o}=ao(t);if(o===oo.a.Start)return ps(e)(t,n);if(o===oo.a.End||void 0===o)return ms()(t,n)}return!1},ss=e=>(t,n)=>{const{doc:o}=t,{$from:r,from:i,side:a}=e;if(a===Ze.c.RIGHT){if(r.nodeBefore&&"table"===r.nodeBefore.type.name)return us({node:r.nodeBefore,startPos:o.resolve(i-1).start(r.depth+1),dir:ts.TopToBottom})(t,n)}else if(a===Ze.c.LEFT){const o=Object(Qr.c)(e);if(o&&bs(r,e)){const{selectionRelativeToNode:e}=ao(t);return e===oo.a.Before?fs()(t,n):us({node:o.node,startPos:o.start,dir:ts.BottomToTop})(t,n)}}return!1},cs=e=>(t,n)=>{const{$from:o,from:r,$to:i,side:a}=e;if(a===Ze.c.LEFT){if(o.nodeAfter&&"table"===o.nodeAfter.type.name)return us({node:o.nodeAfter,startPos:r+1,dir:ts.BottomToTop})(t,n)}else if(a===Ze.c.RIGHT){const o=Object(Qr.c)(e);if(o&&gs(i,e))return us({node:o.node,startPos:o.start,dir:ts.TopToBottom})(t,n)}return!1},ls=e=>(t,n)=>{const o=Object(Qr.c)(e);if(o){const{$from:r}=e;if(bs(r,e)&&"paragraph"===r.parent.type.name&&r.depth===o.depth+3){const{selectionRelativeToNode:e}=ao(t);return e===oo.a.Before?fs()(t,n):us({node:o.node,startPos:o.start,dir:ts.BottomToTop})(t,n)}}return!1},ds=e=>(t,n)=>{const o=Object(Qr.c)(e);if(o){const{$to:r}=e;if(gs(r,e)&&"paragraph"===r.parent.type.name&&r.depth===o.depth+3)return us({node:o.node,startPos:o.start,dir:ts.TopToBottom})(t,n)}return!1},us=({node:e,startPos:t,dir:n})=>(o,r)=>{const{doc:i}=o,{map:a}=wr.b.get(e),s=i.resolve(t+a[0]),c=i.resolve(t+a[a.length-1]);let l,d;return n===ts.TopToBottom?(l=new U.a(s,c),d=oo.a.End):(l=new U.a(c,s),d=oo.a.Start),co(d,l)(o,r)},ps=(e,t)=>(n,o)=>{const{$anchorCell:r,$headCell:i}=e,a=r.pos<i.pos?r:i,c=n.doc.resolve(a.pos+1),l=Ze.a.valid(c)?new Ze.a(c,Ze.c.LEFT):s.Selection.findFrom(c,1);return co(t,l)(n,o)},hs=(e,t)=>(n,o)=>{const{$anchorCell:r,$headCell:i}=e,a=r.pos>i.pos?r:i,c=a.pos+(a.nodeAfter?a.nodeAfter.content.size:0)+1,l=n.doc.resolve(c),d=Ze.a.valid(l)?new Ze.a(l,Ze.c.RIGHT):s.Selection.findFrom(l,-1);return co(t,d)(n,o)},fs=()=>(e,t)=>{const n=Object(Qr.c)(e.selection);if(n){const o=e.doc.resolve(n.pos);if(Ze.a.valid(o)){const n=new Ze.a(o,Ze.c.LEFT);return co(void 0,n)(e,t)}}return!1},ms=()=>(e,t)=>{const n=Object(Qr.c)(e.selection);if(n){const o=e.doc.resolve(n.pos+n.node.nodeSize);if(Ze.a.valid(o)){const n=new Ze.a(o,Ze.c.RIGHT);return co(void 0,n)(e,t)}}return!1},bs=(e,t)=>Object(ns.c)(e,Object(Qr.c)(t)),gs=(e,t)=>Object(ns.b)(e,Object(Qr.c)(t));function vs(){const e={};return Object(Te.bindKeymapWithCommand)(Te.moveRight.common,rs,e),Object(Te.bindKeymapWithCommand)(Te.moveLeft.common,os,e),Object(ln.b)(e)}var ys=n("5lAk");const Os=e=>{const t=Object(Qr.c)(e.selection);if(!t)return[];const n=wr.b.get(t.node),o=new Set,r=[];return n.map.forEach(e=>{o.has(e)?r.push(e):o.add(e)}),r},Es=e=>Array.from(Array(e).keys()),ws=()=>Object(Zr.a)(e=>{const t=Os(e.tr);if(!t.length)return!1;const n=Object(Qr.c)(e.tr.selection);if(!n)return!1;const o=t.map(e=>({pos:e+n.start,start:e+n.start+1,node:n.node.nodeAt(e)})),r=o.map(e=>Yt.a.node(e.pos,e.pos+e.node.nodeSize,{class:ei.c.HOVERED_CELL_WARNING},{key:ei.d.CELL_CONTROLS_HOVER}));return{type:"HOVER_CELLS",data:{decorationSet:ra(e,r,ei.d.CELL_CONTROLS_HOVER)}}},e=>e.setMeta("addToHistory",!1)),Cs=(e,t)=>Object(Zr.a)(n=>{const o=Ai(e)(n.selection);if(!o)return!1;const r=ai(o,"column",t);return{type:"HOVER_COLUMNS",data:{decorationSet:ra(n,r,ei.d.COLUMN_CONTROLS_HOVER),hoveredColumns:e,isInDanger:t}}},e=>e.setMeta("addToHistory",!1)),Ts=(e,t)=>Object(Zr.a)(n=>{const o=Object(ni.a)(e)(n.selection);if(!o)return!1;const r=ai(o,"row",t);return{type:"HOVER_ROWS",data:{decorationSet:ra(n,r,ei.d.ROW_CONTROLS_HOVER),hoveredRows:e,isInDanger:t}}},e=>e.setMeta("addToHistory",!1)),Ss=e=>Object(Zr.a)(t=>{const n=Object(Qr.c)(t.selection);if(!n)return!1;const o=wr.b.get(n.node),r=Es(o.width),i=Es(o.height),a=Object(ni.a)(i)(t.selection);if(!a)return!1;const s=ai(a,"table",e);return{type:"HOVER_TABLE",data:{decorationSet:ra(t,s,ei.d.TABLE_CONTROLS_HOVER),hoveredColumns:r,hoveredRows:i,isInDanger:e}}},e=>e.setMeta("addToHistory",!1)),ks=()=>Object(Zr.a)(e=>({type:"CLEAR_HOVER_SELECTION",data:{decorationSet:ra(e,[],ei.d.ALL_CONTROLS_HOVER)}}));var xs=n("U6Bd"),As=n("KwWb"),js=n("DAa0");const Is=e=>Boolean(e&&(["TH","TD"].indexOf(e.tagName)>-1||!!Object(L.b)(e,"."+ei.c.TABLE_HEADER_CELL)||!!Object(L.b)(e,"."+ei.c.TABLE_CELL))),Ms=e=>[parseInt(e.getAttribute("data-start-index")||"-1",10),parseInt(e.getAttribute("data-end-index")||"-1",10)],Ns=e=>Object(L.c)(e,ei.c.COLUMN_CONTROLS_DECORATIONS),Rs=e=>Object(L.c)(e,ei.c.ROW_CONTROLS_BUTTON)||Object(L.c)(e,ei.c.NUMBERED_COLUMN_BUTTON),Ps=e=>Object(L.c)(e,ei.c.RESIZE_HANDLE_DECORATION),Ls=(e,t)=>{const n=e.target;if(n instanceof HTMLElement){const o=n.getBoundingClientRect();if(o.width<=0)return null;const{left:r,width:i}=o,a=e.clientX-r;if(!t)return a/i>.5?"right":"left";if(a<=t)return"left";if(a>=i-t)return"right"}return null},Ds=e=>{const t=e.target;if(t instanceof HTMLElement){const n=t.getBoundingClientRect();if(n.height<=0)return null;return(e.clientY-n.top)/n.height>.5?"bottom":"top"}return null},_s=e=>{if(!e)return;const t=e.offsetHeight+js.E,n=Array.from(e.querySelectorAll("."+ei.c.RESIZE_HANDLE));n&&n.length&&n.forEach(e=>{e.style.height=t+"px"})},Bs=(e,t)=>{const{state:n,dispatch:o}=e;return 11===ys.a.ie_version||(e=>e instanceof FocusEvent&&e.relatedTarget instanceof HTMLElement&&"calendar"===e.relatedTarget.getAttribute("aria-label"))(t)||ia(!1)(n,o),t.preventDefault(),!1},$s=(e,t)=>{const{state:n,dispatch:o}=e;return ia(!0)(n,o),t.preventDefault(),!1},zs=(e,t)=>{if(!(t.target instanceof HTMLElement))return!1;const n=t.target,o=Object(Qr.c)(e.state.selection);if(t instanceof MouseEvent&&Ns(n)){const[o]=Ms(n),{state:a,dispatch:s}=e;return(r=o,i=t.shiftKey,Object(Zr.a)(e=>{const t=Ai(r)(e.tr.selection);if(!t||!t.length||"number"!=typeof t[0].pos)return!1;const n=si(Ii(r,i)(e.tr)),o=ra(e,n,ei.d.COLUMN_SELECTED);return{type:"SELECT_COLUMN",data:{targetCellPosition:t[0].pos,decorationSet:o}}},e=>Ii(r,i)(e).setMeta("addToHistory",!1)))(a,s)}var r,i;const a=n.matches?n.matches:n.msMatchesSelector;if(!o||!Object(to.k)(n)||!a||a.call(n,"table .image, table p, table .image div"))return!1;const s=wr.b.get(o.node),c=Object(L.b)(n,"td")||Object(L.b)(n,"th"),l=c&&c.cellIndex,d=Object(L.b)(n,"tr"),u=d&&d.rowIndex,p=s.width*u+l,h=s.map[p+1],{dispatch:f,state:{tr:m,schema:{nodes:{paragraph:b}}}}=e,g=o.node.nodeAt(s.map[p]);return Object(to.o)(g)&&(m.insert(h+o.pos,b.create()),f(m),Object(ns.f)(e,h+o.pos)),!0},Fs=(e,t)=>{if(!(t.target instanceof HTMLElement))return!1;const{state:n,dispatch:o}=e,r=t.target,{insertColumnButtonIndex:i,insertRowButtonIndex:a}=Object(Zr.c)(n);if(s=r,Object(L.c)(s,ei.c.CONTROLS_INSERT_ROW)||Object(L.b)(s,"."+ei.c.CONTROLS_INSERT_ROW)||Object(L.c)(s,ei.c.CONTROLS_BUTTON_OVERLAY)&&Object(L.b)(s,"."+ei.c.ROW_CONTROLS)){const[e,i]=Ms(r),a="bottom"===Ds(t)?i:e;return la(a)(n,o)}var s,c;if(Ns(r)){const[t]=Ms(r),{state:n,dispatch:o}=e;return Cs([t],!1)(n,o)}if((Is(r)||(e=>Object(L.c)(e,ei.c.CONTROLS_CORNER_BUTTON))(r))&&("number"==typeof i||"number"==typeof a))return da()(n,o);if(Ps(r)){const[e,t]=Ms(r);return(c={left:e,right:t},Object(Zr.a)(e=>({type:"SHOW_RESIZE_HANDLE_LINE",data:{decorationSet:ra(e,di(e.selection,c),ei.d.COLUMN_RESIZING_HANDLE_LINE)}})))(n,o)}return!1},Us=(e,t)=>{const n=!!(t.target&&t.target instanceof HTMLElement&&(o=t.target,Object(L.c)(o,ei.c.TABLE_CONTAINER)||Object(L.c)(o,ei.c.TABLE_NODE_WRAPPER)||Ns(t.target)||Rs(t.target)));var o;return n&&t.preventDefault(),n},Hs=(e,t)=>{if(!(t instanceof MouseEvent&&t.target instanceof HTMLElement))return!1;const n=t.target;if(Ns(n)){const{state:t,dispatch:n}=e;return ks()(t,n)}const o=t.relatedTarget;if(Ps(n)&&!Ps(o)){const{state:t,dispatch:n}=e;return Object(Zr.a)(e=>({type:"HIDE_RESIZE_HANDLE_LINE",data:{decorationSet:ra(e,[],ei.d.COLUMN_RESIZING_HANDLE_LINE)}}))(t,n)}return!1},Ws=(e,t)=>{if(!(t.target instanceof HTMLElement))return!1;const{state:n,dispatch:o}=e,{insertColumnButtonIndex:r,insertRowButtonIndex:i}=Object(Zr.c)(n),a=t.target;return s=a,!(!Object(L.c)(s,ei.c.CONTROLS_BUTTON)&&!Object(L.c)(s,ei.c.ROW_CONTROLS_BUTTON_WRAP))||!(void 0===r&&void 0===i||!da()(n,o));var s},Vs=(e,t)=>{if(!(t.target instanceof HTMLElement))return!1;const n=t.target;if(Ns(n)){const{state:r,dispatch:i}=e,{insertColumnButtonIndex:a}=Object(Zr.c)(r),[s,c]=Ms(n),l="right"===Ls(t)?c:s;if(l!==a)return(o=l,Object(Zr.a)(e=>o>-1&&{type:"SHOW_INSERT_COLUMN_BUTTON",data:{insertColumnButtonIndex:o}},e=>e.setMeta("addToHistory",!1)))(r,i)}var o;if(Rs(n)){const{state:o,dispatch:r}=e,{insertRowButtonIndex:i}=Object(Zr.c)(o),[a,s]=Ms(n),c="bottom"===Ds(t)?s:a;if(c!==i)return la(c)(o,r)}if(!Ps(n)&&Is(n)){const o=Ls(t,ei.a);if(null!==o){const{state:t,dispatch:r}=e,{resizeHandleColumnIndex:i}=Object(Zr.c)(t),a=Object(L.b)(n,"td, th"),s=e.posAtDOM(a,0),c=Object(Qr.b)(t.doc.resolve(s));if(c){const e="left"===o?c.left:c.right;if(e!==i||!(({columnEndIndexTarget:e,target:t})=>{const n=Object(L.b)(t,"table");if(!n)return!1;const o=["."+ei.c.RESIZE_HANDLE_DECORATION,`[data-end-index="${e}"]`],r=n.querySelectorAll(o.join(""));return!(!r||0===r.length)})({target:n,columnEndIndexTarget:e}))return(e=>Object(Zr.a)(t=>{const n=Object(Qr.c)(t.selection),{pluginConfig:{allowColumnResizing:o}}=Object(Zr.c)(t);return!(!n||!o)&&{type:"ADD_RESIZE_HANDLE_DECORATIONS",data:{decorationSet:Di(e)({tr:t.tr,decorationSet:vi(t)}),resizeHandleColumnIndex:e}}},e=>e.setMeta("addToHistory",!1)))(e)(t,r)}}}return!1};function Ks(e,t){const{state:n,dispatch:o}=e,r=Object(_r.a)(n.doc.resolve(t));if(!r)return!1;const i=n.doc.nodeAt(r.pos);if(i){const e=s.Selection.findFrom(r,1,!0),t=s.Selection.findFrom(n.doc.resolve(r.pos+i.nodeSize),-1,!0);if(e&&t)return o(n.tr.setSelection(new s.TextSelection(e.$from,t.$to))),!0}return!1}const qs=e=>(t,n)=>{const o=Object(As.c)(t.state),r=Object(Zr.c)(t.state),i=o&&!!o.dragging;return!(!r||!r.tableNode||i)&&Object(xs.a)(e(t,n))};var Gs=n("+Mvc");const Ys=e=>{const t=[];return e.content.firstChild.content.forEach(e=>{const n=e.attrs.colspan||1;Array.isArray(e.attrs.colwidth)?e.attrs.colwidth.slice(0,n).forEach(e=>{t.push(["col",{style:`width: ${e}px;`}])}):t.push(...Array.from({length:n},e=>["col",{}]))}),t},Xs=(e,t)=>{let n=e.querySelector("colgroup");return n&&e.removeChild(n),n=function(e){return Be.DOMSerializer.renderSpec(document,["colgroup",{},...Ys(e)]).dom}(t),e.insertBefore(n,e.firstChild),n.children},Js=e=>!!Object(Je.b)(e.content.firstChild.content).find(e=>e.attrs.colwidth);var Zs=n("nB/6"),Qs=n.n(Zs),ec=n("U6fo"),tc=n("2c8S");const nc=(e,t,n,o)=>{if(!e)return;const r=oc(e,t);if(!r)return;let i=r.attrs.layout||"default";const{schema:a}=t,s=a.marks.breakout&&a.marks.breakout.isInSet(r.marks);s&&s.attrs.mode&&(i=s.attrs.mode);let c=rc(i,n,o);if(r.type===a.nodes.layoutSection&&(c+=2*je.Y,n.width>je.eb)){c-=(ec.b+2)*(r.childCount-1);const n=t.doc.resolve(e),o=Object(f.findParentNodeOfTypeClosestToPos)(n,[t.schema.nodes.layoutColumn]);o&&o.node&&!isNaN(o.node.attrs.width)&&(c=Math.round(c*o.node.attrs.width*.01))}return r.type===a.nodes.layoutSection?c-=2*ec.a:r.type===a.nodes.bodiedExtension&&(c-=2*tc.a),c-=2,c},oc=(e,t)=>{if(void 0===e)return null;const n=t.doc.resolve(e),o=Object(f.findParentNodeOfTypeClosestToPos)(n,[t.schema.nodes.bodiedExtension,t.schema.nodes.layoutSection,t.schema.nodes.expand]);return o?o.node:null},rc=(e,t,n)=>n?Math.min(t.lineLength,je.q):Object(l.a)(e,t.width),ic=(e,t)=>{if(!e||void 0===t)return;const n=e.find(e=>e.pos===t+1);return n&&n.sticky?n:void 0},ac=new s.PluginKey("stickyHeadersPlugin"),sc=(e,t,n)=>r=>{const i=wr.b.get(t),a={};for(let n=0;n<i.width;n++)for(let s=0;s<i.height;s++){const{width:c}=e.cols[n],l=s*i.width+n,d=i.map[l],u=a[d]||Object(o.a)({},t.nodeAt(d).attrs),p=u.colspan||1;if(u.colwidth&&u.colwidth.length>p&&(r=Aa({type:"UPDATE_COLUMN_WIDTHS",problem:"COLWIDTHS_BEFORE_UPDATE",data:{colwidths:u.colwidth,colspan:p}})(r),u.colwidth=u.colwidth.slice(0,p)),s&&i.map[l]===i.map[l-i.width])continue;const h=1===p?0:n-i.colCount(d);if(u.colwidth&&u.colwidth[h]===c)continue;let f=u.colwidth?u.colwidth.slice():Array.from({length:p},e=>0);f[h]=c,f.length>p&&(r=Aa({type:"UPDATE_COLUMN_WIDTHS",problem:"COLWIDTHS_AFTER_UPDATE",data:{colwidths:f,colspan:p}})(r),f=f.slice(0,p)),a[d]=Object(o.a)(Object(o.a)({},u),{},{colwidth:f})}const c=[],l={};for(let e=0;e<i.height;e++){const n=t.child(e),o=[];for(let r=0;r<i.width;r++){const n=e*i.width+r,s=i.map[n],c=t.nodeAt(s);!l[s]&&c&&(o.push(c.type.createChecked(a[s]||c.attrs,c.content,c.marks)),l[s]=!0)}c.push(n.type.createChecked(n.attrs,o,n.marks))}const d=n-1,{selection:u}=r;if(r.replaceWith(d,d+t.nodeSize,t.type.createChecked(t.attrs,c,t.marks)),u instanceof s.TextSelection)r.setSelection(new s.TextSelection(r.doc.resolve(u.$from.pos),r.doc.resolve(u.$to.pos)));else if(u instanceof U.a){const e=U.a.create(r.doc,u.$anchorCell.pos,u.$headCell.pos);r.setSelection(e)}return r};var cc=n("bBdq");const lc=(e,t,n,o)=>{if(t&&e){const r=e.querySelector("tr.sticky"),i=r&&r.firstElementChild;if(n){const o=t.offsetWidth-e.offsetWidth;for(let t=0;t<n.length;t++){const r=n[t];r.style.display=o>0&&o>e.scrollLeft?"block":"none",r.classList.contains(ei.c.TABLE_STICKY_SHADOW)&&i&&(r.style.height=i.clientHeight+1+"px")}}if(o)for(let t=0;t<o.length;t++){const n=o[t];n.style.display=e.scrollLeft>0?"block":"none",n.classList.contains(ei.c.TABLE_STICKY_SHADOW)&&i&&(n.style.height=i.clientHeight+1+"px")}}};var dc=n("gRiq");const uc=(e,t)=>{const n=Object(L.d)(t,e=>Number(e.getAttribute("colspan")||1)),o=t.nextElementSibling||t;if(o){const e=Object(L.d)(o,e=>({width:e.offsetWidth,colspan:Number(e.getAttribute("colspan")||1),colwidth:e.dataset.colwidth}));let t=[];if(e.map((e,n)=>{t.push(...(({width:e,colspan:t,colwidth:n})=>{if(t<=1||!n)return new Array(t).fill(e/t);const o=n.split(",").map(e=>Number(e)),r=o.reduce((e,t)=>e+t,0);return o.map(t=>e*(t/r))})(e))}),0!==e.reduce((e,t)=>e+t.width,0)){return((e,t)=>{let n=0;const o=[];return e.forEach(e=>{const r=t.slice(n,n+e).reduce((e,t)=>e+t,0);n+=e,o.push(r)}),o})(n,t).map(e=>e+"px").join(" ")}}const r=n.reduce((e,t)=>e+t,0);return n.map(e=>e/r*100).map(e=>e+"%").join(" ")},pc=e=>{const{tableRef:t}=Object(Zr.c)(e);if(!t)return;if(!t.querySelector("tr"))return;const n=t.parentElement;if(!n||!n.parentElement)return;const o=n.parentElement.querySelectorAll("."+ei.c.ROW_CONTROLS_BUTTON_WRAP),r=n.parentElement.querySelectorAll(ei.c.NUMBERED_COLUMN_BUTTON);hc(t);const i=Object(dc.d)(t);for(let c=0,l=o.length;c<l;c++){const e=i[c];e&&(o[c].style.height=e+"px",r.length&&(r[c].style.height=e+"px"))}const a=n.parentElement.querySelectorAll("."+ei.c.TABLE_RIGHT_SHADOW),s=n.parentElement.querySelectorAll("."+ei.c.TABLE_LEFT_SHADOW);lc(n,t,a,s)},hc=e=>{if(!e)return;const t=e.querySelector("tr[data-header-row]");t&&(((e,t)=>{const n=uc(0,t);n&&(t.style.gridTemplateColumns=n)})(e.querySelector("colgroup"),t),fc(e,t))},fc=(e,t)=>{const n=e.querySelector("tbody"),o=e.parentElement;if(n&&o){const e=Math.min(n.offsetWidth+1,o.offsetWidth);t.style.width=e+"px",t.scrollLeft=o.scrollLeft}},mc=({minWidth:e,maxSize:t,table:n,tableRef:o,start:r,domAtPos:i})=>{if(Js(n))return{cols:Object(cc.a)(n).map((t,n)=>({width:0===t?_i.i:t,minWidth:0===t?_i.i:e,index:n})),maxSize:t};const a=Xs(o,n);return{cols:Array.from(a).map((t,o)=>{const a=Yi(o,n,r,i);return qi(a,o,e)}),maxSize:t}},bc=({cols:e})=>e.reduce((e,t)=>e+t.width,0),gc=(e,t)=>{const n=t-bc(e);if(n>0||n<0&&Math.abs(n)<_i.d){let t=!1;return Object(o.a)(Object(o.a)({},e),{},{cols:e.cols.map(e=>!t&&e.width+n>e.minWidth?(t=!0,Object(o.a)(Object(o.a)({},e),{},{width:e.width+n})):e)})}return e},vc=e=>{const t=bc(e),n=Math.floor(t/e.cols.length),r=e.cols.map(e=>Object(o.a)(Object(o.a)({},e),{},{width:n}));return gc(Object(o.a)(Object(o.a)({},e),{},{cols:r}),t)},yc=(e,t,n)=>{const r=bc(e),i=t.indexOf(n)>-1?n:n+1,a=e.cols[i],s={},c=[],l=e.cols.map(e=>{if(t.indexOf(e.index)>-1){const t=e.width-a.width;return 0!==t&&c.push(t),Object(o.a)(Object(o.a)({},e),{},{width:a.width})}return e});let d=Object(o.a)(Object(o.a)({},e),{},{cols:l.map(e=>{if(t.indexOf(e.index)>-1||t.indexOf(n)>-1&&e.index<i)return e;for(;c.length;){const t=c.shift()||0,n=s[e.index]||e,r=n.width+t;if(!(r>n.minWidth)){c.push(r-n.minWidth),s[n.index]=Object(o.a)(Object(o.a)({},n),{},{width:n.minWidth});break}s[n.index]=Object(o.a)(Object(o.a)({},n),{},{width:r})}return s[e.index]||e})});const u=e.maxSize,p=bc(d);if(t.length===e.cols.length&&p<u){if(r===u)return e;{const t=Math.floor((u-a.width)/(d.cols.length-1));d=Object(o.a)(Object(o.a)({},e),{},{cols:d.cols.map(e=>e.index===a.index?e:Object(o.a)(Object(o.a)({},e),{},{width:t}))})}}return gc(d,e.maxSize)};var Oc;function Ec(e,t,n,r,i=!0){const a=e.cols[t],s=e.cols[n];if(i){const e=Gi(a);Tc(Oc.DEST)(r)>e&&(r=r>0?e:-e)}Tc(Oc.SOURCE)(r)<0&&Sc(Oc.SOURCE)(r,a,s)<a.minWidth&&(r=a.width-a.minWidth);const c=s?Object(o.a)(Object(o.a)({},s),{},{width:Sc(Oc.DEST)(r,a,s)}):void 0;if(!c&&Tc(Oc.SOURCE)(r)<0){const t=bc(e);t-a.width+Sc(Oc.SOURCE)(r,a,s)<e.maxSize&&(r=e.maxSize-(t-a.width)-a.width-1)}const l=Object(o.a)(Object(o.a)({},a),{},{width:Sc(Oc.SOURCE)(r,a,s)}),d=e.cols.map((e,o)=>o===t?l:o===n?c:e).filter(Boolean);return{state:Object(o.a)(Object(o.a)({},e),{},{cols:d}),amount:r}}function wc(e,t,n){let r=function(e,t,n){const o=e.cols;return n<0?o.slice(0,t):o.slice(t+1)}(e,t,n);for(;r.length&&n;){let i=Cc(r,n);if(-1===i){if(n>0)return{state:Object(o.a)(Object(o.a)({},e),{},{cols:[...e.cols.slice(0,t),Object(o.a)(Object(o.a)({},e.cols[t]),{},{width:e.cols[t].width+n}),...e.cols.slice(t+1)]}),remaining:n};break}const a=r.find(e=>e.index===i);if(!a||Gi(a)<=0)break;const s=Ec(e,a.index,t,n);e=s.state,n-=s.amount,r=r.filter(e=>e.index!==i)}return{state:e,remaining:n}}function Cc(e,t){if(0===e.length)return-1;"left"===(t<0?"left":"right")&&(e=e.slice().reverse());let n=-1;return e.forEach(e=>{Gi(e)&&-1===n&&(n=e.index)}),-1===n?-1:n}function Tc(e){return t=>e===Oc.SOURCE?t>0?-t:t:t<0?-t:t}function Sc(e){return(t,n,o)=>(e===Oc.SOURCE?n:o).width+Tc(e)(t)}!function(e){e.SOURCE="src",e.DEST="dest"}(Oc||(Oc={}));function kc(e,t){const n=t/bc(e);let r=Object(o.a)(Object(o.a)({},e),{},{maxSize:t,cols:e.cols.map(e=>{const{minWidth:t,width:r}=e;let i=Math.floor(r*n);return i<t&&(i=t),Object(o.a)(Object(o.a)({},e),{},{width:i})})}),i=bc(r);return i>t&&(r=function(e,t,n=[]){let r=t;for(;r>0;){const t=e.cols.filter(e=>Gi(e)&&-1===n.indexOf(e.index));if(0===t.length)break;const i=Math.floor(r/t.length);if(0===i)break;t.forEach(t=>{let n=t.width-i;if(n<t.minWidth){const e=t.minWidth-n;n=t.minWidth,r=r-i+e}else r-=i;e=Object(o.a)(Object(o.a)({},e),{},{cols:[...e.cols.slice(0,t.index),Object(o.a)(Object(o.a)({},t),{},{width:n}),...e.cols.slice(t.index+1)]})})}return e}(r,i-t)),gc(r,t)}const xc=(e,t,n)=>(o,r)=>{if(!e)return!1;const{node:i,start:a,parentWidth:s}=t;if(!1===Js(i))return Xs(e,i),!1;let c;if(c=s?((e,t,n,o,r)=>{const i=mc({minWidth:_i.d,maxSize:t,table:n,tableRef:e,start:o,domAtPos:r});return n.attrs.isNumberColumnEnabled&&(t-=je.R),kc(i,Math.floor(t))})(e,s,i,a,n):((e,t,n)=>{const{node:o,containerWidth:r,previousContainerWidth:i,dynamicTextSizing:a,prevNode:s,start:c,isBreakoutEnabled:l,layoutChanged:d}=t,u=Fi(o.attrs.layout,r,{dynamicTextSizing:a,isBreakoutEnabled:l}),p=Object(oa.e)(s),h=Fi(s.attrs.layout,i,{dynamicTextSizing:a,isBreakoutEnabled:l});let f=u;if(d&&p>h){if(p<u)f=u;else{const e=p/h;f=Math.floor(f*e)}}o.attrs.isNumberColumnEnabled&&(f-=je.R);return kc(mc({minWidth:_i.d,maxSize:u,table:o,tableRef:e,start:c,domAtPos:n}),f)})(e,t,n),c){let{tr:e}=o;if(e=sc(c,i,a)(e),e.docChanged&&r)return e.setMeta("scrollIntoView",!1),e.setMeta("scaleTable",!0),r(e),!0}return!1},Ac=e=>Object(As.a)({type:"STOP_RESIZING"},t=>(e||t).setMeta("scrollIntoView",!1)),jc=(e,t)=>Object(As.a)({type:"SET_LAST_CLICK",data:{lastClick:e}},t),Ic=e=>{const t=[];for(let n=e.left;n<e.right;n++)t.push(n);return t};class Mc extends i.Component{constructor(){super(...arguments),this.isActive=()=>{const{editorView:e,hoveredRows:t,isResizing:n}=this.props,{selection:o}=e.state,r=Object(Qr.c)(o);return!!r&&(Object(ki.c)(o)||t&&t.length===wr.b.get(r.node).height&&!n)},this.clearHoverSelection=()=>{const{state:e,dispatch:t}=this.props.editorView;ks()(e,t)},this.selectTable=()=>{const{state:e,dispatch:t}=this.props.editorView;t((e=>{const t=Object(Qr.c)(e.selection);if(t){const{map:n}=wr.b.get(t.node);if(n&&n.length){const o=t.start+n[0],r=t.start+n[n.length-1],i=e.doc.resolve(o),a=e.doc.resolve(r);return Object(Ci.a)(e.setSelection(new U.a(a,i)))}}return e})(e.tr).setMeta("addToHistory",!1))},this.hoverTable=()=>{const{state:e,dispatch:t}=this.props.editorView;Ss()(e,t)}}render(){const{isInDanger:e,tableRef:t,isHeaderColumnEnabled:n,isHeaderRowEnabled:o}=this.props;if(!t)return null;const r=this.isActive();return a.a.createElement("div",{className:Qs()(ei.c.CORNER_CONTROLS,{active:r,sticky:void 0!==this.props.stickyTop}),style:{top:void 0!==this.props.stickyTop?this.props.stickyTop+"px":void 0}},a.a.createElement("button",{type:"button",className:Qs()(ei.c.CONTROLS_CORNER_BUTTON,{danger:r&&e}),onClick:this.selectTable,onMouseOver:this.hoverTable,onMouseOut:this.clearHoverSelection}),!o&&a.a.createElement("div",{className:ei.c.CORNER_CONTROLS_INSERT_ROW_MARKER},a.a.createElement("div",{className:ei.c.CONTROLS_INSERT_MARKER})),!n&&a.a.createElement("div",{className:ei.c.CORNER_CONTROLS_INSERT_COLUMN_MARKER},a.a.createElement("div",{className:ei.c.CONTROLS_INSERT_MARKER})))}}class Nc extends i.Component{constructor(){super(...arguments),this.hoverRows=e=>this.props.tableActive?this.props.hoverRows([e]):null,this.selectRow=(e,t)=>{const{tableActive:n,editorView:o,selectRow:r}=this.props;if(!n&&t.target&&t.target instanceof Node){const{doc:e,selection:n,tr:r}=o.state,i=o.posAtDOM(t.target,1),a=e.resolve(i),c=n.head>i?s.Selection.near(e.resolve(i+(a.parent.nodeSize-3)),-1):s.Selection.near(a);o.dispatch(r.setSelection(c))}r(e,t.shiftKey)},this.clearHoverSelection=()=>{const{tableActive:e,editorView:t}=this.props;if(e){const{state:e,dispatch:n}=t;ks()(e,n)}},this.getClassNames=e=>{const{hoveredRows:t,editorView:n,isInDanger:o,isResizing:r}=this.props,i=Object(ki.b)(e)(n.state.selection)||-1!==(t||[]).indexOf(e)&&!r;return[ei.c.NUMBERED_COLUMN_BUTTON,i?ei.c.HOVERED_CELL_ACTIVE:"",i&&o?ei.c.HOVERED_CELL_IN_DANGER:""].join(" ")}}render(){const{tableRef:e,hasHeaderRow:t}=this.props,n=Object(dc.d)(e);return a.a.createElement("div",{className:ei.c.NUMBERED_COLUMN,style:{marginTop:t&&void 0!==this.props.stickyTop?n[0]:void 0}},n.map((e,n)=>a.a.createElement("div",{key:"wrapper-"+n,className:this.getClassNames(n),"data-index":n,style:{height:e,top:void 0!==this.props.stickyTop&&t&&0===n?this.props.stickyTop+"px":void 0},onClick:e=>this.selectRow(n,e),onMouseOver:()=>this.hoverRows(n),onMouseOut:this.clearHoverSelection},t?n>0?n:null:n+1)))}}class Rc extends i.Component{constructor(){super(...arguments),this.clearHoverSelection=()=>{const{state:e,dispatch:t}=this.props.editorView;ks()(e,t)}}render(){const{editorView:e,tableRef:t,hoveredRows:n,isInDanger:o,isResizing:r}=this.props;if(!t)return null;const{selection:i}=e.state,s=Object(dc.d)(t),c=Object(dc.e)(s),l=t.querySelector("tr"),d=!!l&&l.getAttribute("data-header-row");return a.a.createElement("div",{className:ei.c.ROW_CONTROLS},a.a.createElement("div",{className:ei.c.ROW_CONTROLS_INNER},c.map(({startIndex:e,endIndex:t,height:c},l)=>{let u=-1;1===l&&d&&void 0!==this.props.stickyTop&&(u+=s[l-1]+js.E);const p=void 0!==this.props.stickyTop&&0===l&&d;return a.a.createElement("div",{className:`${ei.c.ROW_CONTROLS_BUTTON_WRAP} ${Object(dc.b)(e,i,n,o,r)} ${p?"sticky":""}`,key:e,style:{height:c,marginTop:u+"px",top:p?this.props.stickyTop+3+"px":void 0,paddingTop:p?js.s+"px":void 0}},a.a.createElement("button",{type:"button",className:`${ei.c.ROW_CONTROLS_BUTTON}\n                  ${ei.c.CONTROLS_BUTTON}\n                `,onClick:t=>this.props.selectRow(e,t.shiftKey),onMouseOver:()=>this.props.hoverRows([e]),onMouseOut:this.clearHoverSelection,"data-start-index":e,"data-end-index":t}),a.a.createElement("div",{className:ei.c.CONTROLS_INSERT_MARKER}))})))}}class Pc extends i.Component{constructor(){super(...arguments),this.selectRow=(e,t)=>{const{editorView:n}=this.props,{state:o,dispatch:r}=n;11===ys.a.ie_version&&n.dom.blur(),((e,t)=>Object(Zr.a)(t=>{let n;const o=Object(ni.a)(e)(t.tr.selection);return o&&o.length&&(n=o[0].pos),{type:"SET_TARGET_CELL_POSITION",data:{targetCellPosition:n}}},n=>Mi(e,t)(n).setMeta("addToHistory",!1)))(e,t)(o,r)},this.hoverRows=(e,t)=>{const{state:n,dispatch:o}=this.props.editorView;Ts(e,t)(n,o)}}shouldComponentUpdate(e){const{tableRef:t,isInDanger:n,isResizing:o,isHeaderRowEnabled:r,isNumberColumnEnabled:i,hoveredRows:a,selection:s,tableHeight:c,tableActive:l,isHeaderColumnEnabled:d,ordering:u,headerRowHeight:p,stickyHeader:h}=this.props;return u!==e.ordering||t!==e.tableRef||c!==e.tableHeight||l!==e.tableActive||n!==e.isInDanger||o!==e.isResizing||a!==e.hoveredRows||r!==e.isHeaderRowEnabled||d!==e.isHeaderColumnEnabled||i!==e.isNumberColumnEnabled||(f=s,!((m=e.selection)||!f)||Object(wi.a)(f,"cell")!==Object(wi.a)(m,"cell")||Object(wi.a)(f,"cell")&&Object(wi.a)(m,"cell")&&f.ranges!==m.ranges)||p!==e.headerRowHeight||h!==e.stickyHeader;var f,m}render(){const{editorView:e,tableRef:t,isInDanger:n,isResizing:o,isNumberColumnEnabled:r,isHeaderRowEnabled:i,isHeaderColumnEnabled:s,tableActive:c,hasHeaderRow:l,hoveredRows:d,stickyHeader:u}=this.props;if(!t)return null;const p=u&&u.sticky?u.top:void 0;return a.a.createElement("div",{onMouseDown:e=>e.preventDefault()},r?a.a.createElement(Nc,{editorView:e,hoverRows:this.hoverRows,tableRef:t,tableActive:c,hoveredRows:d,hasHeaderRow:l,isInDanger:n,isResizing:o,selectRow:this.selectRow,stickyTop:p}):null,a.a.createElement(Mc,{editorView:e,tableRef:t,isInDanger:n,isResizing:o,isHeaderRowEnabled:i,isHeaderColumnEnabled:s,hoveredRows:d,stickyTop:c?p:void 0}),a.a.createElement(Rc,{editorView:e,tableRef:t,hoverRows:this.hoverRows,hoveredRows:d,isInDanger:n,isResizing:o,selectRow:this.selectRow,stickyTop:c?p:void 0}))}}Pc.displayName="TableFloatingControls";const Lc=11===ys.a.ie_version,Dc=()=>a.a.createElement("div",{style:{position:"absolute",top:"30px"}}," ");class _c extends a.a.Component{constructor(e){super(e),this.state={scroll:0,tableContainerWidth:"inherit",parentWidth:void 0,isLoading:!0},this.onStickyState=e=>{const t=this.props.getPos();if(!Object(ns.d)(t,this.props.view.state))return;const n=ic(e,t);n!==this.state.stickyHeader&&this.setState({stickyHeader:n})},this.getMarginLeft=e=>{const{containerWidth:t}=this.props,{lineLength:n}=t;let o;if("inherit"!==e&&n){const t=Object(L.e)(e);t&&(o=(n-t)/2)}return o},this.handleScroll=e=>{if(this.wrapper&&e.target===this.wrapper){if(this.table){const e=this.table.querySelectorAll("tr[data-header-row]");for(let t=0;t<e.length;t++){const n=e[t];n.scrollLeft=this.wrapper.scrollLeft,n.style.marginRight="2px"}}this.setState({scroll:this.wrapper.scrollLeft})}},this.handleTableResizing=()=>{const{node:e,containerWidth:t,options:n}=this.props,o=this.node,r=o.attrs,i=r.layout!==e.attrs.layout&&r.__autoSize===e.attrs.__autoSize,a=this.getParentNodeWidth(),s=a&&a!==this.state.parentWidth,c=this.tableNodeLayoutSize(e,t.width,n);(i||s||r.isNumberColumnEnabled!==e.attrs.isNumberColumnEnabled||Object(oa.i)(e,o)||c!==this.layoutSize)&&(this.scaleTable({parentWidth:a,layoutChanged:i}),this.updateParentWidth(a)),this.updateTableContainerWidth(),this.node=e,this.containerWidth=t,this.layoutSize=c},this.scaleTable=e=>{const{view:t,node:n,getPos:r,containerWidth:i,options:a}=this.props,{state:s,dispatch:c}=t,l=r();if(!Object(ns.d)(l,s))return;const d=t.domAtPos.bind(t),{width:u}=i;this.frameId&&window&&window.cancelAnimationFrame(this.frameId),xc(this.table,Object(o.a)(Object(o.a)({},e),{},{node:n,prevNode:this.node||n,start:l+1,containerWidth:u,previousContainerWidth:this.containerWidth.width||u},a),d)(s,c)},this.handleAutoSize=()=>{if(this.table){const{view:e,node:t,getPos:n,options:o,containerWidth:r}=this.props,i=n();if(!Object(ns.d)(i,e.state))return;((e,t,n,o,r)=>{e.dispatch(ea(e,t,n,o,r))})(e,t,this.table,i,{dynamicTextSizing:o&&o.dynamicTextSizing||!1,containerWidth:r.width})}},this.handleWindowResize=()=>{const{node:e,containerWidth:t}=this.props,n=this.tableNodeLayoutSize(e);if(t.width>n)return;const o=this.getParentNodeWidth();this.frameId=this.scaleTableDebounced(o)},this.updateTableContainerWidth=()=>{const{node:e,containerWidth:t,options:n}=this.props;if(n&&!1===n.isBreakoutEnabled)return;const o=Object(_i.b)(e.attrs.layout,t.width);if(this.state.tableContainerWidth===o)return null;this.setState(e=>n&&!1===n.isBreakoutEnabled&&"inherit"!==e.tableContainerWidth?{tableContainerWidth:"inherit"}:{tableContainerWidth:o})},this.getParentNodeWidth=()=>{const{getPos:e,containerWidth:t,options:n,view:{state:o}}=this.props,r=e();if(Object(ns.d)(r,o))return nc(r,o,t,n&&n.isFullWidthModeEnabled)},this.updateParentWidth=e=>{this.setState({parentWidth:e})},this.tableNodeLayoutSize=(e,t,n)=>Fi(e.attrs.layout,t||this.props.containerWidth.width,n||this.props.options||{}),this.scaleTableDebounced=Object(xs.a)(this.scaleTable),this.handleTableResizingDebounced=Object(xs.a)(this.handleTableResizing),this.handleScrollDebounced=Object(xs.a)(this.handleScroll),this.handleAutoSizeDebounced=Object(xs.a)(this.handleAutoSize),this.handleWindowResizeDebounced=Object(xs.a)(this.handleWindowResize);const{options:t,containerWidth:n,node:r}=e;this.node=r,this.containerWidth=n;const i=!!t&&t.dynamicTextSizing,a=!!t&&t.wasFullWidthModeEnabled;this.layoutSize=this.tableNodeLayoutSize(r,n.width,{dynamicTextSizing:i,isFullWidthModeEnabled:a}),"execCommand"in document&&["enableObjectResizing","enableInlineTableEditing"].forEach(e=>{document.queryCommandSupported(e)&&document.execCommand(e,!1,"false")}),requestAnimationFrame(()=>{this.setState({isLoading:!1})})}componentDidMount(){const{allowColumnResizing:e,eventDispatcher:t}=this.props;e&&this.wrapper&&!Lc&&this.wrapper.addEventListener("scroll",this.handleScrollDebounced),e&&(window.addEventListener("resize",this.handleWindowResizeDebounced),this.updateTableContainerWidth(),this.frameId=this.handleTableResizingDebounced(this.props));const n=ac.getState(this.props.view.state);n&&this.onStickyState(n),t.on(ac.key,this.onStickyState)}componentWillUnmount(){this.wrapper&&!Lc&&this.wrapper.removeEventListener("scroll",this.handleScrollDebounced),this.handleScrollDebounced.cancel(),this.props.allowColumnResizing&&window.removeEventListener("resize",this.handleWindowResizeDebounced),this.frameId&&window&&window.cancelAnimationFrame(this.frameId),this.props.eventDispatcher.off(ac.key,this.onStickyState)}componentDidUpdate(e){if(this.wrapper&&this.wrapper.parentElement){const e=this.wrapper.parentElement.querySelectorAll("."+ei.c.TABLE_RIGHT_SHADOW),t=this.wrapper.parentElement.querySelectorAll("."+ei.c.TABLE_LEFT_SHADOW);lc(this.wrapper,this.table,e,t)}if(this.props.node.attrs.__autoSize)this.handleAutoSizeDebounced();else if(this.props.allowColumnResizing&&this.table){if(Object(oa.h)(this.props.node,e.node)||Object(oa.i)(this.props.node,e.node)){const{view:e}=this.props;Xs(this.table,this.props.node),pc(e.state)}this.frameId=this.handleTableResizingDebounced(e)}}render(){const{view:e,node:t,pluginState:n,tableResizingPluginState:o,width:r}=this.props,{isLoading:i,tableContainerWidth:s}=this.state,{pluginConfig:{allowControls:c=!0}}=n,{isInDanger:l,hoveredRows:d}=Object(Zr.c)(e.state),u=this.table||void 0,p=this.table===n.tableRef,h=!!o&&!!o.dragging,f=u?u.querySelector("tr[data-header-row]"):void 0,m=[a.a.createElement("div",{key:0,className:ei.c.ROW_CONTROLS_WRAPPER},a.a.createElement(Pc,{editorView:e,tableRef:u,tableActive:p,hoveredRows:d,isInDanger:l,isResizing:h,isNumberColumnEnabled:t.attrs.isNumberColumnEnabled,isHeaderRowEnabled:n.isHeaderRowEnabled,ordering:n.ordering,isHeaderColumnEnabled:n.isHeaderColumnEnabled,hasHeaderRow:Object(oa.d)(e.state,t),selection:e.state.selection,tableHeight:u?u.offsetHeight:void 0,headerRowHeight:f?f.offsetHeight:void 0,stickyHeader:this.state.stickyHeader}))],b=c&&!i&&p?-je.U:_i.g;return a.a.createElement("div",{style:{width:s,marginLeft:this.getMarginLeft(s)},className:Qs()(ei.c.TABLE_CONTAINER,{[ei.c.WITH_CONTROLS]:c&&p,[ei.c.TABLE_STICKY]:this.state.stickyHeader,[ei.c.HOVERED_DELETE_BUTTON]:l,[ei.c.TABLE_SELECTED]:Object(ki.c)(e.state.selection),"less-padding":r<je.x}),"data-number-column":t.attrs.isNumberColumnEnabled,"data-layout":t.attrs.layout},a.a.createElement(Dc,null),c&&!i&&m,a.a.createElement("div",{className:ei.c.TABLE_LEFT_SHADOW}),this.state.stickyHeader&&a.a.createElement("div",{className:`${ei.c.TABLE_LEFT_SHADOW} ${ei.c.TABLE_STICKY_SHADOW}`,style:{top:this.state.stickyHeader.top+this.state.stickyHeader.padding+b+2+"px"}}),a.a.createElement("div",{className:Qs()(ei.c.TABLE_NODE_WRAPPER),ref:e=>{this.wrapper=e,this.props.contentDOM(e||void 0),e&&(this.table=e.querySelector("table"))}}),a.a.createElement("div",{className:ei.c.TABLE_RIGHT_SHADOW}),this.state.stickyHeader&&a.a.createElement("div",{style:{position:"absolute",right:"-2px"}},a.a.createElement("div",{className:`${ei.c.TABLE_RIGHT_SHADOW} ${ei.c.TABLE_STICKY_SHADOW}`,style:{top:this.state.stickyHeader.top+this.state.stickyHeader.padding+b+2+"px"}})))}}_c.displayName="TableComponent";var Bc=_c;const $c=e=>({"data-number-column":e.attrs.isNumberColumnEnabled,"data-layout":e.attrs.layout,"data-autosize":e.attrs.__autoSize});class zc extends lr.a{constructor(e){super(e.node,e.view,e.getPos,e.portalProviderAPI,e.eventDispatcher,e),this.getPos=e.getPos}getContentDOM(){const e=Be.DOMSerializer.renderSpec(document,((e,t)=>{let n="";return t.allowColumnResizing&&(n=["colgroup",{},...Ys(e)]),["table",$c(e),n,["tbody",0]]})(this.node,this.reactComponentProps));return e.dom&&(this.table=e.dom),e}setDomAttrs(e){if(!this.table)return;const t=$c(e);Object.keys(t).forEach(e=>{this.table.setAttribute(e,t[e])})}render(e,t){return a.a.createElement(d.a,{plugins:{containerWidth:u.b,pluginState:Zr.d,tableResizingPluginState:Gs.a},editorView:e.view,render:n=>a.a.createElement(Bc,Object.assign({},e,n,{node:this.node,width:n.containerWidth.width,contentDOM:t}))})}ignoreMutation(){return!0}}const Fc=(e,t,n)=>{if(Object(ki.c)(e.selection)){const o=Object(Qr.c)(e.selection);if(o){const r="string"==typeof t?new Be.Slice(Be.Fragment.from(e.schema.text(t)),0,0):t;let i=e.tr.replace(o.pos,o.pos+o.node.nodeSize,r);i.setSelection(s.TextSelection.create(i.doc,o.pos+r.size+1));const{totalRowCount:a,totalColumnCount:c}=$a(e.selection);return Object(bt.a)(e,i,{action:Ei.a.REPLACED,actionSubject:mt.b.TABLE,attributes:{totalColumnCount:c,totalRowCount:a,inputMethod:n},eventType:mt.d.TRACK}),i}}return e.tr};var Uc=n("o5vo");let Hc,Wc,Vc,Kc;const qc=(e,t,n,r,i,a,c,l)=>{Hc=a,Wc=i,Vc=c,Kc=l;const d=Object(Zr.b)(e,Object(o.a)({pluginConfig:r,insertColumnButtonIndex:void 0,insertRowButtonIndex:void 0,isFullWidthModeEnabled:Vc,isHeaderRowEnabled:!!r.allowHeaderRow,isHeaderColumnEnabled:!1},Uc.a));return new s.Plugin({state:d,key:Zr.d,appendTransaction:(e,t,n)=>{const o=e.find(e=>"cut"===e.getMeta("uiEvent"));if(o){const e=((e,t,n)=>{const o=t.tr.selection;let{tr:r}=n;if(o instanceof U.a){const i=e.doc.resolve(e.mapping.map(o.$anchorCell.pos)),a=e.doc.resolve(e.mapping.map(o.$headCell.pos)),s=new U.a(i,a);if(r.setSelection(s),r.selection instanceof U.a){const e=Object(ti.a)(s);if(e){const{verticalCells:o,horizontalCells:i,totalCells:a,totalRowCount:s,totalColumnCount:c}=za(r.selection);if(r=Object(bt.a)(n,r,{action:Ei.a.CUT,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{verticalCells:o,horizontalCells:i,totalCells:a,totalRowCount:s,totalColumnCount:c},eventType:mt.d.TRACK}),r.selection instanceof U.a){if(r.selection.isRowSelection()&&r.selection.isColSelection())r=Si(r);else if(r.selection.isRowSelection()){const{pluginConfig:{isHeaderRowRequired:t}}=Object(Zr.c)(n);r=Ra(e,t)(r)}else r.selection.isColSelection()&&(r=Ba(e,Object(Fa.a)(t))(r))}}}}return r})(o,t,n);return Qi(e)||e}if(e.find(e=>e.docChanged))return Qi(n.tr)},view:e=>{const t=e.domAtPos.bind(e);return{update:e=>{const{state:n,dispatch:o}=e,{selection:r}=n,i=Object(Zr.c)(n);let a,s;if(i.editorHasFocus){const e=Object(f.findParentDomRefOfType)(n.schema.nodes.table,t)(r);e&&(a=e.querySelector("table")),s=Object(Qr.c)(n.selection)}var c;if(i.tableRef!==a&&(c=a,Object(Zr.a)(e=>{const t=c||void 0,n=Object(Qr.c)(e.selection),o=c&&n?n.node:void 0,r=c&&n?n.pos:void 0,i=Object(L.b)(t,"."+ei.c.TABLE_NODE_WRAPPER)||void 0,a=o?o.attrs.layout:void 0,s=ra(e,ci(e.selection),ei.d.COLUMN_CONTROLS_DECORATIONS);return{type:"SET_TABLE_REF",data:{tableRef:t,tableNode:o,tablePos:r,tableWrapperTarget:i,layout:a||"default",isHeaderRowEnabled:Object(oa.b)(e),isHeaderColumnEnabled:Object(oa.a)(e),decorationSet:s,resizeHandleColumnIndex:void 0}}},e=>e.setMeta("addToHistory",!1)))(n,o),i.tableNode!==s&&_s(a),i.editorHasFocus&&i.tableRef){const{$cursor:e}=n.selection;if(e){const e=Object(f.findParentNodeOfType)(n.schema.nodes.tableHeader)(n.selection);e&&(e=>(t,n)=>{const{tr:o}=t;if(Object(to.s)(o.selection)&&o.selection.$cursor&&null==o.storedMarks&&o.selection.$from.depth===e.depth+1&&4===e.node.nodeSize&&Object(Ni.d)(e.node.firstChild)){const{strong:e}=t.schema.marks;return o.setStoredMarks([e.create()]).setMeta("addToHistory",!1),n&&n(o),!0}return!1})(e)(n,o)}}}}},props:{handleClick:({state:e,dispatch:t},n,o)=>{const r=gi.getState(e);if(ii(r).length&&ks()(e,t),ys.a.chrome&&o.target){const e=o.target.classList;if(e.contains(ei.c.CONTROLS_BUTTON)||e.contains(ei.c.CONTEXTUAL_MENU_BUTTON))return!0}return!1},handleScrollToSelection:e=>{const{tableHeader:t}=e.state.schema.nodes,n=Object(f.findParentDomRefOfType)(t,e.domAtPos.bind(e))(e.state.selection),o=Object(L.b)(n,"tr");return!!o&&o.classList.contains("sticky")},handleTextInput:({state:e,dispatch:t},n,o,r)=>{const i=Fc(e,r,mt.e.KEYBOARD);return!!i.selectionSet&&(t(i),!0)},nodeViews:{table:(e,o,r)=>((e,t,n,o,r,i)=>{const{pluginConfig:a}=Object(Zr.c)(t.state),{allowColumnResizing:s}=Jr(a);return new zc({node:e,view:t,allowColumnResizing:s,portalProviderAPI:o,eventDispatcher:r,getPos:n,options:i}).init()})(e,o,r,t,n,{isBreakoutEnabled:Hc,dynamicTextSizing:Wc,isFullWidthModeEnabled:Vc,wasFullWidthModeEnabled:Kc})},handleDOMEvents:{focus:$s,blur:Bs,mousedown:Us,mouseover:qs(Fs),mouseleave:qs(Ws),mouseout:qs(Hs),mousemove:qs(Vs),click:qs(zs)},handleTripleClick:Ks}})};var Gc=n("tAeE");const{createPluginState:Yc,createCommand:Xc}=Object(Xt.a)(ac,(e,t)=>{if("UPDATE"===t.name){let n=!1;const o=e.map(e=>{const o=e.pos===t.state.pos;return o&&(n=!0),o?t.state:e});return n||o.push(t.state),o}return"REMOVE"===t.name?e.filter(e=>e.pos!==t.pos):e},{mapping:(e,t)=>e.docChanged?t.map(t=>{const n=e.mapping.mapResult(t.pos);return n?Object(o.a)(Object(o.a)({},t),{},{pos:n.pos}):void 0}).filter(e=>void 0!==e):t}),Jc=e=>Xc({name:"UPDATE",state:e},e=>e.setMeta("addToHistory",!1)),Zc=e=>{const t=e.parentElement;if(!t)return null;const n=t.parentElement;if(!n)return null;const o=n.parentElement;return o?{wrapper:o,table:n}:null},Qc=e=>!e||e instanceof Window?0:e.getBoundingClientRect().top,el=e=>{const t=Object(Je.c)(e,e=>"tableHeader"===e.type.name).every(Boolean),n=Object(Je.c)(e,e=>e.attrs.rowspan||0).some(e=>e>1);return t&&!n};class tl{constructor(e,t,n,o){this.colControlsOffset=0,this.focused=!1,this.scrollElementTop=0,this.isSticky=!1,this.listening=!1,this.onScroll=()=>{const e=Zc(this.dom);e&&(this.latestDomTop=Qc(e.wrapper),this.nextFrame||this.loop())},this.loop=()=>{this.nextFrame=window.requestAnimationFrame(()=>{if(this.previousDomTop===this.latestDomTop&&this.previousPadding===this.padding)return void(this.nextFrame=void 0);const e=Zc(this.dom);e?(this.paint(e),this.previousPadding=this.padding,this.previousDomTop=this.latestDomTop,this.loop()):this.nextFrame=void 0})},this.paint=e=>{const{table:t,wrapper:n}=e;this.shouldHeaderStick(e)?this.makeHeaderRowSticky(e):this.makeRowHeaderNotSticky(t),this.dom.scrollLeft=n.scrollLeft},this.onTablePluginState=e=>{const t=e.tableRef,n=Zc(this.dom);if(!n)return;const o=t===n.table;this.focused=o;const{wrapper:r}=n,i=r.parentElement.parentElement,a=i&&i.parentElement;o?(this.colControlsOffset=js.s,a&&a.getAttribute("data-layout-content")&&(i.style.paddingLeft="11px")):(this.colControlsOffset=0,a&&a.getAttribute("data-layout-content")&&i.style.removeProperty("padding-left")),setTimeout(()=>{this.paint(n),hc(n.table)},0)},this.onWidthPluginState=()=>{const e=Zc(this.dom);e&&hc(e.table)},this.shouldHeaderStick=e=>{const{wrapper:t}=e,n=this.scrollElementTop,o=this.getWrapperRefTop(t),r=t.getBoundingClientRect(),i=!this.dom.previousElementSibling,a=!!this.dom.nextElementSibling,s=n-r.bottom<this.dom.clientHeight;return o<=n&&s&&i&&a},this.makeHeaderRowSticky=e=>{const{table:t}=e,n=this.getCurrentTableTop(e)>0?this.scrollElementTop:this.scrollElementTop+this.getCurrentTableTop(e);this.isSticky||(hc(t),this.dom.classList.add("sticky"),t.classList.add(ei.c.TABLE_STICKY),this.isSticky=!0),this.dom.style.top=n+"px",(e=>{const t=e.querySelector("tr.sticky");if(!t)return void(e.style.marginTop="");const n=Object(L.e)(window.getComputedStyle(t).paddingTop||"")||0,o=t.clientHeight-n-2;e.style.marginTop=(ys.a.gecko?o+_i.e-_i.c:_i.h+o)+"px"})(t),this.emitOn(n,this.colControlsOffset)},this.getWrapperoffset=(e=!1)=>(e?!this.focused:this.focused)?0:js.s,this.getWrapperRefTop=e=>Math.round(Qc(e))+this.getWrapperoffset(),this.getScrolledTableTop=e=>this.getWrapperRefTop(e)-this.scrollElementTop,this.getCurrentTableTop=e=>this.getScrolledTableTop(e.wrapper)+e.table.clientHeight,this.makeRowHeaderNotSticky=e=>{this.isSticky&&(this.dom.style.removeProperty("width"),this.dom.classList.remove("sticky"),e.classList.remove(ei.c.TABLE_STICKY),this.isSticky=!1,this.dom.style.top="",e.style.removeProperty("margin-top"),this.emitOff())},this.padding=0,this.top=0,this.emitOn=(e,t)=>{e===this.top&&t===this.padding||(this.top=e,this.padding=t,Jc({pos:this.getPos(),top:e,sticky:!0,padding:t})(this.view.state,this.view.dispatch,this.view))},this.emitOff=()=>{0===this.top&&0===this.padding||(this.top=0,this.padding=0,Jc({pos:this.getPos(),sticky:!1,top:this.top,padding:this.padding})(this.view.state,this.view.dispatch,this.view))},this.view=t,this.node=e,this.getPos=n,this.eventDispatcher=o,this.dom=document.createElement("tr"),this.contentDOM=this.dom,this.isHeaderRow=el(e),this.isHeaderRow&&(this.dom.setAttribute("data-header-row","true"),this.subscribe())}subscribe(){this.scrollElement=Object(Gc.c)(this.view.dom)||window,this.scrollElement&&(this.scrollElement.addEventListener("scroll",this.onScroll),this.scrollElementTop=Qc(this.scrollElement)),this.eventDispatcher.on(u.b.key,this.onWidthPluginState),this.eventDispatcher.on(Zr.d.key,this.onTablePluginState),this.listening=!0}unsubscribe(){this.listening&&(this.scrollElement&&this.scrollElement.removeEventListener("scroll",this.onScroll),this.eventDispatcher.off(u.b.key,this.onWidthPluginState),this.eventDispatcher.off(Zr.d.key,this.onTablePluginState),this.listening=!1)}update(e,...t){if(e===this.node)return!0;const n=el(e);if(this.isHeaderRow!==n)return!1;if(this.node=e,!this.isHeaderRow)return!0;const o=this.dom.parentElement,r=o&&o.parentElement;return hc(r),!0}destroy(){this.unsubscribe();const e=Zc(this.dom);e&&this.makeRowHeaderNotSticky(e.table),this.emitOff()}ignoreMutation(e){return!("selection"===e.type&&"TR"===e.target.tagName)}}var nl=n("5lLR");const ol=(e,t,n,o,r)=>{const i=n>0?((e,t,n,o)=>{if(!e.cols[t+1])return e;const r=Ec(e,t+1,t,n),i=n-r.amount;let a=r.state;return i>0&&(a=wc(a,t,i).state),o?yc(a,o,t):a})(e,t,n,r):n<0?((e,t,n,o)=>{const r=Ec(e,t,t+1,-n);let i=r.state;const a=bc(i)>i.maxSize;if(!i.cols[t+1]&&!a)return i;const s=n+r.amount;return s<0&&(i=wc(i,t+1,s).state),o?yc(i,o,t):i})(e,t,n,r):e;return((e,t)=>{const n=t.querySelectorAll("col");e.cols.filter(e=>e&&!!e.width).forEach((e,t)=>{n[t]&&(n[t].style.width=e.width+"px")}),hc(t)})(i,o),i},rl=(e,t,n,o)=>{const{state:r,dispatch:i}=e,{editorDisabled:a}=nl.b.getState(r),s=e.domAtPos.bind(e);if(a||null===n||!Ui(r.doc.resolve(n)))return!1;t.preventDefault();const c=t.timeStamp,l=r.doc.nodeAt(n),d=r.doc.resolve(n),p=d.node(-1),h=d.start(-1);let f=s(h).node;for(;"TABLE"!==f.nodeName;)f=f.parentNode;const m=u.b.getState(r);let b=nc(h,r,m)||Fi(f.getAttribute("data-layout"),m.width,{dynamicTextSizing:o});p.attrs.isNumberColumnEnabled&&(b-=je.R);const g=mc({minWidth:_i.d,maxSize:b,table:p,tableRef:f,start:h,domAtPos:s});if((({resizeState:e,table:t,start:n,event:o})=>(r,i)=>{if(!Object(ki.c)(r.selection))return!1;const{lastClick:a}=Object(As.c)(r),s=Date.now();if(a&&s-a.time<500&&((e,t)=>{const n=t.x-e.clientX,o=t.y-e.clientY;return n*n+o*o<100})(o,a)){const o=vc(e);return jc(null,e=>sc(o,t,n)(e))(r,i),!0}return jc({x:o.clientX,y:o.clientY,time:s})(r,i),!1})({resizeState:g,table:p,start:h,event:t})(r,i))return E(t),!0;const v=function(e,t,{colspan:n,colwidth:o}){let r=o&&o[o.length-1];if(r)return r;let i=e.domAtPos(t+1).node.offsetWidth,a=n||0;if(o)for(let s=0;s<(n||0);s++)o[s]&&(i-=o[s],a--);return i/a}(e,n,l.attrs);var y,O;function E(t){window.removeEventListener("mouseup",E),window.removeEventListener("mousemove",w);const{clientX:n}=t,{state:o,dispatch:r}=e,{dragging:i,resizeHandlePos:a}=Object(As.c)(o);if(null===a)return Ac()(o,r);if(!Ui(o.doc.resolve(a)))return;const s=o.doc.resolve(a),l=s.start(-1),d=s.node(-1);if(i&&n===i.startX)return Ac()(o,r);let{tr:u}=o;if(i){const{startX:e}=i;if(d.eq(p)){const r=wr.b.get(d),a=r.colCount(s.pos-l)+(s.nodeAfter?s.nodeAfter.attrs.colspan:1)-1,p=Object(ti.a)(o.selection),h=p?Ic(p):[],m=h.indexOf(a)>-1||h.indexOf(a+1)>-1,b=ol(g,a,n-e,f,m?h:void 0);if(u=sc(b,d,l)(u),a===r.width-1){const e=t.timeStamp;u=Object(bt.a)(o,u,{action:Ei.a.ATTEMPTED_TABLE_WIDTH_CHANGE,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{type:"table-border",position:"right",duration:e-c,delta:Math.abs(n-i.startX)},eventType:mt.d.UI})}}return Ac(u)(o,r)}}function w(t){const{clientX:n,which:o}=t,{state:r}=e,{dragging:i,resizeHandlePos:a}=Object(As.c)(r);if(!o||!i||null===a||!Ui(r.doc.resolve(a)))return E(t);const s=r.doc.resolve(a),c=s.node(-1),l=wr.b.get(c).colCount(s.pos-s.start(-1))+s.nodeAfter.attrs.colspan-1;ol(g,l,n-i.startX,f),pc(r),_s(f)}return(y={startX:t.clientX,startWidth:v},Object(As.a)({type:"SET_DRAGGING",data:{dragging:y}},e=>O||e))(r,i),window.addEventListener("mouseup",E),window.addEventListener("mousemove",w),!0};function il(e,{lastColumnResizable:t=!0,dynamicTextSizing:n=!1}){return new s.Plugin({key:Gs.a,state:Object(As.b)(e,{lastColumnResizable:t,dynamicTextSizing:n,resizeHandlePos:null,dragging:null,lastClick:null}),props:{attributes(e){const t=Object(As.c)(e);return{class:Qs()(ei.c.RESIZING_PLUGIN,{[ei.c.RESIZE_CURSOR]:null!==t.resizeHandlePos,[ei.c.IS_RESIZING]:!!t.dragging})}},handleDOMEvents:{mousedown(e,t){const{state:o}=e,r=Object(As.c)(o).resizeHandlePos||((e,t,n)=>{const o=t.target;if(!Object(L.c)(o,ei.c.RESIZE_HANDLE_DECORATION))return null;const r=Object(L.b)(o,"td, th");if(!r)return null;return e.posAtDOM(r,0)-1})(e,t),{dragging:i}=Object(As.c)(o);if(null!==r&&!i&&rl(e,t,r,n)){const{state:t,dispatch:n}=e;return(e=>Object(As.a)({type:"SET_RESIZE_HANDLE_POSITION",data:{resizeHandlePos:e}}))(r)(t,n)}return!1}}}})}const al=Object(h.f)({tableOptions:{id:"fabric.editor.tableOptions",defaultMessage:"Table options",description:"Opens a menu with additional table options"},headerRow:{id:"fabric.editor.headerRow",defaultMessage:"Header row",description:"Marks the first table row as a header row"},headerColumn:{id:"fabric.editor.headerColumn",defaultMessage:"Header column",description:"Marks the first table column as a header row"},numberedColumn:{id:"fabric.editor.numberedColumn",defaultMessage:"Numbered column",description:"Adds an auto-numbering column to your table"}}),sl=(e,{formatMessage:t})=>{const n=Zr.d.getState(e),o=Gs.a.getState(e);if(n&&n.tableRef&&n.pluginConfig){const{pluginConfig:r}=n,i=((e,t,{formatMessage:n})=>{const o=[{title:n(al.headerRow),onClick:Object(bt.d)(e=>{const{totalRowCount:t,totalColumnCount:n}=$a(e.selection),{isHeaderRowEnabled:o}=Object(Zr.c)(e);return{action:Ei.a.TOGGLED_HEADER_ROW,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{newState:!o,totalRowCount:t,totalColumnCount:n},eventType:mt.d.TRACK}})(Ca),selected:t.isHeaderRowEnabled,hidden:!e.allowHeaderRow},{title:n(al.headerColumn),onClick:Object(bt.d)(e=>{const{totalRowCount:t,totalColumnCount:n}=$a(e.selection),{isHeaderColumnEnabled:o}=Object(Zr.c)(e);return{action:Ei.a.TOGGLED_HEADER_COLUMN,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{newState:!o,totalRowCount:t,totalColumnCount:n},eventType:mt.d.TRACK}})(Ta),selected:t.isHeaderColumnEnabled,hidden:!e.allowHeaderColumn},{title:n(al.numberedColumn),onClick:Object(bt.d)(e=>{const{totalRowCount:t,totalColumnCount:n}=$a(e.selection);return{action:Ei.a.TOGGLED_NUMBER_COLUMN,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{newState:!Object(oa.c)(e),totalRowCount:t,totalColumnCount:n},eventType:mt.d.TRACK}})(Sa),selected:t.isNumberColumnEnabled,hidden:!e.allowNumberColumn}];return{type:"dropdown",title:n(al.tableOptions),hidden:o.every(e=>e.hidden),options:o}})({allowHeaderRow:r.allowHeaderRow,allowHeaderColumn:r.allowHeaderColumn,allowNumberColumn:r.allowNumberColumn},{isHeaderColumnEnabled:n.isHeaderColumnEnabled,isHeaderRowEnabled:n.isHeaderRowEnabled,isNumberColumnEnabled:Object(oa.c)(e)},{formatMessage:t});return{title:"Table floating controls",getDomRef:()=>n.tableWrapperTarget,nodeType:e.schema.nodes.table,offset:[0,3],items:[i,{type:"separator",hidden:i.hidden},{type:"button",appearance:"danger",icon:Io.a,onClick:Object(bt.d)(({selection:e})=>Ja(e,mt.e.FLOATING_TB))(aa),disabled:!!o&&!!o.dragging,onMouseEnter:Ss(!0),onMouseLeave:ks(),title:t(S.a.remove)}]}}};var cl=Object(h.f)({insertColumn:{id:"fabric.editor.insertColumn",defaultMessage:"Insert column right",description:"Inserts a new column to the right of selected column."},removeColumns:{id:"fabric.editor.removeColumns",defaultMessage:"Delete {0, plural, one {column} other {columns}}",description:"Deletes a table column."},insertRow:{id:"fabric.editor.insertRow",defaultMessage:"Insert row below",description:"Inserts a new row below the selected row."},removeRows:{id:"fabric.editor.removeRows",defaultMessage:"Delete {0, plural, one {row} other {rows}}",description:"Deletes a table row."},cellOptions:{id:"fabric.editor.cellOptions",defaultMessage:"Cell options",description:"Opens a menu with options for the current table cell."}});const ll=E.css`
  > div {
    background: ${p.N20};
    border-radius: ${Object(te.c)()}px;
    border: 2px solid ${p.N0};
    display: flex;
    height: ${js.e-2}px;
    flex-direction: column;
  }
  && button {
    flex-direction: column;
    padding: 0;
    height: 100%;
    display: flex;
  }
  && button > span {
    margin: 0px -4px;
  }
  && span {
    pointer-events: none;
  }
`,dl=E.default.div`
  ${ll}
`;class ul extends a.a.Component{constructor(){super(...arguments),this.handleClick=()=>{const{state:e,dispatch:t}=this.props.editorView;this.props.isContextualMenuOpen||xa()(e,t)}}render(){const{mountPoint:e,scrollableElement:t,editorView:n,targetCellPosition:o,isContextualMenuOpen:r,intl:{formatMessage:i}}=this.props,s=n.domAtPos.bind(n),c=Object(f.findDomRefAtPos)(o,s);if(!(c&&c instanceof HTMLElement))return null;const l=Object(L.b)(c,"."+ei.c.TABLE_NODE_WRAPPER),d=i(cl.cellOptions),u=a.a.createElement(dl,null,a.a.createElement(O.a,{className:ei.c.CONTEXTUAL_MENU_BUTTON,selected:r,title:d,onClick:this.handleClick,iconBefore:a.a.createElement(q.a,{label:d})})),p=c.parentElement&&c.parentElement.className.indexOf("sticky")>-1;if(this.props.stickyHeader&&p){const e=c.getBoundingClientRect();return a.a.createElement("div",{style:{position:"fixed",top:this.props.stickyHeader.top+this.props.stickyHeader.padding+3+3,zIndex:je.m,left:e.left+c.clientWidth-20-3}},u)}return a.a.createElement(m.a,{alignX:"right",alignY:"start",target:c,mountTo:l||e,boundariesElement:c,scrollableElement:t,offset:[3,-3],forcePlacement:!0,allowOutOfBounds:!0,zIndex:je.J},u)}shouldComponentUpdate(e){return this.props.tableNode!==e.tableNode||this.props.targetCellPosition!==e.targetCellPosition||this.props.layout!==e.layout||this.props.isContextualMenuOpen!==e.isContextualMenuOpen||this.props.isNumberColumnEnabled!==e.isNumberColumnEnabled||this.props.stickyHeader!==e.stickyHeader}}ul.displayName="FloatingContextualButton";var pl=Object(h.g)(ul);const hl=E.css`
  .${ei.c.CONTEXTUAL_SUBMENU} {
    border-radius: ${Object(te.c)()}px;
    background: white;
    box-shadow: 0 4px 8px -2px ${p.N60A}, 0 0 1px ${p.N60A};
    display: block;
    position: absolute;
    top: 0;
    left: ${js.d}px;
    padding: 8px;

    > div {
      padding: 0;
    }
  }

  .${ei.c.CONTEXTUAL_MENU_ICON} {
    display: flex;

    &::before {
      content: '';
      display: block;
      border: 1px solid ${Xr.c};
      border-radius: ${Object(te.c)()}px;
      width: 20px;
      height: 20px;
    }

    &::after {
      content: '';
      margin-left: 4px;
      line-height: 20px;
      color: ${p.N90};
    }
  }
`,fl=(e,t)=>{const n=Object(Tr.a)(e.schema);return va(({node:e})=>n[e.type.spec.tableRole])(e,t)};var ml=n("/Tyz"),bl=n("jVwy"),gl=n("n46c");const vl=[];Xr.e.forEach((e,t)=>{const n=e.toLowerCase().replace(" ","-"),o=Object(bl.a)(gl.a,n);vl.push({value:t,label:e,border:Xr.c,message:o})});var yl=vl;const Ol=Object(h.f)({cellBackground:{id:"fabric.editor.cellBackground",defaultMessage:"Cell background",description:"Change the background color of a table cell."},mergeCells:{id:"fabric.editor.mergeCells",defaultMessage:"Merge cells",description:"Merge tables cells together."},splitCell:{id:"fabric.editor.splitCell",defaultMessage:"Split cell",description:"Split a merged table cell."},clearCells:{id:"fabric.editor.clearCells",defaultMessage:"Clear {0, plural, one {cell} other {cells}}",description:"Clears the contents of the selected cells (this does not delete the cells themselves)."},sortColumnASC:{id:"fabric.editor.sortColumnASC",defaultMessage:"Sort column A  Z",description:"Sort column in ascending order"},sortColumnDESC:{id:"fabric.editor.sortColumnDESC",defaultMessage:"Sort column Z  A",description:"Sort column in descending order"},canNotSortTable:{id:"fabric.editor.canNotSortTable",defaultMessage:" You can't sort a table with merged cells",description:"Split your cells to enable this feature"}});class El extends i.Component{constructor(){super(...arguments),this.state={isSubmenuOpen:!1},this.handleSubMenuRef=e=>{const t=Object(L.b)(this.props.editorView.dom,".fabric-editor-popup-scroll-parent");if(!t||!e)return;const n=t.getBoundingClientRect(),o=e.getBoundingClientRect();o.left+o.width>n.width&&(e.style.left=`-${o.width}px`)},this.createItems=()=>{var e;const{allowMergeCells:t,allowColumnSorting:n,allowBackgroundColor:r,editorView:{state:i},isOpen:s,selectionRect:c,intl:{formatMessage:l},editorView:d}=this.props,u=[],{isSubmenuOpen:p}=this.state,{targetCellPosition:h}=Object(Zr.c)(d.state);if(r){const t=s&&h?i.doc.nodeAt(h):null,n=(null===(e=null==t?void 0:t.attrs)||void 0===e?void 0:e.background)||"#ffffff";u.push({content:l(Ol.cellBackground),value:{name:"background"},elemAfter:a.a.createElement("div",null,a.a.createElement(_e.c,{selectedColor:n,className:ei.c.CONTEXTUAL_MENU_ICON}),p&&a.a.createElement("div",{className:ei.c.CONTEXTUAL_SUBMENU,ref:this.handleSubMenuRef},a.a.createElement(ml.a,{cols:7,palette:yl,onClick:this.setColor,selectedColor:n})))})}u.push({content:l(cl.insertColumn),value:{name:"insert_column"},elemAfter:a.a.createElement(_e.h,null,Object(Te.tooltip)(Te.addColumnAfter))}),u.push({content:l(cl.insertRow),value:{name:"insert_row"},elemAfter:a.a.createElement(_e.h,null,Object(Te.tooltip)(Te.addRowAfter))});const{top:f,bottom:m,right:b,left:g}=c,v=b-g,y=m-f;if(u.push({content:l(cl.removeColumns,{0:v}),value:{name:"delete_column"}}),u.push({content:l(cl.removeRows,{0:y}),value:{name:"delete_row"}}),t&&(u.push({content:l(Ol.mergeCells),value:{name:"merge"},isDisabled:!ja(i.tr)}),u.push({content:l(Ol.splitCell),value:{name:"split"},isDisabled:!fl(i)})),n){const e=Os(i.tr).length>0?{tooltipDescription:l(Ol.canNotSortTable),isDisabled:!0}:{};u.push(Object(o.a)({content:l(Ol.sortColumnASC),value:{name:"sort_column_asc"}},e)),u.push(Object(o.a)({content:l(Ol.sortColumnDESC),value:{name:"sort_column_desc"}},e))}return u.push({content:l(Ol.clearCells,{0:Math.max(v,y)}),value:{name:"clear"},elemAfter:a.a.createElement(_e.h,null,Object(Te.tooltip)(Te.backspace))}),u.length?[{items:u}]:null},this.onMenuItemActivated=({item:e})=>{const{editorView:t,selectionRect:n}=this.props,{targetCellPosition:o}=Object(Zr.c)(t.state),{state:r,dispatch:i}=t;switch(e.value.name){case"sort_column_desc":Za(mt.e.CONTEXT_MENU,n.left,ei.b.DESC)(r,i),this.toggleOpen();break;case"sort_column_asc":Za(mt.e.CONTEXT_MENU,n.left,ei.b.ASC)(r,i),this.toggleOpen();break;case"merge":Wa()(r,i),this.toggleOpen();break;case"split":Object(bt.d)(({selection:e})=>{const{totalRowCount:t,totalColumnCount:n}=za(e),o=Object(Qr.a)(e.$anchor);if(o){const{rowspan:e,colspan:r}=o.node.attrs;return{action:Ei.a.SPLIT,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{horizontalCells:r,verticalCells:e,totalCells:r*e,totalRowCount:t,totalColumnCount:n},eventType:mt.d.TRACK}}})(ya)(r,i),this.toggleOpen();break;case"clear":Ha(mt.e.CONTEXT_MENU,o)(r,i),this.toggleOpen();break;case"insert_column":Ga(mt.e.CONTEXT_MENU,n.right)(r,i),this.toggleOpen();break;case"insert_row":qa(mt.e.CONTEXT_MENU,{index:n.bottom,moveCursorToInsertedRow:!0})(r,i),this.toggleOpen();break;case"delete_column":Xa(mt.e.CONTEXT_MENU,n)(r,i),this.toggleOpen();break;case"delete_row":const{pluginConfig:{isHeaderRowRequired:e}}=Object(Zr.c)(r);Ya(mt.e.CONTEXT_MENU,n,!!e)(r,i),this.toggleOpen()}},this.toggleOpen=()=>{const{isOpen:e,editorView:{state:t,dispatch:n}}=this.props;xa()(t,n),e||this.setState({isSubmenuOpen:!1})},this.handleOpenChange=()=>{const{editorView:{state:e,dispatch:t}}=this.props;xa()(e,t),this.setState({isSubmenuOpen:!1})},this.handleItemMouseEnter=({item:e})=>{const{editorView:{state:t,dispatch:n},selectionRect:o}=this.props;"background"===e.value.name&&(this.state.isSubmenuOpen||this.setState({isSubmenuOpen:!0})),"delete_column"===e.value.name&&Cs(Ic(o),!0)(t,n),"delete_row"===e.value.name&&Ts((e=>{const t=[];for(let n=e.top;n<e.bottom;n++)t.push(n);return t})(o),!0)(t,n),["sort_column_asc","sort_column_desc"].indexOf(e.value.name)>-1&&0!==Os(t.tr).length&&ws()(t,n)},this.handleItemMouseLeave=({item:e})=>{const{state:t,dispatch:n}=this.props.editorView;"background"===e.value.name&&this.closeSubmenu(),["sort_column_asc","sort_column_desc","delete_column","delete_row"].indexOf(e.value.name)>-1&&ks()(t,n)},this.closeSubmenu=()=>{this.state.isSubmenuOpen&&this.setState({isSubmenuOpen:!1})},this.setColor=e=>{const{editorView:t}=this.props,{targetCellPosition:n}=Object(Zr.c)(t.state),{state:o,dispatch:r}=t;Va(e,n)(o,r),this.toggleOpen()}}render(){const{isOpen:e,mountPoint:t,offset:n,boundariesElement:o}=this.props,r=this.createItems();return r?a.a.createElement("div",{onMouseLeave:this.closeSubmenu},a.a.createElement(Le,{mountTo:t,items:r,isOpen:e,onOpenChange:this.handleOpenChange,onItemActivated:this.onMenuItemActivated,onMouseEnter:this.handleItemMouseEnter,onMouseLeave:this.handleItemMouseLeave,fitHeight:188,fitWidth:js.d,boundariesElement:o,offset:n})):null}}El.defaultProps={boundariesElement:document.body};var wl=Object(h.g)(El);const Cl=E.default.div`
  ${hl}
`,Tl=(e,t)=>{const{tableRef:n}=Zr.d.getState(t);let o=-js.e;if(n&&e){const t=e.getBoundingClientRect(),r=n.getBoundingClientRect();let i=t.top-r.top;i<200&&(o-=i+2)}return[js.e/2,o]},Sl=({mountPoint:e,boundariesElement:t,scrollableElement:n,editorView:o,isOpen:r,pluginConfig:i})=>{const{targetCellPosition:s}=Object(Zr.c)(o.state);if(!r||!s||o.state.doc.nodeSize<=s)return null;const{selection:c}=o.state,l=Object(wi.a)(c,"cell")?Object(ti.a)(c):Object(Qr.b)(c.$from);if(!l)return null;const d=o.domAtPos.bind(o),u=Object(f.findDomRefAtPos)(s,d);return u?a.a.createElement(m.a,{alignX:"right",alignY:"top",target:u,mountTo:e,boundariesElement:t,scrollableElement:n,fitHeight:188,fitWidth:js.d,zIndex:je.m,forcePlacement:!0,offset:[-7,0]},a.a.createElement(Cl,null,a.a.createElement(wl,{editorView:o,offset:Tl(u,o.state),isOpen:r,targetCellPosition:s,allowColumnSorting:i&&i.allowColumnSorting,allowMergeCells:i.allowMergeCells,allowBackgroundColor:i.allowBackgroundColor,selectionRect:l,boundariesElement:t}))):null};Sl.displayName="FloatingContextualMenu";var kl=Sl;var xl=Object(h.g)(({style:e,onClick:t,onMouseEnter:n,onMouseLeave:o,removeLabel:r,intl:{formatMessage:i}})=>a.a.createElement("div",{className:ei.c.CONTROLS_DELETE_BUTTON_WRAP,style:e,onMouseEnter:n,onMouseLeave:o},a.a.createElement("button",{type:"button",title:i(r,{0:1}),className:ei.c.CONTROLS_DELETE_BUTTON,onMouseDown:t,onMouseMove:e=>e.preventDefault()},a.a.createElement("svg",{className:ei.c.CONTROLS_BUTTON_ICON},a.a.createElement("path",{d:"M12.242 10.828L9.414 8l2.828-2.829a.999.999 0 1 0-1.414-1.414L8 6.587l-2.829-2.83a1 1 0 0 0-1.414 1.414l2.83 2.83-2.83 2.827a1 1 0 0 0 1.414 1.414l2.83-2.828 2.827 2.828a.999.999 0 1 0 1.414-1.414",fill:"currentColor",fillRule:"evenodd"})))));const Al=js.E+js.u+js.t;function jl({left:e,top:t,selectionType:n,tableWrapper:r}){switch(n){case"column":return function(e,t){return{alignX:"left",alignY:"start",offset:[e,Al],shouldRenderPopup(){if(t){const n=t.getBoundingClientRect().width+t.scrollLeft-js.u,o=t.scrollLeft;return n-e>0&&e>o}return!0}}}(e,r);case"row":return function(e){return{alignX:"left",alignY:"start",forcePlacement:!0,offset:[0,-e],onPositionCalculated:e=>Object(o.a)(Object(o.a)({},e),{},{left:-Al})}}(t);default:return{}}}class Il extends i.Component{constructor(e){super(e),this.wrapper=null,this.updateWrapper=()=>{const e=Object(L.b)(this.props.tableRef,"."+ei.c.TABLE_NODE_WRAPPER);e?(this.wrapper=e,this.wrapper.addEventListener("scroll",this.onWrapperScrolled),this.setState({scrollLeft:e.scrollLeft})):(this.wrapper&&(this.wrapper.removeEventListener("scroll",this.onWrapperScrolled),this.setState({scrollLeft:0})),this.wrapper=null)},this.onWrapperScrolled=e=>{const t=e.target;this.setState({scrollLeft:t.scrollLeft})},this.handleMouseEnter=()=>{const{state:e,dispatch:t}=this.props.editorView;switch(this.state.selectionType){case"row":return Ts(this.state.indexes,!0)(e,t,this.props.editorView);case"column":return Cs(this.state.indexes,!0)(e,t,this.props.editorView)}return!1},this.handleMouseLeave=()=>{const{state:e,dispatch:t}=this.props.editorView;return ks()(e,t)},this.handleClick=()=>{let{state:e,dispatch:t}=this.props.editorView;const{pluginConfig:{isHeaderRowRequired:n}}=Object(Zr.c)(e),o=Object(ti.a)(e.selection);if(o)switch(this.state.selectionType){case"column":return void Xa(mt.e.BUTTON,o)(e,t);case"row":return void Ya(mt.e.BUTTON,o,!!n)(e,t)}({state:e,dispatch:t}=this.props.editorView),ks()(e,t)},this.state={selectionType:void 0,top:0,left:0,indexes:[],scrollLeft:0}}shouldComponentUpdate(e,t){return this.state.selectionType!==t.selectionType||this.state.left!==t.left||this.state.top!==t.top||this.state.scrollLeft!==t.scrollLeft}componentDidMount(){this.updateWrapper()}componentDidUpdate(){this.updateWrapper()}componentWillUnmount(){this.wrapper&&this.wrapper.removeEventListener("scroll",this.onWrapperScrolled)}static getDerivedStateFromProps(e,t){const n=function(e){if(!Object(ki.c)(e)&&e instanceof U.a){if(e.isRowSelection())return"row";if(e.isColSelection())return"column"}}(e.selection),r=e.stickyHeaders&&e.stickyHeaders.sticky,i=Object(ti.a)(e.selection),a=i&&0===i.top&&1===i.bottom,s=r&&a,c=e.stickyHeaders?e.stickyHeaders.top+e.stickyHeaders.padding:0;if(n)switch(n){case"column":{const t=((e,t)=>{const n=Object(ti.a)(t);if(!n)return null;let o=0,r=0;for(let a=0;a<n.left;a++){const t=e[a];t&&(r+=t-1)}const i=[];for(let a=n.left;a<n.right;a++){const t=e[a];t&&(o+=t,i.push(a))}return{left:r+o/2-js.u/2,indexes:i}})((e=>{const{selection:t}=e.state;let n=[];const o=Object(Qr.c)(t);if(o){const r=wr.b.get(o.node),i=e.domAtPos.bind(e);n=Array.from({length:r.width});for(let e=0;e<r.width;e++){const o=Ai(e)(t)[0];if(o){const t=Object(f.findDomRefAtPos)(o.pos,i),r=t.getBoundingClientRect();n[e]=(r?r.width:t.offsetWidth)+1,e+=o.node.attrs.colspan-1}}}return n})(e.editorView),e.editorView.state.selection);return t?Object(o.a)(Object(o.a)({},t),{},{top:r?e.stickyHeaders.top:0,position:r?"sticky":void 0,selectionType:n}):null}case"row":if(e.tableRef){const t=Object(dc.d)(e.tableRef),i=r?-t[0]:0,a=Object(dc.c)(t,e.editorView.state.selection,s?c:i);if(a)return Object(o.a)(Object(o.a)({},a),{},{position:s?"sticky":void 0,left:0,selectionType:n})}return null}return t.selectionType!==n?{selectionType:void 0,top:0,left:0,indexes:[]}:null}render(){const{mountPoint:e,boundariesElement:t,tableRef:n}=this.props,{selectionType:o}=this.state;if(!o||!n)return null;const r=Object(L.b)(n,"."+ei.c.TABLE_CONTAINER),i=a.a.createElement(xl,{removeLabel:"column"===o?cl.removeColumns:cl.removeRows,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),s=jl({left:this.state.left,top:this.state.top,selectionType:this.state.selectionType,tableWrapper:this.wrapper}),c=r||e;if("sticky"===this.state.position&&c){const e=n.querySelector("tr.sticky");if(e){const t=e.getBoundingClientRect(),n=(s.onPositionCalculated||(e=>e))({left:this.state.left,top:this.state.top});return Object($n.createPortal)(a.a.createElement("div",{style:{position:"fixed",top:n.top,zIndex:js.k,left:t.left+(n.left||0)-("column"===this.state.selectionType?this.state.scrollLeft:0)-(this.props.isNumberColumnEnabled?je.R:0)}},i),c)}}return a.a.createElement(m.a,Object.assign({target:n,mountTo:c,boundariesElement:r||t,scrollableElement:this.wrapper||void 0,forcePlacement:!0,allowOutOfBounds:!0},s),i)}}Il.displayName="FloatingDeleteButton";var Ml=Il;const Nl=-js.w/2,Rl=Nl+je.R,Pl=js.E+js.v,Ll=-(js.E+js.v+js.w),Dl=js.w/2;var _l=function(e,t,n,r){switch(e){case"column":return function(e,t,n){const r={alignX:"end",alignY:"top",offset:[Nl,Pl],onPositionCalculated(r){const{left:i}=r;if(!i)return r;if(0===e)return Object(o.a)(Object(o.a)({},r),{},{left:n?Rl:Nl});const a=t?t.getBoundingClientRect():null;return Object(o.a)(Object(o.a)({},r),{},{left:a&&i>a.width?a.width:i})}};return 0===e?Object(o.a)(Object(o.a)({},r),{},{alignX:"left",alignY:"top"}):r}(t,r,n);case"row":return function(e){let t={alignX:"left",alignY:"bottom",offset:[0,Dl]};return 0===e&&(t=Object(o.a)(Object(o.a)({},t),{},{alignY:"top",offset:[0,-Dl]})),Object(o.a)(Object(o.a)({},t),{},{onPositionCalculated:e=>Object(o.a)(Object(o.a)({},e),{},{left:Ll})})}(t);default:return{}}};const Bl=(e,t)=>{const n=t?e.getBoundingClientRect().top-4*_i.h-3:js.E+3;return e.offsetHeight+n},$l=e=>{const{parentElement:t,offsetWidth:n}=e,o=t.offsetWidth,{scrollLeft:r}=t,i=n-o,a=(e=>{const t=Object(L.b)(e,"."+ei.c.TABLE_CONTAINER);return t&&t.querySelector("."+ei.c.NUMBERED_COLUMN)?js.E+je.R-1:js.E})(e);return Math.min(n+a,o+a-Math.max(r-i,0))+4},zl=e=>"row"===e?cl.insertRow:cl.insertColumn;var Fl=Object(h.g)(({onMouseDown:e,tableRef:t,type:n,intl:{formatMessage:o},hasStickyHeaders:r})=>{const i=a.a.createElement(Ae.a,{content:a.a.createElement(Te.ToolTipContent,{description:o(zl(n)),keymap:"row"===n?Te.addRowAfter:Te.addColumnAfter}),position:"top"},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:ei.c.CONTROLS_INSERT_BUTTON_INNER},a.a.createElement("button",{type:"button",className:ei.c.CONTROLS_INSERT_BUTTON,onMouseDown:e},a.a.createElement("svg",{className:ei.c.CONTROLS_BUTTON_ICON},a.a.createElement("path",{d:"M10 4a1 1 0 0 1 1 1v4h4a1 1 0 0 1 0 2h-4v4a1 1 0 0 1-2 0v-4H5a1 1 0 1 1 0-2h4V5a1 1 0 0 1 1-1z",fill:"currentColor",fillRule:"evenodd"})))),a.a.createElement("div",{className:ei.c.CONTROLS_INSERT_LINE,style:"row"===n?{width:$l(t)}:{height:Bl(t,r)}}))),s="column"===n?ei.c.CONTROLS_FLOATING_BUTTON_COLUMN:ei.c.CONTROLS_FLOATING_BUTTON_ROW;return a.a.createElement("div",{className:s},a.a.createElement("div",{className:`${ei.c.CONTROLS_INSERT_BUTTON_WRAP} ${ei.c.CONTROLS_INSERT_ROW}`},i))});class Ul extends a.a.Component{constructor(e){super(e),this.insertColumn=this.insertColumn.bind(this),this.insertRow=this.insertRow.bind(this)}render(){const{tableNode:e,editorView:t,insertColumnButtonIndex:n,insertRowButtonIndex:o,tableRef:r,mountPoint:i,boundariesElement:s,isHeaderColumnEnabled:c,isHeaderRowEnabled:l}=this.props,d=void 0!==n?"column":void 0!==o?"row":null;if(!e||!r||!d)return null;if("column"===d&&c&&0===n||"row"===d&&l&&0===o)return null;const{state:{tr:u}}=t;if(u.selection instanceof U.a&&(u.selection.isColSelection()||u.selection.isRowSelection()))return null;const p=this.getCellPosition(d);if(!p)return null;const h=Object(Qr.c)(t.state.selection);if(!h)return null;const b=t.domAtPos.bind(t),g=p+h.start+1,v=Object(f.findDomRefAtPos)(g,b);if(!(v&&v instanceof HTMLElement))return null;const y="row"===d?Object(L.b)(v,"tr"):Object(L.b)(v,"td, th");if(!y)return null;const O=Object(L.b)(y,"."+ei.c.TABLE_CONTAINER),E=Object(L.b)(y,"."+ei.c.TABLE_NODE_WRAPPER),w="column"===d?n:o,C=Object(oa.c)(t.state);return a.a.createElement(m.a,Object.assign({target:y,mountTo:O||i,boundariesElement:O||s,scrollableElement:E,forcePlacement:!0,allowOutOfBounds:!0},_l(d,w,C,O)),a.a.createElement(Fl,{type:d,tableRef:r,onMouseDown:"column"===d?this.insertColumn:this.insertRow,hasStickyHeaders:this.props.hasStickyHeaders||!1}))}getCellPosition(e){const{tableNode:t,insertColumnButtonIndex:n,insertRowButtonIndex:o}=this.props,r=wr.b.get(t);if("column"===e){const e=0===n?0:n-1;return e>r.width-1?null:r.positionAt(0,e,t)}{const e=0===o?0:o-1;return e>r.height-1?null:r.positionAt(e,0,t)}}insertRow(e){const{editorView:t,insertRowButtonIndex:n}=this.props;if(void 0!==n){e.preventDefault();const{state:o,dispatch:r}=t;qa(mt.e.BUTTON,{index:n,moveCursorToInsertedRow:!0})(o,r)}}insertColumn(e){const{editorView:t,insertColumnButtonIndex:n}=this.props;if(void 0!==n){e.preventDefault();const{state:o,dispatch:r}=t;Ga(mt.e.BUTTON,n)(o,r)}}}Ul.displayName="FloatingInsertButton";var Hl=Object(h.g)(Ul);const Wl=e=>Object(o.a)(Object(o.a)({},e),{},{top:e.top?e.top+22:void 0});class Vl extends a.a.Component{constructor(){super(...arguments),this.handleClick=()=>{const{state:e,dispatch:t}=this.props.editorView;Object(bt.d)(e=>{const{table:t,totalRowCount:n,totalColumnCount:o}=$a(e.selection);if(t){const{layout:e}=t.node.attrs;return{action:Ei.a.CHANGED_BREAKOUT_MODE,actionSubject:mt.b.TABLE,actionSubjectId:null,attributes:{newBreakoutMode:Ua[wa(e)],previousBreakoutMode:Ua[e],totalRowCount:n,totalColumnCount:o},eventType:mt.d.TRACK}}})(ka)(e,t)}}render(){const{intl:{formatMessage:e},mountPoint:t,boundariesElement:n,scrollableElement:o,targetRef:r,isResizing:i,layout:s="default"}=this.props;if(!r)return null;const c=e((e=>{switch(e){case"default":return S.a.layoutWide;case"wide":return S.a.layoutFullWidth;default:return S.a.layoutFixedWidth}})(s));return a.a.createElement(m.a,{ariaLabel:c,target:r,alignY:"start",alignX:"end",onPositionCalculated:Wl,stick:!0,mountTo:t,boundariesElement:n,scrollableElement:o,forcePlacement:!0},a.a.createElement("div",{className:Qs()(ei.c.LAYOUT_BUTTON,{[ei.c.IS_RESIZING]:i})},a.a.createElement(O.a,{title:c,onClick:this.handleClick,iconBefore:"full-width"===s?a.a.createElement(g.a,{label:c}):a.a.createElement(y.a,{label:c})})))}shouldComponentUpdate(e){return this.props.targetRef!==e.targetRef||this.props.layout!==e.layout||this.props.isResizing!==e.isResizing}}Vl.displayName="LayoutButton";var Kl=Object(h.g)(Vl);var ql=e=>({name:"table",nodes:()=>[{name:"table",node:Xr.b},{name:"tableHeader",node:Xr.j},{name:"tableRow",node:Xr.m},{name:"tableCell",node:Xr.f}],pmPlugins:()=>[{name:"table",plugin:({dispatch:t,portalProviderAPI:n,eventDispatcher:o})=>{const{dynamicSizingEnabled:r,fullWidthEnabled:i,wasFullWidthEnabled:a,breakoutEnabled:s,tableOptions:c}=e||{};return qc(t,n,o,Jr(c),s&&r,s,i,a)}},{name:"tablePMColResizing",plugin:({dispatch:t})=>{const{dynamicSizingEnabled:n,fullWidthEnabled:o,tableOptions:r}=e||{},{allowColumnResizing:i}=Jr(r);return i?il(t,{dynamicTextSizing:n&&!o,lastColumnResizable:!o}):void 0}},{name:"tableEditing",plugin:()=>new s.Plugin({state:{init:()=>Yt.b.empty,apply:(e,t,n)=>{let o=t;const r=e.getMeta(Zr.d);return r&&r.data&&r.data.decorationSet&&(o=r.data.decorationSet),e.docChanged||e.selectionSet?yi(e,o,n):o}},key:gi,props:{decorations:e=>vi(e)}})},{name:"tableKeymap",plugin:()=>es()},{name:"tableSelectionKeymap",plugin:()=>vs()},{name:"tableEditing",plugin:()=>Gr()},{name:"tableStickyHeaders",plugin:({dispatch:t,eventDispatcher:n})=>e&&e.tableOptions.stickyHeaders?((e,t,n=(()=>[]))=>new s.Plugin({state:Yc(e,n),key:ac,props:{nodeViews:{tableRow:(e,n,o)=>new tl(e,n,o,t)}}}))(t,n):void 0}],contentComponent:({editorView:t,popupsMountPoint:n,popupsBoundariesElement:o,popupsScrollableElement:r})=>a.a.createElement(d.a,{plugins:{pluginState:Zr.d,tableResizingPluginState:Gs.a,stickyHeadersState:ac},render:({stickyHeadersState:i})=>{const{state:s}=t,c=Object(Zr.c)(s),l=Gs.a.getState(s),d=l&&l.dragging,{tableNode:u,tablePos:p,targetCellPosition:h,isContextualMenuOpen:f,layout:m,tableRef:b,pluginConfig:g,insertColumnButtonIndex:v,insertRowButtonIndex:y,isHeaderColumnEnabled:O,isHeaderRowEnabled:E,tableWrapperTarget:w}=c||{},C=g&&g.allowControls,T=i?ic(i,p):void 0;return a.a.createElement(a.a.Fragment,null,h&&b&&!d&&e&&e.allowContextualMenu&&a.a.createElement(pl,{isNumberColumnEnabled:u&&u.attrs.isNumberColumnEnabled,editorView:t,tableNode:u,mountPoint:n,targetCellPosition:h,scrollableElement:r,isContextualMenuOpen:f,layout:m,stickyHeader:T}),C&&a.a.createElement(Hl,{tableNode:u,tableRef:b,insertColumnButtonIndex:v,insertRowButtonIndex:y,isHeaderColumnEnabled:O,isHeaderRowEnabled:E,editorView:t,mountPoint:n,boundariesElement:o,scrollableElement:r,hasStickyHeaders:T&&T.sticky}),a.a.createElement(kl,{editorView:t,mountPoint:n,boundariesElement:o,targetCellPosition:h,isOpen:Boolean(f),pluginConfig:g}),C&&a.a.createElement(Ml,{editorView:t,selection:t.state.selection,tableRef:b,mountPoint:n,boundariesElement:o,scrollableElement:r,stickyHeaders:T,isNumberColumnEnabled:u&&u.attrs.isNumberColumnEnabled}),Object(oa.g)(s)&&e&&e.breakoutEnabled&&a.a.createElement(Kl,{editorView:t,mountPoint:n,boundariesElement:o,scrollableElement:r,targetRef:w,layout:m,isResizing:!!l&&!!l.dragging}))}}),pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"table",title:e(In.a.table),description:e(In.a.tableDescription),keywords:["cell"],priority:600,keyshortcut:Object(Te.tooltip)(Te.toggleTable),icon:()=>a.a.createElement(mn.w,{label:e(In.a.table)}),action(e,t){const n=e(Object(Yr.a)(t.schema));return Object(bt.a)(t,n,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.TABLE,attributes:{inputMethod:mt.e.QUICK_INSERT},eventType:mt.d.TRACK})}}],floatingToolbar:sl}}),Gl=n("uxUX"),Yl=n("eYib"),Xl=n("QhI2"),Jl=n("ezrE"),Zl=n("E8Kj");const Ql=(e,t)=>Object(an.a)(e,(e,n,o,r)=>Object(Zl.d)(e,t,mt.e.FORMATTING,ed(o,r)),!0),ed=(e,t)=>({tr:n,state:o,list:r,item:i,listLocalId:a,itemLocalId:c})=>{const{selection:{$from:l},schema:d}=o,{paragraph:u,hardBreak:p}=d.nodes,h=l.node(l.depth).content;let m=!1;h.forEach((t,n)=>{t.type===p&&n<e&&(m=!0)});const b=o.doc.resolve(t),g=o.doc.resolve(b.after());if(b.parent.type!==u||!Object(f.canInsert)(g,r.createAndFill()))return null;if(m){const o=Object(Zl.a)(l,n.selection.$from);n.split(l.pos).setSelection(new s.NodeSelection(n.doc.resolve(l.pos+1))).replaceSelectionWith(r.create({localId:a},[i.create({localId:c},n.doc.nodeAt(l.pos+1).content)])).setSelection(new s.TextSelection(n.doc.resolve(l.pos+o))).delete(e,t+1)}else n.replaceRangeWith(l.before(),l.after(),r.create({localId:a},[i.create({localId:c},h)])).delete(e+1,t+1).setSelection(new s.TextSelection(n.doc.resolve(e+1)));return n};var td=function(e){const t=[],{decisionList:n,decisionItem:o,taskList:r,taskItem:i}=e.nodes;return n&&o&&t.push(Ql(new RegExp(`(^|${an.d})\\<\\>\\s$`),"decisionList")),r&&i&&t.push(Ql(new RegExp(`(^|${an.d})\\[\\]\\s$`),"taskList")),Object(an.c)("tasks-and-decisions",{rules:t})},nd=n("ArAF"),od=n("F/mI");const rd=e=>{const{decisionItem:t,taskItem:n}=e.schema.nodes;return Object(f.hasParentNodeOfType)([t,n])(e.selection)},id=e=>{const{taskList:t,decisionList:n}=e.type.schema.nodes;return[t,n].indexOf(e.type)>-1},ad=e=>{const{taskItem:t,decisionItem:n}=e.type.schema.nodes;return[t,n].indexOf(e.type)>-1},sd=e=>{const{taskItem:t}=e.schema.nodes;return Object(f.hasParentNodeOfType)([t])(e.selection)},cd=(e,t)=>{const{taskList:n}=e.doc.type.schema.nodes;let o=t.end();const r=t.doc.resolve(o+1),i=r.nodeAfter;return i&&i.type===n&&r.depth===t.depth-1&&(o+=i.nodeSize),e.blockRange(t.doc.resolve(o))},ld=e=>{const{$from:t}=e,{taskList:n}=t.doc.type.schema.nodes,o=Object(Ue.b)(e=>e.type===n)(t);return o?t.depth-o.depth:null},dd=e=>{let t=e;for(;t.pos<t.doc.nodeSize-2&&t.parentOffset>0;)t=t.doc.resolve(t.pos+1);return t},ud=(e,t,n)=>{const o=cd(t,n);if(!o)return null;const r=Object($e.liftTarget)(o);return"number"!=typeof r?null:e.lift(o,r).scrollIntoView()},pd=(e,t)=>{const{$from:n,$to:o}=e.selection,r=ud(e.tr,n,o);return t&&r&&t(r),!!r},hd=(e,t)=>{const{$from:n,$to:o}=e.selection,r=cd(n,o);if(!r)return!0;const i=Object($e.findWrapping)(r,e.schema.nodes.taskList);return!i||(t&&t(e.tr.wrap(r,i).scrollIntoView()),!0)},fd=e=>(t,n)=>{const o=Object(He.c)(e);if(!o)return!1;const{paragraph:r}=o.doc.type.schema.nodes;if(o.nodeBefore&&id(o.nodeBefore)&&o.nodeAfter&&o.nodeAfter.type===r){let e=o.doc.resolve(o.pos-1);for(;!ad(e.parent);)e=t.doc.resolve(e.pos-1);const r=t.tr.doc.slice(e.pos,o.pos),i=t.tr.step(new $e.ReplaceAroundStep(e.pos,o.pos+o.nodeAfter.nodeSize,o.pos+1,o.pos+o.nodeAfter.nodeSize-1,r,0,!0));return n&&n(i),!0}return!1},md=(e,t)=>({action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_INDENT,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.KEYBOARD,previousIndentationLevel:e,newIndentLevel:t===od.a.OUTDENT?e-1:e+1,direction:t,indentType:od.b.TASK_LIST}}),bd=e=>{const t=(e=>e.doc.resolve(e.end()).nodeAfter)(e);return!t||ad(t)},gd=Object(He.b)(sd,(e,t)=>{const n=ld(e.selection);return!(!n||1===n)&&Object(bt.d)(md(n,od.a.OUTDENT))(Object(ze.a)(pd,["taskList"]))(e,t)}),vd=Object(He.b)(sd,(e,t)=>{const n=ld(e.selection);if(!n||n>=6)return!0;const{taskList:o,taskItem:r}=e.schema.nodes,{$from:i,$to:a}=e.selection;return((e,t,n)=>{const o=Object(Ue.b)(e=>n.indexOf(e.type)>-1)(e);if(!o)return-1;const r=e.depth-o.depth,i=cd(e,t);if(!i)return-1;let a=e.depth;return e.doc.nodesBetween(i.start,i.end,(t,o,r)=>{if(a=Math.max(e.doc.resolve(o).depth,a),n.indexOf(t.type)>-1)return!0}),r+(a-e.depth)})(i,a,[o,r])>=6||Object(bt.d)(md(n,od.a.INDENT))(Object(ze.a)(hd,["taskList"]))(e,t)}),yd=Object(He.b)(He.f,Object(ze.a)(Object(ze.c)((e,t)=>fd(e.selection.$from)(e,t),Object(He.b)(rd,(e,t)=>{return(n=e.selection.$from,(e,t)=>{const o=n.doc.resolve(n.before());if(o.nodeBefore&&ad(o.nodeBefore)&&2===o.nodeBefore.nodeSize)return!1;const{taskList:r,paragraph:i}=e.schema.nodes;if(n.node(n.depth-2).type===r)return gd(e,t);if(bd(n)){if(t){const o=e.doc.slice(n.start(),n.end()).content,r=o.size?i.createChecked(void 0,o):i.createChecked();t(wd(e.tr,r,n,!0))}return!0}return!1})(e,t);var n})),["taskList","decisionList"])),Od=Object(He.b)([rd,He.e],Object(ze.c)((e,t)=>{const n=dd(e.selection.$from),{taskList:o,taskItem:r,decisionList:i,decisionItem:a,paragraph:s,bulletList:c,orderedList:l,listItem:d}=e.schema.nodes;if(!Object(f.findParentNodeOfTypeClosestToPos)(n,[o,r,i,a])){if(n.parent.type===s)return fd(n.doc.resolve(n.pos))(e,t);if((n.parent.type===c||n.parent.type===l)&&n.parent.firstChild&&n.parent.firstChild.type===d){const o=e.doc.resolve(n.pos+1),r=ud(e.tr,o,o);return Object(ze.a)((e,t)=>!!r&&(t&&t(r),!0),["bulletList","orderedList"])(e,t)}}return!1},(e,t)=>{const n=dd(e.selection.$from),{taskList:o,paragraph:r,doc:i}=e.schema.nodes;if(!n.parent||n.parent.type===i)return!1;const a=n.doc.resolve(n.before());if(a.nodeBefore&&ad(a.nodeBefore)&&2===a.nodeBefore.nodeSize)return!1;if(n.node(n.depth-2).type===o||n.node(n.depth-1).type===o&&n.parent.type===o){const o=ud(e.tr,n,n);return t&&o&&t(o),!0}if((e=>{if(!e)return!1;const{table:t,tableHeader:n,tableCell:o,tableRow:r}=e.type.schema.nodes;return[t,n,o,r].includes(e.type)})(a.nodeBefore))return!1;if(bd(e.selection.$from)){if(t){const o=e.doc.slice(n.start(),n.end()).content,i=o.size?r.createChecked(void 0,o):[];t(wd(e.tr,i,n,!1))}return!0}return!1})),Ed=Object(ze.a)(Od,["taskList","decisionList"]),wd=(e,t,n,o)=>{const r=e.doc,i=n.node(n.depth-2),a=n.index(n.depth-1),c=!(!id(i)&&0===a);c&&(e=e.split(n.pos,1,[{type:n.parent.type,attrs:{localId:nd.b.generate()}}]));const l=Be.Fragment.from(t);e=e.replace(e.mapping.map(n.start()-2),e.mapping.map(n.end()+2),l.size?new Be.Slice(l,0,0):Be.Slice.empty),o&&(e=e.setSelection(new s.TextSelection(e.doc.resolve(n.pos+1-(c?0:2)))));const d=r.resolve(n.after());if(d.depth===n.depth-1&&d.nodeAfter&&id(d.nodeAfter)){const t=e.mapping.map(d.pos+2),n=e.doc.resolve(t),o=cd(n,e.doc.resolve(n.after(n.depth-1)-1));o&&(e=e.lift(o,o.depth-1).scrollIntoView()),e=e.deleteRange(t-3,t-1)}return e},Cd=Object(He.b)(rd,Object(ze.c)(Object(He.b)(e=>{const{selection:t,schema:n}=e,{$from:o}=t,r=o.node(o.depth);return r&&(r.type===n.nodes.taskItem||r.type===n.nodes.decisionItem)&&0===r.content.size},Object(ze.c)(gd,(e,t)=>{let{tr:n,selection:{$from:o}}=e;const{schema:{nodes:{paragraph:r}}}=e;return!!bd(o)&&(t&&t(wd(n,r.createChecked(),o,!0)),!0)})),(e,t)=>{const{selection:n,schema:o}=e,{taskItem:r}=o.nodes,{$from:i,$to:a}=n,s=i.node(i.depth),c=s&&s.type,l=c===r?"taskList":"decisionList",d=Object(Zl.d)(e,l,mt.e.KEYBOARD,({tr:e,itemLocalId:t})=>{if(i.pos===a.pos&&0===i.parentOffset){const n=c.createAndFill({localId:t});if(n)return e.insert(i.pos-1,n)}return e.split(i.pos,1,[{type:c,attrs:{localId:t}}])});return d&&t&&(d.scrollIntoView(),t(d)),!0}));var Td=function(e,t,n){const r={"Shift-Tab":n?Object(ze.c)(gd,rd):gd,Tab:n?Object(ze.c)(vd,rd):vd},i=n?{"Shift-Tab":rd,Tab:rd}:{},a=Object(o.a)({Backspace:yd,Delete:Ed,Enter:Cd},t?r:i);return Object(ln.b)(a)},Sd=n("AJnL");const kd=Object(h.f)({placeholder:{id:"fabric.editor.decisionPlaceholder",defaultMessage:"Add a decision",description:"Placeholder description for an empty decision in the editor"}});class xd extends a.a.Component{render(){const{contentRef:e,showPlaceholder:t,intl:{formatMessage:n}}=this.props,o=n(kd.placeholder);return a.a.createElement(Sd.a,{contentRef:e,placeholder:o,showPlaceholder:t})}}xd.displayName="Decision";var Ad=Object(h.g)(xd);class jd extends lr.a{isContentEmpty(e){return 0===e.content.childCount}createDomRef(){const e=document.createElement("li");return e.style["list-style-type"]="none",e}getContentDOM(){const e=document.createElement("div");return e.className="decision-item",{dom:e}}render(e,t){return a.a.createElement(Ad,{contentRef:t,showPlaceholder:this.isContentEmpty(this.node)})}viewShouldUpdate(e){return this.isContentEmpty(this.node)&&!!e.content.childCount}update(e,t){return super.update(e,t,(e,t)=>!this.isContentEmpty(t))}}const Id=(e,t)=>(n,o,r)=>new jd(n,o,r,e,t,{}).init();var Md=n("3Xso"),Nd=n("mHbP"),Rd=n("kvU/"),Pd=n("DhWB"),Ld=n("TBbV"),Dd=n("YF5E");class _d extends i.Component{constructor(){super(...arguments),this.state={resolvedContextProvider:void 0},this.mounted=!1}UNSAFE_componentWillMount(){this.mounted=!0,this.updateContextIdentifierProvider(this.props)}componentWillUnmount(){this.mounted=!1}UNSAFE_componentWillReceiveProps(e){e.contextIdentifierProvider!==this.props.contextIdentifierProvider&&this.updateContextIdentifierProvider(e)}async updateContextIdentifierProvider(e){if(e.contextIdentifierProvider)try{const t=await e.contextIdentifierProvider;this.mounted&&this.setState({resolvedContextProvider:t})}catch(t){this.mounted&&this.setState({resolvedContextProvider:void 0})}else this.setState({resolvedContextProvider:void 0})}render(){const e=this.props,{contextIdentifierProvider:t}=e,n=Object(Fn.a)(e,["contextIdentifierProvider"]),{objectId:o}=this.state.resolvedContextProvider||{},r=o?"edit":"new";return a.a.createElement(Ld.e,{data:{userContext:r}},a.a.createElement(Dd.a,Object.assign({},n,{objectAri:o})))}}_d.displayName="TaskItemWithProviders";const Bd=Object(h.f)({placeholder:{id:"fabric.editor.taskPlaceholder",defaultMessage:"Type your action, use '@' to assign to someone.",description:"Placeholder description for an empty action/task in the editor"}});class $d extends i.PureComponent{constructor(e){super(e),this.renderWithProvider=e=>{const t=this.props,{providers:n,intl:{formatMessage:o}}=t,r=Object(Fn.a)(t,["providers","intl"]),{taskDecisionProvider:i,contextIdentifierProvider:s}=e,c=o(Bd.placeholder);return a.a.createElement(_d,Object.assign({},r,{placeholder:c,taskDecisionProvider:i,contextIdentifierProvider:s}))},this.providerFactory=e.providers||new Rd.a}componentWillUnmount(){this.props.providers||this.providerFactory.destroy()}render(){return a.a.createElement(Pd.a,{providers:["taskDecisionProvider","contextIdentifierProvider"],providerFactory:this.providerFactory,renderNode:this.renderWithProvider})}}$d.displayName="TaskItem";var zd,Fd=Object(h.g)($d);class Ud extends lr.a{constructor(){super(...arguments),this.handleOnChange=(e,t)=>{const{tr:n}=this.view.state,o=this.getPos();n.setNodeMarkup(o,void 0,{state:t?"DONE":"TODO",localId:e}),this.view.dispatch(n)},this.addListAnalyticsData=e=>{try{const t=this.view.state.doc.resolve(this.getPos()),n=t.index(),r=t.parent.childCount,i=t.parent.attrs.localId;e.update(e=>{const{attributes:t={},actionSubject:a}=e;return"action"!==a?e:Object(o.a)(Object(o.a)({},e),{},{attributes:Object(o.a)(Object(o.a)({},t),{},{position:n,listSize:r,listLocalId:i})})})}catch(t){}}}isContentEmpty(e){return 0===e.content.childCount}createDomRef(){const e=document.createElement("div");return e.style["list-style-type"]="none",e}getContentDOM(){const e=document.createElement("div");return e.className="task-item",{dom:e}}render(e,t){const{localId:n,state:o}=this.node.attrs;return a.a.createElement(Md.a,{channel:"fabric-elements",onEvent:this.addListAnalyticsData},a.a.createElement(d.a,{plugins:{taskDecisionPlugin:Nd.a},render:()=>a.a.createElement(Fd,{taskId:n,contentRef:t,isDone:"DONE"===o,onChange:this.handleOnChange,showPlaceholder:this.isContentEmpty(this.node),providers:e.providerFactory})}))}viewShouldUpdate(e){return this.isContentEmpty(this.node)&&!!e.content.childCount}update(e,t){return super.update(e,t,(e,t)=>!(this.isContentEmpty(t)||e.attrs.state!==t.attrs.state))}}function Hd(e,t,n){return(o,r,i)=>new Ud(o,r,i,e,t,{providerFactory:n}).init()}!function(e){e[e.SET_CONTEXT_PROVIDER=0]="SET_CONTEXT_PROVIDER"}(zd||(zd={}));const Wd=e=>(t,n)=>(n&&n(t.tr.setMeta(Nd.a,{action:zd.SET_CONTEXT_PROVIDER,data:e})),!0);var Vd=n("eDcA"),Kd=n.n(Vd);class qd extends i.PureComponent{constructor(){super(...arguments),this.state={disabled:!1},this.handleInsertDecision=()=>{const{editorView:e}=this.props;return!!e&&(Object(Zl.c)(e,"decisionList")(e.state,e.dispatch),!0)}}render(){const{disabled:e}=this.state,{isDisabled:t,isReducedSpacing:n,intl:{formatMessage:o}}=this.props,r=o(In.a.decision);return a.a.createElement(O.a,{onClick:this.handleInsertDecision,disabled:e||t,spacing:n?"none":"default",title:r+" <>",iconBefore:a.a.createElement(Kd.a,{label:r})})}}var Gd=Object(h.g)(qd),Yd=n("JXy6"),Xd=n.n(Yd);class Jd extends i.PureComponent{constructor(){super(...arguments),this.state={disabled:!1},this.handleInsertTask=()=>{const{editorView:e}=this.props;return!!e&&(Object(Zl.c)(e,"taskList")(e.state,e.dispatch),!0)}}render(){const{disabled:e}=this.state,{isDisabled:t,isReducedSpacing:n,intl:{formatMessage:o}}=this.props,r=o(In.a.action);return a.a.createElement(O.a,{onClick:this.handleInsertTask,disabled:e||t,spacing:n?"none":"default",title:r+" []",iconBefore:a.a.createElement(Xd.a,{label:r})})}}var Zd=Object(h.g)(Jd);const Qd=E.default.div`
  display: flex;
`,eu=(e,t,n)=>{const{list:o,item:r}=Object(Zl.b)(n,t.schema);return Object(Zl.d)(t,n,mt.e.QUICK_INSERT,({listLocalId:t,itemLocalId:n})=>e(o.createChecked({localId:t},r.createChecked({localId:n}))))};var tu=({allowNestedTasks:e,consumeTabs:t,useLongPressSelection:n}={})=>({name:"taskDecision",nodes:()=>[{name:"decisionList",node:Gl.a},{name:"decisionItem",node:Yl.a},{name:"taskList",node:Xl.a},{name:"taskItem",node:Jl.a}],pmPlugins:()=>[{name:"tasksAndDecisions",plugin:({portalProviderAPI:e,providerFactory:t,eventDispatcher:r,dispatch:i})=>function(e,t,n,r,i=!1){return new s.Plugin({props:{nodeViews:{taskItem:Hd(e,t,n),decisionItem:Id(e,t)},handleTextInput(e,t,n,o){const{state:r,dispatch:i}=e,{tr:a}=r;return r.selection instanceof s.NodeSelection&&r.selection.node.type===e.state.schema.nodes.decisionItem&&(r.selection.replace(a),a.insertText(o),i&&i(a),!0)},handleClickOn:Object(Bn.a)(["decisionItem"],e=>e.hasAttribute("data-decision-wrapper")||"Decision"===e.getAttribute("aria-label"),{useLongPressSelection:i})},state:{init:()=>({insideTaskDecisionItem:!1}),apply(e,t){const{action:n,data:i}=e.getMeta(Nd.a)||{action:null,data:null};let a=t;switch(n){case zd.SET_CONTEXT_PROVIDER:a=Object(o.a)(Object(o.a)({},t),{},{contextIdentifierProvider:i})}return r(Nd.a,a),a}},view:e=>(n.subscribe("contextIdentifierProvider",(t,n)=>{"contextIdentifierProvider"===t&&(n?n.then(t=>{Wd(t)(e.state,e.dispatch)}):Wd(void 0)(e.state,e.dispatch))}),{}),key:Nd.a,appendTransaction:(e,t,n)=>{const r=n.tr;let i=!1;if(e.forEach(e=>{e.docChanged&&Object(Ue.k)(e,(e,t)=>{const{decisionList:a,decisionItem:s,taskList:c,taskItem:l}=n.schema.nodes;if(e.type&&(e.type===a||e.type===s||e.type===c||e.type===l)){const n=e.attrs,{localId:a}=n,s=Object(Fn.a)(n,["localId"]);null!=a&&""!==a||(r.setNodeMarkup(t,void 0,Object(o.a)({localId:nd.b.generate()},s)),i=!0)}})}),i)return r.setMeta("addToHistory",!1)}})}(e,r,t,i,n)},{name:"tasksAndDecisionsInputRule",plugin:({schema:e})=>td(e)},{name:"tasksAndDecisionsKeyMap",plugin:({schema:n})=>Td(n,e,t)}],secondaryToolbarComponent:({editorView:e,disabled:t})=>a.a.createElement(Qd,null,a.a.createElement(Gd,{editorView:e,isDisabled:t,isReducedSpacing:!0}),a.a.createElement(Zd,{editorView:e,isDisabled:t,isReducedSpacing:!0})),pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"action",title:e(In.a.action),description:e(In.a.actionDescription),priority:100,keywords:["checkbox","task","todo"],keyshortcut:"[]",icon:()=>a.a.createElement(mn.a,{label:e(In.a.action)}),action:(e,t)=>eu(e,t,"taskList")},{id:"decision",title:e(In.a.decision),description:e(In.a.decisionDescription),priority:900,keyshortcut:"<>",icon:()=>a.a.createElement(mn.d,{label:e(In.a.decision)}),action:(e,t)=>eu(e,t,"decisionList")}]}}),nu=n("JDys"),ou=n("O65l"),ru=n.n(ou);const iu=ru()({id:"+c7f6",loader:()=>Promise.all([n.e("atlaskit~66e23772"),n.e("@atlaskit-internal-editor-core-helpdialog~3a3abd78")]).then(n.bind(null,"4M11")),loading:()=>null});var au=n("OUhg"),su=n("o0fs"),cu=n.n(su),lu=n("a1BY"),du=n("yguP");const uu=()=>{const e={};return Te.bindKeymapWithCommand(Te.openHelp.common,(e,t)=>{let{tr:n}=e;return n.getMeta(du.a)||(n=Object(bt.a)(e,n,{action:mt.a.CLICKED,actionSubject:mt.b.BUTTON,actionSubjectId:mt.c.BUTTON_HELP,attributes:{inputMethod:mt.e.SHORTCUT},eventType:mt.d.UI}),Object(lu.b)(n,t)),!0},e),Object(ln.b)(e)};var pu=e=>({name:"helpDialog",pmPlugins:()=>[{name:"helpDialog",plugin:({dispatch:t})=>function(e,t){return new s.Plugin({key:du.a,state:{init:()=>({isVisible:!1,imageEnabled:t}),apply(t,n,r){const i=t.getMeta(du.a),a=du.a.getState(r);if(void 0!==i&&i!==a.isVisible){const t=Object(o.a)(Object(o.a)({},a),{},{isVisible:i});return e(du.a,t),t}return a}}})}(t,!!e)},{name:"helpDialogKeymap",plugin:()=>uu()}],pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"helpdialog",title:e(In.a.help),description:e(In.a.helpDescription),keywords:["?"],priority:4e3,keyshortcut:Object(Te.tooltip)(Te.openHelp),icon:()=>a.a.createElement(cu.a,{label:e(In.a.help)}),action(e,t){const n=e("");return Object(lu.b)(n),Object(bt.a)(t,n,{action:mt.a.HELP_OPENED,actionSubject:mt.b.HELP,actionSubjectId:mt.c.HELP_QUICK_INSERT,attributes:{inputMethod:mt.e.QUICK_INSERT},eventType:mt.d.UI})}}]},contentComponent:({editorView:e})=>a.a.createElement(d.a,{plugins:{helpDialog:du.a,quickInsert:au.a},render:({helpDialog:t={},quickInsert:n})=>a.a.createElement(iu,{editorView:e,isVisible:t.isVisible,quickInsertEnabled:!!n,imageEnabled:t.imageEnabled})})}),hu=n("yKQC");function fu(e,t){if(t)return Object(ln.b)({Enter:(n,o,r)=>!!function(e){const{$cursor:t}=e.state.selection,{decisionItem:n,paragraph:o,taskItem:r}=e.state.schema.nodes;return!t||t.parent.type===o&&1===t.depth||t.parent.type===n&&!mu(t)||t.parent.type===r&&!mu(t)}(r)&&(e(hu.a,bu(n)),t(r),!0)})}function mu(e){const{content:t}=e.parent;return!(t&&t.size)}const bu=e=>({payload:{action:mt.a.STOPPED,actionSubject:mt.b.EDITOR,actionSubjectId:mt.c.SAVE,attributes:{inputMethod:mt.e.SHORTCUT,documentSize:e.doc.nodeSize},eventType:mt.d.UI}});var gu=e=>({name:"saveOnEnter",pmPlugins:()=>[{name:"saveOnEnter",plugin:({dispatch:t})=>fu(t,e)}]});function vu(e){const{clipboardData:t}=e;return!!t&&(n=t.types,o="Files",!(r=n).indexOf&&r.contains?n.contains(o):n.indexOf(o)>-1);var n,o,r}const yu=async e=>{if(navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)try{await navigator.clipboard.writeText(e)}catch(t){throw new Error("Clipboard api is not supported")}else{if(!window.clipboardData||"function"!=typeof window.clipboardData.setData)throw new Error("Clipboard api is not supported");try{await window.clipboardData.setData("text",e)}catch(t){throw new Error("IE clipboard api is not supported")}}};function Ou(e){const t=e;return!!t.dataTransfer&&-1!==Array.prototype.slice.call(t.dataTransfer.types).indexOf("Files")}const Eu=e=>{const{mediaSingle:t}=e.schema.nodes,{$to:n}=e.selection;if(t)for(let o=n.depth;o>=0;o--){let e=n.index(o);if(n.node(o).canReplaceWith(e,e,t))return!0}return!1},wu=(e,t)=>{const{media:n,mediaSingle:o}=t.nodes;if(!n||!o)return null;const r=n.createChecked({type:"external",url:e});return o.createChecked({},r)},Cu=new s.PluginKey("imageUploadPlugin"),Tu=e=>t=>((e,t)=>e.setMeta(Cu,t))(t,{name:"START_UPLOAD",event:e}),Su=e=>(t,n)=>!!Cu.getState(t).enabled&&(n&&n(Tu(e)(t.tr)),!0),ku=(e,t)=>(t,n)=>!!e(n)&&(n.preventDefault(),n.stopPropagation(),Su(n)(t.state,t.dispatch),!0),xu=({dispatch:e,providerFactory:t})=>{let n;return new s.Plugin({state:{init:(e,t)=>({active:!1,enabled:Eu(t),hidden:!t.schema.nodes.media||!t.schema.nodes.mediaSingle}),apply(t,n,r,i){const a=(e=>{const{media:t}=e.schema.nodes;return e.selection instanceof s.NodeSelection&&e.selection.node.type===t})(i),c=Eu(i),l=((e,t)=>{const n=e.getMeta(Cu);return n&&"START_UPLOAD"===n.name?{event:n.event}:t.activeUpload})(t,n);if(a!==n.active||c!==n.enabled||l!==n.activeUpload){const t=Object(o.a)(Object(o.a)({},n),{},{active:a,enabled:c,activeUpload:l});return e(Cu,t),t}return n}},key:Cu,view:()=>{const e=async(e,t)=>{if("imageUploadProvider"===e&&t)try{n=await t}catch(o){n=void 0}};return t.subscribe("imageUploadProvider",e),{update(e,t){const{state:o}=e,r=Cu.getState(o),i=Cu.getState(t);r.activeUpload!==i.activeUpload&&r.activeUpload&&n&&n(r.activeUpload.event,t=>(e=>(t,n)=>{if(!Cu.getState(t).enabled||!e.src)return!1;const o=wu(e.src,t.schema);return!!o&&(n&&n(Object(f.safeInsert)(o,t.selection.$to.pos)(t.tr).scrollIntoView()),!0)})(t)(e.state,e.dispatch))},destroy(){t.unsubscribe("imageUploadProvider",e)}}},props:{handleDOMEvents:{drop:ku(Ou),paste:ku(vu)}}})};var Au=function(e){if(!e.nodes.media||!e.nodes.mediaSingle)return;const t=Object(an.a)(/!\[(.*)\]\((\S+)\)$/,(e,t,n,o)=>{const{schema:r}=e,i={src:t[2],alt:t[1]},a=wu(i.src,r);return a?e.tr.replaceWith(n,o,a):null});return Object(an.c)("image-upload",{rules:[t]})};var ju=()=>({name:"imageUpload",pmPlugins:()=>[{name:"imageUpload",plugin:xu},{name:"imageUploadInputRule",plugin:({schema:e})=>Au(e)}]}),Iu=n("eUCP"),Mu=n("EwaM"),Nu=n("X78g"),Ru=n("IUoJ");var Pu=n("BC/G");var Lu=e=>{let t=()=>{};const n=(e=>async(t,n)=>{try{const n=await e;if(n)return t(n)}catch(o){n?n(o):console.error(o)}})(new Promise(e=>{t=e}));return{name:"collabEdit",pmPlugins(){const{useNativePlugin:o=!1,userId:r=null}=e||{};return[...o?[{name:"pmCollab",plugin:()=>Object(Iu.collab)({clientID:r})}]:[],{name:"collab",plugin:({dispatch:o,providerFactory:r})=>(r&&r.subscribe("collabEditProvider",(e,n)=>{n&&n.then(e=>t(e))}),Object(Mu.a)(o,r,n,e))}]},onEditorViewStateUpdated(e){const t=Object(Pu.b)(e.newEditorState,e.newEditorState.tr);n((({transaction:e,oldEditorState:t,newEditorState:n})=>o=>{const r=Ru.a.getState(n);if(!r.isReady)return;e.getMeta("isRemote")||e.getMeta("scaleTable")||!e.docChanged||o.send(e,t,n);const i=Ru.a.getState(t),{activeParticipants:a}=i,{activeParticipants:s,sessionId:c}=r,l=!t.selection.eq(n.selection),d=!a.eq(s);if(c&&l&&!e.docChanged||c&&d){const e={type:"telepointer",selection:Object(Nu.b)(n.selection),sessionId:c};o.sendMessage(e)}})(e),t)}}},Du=n("7EeQ"),_u=n("XQko"),Bu=n("/mAS");const $u=E.default.span`
  align-items: center;
  background: ${p.N30};
  border: 1px solid ${p.N50};
  border-radius: ${Object(te.c)()}px;
  box-sizing: border-box;
  cursor: default;
  display: inline-flex;
  font-size: 13px;
  margin: 0 2px;
  min-height: 24px;
  padding: 0 4px;
  user-select: none;
  vertical-align: middle;
  white-space: nowrap;

  .ProseMirror-selectednode & {
    background: ${p.N50};
    outline: none;
  }
`,zu=E.default.span`
  display: inline-block;
  color: #707070;
  line-height: 24px;
  vertical-align: top;

  &::before {
    color: black;
    content: 'JIRA | ';
  }
`,Fu=E.default.span`
  display: inline-block;
  height: 24px;
  vertical-align: top;
  width: 24px;

  & > div {
    height: 24px;
    width: 24px;
  }
`;function Uu(e){const{node:{attrs:{issueKey:t}}}=e;return a.a.createElement($u,null,a.a.createElement(Fu,null,a.a.createElement(Bu.a,{size:"small"})),a.a.createElement(zu,null,t))}const Hu=new s.PluginKey("jiraIssuePlugin"),Wu=({portalProviderAPI:e,eventDispatcher:t})=>new s.Plugin({key:Hu,props:{nodeViews:{confluenceJiraIssue:lr.a.fromComponent(Uu,e,t)}}});var Vu=()=>({name:"confluenceJiraIssue",nodes:()=>[{name:"confluenceJiraIssue",node:_u.a}],pmPlugins:()=>[{name:"jiraIssue",plugin:Wu}]}),Ku=n("25UG"),qu=n("idvw"),Gu=n("sPpT"),Yu=n.n(Gu),Xu=n("przm"),Ju=n.n(Xu),Zu=n("YFqM"),Qu=n.n(Zu),ep=n("bs5R"),tp=n.n(ep),np=n("Ig6J"),op=n.n(np),rp=n("lW79"),ip=n.n(rp);const ap=(e,t)=>{const{panel:n}=e.schema.nodes;return Object(f.findSelectedNodeOfType)(n)(t||e.selection)||Object(f.findParentNodeOfType)(n)(t||e.selection)},sp={info:Yu.a,success:Ju.a,note:Qu.a,tip:ip.a,warning:tp.a,error:op.a,custom:Yu.a},cp=e=>{const{allowCustomPanel:t,providerFactory:n,panelAttributes:{panelType:o,panelIcon:r}}=e;if(t&&r&&o===Ku.a.CUSTOM)return a.a.createElement(sr.a,{providers:n,shortName:r,showTooltip:!1,allowTextFallback:!1,fitToHeight:16});const i=sp[o];return a.a.createElement(i,{label:"Panel "+o})};class lp{constructor(e,t,n,o,r){this.providerFactory=r,this.pluginOptions=o,this.view=t,this.node=e;const{dom:i,contentDOM:s}=Be.DOMSerializer.renderSpec(document,((e,t)=>{const{panelColor:n,panelType:o,panelIcon:r}=e,i=o===Ku.a.CUSTOM&&t,a=n&&i?"background-color: "+n:"",s=!i||!!r,c={class:qu.a.prefix,"data-panel-type":o||Ku.a.INFO,style:a},l=["span",{class:qu.a.icon}],d=["div",{class:qu.a.content},0];return s?["div",c,l,d]:["div",c,d]})(e.attrs,o.UNSAFE_allowCustomPanel||!1));this.getPos=n,this.dom=i,this.contentDOM=s,this.icon=this.dom.querySelector("."+qu.a.icon),this.icon&&zn.a.render(a.a.createElement(cp,{allowCustomPanel:o.UNSAFE_allowCustomPanel,panelAttributes:e.attrs,providerFactory:this.providerFactory}),this.icon)}}const dp=(e,t)=>(n,o,r)=>new lp(n,o,r,e,t),up=new s.PluginKey("panelPlugin"),pp=e=>up.getState(e),hp=e=>(t,n)=>{const r=pp(t);return n&&n(t.tr.setMeta(up,Object(o.a)(Object(o.a)({},r),e))),!0},fp=(e,t,n={})=>{let{activePanelIcon:o,activePanelColor:r,activePanelType:i}=up.getState(e);const{emoji:a,color:s}=n;let c=o,l=t,d=Object(qu.b)(t!==Ku.a.CUSTOM?t:i);return(s||r)&&(l=Ku.a.CUSTOM,d=s||r),a&&(l=Ku.a.CUSTOM,c=a),{panelIcon:c,panelColor:d,panelType:l}},mp=(e,t={},n=!1)=>(o,r)=>{const{schema:{nodes:i},tr:a}=o,c=ap(o);if(void 0===c)return!1;let l=e,d=up.getState(o).activePanelType;if(n){const{panelType:n}=fp(o,e,t);l=n,d=e}const u={action:mt.a.CHANGED_TYPE,actionSubject:mt.b.PANEL,attributes:{newType:l,previousType:d},eventType:mt.d.TRACK};let p;if(n){const{panelIcon:n,panelColor:r,panelType:s}=fp(o,e,t);p=a.setNodeMarkup(c.pos,i.panel,{panelType:s,panelIcon:n,panelColor:r}).setMeta(up,{activePanelType:s,activePanelIcon:n,activePanelColor:r})}else p=a.setNodeMarkup(c.pos,i.panel,{panelType:e}).setMeta(up,{activePanelType:e});const h=o.selection instanceof s.NodeSelection&&"panel"===o.selection.node.type.name?p.setSelection(new s.NodeSelection(a.doc.resolve(c.pos))):p,f=Object(bt.a)(o,h,u);return f.setMeta("scrollIntoView",!1),r&&r(f),!0};var bp=n("amtX"),gp=n("DfCg"),vp=n("fyDS");const yp=[{label:"Doctor",value:gp.a.N0},{label:"Pixie dust",value:gp.a.B50},{label:"Gram's sofa",value:gp.a.T50},{label:"The smell",value:gp.a.G50},{label:"James blonde",value:gp.a.Y50},{label:"Rosie",value:gp.a.R50},{label:"Lavender secret",value:gp.a.P50},{label:"Gram's hair",value:gp.a.N20},{label:"Schwag",value:gp.a.B75},{label:"Arctic chill",value:gp.a.T75},{label:"Mintie",value:gp.a.G75},{label:"Dandelion whisper",value:gp.a.Y75},{label:"Bondi sunburn",value:gp.a.R75},{label:"Phantom mist",value:gp.a.P75},{label:"Sentinel",value:gp.a.N60},{label:"Arvo breeze",value:gp.a.B100},{label:"Hairy fairy",value:gp.a.T100},{label:"Green tea",value:gp.a.G200},{label:"Pub mix",value:gp.a.Y200},{label:"Alexandria",value:gp.a.R100},{label:"Herky jerky",value:gp.a.P100}].map(e=>Object(o.a)(Object(o.a)({},e),{},{border:vp.a})),Op=E.default.div`
  position: relative;
`,Ep=E.default.div`
  border-radius: ${Object(te.c)()}px;
  background-color: white;
  box-shadow: 0 4px 8px -2px ${p.N60A}, 0 0 1px ${p.N60A};
  padding: 4px;
`,wp=e=>{const t=a.a.useRef(null),[n,o]=a.a.useState(!1),r=t=>{o(!1),e.onChange&&e.onChange(t)},i=e.title||"";return a.a.createElement(Op,null,a.a.createElement(Ae.a,{content:i,position:"top"},a.a.createElement(bp.a,{ref:t,"aria-label":i,spacing:"compact",onClick:()=>{o(!n)},style:{backgroundColor:e.currentColor||"transparent",border:"1px solid "+vp.a,width:"20px",height:"20px",padding:0}})),(()=>{if(n&&t.current)return a.a.createElement(m.a,{target:t.current,fitHeight:350,fitWidth:350,offset:[0,10]},a.a.createElement(Ep,null,a.a.createElement(ml.a,{palette:yp,selectedColor:e.currentColor||null,onClick:r})))})())};var Cp=n("tv4J"),Tp=n.n(Cp),Sp=n("lbXe"),kp=n("QfMu"),xp=n("DGUU"),Ap=n("AyqE");const jp=()=>Promise.all([n.e("vendors~4134d62c"),n.e(20),n.e("@atlaskit-internal_emojiPickerComponent~4134d62c")]).then(n.bind(null,"jDEz")).then(e=>e.default);class Ip extends kp.a{constructor(e){super(e,{}),this.state={asyncLoadedComponent:Ip.AsyncLoadedComponent}}asyncLoadComponent(){jp().then(e=>{Ip.AsyncLoadedComponent=e,this.setAsyncState(e)})}renderLoading(){const e=new xp.c;return a.a.createElement("div",{className:Ap.g,ref:e=>{this.props.onPickerRef&&this.props.onPickerRef(e)}},e.renderItem())}renderLoaded(e,t){const n=this.props,{emojiProvider:o}=n,r=Object(Fn.a)(n,["emojiProvider"]);return a.a.createElement(t,Object.assign({emojiProvider:e},r))}}var Mp=Object(Sp.a)()(Ip);const Np=E.default.div`
  position: relative;
`,Rp=e=>{const t=a.a.useRef(null),[n,o]=a.a.useState(!1),r=t=>{o(!1),e.onChange&&e.onChange(t)},i=e=>e.emojiProvider?a.a.createElement(Mp,{emojiProvider:e.emojiProvider,onSelection:r,onPickerRef:()=>{}}):null,s=e.title||"";return a.a.createElement(Np,null,a.a.createElement(Ae.a,{content:s,position:"top"},a.a.createElement(bp.a,{appearance:"subtle",key:e.idx,style:{padding:0,margin:0,display:"flex",height:"24px",width:"24px"},onClick:()=>{o(!n)},ref:t,isSelected:e.isSelected,iconBefore:a.a.createElement(Tp.a,{label:"emoji"})})),(()=>{if(t.current&&n)return a.a.createElement(m.a,{target:t.current,mountTo:t.current.parentElement,fitHeight:350,fitWidth:350,offset:[0,10]},a.a.createElement(Pd.a,{providers:["emojiProvider"],providerFactory:e.providerFactory,renderNode:i}))})())},Pp=Object(h.f)({info:{id:"fabric.editor.info",defaultMessage:"Info",description:"Panels provide a way to highlight text. The info panel has a blue background."},note:{id:"fabric.editor.note",defaultMessage:"Note",description:"Panels provide a way to highlight text. The note panel has a purple background."},success:{id:"fabric.editor.success",defaultMessage:"Success",description:"Panels provide a way to highlight text. The success panel has a green background."},warning:{id:"fabric.editor.warning",defaultMessage:"Warning",description:"Panels provide a way to highlight text. The warning panel has a yellow background."},error:{id:"fabric.editor.error",defaultMessage:"Error",description:"Panels provide a way to highlight text. The error panel has a red background."},emoji:{id:"fabric.editor.emoji",defaultMessage:"Add icon",description:"Select the panel icon"},backgroundColor:{id:"fabric.editor.panel.backgroundColor",defaultMessage:"Background color",description:"Select the panel background color."}}),Lp=(e,t,n={},o)=>{const{formatMessage:r}=t,i=pp(e);if(i&&i.toolbarVisible&&i.element){const{activePanelType:t,activePanelColor:s,activePanelIcon:c}=i,l=e.schema.nodes.panel;return{title:"Panel floating controls",getDomRef:()=>i.element,nodeType:l,items:((e,t,n,o,r,i,s)=>{const c=[{type:"button",icon:Yu.a,onClick:mp(Ku.a.INFO),selected:r===Ku.a.INFO,title:e(Pp.info)},{type:"button",icon:Qu.a,onClick:mp(Ku.a.NOTE),selected:r===Ku.a.NOTE,title:e(Pp.note)},{type:"button",icon:Ju.a,onClick:mp(Ku.a.SUCCESS),selected:r===Ku.a.SUCCESS,title:e(Pp.success)},{type:"button",icon:tp.a,onClick:mp(Ku.a.WARNING),selected:r===Ku.a.WARNING,title:e(Pp.warning)},{type:"button",icon:op.a,onClick:mp(Ku.a.ERROR),selected:r===Ku.a.ERROR,title:e(Pp.error)}];return n&&c.push({type:"custom",render:(t,i)=>a.a.createElement(Rp,{key:i,view:t,title:e(Pp.emoji),providerFactory:o,isSelected:r===Ku.a.CUSTOM&&!!s,onChange:e=>{t&&mp(Ku.a.CUSTOM,{emoji:e.shortName},n)(t.state,t.dispatch)}})},{type:"separator"},{type:"custom",render:(t,o)=>{const s=r===Ku.a.CUSTOM?i||Object(qu.b)(Ku.a.INFO):Object(qu.b)(r);return a.a.createElement(wp,{key:o,view:t,title:e(Pp.backgroundColor),currentColor:s,onChange:e=>{t&&mp(Ku.a.CUSTOM,{color:e},n)(t.state,t.dispatch)}})}}),c.push({type:"separator"},{type:"button",appearance:"danger",icon:Io.a,onClick:(e,t)=>{const{schema:{nodes:n},tr:o}=e,r={action:mt.a.DELETED,actionSubject:mt.b.PANEL,attributes:{inputMethod:mt.e.TOOLBAR},eventType:mt.d.TRACK};let i=o;return Object(f.findSelectedNodeOfType)(n.panel)(o.selection)?i=Object(f.removeSelectedNode)(o):Object(f.findParentNodeOfType)(n.panel)(o.selection)&&(i=Object(f.removeParentNodeOfType)(n.panel)(o)),!!i&&(t&&t(Object(bt.a)(e,i,r)),!0)},onMouseEnter:Object(Mo.b)(t,!0),onMouseLeave:Object(Mo.b)(t,!1),title:e(S.a.remove)}),c})(r,l,n.UNSAFE_allowCustomPanel||!1,o,t,s,c)}}};var Dp=function(){const e={Backspace:(e,t)=>{const{selection:n,schema:{nodes:o},tr:r}=e,{panel:i}=o,{$from:a,$to:s}=n;if(a.pos!==s.pos)return!1;if(0!==a.parentOffset)return!1;const c=r.doc.resolve(Math.max(0,a.before(a.depth)-1)),l=c.pos>0&&c.parent&&c.parent.type,d=a.parent.type;if(l===i&&!(d===i)){const e=a.node(a.depth).content,n=c.pos-1;return((e,t)=>t.delete(e.before(e.depth)-1,e.end(e.depth)+1))(a,r).insert(n,e),t&&t(Object(f.setTextSelection)(n)(r).scrollIntoView()),!0}return a.node().type===i}};return Object(ln.b)(e)},_p=n("Nla+");const Bp=(e,t,n)=>{const o=n($p(e,t));return o&&Object(bt.a)(t,o,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.PANEL,attributes:{inputMethod:mt.e.QUICK_INSERT,panelType:e},eventType:mt.d.TRACK}),o},$p=(e,t)=>t.schema.nodes.panel.createChecked({panelType:e},t.schema.nodes.paragraph.createChecked());var zp=(e={})=>({name:"panel",nodes:()=>[{name:"panel",node:e.UNSAFE_allowCustomPanel?Ku.b:Ku.c}],pmPlugins:()=>[{name:"panel",plugin:({providerFactory:t,dispatch:n})=>((e,t,n)=>{const{useLongPressSelection:r=!1}=n;return new s.Plugin({state:{init:()=>({element:null,activePanelType:void 0,toolbarVisible:!1}),apply(t,n){const r=t.getMeta(up);if(r){const t=Object(o.a)(Object(o.a)({},n),r);return e(up,t),t}return n}},key:up,view:t=>{const r=t.domAtPos.bind(t);return{update:t=>{const i=pp(t.state),a=ap(t.state,t.state.selection),s=a?Object(f.findDomRefAtPos)(a.pos,r):void 0;if(s!==i.element){const e={element:s,activePanelType:s&&(null==a?void 0:a.node.attrs.panelType),activePanelColor:n.UNSAFE_allowCustomPanel?s&&(null==a?void 0:a.node.attrs.panelColor):void 0,activePanelIcon:n.UNSAFE_allowCustomPanel?s&&(null==a?void 0:a.node.attrs.panelIcon):void 0,toolbarVisible:!!s};return hp(e)(t.state,t.dispatch),!0}e(up,Object(o.a)({},i))}}},props:{nodeViews:{panel:dp(n,t)},handleClickOn:Object(Bn.a)(["panel"],e=>!!e.closest("."+qu.a.prefix),{useLongPressSelection:r}),handleDOMEvents:{blur:e=>!!pp(e.state).toolbarVisible&&(hp({element:void 0,activePanelType:void 0,activePanelColor:void 0,activePanelIcon:void 0,toolbarVisible:!1})(e.state,e.dispatch),!0)}}})})(n,t,e)},{name:"panelKeyMap",plugin:()=>Dp()}],pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"infopanel",title:e(_p.a.infoPanel),keywords:["panel"],description:e(_p.a.infoPanelDescription),priority:800,icon:()=>a.a.createElement(mn.p,{label:e(_p.a.infoPanel)}),action:(e,t)=>Bp(Ku.a.INFO,t,e)},{id:"notepanel",title:e(_p.a.notePanel),description:e(_p.a.notePanelDescription),priority:1e3,icon:()=>a.a.createElement(mn.r,{label:e(_p.a.notePanel)}),action:(e,t)=>Bp(Ku.a.NOTE,t,e)},{id:"successpanel",title:e(_p.a.successPanel),description:e(_p.a.successPanelDescription),keywords:["tip"],priority:1e3,icon:()=>a.a.createElement(mn.s,{label:e(_p.a.successPanel)}),action:(e,t)=>Bp(Ku.a.SUCCESS,t,e)},{id:"warningpanel",title:e(_p.a.warningPanel),description:e(_p.a.warningPanelDescription),priority:1e3,icon:()=>a.a.createElement(mn.t,{label:e(_p.a.warningPanel)}),action:(e,t)=>Bp(Ku.a.WARNING,t,e)},{id:"errorpanel",title:e(_p.a.errorPanel),description:e(_p.a.errorPanelDescription),priority:1e3,icon:()=>a.a.createElement(mn.q,{label:e(_p.a.errorPanel)}),action:(e,t)=>Bp(Ku.a.ERROR,t,e)}],floatingToolbar:(t,n,o)=>Lp(t,n,e,o)}}),Fp=n("MhQf"),Up=n("NXWE"),Hp=n("nNC9"),Wp=n("rKbX"),Vp=n("NscV"),Kp=n("OiFN");function qp(){const e={};return Te.bindKeymapWithCommand(Te.escape.common,(e,t)=>!!Object(Vp.c)(e).showContextPanel&&Object(Kp.a)(e,t),e),Object(ln.b)(e)}const Gp=new s.PluginKey("extensionUniqueIdPlugin");var Yp=n("Rl8C"),Xp=n.n(Yp),Jp=n("uvSL"),Zp=n.n(Jp),Qp=n("6T+A"),eh=n.n(Qp),th=n("iOVg"),nh=n.n(th),oh=n("qtq1"),rh=n("zpdP"),ih=n("m/ut");const ah=Object(h.f)({edit:{id:"fabric.editor.edit",defaultMessage:"Edit",description:"Edit the properties for this extension."}}),sh=(e,t,n,o)=>{const r=Object(rh.b)(e,!0),{layout:i}=n;return r&&o&&((e,t)=>{const{schema:{nodes:{bodiedExtension:n,extension:o,layoutSection:r,table:i,expand:a}},selection:s}=e;return!!t&&!(t.node.type!==n&&(t.node.type!==o||Object(f.hasParentNodeOfType)([n,i,a].filter(Boolean))(s))||Object(f.hasParentNodeOfType)([r])(s))})(e,r)?[{type:"button",icon:nh.a,onClick:Object(Kp.e)("default"),selected:"default"===i,title:t(S.a.layoutFixedWidth)},{type:"button",icon:eh.a,onClick:Object(Kp.e)("wide"),selected:"wide"===i,title:t(S.a.layoutWide)},{type:"button",icon:Zp.a,onClick:Object(Kp.e)("full-width"),selected:"full-width"===i,title:t(S.a.layoutFullWidth)}]:[]},ch=(e=!0)=>(t,{formatMessage:n})=>{const o=Object(Vp.c)(t);if(o&&!o.showContextPanel&&o.element){const r=[t.schema.nodes.extension,t.schema.nodes.inlineExtension,t.schema.nodes.bodiedExtension],i=((e,t)=>t.showEditButton?[{type:"button",icon:Xp.a,testId:"extension-toolbar-edit-button",onClick:(e,t)=>{const n=ih.a.getState(e),{updateExtension:o}=Object(Vp.c)(e);return Object(oh.b)(n&&n.macroProvider,o)(e,t),!0},title:e(ah.edit)}]:[])(n,o),a=sh(t,n,o,e);return{title:"Extension floating controls",getDomRef:()=>o.element.parentElement||void 0,nodeType:r,items:[...i,...a,{type:"separator",hidden:0===i.length&&0===a.length},{type:"button",icon:Io.a,appearance:"danger",onClick:Object(Kp.c)(),onMouseEnter:Object(Mo.b)(r,!0),onMouseLeave:Object(Mo.b)(r,!1),title:n(S.a.remove)}]}}};var lh=n("2SyA"),dh=n("D//s"),uh=n("DysG"),ph=ru()({id:"Cn8OX",loader:()=>Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e(2),n.e(3),n.e(1),n.e(6),n.e(23),n.e(39),n.e(59),n.e(66),n.e("@atlaskit-internal-editor-core-config-panel~4134d62c")]).then(n.bind(null,"W2Vd")).then(e=>e.default),loading:uh.a});const hh=e=>t=>{const n=Object(rh.b)(t,!0);if(!n)return;const r=Object(Vp.c)(t),{autoSaveResolve:i,showContextPanel:s,extensionProvider:c,processParametersBefore:l,processParametersAfter:d}=r;if(r&&s&&c&&d){const{extensionType:t,extensionKey:r,parameters:s}=n.node.attrs,[d,u]=Object(lh.b)(r,t),p=l?l(s):s;return a.a.createElement(dh.a,{render:r=>{const l=r._privateGetEditorView();return l?a.a.createElement(ph,{showHeader:!0,closeOnEsc:!0,extensionType:t,extensionKey:d,nodeKey:u,extensionParameters:s,parameters:p,extensionProvider:c,autoSave:e,autoSaveTrigger:i,onChange:async e=>{await async function(e,t,n,r){const{processParametersAfter:i}=Object(Vp.c)(e.state);if(!i)return;const a=Date.now(),{positions:s}=Object(Vp.c)(e.state);await Object(Kp.f)({positions:Object(o.a)(Object(o.a)({},s),{},{[a]:r.pos})})(e.state,e.dispatch);const c=await i(t),{positions:l}=Object(Vp.c)(e.state);if(!l)return;if(!(a in l))return;const{node:d}=r,u=Object(oh.a)(r.node.toJSON().type,e.state.schema,Object(o.a)(Object(o.a)({},d.attrs),{},{parameters:Object(o.a)(Object(o.a)({},n),c)}),d.content);if(!u)return;const p=l[a],h=e.state.tr.replaceWith(p,p+u.nodeSize,u),f=Object(o.a)({},Object(Vp.c)(e.state).positions);delete f[a],await Object(Kp.f)({positions:f})(e.state,e.dispatch),e.dispatch(h)}(l,e,s,n),i&&i()},onCancel:async()=>{e&&await new Promise(e=>{Object(Kp.b)(e)(l.state,l.dispatch)}),Object(Kp.a)(l.state,l.dispatch)}}):null}})}};var fh=(e={})=>({name:"extension",nodes:()=>[{name:"extension",node:e.allowLocalIdGeneration?Fp.b:Fp.a},{name:"bodiedExtension",node:e.allowLocalIdGeneration?Up.b:Up.a},{name:"inlineExtension",node:e.allowLocalIdGeneration?Hp.b:Hp.a}],pmPlugins:()=>[{name:"extension",plugin:({dispatch:t,providerFactory:n,portalProviderAPI:o,eventDispatcher:r})=>{const i=e.extensionHandlers||{};return Object(Wp.a)(t,n,i,o,r,e.useLongPressSelection)}},{name:"extensionKeymap",plugin:qp},{name:"extensionUniqueId",plugin:()=>e.allowLocalIdGeneration?new s.Plugin({appendTransaction:(e,t,n)=>{const r=n.tr;let i=!1;if(e.forEach(e=>{e.docChanged&&Object(Ue.k)(e,(e,t)=>{const{extension:a,bodiedExtension:s,inlineExtension:c}=n.schema.nodes;if(e.type&&(e.type===a||e.type===s||e.type===c)){const n=e.attrs,{localId:a}=n,s=Object(Fn.a)(n,["localId"]);a||(r.setNodeMarkup(t,void 0,Object(o.a)({localId:nd.b.generate()},s)),i=!0)}})}),i)return r},key:Gp}):void 0}],pluginsOptions:{floatingToolbar:ch(e.breakoutEnabled),contextPanel:hh(e.allowAutoSave)}}),mh=n("qzjl"),bh=n("17tV"),gh=n("DGm0"),vh=n("M3Ut");const yh=new s.PluginKey("datePlugin");var Oh=n("FqsR");const Eh=(e,t,n,o=!0)=>(r,i)=>{const{schema:a}=r;let c;c=e?Date.UTC(e.year,e.month-1,e.day).toString():Object(vh.f)();let l=r.tr;t&&Object(bt.a)(r,l,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.DATE,eventType:mt.d.TRACK,attributes:{inputMethod:t}}),n&&Object(bt.a)(r,l,{eventType:mt.d.TRACK,action:mt.a.COMMITTED,actionSubject:mt.b.DATE,attributes:{commitMethod:n,isValid:void 0!==e,isToday:Object(Oh.d)(e)}});const{showDatePickerAt:d}=yh.getState(r);if(!d){const e=a.nodes.date.createChecked({timestamp:c}),t=r.schema.text(" "),n=Be.Fragment.fromArray([e,t]),{from:o,to:d}=r.selection;if(Object(f.canInsert)(l.selection.$from,n))l.replaceWith(o,d,n).setSelection(s.NodeSelection.create(l.doc,o));else{const e=s.NodeSelection.create(l.doc,l.selection.from-l.selection.$anchor.parentOffset-1);l.insert(e.to,n).setSelection(s.NodeSelection.create(l.doc,e.to+1))}return i(l.scrollIntoView().setMeta(yh,{isNew:!0})),!0}return!!r.doc.nodeAt(d)&&(o&&(l=l.setSelection(s.Selection.near(l.doc.resolve(d+2)))),l=l.setNodeMarkup(d,a.nodes.date,{timestamp:c}).setMeta(yh,{showDatePickerAt:d,isNew:!1}).scrollIntoView(),i(l),!0)},wh=()=>(e,t)=>{const{showDatePickerAt:n}=yh.getState(e);if(!t)return!1;return t(n?e.tr.setMeta(yh,{showDatePickerAt:null,isNew:!1}).setSelection(s.Selection.near(e.tr.doc.resolve(n+2))):e.tr.setMeta(yh,{isNew:!1})),!1},Ch=()=>(e,t)=>{const{$from:n}=e.selection,o=e.doc.nodeAt(n.pos);if(o&&o.type.name===e.schema.nodes.date.name){const o=n.pos;t&&t(e.tr.setMeta(yh,{showDatePickerAt:o}).setSelection(s.NodeSelection.create(e.doc,o)))}return!1};var Th=n("Z8D1"),Sh=n("Sjxv");class kh extends a.a.Component{constructor(){super(...arguments),this.handleClick=e=>{e.nativeEvent.stopImmediatePropagation();const{state:t,dispatch:n}=this.props.view;var o;(o=t.selection.from,(e,t)=>(t(e.tr.setMeta(yh,{showDatePickerAt:o})),!0))(t,n)}}render(){const{node:{attrs:{timestamp:e}},view:{state:{schema:t,selection:n}},intl:o}=this.props,r=n.$from.parent,i=r.type===t.nodes.taskItem&&"DONE"!==r.attrs.state,s=i&&Object(vh.a)(e)?"red":void 0;return a.a.createElement("span",{className:Th.a.DATE_WRAPPER,onClick:this.handleClick},a.a.createElement(Sh.Date,{color:s,value:e},i?Object(vh.d)(e,o):Object(vh.c)(e,o)))}}var xh=Object(h.g)(kh);const Ah=e=>{if(e instanceof s.NodeSelection){return"date"===e.node.type.name}return!1},{createPluginState:jh,getPluginState:Ih}=Object(Xt.a)(yh,(function(e,t){if(t.showDatePickerAt===e.showDatePickerAt)return Object(o.a)(Object(o.a)({},e),{},{showDatePickerAt:null});const{showDatePickerAt:n,isNew:r}=e,{showDatePickerAt:i}=t;return n&&i&&n!==i&&r?Object(o.a)(Object(o.a)(Object(o.a)({},e),t),{},{isNew:!1}):Object(o.a)(Object(o.a)({},e),t)}),{mapping:function(e,t){if(!t.showDatePickerAt)return t;const{pos:n,deleted:o}=e.mapping.mapResult(t.showDatePickerAt);return{showDatePickerAt:o?null:n,isNew:t.isNew,isDateEmpty:t.isDateEmpty,focusDateInput:t.focusDateInput}},onSelectionChanged:function(e,t){return Ah(e.selection)?Object(o.a)({},t):{showDatePickerAt:null,isNew:!1,isDateEmpty:!1,focusDateInput:!1}}});var Mh=({dispatch:e,portalProviderAPI:t,eventDispatcher:n})=>new s.Plugin({state:jh(e,{showDatePickerAt:null,isNew:!1,isDateEmpty:!1,focusDateInput:!1}),key:yh,props:{nodeViews:{date:lr.a.fromComponent(xh,t,n)}}});var Nh=function(){const e={};return Te.bindKeymapWithCommand(Te.enter.common,(e,t)=>{const n=Ih(e);return e.selection instanceof s.NodeSelection&&e.selection.node.type===e.schema.nodes.date&&(n.showDatePickerAt?(wh()(e,t),!0):(Ch()(e,t),!0))},e),Te.bindKeymapWithCommand(Te.tab.common,(e,t)=>{const n=Ih(e);return!!(e.selection instanceof s.NodeSelection&&e.selection.node.type===e.schema.nodes.date)&&(!!n.showDatePickerAt&&(((e,t)=>{const{showDatePickerAt:n}=yh.getState(e);null!==n&&(!!t&&t(e.tr.setMeta(yh,{focusDateInput:!0})))})(e,t),!0))},e),Object(ln.b)(e)};const Rh=ru()({id:"H7s+k",loader:()=>Promise.all([n.e("vendors~4134d62c"),n.e(1),n.e(23),n.e(59),n.e("@atlaskit-internal-editor-datepicker~4134d62c")]).then(n.bind(null,"9J3L")),loading:()=>null});var Ph=()=>({name:"date",nodes:()=>[{name:"date",node:gh.a}],pmPlugins:()=>[{name:"date",plugin:e=>(Rh.preload(),Mh(e))},{name:"dateKeymap",plugin:()=>(Rh.preload(),Nh())}],contentComponent({editorView:e,dispatchAnalyticsEvent:t,popupsMountPoint:n,popupsBoundariesElement:o,popupsScrollableElement:r}){const{state:i,dispatch:s}=e,c=e.domAtPos.bind(e);return a.a.createElement(d.a,{plugins:{datePlugin:yh,editorDisabledPlugin:nl.b},render:({editorDisabledPlugin:l,datePlugin:d})=>{const{showDatePickerAt:u,isNew:p,focusDateInput:h}=d;if(!u||(l||{}).editorDisabled)return null;const m=Object(f.findDomRefAtPos)(u,c),b=Object(jn.b)(i),{keyboardAccessibleDatepicker:g}=b;return a.a.createElement(Rh,{mountTo:n,boundariesElement:o,scrollableElement:r,key:u,showTextField:g,element:m,isNew:p,autoFocus:h,onDelete:()=>{((e,t)=>{const{showDatePickerAt:n}=yh.getState(e);null!==n&&t(e.tr.delete(n,n+1).setMeta(yh,{showDatePickerAt:null,isNew:!1}))})(e.state,s),e.focus()},onSelect:(t,n)=>{null!=t&&(Eh(t,void 0,n)(e.state,s),e.focus())},onTextChanged:t=>{Eh(t,void 0,void 0,!1)(e.state,s)},closeDatePicker:()=>{wh()(e.state,s),e.focus()},closeDatePickerWithAnalytics:({date:t})=>{(({date:e})=>Object(bt.d)({eventType:mt.d.TRACK,action:mt.a.COMMITTED,actionSubject:mt.b.DATE,attributes:{commitMethod:mt.e.BLUR,isValid:void 0!==e,isToday:Object(Oh.d)(e)}})(wh()))({date:t})(e.state,s),e.focus()},dispatchAnalyticsEvent:t})}})},pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"date",title:e(In.a.date),description:e(In.a.dateDescription),priority:800,keywords:["calendar","day","time","today","/"],keyshortcut:"//",icon:()=>a.a.createElement(mn.c,{label:e(In.a.date)}),action(e,t){const n=((e,t)=>{const n=e(t.schema.nodes.date.createChecked({timestamp:Object(vh.f)()}),{selectInlineNode:!0}),o={showDatePickerAt:n.selection.from,isNew:!0,isDateEmpty:!1,focusDateInput:!1};return n.setMeta(yh,o)})(e,t);return Object(bt.a)(t,n,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.DATE,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.QUICK_INSERT}}),n}}]}}),Lh=n("49w7"),Dh=n("Rw0+"),_h=n("aAmv");const Bh=e=>e.nodeType===Node.TEXT_NODE?e.parentNode:e,$h=(e,t,n)=>o=>{if(!e)return o;const r=(e=>parseFloat(window.getComputedStyle(e,void 0).lineHeight||""))(Bh(t)),i=((e,t,n)=>{const{left:o,top:r,height:i}=t.getBoundingClientRect();return{left:e.left-o,right:e.right-o,top:e.top-(r-n)+t.scrollTop,bottom:i-(e.top-(r-n)-t.scrollTop)}})(n(),e,r);return{left:o.left?i.left:void 0,right:o.right?i.right:void 0,top:o.top?i.top:void 0,bottom:o.bottom?i.bottom:void 0}},zh=E.default.div`
  border-radius: ${Object(te.c)()}px;
  ${_e.k} display: flex;
  align-items: center;
  box-sizing: border-box;
  padding: 4px 8px;
  background-color: ${p.N0};
  ${({height:e})=>e?E.css`
          height: ${e}px;
        `:""};
`;class Fh extends i.PureComponent{render(){const{containerRef:e,children:t,target:n,offset:o,fitWidth:r,fitHeight:i=40,onPositionCalculated:s,popupsMountPoint:c,popupsBoundariesElement:l,className:d,alignX:u,alignY:p,zIndex:h}=this.props;return n?a.a.createElement(m.a,{alignX:u,alignY:p,target:n,zIndex:h,mountTo:c,boundariesElement:l,offset:o,fitWidth:r,fitHeight:i,onPositionCalculated:s},a.a.createElement(zh,{height:i,className:d,innerRef:e},t)):null}}const Uh=Object(h.f)({placeholderTextPlaceholder:{id:"fabric.editor.placeholderTextPlaceholder",defaultMessage:"Add placeholder text",description:""}});class Hh extends a.a.Component{constructor(){super(...arguments),this.handleSubmit=e=>{e?(this.props.insertPlaceholder(e),this.props.setFocusInEditor()):this.props.hidePlaceholderFloatingToolbar()},this.handleBlur=()=>{this.props.hidePlaceholderFloatingToolbar()}}render(){const{getNodeFromPos:e,showInsertPanelAt:t,editorViewDOM:n,popupsMountPoint:o,getFixedCoordinatesFromPos:r,popupsBoundariesElement:i,intl:{formatMessage:s}}=this.props,c=e(t),l=((e,t)=>t?t.offsetParent:e.offsetParent)(n,o),d=$h(l,c,()=>r(t));return a.a.createElement(Fh,{target:Bh(c),onPositionCalculated:d,popupsMountPoint:o,popupsBoundariesElement:i,fitHeight:32,offset:[0,12]},a.a.createElement(_h.a,{placeholder:s(Uh.placeholderTextPlaceholder),onSubmit:this.handleSubmit,onBlur:this.handleBlur,autoFocus:!0,width:300}))}}var Wh=Object(h.g)(Hh);const Vh=new s.PluginKey("placeholderTextPlugin");class Kh{constructor(e,t,n){this.node=e,this.view=t,this.getPos=n;const o=Be.DOMSerializer.fromSchema(this.view.state.schema);this.dom=o.serializeNode(this.node)}ignoreMutation(e){const{view:t,dom:n,node:o}=this,r=n.textContent||"",i=o.attrs.text;if("characterData"===e.type&&r!==i&&r.includes(i)&&"function"==typeof this.getPos){const e=this.getPos(),n=e+this.node.nodeSize,o=r.replace(i,"");let a=t.state.tr.replaceRangeWith(e,n,t.state.schema.text(o));a=a.setSelection(s.TextSelection.create(a.doc,n,n)),t.dispatch(a)}return"selection"!==e.type}}var qh=e=>({name:"placeholderText",nodes:()=>[{name:"placeholder",node:Lh.a}],pmPlugins:()=>[{name:"placeholderText",plugin:({dispatch:t})=>function(e,t){const n=!!t.allowInserting;return new s.Plugin({key:Vh,state:{init:()=>({showInsertPanelAt:null,allowInserting:n}),apply:(t,o)=>{const r=t.getMeta(Vh);if(r&&void 0!==r.showInsertPanelAt){const t={showInsertPanelAt:r.showInsertPanelAt,allowInserting:n};return e(Vh,t),t}if(o.showInsertPanelAt){const r={showInsertPanelAt:t.mapping.map(o.showInsertPanelAt),allowInserting:n};return e(Vh,r),r}return o}},appendTransaction(e,t,n){if(e.some(e=>e.docChanged)){const e=t.selection.$head.nodeAfter===n.selection.$head.nodeAfter,o=n.selection.$head.nodeAfter,r=n.selection.$head.pos,i=n.schema.nodes.placeholder;if(o&&o.type===i&&e){if(t.selection.$head.pos<n.selection.$head.pos&&!Object(Ue.i)(n.selection.$head.nodeBefore)){const{$from:e,$to:t}=s.NodeSelection.create(n.doc,r);return n.tr.deleteRange(e.pos,t.pos)}}}return!Vh.getState(t).showInsertPanelAt&&Vh.getState(n).showInsertPanelAt?n.tr.setSelection(new Dh.a(n.selection.$from)):Vh.getState(t).showInsertPanelAt&&!Vh.getState(n).showInsertPanelAt&&n.selection instanceof Dh.a?n.tr.setSelection(new s.TextSelection(n.selection.$from)):void 0},props:{nodeViews:{placeholder:(e,t,n)=>new Kh(e,t,n)}}})}(t,e)}],contentComponent({editorView:e,popupsMountPoint:t,popupsBoundariesElement:n}){const o=t=>(e=>(t,n)=>(n(t.tr.replaceSelectionWith(t.schema.nodes.placeholder.createChecked({text:e})).setMeta(Vh,{showInsertPanelAt:null}).scrollIntoView()),!0))(t)(e.state,e.dispatch),r=()=>{return t=e.state,(0,e.dispatch)(t.tr.setMeta(Vh,{showInsertPanelAt:null})),!0;var t},i=t=>e.domAtPos(t).node,s=t=>e.coordsAtPos(t),c=()=>e.focus();return a.a.createElement(d.a,{plugins:{placeholderTextState:Vh},render:({placeholderTextState:l={}})=>l.showInsertPanelAt?a.a.createElement(Wh,{editorViewDOM:e.dom,popupsMountPoint:t,popupsBoundariesElement:n,getFixedCoordinatesFromPos:s,getNodeFromPos:i,hidePlaceholderFloatingToolbar:r,showInsertPanelAt:l.showInsertPanelAt,insertPlaceholder:o,setFocusInEditor:c}):null})}}),Gh=n("NOiQ"),Yh=n("h6y6"),Xh=n("QADc");const Jh=new s.PluginKey("layout"),Zh=["two_equal","two_left_sidebar","two_right_sidebar"],Qh=["three_equal","three_with_sidebars"],ef=e=>{switch(e){case"two_equal":return[50,50];case"three_equal":return[33.33,33.33,33.33];case"two_left_sidebar":return[33.33,66.66];case"two_right_sidebar":return[66.66,33.33];case"three_with_sidebars":return[25,50,25]}},tf=e=>{switch(Object(Je.c)(e,e=>e.attrs.width).join(",")){case"33.33,33.33,33.33":return"three_equal";case"25,50,25":return"three_with_sidebars";case"50,50":return"two_equal";case"33.33,66.66":return"two_left_sidebar";case"66.66,33.33":return"two_right_sidebar"}},nf=(e,t)=>e&&tf(e)&&tf(e)||t,of=e=>{const{layoutSection:t,layoutColumn:n}=e.schema.nodes,o=Be.Fragment.fromArray([n.createAndFill({width:50}),n.createAndFill({width:50})]);return t.createAndFill(void 0,o)},rf=(e,t)=>(t&&t(Object(f.safeInsert)(of(e))(e.tr)),!0);function af(e,t,n){const{layoutColumn:r}=t.nodes,i=n.map(e=>Number(e.toFixed(2)));return Object(Je.a)(e.content,(e,t)=>r.create(Object(o.a)(Object(o.a)({},e.attrs),{},{width:i[t]}),e.content,e.marks))}function sf(e,t,n,o){let r=function(e,t,n,o){const r=e.tr,i=n+t.nodeSize-1,a=t.childCount;if(Zh.indexOf(o)>=0&&3===a){const e=t.content.child(2),n=i-e.nodeSize;Object(Ue.f)(e)?r.replaceRange(r.mapping.map(n-1),r.mapping.map(i),Be.Slice.empty):r.replaceRange(r.mapping.map(n-1),r.mapping.map(n+1),Be.Slice.empty)}else Qh.indexOf(o)>=0&&2===a&&r.replaceWith(r.mapping.map(i),r.mapping.map(i),e.schema.nodes.layoutColumn.createAndFill());return r}(e,t,n,o);const i=r.selection;r=function(e,t,n,o){const r=t.doc.nodeAt(n);return r?t.replaceWith(n+1,n+r.nodeSize-1,af(r,e.schema,ef(o))):t}(e,r,n,o);const a=r.doc.resolve(i.$from.pos);return r.setSelection(e.selection instanceof s.NodeSelection?new s.NodeSelection(a):new s.TextSelection(a))}function cf(e){return!tf(e)}function lf(e,t,n){if(e.type===n.nodes.layoutSection){if(!cf(e))return;const o=2===e.childCount?"two_equal":"three_equal",r=af(e,n,ef(o));return{from:t+1,to:t+e.nodeSize-1,slice:new Be.Slice(r,0,0)}}}const df=(e,t)=>{const{pos:n,selectedLayout:o}=Jh.getState(e);if(null!==n){const r=e.doc.nodeAt(n);if(t){let i=e.tr.delete(n,n+r.nodeSize);i=Object(bt.a)(e,i,{action:mt.a.DELETED,actionSubject:mt.b.LAYOUT,attributes:{layout:uf(o)},eventType:mt.d.TRACK}),t(i)}return!0}return!1},uf=e=>{switch(e){case"two_equal":return Xh.a.TWO_COLS_EQUAL;case"three_equal":return Xh.a.THREE_COLS_EQUAL;case"two_left_sidebar":return Xh.a.LEFT_SIDEBAR;case"two_right_sidebar":return Xh.a.RIGHT_SIDEBAR;case"three_with_sidebars":return Xh.a.THREE_WITH_SIDEBARS}},pf=e=>{const t=Object(f.findParentNodeOfType)(e.schema.nodes.layoutColumn)(e.selection);if(t){return e.selection.from<t.pos+t.node.nodeSize}return!1},hf=(e,t)=>{const{selection:n}=e,{schema:{nodes:{layoutColumn:o,layoutSection:r}}}=e,i=Object(f.findParentNodeOfType)(r)(n),a=Object(f.findParentNodeOfType)(o)(n);if(a.node!==i.node.lastChild){const n=e.doc.resolve(a.pos+a.node.nodeSize),o=s.TextSelection.findFrom(n,1);t&&t(e.tr.setSelection(o))}return!0};var ff=e=>new s.Plugin({key:Jh,state:{init:(t,n)=>((e,t)=>{const n=Object(f.findParentNodeOfType)(t.schema.nodes.layoutSection)(t.selection),o=e.allowBreakout||!1,r=e.UNSAFE_addSidebarLayouts||!1;return{pos:n?n.pos:null,allowBreakout:o,addSidebarLayouts:r,selectedLayout:nf(n&&n.node,"two_equal")}})(e,n),apply:(e,t,n,r)=>{if(e.docChanged||e.selectionSet){const{schema:{nodes:{layoutSection:e}},selection:n}=r,i=Object(f.findParentNodeOfType)(e)(n)||Object(f.findSelectedNodeOfType)([e])(n);return Object(o.a)(Object(o.a)({},t),{},{pos:i?i.pos:null,selectedLayout:nf(i&&i.node,t.selectedLayout)})}return t}},props:{decorations(e){const t=Jh.getState(e);if(null!==t.pos)return Yt.b.create(e.doc,(n=t.pos,o=e.doc.nodeAt(t.pos),[Yt.a.node(n,n+o.nodeSize,{class:"selected"})]));var n,o},handleKeyDown:Object(ln.a)({Tab:Object(He.b)(pf,hf)}),handleClickOn:Object(Bn.a)(["layoutColumn"],e=>e.hasAttribute("data-layout-section")||e.hasAttribute("data-layout-column"),{useLongPressSelection:e.useLongPressSelection||!1,getNodeSelectionPos:(e,t)=>e.doc.resolve(t).before()})},appendTransaction:(e,t,n)=>{let o=[];if(e.forEach(e=>{if(o.forEach(t=>({from:e.mapping.map(t.from),to:e.mapping.map(t.to),slice:t.slice})),!e.docChanged)return;const t=((e,t)=>{const{layoutSection:n}=t.schema.nodes;let o;const r=Object(Ue.d)(e);if(!r)return;e.doc.nodesBetween(r.from,r.to,(e,r)=>e.type!==n||(cf(e)&&(o=lf(e,r,t.schema)),!1));const i=e.doc.resolve(r.to);if(i.depth>0){const r=i.after(),a=e.doc.nodeAt(r);a&&a.type===n&&cf(a)&&(o=lf(a,r,t.schema))}return o})(e,n);t&&o.push(t)}),o.length){let e=n.tr;const t=n.selection.toJSON();if(o.forEach(t=>{e.replaceRange(t.from,t.to,t.slice)}),e=(e=>{const{pos:t,selectedLayout:n}=Jh.getState(e);if(null!==t&&n){const o=e.doc.nodeAt(t);if(o&&o.childCount!==ef(n).length)return sf(e,o,t,n)}})(n)||e,e.docChanged)return e.setSelection(s.Selection.fromJSON(e.doc,t)),e.setMeta("addToHistory",!1),e}}}),mf=n("NgEv"),bf=n.n(mf),gf=n("JWdr"),vf=n.n(gf),yf=n("edGS"),Of=n.n(yf),Ef=n("HRp0"),wf=n.n(Ef),Cf=n("HsCG"),Tf=n.n(Cf);const Sf=Object(h.f)({twoColumns:{id:"fabric.editor.twoColumns",defaultMessage:"Two columns",description:"Layout with two columns of equal width"},threeColumns:{id:"fabric.editor.threeColumns",defaultMessage:"Three columns",description:"Layout with three columns of equal width"},rightSidebar:{id:"fabric.editor.rightSidebar",defaultMessage:"Right sidebar",description:"Layout with two columns, left column is 2/3 and right is 1/3 of page"},leftSidebar:{id:"fabric.editor.leftSidebar",defaultMessage:"Left sidebar",description:"Layout with two columns, left column is 1/3 and right is 2/3 of page"},threeColumnsWithSidebars:{id:"fabric.editor.threeColumnsWithSidebars",defaultMessage:"Three columns with sidebars",description:"Layout with 3 columns laid out as 25% - 50% - 25%"}}),kf=[{type:"two_equal",title:Sf.twoColumns,icon:bf.a},{type:"three_equal",title:Sf.threeColumns,icon:vf.a}],xf=[{type:"two_right_sidebar",title:Sf.rightSidebar,icon:wf.a},{type:"two_left_sidebar",title:Sf.leftSidebar,icon:Of.a},{type:"three_with_sidebars",title:Sf.threeColumnsWithSidebars,icon:Tf.a}],Af=(e,t,n)=>{return{type:"button",icon:t.icon,testId:t.title.id,title:e.formatMessage(t.title),onClick:(o=t.type,(e,t)=>{const{pos:n,selectedLayout:r}=Jh.getState(e);if(r===o||null===n)return!1;const i=e.doc.nodeAt(n);if(!i)return!1;let a=sf(e,i,n,o);return!!a&&(a=Object(bt.a)(e,a,{action:mt.a.CHANGED_LAYOUT,actionSubject:mt.b.LAYOUT,attributes:{previousLayout:uf(r),newLayout:uf(o)},eventType:mt.d.TRACK}),a.setMeta("scrollIntoView",!1),t&&t(a),!0)}),selected:!!n&&n===t.type};var o};var jf=(e={})=>({name:"layout",nodes:()=>[{name:"layoutSection",node:Gh.a},{name:"layoutColumn",node:Yh.a}],pmPlugins:()=>[{name:"layout",plugin:()=>ff(e)}],pluginsOptions:{floatingToolbar(e,t){const{pos:n,allowBreakout:o,addSidebarLayouts:r}=Jh.getState(e);if(null!==n)return((e,t,n,o,r)=>{const i=e.doc.nodeAt(n);if(i){const o=tf(i),a={type:"separator"},s=e.schema.nodes.layoutSection,c={type:"button",appearance:"danger",icon:Io.a,testId:S.a.remove.id,title:t.formatMessage(S.a.remove),onClick:df,onMouseEnter:Object(Mo.b)(s,!0),onMouseLeave:Object(Mo.b)(s,!1)};return{title:"Layout floating controls",getDomRef:e=>Object(f.findDomRefAtPos)(n,e.domAtPos.bind(e)),nodeType:s,items:[...kf.map(e=>Af(t,e,o)),...r?xf.map(e=>Af(t,e,o)):[],a,c]}}})(e,t,n,0,r)},quickInsert:({formatMessage:e})=>[{id:"layout",title:e(In.a.columns),description:e(In.a.columnsDescription),keywords:["column","section"],priority:1100,icon:()=>a.a.createElement(mn.k,{label:e(In.a.columns)}),action(e,t){const n=e(of(t));return Object(bt.a)(t,n,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.LAYOUT,attributes:{inputMethod:mt.e.QUICK_INSERT},eventType:mt.d.TRACK})}}]}}),If=n("DyvO"),Mf=n("UnAI"),Nf=n("vRWe");var Rf=(e,t)=>{switch(t.type){case"QUEUE":return((e,t)=>Object(o.a)(Object(o.a)({},e),{},{requests:e.requests.concat(t.requests)}))(e,t);case"SET_PROVIDER":return((e,t)=>Object(o.a)(Object(o.a)({},e),{},{provider:t.provider}))(e,t);case"RESOLVE":return((e,t)=>{const n=e.requests.reduce((e,n)=>(n.url!==t.url&&e.push(n),e),[]);return Object(o.a)(Object(o.a)({},e),{},{requests:n})})(e,t);case"REGISTER":return((e,t)=>Object(o.a)(Object(o.a)({},e),{},{cards:e.cards.filter(e=>e.pos!==t.info.pos).concat(t.info)}))(e,t);case"SHOW_LINK_TOOLBAR":case"HIDE_LINK_TOOLBAR":return((e,t)=>Object(o.a)(Object(o.a)({},e),{},{showLinkingToolbar:"SHOW_LINK_TOOLBAR"===t.type}))(e,t)}},Pf=n("WXVP"),Lf=n("QVO1");const Df=(e,t)=>n=>(Object(Lf.e)(t.url,n,t.analyticsAction)(e.state,e.dispatch),n),_f=(e,t)=>()=>{e.dispatch(Object(Pf.d)(t.url)(e.state.tr))},Bf=e=>fa.a.getState(e),$f=(e,t)=>e.url===t.url&&e.pos===t.pos;var zf=n("bU5Q"),Ff=n("iXHT"),Uf=n("oSff");function Hf(e,t){var n;return(n=class extends a.a.Component{constructor(){super(...arguments),this.state={isError:!1}}render(){const{url:n}=Object(Uf.d)(this.props.node);if(n&&!Object(Ff.a)(n))return a.a.createElement(t,null);if(this.state.isError)return n?a.a.createElement("a",{href:n,onClick:e=>{e.preventDefault()}},n):a.a.createElement(t,null);const o=this.context.contextAdapter?this.context.contextAdapter.card:void 0;return a.a.createElement(e,Object.assign({cardContext:o},this.props))}componentDidCatch(e){const t=e;t.kind&&t.kind,this.setState({isError:!0})}}).contextTypes={contextAdapter:fr.a.object},n}var Wf=n("mSFF"),Vf=n("ibvy"),Kf=n("zf6/"),qf=n("J64l"),Gf=n("MhaC");const Yf=E.default.div`
  & > div {
    ${Gf.a};
    position: relative;
    clear: both;

    > div {
      position: absolute;
      height: 100%;
      width: 100%;
    }
  }

  & > div::after {
    content: '';
    display: block;
    padding-bottom: ${e=>e.ratio+"%"};

    /* Fixes extra padding problem in Firefox */
    font-size: 0;
    line-height: 0;
  }
`;var Xf=n("xGpb"),Jf=n("+kAP"),Zf=n("0rke");class Qf extends a.a.Component{constructor(){super(...arguments),this.state={offsetLeft:this.calcOffsetLeft()},this.calcNewSize=(e,t)=>{const{layout:n,view:{state:o}}=this.props,r=100*Object(qf.b)(e,this.props.lineLength);this.setState({resizedPctWidth:r});let i=Object(f.hasParentNodeOfType)(o.schema.nodes.table)(o.selection)?n:this.calcUnwrappedLayout(r,e);return r<=100?(!this.wrappedLayout||t&&100===r||(i=n),{width:r,layout:i}):{width:this.props.pctWidth||null,layout:i}},this.calcUnwrappedLayout=(e,t)=>e<=100?"center":t<=je.X?"wide":"full-width",this.calcColumnLeftOffset=()=>{const{offsetLeft:e}=this.state;return this.insideInlineLike?Object(qf.a)(e,this.props.lineLength,this.props.gridSize):0},this.calcPxWidth=e=>{const{width:t,height:n,layout:o,pctWidth:r,lineLength:i,containerWidth:a,fullWidthMode:s,getPos:c,view:{state:l}}=this.props,{resizedPctWidth:d}=this.state,u="function"==typeof c?c():void 0;return Object(Zf.a)({origWidth:t,origHeight:n,pctWidth:r,state:l,containerWidth:{width:a,lineLength:i},isFullWidthModeEnabled:s,layout:e||o,pos:u,resizedPctWidth:d})},this.highlights=(e,t)=>{const n=Object(Jf.c)(e,t),{layoutColumn:o,table:r,expand:i,nestedExpand:a}=this.props.view.state.schema.nodes;if(this.$pos&&Object(f.findParentNodeOfTypeClosestToPos)(this.$pos,[o,r,i,a].filter(Boolean)))return[];if(n>je.X)return["full-width"];const{layout:s,lineLength:c,gridSize:l}=this.props,d=Object(qf.a)(n,c,l),u=Math.round(d),p=[];return"wrap-left"===s||"align-start"===s?p.push(0,u):"wrap-right"===s||"align-end"===s?p.push(l,l-u):this.insideInlineLike?p.push(Math.round(d+this.calcColumnLeftOffset())):p.push(Math.floor((l-u)/2),Math.ceil((l+u)/2)),p}}componentDidUpdate(){const e=this.calcOffsetLeft();e!==this.state.offsetLeft&&e>=0&&this.setState({offsetLeft:e})}get wrappedLayout(){return Wf.e.indexOf(this.props.layout)>-1}UNSAFE_componentWillReceiveProps(e){this.props.layout!==e.layout&&this.checkLayout(this.props.layout,e.layout)}checkLayout(e,t){const{resizedPctWidth:n}=this.state;if(Wf.e.indexOf(e)>-1&&"center"===t&&n){const e=this.calcUnwrappedLayout(n,this.calcPxWidth(t));this.props.updateSize(n,e)}}get $pos(){if("function"!=typeof this.props.getPos)return null;const e=this.props.getPos();return Number.isNaN(e)||"number"!=typeof e?null:this.props.view.state.doc.resolve(e)}get gridWidth(){const{gridSize:e}=this.props;return this.wrappedLayout||this.insideInlineLike?e:e/2}calcOffsetLeft(){let e=0;if(this.wrapper&&this.insideInlineLike){const t=this.wrapper.getBoundingClientRect(),n=this.props.view.dom.getBoundingClientRect();e=t.left-n.left}return e}calcSnapPoints(){const{offsetLeft:e}=this.state,{containerWidth:t,lineLength:n}=this.props,o=[];for(let s=0;s<this.gridWidth;s++)o.push(Object(qf.c)(s,n,this.gridWidth)-e);o.push(n-e);const r=Object(qf.c)(this.wrappedLayout||this.insideInlineLike?1:2,n,this.props.gridSize);let i=o.filter(e=>e>=r);const a=this.$pos;if(!a)return i;if("doc"===a.parent.type.name){i.push(je.X);const e=t-je.d;e>je.X&&i.push(e)}return i}get insideInlineLike(){const e=this.$pos;if(!e)return!1;const{listItem:t}=this.props.view.state.schema.nodes;return!!Object(f.findParentNodeOfTypeClosestToPos)(e,[t])}render(){const{width:e,height:t,layout:n,pctWidth:o,containerWidth:r,fullWidthMode:i,children:s}=this.props,c=this.calcPxWidth(),l=t/e*c,d=c,u={};return Jf.a.forEach(e=>{const t="left"===e?"right":"left";u[e]=["full-width","wide","center"].concat("wrap-"+t).concat("align-"+Jf.b[t]).indexOf(n)>-1,"left"===e&&this.insideInlineLike&&(u[e]=!1)}),a.a.createElement(Yf,{ratio:(l/d*100).toFixed(3),layout:n,isResized:!!o,containerWidth:r||e,innerRef:e=>this.wrapper=e,fullWidthMode:i},a.a.createElement(Xf.a,Object.assign({},this.props,{width:d,height:l,enable:u,calcNewSize:this.calcNewSize,snapPoints:this.calcSnapPoints(),scaleFactor:this.wrappedLayout||this.insideInlineLike?1:2,highlights:this.highlights,innerPadding:12,nodeType:"embed"}),s))}}var em=n("fPje");class tm extends a.a.PureComponent{constructor(){super(...arguments),this.onClick=()=>{},this.state={hasPreview:!0},this.onResolve=e=>{const{getPos:t,view:n}=this.props;if(!t||"boolean"==typeof t)return;const{title:o,url:r}=e;Object(xs.a)(()=>n.dispatch(Object(Pf.c)({title:o,url:r,pos:t()})(n.state.tr)))();try{const e=this.context.contextAdapter?this.context.contextAdapter.card:void 0;e&&e.value.extractors.getPreview(r,this.props.platform)||this.setState({hasPreview:!1})}catch(i){}},this.updateSize=(e,t)=>{const{state:n,dispatch:r}=this.props.view,i="function"==typeof this.props.getPos&&this.props.getPos();if("number"!=typeof i)return;const a=n.tr.setNodeMarkup(i,void 0,Object(o.a)(Object(o.a)({},this.props.node.attrs),{},{width:e,layout:t}));return a.setMeta("scrollIntoView",!1),r(a),!0},this.getLineLength=(e,t,n)=>{if("number"==typeof t&&Object(em.d)(e,t)){const n=e.state.doc.resolve(t),o=e.nodeDOM(n.pos);if(n.nodeAfter&&em.c.indexOf(n.nodeAfter.attrs.layout)>-1&&o&&o.parentElement)return o.parentElement.offsetWidth;if(o instanceof HTMLElement)return o.offsetWidth}return n}}UNSAFE_componentWillMount(){const{view:e}=this.props,t=Object(Gc.c)(e.dom);this.scrollContainer=t||void 0}render(){const{node:e,cardContext:t,platform:n,allowResizing:o,fullWidthMode:r,view:i,getPos:s,dispatchAnalyticsEvent:c}=this.props;let{url:l,width:p,layout:h,originalHeight:f,originalWidth:m}=e.attrs;m&&f||(m=je.b,f=je.a);const b={layout:h,width:m,height:f,pctWidth:p,fullWidthMode:r},{hasPreview:g}=this.state,v=a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{editorView:i,plugins:{widthState:u.b},render:({widthState:e})=>{const t="function"==typeof s&&s(),r=this.getLineLength(i,t,e&&e.lineLength),d=Object(em.d)(i,t)?r:e.width,u=a.a.createElement(zf.a,{url:l,appearance:"embed",onClick:this.onClick,onResolve:this.onResolve,showActions:"web"===n,isFrameVisible:!0,inheritDimensions:!0,platform:n,container:this.scrollContainer});return o&&g?a.a.createElement(Qf,Object.assign({},b,{view:this.props.view,getPos:s,lineLength:r,gridSize:12,containerWidth:d,displayGrid:Object(Lo.a)(this.props.eventDispatcher),updateSize:this.updateSize,dispatchAnalyticsEvent:c}),u):a.a.createElement(Wf.c,Object.assign({},b,{nodeType:"embedCard",hasFallbackContainer:g,lineLength:r}),u)}}));return a.a.createElement(a.a.Fragment,null,t&&t.value?a.a.createElement(t.Provider,{value:t.value},v):null)}}tm.contextTypes={contextAdapter:fr.a.object};const nm=Hf(tm,Vf.a);class om extends Kf.a{viewShouldUpdate(e){return this.node.attrs!==e.attrs||super.viewShouldUpdate(e)}createDomRef(){const e=document.createElement("div");return ys.a.chrome&&"mobile"!==this.reactComponentProps.platform&&(e.contentEditable="true",e.setAttribute("spellcheck","false")),e}render(){const{eventDispatcher:e,allowResizing:t,platform:n,fullWidthMode:o,dispatchAnalyticsEvent:r}=this.reactComponentProps;return a.a.createElement(nm,{node:this.node,view:this.view,eventDispatcher:e,getPos:this.getPos,allowResizing:t,platform:n,fullWidthMode:o,dispatchAnalyticsEvent:r})}}class rm extends a.a.PureComponent{constructor(){super(...arguments),this.onClick=()=>{},this.onResolve=e=>{const{getPos:t,view:n}=this.props;if(!t||"boolean"==typeof t)return;const{title:o,url:r}=e;Object(xs.a)(()=>n.dispatch(Object(Pf.c)({title:o,url:r,pos:t()})(n.state.tr)))()},this.gapCursorSpan=()=>{if(!(ys.a.ie&&ys.a.ie_version<79))return a.a.createElement("span",{contentEditable:!0})}}UNSAFE_componentWillMount(){const{view:e}=this.props,t=Object(Gc.c)(e.dom);this.scrollContainer=t||void 0}render(){const{node:e,cardContext:t,platform:n}=this.props,{url:o,data:r}=e.attrs,i=a.a.createElement(a.a.Fragment,null,a.a.createElement(zf.a,{key:o,url:o,data:r,container:this.scrollContainer,appearance:"block",onClick:this.onClick,onResolve:this.onResolve,showActions:"web"===n,platform:n}),this.gapCursorSpan());return a.a.createElement("div",null,t&&t.value?a.a.createElement(t.Provider,{value:t.value},i):r?i:null)}}rm.contextTypes={contextAdapter:fr.a.object};const im=Hf(rm,Vf.a);class am extends lr.a{createDomRef(){const e=document.createElement("div");return ys.a.chrome&&"mobile"!==this.reactComponentProps.platform&&(e.contentEditable="true",e.setAttribute("spellcheck","false")),e}render(){return a.a.createElement(im,{node:this.node,view:this.view,getPos:this.getPos,platform:this.reactComponentProps.platform})}}var sm=n("T6cy");class cm extends a.a.PureComponent{constructor(){super(...arguments),this.onClick=()=>{},this.onResolve=e=>{const{getPos:t,view:n}=this.props;if(!t||"boolean"==typeof t)return;const{title:o,url:r}=e;Object(xs.a)(()=>n.dispatch(Object(Pf.c)({title:o,url:r,pos:t()})(n.state.tr)))()}}UNSAFE_componentWillMount(){const{view:e}=this.props,t=Object(Gc.c)(e.dom);this.scrollContainer=t||void 0}render(){const{node:e,cardContext:t}=this.props,{url:n,data:o}=e.attrs,r=a.a.createElement("span",null,a.a.createElement("span",null,ar.a),a.a.createElement("span",{className:"card"},a.a.createElement(zf.a,{key:n,url:n,data:o,appearance:"inline",onClick:this.onClick,container:this.scrollContainer,onResolve:this.onResolve})));return t&&t.value?a.a.createElement(t.Provider,{value:t.value},r):o?r:null}}cm.contextTypes={contextAdapter:fr.a.object};const lm=Hf(cm,sm.a);class dm extends lr.a{render(){return a.a.createElement(lm,{node:this.node,view:this.view,getPos:this.getPos})}}const um=(e,t,n)=>({portalProviderAPI:r,eventDispatcher:i,providerFactory:a,dispatchAnalyticsEvent:c})=>{const l={eventDispatcher:i,providerFactory:a,platform:e,allowResizing:t,fullWidthMode:n,dispatchAnalyticsEvent:c};return new s.Plugin({state:{init:()=>({requests:[],provider:null,cards:[],showLinkingToolbar:!1}),apply(e,t){const n=((e,t)=>Object(o.a)(Object(o.a)({},e),{},{requests:e.requests.map(e=>Object(o.a)(Object(o.a)({},e),{},{pos:t.mapping.map(e.pos)})),cards:e.cards.map(e=>Object(o.a)(Object(o.a)({},e),{},{pos:t.mapping.map(e.pos)}))}))(t,e),r=e.getMeta(fa.a);if(r){return Rf(n,r)}return n}},view(e){const t={},n=(t,n)=>((e,t,n)=>{t&&t.then(e=>{const{state:t,dispatch:o}=n;o(Object(Pf.e)(e)(t.tr))})})(0,n,e),o=[];return a.subscribe("cardProvider",n),{update(e,n){const r=Bf(e.state),i=Bf(n);if(r&&r.provider){const n=((e,t)=>e?t.requests.filter(t=>!e.requests.find(e=>$f(e,t))):t.requests)(i,r),{provider:a}=r;n.forEach(n=>{const r=Object(xs.a)(()=>((e,t,n,o)=>{const r=n.resolve(o.url,o.appearance).then(e=>(delete t[o.url],e)).then(Df(e,o),_f(e,o));return t[o.url]=r,r})(e,t,a,n));o.push(r.cancel),r()})}},destroy(){Object.keys(t).forEach(e=>Promise.reject(t[e])),o.forEach(e=>e()),a.unsubscribe("cardProvider",n)}}},props:{nodeViews:{inlineCard:(e,t,n)=>new dm(e,t,n,r,i,l,void 0,!0).init(),blockCard:(e,t,n)=>new am(e,t,n,r,i,l,void 0,!0).init(),embedCard:(e,t,n)=>new om(e,t,n,r,i,l,void 0,!0).init()}},key:fa.a})};var pm=n("ZTTl"),hm=n.n(pm),fm=n("EFtY"),mm=n.n(fm),bm=n("fVkN"),gm=n("DM95"),vm=n("wMvT"),ym=n.n(vm),Om=n("hegZ"),Em=n.n(Om),wm=n("MAnY"),Cm=n.n(wm),Tm=n("FcLh"),Sm=n("DR7P"),km=n("EruW"),xm=n("4SN/");var Am=n("RNvQ"),jm=n.n(Am),Im=n("VsfX"),Mm=n.n(Im),Nm=n("A+cg"),Rm=n.n(Nm),Pm=n("EgIc"),Lm=n.n(Pm),Dm=n("WzKz"),_m=n.n(Dm),Bm=n("gA4l"),$m=n.n(Bm),zm=n("Wuxy"),Fm=n.n(zm);const Um={"jira.issue":a.a.createElement(Rm.a,{label:"Issue"}),"jira.issue.bug":a.a.createElement(Lm.a,{label:"Bug"}),"jira.issue.story":a.a.createElement(_m.a,{label:"Story"}),"jira.issue.task":a.a.createElement($m.a,{label:"Task"}),"confluence.page":a.a.createElement(Cm.a,{label:"Page"}),"confluence.blogpost":a.a.createElement(Fm.a,{label:"Blog"})},Hm=e=>Mm.a.createHash().update(e).digest("hex"),Wm=e=>e.split(" ").length;var Vm=n("8F1V");const Km=E.default.span`
  cursor: pointer;
  padding-right: 8px;
  color: ${p.N80};
`,qm=E.default.div`
  ${Sm.b};
  border-top: 1px solid ${p.N30};
  border-bottom: 1px solid ${p.N30};
`,Gm=E.default.span`
  color: ${p.N80};
  padding: 4px 8px;
  width: 18px;
`,Ym=Object(h.f)({displayText:{id:"fabric.editor.displayText",defaultMessage:"Text to display",description:"Text to display"},clearText:{id:"fabric.editor.clearLinkText",defaultMessage:"Clear text",description:"Clears text on the link toolbar"},clearLink:{id:"fabric.editor.clearLink",defaultMessage:"Clear link",description:"Clears link in the link toolbar"}}),Xm=a.a.createElement(Cm.a,{label:"page"}),Jm=({name:e,container:t,iconUrl:n,objectId:o,url:r,viewedTimestamp:i})=>({objectId:o,name:e,container:t,iconUrl:n,url:r,lastViewedDate:i?new Date(i):void 0}),Zm=({objectId:e,container:t,title:n,contentType:o,url:r,updatedTimestamp:i})=>({objectId:e,container:t,name:n,url:r,lastUpdatedDate:i?new Date(i):void 0,icon:o&&Um[o]||Xm});class Qm extends i.PureComponent{constructor(e){super(e),this.isTabPressed=!1,this.submitted=!1,this.urlInputContainer=null,this.displayTextInputContainer=null,this.quickSearchQueryVersion=0,this.analyticSource="createLinkInlineDialog",this.quickSearch=async(e,t,n)=>{var o,r;const{searchProvider:i,displayUrl:a}=this.state,{pluginState:s}=this.props;if(!i)return;const c=++this.quickSearchQueryVersion;this.fireAnalytics({action:mt.a.ENTERED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.LINK_SEARCH_INPUT,attributes:{queryLength:e.length,queryVersion:c,queryHash:Hm(e),searchSessionId:null!==(o=s.searchSessionId)&&void 0!==o?o:"",wordCount:Wm(e),source:this.analyticSource},nonPrivacySafeAttributes:{query:e},eventType:mt.d.UI});const l=performance.now();try{const o=await i.quickSearch(e,n),p=tb((d=[...t,...o.map(Zm)],u=(e,t)=>e.objectId===t.objectId,d.filter((e,t,n)=>n.findIndex(t=>u?u(e,t):e===t)===t)));a===e&&c===this.quickSearchQueryVersion&&this.setState({items:p,isLoading:!1});const h=performance.now()-l;this.fireAnalytics({action:mt.a.INVOKED,actionSubject:mt.b.SEARCH_RESULT,actionSubjectId:mt.c.QUICK_SEARCH,attributes:{duration:h,count:o.length},eventType:mt.d.OPERATIONAL}),this.fireAnalytics({action:mt.a.SHOWN,actionSubject:mt.b.SEARCH_RESULT,actionSubjectId:mt.c.POST_QUERY_SEARCH_RESULTS,attributes:{source:this.analyticSource,postQueryRequestDurationMs:h,searchSessionId:null!==(r=s.searchSessionId)&&void 0!==r?r:"",resultCount:o.length,results:o.map(e=>({resultContentId:e.objectId,resultType:e.contentType}))},eventType:mt.d.UI})}catch(p){const e=performance.now()-l;this.fireAnalytics({action:mt.a.INVOKED,actionSubject:mt.b.SEARCH_RESULT,actionSubjectId:mt.c.QUICK_SEARCH,attributes:{duration:e,count:-1,errorCode:p.status},nonPrivacySafeAttributes:{error:p.message},eventType:mt.d.OPERATIONAL})}var d,u},this.updateInput=async e=>{const{activityProvider:t,searchProvider:n}=this.state;if(this.setState({displayUrl:e}),t)if(0===e.length)this.setState({items:await this.getRecentItems(t),selectedIndex:-1});else if(Object(Ff.a)(e))this.setState({items:[],selectedIndex:-1,isLoading:!1});else{const o=await this.getRecentItems(t,e),r=o.length<5&&!!n;this.setState({items:o,isLoading:r}),r&&this.debouncedQuickSearch(e,o,5)}},this.createClearHandler=e=>async()=>{const{activityProvider:t}=this.state;if(t)switch(e){case"displayUrl":this.setState({[e]:"",items:tb(await t.getRecentItems())}),this.urlInputContainer&&this.urlInputContainer.focus();break;case"displayText":this.setState({[e]:""}),this.displayTextInputContainer&&this.displayTextInputContainer.focus()}},this.handleSelected=(e,t)=>{this.handleInsert(e,t,mt.e.TYPEAHEAD,"click")},this.handleInsert=(e,t,n,o)=>{var r;const{pluginState:i,onSubmit:a}=this.props,{items:s,selectedIndex:c,displayText:l}=this.state;a&&(this.submitted=!0,a(e,t,l,n));const d=s[c];void 0!==d&&this.fireAnalytics({action:mt.a.SELECTED,actionSubject:mt.b.SEARCH_RESULT,attributes:{source:this.analyticSource,searchSessionId:null!==(r=i.searchSessionId)&&void 0!==r?r:"",trigger:o,resultCount:s.length,selectedResultId:d.objectId,selectedRelativePosition:c},eventType:mt.d.UI})},this.handleMouseMove=e=>{const{items:t}=this.state;if(t){const n=eb(t,t=>t.objectId===e);this.setState({selectedIndex:n})}},this.handleSubmit=()=>{const{items:e,displayUrl:t,selectedIndex:n}=this.state;if(e&&e.length>0&&n>-1){const t=e[n],o=Object(xm.g)(t.url);this.handleInsert(o,t.name,mt.e.TYPEAHEAD,"keyboard")}else if(t&&t.length>0){const e=Object(xm.g)(t);e&&this.handleInsert(e,t,mt.e.MANUAL,"notselected")}},this.handleKeyDown=e=>{var t;const{items:n,selectedIndex:o}=this.state,{pluginState:r,view:i}=this.props;if(this.isTabPressed=9===e.keyCode,!n||!n.length)return;let a=o;40===e.keyCode?(e.preventDefault(),a=(o+1)%n.length):38===e.keyCode?(e.preventDefault(),a=o>0?o-1:n.length-1):27===e.keyCode&&(e.preventDefault(),Object(Vm.b)()(i.state,i.dispatch)),this.setState({selectedIndex:a}),n[a]&&this.fireAnalytics({action:mt.a.HIGHLIGHTED,actionSubject:mt.b.SEARCH_RESULT,attributes:{source:this.analyticSource,searchSessionId:null!==(t=r.searchSessionId)&&void 0!==t?t:"",selectedResultId:n[a].objectId,selectedRelativePosition:a},eventType:mt.d.UI})},this.handleTextKeyDown=e=>{this.setState({displayText:e})},this.handleCancel=e=>{const{view:t}=this.props;e.preventDefault(),Object(Vm.b)()(t.state,t.dispatch)},this.handleBlur=e=>{const t=Object(xm.g)(this.state.displayUrl);this.props.onBlur&&!this.submitted&&t&&this.props.onBlur(e,t,this.state.displayText||this.state.displayUrl,this.state.displayText,this.isTabPressed)},this.state={selectedIndex:-1,isLoading:!1,displayUrl:Object(xm.g)(e.displayUrl),displayText:e.displayText,items:[]},this.urlBlur=this.handleBlur.bind(this,"url"),this.textBlur=this.handleBlur.bind(this,"text"),this.handleClearText=this.createClearHandler("displayUrl"),this.handleClearDisplayText=this.createClearHandler("displayText"),this.debouncedQuickSearch=jm()(this.quickSearch,400),this.fireCustomAnalytics=Object(km.a)(e.createAnalyticsEvent)}async componentDidMount(){var e,t;const{pluginState:n}=this.props;this.fireAnalytics({action:mt.a.VIEWED,actionSubject:mt.b.CREATE_LINK_INLINE_DIALOG,attributes:{timesViewed:n.timesViewed,searchSessionId:null!==(e=n.searchSessionId)&&void 0!==e?e:"",trigger:null!==(t=n.inputMethod)&&void 0!==t?t:""},eventType:mt.d.SCREEN});const[o,r]=await Promise.all([this.props.activityProvider,this.props.searchProvider]);this.setState({activityProvider:o,searchProvider:r}),await this.loadInitialLinkSearchResult()}componentWillUnmount(){var e;const{pluginState:t}=this.props;this.submitted||this.fireAnalytics({action:mt.a.DISMISSED,actionSubject:mt.b.CREATE_LINK_INLINE_DIALOG,attributes:{source:this.analyticSource,searchSessionId:null!==(e=t.searchSessionId)&&void 0!==e?e:"",trigger:"blur"},eventType:mt.d.UI})}async getRecentItems(e,t){var n;const{pluginState:o}=this.props,r=performance.now();try{const i=tb(t?await e.searchRecent(t):await e.getRecentItems()),a=i.map(Jm),s=performance.now()-r;return this.fireAnalytics({action:mt.a.INVOKED,actionSubject:mt.b.SEARCH_RESULT,actionSubjectId:mt.c.RECENT_ACTIVITIES,attributes:{duration:s,count:a.length},eventType:mt.d.OPERATIONAL}),this.fireAnalytics({action:mt.a.SHOWN,actionSubject:mt.b.SEARCH_RESULT,actionSubjectId:mt.c.PRE_QUERY_SEARCH_RESULTS,attributes:{source:this.analyticSource,preQueryRequestDurationMs:s,searchSessionId:null!==(n=o.searchSessionId)&&void 0!==n?n:"",resultCount:a.length,results:i.map(e=>{var t;return{resultContentId:e.objectId,resultType:null!==(t=e.type)&&void 0!==t?t:""}})},eventType:mt.d.UI}),a}catch(i){const e=performance.now()-r;return this.fireAnalytics({action:mt.a.INVOKED,actionSubject:mt.b.SEARCH_RESULT,actionSubjectId:mt.c.RECENT_ACTIVITIES,attributes:{duration:e,count:-1,errorCode:i.status},nonPrivacySafeAttributes:{error:i.message},eventType:mt.d.OPERATIONAL}),[]}}fireAnalytics(e){this.props.createAnalyticsEvent&&this.fireCustomAnalytics&&this.fireCustomAnalytics({payload:e})}async loadInitialLinkSearchResult(){const{displayUrl:e,activityProvider:t}=this.state;try{if(!e&&t){this.setState({isLoading:!0});const e=await this.getRecentItems(t);this.setState({items:e})}}finally{this.setState({isLoading:!1})}}render(){const{items:e,isLoading:t,selectedIndex:n,displayUrl:o,displayText:r}=this.state,{intl:{formatMessage:i},activityProvider:s}=this.props,c=i(s?S.b.placeholder:S.b.linkPlaceholder),l=i(S.b.linkAddress),d=i(Ym.clearLink),u=i(Ym.displayText);return a.a.createElement("div",{className:"recent-list"},a.a.createElement(Sm.a,{provider:!!s},a.a.createElement(Sm.e,null,a.a.createElement(Gm,null,a.a.createElement(Ae.a,{content:l},a.a.createElement(Em.a,{label:l}))),a.a.createElement(_h.a,{ref:e=>this.urlInputContainer=e,placeholder:c,testId:"link-url",onSubmit:this.handleSubmit,onChange:this.updateInput,autoFocus:{preventScroll:!0},onCancel:this.handleCancel,onBlur:this.urlBlur,defaultValue:o,onKeyDown:this.handleKeyDown}),o&&a.a.createElement(Ae.a,{content:d},a.a.createElement(Km,{onClick:this.handleClearText},a.a.createElement(ym.a,{label:d})))),a.a.createElement(qm,null,a.a.createElement(Gm,null,a.a.createElement(Ae.a,{content:u},a.a.createElement(re.a,{label:u}))),a.a.createElement(_h.a,{ref:e=>this.displayTextInputContainer=e,placeholder:u,ariaLabel:"Link label",testId:"link-label",onChange:this.handleTextKeyDown,onCancel:this.handleCancel,onBlur:this.textBlur,defaultValue:r,onSubmit:this.handleSubmit,onKeyDown:this.handleKeyDown}),r&&a.a.createElement(Ae.a,{content:i(Ym.clearText)},a.a.createElement(Km,{onClick:this.handleClearDisplayText},a.a.createElement(ym.a,{label:i(Ym.clearText)})))),a.a.createElement(Tm.a,{items:e,isLoading:t,selectedIndex:n,onSelect:this.handleSelected,onMouseMove:this.handleMouseMove})))}}const eb=(e,t)=>{let n=-1;return e.some((e,o)=>!!t(e)&&(n=o,!0)),n};function tb(e){return e.slice(0,5)}const nb=Object(h.g)(Qm);var ob=Object(Sp.a)()(nb),rb=n("YKy/");class ib extends a.a.PureComponent{render(){const{onSubmit:e,onBlur:t,displayText:n,displayUrl:o,providerFactory:r,view:i}=this.props;return a.a.createElement(Pd.a,{providers:["activityProvider","searchProvider"],providerFactory:r,renderNode:({activityProvider:r,searchProvider:s})=>a.a.createElement(d.a,{editorView:i,plugins:{hyperlinkPluginState:rb.d},render:({hyperlinkPluginState:c})=>a.a.createElement(ob,{activityProvider:r,searchProvider:s,onSubmit:e,onBlur:t,displayText:n,displayUrl:o,pluginState:c,view:i})})})}}class ab extends a.a.Component{componentDidUpdate(e){e.node!==this.props.node&&this.hideLinkToolbar()}componentWillUnmount(){this.hideLinkToolbar()}hideLinkToolbar(){const{view:e}=this.props;e.dispatch(Object(Pf.a)(e.state.tr))}render(){const{providerFactory:e,url:t,text:n,view:o,onSubmit:r}=this.props;return a.a.createElement(ib,{view:o,providerFactory:e,displayUrl:t,displayText:n,onSubmit:(e,t,n)=>{this.hideLinkToolbar(),r&&r(e,n||t)}})}}const sb=(e,t)=>!!t&&(t(Object(Pf.f)(e.tr)),!0),cb=({providerFactory:e,node:t})=>({type:"custom",render:(n,o)=>{if(!n||!e)return null;const r=Object(Uf.b)(t,Object(Uf.c)(n.state));return a.a.createElement(ab,{key:o,view:n,providerFactory:e,url:r.url,text:r.title||"",node:t,onSubmit:(e,t)=>t!==r.title&&e!==r.url?Object(Lf.g)(e)(n.state,n.dispatch):t!==r.title||e!==r.url?Object(Lf.a)(t,e)(n.state,n.dispatch):void 0})}}),lb={height:Sm.c,width:Sm.d,forcePlacement:!0};var db=n("B9lp");const ub=Object(h.f)({url:{id:"fabric.editor.url",defaultMessage:"Display URL",description:"Convert the card to become a regular text-based hyperlink."},block:{id:"fabric.editor.displayBlock",defaultMessage:"Display card",description:"Display link as a card with a rich preview similar to in a Facebook feed with page title, description, and potentially an image."},inline:{id:"fabric.editor.displayInline",defaultMessage:"Display inline",description:"Display link with the title only."},embed:{id:"fabric.editor.displayEmbed",defaultMessage:"Display embed",description:"Display link as an embedded object"},link:{id:"fabric.editor.displayLink",defaultMessage:"Display as text",description:"Convert the card to become a regular text-based hyperlink."},card:{id:"fabric.editor.cardFloatingControls",defaultMessage:"Card options",description:"Options to change card type"},blockCardUnavailable:{id:"fabric.editor.blockCardUnavailable",defaultMessage:"The inline link is inside {node} and cannot have its view changed",description:"Warning message to show the user that this node cannot change its view"}});class pb extends a.a.Component{constructor(){super(...arguments),this.renderDropdown=(e,t)=>{const{url:n,intl:o,currentAppearance:r,editorState:i,allowEmbeds:s,platform:c}=this.props,l=s&&t&&n&&t.extractors.getPreview(n,c),d=s&&l&&{title:o.formatMessage(ub.embed),onClick:Object(Lf.f)("embed"),selected:"embed"===r,hidden:!1,testId:"embed-appearance"},u=[{title:o.formatMessage(ub.url),onClick:()=>Object(Lf.a)(n,n,!0)(i,null==e?void 0:e.dispatch),selected:!r,testId:"url-appearance"},{title:o.formatMessage(ub.inline),onClick:Object(Lf.f)("inline"),selected:"inline"===r,hidden:!1,testId:"inline-appearance"},{title:o.formatMessage(ub.block),onClick:Object(Lf.f)("block"),selected:"block"===r,hidden:!1,testId:"block-appearance"}],p=o.formatMessage(r?ub[r]:ub.url),h="inline"===r&&!Object(Ni.e)(i,Be.Fragment.from(i.schema.nodes.blockCard.createChecked({})));return d&&u.push(d),a.a.createElement(db.a,{key:"link-toolbar",buttonTestId:"link-toolbar-appearance-button",title:p,dispatchCommand:t=>{t&&t(i,e&&e.dispatch)},options:u,disabled:h,tooltip:h?hb(i,o):void 0})}}render(){const e=this.context.contextAdapter?this.context.contextAdapter.card:void 0,{editorView:t}=this.props;return this.renderDropdown(t,e&&e.value)}}pb.contextTypes={contextAdapter:fr.a.object};const hb=(e,t)=>{try{const n=e.selection.$from.node(-1),o=t.formatMessage(S.a[n.type.name]);return t.formatMessage(ub.blockCardUnavailable,{node:o})}catch(n){return t.formatMessage(ub.blockCardUnavailable,{node:t.formatMessage(S.a.defaultBlockNode)})}};var fb=n("Qwog");const mb=(e,t)=>{if(!(e.selection instanceof s.NodeSelection))return!1;const n=e.selection.node.type.name,o={action:mt.a.DELETED,actionSubject:mt.b.SMART_LINK,actionSubjectId:n,attributes:{inputMethod:mt.e.TOOLBAR,displayMode:n},eventType:mt.d.TRACK};return t&&t(Object(bt.a)(e,Object(f.removeSelectedNode)(e.tr),o)),!0},bb=(e,t)=>{if(!(e.selection instanceof s.NodeSelection))return!1;const{type:n}=e.selection.node,{url:o}=Object(Uf.d)(e.selection.node),r={action:mt.a.VISITED,actionSubject:mt.b.SMART_LINK,actionSubjectId:n.name,attributes:{inputMethod:mt.e.TOOLBAR},eventType:mt.d.TRACK};return window.open(o),t&&t(Object(bt.a)(e,e.tr,r)),!0},gb=(e,t)=>{const n=Object(Uf.b)(e,Object(Uf.c)(t)),o=n.title||n.url;return o?Object(Lf.b)(o):()=>!1},vb=(e,t,n)=>{const{inlineCard:o}=t.schema.nodes;return e.type===o?{type:"button",title:n.formatMessage(S.b.unlink),icon:hm.a,onClick:gb(e,t)}:{type:"button",appearance:"danger",icon:Io.a,onMouseEnter:Object(Mo.b)(e.type,!0),onMouseLeave:Object(Mo.b)(e.type,!1),title:n.formatMessage(S.a.remove),onClick:mb}},yb=(e,t,n,o,r)=>i=>{const{url:s}=Object(Uf.d)(i);if(s&&!Object(Ff.a)(s))return[];const c=fa.a.getState(e),l=Object(Uf.a)(i.type);if(c.showLinkingToolbar)return[cb({providerFactory:n,node:i})];{const n=[{type:"button",selected:!1,title:t.formatMessage(S.b.editLink),showTitle:!0,onClick:sb},{type:"separator"},{type:"button",icon:mm.a,className:"hyperlink-open-link",title:t.formatMessage(bm.a.openLink),onClick:bb},{type:"separator"},vb(i,e,t)];"embed"===l&&n.unshift(...((e,t)=>Object(fb.a)(e,t,e.schema.nodes.embedCard,!0,!0))(e,t),{type:"separator"});const{allowBlockCards:c,allowEmbeds:d}=o;return(c||d)&&l&&n.unshift({type:"custom",render:n=>a.a.createElement(pb,{key:"link-appearance",url:s,intl:t,currentAppearance:l,editorView:n,editorState:e,allowEmbeds:d,platform:r})},{type:"separator"}),n}};new s.PluginKey("cardPlugin");var Ob=e=>{return{name:"card",nodes(){const t=[{name:"inlineCard",node:If.a},{name:"blockCard",node:Mf.a}];return e.allowEmbeds&&t.push({name:"embedCard",node:Nf.a}),t},pmPlugins(){const t="boolean"!=typeof e.allowResizing||e.allowResizing;return[{name:"card",plugin:um(e.platform,t,e.fullWidthMode)}]},pluginsOptions:{floatingToolbar:(t=e,n=e.platform,(e,r,i)=>{const{inlineCard:a,blockCard:c,embedCard:l}=e.schema.nodes,d=[a,c,l],u=fa.a.getState(e);if(!(e.selection instanceof s.NodeSelection))return;const p=e.selection.node;if(!p)return;const h="embed"===Object(Uf.a)(p.type),m=h?{offset:[0,24]}:{};return Object(o.a)(Object(o.a)({title:r.formatMessage(ub.card),nodeType:d},m),{},{getDomRef:t=>{const n=Object(f.findDomRefAtPos)(e.selection.from,t.domAtPos.bind(t));if(n)return h?n.querySelector("."+gm.b):n},items:yb(e,r,i,t,n)},u.showLinkingToolbar?lb:{})})}};var t,n};var Eb=(e,t)=>{switch(t.action){case"matched":return((e,t)=>Object(o.a)(Object(o.a)({},e),{},{resolving:[...e.resolving,{start:t.start,end:t.end,match:t.match}]}))(e,t);case"resolved":return((e,t)=>Object(o.a)(Object(o.a)({},e),{},{matches:[...e.matches,{replacement:t.replacement,matchString:t.matchString}]}))(e,t);case"finish":return((e,t)=>Object(o.a)(Object(o.a)({},e),{},{resolving:e.resolving.filter(e=>e.match[0]!==t.matchString),matches:e.matches.filter(e=>e.matchString!==t.matchString)}))(e,t);default:return e}};const wb=(e,t,n,o,r)=>{const{state:i}=e,a=i.doc.resolve(n);if(a.parent.type.spec.code)return!1;let s=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"")+r;for(let c=0;c<t.length;c++){let i;if(i=r.length?t[c].matchTyping.exec(s):t[c].matchEnter.exec(s),i){const a=n-(i[0].length-r.length);return t[c].handler(e,i,a,o),!0}}return!1};var Cb=n("JIgR");const Tb=new s.PluginKey("customAutoformatPlugin"),Sb=(e,t)=>e.setMeta(Tb,t),kb=({providerFactory:e})=>{const t=[];return new s.Plugin({state:{init:()=>({resolving:[],matches:[]}),apply(e,t){if(!t)return t;const n=Object(o.a)(Object(o.a)({},t),{},{resolving:t.resolving.map(t=>Object(o.a)(Object(o.a)({},t),{},{start:e.mapping.map(t.start),end:e.mapping.map(t.end,-1)}))}),r=e.getMeta(Tb);return r?Eb(n,r):n}},props:{handleTextInput:(e,n,o,r)=>(wb(e,t,n,o,r),!1),handleKeyDown:Object(ln.a)({Enter:(e,n,o)=>(wb(o,t,o.state.selection.from,o.state.selection.to,""),!1)})},view(){const n=(e,n)=>{"autoformattingProvider"===e&&n&&n.then(async e=>{const n=await e.getRules();Object.keys(n).forEach(e=>{const o={matchTyping:new RegExp("(\\s+|^)"+e+"(\\s)$"),matchEnter:new RegExp("(\\s+|^)"+e+"()$"),handler:(r=n[e],async(e,t,n,o)=>{const i=r(t.slice(1,t.length-1));e.dispatch(Sb(e.state.tr,{action:"matched",match:t,start:n,end:o}));const a=await i,s=Object(Ue.l)(e.state.schema,a);return e.dispatch(Sb(e.state.tr,{action:"resolved",matchString:t[0],replacement:s})),a})};var r;t.push(o)})})};return e.subscribe("autoformattingProvider",n),{update(e){const t=(n=e.state,Tb.getState(n));var n;t&&t.matches&&((e,t)=>{const{inlineCard:n}=e.state.schema.nodes;t.matches.forEach(o=>{const r=t.resolving.filter(e=>e.match[0]===o.matchString);let i=e.state.tr;r.forEach(t=>{const{match:r,start:a,end:s}=t,{replacement:c}=o,l=r[1],d=s+r[r.length-1].length;if(!c||c.type!==n&&!c.isText)return;e.state.doc.textBetween(a,d,"#","|")===r[0]&&(i=i.replaceWith(i.mapping.map(a+l.length),i.mapping.map(s,-1),c))}),i=Sb(i,{action:"finish",matchString:o.matchString}),e.dispatch(Object(Cb.a)(i))})})(e,t)},destroy(){e.unsubscribe("autoformattingProvider",n)}}},key:Tb})};var xb=()=>({name:"customAutoformat",pmPlugins:()=>[{name:"customAutoformat",plugin:kb}]}),Ab=n("JdPE"),jb=n("62Nd"),Ib=n("X+bm");function Mb(){const e={};return Te.bindKeymapWithCommand(Te.enter.common,Nb,e),Te.bindKeymapWithCommand(Te.tab.common,Nb,e),Object(ln.b)(e)}const Nb=(e,t)=>!!Object(Ib.b)(e.tr.selection);var Rb=n("J4U1"),Pb=n("QuFy"),Lb=n("giew"),Db=n("dsZp"),_b=n("Nink"),Bb=n.n(_b),$b=n("K6aX");const zb=Object(h.f)({neutralColor:{id:"fabric.status.color.grey",defaultMessage:"Grey",description:"Tooltip for the grey color in color palette"},purpleColor:{id:"fabric.status.color.purple",defaultMessage:"Purple",description:"Tooltip for the purple color in color palette"},blueColor:{id:"fabric.status.color.blue",defaultMessage:"Blue",description:"Tooltip for the blue color in color palette"},redColor:{id:"fabric.status.color.red",defaultMessage:"Red",description:"Tooltip for the red color in color palette"},yellowColor:{id:"fabric.status.color.yellow",defaultMessage:"Yellow",description:"Tooltip for the yellow color in color palette"},greenColor:{id:"fabric.status.color.green",defaultMessage:"Green",description:"Tooltip for the green color in color palette"}}),Fb=Db.a.button`
  height: 24px;
  width: 24px;
  background: ${p.N900};
  padding: 0;
  border-radius: 4px;
  border: 1px solid ${p.N0};
  cursor: pointer;
  display: block;
  box-sizing: border-box;
  overflow: hidden;
`,Ub=Db.a.span`
  border: 1px solid transparent;
  margin: 0 2px;
  font-size: 0;
  display: flex;
  align-items: center;
  padding: 1px;
  border-radius: 6px;
  &:hover {
    border: 1px solid ${p.N50};
  }
`;class Hb extends i.PureComponent{constructor(){super(...arguments),this.hoverStartTime=0,this.onMouseEnter=()=>{this.hoverStartTime=Date.now()},this.onMouseLeave=()=>{const{onHover:e}=this.props;Date.now()-this.hoverStartTime>=$b.a&&e&&e(this.props.value),this.hoverStartTime=0},this.onMouseDown=e=>{e.preventDefault()},this.onClick=e=>{const{onClick:t,value:n}=this.props;e.preventDefault(),t(n)}}render(){const{tabIndex:e,backgroundColor:t,isSelected:n,borderColor:o,value:r}=this.props,i="1px solid "+o;return a.a.createElement(Ub,null,a.a.createElement(h.b,Object.assign({},zb[r+"Color"]),r=>a.a.createElement(Fb,{onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,tabIndex:e,className:""+(n?"selected":""),title:r,style:{backgroundColor:t||"transparent",border:i}},n&&a.a.createElement(Bb.a,{primaryColor:o,label:r}))))}componentWillUnmount(){this.hoverStartTime=0}}const Wb=[["neutral",p.N40,p.N400],["purple",p.P50,p.P400],["blue",p.B50,p.B400],["red",p.R50,p.R400],["yellow",p.Y75,p.Y400],["green",p.G50,p.G400]],Vb=Db.a.div`
  margin: ${Object(te.h)()}px ${Object(te.h)()}px 0 ${Object(te.h)()}px;
  /* Firefox bug fix: https://product-fabric.atlassian.net/browse/ED-1789 */
  display: flex;
  flex-wrap: wrap;
`;var Kb=({cols:e=7,onClick:t,selectedColor:n,className:o,onHover:r})=>a.a.createElement(Vb,{className:o,style:{maxWidth:32*e}},Wb.map(([e,o,i])=>a.a.createElement(Hb,{key:e,value:e,backgroundColor:o,borderColor:i,onClick:t,onHover:r,isSelected:e===n})));const qb=Db.a.div`
  margin: 0 ${Object(te.h)()}px;
`;class Gb extends i.PureComponent{constructor(){super(...arguments),this.fieldTextWrapperKey=Math.random().toString(),this.colorPaletteKey=Math.random().toString(),this.onChange=e=>{this.props.onTextChanged(e.target.value)},this.onKeyPress=e=>{"Enter"===e.key&&this.props.onEnter()},this.handleInputRef=e=>{e&&this.props.autoFocus&&setTimeout(()=>{e.focus()})}}render(){const{text:e,selectedColor:t,onColorClick:n,onColorHover:o}=this.props;return a.a.createElement(a.a.Fragment,null,a.a.createElement(qb,{key:this.fieldTextWrapperKey},a.a.createElement(Lb.a,{css:null,value:e,isCompact:!0,ref:this.handleInputRef,onChange:this.onChange,onKeyPress:this.onKeyPress,spellCheck:!1,autoComplete:"off"})),a.a.createElement(Kb,{key:this.colorPaletteKey,onClick:n,onHover:o,selectedColor:t}))}}Gb.defaultProps={autoFocus:!0};var Yb=n("KjAf");const Xb=e=>e?"new":"update",Jb=Object(Ie.a)(m.a);var Zb;!function(e){e.blur="blur",e.escKey="escKey",e.enterKey="enterKey"}(Zb||(Zb={}));const Qb=E.default.div`
  background: ${p.N0};
  padding: ${Object(te.h)()}px 0;
  border-radius: ${Object(te.c)()}px;
  ${_e.k};
  input {
    text-transform: uppercase;
  }
`;class eg extends a.a.Component{constructor(e){var t;super(e),this.handleClickOutside=e=>{e.preventDefault(),this.inputMethod=Zb.blur,this.props.closeStatusPicker()},this.handleEscapeKeydown=e=>{e.preventDefault(),this.inputMethod=Zb.escKey,this.props.onEnter(this.state)},this.onColorHover=e=>{this.createStatusAnalyticsAndFireFunc({action:"hovered",actionSubject:"statusColorPicker",attributes:{color:e,localId:this.state.localId,state:Xb(this.props.isNew)}})},this.onColorClick=e=>{const{text:t,localId:n}=this.state;e===this.state.color?(this.createStatusAnalyticsAndFireFunc({action:"clicked",actionSubject:"statusColorPicker",attributes:{color:e,localId:n,state:Xb(this.props.isNew)}}),this.onEnter()):(this.setState({color:e}),this.props.onSelect({text:t,color:e,localId:n}))},this.onTextChanged=e=>{const{color:t,localId:n}=this.state;this.setState({text:e}),this.props.onTextChanged({text:e,color:t,localId:n},!!this.props.isNew)},this.onEnter=()=>{this.inputMethod=Zb.enterKey,this.props.onEnter(this.state)},this.handlePopupClick=e=>e.nativeEvent.stopImmediatePropagation(),this.state=this.extractStateFromProps(e),this.createStatusAnalyticsAndFireFunc=(t=e.createAnalyticsEvent,e=>{if(t&&e){const n=Object(o.a)(Object(o.a)({},e),{},{eventType:"ui"});n.attributes||(n.attributes={}),n.attributes.packageName=Yb.a,n.attributes.packageVersion=Yb.b,n.attributes.componentName="status",t(n).fire("fabric-elements")}})}fireStatusPopupOpenedAnalytics(e){const{color:t,text:n,localId:o,isNew:r}=e;this.startTime=Date.now(),this.createStatusAnalyticsAndFireFunc({action:"opened",actionSubject:"statusPopup",attributes:{textLength:n?n.length:0,selectedColor:t,localId:o,state:Xb(r)}})}fireStatusPopupClosedAnalytics(e){const{color:t,text:n,localId:o,isNew:r}=e;this.createStatusAnalyticsAndFireFunc({action:"closed",actionSubject:"statusPopup",attributes:{inputMethod:this.inputMethod,duration:Date.now()-this.startTime,textLength:n?n.length:0,selectedColor:t,localId:o,state:Xb(r)}})}reset(){this.startTime=Date.now(),this.inputMethod=Zb.blur}componentDidMount(){this.reset(),this.fireStatusPopupOpenedAnalytics(this.state)}componentWillUnmount(){this.fireStatusPopupClosedAnalytics(this.state),this.startTime=0}componentDidUpdate(e,t,n){const o=this.props.target;if(e.target!==o){const e=this.extractStateFromProps(this.props);this.setState(e),this.fireStatusPopupClosedAnalytics(t),this.reset(),this.fireStatusPopupOpenedAnalytics(e)}}extractStateFromProps(e){const{defaultColor:t,defaultText:n,defaultLocalId:o,isNew:r}=e;return{color:t||jb.a.color,text:n||jb.a.text,localId:o,isNew:r}}render(){const{isNew:e,target:t}=this.props,{color:n,text:o}=this.state;return t&&a.a.createElement(Jb,{target:t,offset:[0,8],handleClickOutside:this.handleClickOutside,handleEscapeKeydown:this.handleEscapeKeydown,zIndex:je.l,fitHeight:40},a.a.createElement(Qb,{onClick:this.handlePopupClick},a.a.createElement(Gb,{autoFocus:e,selectedColor:n,text:o,onColorClick:this.onColorClick,onColorHover:this.onColorHover,onTextChanged:this.onTextChanged,onEnter:this.onEnter})))}}var tg=Object(Sp.a)()(eg);var ng=e=>((e,t)=>(!0===t.menuDisabled||(e.pluginsOptions={quickInsert:({formatMessage:e})=>[{id:"status",title:e(In.a.status),description:e(In.a.statusDescription),priority:700,keywords:["lozenge"],icon:()=>a.a.createElement(mn.v,{label:e(In.a.status)}),action:(e,t)=>Object(bt.a)(t,Object(jb.c)()(e,t),{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.STATUS,attributes:{inputMethod:mt.e.QUICK_INSERT},eventType:mt.d.TRACK})}]}),e))((e=>({name:"status",nodes:()=>[{name:"status",node:Ab.a}],pmPlugins:()=>[{name:"status",plugin:({dispatch:t,portalProviderAPI:n,eventDispatcher:o})=>Object(Rb.a)(t,n,o,e)},{name:"statusKeymap",plugin:Mb}],contentComponent({editorView:e}){const t=e.domAtPos.bind(e);return a.a.createElement(d.a,{plugins:{statusState:Pb.a},render:({statusState:n={}})=>{const{showStatusPickerAt:o}=n;if("number"!=typeof o)return null;const r=Object(f.findDomRefAtPos)(o,t),i=e.state.doc.nodeAt(o);if(!i||"status"!==i.type.name)return null;const{text:s,color:c,localId:l}=i.attrs;return a.a.createElement(tg,{isNew:n.isNew,target:r,defaultText:s,defaultColor:c,defaultLocalId:l,onSelect:t=>{Object(jb.e)(t)(e.state,e.dispatch)},onTextChanged:t=>{Object(jb.e)(t)(e.state,e.dispatch)},closeStatusPicker:()=>{Object(jb.b)()(e)},onEnter:()=>{Object(jb.b)()(e)}})}})}}))(e),e),og=n("lsRG");const rg={paragraph:od.b.PARAGRAPH,heading:od.b.HEADING};function ig(e,t){return void 0===t?ag(e):!1===t?0:t.level}function ag(e){return void 0===e?0:e.level}const sg=(e,t)=>{const{nodes:{paragraph:n,heading:o},marks:{alignment:r}}=e;if([n,o].indexOf(t.type)>-1){if(r){return!t.marks.filter(e=>e.type===r)[0]}return!0}return!1};function cg(e,t){const{getAttrs:n,getAndResetAttrsChanges:o}=function(e,t){let n=[];return{getAttrs:function(o,r){const i=e(o,r);return n.push({node:r,prevAttrs:o,newAttrs:i,options:t}),i},getAndResetAttrsChanges(){const e=n;return n=[],e}}}(e,{direction:t}),r=function(e){return(t,n)=>{const{indentation:o}=t.schema.marks;return Object(z.k)(o,e,sg)(t,n)}}(n);return(e,t)=>r(e,function(e,t,n){return o=>{let r=o;e().forEach(({node:e,prevAttrs:n,newAttrs:o,options:{direction:i}})=>{const a=rg[e.type.name];a&&(r=Object(bt.a)(t,r,{action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_INDENT,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.KEYBOARD,previousIndentationLevel:ag(n),newIndentLevel:ig(n,o),direction:i,indentType:a}}))}),n&&n(o)}}(o,e,t))}const lg=cg(e=>{if(!e)return{level:1};const{level:t}=e;return t>=6?void 0:{level:t+1}},od.a.INDENT),dg=cg(e=>{if(!e)return;const{level:t}=e;return!(t<=1)&&{level:t-1}},od.a.OUTDENT);function ug(){const e={};return Te.bindKeymapWithCommand(Te.findShortcutByKeymap(Te.indent),lg,e),Te.bindKeymapWithCommand(Te.findShortcutByKeymap(Te.outdent),dg,e),Te.bindKeymapWithCommand(Te.findShortcutByKeymap(Te.backspace),(e,t)=>{const{selection:n}=e;return!(!Object(to.s)(n)||!n.$cursor||0!==n.$cursor.parentOffset)&&(!!t&&dg(e,t))},e),Object(ln.b)(e)}var pg=()=>({name:"indentation",marks:()=>[{name:"indentation",mark:og.a}],pmPlugins:()=>[{name:"indentationKeymap",plugin:()=>ug()}]}),hg=n("6rIb"),fg=n("ZJN8");const mg=new s.PluginKey("scrollIntoViewPlugin");var bg=()=>({name:"scrollIntoView",pmPlugins:()=>[{name:"scrollIntoView",plugin:()=>new s.Plugin({key:mg,appendTransaction:(e,t,n)=>{if(!e.length)return;const o=e[0];return!o.docChanged&&!o.storedMarksSet||o.scrolledIntoView||!1===o.getMeta("scrollIntoView")||!1===o.getMeta("addToHistory")||o.getMeta("isRemote")||o.getMeta(fg.b)?void 0:n.tr.scrollIntoView()}})}]}),gg=n("B3As"),vg=n("Rs2C"),yg=n("EZ5g"),Og=n("GGKp");const Eg=()=>({keyboardHeight:-1,heightDiff:-1,mobilePaddingTop:0,windowHeight:window.innerHeight}),wg=e=>{let t;return new s.Plugin({state:Object(Og.b)(e,Eg),key:Og.d,props:{scrollThreshold:void 0,scrollMargin:void 0,handleScrollToSelection(e){const t=document.scrollingElement;if(!t)return!1;const{keyboardHeight:n,heightDiff:o}=Object(Og.c)(e.state),r=t.clientHeight-window.innerHeight;return o!==r&&(Object(yg.a)(r)(e.state,e.dispatch),Cg.call(this,n,r)),!1}},appendTransaction(e,t,n){if(e.find(e=>{const t=e.getMeta(Og.d);return t&&(t.type===vg.a.SET_KEYBOARD_HEIGHT||t.type===vg.a.SET_WINDOW_HEIGHT)})){const{keyboardHeight:e,windowHeight:o}=Object(Og.c)(t),{keyboardHeight:r,heightDiff:i,windowHeight:a}=Object(Og.c)(n);if(e!==r&&Cg.call(this,r,i),a<o)return n.tr.scrollIntoView()}},view(e){const n=()=>{let n=window.innerHeight,o=0;const r=()=>{window.innerHeight===n&&(o++,o>=5?(t=void 0,Object(yg.d)(window.innerHeight)(e.state,e.dispatch)):t=requestAnimationFrame(r))};t=requestAnimationFrame(r)};return window.addEventListener("resize",n),{destroy(){window.removeEventListener("resize",n),t&&window.cancelAnimationFrame(t)}}}})},Cg=function(e,t){if(-1===e||-1===t)return;const{scrollThreshold:n,scrollMargin:o}=Tg(e,t);this.props&&(this.props.scrollThreshold=n,this.props.scrollMargin=o)},Tg=(e,t)=>({scrollThreshold:{top:0,bottom:e+44-t,left:0,right:0},scrollMargin:{top:5,bottom:e-t+44,left:0,right:0}});var Sg=()=>({name:"mobileScroll",pmPlugins:()=>[{name:"mobileScroll",plugin:({dispatch:e})=>wg(e)}]}),kg=n("Llt/"),xg=n("BiVI"),Ag=n("PZ9j"),jg=n("ULBo"),Ig=n("S7GL"),Mg=n("41ZG");var Ng=n("3GHw"),Rg=n("w301"),Pg=n("/YBo"),Lg=n("9Vuo"),Dg=n("zLY1");const _g=({item:e})=>{const t=Object(i.useCallback)(t=>{13!==t.which&&32!==t.which||e.action()},[e]);return a.a.createElement(E.ThemeProvider,{theme:Fg},a.a.createElement(ke.a,{onClick:e.action,elemBefore:a.a.createElement(zg,null,e.icon()),"aria-describedby":e.title,"data-testid":"view-more-elements-item",onKeyPress:t},e.title))},Bg=({name:e,content:t})=>{const n={codeblock:mn.b,panel:mn.p,blockquote:mn.u,decision:mn.d,horizontalrule:mn.e,expand:mn.g,date:mn.c,status:mn.v}[e];return n?a.a.createElement(n,{label:t}):void 0},$g=E.default.div`
  display: flex;
  flex-direction: column;
  width: 320px;
  height: ${({itemCount:e})=>e>0&&e<6?e*Dg.b+112:560}px;
  background-color: ${Object(Rg.a)({light:p.N0,dark:p.DN50})()};
  border-radius: ${Object(te.c)()}px;
  box-shadow: 0 0 0 1px ${p.N30A}, 0 2px 1px ${p.N30A}, 0 0 20px -6px ${p.N60A};
`,zg=E.default.div`
  width: 40px;
  height: 40px;
  box-sizing: border-box;
  display: flex;
  justify-content: center;
  align-items: center;
`,Fg={[Ng.e]:{padding:{default:{left:12}},height:40}},Ug=E.default.div`
  display: flex;
  flex: 1;
  box-sizing: border-box;
  overflow: hidden;
`,Hg=Object(Ie.a)(Ug);var Wg=({editorView:e,dropdownItems:t,onInsert:n,toggleVisiblity:o})=>{const[r,s]=Object(i.useState)(0),c=Object(i.useCallback)(e=>({title:e.content,description:e.tooltipDescription,keyshortcut:e.shortcut,icon:()=>Bg({name:e.value.name,content:e.content})||e.elemBefore,action:()=>n({item:e}),onClick:e.onClick,value:e.value}),[n]),l=t.map(c),u=l.pop(),p=Object(i.useCallback)(t=>{o(),e.hasFocus()||e.focus(),Object(Ig.b)(t)(e.state,e.dispatch)},[e,o]),h=Object(i.useCallback)(e=>(t,n)=>{let o;return o=t?Object(Pg.b)(e,{})(t,n):l.concat(Object(Pg.a)(e,{})()),s(o.length),o},[l]),f=Object(i.useCallback)(({quickInsertState:e})=>a.a.createElement(Hg,{handleClickOutside:o,handleEscapeKeydown:o},a.a.createElement(Lg.a,{mode:"inline",getItems:h(e),onInsertItem:p,showSearch:!0,showCategories:!1,key:l.length})),[h,p,l.length,o]);return a.a.createElement($g,{itemCount:r},a.a.createElement(d.a,{plugins:{quickInsertState:au.a},render:f}),r>0&&u&&a.a.createElement(_g,{item:u}))},Vg=n("pFSi"),Kg=n.n(Vg),qg=n("lSUb");const Gg=["macro-browser","slash-onboarding"],Yg=e=>"string"==typeof e.content&&e.content.includes("macro");var Xg=n("Nbtp"),Jg=n.n(Xg),Zg=n("EOR/"),Qg=n.n(Zg),ev=n("QsAB"),tv=n.n(ev),nv=n("gmV4"),ov=n.n(nv),rv=n("0dje"),iv=n.n(rv),av=n("lKsC"),sv=n.n(av),cv=n("mN0p"),lv=n.n(cv),dv=n("1ioG"),uv=n.n(dv),pv=n("kTem"),hv=n.n(pv),fv=n("R4Nd"),mv=n.n(fv),bv=n("JrxX"),gv=n.n(bv),vv=n("dWTA"),yv=n.n(vv);const Ov=([e],[t])=>{const n=e,o=t;return!Object.keys(n).some(e=>{const t=e;return n[t]!==o[t]})},Ev=e=>({content:e.content,tooltipDescription:e.tooltipDescription,value:{name:e.name},elemBefore:a.a.createElement(e.Icon,{label:e.content}),elemAfter:e.shortcut?a.a.createElement(_e.h,null,e.shortcut):void 0,shortcut:e.shortcut,isDisabled:e.disabled}),wv=e=>Object(qg.default)(e,Ov),Cv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"action",shortcut:"[]",Icon:Xd.a})),Tv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"link",shortcut:Object(Te.tooltip)(Te.addLink),Icon:iv.a})),Sv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"media",Icon:Qg.a})),kv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"image upload",Icon:Qg.a})),xv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"mention",Icon:tv.a,shortcut:"@"})),Av=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"emoji",Icon:Tp.a,shortcut:":"})),jv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"table",Icon:Jg.a,shortcut:Object(Te.tooltip)(Te.toggleTable)})),Iv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"layout",Icon:bf.a})),Mv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"codeblock",Icon:gv.a,shortcut:e.shortcut})),Nv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"panel",Icon:Yu.a,shortcut:e.shortcut})),Rv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"blockquote",Icon:yv.a,shortcut:e.shortcut})),Pv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"decision",Icon:Kd.a,shortcut:"<>"})),Lv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"horizontalrule",Icon:mv.a,shortcut:"---"})),Dv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"expand",Icon:uv.a})),_v=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"date",Icon:sv.a,shortcut:"//"})),Bv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"placeholder text",Icon:hv.a})),$v=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"status",Icon:lv.a})),zv=wv(e=>Ev({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"macro",Icon:ov.a})),Fv=Kg()(e=>Object(o.a)(Object(o.a)({},e),{},{title:a.a.createElement(Te.ToolTipContent,{description:e.content,shortcutOverride:e.shortcut})})),Uv=Object(qg.default)(e=>Kg()(t=>Object(o.a)(Object(o.a)({},t),{},{title:a.a.createElement(Te.ToolTipContent,{description:e,shortcutOverride:"/"})}))),Hv=Object(qg.default)(e=>{const{isTypeAheadAllowed:t,tableSupported:n,mediaUploadsEnabled:o,mediaSupported:r,imageUploadSupported:i,imageUploadEnabled:a,mentionsSupported:s,availableWrapperBlockTypes:c,actionSupported:l,decisionSupported:d,showElementBrowserLink:u,linkSupported:p,linkDisabled:h,emojiDisabled:f,emojiProvider:m,nativeStatusSupported:b,insertMenuItems:g,dateEnabled:v,placeholderTextEnabled:y,horizontalRuleEnabled:O,layoutSectionEnabled:E,expandEnabled:w,numberOfButtons:C,schema:T,formatMessage:S,isNewMenuEnabled:k}=e,x=[];if(l&&x.push(Cv({content:S(In.a.action),tooltipDescription:S(In.a.actionDescription),disabled:!1})),p&&x.push(Tv({content:S(In.a.link),tooltipDescription:S(In.a.linkDescription),disabled:!!h})),r&&o&&x.push(Sv({content:S(In.a.filesAndImages),tooltipDescription:S(In.a.filesAndImagesDescription),disabled:!1})),i&&x.push(kv({content:S(In.a.image),disabled:!a})),s&&x.push(xv({content:S(In.a.mention),tooltipDescription:S(In.a.mentionDescription),disabled:!t})),m&&x.push(Av({content:S(In.a.emoji),tooltipDescription:S(In.a.emojiDescription),disabled:f||!t})),n&&x.push(jv({content:S(In.a.table),tooltipDescription:S(In.a.tableDescription),disabled:!1})),E){const e=S(In.a.columns);x.push(Iv({content:e,tooltipDescription:S(In.a.columnsDescription),disabled:!1}))}const A=c||[],j=A.find(e=>"codeblock"===e.name),I=A.find(e=>"panel"===e.name),M=A.find(e=>"blockquote"===e.name);if(j&&x.push(Mv({content:S(j.title),tooltipDescription:S(_p.a.codeblockDescription),disabled:!1,shortcut:"```"})),I&&x.push(Nv({content:S(I.title),tooltipDescription:S(_p.a.infoPanelDescription),disabled:!1})),M&&x.push(Rv({content:S(M.title),tooltipDescription:S(_p.a.blockquoteDescription),disabled:!1,shortcut:">"})),d&&x.push(Pv({content:S(In.a.decision),tooltipDescription:S(In.a.decisionDescription),disabled:!1})),O&&T.nodes.rule&&x.push(Lv({content:S(In.a.horizontalRule),tooltipDescription:S(In.a.horizontalRuleDescription),disabled:!1})),w&&T.nodes.expand&&x.push(Dv({content:S(In.a.expand),tooltipDescription:S(In.a.expandDescription),disabled:!1})),v){const e=S(In.a.date);x.push(_v({content:e,tooltipDescription:S(In.a.dateDescription),disabled:!1}))}if(y&&x.push(Bv({content:S(In.a.placeholderText),disabled:!1})),b){const e=S(In.a.status);x.push($v({content:e,tooltipDescription:S(In.a.statusDescription),disabled:!1}))}g&&x.push(...g),u&&x.push(zv({content:S(In.a.viewMore),disabled:!1}));const N=x.slice(0,C).map(Fv),R=x.slice(C);return[N,(k?R:(e=>e.sort((e,t)=>Gg.includes(e.value.name)&&Gg.includes(t.value.name)?Gg.indexOf(e.value.name)-Gg.indexOf(t.value.name):Gg.includes(t.value.name)?-1:Gg.includes(e.value.name)||Yg(e)&&!Yg(t)?1:Yg(t)&&!Yg(e)||e.content<t.content?-1:1))(R)).map(Uv(S(In.a.insertMenu)))]},Ov);var Wv=n("MtlP"),Vv=n.n(Wv);const Kv=E.default.span`
  width: 42px;

  display: flex;
  align-items: center;

  > div,
  > span {
    display: flex;
  }

  > div > div {
    display: flex;
  }
`,qv=a.a.memo(e=>a.a.createElement(Kv,null,a.a.createElement(Vv.a,{label:e.label}),a.a.createElement(_e.e,null,a.a.createElement(q.a,{label:e.label})))),Gv=a.a.memo(e=>a.a.createElement(O.a,{ref:e.handleRef,selected:e.selected,disabled:e.disabled,onClick:e.onClick,spacing:e.spacing,iconBefore:a.a.createElement(qv,{label:e.label}),title:a.a.createElement(Te.ToolTipContent,{description:e.label,shortcutOverride:"/"})})),Yv=()=>{};class Xv extends a.a.PureComponent{constructor(){super(...arguments),this.state={isPlusMenuOpen:!1,emojiPickerOpen:!1,buttons:[],dropdownItems:[]},this.onOpenChange=e=>{const t={isPlusMenuOpen:e.isPlusMenuOpen,emojiPickerOpen:this.state.emojiPickerOpen};this.state.emojiPickerOpen&&!e.open&&(t.emojiPickerOpen=!1),this.setState(t,()=>{const{dispatchAnalyticsEvent:e}=this.props;if(!e)return;const{isPlusMenuOpen:t}=this.state;return e(t?{action:mt.a.OPENED,actionSubject:mt.b.PLUS_MENU,eventType:mt.d.UI}:{action:mt.a.CLOSED,actionSubject:mt.b.PLUS_MENU,eventType:mt.d.UI})})},this.togglePlusMenuVisibility=()=>{const{isPlusMenuOpen:e}=this.state;this.onOpenChange({isPlusMenuOpen:!e})},this.toggleEmojiPicker=(e=mt.e.TOOLBAR)=>{this.setState(e=>({emojiPickerOpen:!e.emojiPickerOpen}),()=>{if(this.state.emojiPickerOpen){const{dispatchAnalyticsEvent:t}=this.props;t&&t({action:mt.a.OPENED,actionSubject:mt.b.PICKER,actionSubjectId:mt.c.PICKER_EMOJI,attributes:{inputMethod:e},eventType:mt.d.UI})}})},this.handleEmojiButtonRef=e=>{const t=zn.a.findDOMNode(e);t&&(this.emojiButtonRef=t)},this.handlePlusButtonRef=e=>{const t=zn.a.findDOMNode(e);t&&(this.plusButtonRef=t)},this.handleDropDownButtonRef=e=>{const t=zn.a.findDOMNode(e);t&&(this.dropdownButtonRef=t)},this.onPickerRef=e=>{e?document.addEventListener("click",this.handleClickOutside):document.removeEventListener("click",this.handleClickOutside),this.pickerRef=e},this.handleClickOutside=e=>{const t=this.pickerRef&&zn.a.findDOMNode(this.pickerRef);var n;(!t||e.target&&(n=e.target,document.body.contains(n))&&!t.contains(e.target))&&this.toggleEmojiPicker()},this.toDropdownItems=Object(qg.default)(e=>[{items:e}]),this.toggleLinkPanel=e=>{const{editorView:t}=this.props;return Object(Vm.j)(e)(t.state,t.dispatch),!0},this.insertMention=e=>{const{editorView:t}=this.props;return Object(Mg.a)(e)(t.state,t.dispatch),!0},this.insertTable=e=>{const{editorView:t}=this.props;return Object(bt.d)({action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.TABLE,attributes:{inputMethod:e},eventType:mt.d.TRACK})(Oi.c)(t.state,t.dispatch)},this.createDate=e=>{const{editorView:t}=this.props;return Eh(void 0,e)(t.state,t.dispatch),Ch()(t.state,t.dispatch),!0},this.createPlaceholderText=()=>{const{editorView:e}=this.props;return((e,t)=>{const n=e.tr;e.selection.empty||n.deleteSelection(),n.setMeta(Vh,{showInsertPanelAt:n.selection.anchor}),n.scrollIntoView(),t(n)})(e.state,e.dispatch),!0},this.insertLayoutColumns=e=>{const{editorView:t}=this.props;return(e=>Object(bt.d)({action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.LAYOUT,attributes:{inputMethod:e},eventType:mt.d.TRACK})(rf))(e)(t.state,t.dispatch),!0},this.createStatus=e=>{const{editorView:t}=this.props;return Object(jb.f)(e)(t.state,t.dispatch),!0},this.openMediaPicker=e=>{const{onShowMediaPicker:t,dispatchAnalyticsEvent:n}=this.props;return t&&(t(),n&&n({action:mt.a.OPENED,actionSubject:mt.b.PICKER,actionSubjectId:mt.c.PICKER_CLOUD,attributes:{inputMethod:e},eventType:mt.d.UI})),!0},this.insertTaskDecision=(e,t)=>()=>{const{editorView:n}=this.props;if(!n)return!1;const o="action"===e?"taskList":"decisionList";return Object(Zl.c)(n,o,t)(n.state,n.dispatch),!0},this.insertHorizontalRule=e=>{const{editorView:t}=this.props,n=Mn(t.state,t.state.selection.from,t.state.selection.to,e);return!!n&&(t.dispatch(n),!0)},this.insertExpand=()=>{const{state:e,dispatch:t}=this.props.editorView;return Object(no.e)(e,t)},this.insertBlockType=e=>()=>{const{editorView:t,onInsertBlockType:n}=this.props,{state:o,dispatch:r}=t;return n(e)(o,r),!0},this.handleSelectedEmoji=e=>(this.props.editorView.focus(),function(e,t){return(n,r)=>{const{emoji:i}=n.schema.nodes;if(i&&e){const a=i.createChecked(Object(o.a)(Object(o.a)({},e),{},{text:e.fallback||e.shortName})),c=n.schema.text(" ");if(r){const e=Be.Fragment.fromArray([a,c]),o=Object(f.safeInsert)(e)(n.tr);t&&Object(bt.a)(n,o,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.EMOJI,attributes:{inputMethod:t},eventType:mt.d.TRACK}),r(o.setSelection(s.Selection.near(o.doc.resolve(n.selection.$from.pos+e.size))))}return!0}return!1}}(e,mt.e.PICKER)(this.props.editorView.state,this.props.editorView.dispatch),this.toggleEmojiPicker(),!0),this.openElementBrowser=()=>{Object(Ig.c)()(this.props.editorView.state,this.props.editorView.dispatch)},this.onItemActivated=({item:e,inputMethod:t})=>{const{editorView:n,editorActions:o,handleImageUpload:r,expandEnabled:i}=this.props;switch(n.hasFocus()||n.focus(),e.value.name){case"link":this.toggleLinkPanel(t);break;case"table":this.insertTable(t);break;case"image upload":if(r){const{state:e,dispatch:t}=n;r()(e,t)}break;case"media":this.openMediaPicker(t);break;case"mention":this.insertMention(t);break;case"emoji":this.toggleEmojiPicker(t);break;case"codeblock":case"blockquote":case"panel":this.insertBlockType(e.value.name)();break;case"action":case"decision":this.insertTaskDecision(e.value.name,t)();break;case"horizontalrule":this.insertHorizontalRule(t);break;case"macro":this.openElementBrowser();break;case"date":this.createDate(t);break;case"placeholder text":this.createPlaceholderText();break;case"layout":this.insertLayoutColumns(t);break;case"status":this.createStatus(t);break;case"expand":if(i){this.insertExpand();break}default:if(e&&e.onClick){e.onClick(o);break}}this.setState({isPlusMenuOpen:!1})},this.insertToolbarMenuItem=e=>this.onItemActivated({item:e,inputMethod:mt.e.TOOLBAR}),this.insertInsertMenuItem=({item:e})=>this.onItemActivated({item:e,inputMethod:mt.e.INSERT_MENU})}static getDerivedStateFromProps(e,t){const[n,r]=Hv({isTypeAheadAllowed:e.isTypeAheadAllowed,tableSupported:e.tableSupported,mediaUploadsEnabled:e.mediaUploadsEnabled,mediaSupported:e.mediaSupported,imageUploadSupported:e.imageUploadSupported,imageUploadEnabled:e.imageUploadEnabled,mentionsSupported:e.mentionsSupported,actionSupported:e.actionSupported,decisionSupported:e.decisionSupported,linkSupported:e.linkSupported,linkDisabled:e.linkDisabled,emojiDisabled:e.emojiDisabled,nativeStatusSupported:e.nativeStatusSupported,dateEnabled:e.dateEnabled,placeholderTextEnabled:e.placeholderTextEnabled,horizontalRuleEnabled:e.horizontalRuleEnabled,layoutSectionEnabled:e.layoutSectionEnabled,expandEnabled:e.expandEnabled,macroProvider:e.macroProvider,showElementBrowserLink:e.showElementBrowserLink,emojiProvider:e.emojiProvider,availableWrapperBlockTypes:e.availableWrapperBlockTypes,insertMenuItems:e.insertMenuItems,schema:e.editorView.state.schema,numberOfButtons:e.buttons,formatMessage:e.intl.formatMessage,isNewMenuEnabled:e.replacePlusMenuWithElementBrowser});return Object(o.a)(Object(o.a)({},t),{},{buttons:n,dropdownItems:r})}componentDidUpdate(e){e.buttons!==this.props.buttons&&this.setState({emojiPickerOpen:!1})}renderPopup(){const{emojiPickerOpen:e}=this.state,{popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,emojiProvider:r}=this.props,i=this.state.dropdownItems.some(({value:{name:e}})=>"emoji"===e)?this.dropdownButtonRef:this.emojiButtonRef;return e&&i&&r?a.a.createElement(m.a,{target:i,fitHeight:350,fitWidth:350,offset:[0,3],mountTo:t,boundariesElement:n,scrollableElement:o},a.a.createElement(Mp,{emojiProvider:r,onSelection:this.handleSelectedEmoji,onPickerRef:this.onPickerRef})):null}getLegacyInsertMenu(){const{isPlusMenuOpen:e,dropdownItems:t}=this.state,{popupsMountPoint:n,popupsBoundariesElement:o,popupsScrollableElement:r,isDisabled:i,isReducedSpacing:s,intl:{formatMessage:c}}=this.props,l=c(In.a.insertMenu),d=s?"none":"default";return a.a.createElement(Le,{items:this.toDropdownItems(t),onItemActivated:this.insertInsertMenuItem,onOpenChange:this.onOpenChange,mountTo:n,boundariesElement:o,scrollableElement:r,isOpen:e,fitHeight:188,fitWidth:175,zIndex:je.w},a.a.createElement(Gv,{handleRef:this.handleDropDownButtonRef,selected:e,disabled:i,onClick:this.togglePlusMenuVisibility,spacing:d,label:l}))}getElementBrowserForInsertMenu(){const{isPlusMenuOpen:e,dropdownItems:t}=this.state,{popupsMountPoint:n,popupsBoundariesElement:o,popupsScrollableElement:r,isDisabled:i,isReducedSpacing:s,intl:{formatMessage:c},editorView:l}=this.props,d=c(In.a.insertMenu),u=s?"none":"default";return a.a.createElement(a.a.Fragment,null,e&&a.a.createElement(m.a,{target:this.plusButtonRef,fitHeight:500,fitWidth:350,offset:[0,3],mountTo:n,boundariesElement:o,scrollableElement:r},a.a.createElement(Wg,{editorView:l,dropdownItems:t,onInsert:this.insertInsertMenuItem,toggleVisiblity:this.togglePlusMenuVisibility})),a.a.createElement(Gv,{handleRef:this.handlePlusButtonRef,selected:e,disabled:i,onClick:this.togglePlusMenuVisibility,spacing:u,label:d}))}renderInsertMenu(){const{isPlusMenuOpen:e,dropdownItems:t}=this.state,{isDisabled:n,isReducedSpacing:o,intl:{formatMessage:r},replacePlusMenuWithElementBrowser:i}=this.props,s=r(In.a.insertMenu),c=o?"none":"default";return 0===t.length||n?a.a.createElement("div",null,a.a.createElement(Gv,{handleRef:this.handleDropDownButtonRef,selected:e,disabled:n,onClick:this.togglePlusMenuVisibility,spacing:c,label:s})):i?this.getElementBrowserForInsertMenu():this.getLegacyInsertMenu()}render(){const{buttons:e,dropdownItems:t}=this.state,{isDisabled:n,isReducedSpacing:o}=this.props;return 0===e.length&&0===t.length?null:a.a.createElement(_e.b,{width:o?"small":"large"},e.map(e=>a.a.createElement(O.a,{item:e,ref:"emoji"===e.value.name?this.handleEmojiButtonRef:Yv,key:e.value.name,spacing:o?"none":"default",disabled:n||e.isDisabled,iconBefore:e.elemBefore,selected:e.isActive,title:e.title,onItemClick:this.insertToolbarMenuItem})),a.a.createElement(_e.j,null,this.renderPopup(),this.renderInsertMenu()),this.props.showSeparator&&a.a.createElement(_e.g,null))}}var Jv=Object(h.g)(Xv),Zv=n("J/xJ"),Qv=n("qeFW");function ey(e){return Object(Zv.c)(e,mt.e.TOOLBAR)}var ty,ny=(e={})=>({name:"insertBlock",primaryToolbarComponent({editorView:t,editorActions:n,dispatchAnalyticsEvent:o,providerFactory:r,popupsMountPoint:i,popupsBoundariesElement:s,popupsScrollableElement:c,toolbarSize:l,disabled:u,isToolbarReducedSpacing:p,isLastItem:h}){const f=(e=>{switch(e){case bn.a.XXL:case bn.a.XL:case bn.a.L:case bn.a.M:return 7;case bn.a.S:return 2;default:return 0}})(l);return a.a.createElement(Pd.a,{providerFactory:r,providers:["emojiProvider"],renderNode:r=>a.a.createElement(d.a,{plugins:{typeAheadState:Qv.a,blockTypeState:xg.b,mediaState:Ag.a,mentionState:_o.b,macroState:ih.a,hyperlinkState:rb.d,emojiState:Er,dateState:yh,imageUpload:Cu,placeholderTextState:Vh,layoutState:Jh},render:({typeAheadState:d,mentionState:m,blockTypeState:b,mediaState:g,macroState:v={},hyperlinkState:y,emojiState:O,dateState:E,imageUpload:w,placeholderTextState:C,layoutState:T})=>a.a.createElement(Jv,{buttons:f,isReducedSpacing:p,isDisabled:u,isTypeAheadAllowed:d&&d.isAllowed,editorView:t,tableSupported:e.allowTables,actionSupported:!!t.state.schema.nodes.taskItem,mentionsSupported:!(!m||!m.mentionProvider),decisionSupported:!!t.state.schema.nodes.decisionItem,dateEnabled:!!E,placeholderTextEnabled:C&&C.allowInserting,layoutSectionEnabled:!!T,expandEnabled:!!e.allowExpand,mediaUploadsEnabled:g&&g.allowsUploads,onShowMediaPicker:g&&g.showMediaPicker,mediaSupported:!!g,imageUploadSupported:!!w,imageUploadEnabled:w&&w.enabled,handleImageUpload:Su,availableWrapperBlockTypes:b&&b.availableWrapperBlockTypes,linkSupported:!!y,linkDisabled:!y||!y.canInsertLink||!!y.activeLinkMark,emojiDisabled:!O||!O.emojiProvider,emojiProvider:r.emojiProvider,nativeStatusSupported:e.nativeStatusSupported,horizontalRuleEnabled:e.horizontalRuleEnabled,onInsertBlockType:ey,onInsertMacroFromMacroBrowser:jg.a,macroProvider:v.macroProvider,popupsMountPoint:i,popupsBoundariesElement:s,popupsScrollableElement:c,insertMenuItems:e.insertMenuItems,editorActions:n,dispatchAnalyticsEvent:o,replacePlusMenuWithElementBrowser:e.replacePlusMenuWithElementBrowser,showElementBrowserLink:e.showElementBrowserLink,showSeparator:!h&&l<=bn.a.S})})})}});!function(e){e.ACTIVATE="ACTIVATE",e.FIND="FIND",e.UPDATE_DECORATIONS="UPDATE_DECORATIONS",e.FIND_NEXT="FIND_NEXT",e.FIND_PREVIOUS="FIND_PREVIOUS",e.REPLACE="REPLACE",e.REPLACE_ALL="REPLACE_ALL",e.CANCEL="CANCEL",e.BLUR="BLUR",e.UPDATE_FOCUS_ELEMENT="UPDATE_FOCUS_ELEMENT",e.TOGGLE_MATCH_CASE="TOGGLE_MATCH_CASE"}(ty||(ty={}));var oy=e=>(t,n)=>{switch(n.type){case ty.ACTIVATE:case ty.FIND:return Object(o.a)(Object(o.a)({},t),{},{isActive:!0,shouldFocus:n.type===ty.ACTIVATE,findText:void 0!==n.findText?n.findText:t.findText,matches:n.matches||t.matches,index:void 0!==n.index?n.index:t.index});case ty.UPDATE_DECORATIONS:return Object(o.a)(Object(o.a)({},t),{},{decorationSet:n.decorationSet});case ty.FIND_NEXT:case ty.FIND_PREVIOUS:return Object(o.a)(Object(o.a)({},t),{},{index:n.index,decorationSet:n.decorationSet});case ty.REPLACE:case ty.REPLACE_ALL:return Object(o.a)(Object(o.a)({},t),{},{replaceText:n.replaceText,decorationSet:n.decorationSet,matches:n.matches,index:n.index});case ty.CANCEL:return e();case ty.BLUR:return Object(o.a)(Object(o.a)({},t),{},{shouldFocus:!1});case ty.UPDATE_FOCUS_ELEMENT:return Object(o.a)(Object(o.a)({},t),{},{focusElementRef:n.focusElementRef});case ty.TOGGLE_MATCH_CASE:return Object(o.a)(Object(o.a)({},t),{},{shouldMatchCase:!t.shouldMatchCase});default:return t}};const ry=new s.PluginKey("findReplace");var iy=n("WwDD");const ay=(e,t)=>t.map(({start:t,end:n},o)=>sy(t,n,o===e)),sy=(e,t,n)=>{let o=iy.b;return n&&(o+=" "+iy.c),Yt.a.inline(e,t,{class:o})};function cy(e,t,n,o=0){let r=[];const i=t.length;let a=null;const s=e=>{if(!e)return;let{text:a,pos:s}=e;const c=o+s;n||(t=t.toLowerCase(),a=a.toLowerCase());let l=a.indexOf(t);for(;-1!==l;){const e=l+i;r.push({start:c+l,end:c+e}),l=a.indexOf(t,e)}};return i>0&&(e.descendants((e,t)=>{e.isText?null===a?a={text:e.text,pos:t}:a.text=a.text+e.text:(s(a),a=null)}),a&&s(a)),r}function ly(e,t,n=!1){if(n){let n=t.findIndex(t=>t.start>=e)-1;return n<0&&(n=t.length-1),n}return Math.max(t.findIndex(t=>t.start>=e),0)}const dy=(e,t)=>(e+1)%t,uy=(e,t,n,o,r=0)=>o[n]?s.TextSelection.create(t,o[n].start+r):e,py=(e,t)=>{if(!t)return;const n=e.find(t.start,t.end);return n.length?n.find(e=>e.from===t.start&&e.to===t.end):void 0},hy=(e,t,n)=>{const o=e.find(),r=(e=e.remove(t.map(e=>e.copy(e.from,e.to)))).find(),i=my(t,o,r);return i.length>0&&(e=e.add(n,i)),e},fy=(e,t,n)=>(t.filter(e=>!!e).map(t=>py(e,t)).forEach(t=>{t&&(e=hy(e,[t],n))}),e),my=(e,t,n)=>{let o=[];if(t.length-e.length>n.length){const r=e.length>0?e[0].from:0,i=by(t,r),a=by(n,r),s=Math.min(i,a),c=t.slice(s),l=n.slice(s),d=[],u=c.length-l.length;let p=!1,h=0;for(let t=0;t<c.length;t++){const n=c[t];if(e.find(e=>e.from===n.from)){h-=1;continue}let o=t+h;for(o>=l.length&&(d.push(n),d.length===u&&(p=!0));o<l.length;o++){const e=l[o];if(n.from===e.from)break;if(e.from>n.from||o===l.length-1){d.push(n),h-=1,d.length===u&&(p=!0);break}}if(p)break}o=d.filter(t=>!e.find(e=>t.from===e.from))}return o},by=(e,t)=>{let n=0;for(let o=e.length-1;o>=0;o-=100){if(e[o].from<t){n=o;for(let r=o;r<=e.length-1&&e[r].from<=t;r++)n=r;break}o<100&&o>0&&(o=100)}return n},gy=(e,t,n)=>{const{from:o,to:r,slice:i}=t,a=i.content.size;return o+a>=e.start&&r-a<=e.end||n.mapping.map(o)+a>=e.start&&n.mapping.map(r)-a<=e.end},vy=e=>e&&e.hasOwnProperty("slice"),yy={isActive:!1,shouldFocus:!1,findText:"",replaceText:"",index:0,matches:[],decorationSet:Yt.b.empty,focusElementRef:void 0,shouldMatchCase:!1},{createCommand:Oy,getPluginState:Ey,createPluginState:wy}=Object(Xt.a)(ry,oy(()=>yy),{onDocChanged:(e,t)=>{const{isActive:n,findText:r}=t;if(!n||!r)return t;if(!e.steps.find(vy))return t;let{index:i,decorationSet:a,matches:s,shouldMatchCase:c}=t;const l=cy(e.doc,r,c);a=a.map(e.mapping,e.doc);const d=a.find().length,u=s.map(t=>({start:e.mapping.map(t.start),end:e.mapping.map(t.end)}));let p=[],h=[];if(l.length>0&&0===d?p=l:0===l.length&&d>0?a=Yt.b.empty:(l.length>0||d>0)&&e.steps.forEach(t=>{var n,o,r;vy(t)&&(p=[...p,...l.filter(n=>gy(n,t,e)&&!py(a,n))],h=[...h,...(n=u.filter(n=>gy(n,t,e)&&!!py(a,n)),o=l,r=(e,t)=>e.start===t.start&&e.end===t.end,n.filter(e=>-1===o.findIndex(t=>r?r(e,t):e===t)))])}),h.length>0){const t=h.reduce((e,t)=>[...e,...a.find(t.start,t.end)],[]);a=hy(a,t,e.doc)}p.length>0&&(a=a.add(e.doc,ay(e.selection.from,p)));let f=i;const m=u[i];m&&(f=l.findIndex(e=>e.start===m.start)),void 0!==f&&-1!==f||(f=ly(e.selection.from,l));const b=l[f];return a=fy(a,[m,b],e.doc),b&&(a=a.add(e.doc,ay(0,[b]))),Object(o.a)(Object(o.a)({},t),{},{matches:l,index:f,decorationSet:a})}});var Cy=new class{stop(){this.rafId&&cancelAnimationFrame(this.rafId)}async applyAllSearchDecorations(e,t,n,o){if(this.stop(),this.addDecorations=n,this.removeDecorations=o,!t)return;const r=t.querySelector(".ProseMirror");if(!r)return;const i=this.calcDecorationPositions(e,t,r),{startPos:a,endPos:s,viewportStartPos:c,viewportEndPos:l}=i;let d=0,u=c,p=l-2e3;for(await this.updateDecorationsBetween(e,c,l);u>a||p<s;)if(d++%2==0&&u>a||p>=s){const t=u-a;u=Math.max(u-2e3,a),await this.updateDecorationsBetween(e,u,u+Math.min(t,2e3))}else p=Math.min(p+2e3,s),await this.updateDecorationsBetween(e,p,Math.min(p+2e3,s))}async updateDecorationsBetween(e,t,n){await this.removeDecorationsBetween(e,t,n),await this.addDecorationsBetween(e,t,n)}async addDecorationsBetween(e,t,n){const{selection:o}=e.state,{matches:r,decorationSet:i}=Ey(e.state);if(0===r.length)return;const a=r.filter(e=>e.start>=t&&(void 0===n||e.start<n)),s=r.find(e=>e.start>=o.from),c=a.findIndex(e=>e===s);return await this.batchRequests(e=>{let t=a.slice(e,e+100);if(0===t.length)return!1;let n=c>=e&&c<e+100;if(s&&n){py(i,s)&&(t.splice(c%100,1),n=!1)}this.addDecorations&&this.addDecorations(ay(n?c%100:-1,t))},{increment:100,until:a.length})}async removeDecorationsBetween(e,t,n){const{decorationSet:o}=Ey(e.state),r=o.find(t,n);if(0!==r.length)return await this.batchRequests(e=>{let n=r.slice(e,e+100);if(0===n.length)return!1;for(let o=0;o<n.length&&!(n[o].from>=t);o++)n=n.slice(1);this.removeDecorations&&this.removeDecorations(n)},{increment:100,until:r.length})}calcDecorationPositions(e,t,n){const o=t.getBoundingClientRect(),r=n.getBoundingClientRect();return{viewportStartPos:this.getStartPos(e,0,r.left),viewportEndPos:this.getEndPos(e,o.top+o.height,r.left),startPos:1,endPos:e.state.doc.nodeSize}}getStartPos(e,t,n){const o=e.posAtCoords({top:t,left:n});return o?o.pos:1}getEndPos(e,t,n){const o=e.state.doc.nodeSize,r=e.posAtCoords({top:t,left:n});return r?r.pos:o}batchRequests(e,t){let n=0;const{increment:o,until:r}=t;return new Promise(t=>{const i=()=>{let a=e(n);for(;!1===a&&n<r;)n+=o,a=e(n);n<r?(n+=o,this.rafId=requestAnimationFrame(i)):(this.rafId=void 0,t())};this.rafId=requestAnimationFrame(i)})}};const Ty=(e,t)=>{const n=Ey(e),{matches:o,findText:r}=n;let{decorationSet:i,index:a}=n;if(r){const n=ly(e.selection.from,o,"previous"===t);a=a===n?"next"===t?dy(a,o.length):(s=a,c=o.length,(s-1+c)%c):n,i=xy(e,a)}var s,c;return{type:"next"===t?ty.FIND_NEXT:ty.FIND_PREVIOUS,index:a,decorationSet:i}},Sy=e=>Oy(t=>{const{decorationSet:n}=Ey(t);return{type:ty.UPDATE_DECORATIONS,decorationSet:n.add(t.doc,e)}}),ky=e=>Oy(t=>{const{decorationSet:n}=Ey(t);return{type:ty.UPDATE_DECORATIONS,decorationSet:hy(n,e,t.doc)}}),xy=(e,t)=>{let{decorationSet:n,index:o,matches:r}=Ey(e);const i=r[o],a=r[t];if(o===t)return n;const s=py(n,i),c=py(n,a),l=[];return s&&l.push(s),c&&l.push(c),l.length>0&&(l.sort((e,t)=>e.from<t.from?-1:1),n=hy(n,l,e.doc)),i&&(n=n.add(e.doc,[sy(i.start,i.end)])),a&&(n=n.add(e.doc,[sy(a.start,a.end,!0)])),n},Ay=({triggerMethod:e})=>Object(bt.d)(t=>({eventType:mt.d.UI,action:mt.a.ACTIVATED,actionSubject:mt.b.FIND_REPLACE_DIALOG,attributes:{inputMethod:t.selection instanceof s.TextSelection&&!t.selection.empty?mt.e.PREFILL:mt.e.KEYBOARD,triggerMethod:e}}))(Oy(e=>{const{selection:t}=e;let n,o,r;if(t instanceof s.TextSelection&&!t.empty){n=function(e){let t="";const n=e.content().content;for(let o=0;o<n.childCount;o++)t+=n.child(o).textContent;return t}(t);const{shouldMatchCase:i}=Ey(e);o=cy(e.doc,n,i),r=ly(t.from,o)}return{type:ty.ACTIVATE,findText:n,matches:o,index:r}})),jy=({editorView:e,containerElement:t,keyword:n})=>Object(bt.d)({eventType:mt.d.TRACK,action:mt.a.FIND_PERFORMED,actionSubject:mt.b.TEXT})(((e,t,n)=>Object(He.l)(Oy(o=>{const{selection:r}=o,{shouldMatchCase:i}=Ey(o),a=void 0!==n?cy(o.doc,n,i):[],s=ly(r.from,a);return Cy.applyAllSearchDecorations(e,t,t=>Sy(t)(e.state,e.dispatch),t=>ky(t)(e.state,e.dispatch)),{type:ty.FIND,findText:n||"",matches:a,index:s}},(e,t)=>{const{selection:o}=t,{shouldMatchCase:r}=Ey(t),i=void 0!==n?cy(t.doc,n,r):[];if(i.length>0){const t=ly(o.from,i);return e.setSelection(uy(e.selection,e.doc,t,i))}return e})))(e,t,n)),Iy=({triggerMethod:e})=>Object(bt.d)({eventType:mt.d.TRACK,action:mt.a.FIND_NEXT_PERFORMED,actionSubject:mt.b.TEXT,attributes:{triggerMethod:e}})(Object(He.l)(Oy(e=>Ty(e,"next"),(e,t)=>{const{matches:n,index:o}=Ey(t);let r=ly(t.selection.from,n);return r===o&&(r=dy(r,n.length)),e.setSelection(uy(e.selection,e.doc,r,n))}))),My=({triggerMethod:e})=>Object(bt.d)({eventType:mt.d.TRACK,action:mt.a.FIND_PREV_PERFORMED,actionSubject:mt.b.TEXT,attributes:{triggerMethod:e}})(Object(He.l)(Oy(e=>Ty(e,"previous"),(e,t)=>{const{matches:n}=Ey(t),o=ly(t.selection.from,n,!0);return e.setSelection(uy(e.selection,e.doc,o,n))}))),Ny=({triggerMethod:e,replaceText:t})=>Object(bt.d)({eventType:mt.d.TRACK,action:mt.a.REPLACED_ONE,actionSubject:mt.b.TEXT,attributes:{triggerMethod:e}})((e=>Object(He.l)(Oy(t=>{const n=Ey(t),{findText:o}=n;let{decorationSet:r,matches:i,index:a}=n;return r=xy(t,dy(a,i.length)),-1===e.toLowerCase().indexOf(o.toLowerCase())?(r=fy(r,[i[a]],t.doc),i.splice(a,1),a>i.length-1&&(a=0)):a=dy(a,i.length),{type:ty.REPLACE,replaceText:e,decorationSet:r,matches:i,index:a}},(t,n)=>{const{matches:o,index:r,findText:i}=Ey(n);if(o[r]){const{start:n,end:a}=o[r],s=dy(r,o.length);t.insertText(e,n,a).setSelection(uy(t.selection,t.doc,s,o,0===s?0:e.length-i.length))}return t})))(t)),Ry=({replaceText:e})=>Object(bt.d)({eventType:mt.d.TRACK,action:mt.a.REPLACED_ALL,actionSubject:mt.b.TEXT})((e=>Oy({type:ty.REPLACE_ALL,replaceText:e,decorationSet:Yt.b.empty,matches:[],index:0},(t,n)=>(Ey(n).matches.forEach(n=>{t.insertText(e,t.mapping.map(n.start),t.mapping.map(n.end))}),t.setMeta("scrollIntoView",!1),t)))(e)),Py=({triggerMethod:e})=>Object(bt.d)({eventType:mt.d.UI,action:mt.a.DEACTIVATED,actionSubject:mt.b.FIND_REPLACE_DIALOG,attributes:{triggerMethod:e}})(Oy(()=>(Cy.stop(),{type:ty.CANCEL})));var Ly=()=>{const e={};return Object(Te.bindKeymapWithCommand)(Te.find.common,(e,t)=>(Ay({triggerMethod:mt.f.SHORTCUT})(e,t),!0),e),Object(ln.b)(e)},Dy=n("S/wU"),_y=n.n(Dy),By=n("WCbN"),$y=n.n(By),zy=n("NU1A"),Fy=n.n(zy),Uy=n("dSqg"),Hy=n.n(Uy),Wy=n("jbDV"),Vy=n.n(Wy);const Ky=Object(E.default)((function(e){return a.a.createElement(bp.a,Object.assign({},e))}))`
  /* increase specificity to override default Button styles */
  && {
    margin-left: 4px;
  }
`,qy=E.default.hr`
  width: 100%;
  border: none;
  background-color: ${p.N30A};
  margin: 4px 0px;
  height: 1px;
  border-radius: 1px;
`,Gy=E.default.div`
  display: flex;
  flex-direction: column;
  > *:not(${qy}) {
    margin: 0px 4px;
  }
`,Yy=E.default.div`
  display: flex;
  align-items: center;

  > * {
    flex: 0 0 auto;
    display: inline-flex;
    height: 32px;
  }
`,Xy=E.default.span`
  color: ${p.N60};
  font-size: 12px;
  flex: 0 0 auto;
  justify-content: center;
  align-items: center;
  margin-left: 4px;
  margin-right: 8px;
`;class Jy extends a.a.PureComponent{constructor(){super(...arguments),this.buttonRef=a.a.createRef(),this.handleClick=()=>{this.props.onClick(this.buttonRef)}}render(){const{title:e,icon:t,keymapDescription:n,disabled:r,isPressed:i}=this.props,s=Object(o.a)({},"boolean"==typeof i&&{"aria-pressed":i});return a.a.createElement(Ae.a,{content:a.a.createElement(Te.ToolTipContent,{description:e,keymap:Object(Te.findKeymapByDescription)(n)}),hideTooltipOnClick:!0,position:"top"},a.a.createElement(bp.a,Object.assign({label:e,appearance:"subtle",testId:e,ref:this.buttonRef,iconBefore:t,isDisabled:r,onClick:this.handleClick,isSelected:i,shouldFitContainer:!0},s)))}}Jy.defaultProps={keymapDescription:"no-keymap"};const Zy=Object(h.f)({find:{id:"fabric.editor.find",defaultMessage:"Find",description:"The word or phrase to search for on the document"},matchCase:{id:"fabric.editor.matchCase",defaultMessage:"Match case",description:"Toggle whether should also match case when searching for text"},findNext:{id:"fabric.editor.findNext",defaultMessage:"Find next",description:"Locate the next occurrence of the word or phrase that was searched for"},findPrevious:{id:"fabric.editor.findPrevious",defaultMessage:"Find previous",description:"Locate the previous occurrence of the word or phrase that was searched for"},closeFindReplaceDialog:{id:"fabric.editor.closeFindReplaceDialog",defaultMessage:"Close",description:'Cancel search and close the "Find and Replace" dialog'},noResultsFound:{id:"fabric.editor.noResultsFound",defaultMessage:"No results",description:"No matches were found for the word or phrase that was searched for"},resultsCount:{id:"fabric.editor.resultsCount",description:"Text for selected search match position and total results count",defaultMessage:"{selectedMatchPosition} of {totalResultsCount}"}});class Qy extends a.a.Component{constructor(e){super(e),this.state={findText:"",isComposing:!1},this.findTextfieldRef=a.a.createRef(),this.skipWhileComposing=e=>{this.state.isComposing||e()},this.focusFindTextfield=()=>{this.findTextfieldRef.current&&this.findTextfieldRef.current.select()},this.updateFindTextfieldValue=e=>{this.setState({findText:e,isComposing:!1}),this.findTextfieldRef.current&&(this.findTextfieldRef.current.value=e),this.updateFindValue(e)},this.handleFindChange=e=>this.skipWhileComposing(()=>{this.updateFindValue(e.target.value)}),this.updateFindValue=Object(xs.a)(e=>{this.setState({findText:e}),this.props.onFind(e)}),this.handleFindKeyDown=e=>this.skipWhileComposing(()=>{"Enter"===e.key?e.shiftKey?this.props.onFindPrev({triggerMethod:mt.f.KEYBOARD}):this.props.onFindNext({triggerMethod:mt.f.KEYBOARD}):"ArrowDown"===e.key&&this.props.onArrowDown()}),this.handleFindFocus=()=>{this.props.onFocusElementRefSet(this.findTextfieldRef)},this.handleFindNextClick=e=>this.skipWhileComposing(()=>{this.props.onFocusElementRefSet(e),this.props.onFindNext({triggerMethod:mt.f.BUTTON})}),this.handleFindPrevClick=e=>this.skipWhileComposing(()=>{this.props.onFocusElementRefSet(e),this.props.onFindPrev({triggerMethod:mt.f.BUTTON})}),this.handleCompositionStart=()=>{this.setState({isComposing:!0})},this.handleCompositionEnd=e=>{this.setState({isComposing:!1}),this.updateFindValue(e.target.value)},this.clearSearch=()=>{this.props.onCancel({triggerMethod:mt.f.BUTTON})},this.handleMatchCaseClick=e=>{this.props.allowMatchCase&&this.props.onToggleMatchCase&&(this.props.onFocusElementRefSet(e),this.props.onToggleMatchCase(),this.props.onFind(this.state.findText))};const{findText:t,intl:{formatMessage:n}}=e;t&&this.updateFindTextfieldValue(t),this.find=n(Zy.find),this.closeFindReplaceDialog=n(Zy.closeFindReplaceDialog),this.noResultsFound=n(Zy.noResultsFound),this.findNext=n(Zy.findNext),this.findPrevious=n(Zy.findPrevious),this.matchCase=n(Zy.matchCase),this.matchCaseIcon=a.a.createElement(Vy.a,{label:this.matchCase}),this.findNextIcon=a.a.createElement(Fy.a,{label:this.findNext}),this.findPrevIcon=a.a.createElement(Hy.a,{label:this.findPrevious}),this.closeIcon=a.a.createElement($y.a,{label:this.closeFindReplaceDialog})}componentDidMount(){this.focusFindTextfield(),this.props.onFindTextfieldRefSet(this.findTextfieldRef)}componentWillReceiveProps(e){e.findText&&e.findText!==this.state.findText&&this.updateFindTextfieldValue(e.findText),e.shouldFocus&&this.focusFindTextfield()}render(){const{findText:e,count:t,allowMatchCase:n,shouldMatchCase:o,intl:{formatMessage:r}}=this.props,i=r(Zy.resultsCount,{selectedMatchPosition:t.index+1,totalResultsCount:t.total});return a.a.createElement(Yy,null,a.a.createElement(Lb.a,{name:"find",appearance:"none",placeholder:this.find,defaultValue:e,ref:this.findTextfieldRef,autoComplete:"off",onChange:this.handleFindChange,onKeyDown:this.handleFindKeyDown,onBlur:this.props.onFindBlur,onFocus:this.handleFindFocus,onCompositionStart:this.handleCompositionStart,onCompositionEnd:this.handleCompositionEnd}),e&&a.a.createElement(Xy,null,0===t.total?this.noResultsFound:i),n&&a.a.createElement(Jy,{title:this.matchCase,icon:this.matchCaseIcon,onClick:this.handleMatchCaseClick,isPressed:o}),a.a.createElement(Jy,{title:this.findNext,icon:this.findNextIcon,keymapDescription:"Enter",onClick:this.handleFindNextClick,disabled:t.total<=1}),a.a.createElement(Jy,{title:this.findPrevious,icon:this.findPrevIcon,keymapDescription:"Shift Enter",onClick:this.handleFindPrevClick,disabled:t.total<=1}),a.a.createElement(Jy,{title:this.closeFindReplaceDialog,icon:this.closeIcon,keymapDescription:"Escape",onClick:this.clearSearch}))}}var eO=Object(h.g)(Qy);const tO=Object(h.f)({replaceWith:{id:"fabric.editor.replaceWith",defaultMessage:"Replace with",description:"The value that will replace the word or phrase that was searched for"},replace:{id:"fabric.editor.replace",defaultMessage:"Replace",description:"Replace only the currently selected instance of the word or phrase"},replaceAll:{id:"fabric.editor.replaceAll",defaultMessage:"Replace all",description:"Replace all instances of the word or phrase throughout the entire document"}});class nO extends a.a.PureComponent{constructor(e){super(e),this.replaceTextfieldRef=a.a.createRef(),this.skipWhileComposing=e=>{this.state.isComposing||e()},this.handleReplaceClick=()=>this.skipWhileComposing(()=>{this.props.onReplace({triggerMethod:mt.f.BUTTON,replaceText:this.state.replaceText})}),this.handleReplaceChange=e=>this.skipWhileComposing(()=>{this.updateReplaceValue(e.target.value)}),this.updateReplaceValue=e=>{const{dispatchAnalyticsEvent:t}=this.props;t&&t({eventType:mt.d.TRACK,action:mt.a.CHANGED_REPLACEMENT_TEXT,actionSubject:mt.b.FIND_REPLACE_DIALOG}),this.setState({replaceText:e})},this.handleReplaceKeyDown=e=>this.skipWhileComposing(()=>{"Enter"===e.key?this.props.onReplace({triggerMethod:mt.f.KEYBOARD,replaceText:this.state.replaceText}):"ArrowUp"===e.key&&this.props.onArrowUp()}),this.handleReplaceAllClick=()=>this.skipWhileComposing(()=>{this.props.onReplaceAll({replaceText:this.state.replaceText})}),this.handleReplaceFocus=()=>{this.props.onFocusElementRefSet(this.replaceTextfieldRef)},this.handleCompositionStart=()=>{this.setState({isComposing:!0})},this.handleCompositionEnd=e=>{this.setState({isComposing:!1}),this.updateReplaceValue(e.target.value)};const{replaceText:t,intl:{formatMessage:n}}=e;this.state={replaceText:t||"",isComposing:!1},this.replaceWith=n(tO.replaceWith),this.replace=n(tO.replace),this.replaceAll=n(tO.replaceAll)}componentDidMount(){this.props.onReplaceTextfieldRefSet(this.replaceTextfieldRef)}componentDidUpdate({replaceText:e}){const{replaceText:t}=this.props;t&&t!==e&&this.setState({replaceText:t,isComposing:!1})}render(){const{replaceText:e}=this.state,{canReplace:t}=this.props;return a.a.createElement(Yy,null,a.a.createElement(Lb.a,{name:"replace",appearance:"none",placeholder:this.replaceWith,defaultValue:e,ref:this.replaceTextfieldRef,autoComplete:"off",onChange:this.handleReplaceChange,onKeyDown:this.handleReplaceKeyDown,onFocus:this.handleReplaceFocus,onCompositionStart:this.handleCompositionStart,onCompositionEnd:this.handleCompositionEnd}),a.a.createElement(Ky,{testId:this.replace,onClick:this.handleReplaceClick,isDisabled:!t},this.replace),a.a.createElement(Ky,{testId:this.replaceAll,onClick:this.handleReplaceAllClick,isDisabled:!t},this.replaceAll))}}var oO=Object(h.g)(nO);class rO extends a.a.PureComponent{constructor(){super(...arguments),this.state={},this.setFindTextfieldRef=e=>{this.setState({findTextfieldRef:e})},this.setReplaceTextfieldRef=e=>{this.setState({replaceTextfieldRef:e})},this.setFocusToFind=()=>{const{findTextfieldRef:e}=this.state;e&&e.current&&e.current.focus()},this.setFocusToReplace=()=>{const{replaceTextfieldRef:e}=this.state;e&&e.current&&e.current.focus()}}render(){const{findText:e,count:t,shouldFocus:n,onFind:o,onFindBlur:r,onFindNext:i,onFindPrev:s,onFocusElementRefSet:c,onCancel:l,replaceText:d,onReplace:u,onReplaceAll:p,dispatchAnalyticsEvent:h,allowMatchCase:f,shouldMatchCase:m,onToggleMatchCase:b}=this.props;return a.a.createElement(Gy,null,a.a.createElement(eO,{allowMatchCase:f,shouldMatchCase:m,onToggleMatchCase:b,findText:e,count:t,shouldFocus:n,onFind:o,onFindBlur:r,onFindPrev:s,onFindNext:i,onFindTextfieldRefSet:this.setFindTextfieldRef,onFocusElementRefSet:c,onCancel:l,onArrowDown:this.setFocusToReplace}),a.a.createElement(qy,null),a.a.createElement(oO,{canReplace:t.total>0,replaceText:d,onReplace:u,onReplaceAll:p,onReplaceTextfieldRefSet:this.setReplaceTextfieldRef,onFocusElementRefSet:c,onArrowUp:this.setFocusToFind,dispatchAnalyticsEvent:h}))}}var iO=rO;const aO=E.default.div`
  display: flex;
  flex: 1 1 auto;
  justify-content: flex-end;
  padding: 0 8px;
  @media (max-width: ${je.y}px) {
    justify-content: center;
    padding: 0;
  }
`,sO=E.default.div`
  display: flex;
  flex-direction: column;
`,cO=Object(h.f)({findReplaceToolbarButton:{id:"fabric.editor.findReplaceToolbarButton",defaultMessage:"Find and replace",description:'"Find" highlights all instances of a word or phrase on the document, and "Replace" changes one or all of those instances to something else'}});class lO extends a.a.PureComponent{constructor(){super(...arguments),this.handleKeydown=e=>{e.metaKey&&"f"===e.key&&e.preventDefault()},this.toggleOpen=()=>{this.props.isActive?this.props.onCancel({triggerMethod:mt.f.TOOLBAR}):this.props.onActivate()}}componentDidMount(){window.addEventListener("keydown",this.handleKeydown)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeydown)}render(){const{popupsMountPoint:e,popupsBoundariesElement:t,popupsScrollableElement:n,isReducedSpacing:o,findText:r,replaceText:i,isActive:s,index:c,numMatches:l,intl:{formatMessage:d}}=this.props,u=d(cO.findReplaceToolbarButton),p=je.n-1;return a.a.createElement(aO,null,a.a.createElement(G.a,{mountTo:e,boundariesElement:t,scrollableElement:n,isOpen:s,handleEscapeKeydown:()=>{s&&this.props.onCancel({triggerMethod:mt.f.KEYBOARD})},fitWidth:352,zIndex:p,trigger:a.a.createElement(O.a,{spacing:o?"none":"default",selected:s,title:a.a.createElement(Te.ToolTipContent,{description:u,keymap:Object(Te.findKeymapByDescription)("Find")}),iconBefore:a.a.createElement(_y.a,{label:u}),onClick:this.toggleOpen})},a.a.createElement(sO,null,a.a.createElement(iO,Object.assign({findText:r,replaceText:i,count:{index:c,total:l}},this.props)))))}}var dO=Object(h.g)(lO);var uO=()=>({name:"findReplace",pmPlugins:()=>[{name:"findReplace",plugin:({dispatch:e})=>(e=>new s.Plugin({key:ry,state:wy(e,()=>yy),props:{decorations(e){const{isActive:t,findText:n,decorationSet:o}=Ey(e);if(t&&n)return o}}}))(e)},{name:"findReplaceKeymap",plugin:()=>Ly()}],primaryToolbarComponent({popupsBoundariesElement:e,popupsMountPoint:t,popupsScrollableElement:n,isToolbarReducedSpacing:o,editorView:r,containerElement:i,dispatchAnalyticsEvent:s}){const c=e=>{r.focus(),e();const{focusElementRef:t}=Ey(r.state);t&&t.current&&t.current.focus()},l=e=>{const{state:t,dispatch:n}=r;e(t,n)},u=()=>{c(()=>l(Ay({triggerMethod:mt.f.TOOLBAR})))},p=e=>{c(()=>l(jy({editorView:r,containerElement:i,keyword:e})))},h=({triggerMethod:e})=>{c(()=>l(Iy({triggerMethod:e})))},f=({triggerMethod:e})=>{c(()=>l(My({triggerMethod:e})))},m=({triggerMethod:e,replaceText:t})=>{c(()=>l(Ny({triggerMethod:e,replaceText:t})))},b=({replaceText:e})=>{c(()=>l(Ry({replaceText:e})))},g=()=>{l(Oy({type:ty.BLUR}))},v=({triggerMethod:e})=>{l(Py({triggerMethod:e})),r.focus()},y=e=>{var t;l((t=e,Oy({type:ty.UPDATE_FOCUS_ELEMENT,focusElementRef:t})))},O=()=>{l(Oy({type:ty.TOGGLE_MATCH_CASE}))},{findReplaceMatchCase:E}=Object(jn.b)(r.state);return a.a.createElement(d.a,{plugins:{findReplaceState:ry},render:({findReplaceState:r})=>a.a.createElement(dO,{allowMatchCase:E,shouldMatchCase:r.shouldMatchCase,onToggleMatchCase:O,isActive:r.isActive,findText:r.findText,index:r.index,numMatches:r.matches.length,replaceText:r.replaceText,shouldFocus:r.shouldFocus,popupsBoundariesElement:e,popupsMountPoint:t,popupsScrollableElement:n,isReducedSpacing:o,dispatchAnalyticsEvent:s,onFindBlur:g,onCancel:v,onActivate:u,onFind:p,onFindNext:h,onFindPrev:f,onReplace:m,onReplaceAll:b,onFocusElementRefSet:y})})}}),pO=n("twlq"),hO=n("4yVO"),fO=n("F/E8"),mO=n("pZ4U"),bO=n("cRXR"),gO=n("wN5q"),vO=n("77XF"),yO=n("iOxE");const OO=(e,t,n,o,r,i)=>{var a;const{state:s}=t;return e({action:mt.a.BROWSER_FREEZE,actionSubject:mt.b.EDITOR,attributes:{objectId:null===(a=Object(yO.b)(s))||void 0===a?void 0:a.objectId,freezeTime:n,nodeSize:s.doc.nodeSize,nodeCount:o?Object(vO.a)(t.state):void 0,participants:Object(gO.a)(t.state),interactionType:r,severity:i},eventType:mt.d.OPERATIONAL})};var EO=n("6Laz"),wO=n("PZQm"),CO=n.n(wO),TO=n("DH0k"),SO=n.n(TO),kO=function(e,t){e.block.ruler.before("paragraph","table",SO.a,{alt:["paragraph","reference"]})},xO=new Be.Schema({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(e){return["h"+e.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(e){return{params:e.getAttribute("data-params")||""}}}],toDOM:function(e){return["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")}}}],toDOM:function(e){return["ol",{start:1==e.attrs.order?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:function(e){return{tight:e.hasAttribute("data-tight")}}}],toDOM:function(e){return["ul",{"data-tight":e.attrs.tight?"true":null},0]}},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){return["img",e.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(e){return"italic"==e&&null}}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:function(e){return["a",e.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}}});var AO=function(e,t){this.schema=e,this.stack=[{type:e.topNodeType,content:[]}],this.marks=Be.Mark.none,this.tokenHandlers=t};function jO(e,t){return e.getAttrs?e.getAttrs(t):e.attrs instanceof Function?e.attrs(t):e.attrs}function IO(e){return"code_inline"==e||"code_block"==e||"fence"==e}function MO(e){return"\n"==e[e.length-1]?e.slice(0,e.length-1):e}function NO(){}AO.prototype.top=function(){return this.stack[this.stack.length-1]},AO.prototype.push=function(e){this.stack.length&&this.top().content.push(e)},AO.prototype.addText=function(e){if(e){var t,n=this.top().content,o=n[n.length-1],r=this.schema.text(e,this.marks);o&&(t=function(e,t){if(e.isText&&t.isText&&Be.Mark.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}(o,r))?n[n.length-1]=t:n.push(r)}},AO.prototype.openMark=function(e){this.marks=e.addToSet(this.marks)},AO.prototype.closeMark=function(e){this.marks=e.removeFromSet(this.marks)},AO.prototype.parseTokens=function(e){for(var t=0;t<e.length;t++){var n=e[t],o=this.tokenHandlers[n.type];if(!o)throw new Error("Token type `"+n.type+"` not supported by Markdown parser");o(this,n)}},AO.prototype.addNode=function(e,t,n){var o=e.createAndFill(t,n,this.marks);return o?(this.push(o),o):null},AO.prototype.openNode=function(e,t){this.stack.push({type:e,attrs:t,content:[]})},AO.prototype.closeNode=function(){this.marks.length&&(this.marks=Be.Mark.none);var e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)};var RO=function(e,t,n){this.tokens=n,this.schema=e,this.tokenizer=t,this.tokenHandlers=function(e,t){var n=Object.create(null),o=function(o){var r=t[o];if(r.block){var i=e.nodeType(r.block);IO(o)?n[o]=function(e,t){e.openNode(i,jO(r,t)),e.addText(MO(t.content)),e.closeNode()}:(n[o+"_open"]=function(e,t){return e.openNode(i,jO(r,t))},n[o+"_close"]=function(e){return e.closeNode()})}else if(r.node){var a=e.nodeType(r.node);n[o]=function(e,t){return e.addNode(a,jO(r,t))}}else if(r.mark){var s=e.marks[r.mark];IO(o)?n[o]=function(e,t){e.openMark(s.create(jO(r,t))),e.addText(MO(t.content)),e.closeMark(s)}:(n[o+"_open"]=function(e,t){return e.openMark(s.create(jO(r,t)))},n[o+"_close"]=function(e){return e.closeMark(s)})}else{if(!r.ignore)throw new RangeError("Unrecognized parsing spec "+JSON.stringify(r));IO(o)?n[o]=NO:(n[o+"_open"]=NO,n[o+"_close"]=NO)}};for(var r in t)o(r);return n.text=function(e,t){return e.addText(t.content)},n.inline=function(e,t){return e.parseTokens(t.children)},n.softbreak=n.softbreak||function(e){return e.addText("\n")},n}(e,n)};RO.prototype.parse=function(e){var t,n=new AO(this.schema,this.tokenHandlers);n.parseTokens(this.tokenizer.parse(e,{}));do{t=n.closeNode()}while(n.stack.length);return t};new RO(xO,CO()("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",getAttrs:function(e){return{order:+e.attrGet("order")||1}}},heading:{block:"heading",getAttrs:function(e){return{level:+e.tag.slice(1)}}},code_block:{block:"code_block"},fence:{block:"code_block",getAttrs:function(e){return{params:e.info||""}}},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:function(e){return{src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null}}},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:function(e){return{href:e.attrGet("href"),title:e.attrGet("title")||null}}},code_inline:{mark:"code"}});var PO=function(e,t){this.nodes=e,this.marks=t};PO.prototype.serialize=function(e,t){var n=new _O(this.nodes,this.marks,t);return n.renderContent(e),n.out};new PO({blockquote:function(e,t){e.wrapBlock("> ",null,t,(function(){return e.renderContent(t)}))},code_block:function(e,t){e.write("```"+(t.attrs.params||"")+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},heading:function(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t),e.closeBlock(t)},horizontal_rule:function(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list:function(e,t){e.renderList(t,"  ",(function(){return(t.attrs.bullet||"*")+" "}))},ordered_list:function(e,t){var n=t.attrs.order||1,o=String(n+t.childCount-1).length,r=e.repeat(" ",o+2);e.renderList(t,r,(function(t){var r=String(n+t);return e.repeat(" ",o-r.length)+r+". "}))},list_item:function(e,t){e.renderContent(t)},paragraph:function(e,t){e.renderInline(t),e.closeBlock(t)},image:function(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+e.esc(t.attrs.src)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")")},hard_break:function(e,t,n,o){for(var r=o+1;r<n.childCount;r++)if(n.child(r).type!=t.type)return void e.write("\\\n")},text:function(e,t){e.text(t.text)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:function(e,t,n,o){return DO(t,n,o,1)?"<":"["},close:function(e,t,n,o){return DO(t,n,o,-1)?">":"]("+e.esc(t.attrs.href)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")"}},code:{open:function(e,t,n,o){return LO(n.child(o),-1)},close:function(e,t,n,o){return LO(n.child(o-1),1)},escape:!1}});function LO(e,t){var n,o=/`+/g,r=0;if(e.isText)for(;n=o.exec(e.text);)r=Math.max(r,n[0].length);for(var i=r>0&&t>0?" `":"`",a=0;a<r;a++)i+="`";return r>0&&t<0&&(i+=" "),i}function DO(e,t,n,o){if(e.attrs.title)return!1;var r=t.child(n+(o<0?-1:0));if(!r.isText||r.text!=e.attrs.href||r.marks[r.marks.length-1]!=e)return!1;if(n==(o<0?1:t.childCount-1))return!0;var i=t.child(n+(o<0?-2:1));return!e.isInSet(i.marks)}var _O=function(e,t,n){this.nodes=e,this.marks=t,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.options=n||{},void 0===this.options.tightLists&&(this.options.tightLists=!1)};_O.prototype.flushClose=function(e){if(this.closed){if(this.atBlank()||(this.out+="\n"),null==e&&(e=2),e>1){var t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(var o=1;o<e;o++)this.out+=t+"\n"}this.closed=!1}},_O.prototype.wrapBlock=function(e,t,n,o){var r=this.delim;this.write(t||e),this.delim+=e,o(),this.delim=r,this.closeBlock(n)},_O.prototype.atBlank=function(){return/(^|\n)$/.test(this.out)},_O.prototype.ensureNewLine=function(){this.atBlank()||(this.out+="\n")},_O.prototype.write=function(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)},_O.prototype.closeBlock=function(e){this.closed=e},_O.prototype.text=function(e,t){for(var n=e.split("\n"),o=0;o<n.length;o++){var r=this.atBlank()||this.closed;this.write(),this.out+=!1!==t?this.esc(n[o],r):n[o],o!=n.length-1&&(this.out+="\n")}},_O.prototype.render=function(e,t,n){if("number"==typeof t)throw new Error("!");this.nodes[e.type.name](this,e,t,n)},_O.prototype.renderContent=function(e){var t=this;e.forEach((function(n,o,r){return t.render(n,e,r)}))},_O.prototype.renderInline=function(e){var t=this,n=[],o="",r=function(r,i,a){var s=r?r.marks:[];r&&"hard_break"===r.type.name&&(s=s.filter((function(t){if(a+1==e.childCount)return!1;var n=e.child(a+1);return t.isInSet(n.marks)&&(!n.isText||/\S/.test(n.text))})));var c=o;if(o="",r&&r.isText&&s.some((function(e){var n=t.marks[e.type.name];return n&&n.expelEnclosingWhitespace}))){var l=/^(\s*)(.*?)(\s*)$/m.exec(r.text),d=(l[0],l[1]),u=l[2],p=l[3];c+=d,o=p,(d||p)&&((r=u?r.withText(u):null)||(s=n))}var h=s.length&&s[s.length-1],f=h&&!1===t.marks[h.type.name].escape,m=s.length-(f?1:0);e:for(var b=0;b<m;b++){var g=s[b];if(!t.marks[g.type.name].mixable)break;for(var v=0;v<n.length;v++){var y=n[v];if(!t.marks[y.type.name].mixable)break;if(g.eq(y)){b>v?s=s.slice(0,v).concat(g).concat(s.slice(v,b)).concat(s.slice(b+1,m)):v>b&&(s=s.slice(0,b).concat(s.slice(b+1,v)).concat(g).concat(s.slice(v,m)));continue e}}}for(var O=0;O<Math.min(n.length,m)&&s[O].eq(n[O]);)++O;for(;O<n.length;)t.text(t.markString(n.pop(),!1,e,a),!1);if(c&&t.text(c),r){for(;n.length<m;){var E=s[n.length];n.push(E),t.text(t.markString(E,!0,e,a),!1)}f&&r.isText?t.text(t.markString(h,!0,e,a)+r.text+t.markString(h,!1,e,a+1),!1):t.render(r,e,a)}};e.forEach(r),r(null,0,e.childCount)},_O.prototype.renderList=function(e,t,n){var o=this;this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var r=void 0!==e.attrs.tight?e.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=r,e.forEach((function(i,a,s){s&&r&&o.flushClose(1),o.wrapBlock(t,n(s),e,(function(){return o.render(i,e,s)}))})),this.inTightList=i},_O.prototype.esc=function(e,t){return e=e.replace(/[`*\\~\[\]]/g,"\\$&"),t&&(e=e.replace(/^[:#\-*+]/,"\\$&").replace(/^(\d+)\./,"$1\\.")),e},_O.prototype.quote=function(e){var t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]},_O.prototype.repeat=function(e,t){for(var n="",o=0;o<t;o++)n+=e;return n},_O.prototype.markString=function(e,t,n,o){var r=this.marks[e.type.name],i=t?r.open:r.close;return"string"==typeof i?i:i(this,e,n,o)},_O.prototype.getEnclosingWhitespace=function(e){return{leading:(e.match(/^(\s+)/)||[])[0],trailing:(e.match(/(\s+)$/)||[])[0]}};const BO=e=>{e.core.ruler.before("inline","media",function(){const e=/!\[[^\]]*\]\([^)]+\)/g,t=["th_open","td_open","list_item_open"];return function(n){const o=e=>{const t=n.md.helpers.parseLinkDestination(e,e.indexOf("(")+1,e.length);if(t.ok){const e=n.md.normalizeLink(t.str);if(n.md.validateLink(e))return e}return""},r=e=>{const t=new n.Token("media_single_open","",1),r=new n.Token("media","",0);r.attrs=[["url",o(e)],["type","external"]];return[t,r,new n.Token("media_single_close","",-1)]},i=(e,t,o)=>{if(!e||0===e.length)return[];const r=new n.Token("inline","",1);return r.content=e,r.children=[],[...t,r,...o]};let a=[];const s=n.tokens.reduce((o,s,c,l)=>{if("inline"===s.type&&e.test(s.content)){const d=[];let u=c-1,p=l[u],h=[];for(;p&&p.level>0&&-1===t.indexOf(p.type);)d.unshift(p),u--,p=l[u];-1===t.indexOf(p.type)?d.unshift(p):u++;const f=d.map(e=>new n.Token(e.type.replace("_open","_close"),e.tag,-1)).reverse(),m=s.content.match(e);let b=s.content;m.forEach(e=>{const t=b.indexOf(e),n=b.substr(0,t);b=b.substr(t+e.length),h=[...h,...i(n,d,f),...r(e)]}),b.length&&(h=[...h,...i(b,d,f)]),a=[...a,...f.map(e=>e.type)],o=[...o.slice(0,u),...h]}else-1!==a.indexOf(s.type)?a.splice(a.indexOf(s.type),1):o.push(s);return o},[]);return n.tokens=s,!0}}())};const $O={nodes:{blockquote:"blockquote",paragraph:"paragraph",rule:"hr",heading:["heading","lheading"],codeBlock:["code","fence"],listItem:"list",image:"image"},marks:{em:"emphasis",strong:"text",link:["link","autolink","reference","linkify"],strike:"strikethrough",code:"backticks"}},zO={blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",attrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},hr:{node:"rule"},heading:{block:"heading",attrs:e=>({level:+e.tag.slice(1)})},softbreak:{node:"hardBreak"},hardbreak:{node:"hardBreak"},code_block:{block:"codeBlock"},list_item:{block:"listItem"},bullet_list:{block:"bulletList"},ordered_list:{block:"orderedList",attrs:e=>({order:+e.attrGet("order")||1})},code_inline:{mark:"code"},fence:{block:"codeBlock",attrs:e=>({language:e.info&&e.info.trim()||null})},media_single:{block:"mediaSingle",attrs:()=>({})},media:{node:"media",attrs:e=>({url:e.attrGet("url"),type:"external"})},emoji:{node:"emoji",attrs:e=>({shortName:`:${e.markup}:`,text:e.content})},table:{block:"table"},tr:{block:"tableRow"},th:{block:"tableHeader"},td:{block:"tableCell"},s:{mark:"strike"}},FO=CO()("zero",{html:!1,linkify:!0});FO.enable(["entity","escape"]);class UO{constructor(e=EO.a,t=FO){["nodes","marks"].forEach(n=>{for(const o in $O[n])e[n][o]&&t.enable($O[n][o])}),e.nodes.table&&t.use(kO),e.nodes.media&&e.nodes.mediaSingle&&t.use(BO),this.markdownParser=new RO(e,t,function(e,t){return Object.keys(t).reduce((n,o)=>{const r=t[o],i=r.block||r.node,a=r.mark;return(i&&e.nodes[i]||a&&e.marks[a])&&(n[o]=r),n},{})}(e,zO))}encode(e){throw new Error("This is not implemented yet")}parse(e){return this.markdownParser.parse(e)}}var HO=n("u5XY"),WO=n("Am/7");function VO(e){return!!e&&e.indexOf("urn:schemas-microsoft-com:office:word")>=0}function KO(e){return!!e&&e.indexOf("urn:schemas-microsoft-com:office:excel")>=0}function qO(...e){return t=>{let n=!0;return t.content.descendants(t=>(n=n&&e.indexOf(t.type)>-1,n)),n}}function GO(e,t){return n=>{const{marks:{code:o,link:r,annotation:i}}=e;if(!Array.isArray(t)||0===t.length)return n;const a=Be.Slice.fromJSON(e,n.toJSON()||{}),s=[r,i];return a.content.descendants((e,n,i)=>!(e.isText&&i&&i.isBlock)||(e.marks=[...e.marks&&!o.isInSet(t)&&e.marks.filter(e=>s.includes(e.type))||[],...i.type.allowedMarks(t).filter(e=>e.type!==r)],!1)),a}}function YO(e){if(!e)return!1;const{type:t}=e,n=t.createAndFill();return n&&n.nodeSize===e.nodeSize&&n.eq(e)}function XO(e){if(e instanceof s.NodeSelection&&(t=e.node,Boolean(t&&"panel"===t.type.name)))return e.node;var t;const{doc:{type:{schema:{nodes:{panel:n}}}}}=e.$from,o=Object(f.findParentNodeOfType)(n)(e);return o?o.node:null}function JO(e){const t=Object(Je.d)(Be.Fragment.from(e),e=>(e=>e.type===e.type.schema.nodes.layoutSection||e.type===e.type.schema.nodes.layoutColumn)(e)?e.content:e),n=[];return t.forEach(e=>n.push(e)),n}function ZO(e,t){return 0===t?JO(e):e}function QO(e,t,n){return t===n.childCount-1?JO(e):e}const eE=e=>{const{schema:t}=e.type;if(e.type===t.nodes.table){const n=[],{tableCell:o,tableHeader:r}=t.nodes;return e.descendants(e=>(e.type!==o&&e.type!==r||n.push(...Object(f.flatten)(e,!1).map(e=>e.node)),!0)),n}return e},tE=(e,t)=>0===t?eE(e):e,nE=(e,t,n)=>t===n.childCount-1?eE(e):e;var oE=n("VF/E");function rE(e){return(t,n)=>{const{schema:o,tr:{selection:r}}=t,{marks:{code:i},nodes:{decisionItem:a,decisionList:c,emoji:l,hardBreak:d,mention:u,paragraph:p,taskList:h,taskItem:m,text:b}}=o;if(!(a&&c&&h&&m&&Object(f.hasParentNodeOfType)([a,m])(t.selection)))return!1;const g=[Object(xm.e)(o)],v=r.$head.marks(),y=oE.b.getState(t);r instanceof s.TextSelection&&Array.isArray(v)&&v.length>0&&qO(p,b,l,u,d)(e)&&(!i.isInSet(v)||y.codeActive)&&g.push(GO(o,r.$head.marks()));const O=to.e.apply(null,g)(e),E=Object(Cb.a)(t.tr).replaceSelection(O).scrollIntoView();return Object(Lf.d)(t,E,mt.e.CLIPBOARD),n&&n(E),!0}}function iE(e,t){return(t,n,o)=>{if(o&&o.shiftKey){let o=Object(Cb.a)(t.tr);const{selection:r}=o;return o=Fc(t,e,mt.e.CLIPBOARD),o.docChanged||o.replaceSelection(e),(t.storedMarks||[]).forEach(t=>{o.addMark(r.from,r.from+e.size,t)}),o.scrollIntoView(),n&&n(o),!0}return!1}}function aE(e){return(t,n)=>{const{schema:o,tr:{selection:r}}=t,{marks:{code:i,link:a},nodes:{bulletList:c,emoji:l,hardBreak:d,heading:u,listItem:p,mention:h,orderedList:f,paragraph:m,text:b}}=o;if(!(r instanceof s.TextSelection))return!1;const g=r.$head.marks();if(0===g.length)return!1;const v=oE.b.getState(t);if(i.isInSet(g)&&!v.codeActive)return!1;if(1===e.content.childCount&&e.content.firstChild.type===m&&1===e.content.firstChild.content.childCount&&e.content.firstChild.firstChild.type===b&&a.isInSet(g)&&1===g.length){const o=Object(Cb.a)(t.tr).replaceSelectionWith(e.content.firstChild.firstChild,!0).setStoredMarks(g).scrollIntoView();return Object(Lf.d)(t,o,mt.e.CLIPBOARD),n&&n(o),!0}if(qO(c,d,u,p,m,b,l,h,f)(e)){const r=GO(o,g)(e),i=Object(Cb.a)(t.tr).replaceSelection(r).setStoredMarks(g).scrollIntoView();return Object(Lf.d)(t,i,mt.e.CLIPBOARD),n&&n(i),!0}return!1}}function sE(e,t,n){if(n){const o=n.state.tr.selection,r=n.state.tr.replaceSelection(e),i=r.mapping.map(o.from,-1);return n.dispatch(r),n.dispatch(Object(Cb.a)(n.state.tr).replaceRangeWith(i,i+e.size,t).scrollIntoView()),!0}return!1}function cE(e,t,n,o){return(r,i,a)=>{let s=null;if(o){const t=o(e);t&&(s=Be.Node.fromJSON(r.schema,t))}return s||(s=Object(jg.b)(r,e)),s?n&&n.resolveBeforeMacros&&n.resolveBeforeMacros.length?n.resolveBeforeMacros.indexOf(s.attrs.extensionKey)<0?sE(t,s,a):(async function(e,t,n){if(!n.provider)throw Error("No card provider found");const o=await n.provider;return await o.resolve(e,t)}(e,"inline",n).then(e=>{if(!a)throw new Error("Missing view");const{schema:t,tr:n}=a.state,o=Object(Ue.l)(t,e);if(!o)throw new Error("Received invalid ADF from CardProvider");a.dispatch(Object(Lf.c)(n,o,t))}).catch(()=>sE(t,s,a)),!0):sE(t,s,a):!!s}}function lE(e){return(t,n)=>{const{codeBlock:o}=t.schema.nodes;if(e&&Object(f.hasParentNodeOfType)(o)(t.selection)){const o=Object(Cb.a)(t.tr);return o.scrollIntoView(),n&&n(o.insertText(e)),!0}return!1}}function dE(e){return(t,n)=>{if(!Object(to.i)(t))return!1;const{expand:o,nestedExpand:r}=t.schema.nodes;let{tr:i}=t,a=!1;const s=Object(Je.e)(e,e=>{if(e.type===o){a=!0;try{return r.createChecked(e.attrs,e.content,e.marks)}catch(t){return i=Object(f.safeInsert)(e,i.selection.$to.pos)(i),Be.Fragment.empty}}return e});return!(!a||!n)&&(e.openStart>1&&e.openEnd>1?n(i.replaceSelection(s)):n(Object(f.safeInsert)(s.content)(i)),!0)}}function uE(e){return(t,n)=>{const o=Object(Cb.a)(t.tr);return o.replaceSelection(e),Object(Lf.d)(t,o,mt.e.CLIPBOARD),n&&n(o.scrollIntoView()),!0}}function pE({tr:e,slice:t}){const{selection:n,selection:{$to:o,$from:r,to:i,from:a}}=e,{$cursor:c}=n,l=XO(n),d=r.blockRange(o,Ve),u=r.blockRange(o);if(d&&u){const n=a,r=o.nodeAfter?i:i+2,c=e.doc.slice(r,u.end);e.deleteRange(n,u.end);const l=e.mapping.map(n);if(e.replaceRange(l,l,t),c.size<=0)return;const d=s.TextSelection.near(e.doc.resolve(e.mapping.map(l)),-1);return c.openEnd=c.openStart,void e.replaceRange(d.from,d.from,c)}if(l&&YO(l)&&r.node()===o.node()){const{from:i}=n;if(l&&!l.type.validContent(Be.Fragment.from(t.content))){const n=o.pos+2;return e.replaceRange(n,n,t),void e.setSelection(s.TextSelection.near(e.doc.resolve(n+t.content.size),-1))}const a=new $e.Transform(e.doc.type.createAndFill());a.replaceRange(0,a.doc.content.size,t);const c=a.doc.slice(0),d=l.copy(c.content),u=n instanceof s.NodeSelection?n.node:null,p=u?i:e.doc.resolve(i).start(),h=u?i+u.nodeSize:p;e.replaceRangeWith(p,h,d),e.setSelection(s.TextSelection.near(e.doc.resolve(r.pos+d.content.size),-1))}else if(c&&function(e){return e instanceof s.TextSelection&&e.empty&&e.$cursor&&(!e.$cursor.nodeBefore||!e.$cursor.nodeAfter)}(n)){const n=Math.max(c.pos-1,0);if(YO(e.doc.resolve(c.pos).node()))e.replaceRange(n,c.end(),t);else{const n=c.nodeBefore?r.after():r.before();e.replaceRange(n,n,t)}const o=e.doc.resolve(Math.min(n+t.size,e.doc.content.size)),i=Math.min(o.pos+t.content.size-t.openEnd,e.doc.content.size),a=-1;e.setSelection(s.TextSelection.near(e.doc.resolve(i),a))}else e.replaceSelection(t)}function hE(e,t){const{bulletList:n,orderedList:o}=e.nodes;return t&&(t.type===n||t.type===o)}function fE(e){return(t,n)=>{const{codeBlock:o,panel:r}=t.schema.nodes;let i=t.tr;if(function(e,t){return t.content.firstChild&&t.content.firstChild.marks.some(t=>t.type===e.schema.marks.code)}(t,e)&&function(e){const{$from:{nodeBefore:t},from:n}=e.selection;t&&t.isText&&t.text.endsWith("`")&&e.delete(n-1,n)}(i),function(e,t){const n=t.content.firstChild;return n&&Object(to.i)(e)&&hE(e.schema,n)&&t.openStart>t.openEnd}(t,e)&&e.content.firstChild){const n=e.content.firstChild,o=[];!function e(t,n,o){const{listItem:r}=t.schema.nodes;n.content.forEach(n=>{hE(t.schema,n)||n.type===r&&hE(t.schema,n.firstChild)?e(t,n,o):o.push(n)})}(t,n,o),e=new Be.Slice(Be.Fragment.from(n.type.createChecked(n.attrs,o)),e.openEnd,e.openEnd)}Object(Cb.a)(i);const a=Object(jn.b)(t);if(a&&a.predictableLists&&(hE(t.schema,e.content.firstChild)||hE(t.schema,e.content.lastChild)))pE({tr:i,slice:e});else{let t=Object(f.findParentNodeOfType)(r)(i.selection);i.selection.$from===i.selection.$to&&t&&!t.node.textContent?(i=Object(f.safeInsert)(e.content,i.selection.$to.pos)(i),t=Object(f.findParentNodeOfType)(r)(i.selection),t&&i.setSelection(s.TextSelection.near(i.doc.resolve(t.pos+t.node.nodeSize)))):i.replaceSelection(e)}return i.setStoredMarks([]),i.selection.empty&&i.selection.$from.parent.type===o&&i.setSelection(s.TextSelection.near(i.selection.$from,1)),i.scrollIntoView(),n&&n(Object(Lf.d)(t,i,mt.e.CLIPBOARD)),!0}}const mE=e=>(t,n)=>{const o=Fc(t,e,mt.e.CLIPBOARD);return!!o.docChanged&&(n&&n(o),!0)};function bE(e){const t=[];return e.forEach(e=>{if(e.type===e.type.schema.nodes.codeBlock){const n=t[t.length-1];if(n&&n.type===e.type)return t.push(function(e,t){const n=`${e.textContent}\n${t.textContent}`;return e.type.create(e.attrs,e.type.schema.text(n))}(t.pop(),e))}return t.push(e)}),Be.Fragment.from(t)}const gE=(e,t)=>{const{codeBlock:n}=e.schema.nodes;return Object(f.findSelectedNodeOfType)(n)(t||e.selection)||Object(f.findParentNodeOfType)(n)(t||e.selection)};var vE=n("DqM+");const yE={url:vE.a.url,paragraph:vE.a.text,bulletList:vE.a.bulletList,orderedList:vE.a.orderedList,heading:vE.a.heading,blockquote:vE.a.blockquote,codeBlock:vE.a.codeBlock,panel:vE.a.panel,rule:vE.a.rule,mediaSingle:vE.a.mediaSingle,mediaCard:vE.a.mediaCard,mediaGroup:vE.a.mediaGroup,table:vE.a.table,tableCells:vE.a.tableCells,tableHeader:vE.a.tableHeader,tableRow:vE.a.tableRow,decisionList:vE.a.decisionList,decisionItem:vE.a.decisionItem,taskList:vE.a.taskItem,extension:vE.a.extension,bodiedExtension:vE.a.bodiedExtension,blockCard:vE.a.blockCard,layoutSection:vE.a.layoutSection},OE={blockquote:mt.c.PASTE_BLOCKQUOTE,blockCard:mt.c.PASTE_BLOCK_CARD,bodiedExtension:mt.c.PASTE_BODIED_EXTENSION,bulletList:mt.c.PASTE_BULLET_LIST,codeBlock:mt.c.PASTE_CODE_BLOCK,decisionList:mt.c.PASTE_DECISION_LIST,extension:mt.c.PASTE_EXTENSION,heading:mt.c.PASTE_HEADING,mediaGroup:mt.c.PASTE_MEDIA_GROUP,mediaSingle:mt.c.PASTE_MEDIA_SINGLE,orderedList:mt.c.PASTE_ORDERED_LIST,panel:mt.c.PASTE_PANEL,rule:mt.c.PASTE_RULE,table:mt.c.PASTE_TABLE,tableCell:mt.c.PASTE_TABLE_CELL,tableHeader:mt.c.PASTE_TABLE_HEADER,tableRow:mt.c.PASTE_TABLE_ROW,taskList:mt.c.PASTE_TASK_LIST};function EE(e,t,n){return Object(o.a)({action:mt.a.PASTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:e,eventType:mt.d.TRACK,attributes:Object(o.a)({inputMethod:mt.e.KEYBOARD},t)},n&&n.length>0?{nonPrivacySafeAttributes:{linkDomain:n}}:{})}function wE(e,t,n,o){const r=t.clipboardData?t.clipboardData.getData("text/plain")||t.clipboardData.getData("text/uri-list"):"",i=function(e){const{state:{selection:t,schema:{nodes:{paragraph:n,listItem:o,taskItem:r,decisionItem:i}}}}=e,a=Object(f.findParentNode)(e=>e.type!==n&&e.type!==o&&e.type!==r&&e.type!==i)(t);if(!a)return mt.c.PASTE_PARAGRAPH;const s=a.node.type,c=OE[s.name];return c||mt.c.PASTE_PARAGRAPH}(e);if(o.asPlain)return function(e,t){return{action:mt.a.PASTED_AS_PLAIN,actionSubject:mt.b.DOCUMENT,actionSubjectId:e,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.KEYBOARD,pasteSize:t.length}}}(i,r);const a=function(e){const t=e.clipboardData.getData("text/html");return function(e){return!!e&&!!e.match(/class=\"\s?author-d-.+"/gim)}(t)?"dropbox-paper":VO(t)?"microsoft-word":KO(t)?"microsoft-excel":function(e){return!!e&&!!e.match(/id=\"docs-internal-guid-.+"/gim)}(t)?"google-docs":function(e){return!!e&&!!e.match(/data-sheets-.+=/gim)}(t)?"google-spreadsheets":function(e){return!!e&&e.indexOf('content="Cocoa HTML Writer"')>=0}(t)?"apple-pages":function(e){return!!e&&e.indexOf('data-pm-slice="')>=0}(t)?"fabric-editor":"uncategorized"}(t);if(o.type===vE.b.plain)return EE(i,{pasteSize:r.length,type:o.type,content:vE.a.text,source:a});const s=n.size,c=function(e,t){const{schema:{nodes:{paragraph:n},marks:{link:o}}}=e,r=new Set;if(t.content.forEach(e=>{e.type===n&&0===e.content.size||("text"===e.type.name&&o.isInSet(e.marks)||e.type===n&&e.rangeHasMark(0,e.nodeSize-2,o)?r.add("url"):r.add(e.type.name))}),r.size>1)return vE.a.mixed;if(0===r.size)return vE.a.uncategorized;const i=r.values().next().value,a=yE[i];return a||vE.a.uncategorized}(e.state,n),l=[];c!==vE.a.url&&c!==vE.a.mixed||Object(Je.e)(n,e=>{const t=e.marks.find(e=>"link"===e.type.name);return t&&l.push(t.attrs.href),e});const d=l.map(xm.b);return EE(i,{type:o.type,pasteSize:s,content:c,source:a},d)}function CE(e,t,n,o){const r=wE(e,t,n,o);e.dispatch(Object(bt.a)(e.state,e.state.tr,r))}function TE(e,t,n,o){return Object(bt.d)(()=>wE(e,t,n,o))}const SE=(e,t,n,o)=>{return Object(to.u)((r=mt.e.CLIPBOARD,function(e){return(t,n,o)=>{if(o){if(function(e,t){const{media:n}=e.schema.nodes;return 1===t.content.childCount&&t.content.firstChild.type===n}(t,e))return Object(Zf.b)(o,e.content.firstChild,r);if(Object(to.i)(t)&&function(e,t){const{mediaSingle:n}=e.schema.nodes;return n&&1===t.content.childCount&&t.content.firstChild.type===n}(t,e)){const o=t.tr.replaceSelection(e),r=o.doc.resolve(o.mapping.map(t.selection.$from.pos));return n&&n(o.setSelection(new Ze.a(r,Ze.c.RIGHT))),!0}}return!1}}),TE(e,t,n,{type:o}))(n);var r},kE=(e,t,n,o)=>Object(to.u)(aE,TE(e,t,n,{type:o}))(n);var xE=n("ACnq"),AE=n("F3Fu"),jE=n("Bole");var IE=n("Y8iL");const ME=new s.PluginKey("pastePlugin");function NE(e,t,n,r,i){const a=new UO(e,jE.a);let c;return i&&i.subscribe("extensionProvider",(async function(e,t){if("extensionProvider"===e&&t)try{c=await Object(HO.b)(t)}catch(n){console.error(n)}})),new s.Plugin({key:ME,props:{handlePaste(n,r,i){const s=r;if(!s.clipboardData)return!1;let l=s.clipboardData.getData("text/plain");const d=s.clipboardData.getData("text/html"),u=s.clipboardData.getData("text/uri-list");!u||l||d||(l=u,i=new Be.Slice(Be.Fragment.from(e.text(l)),1,1));const p=vu(s),h=l&&!d,f=!!d;if(p){if(!d)return!0;if(function(e){return!!e.match(/<img .*>/)&&!Object(WO.c)(e)}(d))return!0;s.stopPropagation()}const{state:m,dispatch:b}=n;if(((e,t,n)=>Object(to.u)(iE,TE(e,t,n,{type:vE.b.plain,asPlain:!0}))(n,t))(n,s,i=function(e,t){if(0===t.content.size)return t;const{schema:n,selection:{$from:o}}=e;if(!function(e){for(let t=0;t<e.content.childCount;t++){const n=e.content.child(t).marks.map(e=>e.type.name);if(n.includes("alignment")||n.includes("indentation"))return!0}return!1}(t))return t;const r=o.parent.textContent.length>0;if(1===t.content.childCount&&r)return t;const i=o.node(Math.max(0,o.depth-1));if(i.type.allowsMarkType(n.marks.alignment)||i.type.allowsMarkType(n.marks.indentation)){const e=Math.max(0,t.openStart-1);return new Be.Slice(t.content,e,t.openEnd)}return Object(Je.e)(t,e=>e.type===n.nodes.paragraph?n.nodes.paragraph.createChecked(void 0,e.content,e.marks.filter(e=>"alignment"!==e.type.name&&"indentation"!==e.type.name)):e)}(m,i))(m,b,n))return!0;let g;return i=Object(Zf.e)(i,e)(m.selection),h&&(g=function(e,t,n){const o=a.parse(function(e){return e.replace(/(\[([^\]]+)\]\()?((https?|ftp):\/\/[^\s]+)/g,e=>e.match(/^(https?|ftp):\/\/[^\s]+$/)?`<${e}>`:e)}(e));if(o&&o.content)return new Be.Slice(o.content,t,n)}(l,i.openStart,i.openEnd),g&&cE(l,g,t,c)(m,b,n))?(CE(n,s,g,{type:vE.b.markdown}),!0):!!((e,t,n,o)=>Object(to.u)(rE,TE(e,t,n,{type:o}))(n))(n,s,i=Object(Uf.e)(i,m),h?vE.b.plain:vE.b.richText)(m,b)||(!!((e,t,n,o)=>Object(to.u)(lE,TE(e,t,n,{type:vE.b.plain}))(o))(n,s,i,l)(m,b)||(!!SE(n,s,i,p?vE.b.binary:vE.b.richText)(m,b,n)||(!!((e,t,n)=>Object(to.u)(mE,TE(e,t,n,{type:vE.b.richText}))(n))(n,s,i)(m,b)||(h&&g?!!kE(n,s,g,vE.b.markdown)(m,b)||((e,t,n)=>Object(to.u)(uE,TE(e,t,n,{type:vE.b.markdown}))(n))(n,s,g)(m,b):!!f&&(cE(l,i=Object(xm.e)(m.schema)(i),t,c)(m,b,n)?(CE(n,s,i,{type:vE.b.richText}),!0):(!Object(to.i)(m)&&function(e){const t=Object(Zr.c)(e);return t&&t.pluginConfig.isHeaderRowRequired}(m)&&(i=((e,t)=>{const{table:n,tableHeader:o,tableRow:r}=t.nodes;return Object(Je.e)(e,e=>{if(e.type===n){const t=e.firstChild;if(t){const n=[];t.forEach(e=>{n.push(o.createChecked(e.attrs,e.content,e.marks))});const i=r.createChecked(t.attrs,n,t.marks);return e.copy(e.content.replaceChild(0,i))}}return e})})(i,m.schema)),function(e){const t=Object(Zr.c)(e);return t&&t.pluginConfig.allowColumnResizing}(m)||(i=((e,t)=>{const{tableHeader:n,tableCell:r}=t.nodes;return Object(Je.e)(e,e=>(e.type===r||e.type===n)&&e.attrs.colwidth?e.type.createChecked(Object(o.a)(Object(o.a)({},e.attrs),{},{colwidth:void 0}),e.content,e.marks):e)})(i,m.schema)),function(e){const t=Object(Zr.c)(e);return t&&t.pluginConfig.allowBackgroundColor}(m)||(i=((e,t)=>{const{tableCell:n,tableHeader:r}=t.nodes;return Object(Je.e)(e,e=>{if(e.type===n||e.type===r){const t=Object(o.a)({},e.attrs);return t.background=void 0,e.type.createChecked(t,e.content,e.marks)}return e})})(i,m.schema)),Nr(n,0,i)?(CE(n,s,i,{type:vE.b.richText}),!0):(i.content.size&&Object(IE.b)(i,m)&&Object(IE.k)(i,m),!!kE(n,s,i,vE.b.richText)(m,b)||(!!((e,t,n)=>Object(to.u)(dE,TE(e,t,n,{type:vE.b.richText}))(n))(n,s,i)(m,b)||(Object(to.i)(m)||(i=Object(Co.b)(i,m.schema)),((e,t,n)=>Object(to.u)(fE,TE(e,t,n,{type:vE.b.richText}))(n))(n,s,i)(m,b))))))))))},transformPasted:t=>(n&&(t=function(e,t){return Object(Je.e)(e,e=>{if(e.type.name===t.nodes.mention.name){const n=e.attrs,r=Object(o.a)(Object(o.a)({},n),{},{text:""});return t.nodes.mention.create(r,e.content,e.marks)}return e})}(t,e)),t=function(e,t){if(e.openStart&&e.openEnd&&1===e.content.childCount){if(e.content.firstChild.type===t.nodes.layoutSection)return new Be.Slice(Object(Je.a)(e.content,ZO),e.openStart-2,e.openEnd-2)}return e.openStart&&e.content.firstChild.type===t.nodes.layoutSection&&(e=new Be.Slice(Object(Je.a)(e.content,ZO),e.openStart-2,e.openEnd)),e.openEnd&&e.content.lastChild.type===t.nodes.layoutSection&&(e=new Be.Slice(Object(Je.a)(e.content,QO),e.openStart,e.openEnd-2)),e}(t=((e,t)=>{const{paragraph:n,table:o,hardBreak:r}=t.nodes,i=n.createAndFill(),a=r.createAndFill(),s=(i?i.nodeSize:0)+(a?a.nodeSize:0);if(2===e.content.childCount&&e.content.firstChild&&e.content.lastChild&&e.content.firstChild.type===o&&e.content.lastChild.type===n&&e.content.lastChild.nodeSize===s){const t=eE(e.content.firstChild);if(t instanceof Array)return new Be.Slice(Be.Fragment.from(t[0]),e.openStart,e.openEnd)}return e})(t,e),e),t=((e,t)=>e.openStart>=4&&e.openEnd>=4&&1===e.content.childCount&&e.content.firstChild.type===t.nodes.table?new Be.Slice(Object(Je.a)(e.content,eE),e.openStart-3,e.openEnd-3):e.openStart>=4&&e.content.firstChild.type===t.nodes.table?new Be.Slice(Object(Je.a)(e.content,tE),e.openStart-3,e.openEnd):e.openEnd>=4&&e.content.lastChild.type===t.nodes.table?new Be.Slice(Object(Je.a)(e.content,nE),e.openStart,e.openEnd-3):e)(t=Object(Co.c)(t,e),e),t=((e,t)=>{if(1===e.content.childCount&&(e.openStart||e.openEnd)){const n=e.content.firstChild;if(n&&n.type===t.nodes.codeBlock&&n.textContent&&-1===n.textContent.indexOf("\n"))return new Be.Slice(Be.Fragment.from(t.text(n.textContent,[t.marks.code.create()])),0,0)}return e})(t=function(e){return e=Object(Je.e)(e,e=>e.isBlock&&!e.isTextblock?e.copy(bE(e.content)):e),new Be.Slice(bE(e.content),e.openStart,e.openEnd)}(t=Object(oh.d)(t,e)),e),t=((e,t)=>{const n=e.content.firstChild;if(1===e.content.childCount&&n&&"decisionItem"===n.type.name){const o=t.nodes.decisionList.create({},n);return new Be.Slice(Be.Fragment.from(o),e.openStart,e.openEnd)}return e})(t=((e,t)=>{const{tableCell:n,tableHeader:o}=t.nodes;return Object(Je.e)(e,e=>!e||e.type!==n&&e.type!==o||e.content.childCount?e:e.type.createAndFill(e.attrs)||e)})(t=Object(xE.l)(t,e),e),e),r?t=((e,t)=>Object(Je.e)(e,(e,n)=>e.type===t.nodes.paragraph?ht(e,n,t):e))(t=((e,t)=>{let n=!1;if(e.content.forEach(e=>{n=n||e.marks.some(e=>e.type===t.marks.code)}),t.nodes.paragraph.validContent(e.content)&&!n){const n=ft({fragment:e.content,schema:t});return new Be.Slice(n,e.openStart+1,e.openEnd+1)}return Object(Je.e)(e,e=>e.type===t.nodes.paragraph?ft({fragment:e.content,blockMarks:e.marks,schema:t}):e)})(t,e),e):(t=Object(AE.c)(t,e),t=Object(AE.d)(t,e)),t.content.childCount&&t.content.lastChild.type===e.nodes.codeBlock&&(t=new Be.Slice(t.content.append(Be.Fragment.from(e.nodes.paragraph.createAndFill())),t.openStart,1)),t),transformPastedHTML:e=>(e.indexOf('id="docs-internal-guid-')>=0&&(e=(e=e.replace(/white-space:pre/g,"")).replace(/white-space:pre-wrap/g,"")),!VO(e)&&!KO(e)&&e.indexOf("<img ")>=0&&(e=Object(xE.m)(e)),e)}})}var RE=({cardOptions:e,sanitizePrivateContent:t,predictableLists:n})=>({name:"paste",pmPlugins:()=>[{name:"paste",plugin:({schema:o,providerFactory:r})=>NE(o,e,t,n,r)}]}),PE=n("wOaT"),LE=n("ROrA"),DE=n("kLLT"),_E=n("8vqB");function BE(e){return new s.Plugin({props:{handleKeyDown(t,n){const o=Object(eo.b)(n);let r=n;return n.ctrlKey&&1===o.length&&/[^\u0000-\u007f]/.test(o)&&(r=new KeyboardEvent("keydown",{key:eo.a[n.keyCode],code:n.code,ctrlKey:!0})),Object(ln.a)(e)(t,r)}}})}const $E=Object(ze.c)(sn.d,Cb.d);const zE=(e,t,n,o,r,i)=>{const{hardBreak:a,codeBlock:c,listItem:l}=e.schema.nodes,d=e.doc.resolve(o);if(d.nodeAfter.type!==a)return null;if(d.depth>1&&(t!==c||!Object(f.hasParentNodeOfType)(l)(e.selection)))return null;let u=e.tr.delete(o,r).split(o),p=u.doc.nodeAt(o+1),h=!1;u.doc.nodesBetween(o,o+p.nodeSize,(e,t)=>{h||e.type!==a||(h=!0,u=u.split(t+1).delete(t,t+1))}),h&&(p=u.doc.nodeAt(o+1));const{blockquote:m,paragraph:b}=e.schema.nodes;let g,v;t===m?(v=3,g=[b.create({},p.content)]):(v=2,g=p.content);const y=t.create(i,g);return u=u.setSelection(new s.NodeSelection(u.doc.resolve(o+1))).replaceSelectionWith(y).setSelection(new s.TextSelection(u.doc.resolve(o+v))),u};function FE(e){return{level:e[1].length}}function UE(e){const t=Object(an.b)((n=e.nodes.heading,o=6,Object(sn.c)(new RegExp("^(#{1,"+o+"})\\s$"),n,FE)),!0);var n,o;const r=Object(an.a)(new RegExp(an.d+"(#{1,6})\\s$"),(t,n,o,r)=>{const i=n[1].length;return zE(t,e.nodes.heading,0,o,r,{level:i})},!0),i=Object(bt.c)((e,t)=>({action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,eventType:mt.d.TRACK,actionSubjectId:mt.c.FORMAT_HEADING,attributes:{inputMethod:mt.e.FORMATTING,newHeadingLevel:FE(t).level}}));return[i(t),i(r)]}function HE(e){const t=Object(an.b)((n=e.nodes.blockquote,Object(sn.e)(/^\s*>\s$/,n)),!0);var n;const o=Object(an.a)(new RegExp(an.d+"\\s*>\\s$"),(t,n,o,r)=>zE(t,e.nodes.blockquote,0,o,r),!0),r=Object(bt.c)(()=>({action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,eventType:mt.d.TRACK,actionSubjectId:mt.c.FORMAT_BLOCK_QUOTE,attributes:{inputMethod:mt.e.FORMATTING}}));return[r(t),r(o)]}function WE(e){const t={action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.CODE_BLOCK,attributes:{inputMethod:mt.e.FORMATTING},eventType:mt.d.TRACK};return[Object(an.a)(/((^`{3,})|(\s`{3,}))(\S*)$/,(e,n,o,r)=>{const i={};n[4]&&(i.language=n[4]);const a=" "===n[0][0]?o+1:o;if(function(e){if(!e.selection)return!1;const{$from:t}=e.selection,n=t.parent;if(!n.isTextblock||n.type===e.schema.nodes.codeBlock)return!1;const o=t.depth-1,r=t.node(o),i=t.index(o);return r.canReplaceWith(i,i+1,e.schema.nodes.codeBlock)}(e)){const n=function(e,t){if(!e.selection.empty)return e.tr;const n=e.schema.nodes.codeBlock,o=e.selection.$from,r=o.before(),i=o.end(),a=Object(Je.e)(e.doc.slice(o.pos,i),t=>t.type===e.schema.nodes.hardBreak?e.schema.text("\n"):t.isText?t.mark([]):t.isInline?t.attrs.text?e.schema.text(t.attrs.text):null:t.content.childCount?t.content:null),s=e.tr.replaceRange(o.pos,i,a);return o.parentOffset>=3?s.split(o.pos,void 0,[{type:n,attrs:t}]):s.setNodeMarkup(r,n,t,[])}(e,i).delete(a,r).scrollIntoView();return Object(bt.a)(e,n,t)}let{tr:s}=e;s=s.delete(a,r);const c=e.schema.nodes.codeBlock.createChecked();return Object(f.safeInsert)(c)(s)},!0),Object(an.a)(new RegExp(`((${an.d}\`{3,})|(\\s\`{3,}))(\\S*)$`),(n,o,r,i)=>{const a={};o[4]&&(a.language=o[4]);let s=zE(n,e.nodes.codeBlock,0,r,i,a);return s&&(s=Object(bt.a)(n,s,t)),s},!0)]}var VE=function(e){const t=[];if(e.nodes.heading&&t.push(...UE(e)),e.nodes.blockquote&&t.push(...HE(e)),e.nodes.codeBlock&&t.push(...WE(e)),0!==t.length)return Object(an.c)("block-type",{rules:t})},KE=n("t1jd");const qE=E.default.div`
  ${KE.a};
  > {
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin-top: 0;
    }
  }
  ${e=>e.selected?e.tagName+" { color: white }":""};
`,GE=Object(E.default)(_e.h)`
  ${e=>e.selected?`color: ${p.N400};`:""}
  margin-left: 16px;
`;var YE=n("+jwJ"),XE=n.n(YE);const JE=Object(h.f)({textStyles:{id:"fabric.editor.textStyles",defaultMessage:"Text styles",description:"Menu provides access to various heading styles or normal text"}}),ZE=e=>{const t=e.formatMessage(JE.textStyles);return a.a.createElement(O.a,{spacing:e.isReducedSpacing?"none":"default",selected:e.selected,className:"block-type-btn",disabled:e.disabled,onClick:e.onClick,title:t,"aria-label":"Font style",iconAfter:a.a.createElement(_e.j,{isSmall:e.isSmall},e.isSmall&&a.a.createElement(XE.a,{label:t}),a.a.createElement(_e.e,null,a.a.createElement(q.a,{label:t})))},!e.isSmall&&a.a.createElement(_e.a,{spacing:e.isReducedSpacing?"none":"default"},a.a.createElement(h.b,Object.assign({},e.title||_E.k.title)),a.a.createElement("div",{style:{overflow:"hidden",height:0}},e.children)))};class QE extends a.a.PureComponent{constructor(){super(...arguments),this.state={active:!1},this.onOpenChange=e=>{this.setState({active:e.isOpen})},this.handleTriggerClick=()=>{this.onOpenChange({isOpen:!this.state.active})},this.createItems=()=>{const{intl:{formatMessage:e}}=this.props,{currentBlockType:t,availableBlockTypes:n}=this.props.pluginState;return[{items:n.map((n,o)=>{const r=t===n,i=n.tagName||"p";return{content:a.a.createElement(qE,{tagName:i,selected:r},a.a.createElement(i,null,e(n.title))),value:n,key:`${n.name}-${o}`,elemAfter:a.a.createElement(GE,{selected:r},Object(Te.tooltip)(Object(Te.findKeymapByDescription)(n.title.defaultMessage))),isActive:r}})}]},this.handleSelectBlockType=({item:e})=>{const t=e.value;this.props.setBlockType(t.name),this.setState({active:!1})}}render(){const{active:e}=this.state,{popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,isSmall:r,isReducedSpacing:i,pluginState:{currentBlockType:s,blockTypesDisabled:c,availableBlockTypes:l},intl:{formatMessage:d}}=this.props;if(!l.some(e=>"heading"===e.nodeName))return null;const u=l.filter(e=>e.name===s.name).map(e=>e.title),p=[_E.k,...l].reduce((e,t)=>{const n=d(t.title);return n.length>=e.length?n:e},"");if(!this.props.isDisabled&&!c){const s=this.createItems();return a.a.createElement(_e.f,null,a.a.createElement(Le,{items:s,onOpenChange:this.onOpenChange,onItemActivated:this.handleSelectBlockType,isOpen:e,mountTo:t,boundariesElement:n,scrollableElement:o,zIndex:je.w,fitHeight:360,fitWidth:106},a.a.createElement(ZE,{isSmall:r,isReducedSpacing:i,selected:e,disabled:!1,title:u[0],onClick:this.handleTriggerClick,formatMessage:d},p)),a.a.createElement(_e.g,null))}return a.a.createElement(_e.j,null,a.a.createElement(ZE,{isSmall:r,isReducedSpacing:i,selected:e,disabled:!0,title:u[0],onClick:this.handleTriggerClick,formatMessage:d},p),a.a.createElement(_e.g,null))}}var ew=Object(h.g)(QE);const tw=({formatMessage:e},t)=>t?Array.from({length:6},(t,n)=>{const o=n+1,r=_p.a[`heading${o}Description`],i=Te.tooltip(Te["toggleHeading"+o]),s="heading"+o;return{id:s,title:e(_p.a[s]),description:e(r),priority:1300,keywords:["h"+o],keyshortcut:i,icon:()=>a.a.createElement(mn.i,{level:o,label:e(r)}),action(e,t){const n=e(t.schema.nodes.heading.createChecked({level:o}));return Object(bt.a)(t,n,{action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,eventType:mt.d.TRACK,actionSubjectId:mt.c.FORMAT_HEADING,attributes:{inputMethod:mt.e.QUICK_INSERT,newHeadingLevel:o}})}}}):[],nw=({formatMessage:e},t)=>t?[{id:"blockquote",title:e(_p.a.blockquote),description:e(_p.a.blockquoteDescription),priority:1300,keyshortcut:Te.tooltip(Te.toggleBlockQuote),icon:()=>a.a.createElement(mn.u,{label:e(_p.a.blockquote)}),action(e,t){const n=e(t.schema.nodes.blockquote.createChecked({},t.schema.nodes.paragraph.createChecked()));return Object(bt.a)(t,n,{action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,eventType:mt.d.TRACK,actionSubjectId:mt.c.FORMAT_BLOCK_QUOTE,attributes:{inputMethod:mt.e.QUICK_INSERT}})}}]:[];var ow=e=>({name:"blockType",nodes(){const t=[{name:"heading",node:PE.a},{name:"blockquote",node:LE.a},{name:"hardBreak",node:DE.a}];if(e&&e.allowBlockType){const n=e.allowBlockType.exclude?e.allowBlockType.exclude:[];return t.filter(e=>-1===n.indexOf(e.name))}return t},pmPlugins:()=>[{name:"blockType",plugin:({dispatch:t})=>Object(xg.a)(t,e&&e.lastNodeMustBeParagraph)},{name:"blockTypeInputRule",plugin:({schema:e})=>VE(e)},{name:"blockTypeKeyMap",plugin:({schema:e})=>function(e){const t={};return Te.bindKeymapWithCommand(Te.insertNewLine.common,z.h,t),Te.bindKeymapWithCommand(Te.moveUp.common,z.c,t),Te.bindKeymapWithCommand(Te.moveDown.common,z.d,t),Te.bindKeymapWithCommand(Te.findKeyMapForBrowser(Te.redo),Cb.c,t),Te.bindKeymapWithCommand(Te.undo.common,$E,t),Te.bindKeymapWithCommand(Te.findKeyMapForBrowser(Te.redoBarred),z.j(),t),Te.bindKeymapWithCommand(Te.backspace.common,Zv.a,t),e.nodes[_E.a.nodeName]&&Te.bindKeymapWithCommand(Te.findShortcutByKeymap(Te.toggleBlockQuote),Object(Zv.c)(_E.a.name,mt.e.KEYBOARD),t),BE(t)}(e)}],primaryToolbarComponent({editorView:e,popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,toolbarSize:r,disabled:i,isToolbarReducedSpacing:s,eventDispatcher:c}){const l=r<bn.a.XL,u=t=>Object(Zv.e)(t,mt.e.TOOLBAR)(e.state,e.dispatch);return a.a.createElement(d.a,{editorView:e,eventDispatcher:c,plugins:{pluginState:xg.b},render:({pluginState:e})=>a.a.createElement(ew,{isSmall:l,isDisabled:i,isReducedSpacing:s,setBlockType:u,pluginState:e,popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o})})},pluginsOptions:{quickInsert:t=>{const n=e&&e.allowBlockType&&e.allowBlockType.exclude?e.allowBlockType.exclude:[];return[...nw(t,-1===n.indexOf("blockquote")),...tw(t,-1===n.indexOf("heading"))]}}});const rw=new s.PluginKey("clearMarksOnChangeToEmptyDocumentPlugin");function iw(){return new s.Plugin({key:rw,appendTransaction:(e,t,n)=>{if(!Object(Ue.f)(t.doc)&&Object(Ue.f)(n.doc))return n.tr.setStoredMarks([])}})}var aw=()=>({name:"clearMarksOnEmptyDoc",pmPlugins:()=>[{name:"clearMarksOnChange",plugin:iw}]}),sw=n("ZB1H"),cw=n("lOw6");function lw(e){if(!e.marks.link)return;const t=(n=new xm.a,Object(an.a)(n,(e,t,n,o)=>{const{schema:r}=e;if(e.doc.rangeHasMark(n,o,r.marks.link))return null;const[i]=t,a=Object(xm.g)(i.url),s=r.mark("link",{href:a}),c=Object(Pf.b)([{url:i.url,pos:n-(i.input.length-i.lastIndex),appearance:"inline",compareLinkText:!0,source:mt.e.AUTO_DETECT}])(e.tr.addMark(n-(i.input.length-i.lastIndex),o-(i.input.length-i.lastIndex),s).insertText(" "));return Object(bt.a)(e,c,Object(cw.a)(mt.e.AUTO_DETECT,a))}));var n;const o=Object(an.a)(/(^|[^!])\[(.*?)\]\((\S+)\)$/,(e,t,n,o)=>{const{schema:r}=e,[,i,a,s]=t,c=Object(xm.g)(s),l=r.mark("link",{href:c}),d=e.tr.replaceWith(n+i.length,o,r.text(a,[l]));return Object(bt.a)(e,d,Object(cw.a)(mt.e.FORMATTING,c))});return Object(an.c)("hyperlink",{rules:[t,o]})}function dw(){const e={};return Te.bindKeymapWithCommand(Te.addLink.common,Object(Vm.j)(mt.e.SHORTCUT),e),Te.bindKeymapWithCommand(Te.enter.common,uw,e),Te.bindKeymapWithCommand(Te.insertNewLine.common,uw,e),Te.bindKeymapWithCommand(Te.escape.common,(e,t,n)=>!!rb.d.getState(e).activeLinkMark&&(Object(Vm.b)()(e,t),n&&n.focus(),!1),e),Object(ln.b)(e)}const uw=(e,t)=>{const n=e.selection.$from.nodeBefore;if(!n||!n.isText)return!1;const o=n.text.split(" "),r=o[o.length-1],i=Object(xm.c)(r);if(i){const n=i.raw,o=e.selection.$from.pos-n.length,r=e.selection.$from.pos;if(e.doc.rangeHasMark(o,r,e.schema.marks.link))return!1;const a=i.url,s=e.schema.mark("link",{href:a}),c=Object(Pf.b)([{url:a,pos:o,appearance:"inline",compareLinkText:!0,source:mt.e.AUTO_DETECT}])(e.tr.addMark(o,r,s));t&&t(Object(bt.a)(e,c,Object(cw.a)(mt.e.AUTO_DETECT,a)))}return!1};const pw=new s.PluginKey("fakeCursorToolbarPlugin"),hw=e=>{const t=document.createElement("div");return t.className="ProseMirror-fake-text-cursor",Yt.a.widget(e,t,{key:"hyperlink-text-cursor"})},fw=(e,t)=>Yt.a.inline(e,t,{class:"ProseMirror-fake-text-selection"}),mw=e=>{const t=rb.d.getState(e);if(t&&t.activeLinkMark&&t.activeLinkMark.type===rb.a.INSERT_LINK_TOOLBAR)return t.activeLinkMark};var bw=new s.Plugin({key:pw,state:{init:()=>Yt.b.empty,apply(e,t,n,o){const r=mw(n),i=mw(o);if(r&&i){const{from:n,to:o}=i,a=e.mapping.map(r.from),s=e.mapping.map(r.to);if(a===n&&s===o)return t.map(e.mapping,e.doc)}if(i){const{from:t,to:n}=i;return Yt.b.create(e.doc,[t===n?hw(t):fw(t,n)])}return Yt.b.empty}},props:{decorations:e=>pw.getState(e)}});class gw extends i.Component{constructor(){super(...arguments),this.state={supportedUrlsMap:new Map},this.getProvider=async()=>this.cardProvider?this.cardProvider:new Promise(e=>{const{providerFactory:t}=this.props;t.subscribe("cardProvider",async(t,n)=>{n&&(this.cardProvider=await n,e(this.cardProvider))})}),this.resolveUrl=async e=>{const{supportedUrlsMap:t}=this.state;if(t.has(e))return;let n=!1;try{const t=await this.getProvider();n=await t.findPattern(e)}catch(o){n=!1}t.set(e,n),this.setState({supportedUrlsMap:t})},this.componentDidMount=()=>this.resolveUrl(this.props.url)}componentWillReceiveProps(e){e.url!==this.props.url&&this.resolveUrl(e.url)}render(){const{url:e,intl:t,editorView:n,editorState:o,cardOptions:r,platform:i}=this.props,{supportedUrlsMap:s}=this.state;return s.get(e)?a.a.createElement(pb,{key:"link-appearance",url:e,intl:t,editorView:n,editorState:o,allowEmbeds:null==r?void 0:r.allowEmbeds,platform:i}):null}}function vw(e){return void 0!==e.pos}const yw=(e,t)=>(n,o,r,i,a)=>{const s=r||i;switch(n){case"url":return o?Object(Vm.h)(o,vw(e)?e.pos:e.from,vw(e)?void 0:e.to,a)(t.state,t.dispatch):(vw(e)&&e.node&&!o&&Object(Vm.g)(e.pos)(t.state,t.dispatch),Object(Vm.b)()(t.state,t.dispatch));case"text":return s&&o?"INSERT"===e.type?Object(Vm.c)(e.from,e.to,o,void 0,s)(t.state,t.dispatch):Object(Vm.i)(s,e.pos)(t.state,t.dispatch):Object(Vm.b)()(t.state,t.dispatch);default:return Object(Vm.b)()(t.state,t.dispatch)}},Ow=(e,t,n,r)=>{const{formatMessage:i}=t,s=rb.d.getState(e);if(s&&s.activeLinkMark){const{activeLinkMark:c}=s,l={title:"Hyperlink floating controls",nodeType:[e.schema.nodes.text,e.schema.nodes.paragraph,e.schema.nodes.heading,e.schema.nodes.taskItem,e.schema.nodes.decisionItem].filter(e=>!!e),align:"left",className:c.type.match("INSERT|EDIT_INSERTED")?"hyperlink-floating-toolbar":""};switch(c.type){case"EDIT":{const{pos:s,node:d}=c,u=d.marks.filter(t=>t.type===e.schema.marks.link),p=u[0]&&u[0].attrs.href,h=Object(Ff.a)(p),f=i(h?bm.a.openLink:S.b.unableToOpenLink),m=i(S.b.unlink),b=i(S.b.editLink);return Object(o.a)(Object(o.a)({},l),{},{height:32,width:250,items:[{type:"custom",render:o=>a.a.createElement(gw,{key:"link-appearance",url:p,intl:t,editorView:o,editorState:e,cardOptions:r,providerFactory:n})},{type:"button",onClick:Object(Vm.a)(),selected:!1,title:b,showTitle:!0},{type:"separator"},{type:"button",disabled:!h,target:"_blank",href:h?p:void 0,onClick:()=>!0,selected:!1,title:f,icon:mm.a,className:"hyperlink-open-link"},{type:"separator"},{type:"button",onClick:Object(Vm.g)(s),selected:!1,title:m,icon:hm.a}]})}case"EDIT_INSERTED":case"INSERT":{let t;if(vw(c)&&c.node){const n=c.node.marks.filter(t=>t.type===e.schema.marks.link);t=n[0]&&n[0].attrs.href}const r=vw(c)?function(e,t){if(!e.node)return;const n=Object(xm.g)(e.node.text),o=e.node.marks.find(e=>e.type===t.schema.marks.link);return n!==(o&&o.attrs.href)?e.node.text:void 0}(c,e):s.activeText;return Object(o.a)(Object(o.a)({},l),{},{height:Sm.c,width:Sm.d,items:[{type:"custom",render:(e,o)=>e?a.a.createElement(ib,{view:e,key:o,displayUrl:t,displayText:r||"",providerFactory:n,onSubmit:(t,n="",o,r)=>{vw(c)?Object(Vm.k)(t,o||n,c.pos)(e.state,e.dispatch):Object(Vm.d)(r,c.from,c.to,t,n,o)(e.state,e.dispatch),e.focus()},onBlur:yw(c,e)}):null}]})}}}};var Ew=e=>({name:"hyperlink",marks:()=>[{name:"link",mark:sw.a}],pmPlugins:()=>[{name:"hyperlink",plugin:({dispatch:e})=>Object(rb.c)(e)},{name:"fakeCursorToolbarPlugin",plugin:()=>bw},{name:"hyperlinkInputRule",plugin:({schema:e})=>lw(e)},{name:"hyperlinkKeymap",plugin:()=>dw()}],pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"hyperlink",title:e(In.a.link),description:e(In.a.linkDescription),keywords:["hyperlink","url"],priority:1200,keyshortcut:Object(Te.tooltip)(Te.addLink),icon:()=>a.a.createElement(mn.l,{label:e(In.a.link)}),action(e,t){const n=t.selection.from,{nodeBefore:o}=t.selection.$from;if(!o)return!1;const r=t.tr.setMeta(rb.d,{type:rb.b.SHOW_INSERT_TOOLBAR}).delete(n-o.nodeSize,n);return Object(bt.a)(t,r,{action:mt.a.INVOKED,actionSubject:mt.b.TYPEAHEAD,actionSubjectId:mt.c.TYPEAHEAD_LINK,attributes:{inputMethod:mt.e.QUICK_INSERT},eventType:mt.d.UI})}}],floatingToolbar:(t,n,o)=>Ow(t,n,o,e)}}),ww=n("41mA"),Cw=n("/KhQ"),Tw=n("9bXU"),Sw=n("3Bi3"),kw=n("R41B"),xw=n("nKs5"),Aw=n("fDJo");const jw=new s.PluginKey("clearFormattingPlugin");var Iw=n("9hj9");var Mw=function(){const e={};return Te.bindKeymapWithCommand(Te.clearFormatting.common,Object(Iw.c)(mt.e.SHORTCUT),e),Object(ln.b)(e)},Nw=new s.Plugin({props:{handleClick(e,t,n){if(navigator&&/Edge\/\d/.test(navigator.userAgent))return!1;if(t>e.state.doc.content.size)return!1;const{code:o}=e.state.schema.marks,{paragraph:r}=e.state.schema.nodes,i=e.state.doc.resolve(t),a=(i.nodeBefore?i.nodeBefore.isInline:i.nodeAfter)&&(i.nodeAfter?i.nodeAfter.isInline:i.nodeBefore)&&0===i.textOffset,c=o&&(i.nodeBefore&&o.isInSet(i.nodeBefore.marks)||i.nodeAfter&&o.isInSet(i.nodeAfter.marks)),l=n.target&&n.target instanceof Node&&e.posAtDOM(n.target),d=e.state.doc.nodeAt(t),u=!(!d||!d.isText),p=i.parent.type===r&&0===i.textOffset&&null===i.nodeAfter;if(a&&c&&l&&(u||p)){const t=n.target.parentNode===e.domAtPos(l).node&&o.isInSet(e.state.doc.resolve(l).nodeAfter.marks),r=i.nodeBefore&&o.isInSet(i.nodeBefore.marks)?i.nodeAfter:i.nodeBefore,a=e.state.tr.setSelection(s.TextSelection.near(i));return t?a.setStoredMarks([o.create()]):a.setStoredMarks(r?r.marks:[]),e.dispatch(a),!0}return!1}}});const Rw={"**":["_","~~"],"*":["__","~~"],__:["*","~~"],_:["**","~~"],"~~":["__","_","**","*"]},Pw=(e,t)=>{for(let n=0;n<Rw[e].length;n++){const o=Rw[e][n];if(o===t)return!0;const r=t.length-o.length;if(t.substr(r,t.length)===o)return Pw(o,t.substr(0,r))}return!1};function Lw(e,t,n,o){return(r,i,a,s)=>{const[,c,l]=i,d=s,u=l?a+c.length:a,p=r.doc.resolve(a+c.length).nodeBefore;if(c&&c.length>0&&!Pw(o,c)&&(!p||p.type!==r.schema.nodes.hardBreak))return null;if(r.schema.marks.code&&r.schema.marks.code.isInSet(r.doc.resolve(u+1).marks()))return null;let h;if(r.doc.nodesBetween(u,d,e=>e.type===t.nodes.hardBreak?(h=!0,!1):!h),h)return null;if(r.doc.resolve(u).sameParent(r.doc.resolve(d))&&!r.doc.resolve(u).parent.type.allowsMarkType(e))return null;let f=r.tr.addMark(u,d,e.create());return n>1&&(f=f.delete(d-(n-1),d)),f.delete(u,u+n).removeStoredMark(e)}}const Dw=/(\S*)(\_\_([^\_\s](\_(?!\_)|[^\_])*[^\_\s]|[^\_\s])\_\_)$/,_w=/(\S*)(\*\*([^\*\s](\*(?!\*)|[^\*])*[^\*\s]|[^\*\s])\*\*)$/,Bw=/(\S*)(\_([^\_\s]([^\_])*[^\_\s]|[^\_\s])\_)$/,$w=/(\S*)(\*([^\*\s]([^\*])*[^\*\s]|[^\*\s])\*)$/,zw=/(\S*)(\~\~([^\s\~](\~(?!\~)|[^\~])*[^\s\~]|[^\s\~])\~\~)$/,Fw=/(\S*)(`[^\s][^`]*`)$/;function Uw(e){var t,n;return[Object(bt.c)(()=>({action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_CODE,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.FORMATTING}}))(Object(an.a)(Fw,(t=e.marks.code,n="`",(e,o,r,i)=>{if(o[1]&&o[1].length>0&&[e=>"("===e,t=>{const n=e.doc.resolve(r+t.length).nodeBefore;return n&&n.type===e.schema.nodes.hardBreak||!1}].every(e=>!e(o[1])))return null;if(e.doc.resolve(r).sameParent(e.doc.resolve(i))&&!e.doc.resolve(r).parent.type.allowsMarkType(t))return null;let a=e.tr;e.selection.from!==e.selection.to&&(a.delete(e.selection.from,e.selection.to),i-=e.selection.to-e.selection.from);const s=i-o[2].length+1,c=e.schema.marks.code.create();return Object(He.a)(s,i,!1,c,a).setStoredMarks([c]).delete(s,s+n.length).removeStoredMark(t)})))]}var Hw=function(e){const t=[];if(e.marks.strong&&t.push(...function(e){const t=Object(bt.c)(()=>({action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_STRONG,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.FORMATTING}})),n=Object(an.a)(Dw,Lw(e.marks.strong,e,2,"__")),o=Object(an.a)(_w,Lw(e.marks.strong,e,2,"**"));return[t(n),t(o)]}(e)),e.marks.em&&t.push(...function(e){const t=Object(bt.c)(()=>({action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_ITALIC,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.FORMATTING}})),n=Object(an.a)(Bw,Lw(e.marks.em,e,1,"_")),o=Object(an.a)($w,Lw(e.marks.em,e,1,"*"));return[t(n),t(o)]}(e)),e.marks.strike&&t.push(...function(e){return[Object(bt.c)(()=>({action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_STRIKE,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.FORMATTING}}))(Object(an.a)(zw,Lw(e.marks.strike,e,2,"~~")))]}(e)),e.marks.code&&t.push(...Uw(e)),0!==t.length)return Object(an.c)("text-formatting",{rules:t})},Ww=n("mF23");var Vw=n("KXMh");function Kw(e,t){return Object(an.a)(t,(n=e,(e,t,o,r)=>{const[,i,,a]=t,c=(i||"")+n+(a||"");let{tr:l,selection:{$to:d}}=e;return l.replaceWith(o,r,e.schema.text(c,d.marks())),l.setSelection(s.Selection.near(l.doc.resolve(l.selection.to))),l}));var n}function qw(e,t){return Object.keys(e).map(n=>{const o=Kw(n,e[n]);return t?t(n)(o):o})}var Gw=Object(an.c)("text-formatting:smart-input",{rules:[...qw({Atlassian:/(\s+|^)(atlassian)(\s)$/,Jira:/(\s+|^)(jira|JIRA)(\s)$/,Bitbucket:/(\s+|^)(bitbucket|BitBucket)(\s)$/,Hipchat:/(\s+|^)(hipchat|HipChat)(\s)$/,Trello:/(\s+|^)(trello)(\s)$/},e=>Object(bt.c)((t,n)=>({action:mt.a.SUBSTITUTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.PRODUCT_NAME,eventType:mt.d.TRACK,attributes:{product:e,originalSpelling:n[2]}}))),...function(){const e={"":Vw.b.ARROW_RIGHT,"":Vw.b.ARROW_LEFT,"":Vw.b.ARROW_DOUBLE};return qw({"":/(\s+|^)(--?>)(\s)$/,"":/(\s+|^)(<--?)(\s)$/,"":/(\s+|^)(<->?)(\s)$/},t=>Object(bt.c)(()=>({action:mt.a.SUBSTITUTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.SYMBOL,eventType:mt.d.TRACK,attributes:{symbol:e[t]}})))}(),...function(){const e={"":Vw.a.DASH,"":Vw.a.ELLIPSIS,"":Vw.a.QUOTE_DOUBLE,"":Vw.a.QUOTE_DOUBLE,[Vw.a.QUOTE_SINGLE]:Vw.a.QUOTE_SINGLE},t=t=>Object(bt.c)(()=>({action:mt.a.SUBSTITUTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.PUNC,eventType:mt.d.TRACK,attributes:{punctuation:e[t]}}));return[...qw({"":/(\s+|^)(--)(\s)$/,"":/()(\.\.\.)$/},t),...qw({"":/((?:^|[\s\{\[\(\<'"\u2018\u201C]))(")$/,"":/"$/},t),...[Object(an.a)(/(\s+|^)'(\S+.*\S+)'$/,(e,t,n,o)=>{const[,r,i]=t,a=r+""+i+"";return e.tr.insertText(a,n,o)}),Kw("",/(\w+)(')(\w+)$/)].map(e=>t(Vw.a.QUOTE_SINGLE)(e))]}()]}),Yw=n("1qPo"),Xw=n("y1Xn");class Jw extends i.PureComponent{constructor(){super(...arguments),this.state={isOpen:!1},this.onOpenChange=e=>{this.setState({isOpen:e.isOpen})},this.handleTriggerClick=()=>{this.onOpenChange({isOpen:!this.state.isOpen})},this.createItems=()=>{const{textFormattingState:e,clearFormattingState:t,editorView:n,intl:{formatMessage:o}}=this.props,{code:r,underline:i,subsup:a,strike:s}=n.state.schema.marks;let c=[];if(e){const{underlineHidden:t,codeHidden:l,strikeHidden:d,subscriptHidden:p,superscriptHidden:h}=e;u.b.getState(n.state).width<je.y&&(this.addRecordToItems(c,o(Xw.a.bold),"strong",Object(Te.tooltip)(Te.toggleBold)),this.addRecordToItems(c,o(Xw.a.italic),"em",Object(Te.tooltip)(Te.toggleItalic))),!t&&i&&this.addRecordToItems(c,o(Yw.a.underline),"underline",Object(Te.tooltip)(Te.toggleUnderline)),!d&&s&&this.addRecordToItems(c,o(Yw.a.strike),"strike",Object(Te.tooltip)(Te.toggleStrikethrough)),!l&&r&&this.addRecordToItems(c,o(Yw.a.code),"code",Object(Te.tooltip)(Te.toggleCode)),!p&&a&&this.addRecordToItems(c,o(Yw.a.subscript),"subscript"),!h&&a&&this.addRecordToItems(c,o(Yw.a.superscript),"superscript")}return t&&this.addRecordToItems(c,o(Yw.a.clearFormatting),"clearFormatting",Object(Te.tooltip)(Te.clearFormatting),!t.formattingIsPresent),[{items:c}]},this.addRecordToItems=(e,t,n,o,r)=>{let i=!1,s=!1;this.props.textFormattingState&&(i=this.props.textFormattingState[n+"Active"]||!1,s=r||this.props.textFormattingState[n+"Disabled"]||!1),e.push({key:n,content:t,elemAfter:o?a.a.createElement(_e.h,null,o):void 0,value:{name:n},isActive:i,isDisabled:s})},this.onItemActivated=({item:e})=>{const{state:t,dispatch:n}=this.props.editorView;switch(e.value.name){case"underline":Ww.q({inputMethod:mt.e.TOOLBAR})(t,n);break;case"code":Ww.e({inputMethod:mt.e.TOOLBAR})(t,n);break;case"strike":Ww.i({inputMethod:mt.e.TOOLBAR})(t,n);break;case"subscript":Ww.m({inputMethod:mt.e.TOOLBAR})(t,n);break;case"superscript":Ww.o({inputMethod:mt.e.TOOLBAR})(t,n);break;case"strong":Ww.k({inputMethod:mt.e.TOOLBAR})(t,n);break;case"em":Ww.g({inputMethod:mt.e.TOOLBAR})(t,n);break;case"clearFormatting":Object(Iw.c)(mt.e.TOOLBAR)(t,n)}this.setState({isOpen:!1})}}render(){const{isOpen:e}=this.state,{popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,isReducedSpacing:r,textFormattingState:i={},clearFormattingState:s={},intl:{formatMessage:c}}=this.props,{codeActive:l,underlineActive:d,strikeActive:u,subscriptActive:p,superscriptActive:h,codeDisabled:f,underlineDisabled:m,strikeDisabled:b,subscriptDisabled:g,superscriptDisabled:v}=i,{formattingIsPresent:y}=s,E=this.createItems(),w=c(Yw.a.moreFormatting),C=t=>a.a.createElement(O.a,{spacing:r?"none":"default",selected:e||d||l||u||p||h,disabled:t,onClick:this.handleTriggerClick,title:w,iconBefore:a.a.createElement(_e.i,null,a.a.createElement(ov.a,{label:w}))});return this.props.isDisabled||b&&!y&&f&&g&&v&&m||!(E[0].items.length>0)?a.a.createElement(_e.j,null,a.a.createElement("div",null,C(!0)),a.a.createElement(_e.g,null)):a.a.createElement(_e.j,null,a.a.createElement(Le,{items:E,onItemActivated:this.onItemActivated,onOpenChange:this.onOpenChange,mountTo:t,boundariesElement:n,scrollableElement:o,isOpen:e,zIndex:je.w,fitHeight:188,fitWidth:136},C(!1)),a.a.createElement(_e.g,null))}}var Zw=Object(h.g)(Jw),Qw=n("nVNJ"),eC=n.n(Qw),tC=n("02+/"),nC=n.n(tC);class oC extends i.PureComponent{constructor(){super(...arguments),this.handleBoldClick=()=>{const{strongDisabled:e}=this.props.textFormattingState;if(!e){const{state:e,dispatch:t}=this.props.editorView;return Object(Ww.k)({inputMethod:mt.e.TOOLBAR})(e,t)}return!1},this.handleItalicClick=()=>{const{emDisabled:e}=this.props.textFormattingState;if(!e){const{state:e,dispatch:t}=this.props.editorView;return Object(Ww.g)({inputMethod:mt.e.TOOLBAR})(e,t)}return!1}}render(){const{disabled:e,isReducedSpacing:t,textFormattingState:n,intl:{formatMessage:o}}=this.props,{strongHidden:r,strongActive:i,strongDisabled:s,emHidden:c,emActive:l,emDisabled:d}=n,u=o(Xw.a.bold),p=o(Xw.a.italic);return a.a.createElement(_e.b,{width:t?"small":"large"},r?null:a.a.createElement(O.a,{spacing:t?"none":"default",onClick:this.handleBoldClick,selected:i,disabled:e||s,title:a.a.createElement(Te.ToolTipContent,{description:u,keymap:Te.toggleBold}),iconBefore:a.a.createElement(eC.a,{label:u})}),c?null:a.a.createElement(O.a,{spacing:t?"none":"default",onClick:this.handleItalicClick,selected:l,disabled:e||d,title:a.a.createElement(Te.ToolTipContent,{description:p,keymap:Te.toggleItalic}),iconBefore:a.a.createElement(nC.a,{label:p})}))}}var rC=Object(h.g)(oC);var iC=(e={})=>({name:"textFormatting",marks:()=>[{name:"em",mark:ww.a},{name:"strong",mark:Cw.a},{name:"strike",mark:Tw.a}].concat(e.disableCode?[]:{name:"code",mark:Sw.a}).concat(e.disableSuperscriptAndSubscript?[]:{name:"subsup",mark:kw.a}).concat(e.disableUnderline?[]:{name:"underline",mark:xw.a}),pmPlugins:()=>[{name:"textFormatting",plugin:({dispatch:e})=>Object(oE.a)(e)},{name:"textFormattingCursor",plugin:()=>Nw},{name:"textFormattingInputRule",plugin:({schema:e})=>Hw(e)},{name:"textFormattingSmartRule",plugin:()=>e.disableSmartTextCompletion?void 0:Gw},{name:"textFormattingClear",plugin:({dispatch:e})=>(e=>new s.Plugin({state:{init:(e,t)=>({formattingIsPresent:Object(Aw.b)(t)}),apply(t,n,o,r){const i=Object(Aw.b)(r);return i!==n.formattingIsPresent?(e(jw,{formattingIsPresent:i}),{formattingIsPresent:i}):n}},key:jw}))(e)},{name:"textFormattingClearKeymap",plugin:()=>Mw()},{name:"textFormattingKeymap",plugin:({schema:e})=>function(e){const t={};return e.marks.strong&&Te.bindKeymapWithCommand(Te.toggleBold.common,Ww.k({inputMethod:mt.e.SHORTCUT}),t),e.marks.em&&Te.bindKeymapWithCommand(Te.toggleItalic.common,Ww.g({inputMethod:mt.e.SHORTCUT}),t),e.marks.code&&Te.bindKeymapWithCommand(Te.toggleCode.common,Ww.e({inputMethod:mt.e.SHORTCUT}),t),e.marks.strike&&Te.bindKeymapWithCommand(Te.toggleStrikethrough.common,Ww.i({inputMethod:mt.e.SHORTCUT}),t),e.marks.underline&&Te.bindKeymapWithCommand(Te.toggleUnderline.common,Ww.q({inputMethod:mt.e.SHORTCUT}),t),BE(t)}(e)}],primaryToolbarComponent:({editorView:e,popupsMountPoint:t,popupsScrollableElement:n,isToolbarReducedSpacing:o,disabled:r})=>a.a.createElement(d.a,{plugins:{textFormattingState:oE.b,clearFormattingState:jw,widthState:u.b},render:({textFormattingState:i,clearFormattingState:s,widthState:c})=>a.a.createElement(_e.b,{width:o?"small":"large"},c.width>je.y&&a.a.createElement(rC,{disabled:r,editorView:e,textFormattingState:i,isReducedSpacing:o}),a.a.createElement(Zw,{editorView:e,isDisabled:r,isReducedSpacing:o,textFormattingState:i,clearFormattingState:s,popupsMountPoint:t,popupsScrollableElement:n}))})}),aC=n("kmHS"),sC=n("V6qP"),cC=n("L15d"),lC=n("g2hT"),dC=n("duTc"),uC=n("jxt5");const pC=new s.PluginKey("unsupportedContentPlugin"),hC=({portalProviderAPI:e,eventDispatcher:t,dispatchAnalyticsEvent:n})=>new s.Plugin({key:pC,props:{nodeViews:{confluenceUnsupportedBlock:lr.a.fromComponent(Vf.a,e,t,{dispatchAnalyticsEvent:n}),confluenceUnsupportedInline:lr.a.fromComponent(sm.a,e,t,{dispatchAnalyticsEvent:n}),unsupportedBlock:lr.a.fromComponent(Vf.a,e,t,{dispatchAnalyticsEvent:n}),unsupportedInline:lr.a.fromComponent(sm.a,e,t,{dispatchAnalyticsEvent:n})}}});var fC=()=>({name:"unsupportedContent",marks:()=>[{name:"unsupportedMark",mark:aC.a},{name:"unsupportedNodeAttribute",mark:sC.a}],nodes:()=>[{name:"confluenceUnsupportedBlock",node:cC.a},{name:"confluenceUnsupportedInline",node:lC.a},{name:"unsupportedBlock",node:dC.a},{name:"unsupportedInline",node:uC.a}],pmPlugins:()=>[{name:"unsupportedContent",plugin:hC}]}),mC=n("kLA4"),bC=n("iWU4"),gC=n("YR5y");const vC=new s.PluginKey("focusStatePlugin");const yC=new s.PluginKey("newlinePreserveMarksPlugin"),OC=e=>!!e.selection.$to.parent.marks.find(t=>t.type===e.schema.marks.alignment),EC=e=>!Qv.a.getState(e).active,wC=(e,t)=>(t&&t(e.tr.split(e.tr.mapping.map(e.selection.$from.pos),1)),!0);var CC=()=>new s.Plugin({key:yC,props:{handleKeyDown:Object(ln.a)({Enter:Object(He.b)([Ue.j,OC,EC],wC)})}});const TC=new s.PluginKey("inlineCursorTargetPlugin"),SC=["mention","emoji"],kC=e=>e&&-1!==SC.indexOf(e.type.name);var xC=()=>new s.Plugin({key:TC,state:{init:()=>({positions:[]}),apply(e){const{selection:t}=e,{$from:n}=t,o=[],r=((e,t)=>{if(kC(e.nodeAfter))return e.pos+1;const{parentOffset:n,parent:o}=e,r=t.doc.nodeSize-2;if(n===o.content.size&&e.pos+1<r-2){const{nodeAfter:n}=t.doc.resolve(e.pos+1);if(n&&kC(n.firstChild))return e.pos+2}})(n,e),i=((e,t)=>{if(kC(e.nodeBefore))return e.pos-1;if(0===e.pos)return;const{parentOffset:n}=e;if(0===n){const{nodeBefore:n}=t.doc.resolve(e.pos-1);if(n&&kC(n.firstChild))return e.pos-2}})(n,e);return void 0!==r&&o.push(r),void 0!==i&&o.push(i),{positions:o}}},props:{decorations(e){const{doc:t}=e,{positions:n}=TC.getState(e);if(n&&n.length){const e=n.map(e=>{const t=document.createElement("span");return t.appendChild(document.createTextNode(ar.a)),Yt.a.widget(e,t,{raw:!0,side:-1,key:"inlineCursor"})});return Yt.b.create(t,e)}return null}}}),AC=n("NlFJ");function jC(e,t){if("undefined"!=typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){return new IntersectionObserver((e,n)=>{e.forEach(e=>{t(e.intersectionRatio>0)})},{root:e,rootMargin:"0px",threshold:0})}}function IC(e,t){const n=e.offsetHeight,o=e.getBoundingClientRect().top,r=function(){const e=window.getSelection();if(e&&e.rangeCount>0){const t=e.getRangeAt(0);if(t){const e=t.getClientRects();if(e&&e.length>0)return e[0].top;const n=t.startContainer;if(n&&n.getBoundingClientRect)return n.getBoundingClientRect().top}}}();if(!r)return!1;return!(r-o<n-120-80)&&(t.scrollIntoView(!1),!0)}var MC=(e={})=>{const{getScrollElement:t,allowCustomScrollHandler:n}=e;if(!t)return;const o=function(){const e=document.createElement("div");e.style.paddingBottom="120px",e.id="#editor-scroll-gutter".substr(1);let t,n=!1,o=!1,r=null,i=!1;return{addGutter(n){n&&(r=n,n.appendChild(e),o=!0,t&&t.observe(e))},removeGutter(){r&&o&&(o=!1,r.removeChild(e),t&&t.unobserve(e))},element:()=>e,isMounted:()=>o,visible:()=>t?i:o,observe(e){n||(n=!0,t=jC(e,e=>i=e))},destroy(){t&&t.disconnect(),t=void 0,this.removeGutter(),n=o=!1}}}();let r=null;return new s.Plugin({props:{scrollThreshold:60,scrollMargin:120,handleScrollToSelection:()=>!1!==n&&(!!(o.isMounted()&&o.visible()&&r)&&IC(r,o.element()))},view(e){r=t(e);let n=e.dom,i=n.parentElement;return{destroy(){o.destroy(),r=i=n=null},update(e,t){if(!r||!i)return;const n=e.state;if(t.selection===n.selection)return;const a=o.isMounted(),s=r.offsetHeight;i.offsetHeight-(a?120:0)>=s-120?a||(o.observe(r),o.addGutter(i)):a&&o.removeGutter()}}}})};var NC=e=>({name:"base",pmPlugins(){const t=[{name:"filterStepsPlugin",plugin:({dispatchAnalyticsEvent:e})=>(e=>new s.Plugin({filterTransaction:t=>!(t.steps||[]).some(e=>e.from>e.to)||(console.warn("The transaction was blocked because it contains invalid steps",t.steps),e({action:mt.a.DISCARDED_INVALID_STEPS_FROM_TRANSACTION,actionSubject:mt.b.EDITOR,attributes:{analyticsEventPayloads:Object(bt.b)(t)},eventType:mt.d.OPERATIONAL}),!1)}))(e)},{name:"inlineCursorTargetPlugin",plugin:()=>e&&e.allowInlineCursorTarget?xC():void 0},{name:"focusHandlerPlugin",plugin:({dispatch:e})=>(e=>new s.Plugin({key:vC,state:{init:()=>!0,apply:(t,n)=>{const o=t.getMeta(vC);return"boolean"==typeof o&&o!==n?(e(vC,o),o):n}},props:{handleDOMEvents:{click:e=>(vC.getState(e.state)||e.dispatch(e.state.tr.setMeta(vC,e.hasFocus())),!1),focus:e=>(vC.getState(e.state)||e.dispatch(e.state.tr.setMeta(vC,!0)),!1),blur:e=>(vC.getState(e.state)&&e.dispatch(e.state.tr.setMeta(vC,!1)),!1)}}}))(e)},{name:"newlinePreserveMarksPlugin",plugin:CC},{name:"reactNodeView",plugin:()=>AC.a},{name:"frozenEditor",plugin:({dispatchAnalyticsEvent:t,providerFactory:n})=>e&&e.inputTracking&&e.inputTracking.enabled?((e,t,n)=>{let o,r=0;(null==n?void 0:n.trackInteractionType)&&(o=bO.a.LOADING);const i=t&&"number"==typeof t.samplingRate?t.samplingRate:100,a=t&&"number"==typeof t.slowThreshold?t.slowThreshold:300,c=t&&"number"==typeof t.freezeThreshold?t.freezeThreshold:600,l=t&&t.countNodes;return new s.Plugin({props:Object(fO.a)()?{handleTextInput(t){const{state:s}=t,c=performance.now();return(null==n?void 0:n.trackInteractionType)&&(o=bO.a.TYPING),requestAnimationFrame(()=>{var n,o;const d=performance.now()-c;i&&++r===i&&(r=0,e({action:mt.a.INPUT_PERF_SAMPLING,actionSubject:mt.b.EDITOR,attributes:{time:d,nodeSize:s.doc.nodeSize,nodeCount:l?Object(vO.a)(t.state):void 0,participants:Object(gO.a)(s),objectId:null===(n=Object(yO.b)(s))||void 0===n?void 0:n.objectId},eventType:mt.d.OPERATIONAL})),d>a&&e({action:mt.a.SLOW_INPUT,actionSubject:mt.b.EDITOR,attributes:{time:d,nodeSize:s.doc.nodeSize,nodeCount:l?Object(vO.a)(t.state):void 0,participants:Object(gO.a)(s),objectId:null===(o=Object(yO.b)(s))||void 0===o?void 0:o.objectId},eventType:mt.d.OPERATIONAL})}),!1},handleDOMEvents:(null==n?void 0:n.trackInteractionType)?{click:()=>(o=bO.a.CLICKING,!1),paste:()=>(o=bO.a.PASTING,!1)}:void 0}:void 0,view(t){if(!Object(fO.b)())return{};try{new PerformanceObserver(r=>{const i=r.getEntries();for(let a=0;a<i.length;a++){const{duration:r}=i[a];r>c&&OO(e,t,r,l,(null==n?void 0:n.trackInteractionType)?o:void 0,(null==n?void 0:n.trackSeverity)?Object(mO.g)(r,n.severityNormalThreshold,n.severityDegradedThreshold):void 0)}}).observe({entryTypes:["longtask"]})}catch(r){}return{destroy:()=>{void 0}}}})})(t,e.inputTracking,e.bFreezeTracking):void 0},{name:"decorationPlugin",plugin:()=>Object(Mo.a)()},{name:"history",plugin:()=>Object(Cb.b)()},{name:"codeBlockIndent",plugin:()=>BE(Object(o.a)(Object(o.a)({},ze.b),{},{"Mod-[":()=>!0,"Mod-]":()=>!0}))},{name:"contextIdentifier",plugin:({dispatch:e,providerFactory:t})=>Object(yO.a)(e,t)}];return e&&e.allowScrollGutter&&t.push({name:"scrollGutterPlugin",plugin:()=>MC(e.allowScrollGutter)}),t},nodes:()=>[{name:"doc",node:mC.a},{name:"paragraph",node:bC.a},{name:"text",node:gC.a}]}),RC=n("QWk3");const PC=e=>({payload:{action:mt.a.STOPPED,actionSubject:mt.b.EDITOR,actionSubjectId:mt.c.SAVE,attributes:{inputMethod:mt.e.SHORTCUT,documentSize:e.doc.nodeSize},eventType:mt.d.UI}});var LC=e=>({name:"submitEditor",pmPlugins:()=>[{name:"submitEditor",plugin:({dispatch:t})=>function(e,t){if(t)return Object(ln.b)({[""+Te.submit.common]:(n,o,r)=>{const i=Ag.a.getState(n);return i&&i.waitForMediaUpload&&!i.allUploadsFinished||(e(hu.a,PC(n)),t(r)),!0}})}(t,e)}]});const DC=new s.PluginKey("fakeTextCursorPlugin");var _C=()=>({name:"fakeTextCursor",pmPlugins:()=>[{name:"fakeTextCursor",plugin:()=>new s.Plugin({key:DC,props:{decorations:Dh.b}})}]});const BC=ru()({id:"1BeHh",loader:()=>Promise.all([n.e("vendors~4134d62c"),n.e(2),n.e(3),n.e("@atlaskit-internal-editor-core-floating-toolbar~4134d62c")]).then(n.bind(null,"Zbnp")),loading:()=>null});var $C=n("Z+h7");const zC=e=>Object(f.findDomRefAtPos)(e.state.selection.from,e.domAtPos.bind(e));function FC(e){return!!e}var UC=()=>({name:"floatingToolbar",pmPlugins:(e=[])=>[{name:"floatingToolbar",plugin:({dispatch:t,reactContext:n,providerFactory:r})=>function(e){const{floatingToolbarHandlers:t,dispatch:n,reactContext:r,providerFactory:i}=e,a=Object(xs.a)((e,a,c,l)=>{const{intl:d}=r(),u=t.map(e=>e(l,d,i)).filter(FC).map(e=>function(e){if(Array.isArray(e.nodeType))return Object(o.a)(Object(o.a)({},e),{},{nodeType:e.nodeType.filter(FC)});return e}(e)),p=u&&((e,t)=>{let n;if(t.find(t=>{const o=Object(f.findSelectedNodeOfType)(t.nodeType)(e);return o&&(n={node:o.node,pos:o.pos,config:t}),!!o}),n)return n;const o={};t.forEach(e=>{Array.isArray(e.nodeType)?e.nodeType.forEach(t=>{o[t.name]=e}):o[e.nodeType.name]=e});const{$from:r}=e;for(let i=r.depth;i>0;i--){const e=r.node(i),t=o[e.type.name];if(t)return{config:t,node:e,pos:r.pos}}if(e instanceof s.AllSelection){const e=r.node(0);let t=null;const n=Object($C.b)(e,e=>(t=o[e.type.name],!!t));if(n&&t)return{config:t,node:n,pos:r.pos}}})(l.selection,u);return n(HC,p),p});return new s.Plugin({key:HC,state:{init:()=>{BC.preload()},apply:a},view:()=>({destroy:()=>{a.cancel()}})})}({dispatch:t,floatingToolbarHandlers:e,reactContext:n,providerFactory:r})}],contentComponent:({popupsMountPoint:e,popupsBoundariesElement:t,popupsScrollableElement:n,editorView:o,providerFactory:r,dispatchAnalyticsEvent:i})=>a.a.createElement(d.a,{plugins:{floatingToolbarState:HC,editorDisabledPlugin:nl.b},render:({editorDisabledPlugin:s,floatingToolbarState:c})=>{if(!c||!c.config||void 0!==c.config.visible&&!c.config.visible)return null;const{title:l,getDomRef:d=zC,items:u,align:p="center",className:h="",height:f,width:b,offset:g=[0,12],forcePlacement:v,onPositionCalculated:y}=c.config,O=d(o);if(!O||s&&s.editorDisabled)return null;let E;const w=Array.isArray(u)?u:u(c.node);return y&&(E=e=>y(o,e)),a.a.createElement(m.a,{ariaLabel:l,offset:g,target:O,alignY:"bottom",forcePlacement:v,fitHeight:f,fitWidth:b,alignX:p,stick:!0,mountTo:e,boundariesElement:t,scrollableElement:n,onPositionCalculated:E},a.a.createElement(BC,{target:O,items:w,node:c.node,dispatchCommand:e=>e&&e(o.state,o.dispatch),editorView:o,className:h,focusEditor:()=>o.focus(),providerFactory:r,popupsMountPoint:e,popupsBoundariesElement:t,popupsScrollableElement:n,dispatchAnalyticsEvent:i}))}})});const HC=new s.PluginKey("floatingToolbarPluginKey");const WC=a.a.createContext([]);WC.Provider;class VC{constructor(){this.plugins=[]}add(e){return this.plugins.push(e),this}has(e){return this.plugins.some(t=>Array.isArray(t)?t[0]===e:t===e)}getEditorPlugins(e){const t=this.processEditorPlugins();return this.removeExcludedPlugins(t,e)}processEditorPlugins(){const e=new Map;this.plugins.forEach(t=>{if(Array.isArray(t)){const[n,o]=t;e.set(n,o)}else{if(e.has(t)&&void 0===e.get(t))throw new Error(t+" is already included!");e.set(t,void 0)}});let t=[];return e.forEach((e,n)=>{t.push(n(e))}),t}removeExcludedPlugins(e,t){return t?e.filter(e=>!e||!t.has(e.name)):e}}const KC=new s.PluginKey("clipboardPlugin"),qC=(e,t,n)=>{const o=GC(e.state,n);return o&&t(o),!1},GC=(e,t)=>{const{selection:n,doc:o}=e,r=Object(Bn.j)(n)||Object(Bn.k)(n,o)||Object(Bn.g)(n)||Object(Bn.h)(e);if(r){const{actionSubjectId:e}=r;let n=[];switch(e){case mt.c.NODE:n.push(r.attributes.node);break;case mt.c.RANGE:n.push(...r.attributes.nodes);break;case mt.c.ALL:n.push("all");break;case mt.c.CELL:{const{selectedCells:e}=r.attributes;n.push(...Array(e).fill("tableCell"));break}}return{eventType:mt.d.TRACK,action:t,actionSubject:mt.b.DOCUMENT,attributes:{content:n}}}if(n instanceof s.TextSelection&&n.$cursor)return{eventType:mt.d.TRACK,action:t,actionSubject:mt.b.DOCUMENT,attributes:{content:["caret"]}}};var YC=()=>({name:"clipboard",pmPlugins:()=>[{name:"clipboard",plugin:e=>(({dispatchAnalyticsEvent:e})=>new s.Plugin({key:KC,props:{handleDOMEvents:{cut:t=>qC(t,e,mt.a.CUT),copy:t=>qC(t,e,mt.a.COPIED)}}}))(e)}]}),XC=n("6hpg");const JC=new s.PluginKey("placeholderPlugin");function ZC(e,t){return{hasPlaceholder:!0,placeholderText:e,pos:t||1}}const QC={hasPlaceholder:!1};function eT(e,t,n,o){const r=vC.getState(e);if(n&&Object(Ue.f)(e.doc))return ZC(n);const i=t();if(i&&Object(Ue.h)(e)&&r){const{$from:t}=e.selection;return ZC(i,t.pos)}if(o&&Object(Ue.a)(e)&&r){const{$from:t}=e.selection;return ZC("  "+o,t.pos-1)}return QC}function tT(e,t,n){if(!e&&!t&&!n)return;const o=function(e){let t=0;return()=>{if(!e||0===e.length)return;const{length:n}=e,o=e[t++];return t%=n,o}}(t);return new s.Plugin({key:JC,state:{init:(t,r)=>eT(r,o,e,n),apply:(t,r,i,a)=>{const s=t.getMeta(JC);if(s){if(s.removePlaceholder)return QC;if(s.applyPlaceholderIfEmpty)return eT(a,o,e,n)}return eT(a,o,e,n)}},props:{decorations(e){const{hasPlaceholder:t,placeholderText:n,pos:o}=function(e){return JC.getState(e)}(e);if(t&&n&&void 0!==o)return function(e,t,n=1){const o=document.createElement("span");let r=XC.a;const i=W.getState(e);i&&"end"===i.align?r+=" align-end":i&&"center"===i.align&&(r+=" align-center"),o.className=r;const a=document.createElement("span");return a.textContent=t,o.appendChild(a),Yt.b.create(e.doc,[Yt.a.widget(n,o,{side:-1,key:"placeholder"})])}(e,n,o)}}})}var nT=e=>({name:"placeholder",pmPlugins:()=>[{name:"placeholder",plugin:()=>tT(e&&e.placeholder,e&&e.placeholderHints,e&&e.placeholderBracketHint)}]}),oT=n("JsG+");const rT=e=>({decorationSet:Object(Bn.i)(e.tr),selection:e.selection}),iT=(e,t,n={})=>new s.Plugin({key:oo.d,state:so(e,rT),view:()=>({update:e=>{const{state:n,dispatch:o}=e;if(!Object(Bn.o)(ao(n),n))return;const r=Object(Bn.j)(n.selection)||Object(Bn.g)(n.selection)||!e.mouseDown&&(Object(Bn.k)(n.selection,n.doc)||Object(Bn.h)(n));r&&t(r),io(e=>({type:Qn.SET_DECORATIONS,selection:e.tr.selection,decorationSet:Object(Bn.i)(e.tr)}))(n,o)}}),filterTransaction:(e,t)=>!(n.useLongPressSelection&&e.selectionSet&&e.selection instanceof s.NodeSelection&&!e.getMeta(oo.d))&&!(t.selection instanceof s.NodeSelection&&e.selection instanceof s.TextSelection&&t.selection.from===e.selection.from&&t.selection.to===e.selection.to),props:{decorations:e=>ao(e).decorationSet,handleDOMEvents:{mouseup:(e,n)=>{if(!n.shiftKey){const n=Object(Bn.k)(e.state.selection,e.state.doc)||Object(Bn.h)(e.state);n&&t(n)}return!1},keydown:(e,t)=>{if(ys.a.gecko){const t=e.nodeDOM(e.state.selection.head);t instanceof HTMLElement&&"false"===t.getAttribute("contenteditable")&&(t.removeAttribute("contenteditable"),requestAnimationFrame(()=>{t.setAttribute("contenteditable","false")}))}return!1}}}});var aT=function(){const e={};return Object(Te.bindKeymapWithCommand)(Te.moveRight.common,lo,e),Object(Te.bindKeymapWithCommand)(Te.moveLeft.common,uo,e),Object(ln.b)(e)},sT=n("OSPm"),cT=n("hYG7");const lT={"tableView-content-wrap":"table","mediaSingleView-content-wrap":".rich-media-item"},dT=(e,t)=>{const[n,...o]=t,r=[e.getPropertyValue(n)];"content-box"===e.getPropertyValue("box-sizing")&&o.forEach(t=>{r.push(e.getPropertyValue(t))});let i=0;for(let a=0;a<r.length;a++)i+=parseFloat(r[a]);return i},uT=(e,t)=>{const n=e.state.selection,{$from:o,side:r}=n,i=r===Ze.c.RIGHT,a=i?o.nodeBefore:o.nodeAfter,s=t(),c=e.nodeDOM(s),l=document.createElement("span");if(l.className="ProseMirror-gapcursor "+(i?"-right":"-left"),l.appendChild(document.createElement("span")),c instanceof HTMLElement&&l.firstChild){const e=(e=>{const t=Object.keys(lT).find(t=>e.classList.contains(t)),n=t&&lT[t];if(n){const t=e.querySelector(n);if(t)return window.getComputedStyle(t)}})(c)||window.getComputedStyle(c),t=l.firstChild;t.style.height=(e=>dT(e,["height","padding-top","padding-bottom","border-top-width","border-bottom-width"]))(e)+"px",(0!==s||a&&"table"===a.type.name)&&(t.style.marginTop=e.getPropertyValue("margin-top"));const o=a&&Object(cT.a)(a);o?(t.setAttribute("layout",o),t.style.width=(e=>dT(e,["width","padding-left","padding-right","border-left-width","border-right-width"]))(e)+"px"):((e,t,n)=>{if(Object(cT.d)(n))e.style.marginLeft=t.getPropertyValue("margin-left");else{const n=parseFloat(t.getPropertyValue("margin-right"));n>0?e.style.marginLeft=`-${Math.abs(n)}px`:e.style.paddingRight=Math.abs(n)+"px"}})(t,e,n.side)}return l};var pT=n("x9dh"),hT=n("fYIR");var fT=new s.Plugin({key:oo.c,state:{init:()=>!1,apply:(e,t,n,o)=>o.selection instanceof Ze.a},view:()=>({update(e,t){const n=oo.c.getState(t);e.dom.classList.toggle(sT.b,n)}}),props:{decorations:({doc:e,selection:t})=>{if(t instanceof Ze.a){const{$from:n,side:o}=t;let r=t.head;const i=o===Ze.c.RIGHT;if(i&&n.nodeBefore){const e=Object(f.findPositionOfNodeBefore)(t);"number"==typeof e&&(r=e)}const a=i?n.nodeBefore:n.nodeAfter,s=a&&Object(cT.a)(a);return Yt.b.create(e,[Yt.a.widget(r,uT,{key:`${Ze.b}-${o}-${s}`,side:s?-1:0})])}return null},createSelectionBetween(e,t,n){if(!(e&&e.state&&e.state.selection instanceof U.a))return t.pos===n.pos&&Ze.a.valid(n)?new Ze.a(n):void 0},handleClick(e,t,n){const o=e.posAtCoords({left:n.clientX,top:n.clientY});if(o&&o.inside!==t&&!Object(cT.c)(n.target)){const o=20,r=n.offsetX>o?Ze.c.RIGHT:Ze.c.LEFT;return Object(pT.d)(t,r)(e.state,e.dispatch)}return!1},handleDOMEvents:{beforeinput:(e,t)=>"deleteContentBackward"===t.inputType&&e.state.selection instanceof Ze.a&&(t.preventDefault(),Object(pT.b)(hT.a.BACKWARD)(e.state,e.dispatch))}}});var mT=e=>({name:"selection",pmPlugins:()=>[{name:"selection",plugin:({dispatch:t,dispatchAnalyticsEvent:n})=>iT(t,n,e)},{name:"selectionKeymap",plugin:aT},{name:"gapCursorKeymap",plugin:()=>function(){const e={};return Te.bindKeymapWithCommand(Te.insertNewLine.common,(e,t,n)=>!!(e.selection instanceof Ze.a)&&Object(ze.d)(e,t),e),Te.bindKeymapWithCommand(Te.moveLeft.common,(e,t,n)=>{const o=n?n.endOfTextblock.bind(n):void 0;return Object(pT.a)(hT.a.LEFT,o)(e,t,n)},e),Te.bindKeymapWithCommand(Te.moveRight.common,(e,t,n)=>{const o=n?n.endOfTextblock.bind(n):void 0;return Object(pT.a)(hT.a.RIGHT,o)(e,t)},e),Te.bindKeymapWithCommand(Te.moveUp.common,(e,t,n)=>{const o=n?n.endOfTextblock.bind(n):void 0;return Object(pT.a)(hT.a.UP,o)(e,t)},e),Te.bindKeymapWithCommand(Te.moveDown.common,(e,t,n)=>{const o=n?n.endOfTextblock.bind(n):void 0;return Object(pT.a)(hT.a.DOWN,o)(e,t)},e),Te.bindKeymapWithCommand(Te.backspace.common,Object(pT.b)(hT.a.BACKWARD),e),Te.bindKeymapWithCommand(Te.deleteKey.common,Object(pT.b)(hT.a.FORWARD),e),Object(ln.b)(e)}()},{name:"gapCursor",plugin:()=>fT}]}),bT=n("xxff"),gT=n("QOuT");const vT=new RegExp("\n","g"),yT=ys.a.ie&&ys.a.ie_version<=11;class OT{constructor(e,t,n){this.ensureLineNumbers=Object(xs.a)(()=>{let e=1;for(this.node.forEach(t=>{t.text&&(e+=(t.text.match(vT)||[]).length)});this.lineNumberGutter.childElementCount<e;)this.lineNumberGutter.appendChild(document.createElement("span"));for(;this.lineNumberGutter.childElementCount>e;)this.lineNumberGutter.removeChild(this.lineNumberGutter.lastChild)});const{dom:o,contentDOM:r}=Be.DOMSerializer.renderSpec(document,(e=>["div",{class:"code-block"+(yT?" ie11":"")},["div",{class:gT.a.gutter,contenteditable:"false"}],["div",{class:gT.a.content},["pre",["code",{"data-language":e.attrs.language||"",spellcheck:"false"},0]]]])(e));this.getPos=n,this.view=t,this.node=e,this.dom=o,this.contentDOM=r,this.lineNumberGutter=this.dom.querySelector("."+gT.a.gutter),this.ensureLineNumbers()}update(e){return e.type===this.node.type&&(e!==this.node&&(e.attrs.language!==this.node.attrs.language&&this.contentDOM.setAttribute("data-language",e.attrs.language||""),this.node=e,this.ensureLineNumbers()),!0)}ignoreMutation(e){return e.target===this.lineNumberGutter||e.target.parentNode===this.lineNumberGutter}}const ET=new s.PluginKey("codeBlockPlugin"),wT="SET_COPIED_TO_CLIPBOARD";var CT=n("aKkx"),TT=n.n(CT);const ST=[{name:"ABAP",alias:["abap"]},{name:"ActionScript",alias:["actionscript","actionscript3","as"]},{name:"Ada",alias:["ada","ada95","ada2005"]},{name:"AppleScript",alias:["applescript"]},{name:"Arduino",alias:["arduino"]},{name:"Autoit",alias:["autoit"]},{name:"C",alias:["c"]},{name:"C++",alias:["c++","cpp"]},{name:"Clojure",alias:["clojure","clj"]},{name:"CoffeeScript",alias:["coffeescript","coffee-script","coffee"]},{name:"ColdFusion",alias:["coldfusion"]},{name:"C#",alias:["csharp","c#"]},{name:"CSS",alias:["css"]},{name:"CUDA",alias:["cuda","cu"]},{name:"D",alias:["d"]},{name:"Dart",alias:["dart"]},{name:"Delphi",alias:["delphi","pas","pascal","objectpascal"]},{name:"Diff",alias:["diff"]},{name:"Elixir",alias:["elixir","ex","exs"]},{name:"Erlang",alias:["erlang","erl"]},{name:"Fortran",alias:["fortran"]},{name:"FoxPro",alias:["foxpro","vfp","clipper","xbase"]},{name:"Go",alias:["go"]},{name:"GraphQL",alias:["graphql"]},{name:"Groovy",alias:["groovy"]},{name:"Haskell",alias:["haskell","hs"]},{name:"Haxe",alias:["haxe","hx","hxsl"]},{name:"HTML",alias:["html"]},{name:"Java",alias:["java"]},{name:"JavaFX",alias:["javafx","jfx"]},{name:"JavaScript",alias:["javascript","js"]},{name:"JSON",alias:["json"]},{name:"Julia",alias:["julia","jl"]},{name:"Kotlin",alias:["kotlin"]},{name:"LiveScript",alias:["livescript","live-script"]},{name:"Lua",alias:["lua"]},{name:"Mathematica",alias:["mathematica","mma","nb"]},{name:"MATLAB",alias:["matlab"]},{name:"Objective-C",alias:["objective-c","objectivec","obj-c","objc"]},{name:"Objective-J",alias:["objective-j","objectivej","obj-j","objj"]},{name:"ObjectPascal",alias:["objectpascal"]},{name:"OCaml",alias:["ocaml"]},{name:"Octave",alias:["octave"]},{name:"Perl",alias:["perl","pl"]},{name:"PHP",alias:["php","php3","php4","php5"]},{name:"PlainText",alias:["plaintext","text"]},{name:"PowerShell",alias:["powershell","posh","ps1","psm1"]},{name:"Prolog",alias:["prolog"]},{name:"Puppet",alias:["puppet"]},{name:"Python",alias:["python","py"]},{name:"QML",alias:["qbs"]},{name:"R",alias:["r"]},{name:"Racket",alias:["racket","rkt"]},{name:"reStructuredText",alias:["restructuredtext","rst","rest"]},{name:"Ruby",alias:["ruby","rb","duby"]},{name:"Rust",alias:["rust"]},{name:"Sass",alias:["sass"]},{name:"Scala",alias:["scala"]},{name:"Scheme",alias:["scheme","scm"]},{name:"Shell",alias:["shell","bash","sh","ksh","zsh"]},{name:"Smalltalk",alias:["smalltalk","squeak","st"]},{name:"SQL",alias:["sql","postgresql","postgres","plpgsql","psql","postgresql-console","postgres-console","tsql","t-sql","mysql","sqlite"]},{name:"StandardML",alias:["standardmL","sml"]},{name:"Swift",alias:["swift"]},{name:"Tcl",alias:["tcl"]},{name:"TeX",alias:["tex","latex"]},{name:"TypeScript",alias:["typescript","ts"]},{name:"Vala",alias:["vala","vapi"]},{name:"VbNet",alias:["vbnet","vb.net"]},{name:"Verilog",alias:["verilog","v"]},{name:"VHDL",alias:["vhdl"]},{name:"VisualBasic",alias:["visualbasic","vb"]},{name:"XML",alias:["xml"]},{name:"XQuery",alias:["xquery","xqy","xq","xql","xqm"]},{name:"YAML",alias:["yaml","yml"]}];function kT(e){return e.alias[0]}const xT=(e,t)=>{const{schema:{nodes:n},tr:o}=e;if(t){let e=o;e=Object(f.findSelectedNodeOfType)(n.codeBlock)(o.selection)?Object(f.removeSelectedNode)(o):Object(f.removeParentNodeOfType)(n.codeBlock)(o),t(e)}return!0},AT=(e,t)=>{const{schema:{nodes:n},tr:o}=e,r=Object(f.findParentNodeOfType)(n.codeBlock)(o.selection),i=r&&r.node.textContent;if(i){yu(i);let e=o;e.setMeta(ET,{type:wT,data:!0}),t&&t(e)}return!0},jT=(e,t)=>{const{tr:n}=e,o=ET.getState(e);let r=n;return o&&o.contentCopied&&(r.setMeta(ET,{type:wT,data:!1}),t&&t(r)),!0},IT=Object(h.f)({selectLanguage:{id:"fabric.editor.selectLanguage",defaultMessage:"Select language",description:"Code blocks display software code. A prompt to select the software language the code is written in."}}),MT=ST.sort((e,t)=>e.name>t.name?1:e.name<t.name?-1:0);const NT=(e=!1)=>(t,{formatMessage:n})=>{const o=ET.getState(t);if(void 0===o)return;const{pos:r}=o;if(null!==r&&t.doc.nodeAt(r)){const i=gE(t),a=i&&i.node.attrs?i.node.attrs.language:void 0,c=[{label:"(None)",value:"",alias:["none"]}].concat(MT.map(e=>({label:e.name,value:kT(e),alias:e.alias}))),l={type:"select",onChange:e=>(e=>(t,n)=>{const{schema:{nodes:{codeBlock:o}},tr:r}=t,i={language:e},a=ET.getState(t);if(void 0===a)return!1;const{pos:c}=a;if(null===c)return!1;let l=r;const d=Object(f.isNodeSelection)(r.selection);return l=r.setNodeMarkup(c,o,i),d&&(l=l.setSelection(s.NodeSelection.create(l.doc,c))),l.setMeta("scrollIntoView",!1),n&&n(l),!0})(e.value),defaultValue:a?c.find(e=>e.value===a):void 0,placeholder:n(IT.selectLanguage),options:c,filterOption:RT},d={type:"separator"},u=t.schema.nodes.codeBlock,p={type:"button",appearance:"danger",icon:Io.a,onMouseEnter:Object(Mo.b)(u,!0),onMouseLeave:Object(Mo.b)(u,!1),onClick:xT,title:n(S.a.remove)};let h=[];if(e){h=[{type:"button",appearance:"subtle",icon:TT.a,onClick:AT,title:n(o.contentCopied?S.a.copiedToClipboard:S.a.copyToClipboard),onMouseLeave:jT,hideTooltipOnClick:!1,disabled:o.isNodeSelected},d]}return{title:"CodeBlock floating controls",getDomRef:e=>Object(f.findDomRefAtPos)(r,e.domAtPos.bind(e)),nodeType:u,items:[l,d,...h,p]}}},RT=(e,t)=>{const{data:n}=e,o=t.toLowerCase();return n.label.toLowerCase().includes(o)||n.alias.some(e=>e.toLowerCase()===o)};var PT=function(e){return Object(ln.b)({Backspace:(t,n)=>{const o=Object(to.h)(t.selection),{paragraph:r,codeBlock:i,listItem:a,table:c,layoutColumn:l}=t.schema.nodes;if(!o||o.parent.type!==i)return!1;if(1===o.pos||Object(f.hasParentNodeOfType)(a)(t.selection)&&0===o.parentOffset){const e=Object(f.findParentNodeOfTypeClosestToPos)(o,i);return!!e&&(n(t.tr.setNodeMarkup(e.pos,e.node.type,e.node.attrs,[]).setBlockType(o.pos,o.pos,r)),!0)}if(n&&o.node&&Object(to.l)(e)(o.node())&&(Object(f.hasParentNodeOfType)(l)(t.selection)||Object(f.hasParentNodeOfType)(c)(t.selection))){const{tr:e}=t,r=o.pos;return n(Object(to.u)((u=o,e=>e.delete(u.before(u.depth)-1,u.end(u.depth)+1)),(d=r,e=>{const t=s.Selection.findFrom(e.doc.resolve(d),-1,!0);return t&&e.setSelection(t),e}))(e).scrollIntoView()),!0}var d,u;return!1}})};const LT={"{":"}","[":"]","(":")"},DT=(e,t)=>{const n=Object.keys(LT).find(t=>e.endsWith(t)),o=n?LT[n]:void 0;return{left:n,right:o,hasTrailingMatchingBracket:!!o&&t.startsWith(o)}},_T={"'":"'",'"':'"',"`":"`"},BT=(e,t)=>{const n=Object.keys(_T).find(t=>e.endsWith(t)),o=n?_T[n]:void 0;return{left:n,right:o,hasTrailingMatchingQuote:!!o&&t.startsWith(o)}},$T=Object(o.a)(Object(o.a)({},LT),_T),zT=e=>e.selection.$from.sameParent(e.selection.$to)&&e.selection.$from.parent.type===e.schema.nodes.codeBlock,FT=e=>!!Object(to.h)(e.selection)&&zT(e),UT=e=>{const{$from:t}=e.selection;if(t.nodeBefore&&t.nodeBefore.isText){const e=t.nodeBefore.text.lastIndexOf("\n");return{text:t.nodeBefore.text.substring(e+1),pos:t.start()+e+1}}return{text:"",pos:t.pos}},HT=e=>{const{$to:t}=e.selection;if(t.nodeAfter&&t.nodeAfter.isText){const e=t.nodeAfter.text.indexOf("\n");return{text:t.nodeAfter.text.substring(0,e>=0?e:void 0),pos:e>=0?t.pos+e:t.end()}}return{text:"",pos:t.pos}};function WT(e){const{pos:t}=UT(e),{pos:n}=HT(e);return{text:e.doc.textBetween(t,n),start:t,end:n}}const VT=(e,t)=>{let n=0;e.split("\n").forEach(e=>{t(e,n),n+=e.length+1})},KT={token:" ",size:2,regex:/[^ ]/},qT={token:"\t",size:1,regex:/[^\t]/},GT=e=>{const t=e.startsWith("\t")?qT:KT,n=e.search(t.regex);return{indentToken:t,indentText:e.substring(0,n>=0?n:e.length)}};function YT(e,t){return 0===t||0===e.length?0:e.length/t}function XT(e,t){const{text:n,start:o}=WT(e),{tr:r,selection:i}=e;return VT(n,(t,n)=>{const{indentText:a,indentToken:c}=GT(t),l=YT(a,c.size),d=c.token.repeat(c.size-a.length%c.size||c.size);r.insertText(d,r.mapping.map(o+n,-1)),Object(bt.a)(e,r,{action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_INDENT,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.KEYBOARD,previousIndentationLevel:l,newIndentLevel:l+1,direction:od.a.INDENT,indentType:od.b.CODE_BLOCK}}),i.empty||r.setSelection(s.TextSelection.create(r.doc,r.mapping.map(i.from,-1),r.selection.to))}),t&&t(r),!0}function JT(e,t){const{text:n,start:o}=WT(e),{tr:r}=e;return VT(n,(t,n)=>{const{indentText:i,indentToken:a}=GT(t);if(i){const t=YT(i,a.size),s=i.length%a.size||a.size;r.delete(r.mapping.map(o+n),r.mapping.map(o+n+s)),Object(bt.a)(e,r,{action:mt.a.FORMATTED,actionSubject:mt.b.TEXT,actionSubjectId:mt.c.FORMAT_INDENT,eventType:mt.d.TRACK,attributes:{inputMethod:mt.e.KEYBOARD,previousIndentationLevel:t,newIndentLevel:t-1,direction:od.a.OUTDENT,indentType:od.b.CODE_BLOCK}})}}),t&&t(r),!0}var ZT=new s.Plugin({props:{handleTextInput(e,t,n,o){const{state:r,dispatch:i}=e;if(FT(r)){const e=UT(r).text,s=HT(r).text;if(a=s,Object.keys($T).some(e=>a.startsWith($T[e]))&&(e=>Object.keys($T).some(t=>e===$T[t]))(o)&&s.startsWith(o))return i(Object(f.setTextSelection)(n+o.length)(r.tr)),!0;if(((e,t)=>!!/^[}\])]/.test(t)||!/^[^\s]/.test(t))(0,s)){const{left:a,right:c}=DT(e+o,s);if(a&&c){const e=r.schema.text(o+c);let a=r.tr.replaceWith(t,n,e);return i(Object(f.setTextSelection)(t+o.length)(a)),!0}}if(((e,t)=>!!/^[}\])]/.test(t)||!/^[^\s]/.test(t)&&(!/[A-Za-z0-9]$/.test(e)&&!/[\'\"\`]$/.test(e)))(e,s)){const{left:a,right:c}=BT(e+o,s);if(a&&c){const e=r.schema.text(o+c);let a=r.tr.replaceWith(t,n,e);return i(Object(f.setTextSelection)(t+o.length)(a)),!0}}}var a;return!1},handleKeyDown:Object(ln.a)({Backspace:(e,t)=>{if(FT(e)){const n=Object(to.h)(e.selection),o=UT(e).text,r=HT(e).text,{left:i,right:a,hasTrailingMatchingBracket:s}=DT(o,r);if(i&&a&&s&&t)return t(e.tr.delete(n.pos-i.length,n.pos+a.length)),!0;const{left:c,right:l,hasTrailingMatchingQuote:d}=BT(o,r);if(c&&l&&d&&t)return t(e.tr.delete(n.pos-c.length,n.pos+l.length)),!0;const{indentToken:{size:u,token:p},indentText:h}=GT(o);if(o===h&&h.endsWith(p.repeat(u))&&t)return t(e.tr.delete(n.pos-(u-h.length%u||u),n.pos)),!0}return!1},Enter:Object(He.b)(zT,(function(e,t){const{text:n}=UT(e),{indentText:o}=GT(n);return!(!o||!t)&&(t(e.tr.insertText("\n"+o)),!0)})),"Mod-]":Object(He.b)(zT,XT),"Mod-[":Object(He.b)(zT,JT),Tab:Object(He.b)(zT,(e,t)=>!!t&&(FT(e)?function(e,t){const{text:n}=UT(e),{indentToken:o}=GT(n),r=o.token.repeat(o.size-n.length%o.size||o.size);return t(e.tr.insertText(r)),!0}(e,t):XT(e,t))),"Shift-Tab":Object(He.b)(zT,JT),"Mod-a":(e,t)=>{if(zT(e)){const{$from:n,$to:o}=e.selection;if(!(0===n.parentOffset&&o.parentOffset===o.parent.nodeSize-2)&&t)return t(e.tr.setSelection(s.TextSelection.create(e.doc,n.start(),o.end()))),!0}return!1}})}});var QT=(e={})=>({name:"codeBlock",nodes:()=>[{name:"codeBlock",node:bT.a}],pmPlugins:()=>[{name:"codeBlock",plugin:()=>((e=!1)=>new s.Plugin({state:{init(e,t){const n=gE(t,t.selection);return{pos:n?n.pos:null,contentCopied:!1,isNodeSelected:!1}},apply(e,t,n,r){if(e.docChanged||e.selectionSet){const{selection:n}=r,i=gE(r,n);return Object(o.a)(Object(o.a)({},t),{},{pos:i?i.pos:null,isNodeSelected:e.selection instanceof s.NodeSelection})}const i=e.getMeta(ET);return i&&i.type===wT?Object(o.a)(Object(o.a)({},t),{},{contentCopied:i.data}):t}},key:ET,props:{nodeViews:{codeBlock:(e,t,n)=>new OT(e,t,n)},handleClickOn:Object(Bn.a)(["codeBlock"],e=>!(!e.closest("."+gT.a.gutter)&&!e.classList.contains(gT.a.content)),{useLongPressSelection:e})}}))(e.useLongPressSelection)},{name:"codeBlockIDEKeyBindings",plugin:()=>ZT},{name:"codeBlockKeyMap",plugin:({schema:e})=>PT(e)}],pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"codeblock",title:e(_p.a.codeblock),description:e(_p.a.codeblockDescription),keywords:["code block"],priority:700,keyshortcut:"```",icon:()=>a.a.createElement(mn.b,{label:e(_p.a.codeblock)}),action(e,t){const n=e(t.schema.nodes.codeBlock.createChecked());return Object(bt.a)(t,n,{action:mt.a.INSERTED,actionSubject:mt.b.DOCUMENT,actionSubjectId:mt.c.CODE_BLOCK,attributes:{inputMethod:mt.e.QUICK_INSERT},eventType:mt.d.TRACK})}}],floatingToolbar:NT(e.allowCopyToClipboard)}});function eS(e){const t=new VC;return t.add([RE,e.paste]),t.add(YC),t.add([NC,e.base]),t.add([ow,e.blockType]),t.add([nT,e.placeholder]),t.add(aw),e.annotationProviders&&t.add([bh.a,e.annotationProviders]),t.add([Ew,e.cardOptions]),t.add([iC,e.textFormatting]),t.add(u.a),t.add([oT.a,e.quickInsert]),t.add(RC.a),t.add(fC),t.add(nl.a),t.add([LC,e.submitEditor]),t.add(_C),t.add(UC),t.add([jn.a,e.featureFlags||{}]),t.add([mT,e.selection]),t.add([QT,e.codeBlock]),t}var tS=n("IrpU");n.d(t,"b",(function(){return oS})),n.d(t,"a",(function(){return rS}));function nS(e){const{appearance:t}=e;return Object(pO.a)(t)?{getScrollElement:()=>document.querySelector(".fabric-editor-popup-scroll-parent")}:"mobile"===t?{getScrollElement:()=>document.body,allowCustomScrollHandler:!1}:void 0}function oS(e){var t,n,r,i,a,s,c,l,d,u,p,h;const f=e.appearance,m="mobile"===f,b=Object(pO.a)(f),g=e.performanceTracking&&e.performanceTracking.inputTracking?e.performanceTracking.inputTracking:{enabled:b||void 0!==e.inputSamplingLimit&&e.inputSamplingLimit>0,samplingRate:e.inputSamplingLimit},v=void 0!==(null===(t=e.performanceTracking)||void 0===t?void 0:t.inputTracking);g.countNodes=!(v||!Object(tS.a)())||g.countNodes;const y=void 0===(null===(n=e.performanceTracking)||void 0===n?void 0:n.bFreezeTracking)&&Object(tS.a)(),O={trackInteractionType:!!y||!!(null===(i=null===(r=e.performanceTracking)||void 0===r?void 0:r.bFreezeTracking)||void 0===i?void 0:i.trackInteractionType),trackSeverity:!!y||!!(null===(s=null===(a=e.performanceTracking)||void 0===a?void 0:a.bFreezeTracking)||void 0===s?void 0:s.trackSeverity),severityNormalThreshold:null!==(d=null===(l=null===(c=e.performanceTracking)||void 0===c?void 0:c.bFreezeTracking)||void 0===l?void 0:l.severityNormalThreshold)&&void 0!==d?d:2e3,severityDegradedThreshold:null!==(h=null===(p=null===(u=e.performanceTracking)||void 0===u?void 0:u.bFreezeTracking)||void 0===p?void 0:p.severityDegradedThreshold)&&void 0!==h?h:3e3};return{featureFlags:Object(hO.a)(e),paste:{cardOptions:e.UNSAFE_cards,sanitizePrivateContent:e.sanitizePrivateContent,predictableLists:e.UNSAFE_predictableLists},base:{allowInlineCursorTarget:!m,allowScrollGutter:nS(e),inputTracking:g,bFreezeTracking:O},blockType:{lastNodeMustBeParagraph:"comment"===f||"chromeless"===f,allowBlockType:e.allowBlockType},placeholder:{placeholder:e.placeholder,placeholderHints:e.placeholderHints,placeholderBracketHint:e.placeholderBracketHint},textFormatting:e.textFormatting,annotationProviders:e.annotationProviders,submitEditor:e.onSave,quickInsert:{enableElementBrowser:e.elementBrowser&&e.elementBrowser.showModal,disableDefaultItems:m,headless:m},selection:{useLongPressSelection:!1},cardOptions:e.UNSAFE_cards,codeBlock:Object(o.a)(Object(o.a)({},e.codeBlock),{},{useLongPressSelection:!1})}}function rS(e,t,n){var i;const a=e.appearance,s="mobile"===a,c="comment"===a,l=Object(pO.a)(a),d=eS(oS(e));if(e.allowAnalyticsGASV3){const{performanceTracking:t,transactionTracking:i}=e;d.add([r.b,Object(o.a)({createAnalyticsEvent:n},t||i?{performanceTracking:Object(o.a)(Object(o.a)({},t||{}),i?{transactionTracking:i}:{})}:{})])}if(e.allowBreakout&&l&&d.add([B,{allowBreakoutButton:"full-page"===e.appearance}]),e.allowTextAlignment&&d.add(me),e.allowTextColor&&d.add([be.a,e.allowTextColor]),e.UNSAFE_predictableLists?d.add(gn):d.add(kn),e.allowRule&&d.add(Ln),e.allowExpand&&d.add([Ro,{allowInsertion:Po(e),useLongPressSelection:!1}]),e.media){d.add([Lo.b,{shouldCalcBreakoutGridLines:l}]);const t=void 0!==e.media.alignLeftOnInsert?e.media.alignLeftOnInsert:c,n=void 0!==e.media.allowAdvancedToolBarOptions?e.media.allowAdvancedToolBarOptions:l||c;d.add([Do.a,Object(o.a)(Object(o.a)({},e.media),{},{allowLazyLoading:!s,allowBreakoutSnapPoints:l,allowAdvancedToolBarOptions:n,allowDropzoneDropLine:l,allowMediaSingleEditable:!s,allowRemoteDimensionsFetch:!s,allowMarkingUploadsAsIncomplete:s,fullWidthEnabled:"full-width"===e.appearance,uploadErrorHandler:e.uploadErrorHandler,waitForMediaUpload:e.waitForMediaUpload,isCopyPasteEnabled:!s,alignLeftOnInsert:t})])}if(e.mentionProvider&&d.add([_o.a,{createAnalyticsEvent:n,sanitizePrivateContent:e.sanitizePrivateContent,mentionInsertDisplayName:e.mentionInsertDisplayName,useInlineWrapper:s,allowZeroWidthSpaceAfter:!s}]),e.emojiProvider&&d.add([gr,{createAnalyticsEvent:n,useInlineWrapper:s,allowZeroWidthSpaceAfter:!s}]),e.allowTables){const n=e.allowTables&&"boolean"!=typeof e.allowTables?e.allowTables:{};d.add([ql,{tableOptions:n,breakoutEnabled:"full-page"===e.appearance,allowContextualMenu:!s,fullWidthEnabled:"full-width"===e.appearance,wasFullWidthEnabled:t&&"full-width"===t.appearance,dynamicSizingEnabled:e.allowDynamicTextSizing}])}if((e.allowTasksAndDecisions||e.taskDecisionProvider)&&d.add([tu,{allowNestedTasks:e.allowNestedTasks,consumeTabs:l,useLongPressSelection:!1}]),e.feedbackInfo&&d.add([nu.a,e.feedbackInfo]),e.allowHelpDialog&&d.add([pu,e.legacyImageUploadProvider]),e.saveOnEnter&&d.add([gu,e.onSave]),e.legacyImageUploadProvider&&(d.add(ju),e.media||d.add([Do.a,{allowMediaSingle:{disableLayout:!0},allowMediaGroup:!1,isCopyPasteEnabled:!0}])),e.collabEdit||e.collabEditProvider){let t={sanitizePrivateContent:e.sanitizePrivateContent};e.collabEdit&&(t=Object(o.a)(Object(o.a)({},e.collabEdit),t)),d.add([Lu,Object(o.a)(Object(o.a)({},t),{},{EXPERIMENTAL_allowInternalErrorAnalytics:null!==(i=t.EXPERIMENTAL_allowInternalErrorAnalytics)&&void 0!==i?i:Object(tS.a)()})])}if(e.maxContentSize&&d.add([Du.a,e.maxContentSize]),e.allowJiraIssue&&d.add(Vu),e.allowPanel&&d.add([zp,{useLongPressSelection:!1,UNSAFE_allowCustomPanel:e.allowPanel.UNSAFE_allowCustomPanel}]),e.allowExtension){const t="object"==typeof e.allowExtension?e.allowExtension:{};d.add([fh,{breakoutEnabled:"full-page"===e.appearance&&!1!==t.allowBreakout,stickToolbarToBottom:t.stickToolbarToBottom,allowAutoSave:t.allowAutoSave,allowLocalIdGeneration:t.allowLocalIdGeneration,extensionHandlers:e.extensionHandlers,useLongPressSelection:!1}])}if(e.macroProvider&&d.add(mh.a),!e.annotationProviders&&e.allowConfluenceInlineComment&&d.add(bh.a),e.allowDate&&d.add(Ph),e.allowTemplatePlaceholders){const t=!0!==e.allowTemplatePlaceholders?e.allowTemplatePlaceholders:{};d.add([qh,t])}if(e.allowLayouts&&d.add([jf,Object(o.a)(Object(o.a)({},"boolean"==typeof e.allowLayouts?{}:e.allowLayouts),{},{useLongPressSelection:!1})]),e.UNSAFE_cards){const t="full-width"===e.appearance;d.add([Ob,Object(o.a)(Object(o.a)({},e.UNSAFE_cards),{},{platform:s?"mobile":"web",fullWidthMode:t})])}e.autoformattingProvider&&d.add(xb);let u=!0;e.allowStatus&&(u="object"==typeof e.allowStatus&&e.allowStatus.menuDisabled,d.add([ng,{menuDisabled:u,useInlineWrapper:s,allowZeroWidthSpaceAfter:!s}])),e.allowIndentation&&d.add(pg),l&&d.add(hg.a),!1!==e.autoScrollIntoView&&d.add(bg),s&&(d.add(gg.a),d.add(Sg),d.add(kg.a)),d.add([ny,{allowTables:!!e.allowTables,allowExpand:Po(e),insertMenuItems:e.insertMenuItems,horizontalRuleEnabled:e.allowRule,nativeStatusSupported:!u,showElementBrowserLink:e.elementBrowser&&e.elementBrowser.showModal||!1,replacePlusMenuWithElementBrowser:e.elementBrowser&&e.elementBrowser.replacePlusMenu||!1}]),e.allowFindReplace&&d.add(uO);const p=new Set;var h;return-1!==((h={allowBlockType:e.allowBlockType})&&h.allowBlockType&&h.allowBlockType.exclude?h.allowBlockType.exclude:[]).indexOf("codeBlock")&&p.add("codeBlock"),d.getEditorPlugins(p)}},"+Mvc":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=new(n("ehfC").PluginKey)("tableFlexiColumnResizing")},"+kAP":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const o=(e,t)=>0===t.length?e:t.reduce((t,n)=>Math.abs(n-e)<Math.abs(t-e)?n:t),r=["left","right"],i={left:"start",right:"end"}},"+rkc":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("L21V");const r=Object(o.f)({unorderedList:{id:"fabric.editor.unorderedList",defaultMessage:"Bullet list",description:"A list with bullets. Also known as an unordered list"},unorderedListDescription:{id:"fabric.editor.unorderedList.description",defaultMessage:"Create an unordered list",description:""},orderedList:{id:"fabric.editor.orderedList",defaultMessage:"Numbered list",description:"A list with ordered items 1 2 3"},orderedListDescription:{id:"fabric.editor.orderedList.description",defaultMessage:"Create an ordered list",description:""},lists:{id:"fabric.editor.lists",defaultMessage:"Lists",description:"Menu shows ordered/bullet list and unordered/numbered lists"}})},"/NnR":function(e,t,n){"use strict";var o=n("T1Ll").isSpace;e.exports=function(e,t,n,r){var i,a,s,c,l,d,u,p,h,f,m,b,g,v,y,O,E,w,C,T,S=e.lineMax,k=e.bMarks[t]+e.tShift[t],x=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(k++))return!1;if(r)return!0;for(c=h=e.sCount[t]+k-(e.bMarks[t]+e.tShift[t]),32===e.src.charCodeAt(k)?(k++,c++,h++,i=!1,O=!0):9===e.src.charCodeAt(k)?(O=!0,(e.bsCount[t]+h)%4==3?(k++,c++,h++,i=!1):i=!0):O=!1,f=[e.bMarks[t]],e.bMarks[t]=k;k<x&&(a=e.src.charCodeAt(k),o(a));)9===a?h+=4-(h+e.bsCount[t]+(i?1:0))%4:h++,k++;for(m=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(O?1:0),d=k>=x,v=[e.sCount[t]],e.sCount[t]=h-c,y=[e.tShift[t]],e.tShift[t]=k-e.bMarks[t],w=e.md.block.ruler.getRules("blockquote"),g=e.parentType,e.parentType="blockquote",T=!1,p=t+1;p<n&&(e.sCount[p]<e.blkIndent&&(T=!0),!((k=e.bMarks[p]+e.tShift[p])>=(x=e.eMarks[p])));p++)if(62!==e.src.charCodeAt(k++)||T){if(d)break;for(E=!1,s=0,l=w.length;s<l;s++)if(w[s](e,p,n,!0)){E=!0;break}if(E){e.lineMax=p,0!==e.blkIndent&&(f.push(e.bMarks[p]),m.push(e.bsCount[p]),y.push(e.tShift[p]),v.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}f.push(e.bMarks[p]),m.push(e.bsCount[p]),y.push(e.tShift[p]),v.push(e.sCount[p]),e.sCount[p]=-1}else{for(c=h=e.sCount[p]+k-(e.bMarks[p]+e.tShift[p]),32===e.src.charCodeAt(k)?(k++,c++,h++,i=!1,O=!0):9===e.src.charCodeAt(k)?(O=!0,(e.bsCount[p]+h)%4==3?(k++,c++,h++,i=!1):i=!0):O=!1,f.push(e.bMarks[p]),e.bMarks[p]=k;k<x&&(a=e.src.charCodeAt(k),o(a));)9===a?h+=4-(h+e.bsCount[p]+(i?1:0))%4:h++,k++;d=k>=x,m.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(O?1:0),v.push(e.sCount[p]),e.sCount[p]=h-c,y.push(e.tShift[p]),e.tShift[p]=k-e.bMarks[p]}for(b=e.blkIndent,e.blkIndent=0,(C=e.push("blockquote_open","blockquote",1)).markup=">",C.map=u=[t,0],e.md.block.tokenize(e,t,p),(C=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=S,e.parentType=g,u[1]=e.line,s=0;s<y.length;s++)e.bMarks[s+t]=f[s],e.tShift[s+t]=y[s],e.sCount[s+t]=v[s],e.bsCount[s+t]=m[s];return e.blkIndent=b,!0}},"/P2d":function(e,t,n){"use strict";t.a={EDITOR_MOUNTED:"Editor Component Mount Time",PROSEMIRROR_RENDERED:"ProseMirror Render Time"}},"/Tyz":function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("3QpL"),a=n("L21V"),s=n("Nink"),c=n.n(s),l=n("3IV/"),d=n("KsTJ");const u=d.default.button`
  height: 26px;
  width: 26px;
  background: ${l.N900};
  padding: 0;
  border-radius: 4px;
  border: 1px solid ${l.N0};
  cursor: pointer;
  display: block;
`,p=d.default.span`
  border: 1px solid transparent;
  margin: 1px;
  font-size: 0;
  display: flex;
  align-items: center;
  padding: 1px;
  border-radius: 6px;
  &:hover {
    border-color: ${l.N50};
  }
`;var h=n("a8dO");const f=Object(a.f)({selected:{id:"fabric.editor.selected",defaultMessage:"Selected",description:"If the item is selected or not."}});class m extends o.PureComponent{constructor(){super(...arguments),this.onMouseDown=e=>{e.preventDefault()},this.onClick=e=>{const{onClick:t,value:n}=this.props;e.preventDefault(),t(n)}}render(){const{tabIndex:e,value:t,label:n,isSelected:o,borderColor:i,checkMarkColor:a=l.N0,intl:{formatMessage:s}}=this.props;return r.a.createElement(h.a,{content:n},r.a.createElement(p,null,r.a.createElement(u,{onClick:this.onClick,onMouseDown:this.onMouseDown,tabIndex:e,className:""+(o?"selected":""),style:{backgroundColor:t||"transparent",border:"1px solid "+i}},o&&r.a.createElement(c.a,{primaryColor:a,label:s(f.selected)}))))}}var b=Object(a.g)(m),g=n("BMbf");const v=d.default.div`
  padding: 0 ${Object(g.h)()}px;
  /* Firefox bug fix: https://product-fabric.atlassian.net/browse/ED-1789 */
  display: flex;
`;t.a=Object(a.g)(e=>{const{palette:t,cols:n=7,onClick:o,selectedColor:a,className:s,intl:{formatMessage:c}}=e,d=r.a.useMemo(()=>t.reduce((e,t,o)=>{const r=Math.floor(o/n);return e[r]=e[r]||[],e[r].push(t),e},[]),[t,n]);return r.a.createElement(r.a.Fragment,null,d.map(e=>r.a.createElement(v,{className:s,key:"row-first-color-"+e[0].value},e.map(({value:e,label:t,border:n,message:s})=>{return r.a.createElement(b,{key:e,value:e,borderColor:n,label:s?c(s):t,onClick:o,isSelected:e===a,checkMarkColor:(d=e,u=[l.N0,l.N500],u.sort((e,t)=>i.a.difference(t,d)-i.a.difference(e,d))[0])});var d,u}))))})},"/YBo":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var o=n("oxCZ"),r=n.n(o),i=n("CP8u");const a={threshold:.3,keys:[{name:"title",weight:.5},{name:"priority",weight:.3},{name:"keywords",weight:.15},{name:"description",weight:.04},{name:"keyshortcut",weight:.01}]};function s(e,t){const n=new r.a(t,a);return""===e?t.slice(0).sort((e,t)=>(e.priority||Number.POSITIVE_INFINITY)-(t.priority||Number.POSITIVE_INFINITY)):n.search(e)}const c=(e,t)=>(n,o)=>{const r=t&&t.disableDefaultItems?[]:e.lazyDefaultItems(),a=e.providedItems,c=a?Object(i.f)([...r,...a],e=>e.title):r;return s(n||"","all"!==o&&o?c.filter(e=>e.categories&&e.categories.includes(o)):c)},l=({providedItems:e,lazyDefaultItems:t},n)=>()=>{const o=n&&n.disableDefaultItems?[]:t();return(e?Object(i.f)([...o,...e],e=>e.title):o).filter(e=>e.featured)}},"/t9N":function(e,t,n){"use strict";function o(e,t){var n,o,r,i,a,s=[],c=t.length;for(n=0;n<c;n++)126===(r=t[n]).marker&&-1!==r.end&&(i=t[r.end],(a=e.tokens[r.token]).type="s_open",a.tag="s",a.nesting=1,a.markup="~~",a.content="",(a=e.tokens[i.token]).type="s_close",a.tag="s",a.nesting=-1,a.markup="~~",a.content="","text"===e.tokens[i.token-1].type&&"~"===e.tokens[i.token-1].content&&s.push(i.token-1));for(;s.length;){for(o=(n=s.pop())+1;o<e.tokens.length&&"s_close"===e.tokens[o].type;)o++;n!==--o&&(a=e.tokens[o],e.tokens[o]=e.tokens[n],e.tokens[n]=a)}}e.exports.tokenize=function(e,t){var n,o,r,i,a=e.pos,s=e.src.charCodeAt(a);if(t)return!1;if(126!==s)return!1;if(r=(o=e.scanDelims(e.pos,!0)).length,i=String.fromCharCode(s),r<2)return!1;for(r%2&&(e.push("text","",0).content=i,r--),n=0;n<r;n+=2)e.push("text","",0).content=i+i,e.delimiters.push({marker:s,length:0,jump:n,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0},e.exports.postProcess=function(e){var t,n=e.tokens_meta,r=e.tokens_meta.length;for(o(e,e.delimiters),t=0;t<r;t++)n[t]&&n[t].delimiters&&o(e,n[t].delimiters)}},"/zGV":function(e,t,n){"use strict";var o=n("amtX"),r=n("nZDR"),i=n.n(r),a=n("LxhQ"),s=n.n(a),c=n("ERkP"),l=n.n(c),d=n("L21V"),u=n("6wBK"),p=n("fCxE"),h=n("Jx+6"),f=n("cH8Y");var m=e=>{const{emoji:t,selectOnHover:n}=e,o=[p.l];return l.a.createElement("button",{className:s()(o),onMouseDown:t=>{((e,t)=>{const{onSelected:n}=e;t.preventDefault(),n&&Object(f.a)(t)&&n()})(e,t)}},l.a.createElement(h.a,{emoji:t,selectOnHover:n}))},b=n("nEFo"),g=n("lbXe"),v=n("wMQd");class y extends c.PureComponent{constructor(){super(...arguments),this.onToneSelectedHandler=e=>{const{onToneSelected:t}=this.props;t(e);this.fireEvent(Object(v.o)({skinToneModifier:["default","light","mediumLight","medium","mediumDark","dark"][e]}))}}fireEvent(e){const{createAnalyticsEvent:t}=this.props;t&&Object(v.c)(e)(t)}UNSAFE_componentWillMount(){this.fireEvent(Object(v.q)({}))}render(){const{emoji:e}=this.props,t=(e=>e.skinVariations?[e,...e.skinVariations]:[e])(e);return l.a.createElement("div",null,t.map((e,t)=>l.a.createElement(m,{key:""+e.id,onSelected:()=>this.onToneSelectedHandler(t),emoji:e,selectOnHover:!0})))}}var O=Object(g.a)()(y);n.d(t,"a",(function(){return E}));class E extends c.PureComponent{constructor(){super(...arguments),this.state={selectingTone:!1},this.onToneButtonClick=()=>{this.setState({selectingTone:!0})},this.onToneSelected=e=>{this.setState({selectingTone:!1}),this.props.onToneSelected&&this.props.onToneSelected(e)},this.onMouseLeave=()=>{const{selectingTone:e}=this.state,{onToneSelectorCancelled:t}=this.props;e&&t&&t(),this.setState({selectingTone:!1})}}renderTones(){const{toneEmoji:e,selectedTone:t}=this.props;if(!e)return null;if(this.state.selectingTone)return l.a.createElement("div",{className:p.I},l.a.createElement(O,{emoji:e,onToneSelected:this.onToneSelected}));let n=e;return t&&n.skinVariations&&(n=n.skinVariations[(t||1)-1]),l.a.createElement("div",{className:p.e},l.a.createElement(m,{emoji:n,onSelected:()=>this.onToneButtonClick(),selectOnHover:!0}))}renderEmojiPreview(){const{selectingTone:e}=this.state,{emoji:t,uploadEnabled:n}=this.props;if(!t||e||n)return null;const o=s()({[p.A]:!0,[p.T]:!!this.props.toneEmoji}),r=s()({[p.E]:!0,[p.D]:!t.name});return l.a.createElement("div",{className:o},l.a.createElement("span",{className:p.C},l.a.createElement(u.a,{emoji:t})),l.a.createElement("div",{className:r},l.a.createElement("span",{className:p.x},t.name),l.a.createElement("span",{className:p.H},t.shortName)))}renderAddOwnEmoji(){const{onOpenUpload:e,uploadEnabled:t}=this.props,{selectingTone:n}=this.state;return!t||n?null:l.a.createElement("div",{className:p.a},l.a.createElement(d.b,Object.assign({},b.a.addCustomEmojiLabel),t=>l.a.createElement(o.a,{onClick:e,iconBefore:l.a.createElement(i.a,{label:t,size:"small"}),appearance:"subtle",className:p.b+" emoji-picker-add-emoji"},t)))}render(){const e=s()([p.r,p.t]);return l.a.createElement("div",{className:e,onMouseLeave:this.onMouseLeave},this.renderAddOwnEmoji(),this.renderEmojiPreview(),this.renderTones())}}},"0rke":function(e,t,n){"use strict";n.d(t,"d",(function(){return w})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return T})),n.d(t,"e",(function(){return k})),n.d(t,"a",(function(){return x}));var o=n("Czhu"),r=n("I9T1"),i=n("m23B"),a=n("mSFF"),s=n("J64l"),c=n("qPpp"),l=n("CP8u"),d=n("UP2C"),u=n("ACnq"),p=n("eObz"),h=n("4FMG"),f=n("tVIO"),m=n("3uux"),b=n("1Z4V"),g=n("dzF+"),v=n("mQXi");const y=(e,t)=>({action:h.a.INSERTED,actionSubject:h.b.DOCUMENT,actionSubjectId:h.c.MEDIA,attributes:{inputMethod:e,fileExtension:t,type:h.c.MEDIA_SINGLE},eventType:h.d.TRACK});function O(e){return Object(v.a)(e)&&!Object(l.d)(e.selection,e.doc,d.g)}function E(e,t={}){return function(n,o){const{tr:i,schema:a}=n,{paragraph:s}=a.nodes,{inputMethod:c,fileExtension:l}=t;let d=0;return O(n)&&(e.push(s.create()),d=1),i.replaceSelection(new r.Slice(r.Fragment.from(e),0,d)),c&&Object(f.a)(n,i,y(c,l)),o&&o(i),!0}}const w=(e,t)=>!!e.nodes.mediaSingle&&Object(g.a)(t),C=(e,t,n)=>{const{state:o,dispatch:r}=e,{mediaSingle:i,media:a}=o.schema.nodes;if(!i)return!1;if(t.type!==a||!Object(g.a)(t.attrs.__fileMimeType)&&"external"!==t.attrs.type)return!1;return E([i.create({},t)],{inputMethod:n,fileExtension:t.attrs.__fileMimeType})(o,r)},T=(e,t,n,o,a)=>{if(void 0===o)return!1;const{state:s,dispatch:c}=e,l=s.selection.$from.node(-1),d=S(s.schema,o,a)(t),u=l&&l.type.validContent(r.Fragment.from(d));let p;if(t.fileName){const e=t.fileName.lastIndexOf(".");p=e>=0?t.fileName.substring(e+1):void 0}if(u)E([d],{fileExtension:p,inputMethod:n})(s,c);else{const{newInsertionBehaviour:t}=Object(b.b)(e.state);let o=null;if(t&&(o=Object(m.b)(d,s.selection.from)(s.tr)),!o){const t=O(e.state)?r.Fragment.fromArray([d,s.schema.nodes.paragraph.create()]):d;o=Object(i.safeInsert)(t,void 0,!0)(s.tr)}n&&(o=Object(f.a)(s,o,y(n,p))),c(o)}return!0},S=(e,t,n)=>o=>{const{id:r,dimensions:i,contextId:a,scaleFactor:s=1}=o,{width:c,height:l}=i||{height:void 0,width:void 0},{media:d,mediaSingle:p}=e.nodes,h=d.create({id:r,type:"file",collection:t,contextId:a,width:c&&Math.round(c/s),height:l&&Math.round(l/s)}),f=n?{layout:"align-start"}:{};return Object(u.a)(o,h),p.createChecked(f,h)};function k(e,t){const{mediaSingle:n,layoutSection:r,table:a,bulletList:s,orderedList:c,media:l,expand:d}=t.nodes;return t=>{let u=e;return Object(i.hasParentNodeOfType)([r,a,s,c,d])(t)&&(u=Object(p.e)(u,e=>"mediaSingle"===e.type.name?n.createChecked({},e.content,e.marks):e)),u=Object(p.e)(u,e=>"media"===e.type.name&&"external"===e.attrs.type?l.createChecked(Object(o.a)(Object(o.a)({},e.attrs),{},{__external:!0}),e.content,e.marks):e),u}}const x=e=>{const{origWidth:t,origHeight:n,layout:o,pctWidth:r,containerWidth:i,resizedPctWidth:s}=e,{width:l,lineLength:d}=i,u=A(i,r,t,n),p=A(i,s,t,n);if("wide"===o){if(d){const e=Math.ceil(d*c.bb);return e>l?d:e}}else{if("full-width"===o)return l-c.d;if(u)return a.e.indexOf(o)>-1?p?s<50?p:u:Math.min(u,t):p||u;if("center"===o)return p||Math.min(t,d||l);if(o&&-1!==a.e.indexOf(o)){const e=Math.ceil((d||l)/2);return t<=e?t:e}}return t},A=(e,t,n,o)=>t&&n&&o&&Math.ceil(Object(s.d)(t/100,e.lineLength||e.width))},1798:function(e,t,n){"use strict";function o(){this.__rules__=[],this.__cache__=null}o.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},o.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))}))}))},o.prototype.at=function(e,t,n){var o=this.__find__(e),r=n||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__[o].fn=t,this.__rules__[o].alt=r.alt||[],this.__cache__=null},o.prototype.before=function(e,t,n,o){var r=this.__find__(e),i=o||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__.splice(r,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},o.prototype.after=function(e,t,n,o){var r=this.__find__(e),i=o||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__.splice(r+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null},o.prototype.push=function(e,t,n){var o=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null},o.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var o=this.__find__(e);if(o<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[o].enabled=!0,n.push(e)}),this),this.__cache__=null,n},o.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},o.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach((function(e){var o=this.__find__(e);if(o<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[o].enabled=!1,n.push(e)}),this),this.__cache__=null,n},o.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},e.exports=o},"17tV":function(e,t,n){"use strict";var o,r=n("ERkP"),i=n.n(r),a=n("aTr9"),s=n("xuWu"),c=n("NlFJ"),l=n("ALnk"),d=n("IWmk"),u=n("NSXj"),p=n("4FMG");!function(e){e.COMPONENT="component",e.CONSUMER="consumer",e.ORPHANED="orphaned"}(o||(o={}));var h=n("ehfC"),f=n("cX+u"),m=n("IkHm"),b=n("Y8iL");class g extends m.a{createDomRef(){return document.createElement("span")}getContentDOM(){const e=document.createElement("span");return e.className="ak-editor-annotation",{dom:e}}render(e,t){return i.a.createElement(s.a,{plugins:{inlineCommentState:b.i},editorView:this.view,render:({inlineCommentState:e})=>{const{annotations:n,selectedAnnotations:o,isVisible:r}=e;if(!r)return i.a.createElement("span",{ref:t});const a=this.node.attrs.id,s=!1===n[a],c=o.some(e=>e.id===a),l=v(s,c);return i.a.createElement("span",{className:l,ref:t})}})}}const v=(e,t)=>{if(e)return t?f.b.focus:f.b.blur};var y=n("M3To");const O=async(e,t,n)=>{if(!t||!t.length)return;const o=await(async(e,t)=>{const n=await e.getState(t);let o={};return n.forEach(e=>{e.annotationType===a.b.INLINE_COMMENT&&(o[e.id]=e.state.resolved)}),o})(e,t);n.dispatch&&Object(u.g)(o)(n.state,n.dispatch)},E=(e=!1)=>({annotations:{},selectedAnnotations:[],mouseData:{isSelecting:!1},disallowOnWhitespace:e,isVisible:!0}),w=e=>{const{provider:t,portalProviderAPI:n,eventDispatcher:r}=e;return new h.Plugin({key:b.i,state:Object(y.b)(e.dispatch,E(t.disallowOnWhitespace)),view(e){O(t,Object(b.d)(e.state.doc),e);const n=t=>{return(n=e.state,r=e.dispatch,e=>{Object(u.g)({[e]:!0},o.CONSUMER)(n,r)})(t);var n,r},r=t=>{return(n=e.state,o=e.dispatch,e=>{Object(u.g)({[e]:!1})(n,o)})(t);var n,o},i=t=>{return(n=e.state,o=e.dispatch,e=>{const{mouseData:{isSelecting:t}}=Object(b.g)(n);t&&Object(u.h)({isSelecting:!1})(n,o)})(t);var n,o},a=t=>{return(n=e,e=>{const{state:t,dispatch:o}=n;Object(u.f)(e)(t,o),e&&n.focus()})(t);var n},{updateSubscriber:s}=t;return s&&s.on("resolve",n).on("delete",n).on("unresolve",r).on("create",r).on("setvisibility",a),e.root.addEventListener("mouseup",i),{update(e,n){const{dirtyAnnotations:o}=Object(b.g)(e.state);o&&(Object(u.a)()(e.state,e.dispatch),O(t,Object(b.d)(e.state.doc),e))},destroy(){e.root.removeEventListener("mouseup",i),s&&s.off("resolve",n).off("delete",n).off("unresolve",r).off("create",r).off("setvisibility",a)}}},props:{nodeViews:{annotation:(e,t,o)=>new g(e,t,o,n,r).init()},handleDOMEvents:{mousedown:e=>{var t,n;return Object(b.g)(e.state).mouseData.isSelecting||(t=e.state,n=e.dispatch,()=>{Object(u.h)({isSelecting:!0})(t,n)})(),!1}},decorations(e){const{draftDecorationSet:t}=Object(b.g)(e);return t}}})};var C=n("7fAN"),T=n("m23B");class S extends i.a.PureComponent{componentDidMount(){const{onViewed:e}=this.props;e&&e()}render(){return this.props.children}}var k=n("LsVN");function x({providers:e,editorView:t,dispatchAnalyticsEvent:n}){const{inlineComment:r}=e,{state:a,dispatch:s}=t,{createComponent:c,viewComponent:l}=r,d=Object(b.g)(a),{bookmark:h,selectedAnnotations:f,annotations:m}=d,g=Object(b.h)(a,d),v=Object(T.findDomRefAtPos)((e=>{const{$from:t,from:n}=e,o=t.index();return!(o<t.parent.childCount&&t.parent.child(o))&&t.nodeBefore&&t.nodeBefore.isText&&t.nodeBefore.marks.find(e=>"annotation"===e.type.name)?n-1:n})(g),t.domAtPos.bind(t));if(h){if(!c)return null;const e=a.doc.textBetween(g.from,g.to);return i.a.createElement("div",{"data-testid":k.b.floatingComponent},i.a.createElement(c,{dom:v,textSelection:e,onCreate:e=>{Object(u.c)(e)(t.state,t.dispatch),!t.hasFocus()&&t.focus()},onClose:()=>{Object(u.e)(!1)(t.state,t.dispatch),!t.hasFocus()&&t.focus()}}))}const y=f.filter(e=>!1===m[e.id]);if(!l||0===y.length)return null;return f?i.a.createElement(S,{"data-testid":k.b.floatingComponent,key:Object(b.e)(y),onViewed:()=>{if(!n)return;const e={action:p.a.VIEWED,actionSubject:p.b.ANNOTATION,actionSubjectId:p.c.INLINE_COMMENT,eventType:p.d.TRACK,attributes:{overlap:y.length?y.length-1:0}};n(e)}},i.a.createElement(l,{annotations:y,dom:v,onDelete:e=>Object(u.d)(e)(a,s),onResolve:e=>Object(u.g)({[e]:!0},o.COMPONENT)(t.state,t.dispatch),onClose:()=>{Object(u.b)()(t.state,t.dispatch)}})):null}t.a=e=>({name:"annotation",marks:()=>[{name:"annotation",mark:a.c}],pmPlugins:()=>[{name:"annotation",plugin:({dispatch:t,portalProviderAPI:n,eventDispatcher:o})=>{if(e)return w({dispatch:t,portalProviderAPI:n,eventDispatcher:o,provider:e.inlineComment})}},{name:"annotationKeymap",plugin:()=>{if(e)return function(){const e={};return Object(d.bindKeymapWithCommand)(d.addInlineComment.common,Object(u.e)(!0,p.e.SHORTCUT),e),Object(l.b)(e)}()}}],pluginsOptions:{floatingToolbar(t,n){if(!e)return;const o=Object(b.g)(t);if(o&&o.isVisible&&!o.bookmark&&!o.mouseData.isSelecting){const{isToolbarAbove:o}=e.inlineComment;return Object(C.b)(t,n,o)}}},contentComponent:({editorView:t,dispatchAnalyticsEvent:n})=>e?i.a.createElement(s.a,{plugins:{selectionState:c.b,inlineCommentState:b.i},render:o=>{const r=o.inlineCommentState;return r&&!r.isVisible?null:i.a.createElement(x,{providers:e,editorView:t,dispatchAnalyticsEvent:n})}}):null})},"1CCx":function(e,t,n){var o=n("jfwB");e.exports=function(e,t){var n=o(e,t)/1e3;return n>0?Math.floor(n):Math.ceil(n)}},"1TJf":function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m}));var o=n("ERkP"),r=n.n(o),i=n("nB/6"),a=n.n(i),s=n("KsTJ"),c=n("ehfC"),l=n("qPpp"),d=n("xwvf"),u=n("xuWu"),p=n("Cdbx");const h=new c.PluginKey("gridPlugin"),f=e=>{const t=Object(p.b)(e);return(e,n,o=[])=>t(h,{visible:e,gridType:n,highlight:o})},m=e=>"wrap-left"===e||"wrap-right"===e?"wrapped":"full",b=["left","right"],g=(e,t,n,o)=>{if(!e.length)return!1;const r=e.reduce((e,t)=>Math.min(e,t)),i=e.reduce((e,t)=>Math.max(e,t));return"left"===t?r<0&&r<=-n&&("number"!=typeof o||r>=-(n+o)):i>12&&i>=12+n&&("number"!=typeof o||i<=12+o)},v=(e,t,n,o)=>{const i=[];if(!o)return i;const s=(e*l.bb-e)/2;return b.forEach(o=>{i.push(r.a.createElement("div",{key:o,className:a()("gridLine",g(n,o,0,4)?"highlight":""),style:{position:"absolute",[o]:`-${s}px`}})),i.push(r.a.createElement("div",{key:o+"-bk",className:a()("gridLine",n.indexOf("full-width")>-1?"highlight":""),style:{position:"absolute",[o]:`-${(t-e-l.d)/2}px`}}))}),i},y=e=>{const t=[];for(let n=0;n<=12;n++){const o={paddingLeft:100/12+"%"};t.push(r.a.createElement("div",{key:n,className:a()("gridLine",e.indexOf(n)>-1?"highlight":""),style:n<12?o:void 0}))}return t};class O extends r.a.Component{render(){const{highlight:e,shouldCalcBreakoutGridLines:t,theme:n,containerElement:o,editorWidth:i,gridType:s,visible:c}=this.props,l=n.layoutMaxWidth;let d=[...y(e),...v(l,i,e,t)];return r.a.createElement("div",{className:"gridParent"},r.a.createElement("div",{className:a()("gridContainer",s),style:{height:o.scrollHeight+"px",display:c?"block":"none"}},d))}}const E=Object(s.withTheme)(O);t.b=e=>({name:"grid",contentComponent:({editorView:t})=>r.a.createElement(u.a,{plugins:{grid:h,widthState:d.b},render:({grid:n,widthState:o={width:l.p}})=>n?r.a.createElement(E,Object.assign({shouldCalcBreakoutGridLines:e&&e.shouldCalcBreakoutGridLines,editorWidth:o.width,containerElement:t.dom},n)):null})})},"1Z4V":function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var o=n("Czhu"),r=n("ehfC");const i=new r.PluginKey("featureFlagsContextPlugin"),a=e=>i.getState(e);t.a=(e={})=>({name:"featureFlagsContext",pmPlugins:()=>[{name:"featureFlagsContext",plugin:()=>new r.Plugin({key:i,state:{init:()=>Object(o.a)({},e),apply:(e,t)=>t}})}]})},"1qPo":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("L21V");const r=Object(o.f)({underline:{id:"fabric.editor.underline",defaultMessage:"Underline",description:"Whether the text selection has underlined text"},strike:{id:"fabric.editor.strike",defaultMessage:"Strikethrough",description:"Whether the text selection has crossed out text"},code:{id:"fabric.editor.code",defaultMessage:"Code",description:"Whether the text selection has monospaced/code font"},subscript:{id:"fabric.editor.subscript",defaultMessage:"Subscript",description:"Whether the text selection is written below the line in a slightly smaller size"},superscript:{id:"fabric.editor.superscript",defaultMessage:"Superscript",description:"Whether the text selection is written above the line in a slightly smaller size"},clearFormatting:{id:"fabric.editor.clearFormatting",defaultMessage:"Clear formatting",description:"Remove all rich text formatting from the selected text"},moreFormatting:{id:"fabric.editor.moreFormatting",defaultMessage:"More formatting",description:"Clicking this will show a menu with additional formatting options"}})},"20jC":function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},"2McE":function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("jRDN"),a=n.n(i),s=n("Vhet"),c=n.n(s),l=n("BqYg"),d=n.n(l),u=n("KsTJ"),p=n("3IV/");const h=u.default.div`
  position: relative;
  padding: 3px 0;
  border-radius: 3px;

  &:hover .arrow {
    opacity: 1;
  }

  .ellipsed-text {
    white-space: initial;
  }
`,f=u.default.div`
  width: inherit;
  overflow: hidden;
  padding: 2px 0;
`,m=u.default.ul`
  margin: 0;
  padding: 0;
  transition-property: transform;
  transition-timing-function: cubic-bezier(0.77, 0, 0.175, 1);
  white-space: nowrap;
  display: inline-block;
`,b=u.default.li`
  list-style-type: none;
  margin: 0;
  padding: 0 4px;
  display: inline-block;
  vertical-align: middle;
  /* Fixes issue with child Cards using inline-block */
  font-size: 0;
`,g=u.default.div`
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background-color: ${p.N20};
  border-radius: 100%;
  display: flex;
  cursor: pointer;
  transition: opacity 0.3s;
  box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.6);
  color: black;
  width: 30px;
  height: 30px;
  justify-content: center;
  opacity: 0;

  &:hover {
    color: black;
    background-color: ${p.N40};
  }

  &:active {
    color: ${p.B400};
    background-color: ${p.B50};
  }

  svg {
    height: 30px;
    width: 20px;
  }
`,v=Object(u.default)(g)`
  left: 8px;

  svg {
    padding-right: 2px;
  }
`,y=Object(u.default)(g)`
  right: 8px;

  svg {
    padding-left: 1px;
  }
`,O=u.default.div`
  position: absolute;
  z-index: 10;
  height: 100%;
  top: 0;
  width: 2px;
  background-color: rgba(0, 0, 0, 0.2);
`,E=Object(u.default)(O)`
  left: 0;
`,w=Object(u.default)(O)`
  right: 0;
`;n.d(t,"a",(function(){return k}));const C={attributes:!0,childList:!0,subtree:!0,characterData:!0},T=({onClick:e})=>r.a.createElement(E,null,r.a.createElement(v,{className:"arrow",onClick:e},r.a.createElement(a.a,{label:"left"}))),S=({onClick:e})=>r.a.createElement(w,null,r.a.createElement(y,{className:"arrow",onClick:e},r.a.createElement(c.a,{label:"right"})));class k extends r.a.Component{constructor(e){super(e),this.previousOffset=0,this.state={bufferWidth:0,windowWidth:0},this.handleSizeChange=()=>{const{windowElement:e,bufferElement:t}=this;let n=0,o=0,r=[];if(e&&t){n=t.getBoundingClientRect().width,o=e.getBoundingClientRect().width;const i=Array.prototype.slice.call(t.children,0);let a=0;r=i.map((e,t)=>{const n=e.getBoundingClientRect().width,o={left:a,right:a+n-1};return a+=n,o})}const{bufferWidth:i,windowWidth:a}=this.state;n===i&&o===a||this.setState({bufferWidth:n,windowWidth:o},()=>{this.childOffsets=r;const{onSize:e}=this.props;e&&e({offset:Math.min(this.maxOffset,this.offset),offsets:r,width:o,minOffset:this.minOffset,maxOffset:this.maxOffset})})},this.handleWindowElementChange=e=>{this.windowElement=e,this.handleSizeChange()},this.handleBufferElementChange=e=>{e&&(this.bufferElement=e,this.handleSizeChange(),this.initMutationObserver())},this.handleMutation=e=>{this.handleSizeChange()},this.handleLeftClick=e=>{e.stopPropagation();const{onScroll:t}=this.props;if(t){const{windowWidth:e}=this.state;t({direction:"left",offset:this.getClosestForLeft(this.offset-e),animate:!0})}},this.handleRightClick=e=>{e.stopPropagation();const{onScroll:t}=this.props;if(t){const{windowWidth:e}=this.state;t({direction:"right",offset:this.getClosestForRight(this.offset+e),animate:!0})}},this.handleScroll=e=>{const t=Math.abs(e.deltaX)>Math.abs(e.deltaY);if(!t)return;e.preventDefault();const{onScroll:n}=this.props;if(n&&t){const t=Math.max(this.minOffset,Math.min(this.maxOffset,this.offset+e.deltaX));n({direction:e.deltaX<0?"left":"right",offset:t,animate:!1})}},this.childOffsets=[];try{this.mutationObserver=new MutationObserver(d()(this.handleMutation,30,!0))}catch(t){}}get offset(){const{offset:e}=this.props;return e?Math.min(this.maxOffset,Math.max(this.minOffset,e)):0}get minOffset(){return 0}get maxOffset(){const{bufferWidth:e,windowWidth:t}=this.state;return Math.max(this.minOffset,e-t-1)}get canGoLeft(){return this.offset>this.minOffset}get canGoRight(){return this.offset<this.maxOffset}get transitionDuration(){const{animate:e}=this.props,{windowWidth:t}=this.state;if(!e)return 0;if(Math.abs(this.offset-this.previousOffset)<1e-6)return.5;{const e=1-.5*(Math.abs(this.offset-this.previousOffset)/t);return Math.max(Math.min(e,1),.5)}}initMutationObserver(){const{mutationObserver:e}=this;e&&this.bufferElement&&(e.disconnect(),e.observe(this.bufferElement,C))}triggerScrollEvent(){if(!this.windowElement)return;const e=document.createEvent("MouseEvents");e.initEvent("scroll",!0,!0),this.windowElement.dispatchEvent(e)}getClosestForLeft(e){const t=Math.min(this.maxOffset,Math.max(this.minOffset,e));for(let n=0;n<this.childOffsets.length;++n){const e=this.childOffsets[n];if(t>=e.left&&t<=e.right){const t=e.left;return t>=4?t-4:t}}return Math.min(this.maxOffset,Math.max(this.minOffset,e))}getClosestForRight(e){const{windowWidth:t}=this.state,n=Math.min(this.maxOffset,Math.max(this.minOffset,e))+t;for(let o=0;o<this.childOffsets.length;++o){const e=this.childOffsets[o];if(n>=e.left&&n<=e.right){const n=e.right-t;return n+4<=this.maxOffset?n+4:n}}return Math.min(this.maxOffset,Math.max(this.minOffset,e))}renderLeftArrow(){const{canGoLeft:e}=this;return e?r.a.createElement(T,{onClick:this.handleLeftClick}):null}renderRightArrow(){const{canGoRight:e}=this;return e?r.a.createElement(S,{onClick:this.handleRightClick}):null}componentDidMount(){this.previousOffset=this.offset,window.addEventListener("resize",this.handleSizeChange)}componentWillUnmount(){const{mutationObserver:e}=this;window.removeEventListener("resize",this.handleSizeChange),e&&e.disconnect()}componentDidUpdate(){this.previousOffset=this.offset,window.setTimeout(()=>this.triggerScrollEvent(),1e3*this.transitionDuration)}render(){const{animate:e,children:t,testId:n}=this.props,o=`translateX(${-this.offset}px)`,i=e?"transform":"none",a=this.transitionDuration+"s";return r.a.createElement(h,{"data-testid":n},this.renderLeftArrow(),r.a.createElement(f,{innerRef:this.handleWindowElementChange,onWheel:this.handleScroll},r.a.createElement(m,{innerRef:this.handleBufferElementChange,style:{transform:o,transitionProperty:i,transitionDuration:a}},r.a.Children.map(t,x))),this.renderRightArrow())}}function x(e,t){const n=function(e){return!!e.type}(e)&&e.key||t;return r.a.createElement(b,{key:n},e)}k.defaultProps={animate:!1,offset:0}},"2c8S":function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return h}));var o=n("KsTJ"),r=n("BMbf"),i=n("w301"),a=n("3IV/");const s=Object(r.h)(),c=2*s,l=o.default.div`
  background: ${Object(i.a)({light:a.N20,dark:a.DN50})};
  border-radius: ${Object(r.c)()}px;
  color: ${Object(i.a)({dark:a.DN700})};
  position: relative;
  vertical-align: middle;
  font-size: ${Object(r.f)()}px;

  .ProseMirror-selectednode > span > & > .extension-overlay {
    box-shadow: inset 0px 0px 0px 2px ${a.B200};
    opacity: 1;
  }

  &.with-overlay {
    .extension-overlay {
      background: ${a.N20A};
      color: transparent;
    }

    &:hover .extension-overlay {
      opacity: 1;
    }
  }
`,d=o.default.div`
  border-radius: ${Object(r.c)()}px;
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
`,u=o.default.div`
  display: inline-flex;
  align-items: center;

  & > img {
    margin: 0 4px;
  }
`,p=o.default.span`
  display: inline-block;
  max-width: 200px;
  margin-left: 5px;
  color: ${a.N70};
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
`,h=o.default.img`
  max-height: 16px;
  max-width: 16px;
`},"2d0V":function(e,t,n){"use strict";e.exports=function(e,t,n,o){var r,i,a,s,c,l,d,u=!1,p=e.bMarks[t]+e.tShift[t],h=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(p+3>h)return!1;if(126!==(r=e.src.charCodeAt(p))&&96!==r)return!1;if(c=p,(i=(p=e.skipChars(p,r))-c)<3)return!1;if(d=e.src.slice(c,p),a=e.src.slice(p,h),96===r&&a.indexOf(String.fromCharCode(r))>=0)return!1;if(o)return!0;for(s=t;!(++s>=n)&&!((p=c=e.bMarks[s]+e.tShift[s])<(h=e.eMarks[s])&&e.sCount[s]<e.blkIndent);)if(e.src.charCodeAt(p)===r&&!(e.sCount[s]-e.blkIndent>=4||(p=e.skipChars(p,r))-c<i||(p=e.skipSpaces(p))<h)){u=!0;break}return i=e.sCount[t],e.line=s+(u?1:0),(l=e.push("fence","code",0)).info=a,l.content=e.getLines(t+1,s,i,!0),l.markup=d,l.map=[t,e.line],!0}},"36MB":function(e,t,n){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},"3QpL":function(e,t,n){"use strict";function o(e,t){return Object.keys(e).every((function(e){return-1!==t.indexOf(e)}))}var r=function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;n=n.replace("#","").match(/.{2}/g);for(var a=0;a<n.length;a++)n[a]=parseInt(n[a],16);switch(t){case"rgb":return{r:n[0],g:n[1],b:n[2]};default:return r.convert({conversions:o,operations:r,helpers:i},t,{r:n[0],g:n[1],b:n[2]})}},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},c={hex:{test:function(e){return"string"==typeof e&&"#"===e.slice(0,1)},convert:r},rgb:{test:function(e){return o(e,["r","g","b"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(t){case"hex":return 1==(y=Math.round(n.r).toString(16)).length&&(y="0"+y),1==(O=Math.round(n.g).toString(16)).length&&(O="0"+O),1==(E=Math.round(n.b).toString(16)).length&&(E="0"+E),"#"+y+O+E;case"cssrgb":return"rgb("+Math.round(n.r)+","+Math.round(n.g)+","+Math.round(n.b)+")";case"hsl":var s=[y=n.r/255,O=n.g/255,E=n.b/255].sort(),c=(s[0]+s[2])/2*100;return s[0]==s[2]?(v=0,g=0):(v=c>=50?(s[2]-s[0])/(2-s[2]-s[0])*100:(s[2]-s[0])/(s[2]+s[0])*100,(g=s[2]==y?(O-E)/(s[2]-s[0])*60:s[2]==O?60*(2+(E-y)/(s[2]-s[0])):60*(4+(y-O)/(s[2]-s[0])))<0?g+=360:g>360&&(g%=360)),{h:g,s:v,l:c};case"csshsl":var l=r.convert({conversions:o,helpers:i},"hsl",n);return"hsl("+Math.round(l.h)+","+Math.round(l.s)+"%,"+Math.round(l.l)+"%)";case"cmyk":var d=n.r/255,u=n.g/255,p=n.b/255,h=1-Math.max(d,u,p);if(1!=h)var f=(1-d-h)/(1-h),m=(1-u-h)/(1-h),b=(1-p-h)/(1-h);else f=0,m=0,b=0;return{c:f,m,y:b,k:h};case"hsv":var g,v,y=n.r/255,O=n.g/255,E=n.b/255,w=Math.min(y,O,E),C=Math.max(y,O,E),T=C-w;if(0==T)g=0,v=0;else{v=T/C;var S=((C-y)/6+T/2)/T,k=((C-O)/6+T/2)/T,x=((C-E)/6+T/2)/T;y==C?g=x-k:O==C?g=1/3+S-x:E==C&&(g=2/3+k-S),g<0&&(g+=1),g>1&&(g-=1)}return{h:360*g,s:100*v,v:100*C};case"yiq":b=n.r/255*.299+n.g/255*.587+n.b/255*.114;var A=n.r/255*.596+n.g/255*-.274+n.b/255*-.322,j=n.r/255*.211+n.g/255*-.523+n.b/255*.312;return{y:b,i:A=i.bounded(A,[-.5957,.5957]),q:j=i.bounded(j,[-.5226,.5226])};case"XYZ":var I=[n.r,n.g,n.b].map((function(e){return e/255})).map((function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)})),M=i.getTransform("SRGB_XYZ").map((function(e){return I.reduce((function(t,n,o){return e[o]*n+t}),0)})).map((function(e){return 100*e})),N=a(M,3);return{X:N[0],Y:N[1],Z:N[2]};case"lms":case"cielab":case"cieluv":case"xyY":var R=r.convert({conversions:o,operations:r,helpers:i},"XYZ",n);return r.convert({conversions:o,operations:r,helpers:i},t,R);case"cielch":var P=r.convert({conversions:o,operations:r,helpers:i},"cieluv",n);return r.convert({conversions:o,operations:r,helpers:i},t,P);case"hsluv":var L=r.convert({conversions:o,operations:r,helpers:i},"cielch",n);return r.convert({conversions:o,operations:r,helpers:i},t,L)}}},cssrgb:{test:function(e){return"string"==typeof e&&"rgb("===e.slice(0,4)},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;n=n.replace(/((rgb\(|\))|[\s]*)/g,"").split(",");for(var a=0;a<n.length;a++)n[a]=parseInt(n[a]);switch(t){case"rgb":return{r:n[0],g:n[1],b:n[2]};default:return r.convert({conversions:o,operations:r,helpers:i},t,{r:n[0],g:n[1],b:n[2]})}}},hsl:{test:function(e){return o(e,["h","s","l"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(t){case"rgb":if(0==n.s){var a=n.l/100*255;return{r:a,g:a,b:a}}var s,c,l;s=n.l>=50?n.l/100+n.s/100-n.l/100*(n.s/100):n.l/100*(1+n.s/100),c=n.l/100*2-s;var d,u,p,h=(.333+(l=n.h/360))%1,f=l,m=i.negMod(l-.333,1);return(d=6*h<1?c+6*(s-c)*h:2*h<1?s:3*h<2?c+6*(.666-h)*(s-c):c)<0&&(d=0),(u=6*f<1?c+6*(s-c)*f:2*f<1?s:3*f<2?c+6*(.666-f)*(s-c):c)<0&&(u=0),(p=6*m<1?c+6*(s-c)*m:2*m<1?s:3*m<2?c+6*(.666-m)*(s-c):c)<0&&(p=0),{r:255*d,g:255*u,b:255*p};case"csshsl":return"hsl("+Math.round(n.h)+","+Math.round(n.s)+"%,"+Math.round(n.l)+"%)";case"hsv":n.s=n.s/100,n.l=n.l/100;var b=n.s*(n.l<.5?n.l:1-n.l);return{h:n.h,s:2*b/(n.l+b)*100,v:100*(n.l+b)};default:var g=r.convert({conversions:o,operations:r,helpers:i},"rgb",n);return r.convert({conversions:o,operations:r,helpers:i},t,g)}}},csshsl:{test:function(e){return"string"==typeof e&&"hsl("===e.slice(0,4)},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;n=n.replace(/(hsl\(|\)|%|[\s]*)/g,"").split(",");for(var a=0;a<n.length;a++)n[a]=parseInt(n[a]);switch(t){case"hsl":return{h:n[0],s:n[1],l:n[2]};default:return r.convert({conversions:o,operations:r,helpers:i},t,{h:n[0],s:n[1],l:n[2]})}}},hsv:{test:function(e){return o(e,["h","s","v"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(t){case"rgb":n.h=n.h/360,n.s=n.s/100,n.v=n.v/100;var a=6*n.h;6==a&&(a=0);var s,c,l,d=Math.round(a),u=n.v*(1-n.s),p=n.v*(1-n.s*(a-d)),h=n.v*(1-n.s*(1-(a-d)));return 0==d?(s=n.v,c=h,l=u):1==d?(s=p,c=n.v,l=u):2==d?(s=u,c=n.v,l=h):3==d?(s=u,c=p,l=n.v):4==d?(s=h,c=u,l=n.v):(s=n.v,c=u,l=p),{r:255*s,g:255*c,b:255*l};case"hsl":return n.h=n.h/360,n.s=n.s/100,n.v=n.v/100,{h:360*n.h,s:100*((2-n.s)*n.v<1?n.s*n.v/((2-n.s)*n.v):n.s*n.v/(2-(2-n.s)*n.v)),l:(2-n.s)*n.v/2*100};default:var f=r.convert({conversions:o,operations:r,helpers:i},"rgb",n);return r.convert({conversions:o,operations:r,helpers:i},t,f)}}},cmyk:{test:function(e){return o(e,["c","m","y","k"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(t){case"rgb":return{r:a=255*(1-n.c)*(1-n.k),g:s=255*(1-n.m)*(1-n.k),b:c=255*(1-n.y)*(1-n.k)};case"cssrgb":var a=255*(1-n.c)*(1-n.k),s=255*(1-n.m)*(1-n.k),c=255*(1-n.y)*(1-n.k);return"rgb("+Math.round(a)+","+Math.round(s)+","+Math.round(c)+")";default:var l=r.convert({conversions:o,operations:r,helpers:i},"rgb",n);return r.convert({conversions:o,operations:r,helpers:i},t,l)}}},yiq:{test:function(e){return o(e,["y","i","q"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(n.i=i.bounded(n.i,[-.5957,.5957]),n.q=i.bounded(n.q,[-.5226,.5226]),t){case"rgb":var a=255*(n.y+.956*n.i+.621*n.q),s=255*(n.y+-.272*n.i+-.647*n.q),c=255*(n.y+-1.106*n.i+-1.703*n.q);return{r:a=i.bounded(a,[0,255]),g:s=i.bounded(s,[0,255]),b:c=i.bounded(c,[0,255])};default:var l=r.convert({conversions:o,operations:r,helpers:i},"rgb",n);return r.convert({conversions:o,operations:r,helpers:i},t,l)}}},XYZ:{test:function(e){return o(e,["X","Y","Z"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers,s=i.getIlluminant("D65");switch(t){case"rgb":var c=[n.X,n.Y,n.Z].map((function(e){return e/100})),l=i.getTransform("INVERSE_SRGB_XYZ").map((function(e){return c.reduce((function(t,n,o){return e[o]*n+t}),0)})).map((function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055})).map((function(e){return 255*e})),d=a(l,3),u=d[0],p=d[1],h=d[2];return i.boundedRgb({r:u,g:p,b:h});case"lms":var f=[n.X,n.Y,n.Z].map((function(e){return e/100})),m=i.getTransform("BRADFORD").map((function(e){return f.reduce((function(t,n,o){return e[o]*n+t}),0)}));return{rho:m[0],gamma:m[1],beta:m[2]};case"cielab":var b=n.X/s.X,g=n.Y/s.Y,v=n.Z/s.Z,y=function(e){return e>.008856?i.cbrt(e):(903.3*e+16)/116},O=y(b),E=y(g);return{L:116*E-16,a:500*(O-E),b:200*(E-y(v))};case"cieluv":var w=n.Y/s.Y,C=w>.008856?116*i.cbrt(w)-16:903.3*w,T=function(e){return 4*e.X/(e.X+15*e.Y+3*e.Z)},S=function(e){return 9*e.Y/(e.X+15*e.Y+3*e.Z)};return{L:C,u:13*C*(T(n)-T(s)),v:13*C*(S(n)-S(s))};case"xyY":return{x:n.X/(n.X+n.Y+n.Z),y:n.Y/(n.X+n.Y+n.Z),Y:n.Y};default:var k=i.boundedRgb(r.convert({conversions:o,operations:r,helpers:i},"rgb",n));return r.convert({conversions:o,operations:r,helpers:i},t,k)}}},xyY:{test:function(e){return o(e,["x","y","Y"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(t){case"XYZ":var a=n.Y/n.y*n.x,s=n.Y/n.y*(1-n.x-n.y);return{X:a,Y:n.Y,Z:s};default:var c=r.convert({conversions:o,operations:r,helpers:i},"XYZ",n);return r.convert({conversions:o,operations:r,helpers:i},t,c)}}},lms:{test:function(e){return o(e,["rho","gamma","beta"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(t){case"XYZ":var a=[n.rho,n.gamma,n.beta],s=i.getTransform("INVERSE_BRADFORD").map((function(e){return a.reduce((function(t,n,o){return e[o]*n+t}),0)}));return{X:100*s[0],Y:100*s[1],Z:100*s[2]};default:var c=r.convert({conversions:o,operations:r,helpers:i},"XYZ",n);return r.convert({conversions:o,operations:r,helpers:i},t,c)}}},cielab:{test:function(e){return o(e,["L","a","b"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(t){case"XYZ":var a=i.getIlluminant("D65"),s=(n.L+16)/116,c=n.a/500+s,l=s-n.b/200,d=function(e){return Math.pow(e,3)>.008856?Math.pow(e,3):(116*e-16)/903.3},u=d(c),p=d(l),h=n.L>903.3*.008856?Math.pow(s,3):n.L/903.3;return{X:u*a.X,Y:h*a.Y,Z:p*a.Z};default:var f=r.convert({conversions:o,operations:r,helpers:i},"XYZ",n);return r.convert({conversions:o,operations:r,helpers:i},t,f)}}},cieluv:{test:function(e){return o(e,["L","u","v"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(t){case"XYZ":var a=i.getIlluminant("D65"),s=function(e){return 4*e.X/(e.X+15*e.Y+3*e.Z)}(a),c=function(e){return 9*e.Y/(e.X+15*e.Y+3*e.Z)}(a),l=1/3*(52*n.L/(n.u+13*n.L*s)-1),d=n.L>903.3*.008856?Math.pow((n.L+16)/116,3):n.L/903.3,u=-5*d,p=(d*(39*n.L/(n.v+13*n.L*c)-5)-u)/(l- -1/3);return{X:100*p,Y:100*d,Z:100*(p*l+u)};case"cielch":var h=Math.sqrt(Math.pow(n.u,2)+Math.pow(n.v,2)),f=Math.atan2(n.v,n.u);return f<0&&(f+=2*Math.PI),f=i.toDeg(f),{L:n.L,C:h,h:f};default:var m=r.convert({conversions:o,operations:r,helpers:i},"XYZ",n);return r.convert({conversions:o,operations:r,helpers:i},t,m)}}},cielch:{test:function(e){return o(e,["L","C","h"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(t){case"cieluv":var a=i.toRad(n.h),s=n.C*Math.cos(a),c=n.C*Math.sin(a);return{L:n.L,u:s,v:c};case"hsluv":if(n.L>99.9999999)return{hu:n.h,s:0,l:100};if(n.L<1e-8)return{hu:n.h,s:0,l:0};for(var l=(n.L+16)/1560896,d=l>.008856?l:n.L/903.3,u=i.getTransform("INVERSE_SRGB_XYZ"),p=[],h=0;h<3;h++)for(var f=u[h][0],m=u[h][1],b=u[h][2],g=0;g<2;g++){var v=(284517*f-94839*b)*d,y=(838422*b+769860*m+731718*f)*n.L*d-769860*g*n.L,O=(632260*b-126452*m)*d+126452*g;p.push({m:v/O,b:y/O})}var E=Number.MAX_VALUE,w=i.toRad(n.h);p.forEach((function(e){var t=e.b/(Math.sin(w)-e.m*Math.cos(w));t>=0&&(E=Math.min(E,t))}));var C=E;return{hu:n.h,s:n.C/C*100,l:n.L};default:var T=r.convert({conversions:o,operations:r,helpers:i},"cieluv",n);return r.convert({conversions:o,operations:r,helpers:i},t,T)}}},hsluv:{test:function(e){return o(e,["hu","s","l"])},convert:function(e,t,n){var o=e.conversions,r=e.operations,i=e.helpers;switch(t){case"cielch":if(n.L>99.9999999)return{L:100,C:0,h:n.hu};if(n.L<1e-8)return{L:0,C:0,h:n.hu};for(var a=(n.l+16)/1560896,s=a>.008856?a:n.l/903.3,c=i.getTransform("INVERSE_SRGB_XYZ"),l=[],d=0;d<3;d++)for(var u=c[d][0],p=c[d][1],h=c[d][2],f=0;f<2;f++){var m=(284517*u-94839*h)*s,b=(838422*h+769860*p+731718*u)*n.l*s-769860*f*n.l,g=(632260*h-126452*p)*s+126452*f;l.push({m:m/g,b:b/g})}var v=Number.MAX_VALUE,y=i.toRad(n.hu);l.forEach((function(e){var t=e.b/(Math.sin(y)-e.m*Math.cos(y));t>=0&&(v=Math.min(v,t))}));var O=v;return{L:n.l,C:O/100*n.s,h:n.hu};default:var E=r.convert({conversions:o,operations:r,helpers:i},"cielch",n);return r.convert({conversions:o,operations:r,helpers:i},t,E)}}}},l={adapt:function(e,t,n,o){var r=e.operations.convert(e,"XYZ",t),i=e.operations.convert(e,"lms",n);if(o)a=e.operations.convert(e,"lms",o);else var a=e.operations.convert(e,"lms",e.helpers.getIlluminant("D65"));var s=e.helpers.getTransform("BRADFORD"),c=e.helpers.getTransform("INVERSE_BRADFORD"),l=[[i.rho/a.rho,0,0],[0,i.gamma/a.gamma,0],[0,0,i.beta/a.beta]],d=e.helpers.matrixMultiply(c,l),u=e.helpers.matrixMultiply(d,s),p=[[r.X],[r.Y],[r.Z]],h=e.helpers.matrixMultiply(u,p),f={X:h[0][0],Y:h[1][0],Z:h[2][0]};return e.helpers.ready(e,f)},adjacent:function(e,t,n,o){for(var r=e.operations.convert(e,"hsl",o),i=[{h:r.h,s:r.s,l:r.l}],a=0;a<n-1;a++)r.h=e.helpers.negMod(r.h+t,360),i.push({h:r.h,s:r.s,l:r.l});return e.helpers.ready(e,i)},brightness:function(e,t,n){var o=e.operations.convert(e,"hsl",n);return o.l+=t,o.l<0?o.l=0:o.l>100&&(o.l=100),e.helpers.ready(e,o)},complementary:function(e,t){var n=e.operations.convert(e,"hsl",t);return n.h=(n.h+180)%360,e.helpers.ready(e,n)},contrast:function(e,t,n){var o=e.operations.convert(e,"rgb",n);return o.r=255*((o.r/255-.5)*t+.5),o.r<0?o.r=0:o.r>255&&(o.r=255),o.g=255*((o.g/255-.5)*t+.5),o.g<0?o.g=0:o.g>255&&(o.g=255),o.b=255*((o.b/255-.5)*t+.5),o.b<0?o.b=0:o.b>255&&(o.b=255),e.helpers.ready(e,o)},contrastRatio:function(e,t){var n=e.operations.convert(e,"rgb",t);return n=(299*n.r+587*n.g+114*n.b)/1e3>=128?{r:0,g:0,b:0}:{r:255,g:255,b:255},e.helpers.ready(e,n)},convert:function(e,t,n){if(Object.keys(e.conversions).indexOf(t)>-1){n.colour?n=n.colour:n.colours&&(n=n.colours);var o=e.helpers.determineMode(n);return o!=t?e.conversions[o].convert(e,t,n):n}return e.helpers.ready(e,t)},difference:function(e,t,n,o,r){o=o||1,r=r||1;var i=e.operations.convert(e,"cielab",t),a=e.operations.convert(e,"cielab",n),s=Math.sqrt(Math.pow(i.a,2)+Math.pow(i.b,2)),c=s-Math.sqrt(Math.pow(a.a,2)+Math.pow(a.b,2)),l=i.L-a.L,d=i.a-a.a,u=i.b-a.b,p=Math.sqrt(Math.pow(d,2)+Math.pow(u,2)-Math.pow(c,2)),h=i.L<16?.511:.040975*i.L/(1.01765*i.L),f=.0638*s/(1.0131*s),m=Math.atan2(i.b,i.a),b=m>=0?m:m+360,g=164<=b&&b<=345?.56+Math.abs(.2*Math.cos(e.helpers.toRad(b+168))):.36+Math.abs(.4*Math.cos(e.helpers.toRad(b+35))),v=Math.pow(s,4)/(Math.pow(s,4)+1900),y=f*(v*g+1-v),O=Math.pow(l/(o*h),2);return Math.pow(c/(r*f),2),Math.pow(p/y,2),Math.sqrt(O+O+O)},fade:function(e,t,n,o){var r=e.operations.convert(e,"rgb",n),i=e.operations.convert(e,"rgb",o),a=[r];t-=1;for(var s=(i.r-r.r)/t,c=(i.g-r.g)/t,l=(i.b-r.b)/t,d={r:r.r,g:r.g,b:r.b},u=0;u<t-1;u++)d.r=e.helpers.slopeMod(d.r+s,255),d.g=e.helpers.slopeMod(d.g+c,255),d.b=e.helpers.slopeMod(d.b+l,255),a.push({r:d.r,g:d.g,b:d.b});return a.push(i),e.helpers.ready(e,a)},greyscale:function(e,t){var n=e.operations.convert(e,"rgb",t),o=(n.r+n.g+n.b)/3;return n={r:o,g:o,b:o},e.helpers.ready(e,n)},hue:function(e,t,n){var o=e.operations.convert(e,"hsl",n);return o.h=e.helpers.negMod(o.h+t,360),e.helpers.ready(e,o)},invert:function(e,t){var n=e.operations.convert(e,"rgb",t);return n.r=e.helpers.negMod(255-n.r,255),n.g=e.helpers.negMod(255-n.g,255),n.b=e.helpers.negMod(255-n.b,255),e.helpers.ready(e,n)},invertLightness:function(e,t){var n=e.operations.convert(e,"hsl",t);return n.l=100-n.l,e.helpers.ready(e,n)},mid:function(e,t,n){var o=e.operations.convert(e,"hsl",t),r=e.operations.convert(e,"hsl",n),i={h:(o.h+r.h)/2,s:(o.s+r.s)/2,l:(o.l+r.l)/2};return e.helpers.ready(e,i)},multiply:function(e,t,n){var o=e.operations.convert(e,"hsl",t),r=e.operations.convert(e,"hsl",n),i={h:o.h,s:o.s,l:o.l/100*(r.l/100)*100};return i.l=i.l>100?100:i.l,i.l=i.l<0?0:i.l,e.helpers.ready(e,i)},saturation:function(e,t,n){var o=e.operations.convert(e,"hsl",n);return o.s+=t,o.s<0?o.s=0:o.s>100&&(o.s=100),e.helpers.ready(e,o)},sepia:function(e,t){var n=e.operations.convert(e,"rgb",t),o={};return o.r=.393*n.r+.769*n.g+.189*n.b,o.g=.349*n.r+.686*n.g+.168*n.b,o.b=.272*n.r+.534*n.g+.131*n.b,e.helpers.ready(e,o)},shade:function(e,t,n){var o=e.operations.convert(e,"hsv",n);return o.v+=t,o.v<0?o.v=0:o.v>100&&(o.v=100),e.helpers.ready(e,o)},temperature:function(e,t){var n=e.operations.convert(e,"xyY",t),o=(n.x-.332)/(n.y-.1858);return-449*Math.pow(o,3)+3525*Math.pow(o,2)-6823.3*o+5520.33},tetrad:function(e,t){for(var n=e.operations.convert(e,"hsl",t),o=[{h:n.h,s:n.s,l:n.l}],r=0;r<3;r++)n.h=(n.h+90)%360,o.push({h:n.h,s:n.s,l:n.l});return e.helpers.ready(e,o)},triad:function(e,t){for(var n=e.operations.convert(e,"hsl",t),o=[{h:n.h,s:n.s,l:n.l}],r=0;r<2;r++)n.h=(n.h+120)%360,o.push({h:n.h,s:n.s,l:n.l});return e.helpers.ready(e,o)}},d={ILLUMINANTS:{A:{X:1.0985*100,Y:100,Z:35.585},B:{X:99.072,Y:100,Z:85.223},C:{X:98.074,Y:100,Z:118.232},D50:{X:96.422,Y:100,Z:82.521},D55:{X:95.682,Y:100,Z:92.149},D65:{X:95.047,Y:100,Z:108.883},D75:{X:94.972,Y:100,Z:122.638},E:{X:100,Y:100,Z:100},F2:{X:.99186*100,Y:100,Z:67.393},F7:{X:95.041,Y:100,Z:108.747},F11:{X:1.00962*100,Y:100,Z:64.35}},TRANSFORMS:{BRADFORD:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],INVERSE_BRADFORD:[[.9869929,-.1470543,.1599627],[.4323053,.5183603,.0492912],[-.0085287,.0400428,.9684867]],SRGB_XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],INVERSE_SRGB_XYZ:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]]}},u=function(e,t,n){var o=Object.keys(e.operations).reduce((function(t,o){var r=e.operations[o];return t[o]=function(){for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];var c=o.slice(0).map((function(e){return"object"===(void 0===e?"undefined":i(e))?Object.assign({},e):e}));return n&&n.colours?function t(n){var o=n.map((function(n){if(Array.isArray(n)){var o=t(n);return o.colours||o.colour}var a=r.apply(void 0,[e].concat(s(c),[n]));return"object"===(void 0===a?"undefined":i(a))?a.colours||a.colour:a}));return"number"!=typeof o[0]?e.helpers.ready(e,o):o}(n.colours):r.apply(void 0,[e].concat(s(c),[n?n.colour:void 0]))},t}),{});return n||(o=Object.assign(o,t)),o},p={getIlluminant:function(e){return d.ILLUMINANTS[e]},getTransform:function(e){return d.TRANSFORMS[e]},matrixMultiply:function(e,t){for(var n=[],o=0;o<e.length;o++){n[o]=[];for(var r=0;r<t[0].length;r++){for(var i=0,a=0;a<e[0].length;a++)i+=e[o][a]*t[a][r];n[o][r]=i}}return n},cbrt:function(e){if(Math.cbrt)return Math.cbrt(e);var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t},toRad:function(e){return e*(Math.PI/180)},toDeg:function(e){return e*(180/Math.PI)},negMod:function(e,t){return(e%t+t)%t},slopeMod:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return e>2*t?slopeMod(e-2*t,t):e>t?2*t-e:e<0?slopeMod(e+2*t,t):e})),bounded:function(e,t){return e<t[0]?e=t[0]:e>t[1]&&(e=t[1]),e},boundedRgb:function(e){var t=this,n=function(e){return t.bounded(e,[0,255])};return{r:n(e.r),g:n(e.g),b:n(e.b)}},determineMode:function(e){for(var t in c)if(c.hasOwnProperty(t)&&c[t].test(e))return t;return null},ready:function(e,t){var n=e.conversions,o=e.operations,r=e.helpers,i={};switch(Object.prototype.toString.call(t)){case"[object Object]":case"[object String]":for(var a in i.colour=t,n)n.hasOwnProperty(a)&&function(e){Object.defineProperty(i,e,{get:function(){return r.determineMode(t),o.convert({conversions:n,operations:o,helpers:r},e,t)},enumerable:!0})}(a);return Object.assign(i,u({conversions:n,operations:o,helpers:r},d,i));case"[object Array]":for(var s in i.colours=t,n)n.hasOwnProperty(s)&&function(e){Object.defineProperty(i,e,{get:function(){return function t(i){return i.map((function(i){return Array.isArray(i)?t(i):o.convert({conversions:n,operations:o,helpers:r},e,i)}))}(t)},enumerable:!0})}(s);return Object.assign(i,u({conversions:n,operations:o,helpers:r},d,i));default:return null}}},h=u({conversions:c,operations:l,helpers:p},d);t.a=h},"3l5s":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u}));var o,r=n("Czhu"),i=n("ehfC"),a=n("HPtl"),s=n("fyDS"),c=n("Gc+k"),l=n("xFa8");!function(e){e[e.RESET_COLOR=0]="RESET_COLOR",e[e.SET_COLOR=1]="SET_COLOR",e[e.DISABLE=2]="DISABLE"}(o||(o={}));const d=new i.PluginKey("textColorPlugin");function u(e,t){return new i.Plugin({key:d,state:{init:(e,n)=>function(e,t){const n=t&&t.defaultColor||c.a,o=t&&t.EXPERIMENTAL_allowMoreTextColors||!1,i=[{value:n.color,label:n.label,border:s.a},...o?a.b:a.a],d={color:Object(c.b)(e),disabled:Object(l.a)(e),palette:i,defaultColor:n.color};if(o){const e=i.slice(0,7),t=i.slice(7,14),n=i.slice(14),o=t.concat(e).concat(n),a=o[0];return o[0]=o[7],o[7]=a,Object(r.a)(Object(r.a)({},d),{},{palette:e,paletteExpanded:o})}return d}(n,t),apply(t,n,i,a){const s=t.getMeta(d)||{};let u;switch(s.action){case o.RESET_COLOR:u=Object(r.a)(Object(r.a)({},n),{},{color:n.defaultColor});break;case o.SET_COLOR:u=Object(r.a)(Object(r.a)({},n),{},{color:s.color,disabled:!1});break;case o.DISABLE:u=Object(r.a)(Object(r.a)({},n),{},{disabled:!0});break;default:u=Object(r.a)(Object(r.a)({},n),{},{color:Object(c.b)(a),disabled:Object(l.a)(a)})}return n&&n.color!==u.color||n&&n.disabled!==u.disabled?(e(d,u),u):n}}})}},"3rZS":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return s}));const o=(e,t,n)=>{for(let o=0;o<t.length;o++){const{$from:r,$to:i}=t[o];let a=0===r.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(r.pos,i.pos,e=>{if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)}),a)return a}return!1},r=(e,t)=>!!t&&t.some(t=>t.type!==e&&t.type.excludes(e)),i=(e,t)=>{const{selection:n,schema:o}=e;let{tr:r}=e;const i=t.filter(Boolean);if(0===i.length)return;let a=!1;const s=e=>i.indexOf(e.type)>-1;return e.doc.nodesBetween(n.from,n.to,(t,n)=>{if(t.type===o.nodes.paragraph&&t.marks.some(s)){a=!0;const o=e.doc.resolve(n),c=t.marks.filter((i=s,e=>!i(e)));r=r.setNodeMarkup(o.pos,void 0,t.attrs,c)}var i}),a?r:void 0},a=(e,t)=>{const{tr:n}=e;return s(n,t),n},s=(e,t)=>{const{from:n,to:o}=e.selection,r=[];return e.doc.nodesBetween(n,o,(i,a,s)=>!i.isText&&(!(!["expand","layoutSection"].includes(i.type.name)||!(a<n||a>o))||void i.marks.forEach(n=>{if(!s.type.allowsMarkType(n.type)||t&&!t.allowsMarkType(n.type)){const t=i.marks.filter(e=>e.type!==n.type),o=a>0?a:0,s=i.marks.filter(e=>e.type===n.type);r.push({node:i,marksRemoved:s}),e.setNodeMarkup(o,void 0,i.attrs,t)}}))),r}},"3uux":function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return b}));var o,r=n("m23B"),i=n("I9T1"),a=n("ehfC"),s=n("UdmJ"),c=n("UP2C"),l=n("eGvA"),d=n("MWcs");!function(e){e.Before="before",e.After="after"}(o||(o={}));const u=(e,t)=>t.resolve(e.after()).node().lastChild===e.node(),p=(e,t)=>t.resolve(e.before()).node().firstChild===e.node(),h=(e,t,n,r,i)=>p(r,e.doc)&&t===o.Before||u(r,e.doc)&&t===o.After?e.insert(n[t](),i):e.insert(r[t](),i),f=(e,t)=>n=>{const{nodes:a}=n.doc.type.schema,s=[a.rule,a.mediaSingle];if(e instanceof i.Fragment||!s.includes(e.type)||(e=>{const{nodes:t}=e.doc.type.schema;return Object(r.hasParentNodeOfType)([t.orderedList,t.bulletList])(e.selection)})(n))return null;if(!n.selection.empty||Object(r.isNodeSelection)(n.selection))return null;const{$from:l}=n.selection,d=t?n.doc.resolve(t):Object(r.isNodeSelection)(n.selection)?n.doc.resolve(l.pos+1):l;let f;const b=d.end(),g=d.start();if(Object(c.g)(d.parent)?u(d,n.doc)?f=o.After:p(d,n.doc)&&(f=o.Before):d.pos===b?f=o.After:d.pos===g&&(f=o.Before),!f)return null;if(Object(c.g)(d.parent)&&Object(r.canInsert)(n.doc.resolve(d[f]()),e))return m(n.replaceWith(d.before(),d.after(),e),-1);let v=d;for(;v.depth>0;){const t=n.doc.resolve(v[f]()),o=t.node();if(Object(r.canInsert)(v,e))return m(n.insert(v.pos,e),e.nodeSize);if(y=o.type,[(O=n.doc.type.schema.nodes).bulletList,O.orderedList,O.panel].includes(y))return m(h(n,f,t,v,e),e.nodeSize);v=t}var y,O;return m(n.insert(v.pos,e),e.nodeSize)},m=(e,t)=>{const n=e.steps[e.steps.length-1];if(!(n instanceof s.ReplaceStep||n instanceof s.ReplaceAroundStep))return null;const o=n.to+n.slice.openStart+t;return e.setSelection(new l.a(e.doc.resolve(o),l.c.RIGHT)).scrollIntoView()},b=(e,t={})=>(n,o,s)=>{if(!e)return o;const c=e instanceof i.Fragment;let l;try{l=e instanceof i.Node||c?e:"string"==typeof e?n.schema.text(e):i.Node.fromJSON(n.schema,e)}catch(u){return console.error(u),o}if(l.isText)o=o.replaceWith(s,s,l);else if(l.isBlock)o=Object(r.safeInsert)(Object(d.e)(n,l),void 0,!0)(o);else if(l.isInline||c){const e=c?l:i.Fragment.fromArray([l,n.schema.text(" ")]);if(o=o.replaceWith(s,s,e),d.a){const e=document.getSelection();e&&e.empty()}o=t.selectInlineNode?o.setSelection(a.NodeSelection.create(o.doc,s)):o.setSelection(a.Selection.near(o.doc.resolve(s+e.size)))}return o}},"41ZG":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("GeyI"),r=n("tVIO"),i=n("4FMG");function a(e){return Object(r.d)({action:i.a.INVOKED,actionSubject:i.b.TYPEAHEAD,actionSubjectId:i.c.TYPEAHEAD_MENTION,attributes:{inputMethod:e},eventType:i.d.UI})(Object(o.a)("@"))}},"45E7":function(e,t,n){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},"4AGm":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("L21V");const r=Object(o.f)({action:{id:"fabric.editor.action",defaultMessage:"Action item",description:"Also known as a task, to do item, or a checklist"},actionDescription:{id:"fabric.editor.action.description",defaultMessage:"Create and assign action items",description:""},link:{id:"fabric.editor.link",defaultMessage:"Link",description:"Insert a hyperlink"},linkDescription:{id:"fabric.editor.link.description",defaultMessage:"Insert a link",description:"Insert a hyperlink"},filesAndImages:{id:"fabric.editor.filesAndImages",defaultMessage:"Files & images",description:"Insert one or more files or images"},filesAndImagesDescription:{id:"fabric.editor.filesAndImages.description",defaultMessage:"Add images and other files to your page",description:"Insert one or more files or images"},image:{id:"fabric.editor.image",defaultMessage:"Image",description:"Insert an image."},mention:{id:"fabric.editor.mention",defaultMessage:"Mention",description:"Reference another person in your document"},mentionDescription:{id:"fabric.editor.mention.description",defaultMessage:"Mention someone to send them a notification",description:"Reference another person in your document"},emoji:{id:"fabric.editor.emoji",defaultMessage:"Emoji",description:"Insert an emoticon or smiley :-)"},emojiDescription:{id:"fabric.editor.emoji.description",defaultMessage:"Use emojis to express ideas  and emotions ",description:"Insert an emoticon or smiley :-)"},table:{id:"fabric.editor.table",defaultMessage:"Table",description:"Inserts a table in the document"},tableDescription:{id:"fabric.editor.table.description",defaultMessage:"Insert a table",description:"Inserts a table in the document"},expand:{id:"fabric.editor.expand",defaultMessage:"Expand",description:"Inserts an expand in the document"},expandDescription:{id:"fabric.editor.expand.description",defaultMessage:"Insert an expand",description:"Inserts an expand in the document"},decision:{id:"fabric.editor.decision",defaultMessage:"Decision",description:"Capture a decision youve made"},decisionDescription:{id:"fabric.editor.decision.description",defaultMessage:"Capture decisions so theyre easy to track",description:"Capture a decision youve made"},feedbackDialog:{id:"fabric.editor.feedbackDialog",defaultMessage:"Give feedback",description:"Open the feedback dialog from editor"},feedbackDialogDescription:{id:"fabric.editor.feedbackDialog.description",defaultMessage:"Tell us about your experience using the new editor",description:"Description for feedback option under quick insert dropdown"},horizontalRule:{id:"fabric.editor.horizontalRule",defaultMessage:"Divider",description:"A horizontal rule or divider"},horizontalRuleDescription:{id:"fabric.editor.horizontalRule.description",defaultMessage:"Separate content with a horizontal line",description:"A horizontal rule or divider"},date:{id:"fabric.editor.date",defaultMessage:"Date",description:"Opens a date picker that lets you select a date"},dateDescription:{id:"fabric.editor.date.description",defaultMessage:"Add a date using a calendar",description:"Opens a date picker that lets you select a date"},placeholderText:{id:"fabric.editor.placeholderText",defaultMessage:"Placeholder text",description:""},columns:{id:"fabric.editor.columns",defaultMessage:"Layouts",description:"Create a multi column section or layout"},columnsDescription:{id:"fabric.editor.columns.description",defaultMessage:"Structure your page using sections",description:"Create a multi column section or layout"},status:{id:"fabric.editor.status",defaultMessage:"Status",description:"Inserts an item representing the status of an activity to task."},statusDescription:{id:"fabric.editor.status.description",defaultMessage:"Add a custom status label",description:"Inserts an item representing the status of an activity to task."},viewMore:{id:"fabric.editor.viewMore",defaultMessage:"View more",description:""},insertMenu:{id:"fabric.editor.insertMenu",defaultMessage:"Insert",description:"Opens a menu of additional items that can be inserted into your document."},help:{id:"fabric.editor.help",defaultMessage:"Help",description:"Opens up the help dialog"},helpDescription:{id:"fabric.editor.help.description",defaultMessage:"Browse all the keyboard shortcuts and markdown options",description:"Browse all the keyboard shortcuts and markdown options"}})},"4FMG":function(e,t,n){"use strict";var o,r,i,a,s,c;n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),function(e){e.OPERATIONAL="operational",e.SCREEN="screen",e.TRACK="track",e.UI="ui"}(o||(o={})),function(e){e.ACTIVATED="activated",e.ADDED="added",e.BROWSER_FREEZE="browserFreeze",e.CHANGED_FULL_WIDTH_MODE="changedFullWidthMode",e.CHANGED_LAYOUT="changedLayout",e.CHANGED_REPLACEMENT_TEXT="changedReplacementText",e.CHANGED_TYPE="changedType",e.CHANGED_URL="changedUrl",e.CLEARED="cleared",e.CLICKED="clicked",e.CLOSED="closed",e.COPIED="copied",e.COMMITTED="committed",e.CONVERTED="converted",e.CUT="cut",e.DEACTIVATED="deactivated",e.DECREMENTED="decremented",e.DELETED="deleted",e.DISPATCHED_INVALID_TRANSACTION="dispatchedInvalidTransaction",e.DISCARDED_INVALID_STEPS_FROM_TRANSACTION="discardedInvalidStepsFromTransaction",e.EDITED="edited",e.EDITOR_CRASHED="unhandledErrorCaught",e.EDITOR_MOUNTED="mounted",e.EDITOR_TTI="tti",e.ERRORED="errored",e.FAILED_TO_UNMOUNT="failedToUnmount",e.FIND_PERFORMED="findPerformed",e.FIND_NEXT_PERFORMED="findNextPerformed",e.FIND_PREV_PERFORMED="findPrevPerformed",e.FORMATTED="formatted",e.HELP_OPENED="helpOpened",e.INPUT_PERF_SAMPLING="inputPerfSampling",e.INCREMENTED="incremented",e.INSERTED="inserted",e.INVOKED="invoked",e.OPENED="opened",e.PASTED="pasted",e.PASTED_AS_PLAIN="pastedAsPlain",e.PROSEMIRROR_RENDERED="proseMirrorRendered",e.REACT_NODEVIEW_RENDERED="reactNodeViewRendered",e.REDID="redid",e.REPLACED_ONE="replacedOne",e.REPLACED_ALL="replacedAll",e.RESOLVED="resolved",e.SELECTED="selected",e.SLOW_INPUT="slowInput",e.STARTED="started",e.STOPPED="stopped",e.SUBSTITUTED="autoSubstituted",e.TOGGLE_EXPAND="toggleExpand",e.UNDID="undid",e.UNLINK="unlinked",e.UNSUPPORTED_CONTENT_ENCOUNTERED="unsupportedContentEncountered",e.UPLOAD_EXTERNAL_FAIL="uploadExternalFailed",e.TRANSACTION_DISPATCHED="transactionDispatched",e.TYPING_STARTED="typingStarted",e.TYPING_FINISHED="typingFinished",e.VIEWED="viewed",e.VISITED="visited",e.WITH_PLUGIN_STATE_CALLED="withPluginStateCalled",e.SYNCHRONY_ERROR="synchronyError",e.SYNCHRONY_DISCONNECTED="synchronyDisconnected",e.SYNCHRONY_ENTITY_ERROR="synchronyEntityError",e.LIST_ITEM_JOINED="listItemJoined",e.INDENTED="indented",e.OUTDENTED="outdented",e.NODE_CONTENT_SANITIZED="nodeContentSanitized",e.ENTERED="entered",e.SHOWN="shown",e.HIGHLIGHTED="highlighted",e.DISMISSED="dismissed",e.FIXED="fixed"}(r||(r={})),function(e){e.ASCII="ascii",e.AUTO="auto",e.AUTO_DETECT="autoDetect",e.BUTTON="button",e.BLUR="blur",e.CARD="card",e.CLIPBOARD="clipboard",e.CONTEXT_MENU="contextMenu",e.DRAG_AND_DROP="dragAndDrop",e.EXTERNAL="external",e.FLOATING_TB="floatingToolbar",e.FORMATTING="autoformatting",e.INSERT_MENU="insertMenu",e.KEYBOARD="keyboard",e.MANUAL="manual",e.PICKER="picker",e.PICKER_CLOUD="cloudPicker",e.PREFILL="prefill",e.QUICK_INSERT="quickInsert",e.SHORTCUT="shortcut",e.TOOLBAR="toolbar",e.TYPEAHEAD="typeAhead"}(i||(i={})),function(e){e.BUTTON="button",e.KEYBOARD="keyboard",e.SHORTCUT="shortcut",e.TOOLBAR="toolbar"}(a||(a={})),function(e){e.BUTTON="button",e.CONFIG_PANEL="configPanel",e.DATE="date",e.DATE_SEGMENT="dateSegment",e.DOCUMENT="document",e.EDITOR="editor",e.ELEMENT_BROWSER="elementBrowser",e.EMBEDS="embeds",e.EXPAND="expand",e.FEEDBACK_DIALOG="feedbackDialog",e.FIND_REPLACE_DIALOG="findReplaceDialog",e.HELP="help",e.LAYOUT="layout",e.LIST="list",e.MEDIA="media",e.MEDIA_SINGLE="mediaSingle",e.NESTED_EXPAND="nestedExpand",e.PANEL="panel",e.PICKER="picker",e.PLUS_MENU="plusMenu",e.SMART_LINK="smartLink",e.TABLE="table",e.TEXT="text",e.TOOLBAR="toolbar",e.TYPEAHEAD="typeAhead",e.ANNOTATION="annotation",e.SEARCH_RESULT="searchResult",e.CREATE_LINK_INLINE_DIALOG="createLinkInlineDialog"}(s||(s={})),function(e){e.ACTION="action",e.ALL="all",e.ALT_TEXT="altText",e.ANNOTATE_BUTTON="annotateButton",e.BLOCK_QUOTE="blockQuote",e.BUTTON_FEEDBACK="feedbackButton",e.BUTTON_HELP="helpButton",e.CANCEL="cancel",e.CARD_BLOCK="blockCard",e.CARD_INLINE="inlineCard",e.CELL="cell",e.CODE_BLOCK="codeBlock",e.DATE="date",e.DATE_DAY="day",e.DATE_MONTH="month",e.DATE_YEAR="year",e.DECISION="decision",e.DIVIDER="divider",e.EMOJI="emoji",e.EXPAND="expand",e.EXTENSION="extension",e.FORMAT_BLOCK_QUOTE="blockQuote",e.FORMAT_CLEAR="clearFormatting",e.FORMAT_CODE="code",e.FORMAT_COLOR="color",e.FORMAT_HEADING="heading",e.FORMAT_INDENT="indentation",e.FORMAT_ITALIC="italic",e.FORMAT_LIST_BULLET="bulletedList",e.FORMAT_LIST_NUMBER="numberedList",e.FORMAT_STRIKE="strike",e.FORMAT_STRONG="strong",e.FORMAT_SUB="subscript",e.FORMAT_SUPER="superscript",e.FORMAT_UNDERLINE="underline",e.HELP_QUICK_INSERT="helpQuickInsert",e.INLINE_COMMENT="inlineComment",e.LAYOUT="layout",e.RICH_MEDIA_LAYOUT="richMediaLayout",e.LINE_BREAK="lineBreak",e.LINK="link",e.LINK_PREVIEW="linkPreview",e.MEDIA="media",e.MEDIA_SINGLE="mediaSingle",e.MEDIA_GROUP="mediaGroup",e.MEDIA_LINK="mediaLink",e.MENTION="mention",e.NESTED_EXPAND="nestedExpand",e.NODE="node",e.PANEL="panel",e.PASTE_BLOCK_CARD="blockCard",e.PASTE_BLOCKQUOTE="blockQuote",e.PASTE_BODIED_EXTENSION="bodiedExtension",e.PASTE_BULLET_LIST="bulletList",e.PASTE_CODE_BLOCK="codeBlock",e.PASTE_DECISION_LIST="decisionList",e.PASTE_EXPAND="expand",e.PASTE_EXTENSION="extension",e.PASTE_HEADING="heading",e.PASTE_MEDIA_GROUP="mediaGroup",e.PASTE_MEDIA_SINGLE="mediaSingle",e.PASTE_NESTED_EXPAND="nestedExpand",e.PASTE_ORDERED_LIST="orderedList",e.PASTE_PANEL="panel",e.PASTE_PARAGRAPH="paragraph",e.PASTE_RULE="rule",e.PASTE_TABLE="table",e.PASTE_TABLE_CELL="tableCell",e.PASTE_TABLE_HEADER="tableHeader",e.PASTE_TABLE_ROW="tableRow",e.PASTE_TASK_LIST="taskList",e.PICKER_CLOUD="cloudPicker",e.PICKER_EMOJI="emojiPicker",e.PRODUCT_NAME="productName",e.PUNC="punctuation",e.RANGE="range",e.REACT_NODE_VIEW="reactNodeView",e.RESIZED="resized",e.SAVE="save",e.SECTION="section",e.SMART_LINK="smartLink",e.STATUS="status",e.SYMBOL="symbol",e.TABLE="table",e.TEXT="text",e.TYPEAHEAD_EMOJI="emojiTypeAhead",e.TYPEAHEAD_LINK="linkTypeAhead",e.TYPEAHEAD_MENTION="mentionTypeAhead",e.TYPEAHEAD_QUICK_INSERT="quickInsertTypeAhead",e.UNSUPPORTED_BLOCK="unsupportedBlock",e.UNSUPPORTED_INLINE="unsupportedInline",e.UNSUPPORTED_MARK="unsupportedMark",e.RECENT_ACTIVITIES="recentActivities",e.QUICK_SEARCH="quickSearch",e.LINK_SEARCH_INPUT="linkSearchInput",e.PRE_QUERY_SEARCH_RESULTS="preQuerySearchResults",e.POST_QUERY_SEARCH_RESULTS="postQuerySearchResults"}(c||(c={}))},"4SN/":function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"g",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return b}));var o=n("mpTe"),r=n.n(o),i=n("eObz"),a=n("iXHT");const s=/(https?|ftp):\/\/[^\s]+/,c=r()();c.add("sourcetree:","http:");const l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function d(e){if(!e)return null;let t=b(e);return t.length||(t=c.match(e)),t&&t[0]}l.push("a[cdefgilmnoqrtuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrtuvwxyz]|n[acefgilopruz]|om|p[aefghkmnrtw]|qa|r[eosuw]|s[abcdegijklmnrtuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),c.tlds(l,!1);class u{exec(e){if(e.endsWith(" ")){const t=e.slice(0,e.length-1).split(" "),n=t[t.length-1],o=c.match(n);if(o&&o.length>0){const e=o[o.length-1];return e.input=n,e.length=e.lastIndex-e.index+1,[e]}}return null}}function p(e){if(!e)return"";if(Object(a.a)(e))return e;const t=d(e);return t&&t.url||""}function h(e){return t=>Object(i.e)(t,(t,n)=>{const o=!n||n.type!==e.nodes.codeBlock,r=t.type.schema.marks.link;if(o&&t.isText&&!r.isInSet(t.marks)){const e=[],n=t.text,o=function(e){const t=[];let n=e&&c.match(e);n&&n.length>0&&n.forEach(e=>{t.push({start:e.index,end:e.lastIndex,title:e.raw,href:e.url})});return t}(n);let i=0;return o.forEach(n=>{n.start>0&&e.push(t.cut(i,n.start)),e.push(t.cut(n.start,n.end).mark(r.create({href:p(n.href)}).addToSet(t.marks))),i=n.end}),i<n.length&&e.push(t.cut(i)),e}return t})}function f(e){return e.toLowerCase().replace(/^(.*):\/\//,"").replace(/^(www\.)/,"").replace(/[:\/?#](.*)$/,"")}function m(e){if(!window||!window.location)return!1;return window.location.hostname===f(e)}const b=e=>{const t=[];if(!s.test(e))return t;let n,o=0;for(;n=e.substr(o);){const e=(n.match(s)||[""])[0];if(!e)break;{const r=n.search(s),i=r>=0?r+o:r,a=i+e.length;t.push({index:i,lastIndex:a,raw:e,url:e,text:e,schema:""}),o+=a}}return t}},"4icS":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=new(n("ehfC").PluginKey)("cardPlugin")},"4p2i":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));const o={width:156,height:125},r={width:435,height:125},i={width:300,height:300},a=e=>"image"===e?o:"square"===e?i:"horizontal"===e?r:o},"4yVO":function(e,t,n){"use strict";function o(e){return{newInsertionBehaviour:e.allowNewInsertionBehaviour,interactiveExpand:"boolean"==typeof e.allowExpand?e.allowExpand:Boolean(e.allowExpand&&!1!==e.allowExpand.allowInteractiveExpand),placeholderBracketHint:!!e.placeholderBracketHint,placeholderHints:Array.isArray(e.placeholderHints)&&e.placeholderHints.length>0,moreTextColors:"boolean"!=typeof e.allowTextColor&&Boolean(e.allowTextColor&&!0===e.allowTextColor.EXPERIMENTAL_allowMoreTextColors),findReplace:!!e.allowFindReplace,findReplaceMatchCase:"object"==typeof e.allowFindReplace&&Boolean(e.allowFindReplace.allowMatchCase),extensionLocalIdGeneration:"boolean"!=typeof e.allowExtension&&!(!e.allowExtension||!e.allowExtension.allowLocalIdGeneration),keyboardAccessibleDatepicker:"boolean"==typeof e.allowKeyboardAccessibleDatepicker&&e.allowKeyboardAccessibleDatepicker,addColumnWithCustomStep:!(!e.allowTables||"boolean"==typeof e.allowTables)&&Boolean(e.allowTables.allowAddColumnWithCustomStep),predictableLists:e.UNSAFE_predictableLists}}function r(e){return Object.keys(e).filter(t=>!0===e[t])}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}))},"4zHY":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var o=n("rYm2"),r=n("5p9S");function i(e,t,n){const o=Object(r.a)(t.type.schema).header_cell;for(let r=0;r<e.height;r++){const i=t.nodeAt(e.map[n+r*e.width]);if(i&&i.type!==o)return!1}return!0}function a(e,{map:t,tableStart:n,table:a},s){let c=s>0?-1:0;i(t,a,s+c)&&(c=0===s||s===t.width?null:0);for(let i=0;i<t.height;i++){const l=i*t.width+s;if(s>0&&s<t.width&&t.map[l-1]===t.map[l]){const r=t.map[l],c=a.nodeAt(r);if(!c)throw new Error("addColumn: invalid cell for pos "+r);const d=c.attrs;Object(o.b)(d),e.setNodeMarkup(e.mapping.map(n+r),void 0,Object(o.a)(d,s-t.colCount(r))),i+=d.rowspan-1}else{let o;if(null===c)o=Object(r.a)(a.type.schema).cell;else{const e=t.map[l+c],n=a.nodeAt(e);if(!n)throw new Error("addColumn: invalid node at mapped pos "+e);o=n.type}const d=t.positionAt(i,s,a);e.insert(e.mapping.map(n+d),o.createAndFill())}}return e}},"5FKe":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"n",(function(){return g})),n.d(t,"m",(function(){return v})),n.d(t,"o",(function(){return y})),n.d(t,"q",(function(){return O})),n.d(t,"r",(function(){return E})),n.d(t,"s",(function(){return w})),n.d(t,"t",(function(){return C})),n.d(t,"p",(function(){return T})),n.d(t,"u",(function(){return S})),n.d(t,"v",(function(){return k})),n.d(t,"w",(function(){return x})),n.d(t,"i",(function(){return A})),n.d(t,"h",(function(){return j})),n.d(t,"g",(function(){return I}));var o=n("HbGN"),r=n("ERkP"),i=n.n(r),a=n("O65l"),s=n.n(a);const c=s()({id:"badsb",loader:()=>n.e(187).then(n.bind(null,"6aO0")).then(e=>e.default),loading:()=>null}),l=s()({id:"fvrjT",loader:()=>n.e(188).then(n.bind(null,"i/UM")).then(e=>e.default),loading:()=>null}),d=s()({id:"hUFwT",loader:()=>n.e(189).then(n.bind(null,"nH8S")).then(e=>e.default),loading:()=>null}),u=s()({id:"dq8WP",loader:()=>n.e(190).then(n.bind(null,"NXuB")).then(e=>e.default),loading:()=>null}),p=s()({id:"SnMSd",loader:()=>n.e(191).then(n.bind(null,"4Suj")).then(e=>e.default),loading:()=>null}),h=s()({id:"nppq+",loader:()=>n.e(192).then(n.bind(null,"o9Ux")).then(e=>e.default),loading:()=>null}),f=s()({id:"bVVX7",loader:()=>n.e(201).then(n.bind(null,"vwSP")).then(e=>e.default),loading:()=>null}),m=s()({id:"4gFpj",loader:()=>n.e(202).then(n.bind(null,"plHB")).then(e=>e.default),loading:()=>null}),b=s()({id:"vC+14",loader:()=>n.e(203).then(n.bind(null,"g2Yy")).then(e=>e.default),loading:()=>null}),g=s()({id:"jOL5C",loader:()=>n.e(204).then(n.bind(null,"W7RL")).then(e=>e.default),loading:()=>null}),v=s()({id:"wdw1D",loader:()=>n.e(205).then(n.bind(null,"GFTT")).then(e=>e.default),loading:()=>null}),y=s()({id:"gAktS",loader:()=>n.e(206).then(n.bind(null,"LxsB")).then(e=>e.default),loading:()=>null}),O=s()({id:"OW0Kt",loader:()=>n.e(207).then(n.bind(null,"wVDZ")).then(e=>e.default),loading:()=>null}),E=s()({id:"65yyP",loader:()=>n.e(208).then(n.bind(null,"y2++")).then(e=>e.default),loading:()=>null}),w=s()({id:"cUvPk",loader:()=>n.e(209).then(n.bind(null,"vmzP")).then(e=>e.default),loading:()=>null}),C=s()({id:"4aoEb",loader:()=>n.e(210).then(n.bind(null,"7qUF")).then(e=>e.default),loading:()=>null}),T=s()({id:"nNaxR",loader:()=>n.e(211).then(n.bind(null,"QJM0")).then(e=>e.default),loading:()=>null}),S=s()({id:"xoT6d",loader:()=>n.e(212).then(n.bind(null,"STI+")).then(e=>e.default),loading:()=>null}),k=s()({id:"vw7/B",loader:()=>n.e(213).then(n.bind(null,"JtXF")).then(e=>e.default),loading:()=>null}),x=s()({id:"td+Jx",loader:()=>n.e(214).then(n.bind(null,"3E0r")).then(e=>e.default),loading:()=>null});s()({id:"D93wf",loader:()=>Promise.resolve().then(n.bind(null,"nsBn")).then(e=>e.default),loading:()=>null});const A=e=>{let{level:t}=e,r=Object(o.a)(e,["level"]);const a=s()({id:"izQ6w",loader:()=>function(e){switch(e){case 1:return n.e(195).then(n.bind(null,"N44K"));case 2:return n.e(196).then(n.bind(null,"hywF"));case 3:return n.e(197).then(n.bind(null,"Unm3"));case 4:return n.e(198).then(n.bind(null,"rOKR"));case 5:return n.e(199).then(n.bind(null,"sJ11"));case 6:default:return n.e(200).then(n.bind(null,"tl1J"))}}(t).then(e=>e.default),loading:()=>null});return i.a.createElement(a,Object.assign({},r))},j=s()({id:"3sAZq",loader:()=>n.e(194).then(n.bind(null,"rt8P")).then(e=>e.default),loading:()=>null}),I=s()({id:"2MTiD",loader:()=>n.e(193).then(n.bind(null,"6tIe")).then(e=>e.default),loading:()=>null})},"5IXX":function(e,t,n){var o=n("GSvx");e.exports=function(e,t){var n=Number(t);return o(e,12*n)}},"5akD":function(e,t,n){"use strict";var o=n("T1Ll").isSpace;e.exports=function(e,t,n,r){var i,a,s,c,l=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(35!==(i=e.src.charCodeAt(l))||l>=d)return!1;for(a=1,i=e.src.charCodeAt(++l);35===i&&l<d&&a<=6;)a++,i=e.src.charCodeAt(++l);return!(a>6||l<d&&!o(i))&&(r||(d=e.skipSpacesBack(d,l),(s=e.skipCharsBack(d,35,l))>l&&o(e.src.charCodeAt(s-1))&&(d=s),e.line=t+1,(c=e.push("heading_open","h"+String(a),1)).markup="########".slice(0,a),c.map=[t,e.line],(c=e.push("inline","",0)).content=e.src.slice(l,d).trim(),c.map=[t,e.line],c.children=[],(c=e.push("heading_close","h"+String(a),-1)).markup="########".slice(0,a)),!0)}},"5hiN":function(e){e.exports=JSON.parse('{"Aacute":"","aacute":"","Abreve":"","abreve":"","ac":"","acd":"","acE":"","Acirc":"","acirc":"","acute":"","Acy":"","acy":"","AElig":"","aelig":"","af":"","Afr":"","afr":"","Agrave":"","agrave":"","alefsym":"","aleph":"","Alpha":"","alpha":"","Amacr":"","amacr":"","amalg":"","amp":"&","AMP":"&","andand":"","And":"","and":"","andd":"","andslope":"","andv":"","ang":"","ange":"","angle":"","angmsdaa":"","angmsdab":"","angmsdac":"","angmsdad":"","angmsdae":"","angmsdaf":"","angmsdag":"","angmsdah":"","angmsd":"","angrt":"","angrtvb":"","angrtvbd":"","angsph":"","angst":"","angzarr":"","Aogon":"","aogon":"","Aopf":"","aopf":"","apacir":"","ap":"","apE":"","ape":"","apid":"","apos":"\'","ApplyFunction":"","approx":"","approxeq":"","Aring":"","aring":"","Ascr":"","ascr":"","Assign":"","ast":"*","asymp":"","asympeq":"","Atilde":"","atilde":"","Auml":"","auml":"","awconint":"","awint":"","backcong":"","backepsilon":"","backprime":"","backsim":"","backsimeq":"","Backslash":"","Barv":"","barvee":"","barwed":"","Barwed":"","barwedge":"","bbrk":"","bbrktbrk":"","bcong":"","Bcy":"","bcy":"","bdquo":"","becaus":"","because":"","Because":"","bemptyv":"","bepsi":"","bernou":"","Bernoullis":"","Beta":"","beta":"","beth":"","between":"","Bfr":"","bfr":"","bigcap":"","bigcirc":"","bigcup":"","bigodot":"","bigoplus":"","bigotimes":"","bigsqcup":"","bigstar":"","bigtriangledown":"","bigtriangleup":"","biguplus":"","bigvee":"","bigwedge":"","bkarow":"","blacklozenge":"","blacksquare":"","blacktriangle":"","blacktriangledown":"","blacktriangleleft":"","blacktriangleright":"","blank":"","blk12":"","blk14":"","blk34":"","block":"","bne":"=","bnequiv":"","bNot":"","bnot":"","Bopf":"","bopf":"","bot":"","bottom":"","bowtie":"","boxbox":"","boxdl":"","boxdL":"","boxDl":"","boxDL":"","boxdr":"","boxdR":"","boxDr":"","boxDR":"","boxh":"","boxH":"","boxhd":"","boxHd":"","boxhD":"","boxHD":"","boxhu":"","boxHu":"","boxhU":"","boxHU":"","boxminus":"","boxplus":"","boxtimes":"","boxul":"","boxuL":"","boxUl":"","boxUL":"","boxur":"","boxuR":"","boxUr":"","boxUR":"","boxv":"","boxV":"","boxvh":"","boxvH":"","boxVh":"","boxVH":"","boxvl":"","boxvL":"","boxVl":"","boxVL":"","boxvr":"","boxvR":"","boxVr":"","boxVR":"","bprime":"","breve":"","Breve":"","brvbar":"","bscr":"","Bscr":"","bsemi":"","bsim":"","bsime":"","bsolb":"","bsol":"\\\\","bsolhsub":"","bull":"","bullet":"","bump":"","bumpE":"","bumpe":"","Bumpeq":"","bumpeq":"","Cacute":"","cacute":"","capand":"","capbrcup":"","capcap":"","cap":"","Cap":"","capcup":"","capdot":"","CapitalDifferentialD":"","caps":"","caret":"","caron":"","Cayleys":"","ccaps":"","Ccaron":"","ccaron":"","Ccedil":"","ccedil":"","Ccirc":"","ccirc":"","Cconint":"","ccups":"","ccupssm":"","Cdot":"","cdot":"","cedil":"","Cedilla":"","cemptyv":"","cent":"","centerdot":"","CenterDot":"","cfr":"","Cfr":"","CHcy":"","chcy":"","check":"","checkmark":"","Chi":"","chi":"","circ":"","circeq":"","circlearrowleft":"","circlearrowright":"","circledast":"","circledcirc":"","circleddash":"","CircleDot":"","circledR":"","circledS":"","CircleMinus":"","CirclePlus":"","CircleTimes":"","cir":"","cirE":"","cire":"","cirfnint":"","cirmid":"","cirscir":"","ClockwiseContourIntegral":"","CloseCurlyDoubleQuote":"","CloseCurlyQuote":"","clubs":"","clubsuit":"","colon":":","Colon":"","Colone":"","colone":"","coloneq":"","comma":",","commat":"@","comp":"","compfn":"","complement":"","complexes":"","cong":"","congdot":"","Congruent":"","conint":"","Conint":"","ContourIntegral":"","copf":"","Copf":"","coprod":"","Coproduct":"","copy":"","COPY":"","copysr":"","CounterClockwiseContourIntegral":"","crarr":"","cross":"","Cross":"","Cscr":"","cscr":"","csub":"","csube":"","csup":"","csupe":"","ctdot":"","cudarrl":"","cudarrr":"","cuepr":"","cuesc":"","cularr":"","cularrp":"","cupbrcap":"","cupcap":"","CupCap":"","cup":"","Cup":"","cupcup":"","cupdot":"","cupor":"","cups":"","curarr":"","curarrm":"","curlyeqprec":"","curlyeqsucc":"","curlyvee":"","curlywedge":"","curren":"","curvearrowleft":"","curvearrowright":"","cuvee":"","cuwed":"","cwconint":"","cwint":"","cylcty":"","dagger":"","Dagger":"","daleth":"","darr":"","Darr":"","dArr":"","dash":"","Dashv":"","dashv":"","dbkarow":"","dblac":"","Dcaron":"","dcaron":"","Dcy":"","dcy":"","ddagger":"","ddarr":"","DD":"","dd":"","DDotrahd":"","ddotseq":"","deg":"","Del":"","Delta":"","delta":"","demptyv":"","dfisht":"","Dfr":"","dfr":"","dHar":"","dharl":"","dharr":"","DiacriticalAcute":"","DiacriticalDot":"","DiacriticalDoubleAcute":"","DiacriticalGrave":"`","DiacriticalTilde":"","diam":"","diamond":"","Diamond":"","diamondsuit":"","diams":"","die":"","DifferentialD":"","digamma":"","disin":"","div":"","divide":"","divideontimes":"","divonx":"","DJcy":"","djcy":"","dlcorn":"","dlcrop":"","dollar":"$","Dopf":"","dopf":"","Dot":"","dot":"","DotDot":"","doteq":"","doteqdot":"","DotEqual":"","dotminus":"","dotplus":"","dotsquare":"","doublebarwedge":"","DoubleContourIntegral":"","DoubleDot":"","DoubleDownArrow":"","DoubleLeftArrow":"","DoubleLeftRightArrow":"","DoubleLeftTee":"","DoubleLongLeftArrow":"","DoubleLongLeftRightArrow":"","DoubleLongRightArrow":"","DoubleRightArrow":"","DoubleRightTee":"","DoubleUpArrow":"","DoubleUpDownArrow":"","DoubleVerticalBar":"","DownArrowBar":"","downarrow":"","DownArrow":"","Downarrow":"","DownArrowUpArrow":"","DownBreve":"","downdownarrows":"","downharpoonleft":"","downharpoonright":"","DownLeftRightVector":"","DownLeftTeeVector":"","DownLeftVectorBar":"","DownLeftVector":"","DownRightTeeVector":"","DownRightVectorBar":"","DownRightVector":"","DownTeeArrow":"","DownTee":"","drbkarow":"","drcorn":"","drcrop":"","Dscr":"","dscr":"","DScy":"","dscy":"","dsol":"","Dstrok":"","dstrok":"","dtdot":"","dtri":"","dtrif":"","duarr":"","duhar":"","dwangle":"","DZcy":"","dzcy":"","dzigrarr":"","Eacute":"","eacute":"","easter":"","Ecaron":"","ecaron":"","Ecirc":"","ecirc":"","ecir":"","ecolon":"","Ecy":"","ecy":"","eDDot":"","Edot":"","edot":"","eDot":"","ee":"","efDot":"","Efr":"","efr":"","eg":"","Egrave":"","egrave":"","egs":"","egsdot":"","el":"","Element":"","elinters":"","ell":"","els":"","elsdot":"","Emacr":"","emacr":"","empty":"","emptyset":"","EmptySmallSquare":"","emptyv":"","EmptyVerySmallSquare":"","emsp13":"","emsp14":"","emsp":"","ENG":"","eng":"","ensp":"","Eogon":"","eogon":"","Eopf":"","eopf":"","epar":"","eparsl":"","eplus":"","epsi":"","Epsilon":"","epsilon":"","epsiv":"","eqcirc":"","eqcolon":"","eqsim":"","eqslantgtr":"","eqslantless":"","Equal":"","equals":"=","EqualTilde":"","equest":"","Equilibrium":"","equiv":"","equivDD":"","eqvparsl":"","erarr":"","erDot":"","escr":"","Escr":"","esdot":"","Esim":"","esim":"","Eta":"","eta":"","ETH":"","eth":"","Euml":"","euml":"","euro":"","excl":"!","exist":"","Exists":"","expectation":"","exponentiale":"","ExponentialE":"","fallingdotseq":"","Fcy":"","fcy":"","female":"","ffilig":"","fflig":"","ffllig":"","Ffr":"","ffr":"","filig":"","FilledSmallSquare":"","FilledVerySmallSquare":"","fjlig":"fj","flat":"","fllig":"","fltns":"","fnof":"","Fopf":"","fopf":"","forall":"","ForAll":"","fork":"","forkv":"","Fouriertrf":"","fpartint":"","frac12":"","frac13":"","frac14":"","frac15":"","frac16":"","frac18":"","frac23":"","frac25":"","frac34":"","frac35":"","frac38":"","frac45":"","frac56":"","frac58":"","frac78":"","frasl":"","frown":"","fscr":"","Fscr":"","gacute":"","Gamma":"","gamma":"","Gammad":"","gammad":"","gap":"","Gbreve":"","gbreve":"","Gcedil":"","Gcirc":"","gcirc":"","Gcy":"","gcy":"","Gdot":"","gdot":"","ge":"","gE":"","gEl":"","gel":"","geq":"","geqq":"","geqslant":"","gescc":"","ges":"","gesdot":"","gesdoto":"","gesdotol":"","gesl":"","gesles":"","Gfr":"","gfr":"","gg":"","Gg":"","ggg":"","gimel":"","GJcy":"","gjcy":"","gla":"","gl":"","glE":"","glj":"","gnap":"","gnapprox":"","gne":"","gnE":"","gneq":"","gneqq":"","gnsim":"","Gopf":"","gopf":"","grave":"`","GreaterEqual":"","GreaterEqualLess":"","GreaterFullEqual":"","GreaterGreater":"","GreaterLess":"","GreaterSlantEqual":"","GreaterTilde":"","Gscr":"","gscr":"","gsim":"","gsime":"","gsiml":"","gtcc":"","gtcir":"","gt":">","GT":">","Gt":"","gtdot":"","gtlPar":"","gtquest":"","gtrapprox":"","gtrarr":"","gtrdot":"","gtreqless":"","gtreqqless":"","gtrless":"","gtrsim":"","gvertneqq":"","gvnE":"","Hacek":"","hairsp":"","half":"","hamilt":"","HARDcy":"","hardcy":"","harrcir":"","harr":"","hArr":"","harrw":"","Hat":"^","hbar":"","Hcirc":"","hcirc":"","hearts":"","heartsuit":"","hellip":"","hercon":"","hfr":"","Hfr":"","HilbertSpace":"","hksearow":"","hkswarow":"","hoarr":"","homtht":"","hookleftarrow":"","hookrightarrow":"","hopf":"","Hopf":"","horbar":"","HorizontalLine":"","hscr":"","Hscr":"","hslash":"","Hstrok":"","hstrok":"","HumpDownHump":"","HumpEqual":"","hybull":"","hyphen":"","Iacute":"","iacute":"","ic":"","Icirc":"","icirc":"","Icy":"","icy":"","Idot":"","IEcy":"","iecy":"","iexcl":"","iff":"","ifr":"","Ifr":"","Igrave":"","igrave":"","ii":"","iiiint":"","iiint":"","iinfin":"","iiota":"","IJlig":"","ijlig":"","Imacr":"","imacr":"","image":"","ImaginaryI":"","imagline":"","imagpart":"","imath":"","Im":"","imof":"","imped":"","Implies":"","incare":"","in":"","infin":"","infintie":"","inodot":"","intcal":"","int":"","Int":"","integers":"","Integral":"","intercal":"","Intersection":"","intlarhk":"","intprod":"","InvisibleComma":"","InvisibleTimes":"","IOcy":"","iocy":"","Iogon":"","iogon":"","Iopf":"","iopf":"","Iota":"","iota":"","iprod":"","iquest":"","iscr":"","Iscr":"","isin":"","isindot":"","isinE":"","isins":"","isinsv":"","isinv":"","it":"","Itilde":"","itilde":"","Iukcy":"","iukcy":"","Iuml":"","iuml":"","Jcirc":"","jcirc":"","Jcy":"","jcy":"","Jfr":"","jfr":"","jmath":"","Jopf":"","jopf":"","Jscr":"","jscr":"","Jsercy":"","jsercy":"","Jukcy":"","jukcy":"","Kappa":"","kappa":"","kappav":"","Kcedil":"","kcedil":"","Kcy":"","kcy":"","Kfr":"","kfr":"","kgreen":"","KHcy":"","khcy":"","KJcy":"","kjcy":"","Kopf":"","kopf":"","Kscr":"","kscr":"","lAarr":"","Lacute":"","lacute":"","laemptyv":"","lagran":"","Lambda":"","lambda":"","lang":"","Lang":"","langd":"","langle":"","lap":"","Laplacetrf":"","laquo":"","larrb":"","larrbfs":"","larr":"","Larr":"","lArr":"","larrfs":"","larrhk":"","larrlp":"","larrpl":"","larrsim":"","larrtl":"","latail":"","lAtail":"","lat":"","late":"","lates":"","lbarr":"","lBarr":"","lbbrk":"","lbrace":"{","lbrack":"[","lbrke":"","lbrksld":"","lbrkslu":"","Lcaron":"","lcaron":"","Lcedil":"","lcedil":"","lceil":"","lcub":"{","Lcy":"","lcy":"","ldca":"","ldquo":"","ldquor":"","ldrdhar":"","ldrushar":"","ldsh":"","le":"","lE":"","LeftAngleBracket":"","LeftArrowBar":"","leftarrow":"","LeftArrow":"","Leftarrow":"","LeftArrowRightArrow":"","leftarrowtail":"","LeftCeiling":"","LeftDoubleBracket":"","LeftDownTeeVector":"","LeftDownVectorBar":"","LeftDownVector":"","LeftFloor":"","leftharpoondown":"","leftharpoonup":"","leftleftarrows":"","leftrightarrow":"","LeftRightArrow":"","Leftrightarrow":"","leftrightarrows":"","leftrightharpoons":"","leftrightsquigarrow":"","LeftRightVector":"","LeftTeeArrow":"","LeftTee":"","LeftTeeVector":"","leftthreetimes":"","LeftTriangleBar":"","LeftTriangle":"","LeftTriangleEqual":"","LeftUpDownVector":"","LeftUpTeeVector":"","LeftUpVectorBar":"","LeftUpVector":"","LeftVectorBar":"","LeftVector":"","lEg":"","leg":"","leq":"","leqq":"","leqslant":"","lescc":"","les":"","lesdot":"","lesdoto":"","lesdotor":"","lesg":"","lesges":"","lessapprox":"","lessdot":"","lesseqgtr":"","lesseqqgtr":"","LessEqualGreater":"","LessFullEqual":"","LessGreater":"","lessgtr":"","LessLess":"","lesssim":"","LessSlantEqual":"","LessTilde":"","lfisht":"","lfloor":"","Lfr":"","lfr":"","lg":"","lgE":"","lHar":"","lhard":"","lharu":"","lharul":"","lhblk":"","LJcy":"","ljcy":"","llarr":"","ll":"","Ll":"","llcorner":"","Lleftarrow":"","llhard":"","lltri":"","Lmidot":"","lmidot":"","lmoustache":"","lmoust":"","lnap":"","lnapprox":"","lne":"","lnE":"","lneq":"","lneqq":"","lnsim":"","loang":"","loarr":"","lobrk":"","longleftarrow":"","LongLeftArrow":"","Longleftarrow":"","longleftrightarrow":"","LongLeftRightArrow":"","Longleftrightarrow":"","longmapsto":"","longrightarrow":"","LongRightArrow":"","Longrightarrow":"","looparrowleft":"","looparrowright":"","lopar":"","Lopf":"","lopf":"","loplus":"","lotimes":"","lowast":"","lowbar":"_","LowerLeftArrow":"","LowerRightArrow":"","loz":"","lozenge":"","lozf":"","lpar":"(","lparlt":"","lrarr":"","lrcorner":"","lrhar":"","lrhard":"","lrm":"","lrtri":"","lsaquo":"","lscr":"","Lscr":"","lsh":"","Lsh":"","lsim":"","lsime":"","lsimg":"","lsqb":"[","lsquo":"","lsquor":"","Lstrok":"","lstrok":"","ltcc":"","ltcir":"","lt":"<","LT":"<","Lt":"","ltdot":"","lthree":"","ltimes":"","ltlarr":"","ltquest":"","ltri":"","ltrie":"","ltrif":"","ltrPar":"","lurdshar":"","luruhar":"","lvertneqq":"","lvnE":"","macr":"","male":"","malt":"","maltese":"","Map":"","map":"","mapsto":"","mapstodown":"","mapstoleft":"","mapstoup":"","marker":"","mcomma":"","Mcy":"","mcy":"","mdash":"","mDDot":"","measuredangle":"","MediumSpace":"","Mellintrf":"","Mfr":"","mfr":"","mho":"","micro":"","midast":"*","midcir":"","mid":"","middot":"","minusb":"","minus":"","minusd":"","minusdu":"","MinusPlus":"","mlcp":"","mldr":"","mnplus":"","models":"","Mopf":"","mopf":"","mp":"","mscr":"","Mscr":"","mstpos":"","Mu":"","mu":"","multimap":"","mumap":"","nabla":"","Nacute":"","nacute":"","nang":"","nap":"","napE":"","napid":"","napos":"","napprox":"","natural":"","naturals":"","natur":"","nbsp":"","nbump":"","nbumpe":"","ncap":"","Ncaron":"","ncaron":"","Ncedil":"","ncedil":"","ncong":"","ncongdot":"","ncup":"","Ncy":"","ncy":"","ndash":"","nearhk":"","nearr":"","neArr":"","nearrow":"","ne":"","nedot":"","NegativeMediumSpace":"","NegativeThickSpace":"","NegativeThinSpace":"","NegativeVeryThinSpace":"","nequiv":"","nesear":"","nesim":"","NestedGreaterGreater":"","NestedLessLess":"","NewLine":"\\n","nexist":"","nexists":"","Nfr":"","nfr":"","ngE":"","nge":"","ngeq":"","ngeqq":"","ngeqslant":"","nges":"","nGg":"","ngsim":"","nGt":"","ngt":"","ngtr":"","nGtv":"","nharr":"","nhArr":"","nhpar":"","ni":"","nis":"","nisd":"","niv":"","NJcy":"","njcy":"","nlarr":"","nlArr":"","nldr":"","nlE":"","nle":"","nleftarrow":"","nLeftarrow":"","nleftrightarrow":"","nLeftrightarrow":"","nleq":"","nleqq":"","nleqslant":"","nles":"","nless":"","nLl":"","nlsim":"","nLt":"","nlt":"","nltri":"","nltrie":"","nLtv":"","nmid":"","NoBreak":"","NonBreakingSpace":"","nopf":"","Nopf":"","Not":"","not":"","NotCongruent":"","NotCupCap":"","NotDoubleVerticalBar":"","NotElement":"","NotEqual":"","NotEqualTilde":"","NotExists":"","NotGreater":"","NotGreaterEqual":"","NotGreaterFullEqual":"","NotGreaterGreater":"","NotGreaterLess":"","NotGreaterSlantEqual":"","NotGreaterTilde":"","NotHumpDownHump":"","NotHumpEqual":"","notin":"","notindot":"","notinE":"","notinva":"","notinvb":"","notinvc":"","NotLeftTriangleBar":"","NotLeftTriangle":"","NotLeftTriangleEqual":"","NotLess":"","NotLessEqual":"","NotLessGreater":"","NotLessLess":"","NotLessSlantEqual":"","NotLessTilde":"","NotNestedGreaterGreater":"","NotNestedLessLess":"","notni":"","notniva":"","notnivb":"","notnivc":"","NotPrecedes":"","NotPrecedesEqual":"","NotPrecedesSlantEqual":"","NotReverseElement":"","NotRightTriangleBar":"","NotRightTriangle":"","NotRightTriangleEqual":"","NotSquareSubset":"","NotSquareSubsetEqual":"","NotSquareSuperset":"","NotSquareSupersetEqual":"","NotSubset":"","NotSubsetEqual":"","NotSucceeds":"","NotSucceedsEqual":"","NotSucceedsSlantEqual":"","NotSucceedsTilde":"","NotSuperset":"","NotSupersetEqual":"","NotTilde":"","NotTildeEqual":"","NotTildeFullEqual":"","NotTildeTilde":"","NotVerticalBar":"","nparallel":"","npar":"","nparsl":"","npart":"","npolint":"","npr":"","nprcue":"","nprec":"","npreceq":"","npre":"","nrarrc":"","nrarr":"","nrArr":"","nrarrw":"","nrightarrow":"","nRightarrow":"","nrtri":"","nrtrie":"","nsc":"","nsccue":"","nsce":"","Nscr":"","nscr":"","nshortmid":"","nshortparallel":"","nsim":"","nsime":"","nsimeq":"","nsmid":"","nspar":"","nsqsube":"","nsqsupe":"","nsub":"","nsubE":"","nsube":"","nsubset":"","nsubseteq":"","nsubseteqq":"","nsucc":"","nsucceq":"","nsup":"","nsupE":"","nsupe":"","nsupset":"","nsupseteq":"","nsupseteqq":"","ntgl":"","Ntilde":"","ntilde":"","ntlg":"","ntriangleleft":"","ntrianglelefteq":"","ntriangleright":"","ntrianglerighteq":"","Nu":"","nu":"","num":"#","numero":"","numsp":"","nvap":"","nvdash":"","nvDash":"","nVdash":"","nVDash":"","nvge":"","nvgt":">","nvHarr":"","nvinfin":"","nvlArr":"","nvle":"","nvlt":"<","nvltrie":"","nvrArr":"","nvrtrie":"","nvsim":"","nwarhk":"","nwarr":"","nwArr":"","nwarrow":"","nwnear":"","Oacute":"","oacute":"","oast":"","Ocirc":"","ocirc":"","ocir":"","Ocy":"","ocy":"","odash":"","Odblac":"","odblac":"","odiv":"","odot":"","odsold":"","OElig":"","oelig":"","ofcir":"","Ofr":"","ofr":"","ogon":"","Ograve":"","ograve":"","ogt":"","ohbar":"","ohm":"","oint":"","olarr":"","olcir":"","olcross":"","oline":"","olt":"","Omacr":"","omacr":"","Omega":"","omega":"","Omicron":"","omicron":"","omid":"","ominus":"","Oopf":"","oopf":"","opar":"","OpenCurlyDoubleQuote":"","OpenCurlyQuote":"","operp":"","oplus":"","orarr":"","Or":"","or":"","ord":"","order":"","orderof":"","ordf":"","ordm":"","origof":"","oror":"","orslope":"","orv":"","oS":"","Oscr":"","oscr":"","Oslash":"","oslash":"","osol":"","Otilde":"","otilde":"","otimesas":"","Otimes":"","otimes":"","Ouml":"","ouml":"","ovbar":"","OverBar":"","OverBrace":"","OverBracket":"","OverParenthesis":"","para":"","parallel":"","par":"","parsim":"","parsl":"","part":"","PartialD":"","Pcy":"","pcy":"","percnt":"%","period":".","permil":"","perp":"","pertenk":"","Pfr":"","pfr":"","Phi":"","phi":"","phiv":"","phmmat":"","phone":"","Pi":"","pi":"","pitchfork":"","piv":"","planck":"","planckh":"","plankv":"","plusacir":"","plusb":"","pluscir":"","plus":"+","plusdo":"","plusdu":"","pluse":"","PlusMinus":"","plusmn":"","plussim":"","plustwo":"","pm":"","Poincareplane":"","pointint":"","popf":"","Popf":"","pound":"","prap":"","Pr":"","pr":"","prcue":"","precapprox":"","prec":"","preccurlyeq":"","Precedes":"","PrecedesEqual":"","PrecedesSlantEqual":"","PrecedesTilde":"","preceq":"","precnapprox":"","precneqq":"","precnsim":"","pre":"","prE":"","precsim":"","prime":"","Prime":"","primes":"","prnap":"","prnE":"","prnsim":"","prod":"","Product":"","profalar":"","profline":"","profsurf":"","prop":"","Proportional":"","Proportion":"","propto":"","prsim":"","prurel":"","Pscr":"","pscr":"","Psi":"","psi":"","puncsp":"","Qfr":"","qfr":"","qint":"","qopf":"","Qopf":"","qprime":"","Qscr":"","qscr":"","quaternions":"","quatint":"","quest":"?","questeq":"","quot":"\\"","QUOT":"\\"","rAarr":"","race":"","Racute":"","racute":"","radic":"","raemptyv":"","rang":"","Rang":"","rangd":"","range":"","rangle":"","raquo":"","rarrap":"","rarrb":"","rarrbfs":"","rarrc":"","rarr":"","Rarr":"","rArr":"","rarrfs":"","rarrhk":"","rarrlp":"","rarrpl":"","rarrsim":"","Rarrtl":"","rarrtl":"","rarrw":"","ratail":"","rAtail":"","ratio":"","rationals":"","rbarr":"","rBarr":"","RBarr":"","rbbrk":"","rbrace":"}","rbrack":"]","rbrke":"","rbrksld":"","rbrkslu":"","Rcaron":"","rcaron":"","Rcedil":"","rcedil":"","rceil":"","rcub":"}","Rcy":"","rcy":"","rdca":"","rdldhar":"","rdquo":"","rdquor":"","rdsh":"","real":"","realine":"","realpart":"","reals":"","Re":"","rect":"","reg":"","REG":"","ReverseElement":"","ReverseEquilibrium":"","ReverseUpEquilibrium":"","rfisht":"","rfloor":"","rfr":"","Rfr":"","rHar":"","rhard":"","rharu":"","rharul":"","Rho":"","rho":"","rhov":"","RightAngleBracket":"","RightArrowBar":"","rightarrow":"","RightArrow":"","Rightarrow":"","RightArrowLeftArrow":"","rightarrowtail":"","RightCeiling":"","RightDoubleBracket":"","RightDownTeeVector":"","RightDownVectorBar":"","RightDownVector":"","RightFloor":"","rightharpoondown":"","rightharpoonup":"","rightleftarrows":"","rightleftharpoons":"","rightrightarrows":"","rightsquigarrow":"","RightTeeArrow":"","RightTee":"","RightTeeVector":"","rightthreetimes":"","RightTriangleBar":"","RightTriangle":"","RightTriangleEqual":"","RightUpDownVector":"","RightUpTeeVector":"","RightUpVectorBar":"","RightUpVector":"","RightVectorBar":"","RightVector":"","ring":"","risingdotseq":"","rlarr":"","rlhar":"","rlm":"","rmoustache":"","rmoust":"","rnmid":"","roang":"","roarr":"","robrk":"","ropar":"","ropf":"","Ropf":"","roplus":"","rotimes":"","RoundImplies":"","rpar":")","rpargt":"","rppolint":"","rrarr":"","Rrightarrow":"","rsaquo":"","rscr":"","Rscr":"","rsh":"","Rsh":"","rsqb":"]","rsquo":"","rsquor":"","rthree":"","rtimes":"","rtri":"","rtrie":"","rtrif":"","rtriltri":"","RuleDelayed":"","ruluhar":"","rx":"","Sacute":"","sacute":"","sbquo":"","scap":"","Scaron":"","scaron":"","Sc":"","sc":"","sccue":"","sce":"","scE":"","Scedil":"","scedil":"","Scirc":"","scirc":"","scnap":"","scnE":"","scnsim":"","scpolint":"","scsim":"","Scy":"","scy":"","sdotb":"","sdot":"","sdote":"","searhk":"","searr":"","seArr":"","searrow":"","sect":"","semi":";","seswar":"","setminus":"","setmn":"","sext":"","Sfr":"","sfr":"","sfrown":"","sharp":"","SHCHcy":"","shchcy":"","SHcy":"","shcy":"","ShortDownArrow":"","ShortLeftArrow":"","shortmid":"","shortparallel":"","ShortRightArrow":"","ShortUpArrow":"","shy":"","Sigma":"","sigma":"","sigmaf":"","sigmav":"","sim":"","simdot":"","sime":"","simeq":"","simg":"","simgE":"","siml":"","simlE":"","simne":"","simplus":"","simrarr":"","slarr":"","SmallCircle":"","smallsetminus":"","smashp":"","smeparsl":"","smid":"","smile":"","smt":"","smte":"","smtes":"","SOFTcy":"","softcy":"","solbar":"","solb":"","sol":"/","Sopf":"","sopf":"","spades":"","spadesuit":"","spar":"","sqcap":"","sqcaps":"","sqcup":"","sqcups":"","Sqrt":"","sqsub":"","sqsube":"","sqsubset":"","sqsubseteq":"","sqsup":"","sqsupe":"","sqsupset":"","sqsupseteq":"","square":"","Square":"","SquareIntersection":"","SquareSubset":"","SquareSubsetEqual":"","SquareSuperset":"","SquareSupersetEqual":"","SquareUnion":"","squarf":"","squ":"","squf":"","srarr":"","Sscr":"","sscr":"","ssetmn":"","ssmile":"","sstarf":"","Star":"","star":"","starf":"","straightepsilon":"","straightphi":"","strns":"","sub":"","Sub":"","subdot":"","subE":"","sube":"","subedot":"","submult":"","subnE":"","subne":"","subplus":"","subrarr":"","subset":"","Subset":"","subseteq":"","subseteqq":"","SubsetEqual":"","subsetneq":"","subsetneqq":"","subsim":"","subsub":"","subsup":"","succapprox":"","succ":"","succcurlyeq":"","Succeeds":"","SucceedsEqual":"","SucceedsSlantEqual":"","SucceedsTilde":"","succeq":"","succnapprox":"","succneqq":"","succnsim":"","succsim":"","SuchThat":"","sum":"","Sum":"","sung":"","sup1":"","sup2":"","sup3":"","sup":"","Sup":"","supdot":"","supdsub":"","supE":"","supe":"","supedot":"","Superset":"","SupersetEqual":"","suphsol":"","suphsub":"","suplarr":"","supmult":"","supnE":"","supne":"","supplus":"","supset":"","Supset":"","supseteq":"","supseteqq":"","supsetneq":"","supsetneqq":"","supsim":"","supsub":"","supsup":"","swarhk":"","swarr":"","swArr":"","swarrow":"","swnwar":"","szlig":"","Tab":"\\t","target":"","Tau":"","tau":"","tbrk":"","Tcaron":"","tcaron":"","Tcedil":"","tcedil":"","Tcy":"","tcy":"","tdot":"","telrec":"","Tfr":"","tfr":"","there4":"","therefore":"","Therefore":"","Theta":"","theta":"","thetasym":"","thetav":"","thickapprox":"","thicksim":"","ThickSpace":"","ThinSpace":"","thinsp":"","thkap":"","thksim":"","THORN":"","thorn":"","tilde":"","Tilde":"","TildeEqual":"","TildeFullEqual":"","TildeTilde":"","timesbar":"","timesb":"","times":"","timesd":"","tint":"","toea":"","topbot":"","topcir":"","top":"","Topf":"","topf":"","topfork":"","tosa":"","tprime":"","trade":"","TRADE":"","triangle":"","triangledown":"","triangleleft":"","trianglelefteq":"","triangleq":"","triangleright":"","trianglerighteq":"","tridot":"","trie":"","triminus":"","TripleDot":"","triplus":"","trisb":"","tritime":"","trpezium":"","Tscr":"","tscr":"","TScy":"","tscy":"","TSHcy":"","tshcy":"","Tstrok":"","tstrok":"","twixt":"","twoheadleftarrow":"","twoheadrightarrow":"","Uacute":"","uacute":"","uarr":"","Uarr":"","uArr":"","Uarrocir":"","Ubrcy":"","ubrcy":"","Ubreve":"","ubreve":"","Ucirc":"","ucirc":"","Ucy":"","ucy":"","udarr":"","Udblac":"","udblac":"","udhar":"","ufisht":"","Ufr":"","ufr":"","Ugrave":"","ugrave":"","uHar":"","uharl":"","uharr":"","uhblk":"","ulcorn":"","ulcorner":"","ulcrop":"","ultri":"","Umacr":"","umacr":"","uml":"","UnderBar":"_","UnderBrace":"","UnderBracket":"","UnderParenthesis":"","Union":"","UnionPlus":"","Uogon":"","uogon":"","Uopf":"","uopf":"","UpArrowBar":"","uparrow":"","UpArrow":"","Uparrow":"","UpArrowDownArrow":"","updownarrow":"","UpDownArrow":"","Updownarrow":"","UpEquilibrium":"","upharpoonleft":"","upharpoonright":"","uplus":"","UpperLeftArrow":"","UpperRightArrow":"","upsi":"","Upsi":"","upsih":"","Upsilon":"","upsilon":"","UpTeeArrow":"","UpTee":"","upuparrows":"","urcorn":"","urcorner":"","urcrop":"","Uring":"","uring":"","urtri":"","Uscr":"","uscr":"","utdot":"","Utilde":"","utilde":"","utri":"","utrif":"","uuarr":"","Uuml":"","uuml":"","uwangle":"","vangrt":"","varepsilon":"","varkappa":"","varnothing":"","varphi":"","varpi":"","varpropto":"","varr":"","vArr":"","varrho":"","varsigma":"","varsubsetneq":"","varsubsetneqq":"","varsupsetneq":"","varsupsetneqq":"","vartheta":"","vartriangleleft":"","vartriangleright":"","vBar":"","Vbar":"","vBarv":"","Vcy":"","vcy":"","vdash":"","vDash":"","Vdash":"","VDash":"","Vdashl":"","veebar":"","vee":"","Vee":"","veeeq":"","vellip":"","verbar":"|","Verbar":"","vert":"|","Vert":"","VerticalBar":"","VerticalLine":"|","VerticalSeparator":"","VerticalTilde":"","VeryThinSpace":"","Vfr":"","vfr":"","vltri":"","vnsub":"","vnsup":"","Vopf":"","vopf":"","vprop":"","vrtri":"","Vscr":"","vscr":"","vsubnE":"","vsubne":"","vsupnE":"","vsupne":"","Vvdash":"","vzigzag":"","Wcirc":"","wcirc":"","wedbar":"","wedge":"","Wedge":"","wedgeq":"","weierp":"","Wfr":"","wfr":"","Wopf":"","wopf":"","wp":"","wr":"","wreath":"","Wscr":"","wscr":"","xcap":"","xcirc":"","xcup":"","xdtri":"","Xfr":"","xfr":"","xharr":"","xhArr":"","Xi":"","xi":"","xlarr":"","xlArr":"","xmap":"","xnis":"","xodot":"","Xopf":"","xopf":"","xoplus":"","xotime":"","xrarr":"","xrArr":"","Xscr":"","xscr":"","xsqcup":"","xuplus":"","xutri":"","xvee":"","xwedge":"","Yacute":"","yacute":"","YAcy":"","yacy":"","Ycirc":"","ycirc":"","Ycy":"","ycy":"","yen":"","Yfr":"","yfr":"","YIcy":"","yicy":"","Yopf":"","yopf":"","Yscr":"","yscr":"","YUcy":"","yucy":"","yuml":"","Yuml":"","Zacute":"","zacute":"","Zcaron":"","zcaron":"","Zcy":"","zcy":"","Zdot":"","zdot":"","zeetrf":"","ZeroWidthSpace":"","Zeta":"","zeta":"","zfr":"","Zfr":"","ZHcy":"","zhcy":"","zigrarr":"","zopf":"","Zopf":"","Zscr":"","zscr":"","zwj":"","zwnj":""}')},"5lLR":function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var o=n("ehfC"),r=n("9dFV");const i=new o.PluginKey("editorDisabledPlugin");const{createPluginState:a,getPluginState:s}=Object(r.a)(i,(function(e,t){return t}));t.a=()=>({name:"editorDisabled",pmPlugins:()=>[{name:"editorDisabled",plugin:({dispatch:e})=>function(e){return new o.Plugin({key:i,state:a(e,{editorDisabled:!1}),view:()=>({update(e){if(s(e.state).editorDisabled!==!e.editable){const t=e.state.tr.setMeta(i,{editorDisabled:!e.editable});t.setMeta("isLocal",!0),e.dispatch(t)}}})})}(e)}]})},"5p9S":function(e,t,n){"use strict";function o(e){let t=e.cached.tableNodeTypes;if(!t){t={},e.cached.tableNodeTypes=t;for(const n in e.nodes){const o=e.nodes[n],r=o.spec.tableRole;r&&(t[r]=o)}}return t}n.d(t,"a",(function(){return o}))},"5z8k":function(e,t,n){"use strict";function o(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}o.prototype.attrIndex=function(e){var t,n,o;if(!this.attrs)return-1;for(n=0,o=(t=this.attrs).length;n<o;n++)if(t[n][0]===e)return n;return-1},o.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},o.prototype.attrSet=function(e,t){var n=this.attrIndex(e),o=[e,t];n<0?this.attrPush(o):this.attrs[n]=o},o.prototype.attrGet=function(e){var t=this.attrIndex(e),n=null;return t>=0&&(n=this.attrs[t][1]),n},o.prototype.attrJoin=function(e,t){var n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},e.exports=o},"62Nd":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return b}));var o=n("Czhu"),r=n("I9T1"),i=n("ehfC"),a=n("ArAF"),s=n("tVIO"),c=n("4FMG"),l=n("QuFy"),d=n("m23B");const u={text:"",color:"neutral"},p=(e=-2)=>(t,n)=>{const r=t(n.schema.nodes.status.createChecked(Object(o.a)(Object(o.a)({},u),{},{localId:a.b.generate()}))),s=r.selection.from+e;return r.setSelection(i.NodeSelection.create(r.doc,s)).setMeta(l.a,{showStatusPickerAt:s,isNew:!0})},h=e=>(t,n)=>{const{schema:s}=t,c=e?Object.assign(e,{text:e.text.trim(),localId:e.localId||a.b.generate()}):e,p=Object(o.a)(Object(o.a)({},u),c);let h=t.tr;const{showStatusPickerAt:f}=l.a.getState(t);if(!f){const e=s.nodes.status.createChecked(p),o=r.Fragment.fromArray([e,t.schema.text(" ")]);if(Object(d.canInsert)(h.selection.$from,o))h.insert(h.selection.from,o).setSelection(i.NodeSelection.create(h.doc,h.selection.from-o.size));else{const e=i.NodeSelection.create(h.doc,h.selection.from-h.selection.$anchor.parentOffset-1);h.insert(e.to,o).setSelection(i.NodeSelection.create(h.doc,e.to+1))}return h.setMeta(l.a,{showStatusPickerAt:h.selection.from,isNew:!0}).scrollIntoView(),n&&n(h),!0}return!!t.doc.nodeAt(f)&&(h.setNodeMarkup(f,s.nodes.status,p).setSelection(i.NodeSelection.create(h.doc,f)).setMeta(l.a,{showStatusPickerAt:f}).scrollIntoView(),n&&n(h),!0)},f=(e,t)=>Object(s.d)({action:c.a.INSERTED,actionSubject:c.b.DOCUMENT,actionSubjectId:c.c.STATUS,attributes:{inputMethod:e},eventType:c.d.TRACK})(h(t)),m=e=>(t,n)=>(n(t.tr.setMeta(l.a,{showStatusPickerAt:e,isNew:!1})),!0),b=()=>e=>{const{state:t,dispatch:n}=e,{showStatusPickerAt:o}=l.a.getState(t);if(!o)return;const r=t.tr.doc.nodeAt(o);if(!r)return;let a=t.tr;a=a.setMeta(l.a,{showStatusPickerAt:null,isNew:!1}),r.attrs.text?a.selection.from===o&&(a=a.setSelection(i.Selection.near(t.tr.doc.resolve(o+2)))):a=a.delete(o,o+1),n(a),e.focus()}},"6eyB":function(e,t,n){var o=n("UFJf");e.exports=function(e,t){var n=o(e),r=o(t);return n.getTime()<r.getTime()}},"6hpg":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var o=n("KsTJ"),r=n("3IV/");const i="placeholder-decoration",a=o.css`
  .ProseMirror .${i} {
    position: relative;
    color: ${r.N90};
    width: 100%;

    pointer-events: none;
    display: block;
    user-select: none;

    > span {
      position: absolute;
      pointer-events: none;
    }

    &.align-end > span {
      right: 0;
    }

    &.align-center > span {
      left: 0;
    }
  }
`},"6wBK":function(e,t,n){"use strict";var o=n("HbGN"),r=n("aWzz"),i=n.n(r),a=n("ERkP"),s=n.n(a),c=n("Bo9c"),l=n("mjri"),d=n("NubX"),u=n("Jx+6"),p=n("Ev+V");class h extends a.PureComponent{constructor(e,t){super(e,t),this.mounted=!1,this.handleLoadError=(e,t)=>{const{invalidImage:n}=this.state;!n&&t&&this.setState({cachedEmoji:this.loadEmoji(t,this.context,!0)})},this.state={cachedEmoji:this.loadEmoji(e.emoji,t,!1)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}UNSAFE_componentWillReceiveProps(e,t){e.emoji!==this.props.emoji&&this.mounted&&this.setState({cachedEmoji:this.loadEmoji(e.emoji,t,!1)})}loadEmoji(e,t,n){if(!t.emoji)return;const{emojiProvider:o}=t.emoji;if(!o)return;const{fitToHeight:r}=this.props,i=Object(c.d)(e,r);if(o.optimisticMediaRendering(e,i)&&!n)return Object(d.a)("Optimistic rendering",e.shortName),e;Object(d.a)("Loading image via media cache",e.shortName);const a=o.loadMediaEmoji(e,i);if(!Object(l.n)(a))return Object(l.f)(a)?a:void 0;a.then(e=>{this.mounted&&this.setState({cachedEmoji:e,invalidImage:!e})}).catch(()=>{this.mounted&&this.setState({cachedEmoji:void 0,invalidImage:!0})})}render(){const{cachedEmoji:e}=this.state,t=this.props,{children:n,placeholderSize:r}=t,i=Object(o.a)(t,["children","placeholderSize"]);let a;if(e)a=s.a.createElement(u.a,Object.assign({},i,{emoji:e,onLoadError:this.handleLoadError}));else{const{emoji:e,placeholderSize:t,showTooltip:n,fitToHeight:o}=this.props,{shortName:r,representation:i}=e;a=s.a.createElement(p.a,{size:o||t,shortName:r,showTooltip:n,representation:i})}return a}}h.contextTypes={emoji:i.a.object},t.a=e=>{const{placeholderSize:t}=e,n=Object(o.a)(e,["placeholderSize"]);return Object(l.k)(e.emoji)?s.a.createElement(h,Object.assign({},e)):s.a.createElement(u.a,Object.assign({},n))}},"76qw":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o={listHeight:208,listWidth:n("IGfZ").i,searchHeight:52,categoryHeadingHeight:30,emojiRowHeight:40,addEmojiHeight:32,loadingRowHeight:150,uploadActionHeight:40,emojiPerRow:8}},"77XF":function(e,t,n){"use strict";function o(e){const t={};return e.doc.descendants(e=>(e.type.name in t?t[e.type.name]++:t[e.type.name]=1,!0)),t}n.d(t,"a",(function(){return o}))},"7EeQ":function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var o=n("ehfC");const r=new o.PluginKey("maxContentSizePlugin");t.a=e=>({name:"maxContentSize",pmPlugins:()=>[{name:"maxContentSize",plugin:({dispatch:t})=>function(e,t){if(!t)return;let n=!1;return new o.Plugin({filterTransaction(o){const i=o.doc&&o.doc.nodeSize>t;return(i||i!==n)&&e(r,{maxContentSizeReached:i}),n=i,!i}})}(t,e)}]})},"7fAN":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var o=n("ERkP"),r=n.n(o),i=n("L21V"),a=n("gloY"),s=n.n(a),c=n("IWmk"),l=n("NSXj"),d=n("LsVN"),u=n("Y8iL");const p=Object(i.f)({createComment:{id:"fabric.editor.createComment",defaultMessage:"Comment",description:"Create/add an inline comment based on the users selection"},createCommentInvalid:{id:"fabric.editor.createCommentInvalid",defaultMessage:"You can only comment on text and headings",description:"Error message to communicate to the user they can only do the current action in certain contexts"},toolbar:{id:"fabric.editor.annotationToolbar",defaultMessage:"Annotation toolbar",description:"A label for a toolbar (UI element) that creates annotations/comments in the document"}}),h=e=>(t,n)=>{const o=document.querySelector(`div[aria-label="${e}"]`);if(!o)return n;const r=t.dom.closest(".fabric-editor-popup-scroll-parent")||document.body,i=r.getBoundingClientRect(),a=window&&window.getSelection(),s=a&&!a.isCollapsed&&a.getRangeAt(0);if(!s)return n;const c=o.getBoundingClientRect(),{head:l,anchor:d}=t.state.selection,u=t.coordsAtPos(Math.min(l,d)),p=t.coordsAtPos(Math.max(l,d)-Math.min(s.endOffset,1)),h=(u.top||0)-1.5*c.height;let f=0;if(u.top!==p.top){f=l>d?Math.max(u.right,p.right):Math.min(u.left,p.left);const e=s.getClientRects()[0];e.right<f&&(f=e.left+e.width/2)}else f=u.left+(p.right-u.left)/2;return f-=c.width/2,{top:h-i.top+r.scrollTop,left:Math.max(0,f-i.left)}},f=e=>(t,n)=>{const o=document.querySelector(`div[aria-label="${e}"]`);if(!o)return n;const r=t.dom.closest(".fabric-editor-popup-scroll-parent")||document.body,i=r.getBoundingClientRect(),a=window&&window.getSelection(),s=a&&!a.isCollapsed&&a.getRangeAt(0);if(!s)return n;const c=o.getBoundingClientRect(),{head:l,anchor:d}=t.state.selection;let u,p=t.coordsAtPos(Math.min(l,d)),h=t.coordsAtPos(Math.max(l,d)-Math.min(s.endOffset,1));u=l>d&&p.top!==h.top?(h.top||0)+c.height/1.15:(p.top||0)-1.5*c.height;const f=(l>d?h.right:p.left)-c.width/2;return{top:u-i.top+r.scrollTop,left:Math.max(0,f-i.left)}},m=(e,t,n=!1)=>{const{schema:o}=e,i=Object(u.j)(e);if(i===d.a.INVALID)return;const a=t.formatMessage(p.createComment),m=t.formatMessage(p.createCommentInvalid),b={type:"button",showTitle:!0,disabled:i===d.a.DISABLED,testId:d.b.floatingToolbarCreateButton,icon:s.a,tooltipContent:i===d.a.DISABLED?m:r.a.createElement(c.ToolTipContent,{description:a,keymap:c.addInlineComment}),title:a,onClick:(e,t)=>Object(l.e)(!0)(e,t)},{annotation:g}=o.marks,v=Object.keys(o.nodes).reduce((e,t)=>{const n=o.nodes[t];return n.allowsMarkType(g)&&e.push(n),e},[]),y=t.formatMessage(p.toolbar);return{title:y,nodeType:v,items:[b],onPositionCalculated:(n?h:f)(y)}}},"8F1V":function(e,t,n){"use strict";n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"i",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"g",(function(){return O})),n.d(t,"a",(function(){return E})),n.d(t,"j",(function(){return w})),n.d(t,"b",(function(){return C}));var o=n("Czhu"),r=n("4SN/"),i=n("YKy/"),a=n("ehfC"),s=n("TIUX"),c=n("tVIO"),l=n("4FMG"),d=n("QVO1"),u=n("lOw6");function p(e){return t=>{const n=t.doc.nodeAt(e);return!!n&&n.isText}}function h(e){return t=>{const n=t.doc.nodeAt(e);return!!n&&t.schema.marks.link.isInSet(n.marks)}}function f(e,t,n,a){return Object(s.b)(p(t),(s,c)=>{const l=s.doc.resolve(t),d=s.doc.nodeAt(t),u=s.schema.marks.link,p=u.isInSet(d.marks),h=Object(r.g)(e);if(p&&p.attrs.href===h)return!1;const f=n&&t!==n?n:t-l.textOffset+d.nodeSize,m=s.tr.removeMark(t,f,u);return e.trim()&&m.addMark(t,f,u.create(Object(o.a)(Object(o.a)({},p&&p.attrs||{}),{},{href:h}))),a||m.setMeta(i.d,{type:i.b.HIDE_TOOLBAR}),c&&c(m),!0})}function m(e,t,n,a){return(s,c)=>{const l=s.doc.resolve(n),d=s.doc.nodeAt(n);if(!d)return!1;const u=Object(r.g)(e);if(!u)return!1;const p=s.schema.marks.link.isInSet(d.marks),h=s.schema.marks.link,f=a&&n!==a?a:n-l.textOffset+d.nodeSize,m=s.tr;m.insertText(t,n,f);const b=Object(o.a)(Object(o.a)({},p&&p.attrs||{}),{},{href:u});return m.addMark(n,n+t.length,h.create(b)),m.setMeta(i.d,{type:i.b.HIDE_TOOLBAR}),c&&c(m),!0}}function b(e,t,n){return Object(s.b)(h(t),(o,r)=>{const a=o.doc.resolve(t),s=o.doc.nodeAt(t),c=o.schema.marks.link.isInSet(s.marks);if(s&&e.length>0&&e!==s.text){const l=n&&t!==n?n:t-a.textOffset+s.nodeSize,d=o.tr;return d.insertText(e,t,l),d.addMark(t,t+e.length,c),d.setMeta(i.d,{type:i.b.HIDE_TOOLBAR}),r&&r(d),!0}return!1})}function g(e,t,n,o,s,c){return(l,u)=>{const p=l.schema.marks.link;if(n.trim()){const{tr:h}=l,f=Object(r.g)(n),m=i.d.getState(l).activeText;let b=t;const g=s||o||n;return s&&s===m||(h.insertText(g,e,t),b=e+g.length),h.addMark(e,b,p.create({href:f})),h.setSelection(a.Selection.near(h.doc.resolve(b))),y(n,c,o,s)&&Object(d.d)(l,h,c,!1),h.setMeta(i.d,{type:i.b.HIDE_TOOLBAR}),u&&u(h),!0}return!1}}const v=(e,t,n,o,r,i)=>y(o,e,r,i)?g(t,n,o,r,i,e):Object(c.d)(Object(u.a)(e,o))(g(t,n,o,r,i,e)),y=(e,t,n,o)=>t&&t===l.e.TYPEAHEAD&&!o||t&&t===l.e.MANUAL&&!n&&!o||o===e;function O(e){return f("",e)}function E(){return(e,t)=>(t&&t(e.tr.setMeta(i.d,{type:i.b.EDIT_INSERTED_TOOLBAR,inputMethod:l.e.FLOATING_TB})),!0)}function w(e=l.e.TOOLBAR){return function(t,n){if(n){let o=t.tr.setMeta(i.d,{type:i.b.SHOW_INSERT_TOOLBAR,inputMethod:e});o=Object(c.a)(t,o,{action:l.a.INVOKED,actionSubject:l.b.TYPEAHEAD,actionSubjectId:l.c.TYPEAHEAD_LINK,attributes:{inputMethod:e},eventType:l.d.UI}),n(o)}return!0}}function C(){return function(e,t){return t&&t(e.tr.setMeta(i.d,{type:i.b.HIDE_TOOLBAR})),!0}}},"8J+t":function(e,t,n){"use strict";var o=n("Czhu"),r=n("ERkP"),i=n.n(r),a=n("fN3Q"),s=n.n(a),c=n("I9T1"),l=n("ehfC"),d=n("RNvQ"),u=n.n(d),p=n("H29T"),h=n("xV3C"),f=n("pL3m"),m=n("zitS"),b=n("+1K0"),g=n("OYpl"),v=n("/0Vt"),y=n("xuWu"),O=n("qeFW"),E=n("UZGJ"),w=n("I1dd"),C=n("QsAB"),T=n.n(C),S=n("cU7i"),k=n("41ZG"),x=n("4FMG");class A extends r.PureComponent{constructor(){super(...arguments),this.handleInsertMention=()=>!!this.props.editorView&&(Object(k.a)(x.e.TOOLBAR)(this.props.editorView.state,this.props.editorView.dispatch),!0)}render(){return i.a.createElement(S.a,{spacing:"none",onClick:this.handleInsertMention,disabled:this.props.isDisabled,title:"Mention @",iconBefore:i.a.createElement(T.a,{label:"Mention"})})}}var j=n("gyAA"),I=n("irWM"),M=n("kvU/"),N=n("DhWB");class R extends r.PureComponent{constructor(e){super(e),this.renderWithProvider=e=>{const{accessLevel:t,eventHandlers:n,id:o,text:r}=this.props,{mentionProvider:a}=e,s={};return["onClick","onMouseEnter","onMouseLeave"].forEach(e=>{s[e]=n&&n[e]||(()=>{})}),i.a.createElement(I.a,Object.assign({id:o,text:r,accessLevel:t,mentionProvider:a},s))},this.providerFactory=e.providers||new M.a}componentWillUnmount(){this.props.providers||this.providerFactory.destroy()}render(){return i.a.createElement(N.a,{providers:["mentionProvider","profilecardProvider"],providerFactory:this.providerFactory,renderNode:this.renderWithProvider})}}R.displayName="Mention";var P=n("IkHm"),L=n("Ejnt");class D extends P.a{createDomRef(){return this.reactComponentProps.options&&this.reactComponentProps.options.useInlineWrapper?Object(L.a)():super.createDomRef()}render(e){const{providerFactory:t,options:n}=e,{id:o,text:r,accessLevel:a}=this.node.attrs;return i.a.createElement(L.b,{useInlineWrapper:n&&n.useInlineWrapper},i.a.createElement(R,{id:o,text:r,accessLevel:a,providers:t}),n&&n.allowZeroWidthSpaceAfter&&j.a)}}function _(e,t,n,o){return(r,i,a)=>new D(r,i,a,e,t,{providerFactory:n,options:o}).init()}var B=n("hu6Q"),$=n("MjPE"),z=n("KjAf"),F=n("Rljp");const U=(e,t,n,r,i={})=>({action:t,actionSubject:e,eventType:n,attributes:Object(o.a)({packageName:z.a,packageVersion:z.b,componentName:"mention",sessionId:r},i)}),H={queryLength:0,spaceInQuery:!1},W=e=>e?{queryLength:e.length,spaceInQuery:-1!==e.indexOf(" ")}:H,V=(e,t)=>{if(e){const n=e.findIndex(e=>e.id===t.id);return-1===n?void 0:n}},K=e=>"selected"===e;var q=n("tVIO"),G=n("Pxjv"),Y=n("5FKe"),X=n("4AGm"),J=n("yKQC");n.d(t,"b",(function(){return ie}));const Z=[];const Q=function(e){const t=new Map;return{call:function(n){const o=t.get(n.id);if(o)return o;const r=e(n);return t.set(n.id,r),r},clear:t.clear.bind(t)}}(e=>({title:e.id,render:({isSelected:t,onClick:n,onHover:o})=>i.a.createElement(g.a,{mention:e,selected:t,onMouseEnter:o,onSelection:n}),mention:e}));t.a=e=>{let t=s()();const n=n=>{e&&e.createAnalyticsEvent&&(n.attributes&&!n.attributes.sessionId&&(n.attributes.sessionId=t),e.createAnalyticsEvent(n).fire(p.a))};let r=!1,a="";const d=u()(n,200);return{name:"mention",nodes:()=>[{name:"mention",node:v.a}],pmPlugins:()=>[{name:"mention",plugin:({providerFactory:t,dispatch:r,portalProviderAPI:i,eventDispatcher:a})=>function(e,t,n,r,i,a){let s;const c=(e,t,n)=>{e===f.c&&i(Object(f.e)(t,n))};return new l.Plugin({key:ie,state:{init:()=>({}),apply(t,n){const{action:r,params:i}=t.getMeta(ie)||{action:null,params:null};let a=n;switch(r){case ee:return a=Object(o.a)(Object(o.a)({},n),{},{mentionProvider:i.provider}),e(ie,a),a;case te:return a=Object(o.a)(Object(o.a)({},n),{},{mentions:i.results}),e(ie,a),a;case ne:return a=Object(o.a)(Object(o.a)({},n),{},{contextIdentifierProvider:i.context}),e(ie,a),a}return a}},props:{nodeViews:{mention:_(n,r,t,a)}},view(e){const n=(t,n)=>{switch(t){case"mentionProvider":if(!n)return oe(void 0)(e.state,e.dispatch);n.then(t=>{s&&s.unsubscribe("mentionPlugin"),s=t,oe(t)(e.state,e.dispatch),t.subscribe("mentionPlugin",(t,n,o)=>{var r;(r=t,(e,t)=>(t&&t(e.tr.setMeta(ie,{action:te,params:{results:r}})),!0))(e.state,e.dispatch);let a=0,s=null,c=null;Object(F.b)(o)?(a=o&&o.teamMentionDuration,s=null,c=t.map(e=>Object(F.c)(e.userType)?{teamId:e.id,includesYou:e.context.includesYou,memberCount:e.context.memberCount}:null).filter(e=>!!e)):(a=o&&o.duration,c=null,s=t.map(e=>e.id));const l=((e,t,n,o)=>{const{queryLength:r,spaceInQuery:i}=W(n);return{action:"rendered",actionSubject:t?"mentionTypeahead":"teamMentionTypeahead",eventType:B.b,attributes:{packageName:z.a,packageVersion:z.b,componentName:"mention",duration:e,userIds:t,teams:o,queryLength:r,spaceInQuery:i}}})(a,s,n||"",c);i(l)},void 0,void 0,void 0,c)}).catch(()=>oe(void 0)(e.state,e.dispatch));break;case"contextIdentifierProvider":if(!n)return re(void 0)(e.state,e.dispatch);n.then(t=>{re(t)(e.state,e.dispatch)})}};return t.subscribe("mentionProvider",n),t.subscribe("contextIdentifierProvider",n),{destroy(){t&&(t.unsubscribe("mentionProvider",n),t.unsubscribe("contextIdentifierProvider",n)),s&&s.unsubscribe("mentionPlugin")}}}})}(r,t,i,a,n,e)}],secondaryToolbarComponent:({editorView:e,disabled:t})=>i.a.createElement(y.a,{editorView:e,plugins:{typeAheadState:O.a,mentionState:ie},render:({typeAheadState:n=Object(E.a)(),mentionState:o={}})=>o.mentionProvider?i.a.createElement(A,{editorView:e,isDisabled:t||!n.isAllowed}):null}),pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"mention",title:e(X.a.mention),description:e(X.a.mentionDescription),keywords:["team","user"],priority:400,keyshortcut:"@",icon:()=>i.a.createElement(Y.o,{label:e(X.a.mention)}),action(e,t){const n=t.schema.mark("typeAheadQuery",{trigger:"@"}),o=e(t.schema.text("@",[n]));return Object(q.a)(t,o,{action:x.a.INVOKED,actionSubject:x.b.TYPEAHEAD,actionSubjectId:x.c.TYPEAHEAD_MENTION,attributes:{inputMethod:x.e.QUICK_INSERT},eventType:x.d.UI})}}],typeAhead:{trigger:"@",customRegex:"\\(?(@)",getHighlight:e=>{const t=ae(e).mentionProvider;if(t){const e=t;if(se(e)&&e.mentionTypeaheadHighlightEnabled())return i.a.createElement(m.a,{createTeamLink:e.mentionTypeaheadCreateTeamPath(),onClose:()=>b.a.registerClosed()})}return null},getItems(e,s,c,{prevActive:l,queryChanged:u},p,h){l||!u||p.getMeta(G.a)||(Q.clear(),h(J.a,{payload:{action:x.a.INVOKED,actionSubject:x.b.TYPEAHEAD,actionSubjectId:x.c.TYPEAHEAD_MENTION,attributes:{inputMethod:x.e.KEYBOARD},eventType:x.d.UI}}));const f=ae(s),m=!l&&u?Z:f.mentions||Z,b=Object(o.a)(Object(o.a)({},f.contextIdentifierProvider),{},{sessionId:t});u&&f.mentionProvider&&(r=!0,f.mentionProvider.filter(e||"",b));const g=m.map(e=>Q.call(e));if(f.mentionProvider&&e&&m.length<=2){const{shouldEnableInvite:o,userRole:s}=f.mentionProvider;if(r&&(d(((e,t,n,o)=>{const{containerId:r,objectId:i,childObjectId:a}=n||{};return U("feature","exposed",B.b,t,{flagKey:"confluence.frontend.invite.from.mention",value:e,containerId:r,objectId:i,childObjectId:a,userRole:o})})(!!o,t,f.contextIdentifierProvider,s)),r=!1),o){m.length>0&&(a=e);return e.slice(a.length).indexOf(" ")>-1?g:[...g,{title:w.a.id,render:({isSelected:e,onClick:o,onHover:r})=>i.a.createElement(w.b,{productName:f.mentionProvider?f.mentionProvider.productName:void 0,selected:e,onMount:()=>{n(((e,t,n)=>{const{containerId:o,objectId:r,childObjectId:i}=t||{};return U("inviteItem","viewed",B.c,e,{containerId:o,objectId:r,childObjectId:i,userRole:n})})(t,f.contextIdentifierProvider,s))},onMouseEnter:r,onSelection:o,userRole:s}),mention:w.a}]}}return g},selectItem(r,i,l,{mode:d}){a="";const u=e&&e.sanitizePrivateContent,p=e&&e.mentionInsertDisplayName,{schema:f}=r,m=ae(r),{mentionProvider:g}=m,{id:v,name:y,nickname:E,accessLevel:w,userType:C}=i.mention,T=E&&E.startsWith("@")?E.slice(1):E,S=p||!T?y:T,k=O.a.getState(r),x=Object(o.a)(Object(o.a)({},m.contextIdentifierProvider),{},{sessionId:t});g&&!Object(F.a)(i.mention)&&g.recordMentionSelection(i.mention,x);const A=k.queryStarted?Date.now()-k.queryStarted:0;if(g&&g.shouldEnableInvite&&Object(F.a)(i.mention))return n(((e,t,n,o,r,i,a,s)=>{const{queryLength:c,spaceInQuery:l}=W(i),{containerId:d,objectId:u,childObjectId:p}=a||{};return U("inviteItem",K(r)?"clicked":"pressed",B.e,o,{duration:e,queryLength:c,spaceInQuery:l,upKeyCount:t,downKeyCount:n,containerId:d,objectId:u,childObjectId:p,userRole:s})})(A,k.upKeyCount,k.downKeyCount,t,d,k.query||"",m.contextIdentifierProvider,g.userRole)),g.onInviteItemClick&&g.onInviteItemClick("mention"),r.tr;if(n(((e,t,n,o,r,i,a,s,c)=>{const{queryLength:l,spaceInQuery:d}=W(s);let u=U("mentionTypeahead",K(r)?"clicked":"pressed",B.e,o,{duration:e,position:V(a,i),keyboardKey:K(r)?void 0:r,queryLength:l,spaceInQuery:d,isSpecial:Object($.h)(i),accessLevel:i.accessLevel||"",userType:i.userType,userId:i.id,upKeyCount:t,downKeyCount:n,memberCount:Object(F.c)(i.userType)&&i.context?i.context.memberCount:null,includesYou:Object(F.c)(i.userType)&&i.context?i.context.includesYou:null});return c&&(u.containerId=c.containerId||void 0,u.objectId=c.objectId||void 0,u.childObjectId=c.childObjectId||void 0),u})(A,k.upKeyCount,k.downKeyCount,t,d,i.mention,m.mentions,k.query||"",m.contextIdentifierProvider)),t=s()(),g&&Object(F.c)(C))return b.a.registerTeamMention(),l(function(e,t,n,o){const{nodes:r,marks:i}=e,{name:a,id:s,accessLevel:l,context:d}=t,u=`${window.location.origin}/people/team/${s}`,p=d&&d.teamLink?d.teamLink:u,f=e.text(a,[i.link.create({href:p})]),m=e.text("("),b=e.text(")"),g=e.text(" "),v=[f,g,m],y=d&&d.members?d.members:[];return y.forEach((e,t)=>{const{name:i,id:a}=e,s=o?"":"@"+i;o&&Object(h.d)(n)&&n.cacheMentionName(a,i);const c=r.mention.createChecked({text:s,id:e.id,accessLevel:l,userType:"DEFAULT"});v.push(c),t!==y.length-1&&v.push(g)}),v.push(b),c.Fragment.fromArray(v)}(f,i.mention,g,u));const j=u?"":"@"+S;return u&&Object(h.d)(g)&&g.cacheMentionName(v,S),l(f.nodes.mention.createChecked({text:j,id:v,accessLevel:w,userType:"DEFAULT"===C?null:C}))},dismiss(e){a="";const o=O.a.getState(e),r=o.queryStarted?Date.now()-o.queryStarted:0;n(((e,t,n,o,r)=>{const{queryLength:i,spaceInQuery:a}=W(r);return U("mentionTypeahead","cancelled",B.e,o,{duration:e,downKeyCount:n,upKeyCount:t,queryLength:i,spaceInQuery:a})})(r,o.upKeyCount,o.downKeyCount,t,o.query||"")),t=s()()}}}}};const ee="SET_PROVIDER",te="SET_RESULTS",ne="SET_CONTEXT",oe=e=>(t,n)=>(n&&n(t.tr.setMeta(ie,{action:ee,params:{provider:e}})),!0),re=e=>(t,n)=>(n&&n(t.tr.setMeta(ie,{action:ne,params:{context:e}})),!0),ie=new l.PluginKey("mentionPlugin");function ae(e){return ie.getState(e)}const se=e=>!(!e.mentionTypeaheadHighlightEnabled||!e.mentionTypeaheadCreateTeamPath)},"8vqB":function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"m",(function(){return h})),n.d(t,"l",(function(){return f})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return v}));var o=n("Nla+");const r={name:"normal",title:o.a.normal,nodeName:"paragraph",tagName:"p"},i={name:"heading1",title:o.a.heading1,nodeName:"heading",tagName:"h1",level:1},a={name:"heading2",title:o.a.heading2,nodeName:"heading",tagName:"h2",level:2},s={name:"heading3",title:o.a.heading3,nodeName:"heading",tagName:"h3",level:3},c={name:"heading4",title:o.a.heading4,nodeName:"heading",tagName:"h4",level:4},l={name:"heading5",title:o.a.heading5,nodeName:"heading",tagName:"h5",level:5},d={name:"heading6",title:o.a.heading6,nodeName:"heading",tagName:"h6",level:6},u={name:"blockquote",title:o.a.blockquote,nodeName:"blockquote"},p={name:"codeblock",title:o.a.codeblock,nodeName:"codeBlock"},h={name:"panel",title:o.a.infoPanel,nodeName:"panel"},f={name:"other",title:o.a.other,nodeName:""},m=[r,i,a,s,c,l,d],b=[u,p,h],g=(m.concat(b),m.reduce((e,t)=>(t.level&&"heading"===t.nodeName&&(e[t.level]=t),e),{})),v=m.reduce((e,t)=>(t.level&&"heading"===t.nodeName&&(e[t.name]=t),e),{})},"98cI":function(e,t,n){"use strict";var o=n("T1Ll").isSpace;function r(e,t){var n=e.bMarks[t]+e.blkIndent,o=e.eMarks[t];return e.src.substr(n,o-n)}function i(e){var t,n=[],o=0,r=e.length,i=0,a=0,s=!1,c=0;for(t=e.charCodeAt(o);o<r;)96===t?s?(s=!1,c=o):i%2==0&&(s=!0,c=o):124!==t||i%2!=0||s||(n.push(e.substring(a,o)),a=o+1),92===t?i++:i=0,++o===r&&s&&(s=!1,o=c+1),t=e.charCodeAt(o);return n.push(e.substring(a)),n}e.exports=function(e,t,n,a){var s,c,l,d,u,p,h,f,m,b,g,v;if(t+2>n)return!1;if(u=t+1,e.sCount[u]<e.blkIndent)return!1;if(e.sCount[u]-e.blkIndent>=4)return!1;if((l=e.bMarks[u]+e.tShift[u])>=e.eMarks[u])return!1;if(124!==(s=e.src.charCodeAt(l++))&&45!==s&&58!==s)return!1;for(;l<e.eMarks[u];){if(124!==(s=e.src.charCodeAt(l))&&45!==s&&58!==s&&!o(s))return!1;l++}for(p=(c=r(e,t+1)).split("|"),m=[],d=0;d<p.length;d++){if(!(b=p[d].trim())){if(0===d||d===p.length-1)continue;return!1}if(!/^:?-+:?$/.test(b))return!1;58===b.charCodeAt(b.length-1)?m.push(58===b.charCodeAt(0)?"center":"right"):58===b.charCodeAt(0)?m.push("left"):m.push("")}if(-1===(c=r(e,t).trim()).indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;if((h=(p=i(c.replace(/^\||\|$/g,""))).length)>m.length)return!1;if(a)return!0;for((f=e.push("table_open","table",1)).map=g=[t,0],(f=e.push("thead_open","thead",1)).map=[t,t+1],(f=e.push("tr_open","tr",1)).map=[t,t+1],d=0;d<p.length;d++)(f=e.push("th_open","th",1)).map=[t,t+1],m[d]&&(f.attrs=[["style","text-align:"+m[d]]]),(f=e.push("inline","",0)).content=p[d].trim(),f.map=[t,t+1],f.children=[],f=e.push("th_close","th",-1);for(f=e.push("tr_close","tr",-1),f=e.push("thead_close","thead",-1),(f=e.push("tbody_open","tbody",1)).map=v=[t+2,0],u=t+2;u<n&&!(e.sCount[u]<e.blkIndent)&&-1!==(c=r(e,u).trim()).indexOf("|")&&!(e.sCount[u]-e.blkIndent>=4);u++){for(p=i(c.replace(/^\||\|$/g,"")),f=e.push("tr_open","tr",1),d=0;d<h;d++)f=e.push("td_open","td",1),m[d]&&(f.attrs=[["style","text-align:"+m[d]]]),(f=e.push("inline","",0)).content=p[d]?p[d].trim():"",f.children=[],f=e.push("td_close","td",-1);f=e.push("tr_close","tr",-1)}return f=e.push("tbody_close","tbody",-1),f=e.push("table_close","table",-1),g[1]=v[1]=u,e.line=u,!0}},"9RRP":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("ERkP"),r=n.n(o),i=n("aWzz"),a=n.n(i),s=n("SHkB");class c extends r.a.Component{constructor(e){super(e),this.editorActions=e.editorActions||new s.a}getChildContext(){return{editorActions:this.editorActions}}render(){return r.a.Children.only(this.props.children)}}c.childContextTypes={editorActions:a.a.object}},"9Vuo":function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("O65l"),a=n.n(i),s=n("KsTJ"),c=n("lRcl");const l=s.default.div`
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  width: 100%;
`,d=a()({id:"dMPBA",loader:()=>Promise.all([n.e("vendors~4134d62c"),n.e("@atlaskit-internal-editor-element-browser~4134d62c")]).then(n.bind(null,"7RKr")),loading:()=>r.a.createElement(l,null,r.a.createElement(c.a,{size:"medium"}))});t.a=d},"9hj9":function(e,t,n){"use strict";var o=n("czJC"),r=n("UdmJ");const i=(e,t,n,o)=>{e.forEachCell((e,r)=>{t.nodesBetween(r,r+e.nodeSize,n,o)})};var a=n("4FMG"),s=n("tVIO");n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u}));const c=["heading","codeBlock","blockquote"],l=["em","code","strike","strong","underline","textColor","subsup"],d={em:a.c.FORMAT_ITALIC,code:a.c.FORMAT_CODE,strike:a.c.FORMAT_STRIKE,strong:a.c.FORMAT_STRONG,underline:a.c.FORMAT_UNDERLINE,textColor:a.c.FORMAT_COLOR,subsup:"subsup"};function u(e){return function(e){return function(t,n){const{tr:r}=t,u=[];return l.forEach(e=>{const{from:n,to:a}=r.selection,s=t.schema.marks[e];s&&(r.selection instanceof o.a?i(r.selection,r.doc,(n,o)=>n.type!==t.schema.nodes.tableCell&&n.type!==t.schema.nodes.tableHeader||(r.doc.rangeHasMark(o,o+n.nodeSize,s)&&(u.push(d[e]),r.removeMark(o,o+n.nodeSize,s)),!1)):r.doc.rangeHasMark(n,a,s)&&(u.push(d[e]),r.removeMark(n,a,s)))}),c.forEach(e=>{const n=t.schema.nodes[e],{$from:a,$to:s}=r.selection;r.selection instanceof o.a?i(r.selection,r.doc,p(t,r,n,e,u)):r.doc.nodesBetween(a.pos,s.pos,p(t,r,n,e,u))}),r.setStoredMarks([]),u.length&&e&&Object(s.a)(t,r,{action:a.a.FORMATTED,eventType:a.d.TRACK,actionSubject:a.b.TEXT,actionSubjectId:a.c.FORMAT_CLEAR,attributes:{inputMethod:e,formattingCleared:u}}),n&&n(r),!0}}(e)}function p(e,t,n,o,i){return function(a,s){if(a.type===n){if(n.isTextblock)return t.setNodeMarkup(s,e.schema.nodes.paragraph),i.push(o),!1;{let e=t.doc.resolve(s+1),n=t.doc.resolve(s+a.nodeSize-1);const c=e.blockRange(n);if(c){const e=Object(r.liftTarget)(c);(e||0===e)&&(i.push(o),t.lift(c,e))}}}return!0}}},"A+cg":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("ERkP")),r=i(n("ZUNO"));function i(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var s=function(e){return o.default.createElement(r.default,a({dangerouslySetGlyph:'<svg width="16" height="16" viewBox="0 0 16 16" focusable="false" role="presentation"><path fill="#2684FF" fill-rule="evenodd" d="M2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm1 4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H3zm1 2v4h8V6H4z"/></svg>'},e,{size:"small"}))};s.displayName="Issue16Icon";var c=s;t.default=c},A0wU:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("Pmn2");class r{constructor(e,t,n,r=o.d,i){this.config=t,this.pickerConfig=n,this.mediaPickerFactoryClass=r,this.onDragListeners=[],this.onStartListeners=[],this.eventListeners={},this.handleUploadPreviewUpdate=e=>{const{file:t,preview:n}=e,r=this.erroredFiles.has(t.id),{dimensions:i,scaleFactor:a}=Object(o.e)(n)?n:{dimensions:void 0,scaleFactor:void 0},s={id:t.id,fileName:t.name,fileSize:t.size,fileMimeType:t.type,dimensions:i,scaleFactor:a,status:r?"error":void 0};this.eventListeners[t.id]=[],this.onStartListeners.forEach(e=>e(s,e=>this.subscribeStateChanged(t,e),this.analyticsName||this.pickerType))},this.subscribeStateChanged=(e,t)=>{const n=this.eventListeners[e.id];n&&n.push(t)},this.handleUploadError=({error:e,fileId:t})=>{const n=this.eventListeners[t];this.erroredFiles.add(t),n&&(n.forEach(n=>n({id:t,status:"error",error:e&&{description:e.description,name:e.name}})),delete this.eventListeners[t])},this.handleMobileUploadEnd=e=>{const{file:t}=e,n=this.eventListeners[t.id];n&&n.forEach(e=>e({id:t.id,status:"mobile-upload-end",fileMimeType:t.type,collection:t.collectionName,publicId:t.publicId}))},this.handleReady=e=>{const{file:t}=e,n=this.eventListeners[t.id];n&&(n.forEach(e=>e({id:t.id,status:"ready"})),delete this.eventListeners[t.id])},this.pickerType=e,this.errorReporter=t.errorReporter,this.analyticsName=i,this.erroredFiles=new Set}async init(){let e;return"customMediaPicker"===this.pickerType?e=this.picker=this.pickerConfig:"popup"===this.pickerType&&(e=this.picker=await this.mediaPickerFactoryClass(this.config.mediaClientConfig,this.pickerConfig)),e?(e.on("upload-preview-update",this.handleUploadPreviewUpdate),e.on("upload-end",this.handleReady),e.on("upload-error",this.handleUploadError),e.on("mobile-upload-end",this.handleMobileUploadEnd),this):this}get type(){return this.pickerType}get mediaPicker(){return this.picker}destroy(){const{picker:e}=this;if(e){e.removeAllListeners("upload-preview-update"),e.removeAllListeners("upload-end"),e.removeAllListeners("upload-error"),this.onStartListeners=[],this.onDragListeners=[];try{"popup"===this.pickerType&&e.teardown()}catch(t){this.errorReporter.captureException(t)}}}setUploadParams(e){this.picker&&this.picker.setUploadParams(e)}onClose(e){const{picker:t}=this;if("popup"===this.pickerType){const n=t;return n.on("closed",e),()=>n.off("closed",e)}return()=>{}}show(){if("popup"===this.pickerType)try{this.picker.show()}catch(e){this.errorReporter.captureException(e)}}hide(){"popup"===this.pickerType&&this.picker.hide()}onNewMedia(e){this.onStartListeners.push(e)}onDrag(e){this.onDragListeners.push(e)}}},ACnq:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return b})),n.d(t,"e",(function(){return g})),n.d(t,"i",(function(){return v})),n.d(t,"c",(function(){return T})),n.d(t,"h",(function(){return k})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return A})),n.d(t,"a",(function(){return I})),n.d(t,"l",(function(){return M})),n.d(t,"m",(function(){return P})),n.d(t,"b",(function(){return L}));var o=n("DA0Z"),r=(n("I9T1"),n("ehfC")),i=n("m23B"),a=n("rEY+"),s=n("CP8u"),c=n("eObz"),l=n("DBvH"),d=n("dzF+"),u=n("mQXi"),p=n("eGvA"),h=n("Am/7");const f=e=>!(!e||"external"!==e.type||!Object(h.c)(e.url)),m=e=>k(e)||w(e)||v(e)||y(e),b=e=>{const{node:t}=e.selection;return t&&t.type!==e.schema.nodes.media&&t.isBlock},g=e=>{const{node:t}=e.selection;return t&&t.type===e.schema.nodes.mediaSingle},v=e=>{if(Object(u.a)(e))return C(e,e.selection.$from)},y=e=>{const{selection:t}=e;if(t instanceof p.a){const t=e.selection.$from,n=e.schema.nodes.mediaGroup;return O(t,n)||E(t,n)}},O=(e,t)=>{if(e.nodeBefore&&e.nodeBefore.type===t)return e.pos-e.nodeBefore.nodeSize+1},E=(e,t)=>{if(e.nodeAfter&&e.nodeAfter.type===t)return e.pos+1},w=e=>{if(Object(u.c)(e))return S(e,e.selection.$to)},C=(e,t)=>{let n,o;if(b(e)?(n=t.pos,o=t.nodeBefore):(n=Object(u.f)(t)-1,o=e.doc.resolve(n).nodeBefore),o&&o.type===e.schema.nodes.mediaGroup)return n-o.nodeSize+1},T=e=>{const{$from:t}=e.selection;return t.parent.type===e.schema.nodes.paragraph&&Object(u.a)(e)&&Object(u.c)(e)},S=(e,t,n=!0)=>{let o,r;if(b(e)?(o=t.pos,r=t.nodeAfter):(o=Object(u.e)(t),r=e.doc.nodeAt(o)),r&&r.type===e.schema.nodes.mediaGroup)return n?o+1:o+r.nodeSize-1},k=(e,t,n=!1)=>{const{$from:o}=e.selection;if((t=t||o).parent.type===e.schema.nodes.mediaGroup)return n?Object(u.f)(t):Object(u.e)(t)-1};const x=(e,t,n)=>{const{id:o}=t.attrs,{state:a}=e,{tr:c,selection:l,doc:d}=a,p=n();c.deleteRange(p,p+t.nodeSize),Object(s.r)(o)&&c.setMeta("addToHistory",!1);const h=d.resolve(p),{nodeBefore:f,parent:m}=h,b=h.index()===m.childCount-1;if(l.from===p&&!b&&!Object(u.b)(a)&&f&&"media"===f.type.name){const e=Object(i.findPositionOfNodeBefore)(c.selection);e&&c.setSelection(r.NodeSelection.create(c.doc,e))}e.dispatch(c)},A=e=>{const{selection:t}=e.state;return t instanceof r.NodeSelection&&t.node.type===e.state.schema.nodes.media&&(Object(o.e)(e.state,e.dispatch),t.$to.nodeAfter?(Object(o.g)(e.state,e.dispatch),Object(a.f)(!1)(e.state,e.dispatch)):Object(a.d)(e.state,e.dispatch),!0)},j=e=>e.length>1&&"_"===e[0]&&"_"===e[1],I=(e,t)=>{Object.keys(t.attrs).filter(j).forEach(n=>{const o=n.substring(2),r=e[o];void 0!==r&&(t.attrs[n]=r)})},M=(e,t)=>{const{mediaGroup:n,mediaSingle:o,media:r}=t.nodes;return Object(c.e)(e,(e,t)=>t||e.type!==r?e:o&&(Object(d.a)(e.attrs.__fileMimeType)||"external"===e.attrs.type)?o.createChecked({},e):n.createChecked({},[e]))},N=e=>"0"===e.style.opacity||"none"===e.style.display||"hidden"===e.style.visibility,R=["DIV","TD"];const P=e=>{const t=(new DOMParser).parseFromString(e,"text/html").body,n=t.querySelector('b[id^="docs-internal-guid-"]');n&&Object(l.g)(t,n);const o=t.querySelectorAll("img");return o.length?(o.forEach(e=>{const n=e.parentElement;if(!n)return;if(N(n)||N(e))return void n.removeChild(e);if(n instanceof HTMLDivElement)return;const o=Object(l.h)(n,e=>e.parentElement===t||function(e){return!!e&&-1!==R.indexOf(e.tagName)}(e.parentElement));o&&o.parentElement&&(o.parentElement.insertBefore(e,o.nextElementSibling||o),n.innerText=n.innerText.trim(),Object(l.f)(n))}),t.lastElementChild&&"BR"===t.lastElementChild.tagName&&t.removeChild(t.lastElementChild),t.innerHTML):e},L=e=>{if(!g(e))return null;const t=e.tr,n=t.selection.from+1,o=t.doc.nodeAt(n);return o&&o.type===e.schema.nodes.media?o:null}},AJnL:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("eDcA"),a=n.n(i),s=n("KsTJ"),c=n("w301"),l=n("BMbf"),d=n("3IV/");const u=s.default.span`
  flex: 0 0 16px;
  height: 16px;
  width: 16px;
  color: ${e=>e.showPlaceholder?d.N100:Object(c.a)({light:d.G300,dark:d.G200})};
  margin: 4px ${1.5*Object(l.h)()}px 0 0;

  > span {
    margin: -8px;
  }
`;var p=n("jlYC");n.d(t,"a",(function(){return h}));class h extends o.PureComponent{render(){const{appearance:e,children:t,contentRef:n,placeholder:o,showPlaceholder:i,dataAttributes:s}=this.props,c=r.a.createElement(u,{showPlaceholder:i},r.a.createElement(a.a,{label:"Decision",size:"large"}));return r.a.createElement(p.a,{appearance:e,contentRef:n,icon:c,placeholder:o,showPlaceholder:i,itemType:"DECISION",dataAttributes:s},t)}}h.defaultProps={appearance:"inline"}},ALnk:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var o=n("hj8b"),r=n("ehfC"),i="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function a(e){var t,n,o,r,a=e.split(/-(?!$)/),s=a[a.length-1];"Space"==s&&(s=" ");for(var c=0;c<a.length-1;c++){var l=a[c];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))o=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);i?r=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),r&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function s(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function c(e){return new r.Plugin({props:{handleKeyDown:l(e)}})}function l(e){var t=function(e){var t=Object.create(null);for(var n in e)t[a(n)]=e[n];return t}(e);return function(e,n){var r,i=Object(o.b)(n),a=1==i.length&&" "!=i,c=t[s(i,n,!a)];if(c&&c(e.state,e.dispatch,e))return!0;if(a&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(r=o.a[n.keyCode])&&r!=i){var l=t[s(r,n,!0)];if(l&&l(e.state,e.dispatch,e))return!0}else if(a&&n.shiftKey){var d=t[s(i,n,!0)];if(d&&d(e.state,e.dispatch,e))return!0}return!1}}},ANI8:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var o=n("jyPs"),r=n("KWMf");const i=e=>t=>{if(!Object(r.a)(t,"cell"))return!1;const n=o.b.get(t.$anchorCell.node(-1)),i=t.$anchorCell.start(-1),a=n.cellsInRect(e),s=n.cellsInRect(n.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i));for(let e=0,o=a.length;e<o;e++)if(-1===s.indexOf(a[e]))return!1;return!0},a=e=>t=>{if(Object(r.a)(t,"cell")){const n=o.b.get(t.$anchorCell.node(-1));return i({left:e,right:e+1,top:0,bottom:n.height})(t)}return!1},s=e=>t=>{if(Object(r.a)(t,"cell")){const n=o.b.get(t.$anchorCell.node(-1));return i({left:0,right:n.width,top:e,bottom:e+1})(t)}return!1},c=e=>{if(Object(r.a)(e,"cell")){const t=o.b.get(e.$anchorCell.node(-1));return i({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1}},AXp1:function(e,t,n){"use strict";var o=n("T1Ll").isWhiteSpace,r=n("T1Ll").isPunctChar,i=n("T1Ll").isMdAsciiPunct,a=/['"]/,s=/['"]/g;function c(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}function l(e,t){var n,a,l,d,u,p,h,f,m,b,g,v,y,O,E,w,C,T,S,k,x;for(S=[],n=0;n<e.length;n++){for(a=e[n],h=e[n].level,C=S.length-1;C>=0&&!(S[C].level<=h);C--);if(S.length=C+1,"text"===a.type){u=0,p=(l=a.content).length;e:for(;u<p&&(s.lastIndex=u,d=s.exec(l));){if(E=w=!0,u=d.index+1,T="'"===d[0],m=32,d.index-1>=0)m=l.charCodeAt(d.index-1);else for(C=n-1;C>=0&&("softbreak"!==e[C].type&&"hardbreak"!==e[C].type);C--)if("text"===e[C].type){m=e[C].content.charCodeAt(e[C].content.length-1);break}if(b=32,u<p)b=l.charCodeAt(u);else for(C=n+1;C<e.length&&("softbreak"!==e[C].type&&"hardbreak"!==e[C].type);C++)if("text"===e[C].type){b=e[C].content.charCodeAt(0);break}if(g=i(m)||r(String.fromCharCode(m)),v=i(b)||r(String.fromCharCode(b)),y=o(m),(O=o(b))?E=!1:v&&(y||g||(E=!1)),y?w=!1:g&&(O||v||(w=!1)),34===b&&'"'===d[0]&&m>=48&&m<=57&&(w=E=!1),E&&w&&(E=!1,w=v),E||w){if(w)for(C=S.length-1;C>=0&&(f=S[C],!(S[C].level<h));C--)if(f.single===T&&S[C].level===h){f=S[C],T?(k=t.md.options.quotes[2],x=t.md.options.quotes[3]):(k=t.md.options.quotes[0],x=t.md.options.quotes[1]),a.content=c(a.content,d.index,x),e[f.token].content=c(e[f.token].content,f.pos,k),u+=x.length-1,f.token===n&&(u+=k.length-1),p=(l=a.content).length,S.length=C;continue e}E?S.push({token:n,pos:d.index,single:T,level:h}):w&&T&&(a.content=c(a.content,d.index,""))}else T&&(a.content=c(a.content,d.index,""))}}}}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&a.test(e.tokens[t].content)&&l(e.tokens[t].children,e)}},AY2A:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("I9T1"),r=n("UdmJ");class i extends r.Step{constructor(e,t,n){super(),this.prev=t,this.next=n,this.pos=e}invert(){return new i(this.pos,this.next,this.prev)}apply(e){return r.StepResult.ok(e)}map(){return null}getMap(){return new r.StepMap([0,0,0])}toJSON(){return{stepType:"atlaskit-table-sorting-ordering"}}static fromJSON(){return new r.ReplaceStep(0,0,o.Slice.empty)}}r.Step.jsonID("atlaskit-table-sorting-ordering",i)},AcaO:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c}));var o=n("r8pW"),r=n("ehfC");function i(e,t=!1){const n=e.handler;return e.handler=(e,o,i,a)=>{const s=t?l(e,i,a):d(e,i,a);if(!e.selection.$from.parent.type.spec.code&&e.selection instanceof r.TextSelection&&!s)return n(e,o,i,a)},e}function a(e,{rules:t}){return Object(o.b)({rules:t})}function s(e,t,n=!1){return i(new o.a(e,t),n)}const c="",l=(e,t,n)=>{const{doc:o,schema:{marks:r}}=e;let i=!1;const a=e=>e.type===r.code||e.type===r.link||e.type===r.typeAheadQuery;return o.nodesBetween(t,n,e=>{i=i||e.marks.filter(a).length>0}),i},d=(e,t,n)=>{const{doc:o,schema:{marks:r}}=e;let i=!1;const a=e=>e.type===r.code;return o.nodesBetween(t,n,e=>{i=i||e.marks.filter(a).length>0}),i}},"Am/7":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return u}));var o=n("Czhu"),r=n("4CAG"),i=n.n(r);const a=e=>e.indexOf("media-blob-url=true")>-1,s=(e,t)=>{const n=e.get(t);return"string"!=typeof n||isNaN(parseInt(n))?void 0:parseInt(n)},c=(e,t)=>{const n=e.get(t);if(n)return decodeURIComponent(n)},l=e=>{const t=new URL(e).hash.replace("#",""),n=new i.a(t),o=n.get("id"),r=n.get("contextId");if(o&&r)return{id:o,contextId:r,collection:c(n,"collection"),alt:c(n,"alt"),height:s(n,"height"),width:s(n,"width"),size:s(n,"size"),name:c(n,"name"),mimeType:c(n,"mimeType")}},d=e=>Object.keys(e).filter(t=>void 0!==e[t]&&null!==e[t]).map(t=>{const n=e[t];if(null!=n)return`${encodeURIComponent(t)}=${encodeURIComponent(n.toString())}`}).join("&"),u=(e,t)=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return e;const n={"media-blob-url":"true"},r=Object(o.a)(Object(o.a)({},n),t);return`${e}#${d(r)}`}},AsbT:function(e,t,n){"use strict";e.exports=function(e,t,n){var o,r,i,a,s=-1,c=e.posMax,l=e.pos;for(e.pos=t+1,o=1;e.pos<c;){if(93===(i=e.src.charCodeAt(e.pos))&&0===--o){r=!0;break}if(a=e.pos,e.md.inline.skipToken(e),91===i)if(a===e.pos-1)o++;else if(n)return e.pos=l,-1}return r&&(s=e.pos),e.pos=l,s}},Av0W:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var o=n("KsTJ"),r=n("3IV/"),i=n("qPpp");const a=12,s=o.css`
  .gridParent {
    width: calc(100% + ${2*a}px);
    margin-left: -${a}px;
    margin-right: -${a}px;
    transform: scale(1);
    z-index: ${i.r};
  }

  .gridContainer {
    position: fixed;
    height: 100vh;
    width: 100%;
    pointer-events: none;
  }

  .gridLine {
    border-left: 1px solid ${r.N30A};
    display: inline-block;
    box-sizing: border-box;
    height: 100%;
    margin-left: -1px;

    transition: border-color 0.15s linear;
    z-index: 0;
  }

  .highlight {
    border-left: 1px solid ${r.B200};
  }
`},AyqE:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"j",(function(){return f})),n.d(t,"p",(function(){return m})),n.d(t,"o",(function(){return b})),n.d(t,"m",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"l",(function(){return y})),n.d(t,"k",(function(){return O})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return w})),n.d(t,"h",(function(){return C})),n.d(t,"i",(function(){return T}));var o=n("lyoF"),r=n("BMbf"),i=n("3IV/"),a=n("sjO7"),s=n("fCxE"),c=n("IGfZ");const l="emoji-picker-active",d="emoji-picker-disable",u=Object(o.a)({display:"flex",flexDirection:"column",justifyContent:"space-between",background:"white",border:a.c+" 1px solid",borderRadius:Object(r.c)()+"px",boxShadow:a.d,height:c.h+"px",width:c.i+"px",marginBottom:"8px",minWidth:c.i+"px"}),p=Object(o.a)({flex:"0 0 auto",backgroundColor:i.N30,$nest:{ul:{listStyle:"none",margin:"0 4px",padding:"3px 0",display:"flex",flexDirection:"row",justifyContent:"space-around"},li:{display:"inline-block",margin:0,padding:0,$nest:{button:{verticalAlign:"middle"}}},".emoji-picker-add-button":{color:i.N200,margin:"0 0 0 5px",verticalAlign:"middle"}}}),h=Object(o.a)({backgroundColor:"transparent",border:0,color:i.N100A,cursor:"pointer",margin:"2px 0",padding:0,transition:"color 0.2s ease",$nest:{"&::-moz-focus-inner":{border:"0 none",padding:0},["&."+l]:{color:i.B300,$nest:{"&:hover":{color:i.B300}}},"&:hover":{color:i.B100},["&."+d]:{color:i.N50,cursor:"default",$nest:{"&:hover":{color:i.N50}}},"&:focus":{outline:"0"}}}),f=Object(o.a)({display:"flex",flexDirection:"column",flex:"1 1 auto",height:"0"}),m=Object(o.a)({$nest:{"&:focus":{outline:"none"}}}),b="search-icon",g="input",v=Object(o.a)({boxSizing:"border-box",padding:"10px 10px 9px 10px",flex:"0 0 auto",$nest:{["."+b]:{opacity:.5},["."+g]:{background:"transparent",border:0,boxSizing:"border-box",color:"inherit",cursor:"inherit",fontSize:"14px",outline:"none",padding:"1px 0 2px 10px",width:"100%",$nest:{"&:invalid":{boxShadow:"none"},"&::-ms-clear":{display:"none"}}}}}),y=Object(o.a)({display:"flex",width:"100%",height:"150px",justifyContent:"center",alignItems:"center",$nest:{">div":{flex:"0 0 auto"}}}),O=Object(o.a)({marginLeft:"8px"}),E=Object(o.a)({boxSizing:"border-box",color:i.N900,fontSize:"14px",padding:"5px 8px",textTransform:"lowercase",$nest:{"&:first-letter":{textTransform:"uppercase"}}}),w=Object(o.a)({display:"inline-block",textAlign:"center",width:"40px",$nest:{["&>."+s.q]:{cursor:"pointer",padding:"8px",borderRadius:"5px",width:"24px",height:"24px",$nest:{"&>img":{position:"relative",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)",maxHeight:"24px",maxWidth:"24px",display:"block"},["&>."+s.u]:{height:"24px",width:"24px"}}},["&>."+s.y]:{padding:"0",margin:"7px",minWidth:"24px",maxWidth:"24px"}}}),C=(Object(o.a)({border:"2px dashed #ccc",borderRadius:Object(r.c)()+"px",backgroundColor:"transparent",width:"32px",height:"32px",padding:0,margin:"4px",verticalAlign:"middle",$nest:{"&:hover":{backgroundColor:a.a},"&:focus":{outline:"0"},span:{backgroundColor:"inherit"}}}),Object(o.a)({flex:"0 0 auto"})),T=Object(o.a)({borderTop:"2px solid "+i.N30A,boxShadow:a.b})},B3As:function(e,t,n){"use strict";var o,r=n("9dFV"),i=n("ehfC");!function(e){e.UPDATE="UPDATE"}(o||(o={}));var a=(e,t)=>{switch(t.type){case o.UPDATE:return{canUndo:t.canUndo,canRedo:t.canRedo}}return e},s=n("u5kr");const c=e=>{const t=(e=>e.plugins.find(e=>e.key===s.a))(e);if(t)return t.getState(e)};n.d(t,"b",(function(){return l}));const l=new i.PluginKey("historyPlugin"),d=()=>({canUndo:!1,canRedo:!1}),{createPluginState:u,getPluginState:p}=Object(r.a)(l,a);t.a=()=>({name:"history",pmPlugins:()=>[{name:"history",plugin:({dispatch:e})=>(e=>new i.Plugin({state:u(e,d),key:l,appendTransaction:(e,t,n)=>{if(e.find(e=>e.docChanged&&!1!==e.getMeta("addToHistory"))){const e=c(n);if(!e)return;const t=e.done.eventCount>0,r=e.undone.eventCount>0,{canUndo:i,canRedo:a}=p(n);if(t!==i||r!==a){const e={type:o.UPDATE,canUndo:t,canRedo:r};return n.tr.setMeta(l,e)}}}}))(e)}]})},B9lp:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("KsTJ"),a=n("PLaw"),s=n.n(a),c=n("uo6K"),l=n("koe5"),d=n("BMbf"),u=n("3IV/"),p=n("3GHw"),h=n("mQlO"),f=n("Nink"),m=n.n(f);const b=175,g=32,v=i.default.span`
  display: flex;
  flex: 1;
  padding: 8px;
`,y=i.default.div`
  min-width: ${b}px;
`,O=Object(d.h)(),E=Object(d.h)()/2,w={borderRadius:0,beforeItemSpacing:{compact:E},padding:{compact:{bottom:O,left:O,right:O,top:O}},height:{compact:g}};class C extends o.Component{render(){const{hide:e,dispatchCommand:t,items:n}=this.props;return r.a.createElement(i.ThemeProvider,{theme:{[p.e]:w}},r.a.createElement(y,null,n.filter(e=>!e.hidden).map((n,o)=>r.a.createElement(h.a,{key:o,isCompact:!0,elemBefore:this.renderSelected(n),onClick:()=>{t(n.onClick),e()},"data-testid":n.testId,isDisabled:n.disabled},n.title))))}renderSelected(e){const{selected:t}=e;if(void 0!==t)return t?r.a.createElement(m.a,{primaryColor:u.B400,size:"small",label:"test question"}):r.a.createElement(v,null)}}n.d(t,"a",(function(){return x}));const T=i.default.span`
  margin: 0px -4px;
`,S=i.default.div`
  display: flex;
`,k=({icon:e})=>r.a.createElement(S,null,e,r.a.createElement(T,null,r.a.createElement(s.a,{label:"Expand dropdown menu"})));class x extends o.Component{constructor(){super(...arguments),this.state={isOpen:!1},this.renderArrayOptions=e=>r.a.createElement(C,{hide:this.hide,dispatchCommand:this.props.dispatchCommand,items:e}),this.toggleOpen=()=>{this.setState({isOpen:!this.state.isOpen})},this.hide=()=>{this.setState({isOpen:!1})}}render(){const{isOpen:e}=this.state,{title:t,icon:n,options:o,dispatchCommand:i,mountPoint:a,boundariesElement:d,scrollableElement:u,hideExpandIcon:p,disabled:h,tooltip:f,buttonTestId:m}=this.props;let v;if(n){const o=p?n:r.a.createElement(k,{icon:n});v=r.a.createElement(l.a,{testId:m,title:t,icon:o,onClick:this.toggleOpen,selected:e,disabled:h,tooltipContent:f})}else v=r.a.createElement(l.a,{testId:m,iconAfter:r.a.createElement(T,null,r.a.createElement(s.a,{label:"Expand dropdown menu"})),onClick:this.toggleOpen,selected:e,disabled:h,tooltipContent:f},t);const y=Array.isArray(o)?b:o.width,O=Array.isArray(o)?o.length*g+2*E:o.height;return r.a.createElement(c.a,{mountTo:a,boundariesElement:d,scrollableElement:u,isOpen:e,handleClickOutside:this.hide,handleEscapeKeydown:this.hide,fitWidth:y+10,fitHeight:O+10,trigger:v},Array.isArray(o)?this.renderArrayOptions(o):o.render({hide:this.hide,dispatchCommand:i}))}}},"BC/G":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var o=n("tVIO"),r=n("4FMG");const i=(e,t)=>n=>Object(o.a)(e,t,{action:r.a.SYNCHRONY_ERROR,actionSubject:r.b.EDITOR,eventType:r.d.OPERATIONAL,attributes:{error:n}}),a=(e,t)=>n=>Object(o.a)(e,t,{action:"error"===n?r.a.SYNCHRONY_ENTITY_ERROR:r.a.SYNCHRONY_DISCONNECTED,actionSubject:r.b.EDITOR,eventType:r.d.OPERATIONAL,attributes:{onLine:navigator.onLine,visibilityState:document.visibilityState}})},BiVI:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var o=n("Czhu"),r=n("ehfC"),i=n("5lAk"),a=n("8vqB"),s=n("CP8u"),c=n("J/xJ"),l=n("4FMG"),d=n("IUNd");const u=(e,t)=>{switch(e){case a.k:return!!t.schema.nodes.paragraph;case a.e:case a.f:case a.g:case a.h:case a.i:case a.j:return!!t.schema.nodes.heading;case a.a:return!!t.schema.nodes.blockquote;case a.b:return!!t.schema.nodes.codeBlock;case a.m:return!!t.schema.nodes.panel}},p=(e,t)=>{if(!t.selection)return a.k;let n;const{$from:o,$to:r}=t.selection;return t.doc.nodesBetween(o.pos,r.pos,o=>{const r=e.filter(e=>e===((e,t)=>{if(e.type===t.nodes.heading){const t=a.c[e.attrs.level];if(t)return t}else if(e.type===t.nodes.paragraph)return a.k;return a.l})(o,t.schema));r.length>0&&(n?n!==a.l&&n!==r[0]&&(n=a.l):n=r[0])}),n||a.l},h=(e,t)=>(0===e?Object(c.g)(l.e.FORMATTING)(t.state,t.dispatch):Object(c.f)(e,l.e.FORMATTING)(t.state,t.dispatch),!0),f=new r.PluginKey("blockTypePlugin"),m=(e,t)=>{let n=0;return new r.Plugin({appendTransaction(e,n,o){if(t){const e=o.doc.resolve(o.doc.content.size-1).node(1),{paragraph:t}=o.schema.nodes;if(e&&e.isBlock&&e.type!==t)return o.tr.insert(o.doc.content.size,o.schema.nodes.paragraph.create()).setMeta("addToHistory",!1)}},state:{init(e,t){const n=a.n.filter(e=>u(e,t)),o=a.o.filter(e=>u(e,t));return{currentBlockType:p(n,t),blockTypesDisabled:Object(s.a)(t),availableBlockTypes:n,availableWrapperBlockTypes:o}},apply(t,n,r,i){const a=Object(o.a)(Object(o.a)({},n),{},{currentBlockType:p(n.availableBlockTypes,i),blockTypesDisabled:Object(s.a)(i)});return a.currentBlockType===n.currentBlockType&&a.blockTypesDisabled===n.blockTypesDisabled||e(f,a),a}},key:f,props:{handleKeyDown:(e,t)=>{const o=d.b.indexOf(t.keyCode);if(o>-1&&t.altKey){if(i.a.mac&&t.metaKey)return h(o,e);if(!i.a.mac&&t.ctrlKey&&n!==t.DOM_KEY_LOCATION_RIGHT)return h(o,e)}else"Alt"===t.key?n=t.location:t.altKey||(n=0);return!1}}})}},BmNk:function(e,t,n){"use strict";e.exports.encode=n("C8ig"),e.exports.decode=n("VMHS"),e.exports.format=n("vtGW"),e.exports.parse=n("ucQ5")},Bole:function(e,t,n){"use strict";var o=n("PZQm"),r=n.n(o),i=n("mpTe"),a=n.n(i),s=n("4SN/");const c=e=>/^<\/a\s*>/i.test(e),l=e=>{const t=e.tokens,n=new a.a;for(let a=0,d=t.length;a<d;a++){if("inline"!==t[a].type||!n.pretest(t[a].content))continue;let d=t[a].children,u=0;for(let p=d.length-1;p>=0;p--){const h=d[p];if("link_close"!==h.type){if("html_inline"===h.type&&(l=h.content,/^<a[>\s]/i.test(l)&&u>0&&u--,c(h.content)&&u++),!(u>0)&&"text"===h.type&&n.test(h.content)){const c=h.content;let l=Object(s.f)(c);l.length||(l=n.match(c)||[]);const u=[];let f=h.level,m=0;for(let t=0;t<l.length;t++){const{url:n}=l[t],o=e.md.normalizeLink(n);if(!e.md.validateLink(o))continue;let r=l[t].text;r=l[t].schema?"mailto:"!==l[t].schema||/^mailto:/i.test(r)?e.md.normalizeLinkText(r):e.md.normalizeLinkText("mailto:"+r).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+r).replace(/^http:\/\//,"");const i=l[t].index;if(i>m){const t=new e.Token("text","",0);t.content=c.slice(m,i),t.level=f,u.push(t)}let a=new e.Token("link_open","a",1);a.attrs=[["href",o]],a.level=f++,a.markup="linkify",a.info="auto",u.push(a),a=new e.Token("text","",0),a.content=r,a.level=f,u.push(a),a=new e.Token("link_close","a",-1),a.level=--f,a.markup="linkify",a.info="auto",u.push(a),m=l[t].lastIndex}if(m<c.length){const t=new e.Token("text","",0);t.content=c.slice(m),t.level=f,u.push(t)}t[a].children=(r=p,i=u,d=[].concat((o=d).slice(0,r),i,o.slice(r+1)))}}else for(p--;d[p].level!==h.level&&"link_open"!==d[p].type;)p--}}var o,r,i,l};n.d(t,"a",(function(){return d}));const d=r()("zero",{html:!1});d.enable(["entity","escape","newline"]),d.use(e=>e.core.ruler.push("custom-linkify",l))},Bpyo:function(e,t,n){"use strict";function o(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}e.exports=function(e,t){for(var n=e.pos;n<e.posMax&&!o(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}},BqYg:function(e,t){function n(e,t,n){var o,r,i,a,s;function c(){var l=Date.now()-a;l<t&&l>=0?o=setTimeout(c,t-l):(o=null,n||(s=e.apply(i,r),i=r=null))}null==t&&(t=100);var l=function(){i=this,r=arguments,a=Date.now();var l=n&&!o;return o||(o=setTimeout(c,t)),l&&(s=e.apply(i,r),i=r=null),s};return l.clear=function(){o&&(clearTimeout(o),o=null)},l.flush=function(){o&&(s=e.apply(i,r),i=r=null,clearTimeout(o),o=null)},l}n.debounce=n,e.exports=n},C8ig:function(e,t,n){"use strict";var o={};function r(e,t,n){var i,a,s,c,l,d="";for("string"!=typeof t&&(n=t,t=r.defaultChars),void 0===n&&(n=!0),l=function(e){var t,n,r=o[e];if(r)return r;for(r=o[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}(t),i=0,a=e.length;i<a;i++)if(s=e.charCodeAt(i),n&&37===s&&i+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3)))d+=e.slice(i,i+3),i+=2;else if(s<128)d+=l[s];else if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<a&&(c=e.charCodeAt(i+1))>=56320&&c<=57343){d+=encodeURIComponent(e[i]+e[i+1]),i++;continue}d+="%EF%BF%BD"}else d+=encodeURIComponent(e[i]);return d}r.defaultChars=";/?:@&=+$,-_.!~*'()#",r.componentChars="-_.!~*'()",e.exports=r},CP8u:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"q",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"p",(function(){return m})),n.d(t,"d",(function(){return b})),n.d(t,"x",(function(){return y})),n.d(t,"y",(function(){return O})),n.d(t,"a",(function(){return E})),n.d(t,"r",(function(){return w})),n.d(t,"l",(function(){return C})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return k})),n.d(t,"o",(function(){return x})),n.d(t,"m",(function(){return A})),n.d(t,"n",(function(){return j})),n.d(t,"g",(function(){return I})),n.d(t,"f",(function(){return M})),n.d(t,"s",(function(){return N})),n.d(t,"e",(function(){return R})),n.d(t,"u",(function(){return P})),n.d(t,"v",(function(){return L})),n.d(t,"w",(function(){return D})),n.d(t,"t",(function(){return _}));var o=n("DA0Z"),r=(n("I9T1"),n("ehfC")),i=(n("UdmJ"),n("z3s2")),a=n("Rw0+"),s=n("m23B"),c=n("UP2C"),l=n("mQXi"),d=n("DBvH");function u(e){const{selection:t,doc:n}=e;if(t instanceof r.NodeSelection){if("media"===t.node.type.name){const e=n.nodeAt(t.anchor-3);return!(!e||"paragraph"!==e.type.name)}if("mediaGroup"===t.node.type.name){const e=t.$anchor.nodeBefore;return!(!e||"paragraph"!==e.type.name)}}return t instanceof r.TextSelection&&!t.empty||!Object(l.b)(e)}function p(e){const{selection:t,doc:n}=e;if(t instanceof r.NodeSelection){if("media"===t.node.type.name){const e=n.nodeAt(t.$head.after());return!(!e||"paragraph"!==e.type.name)}if("mediaGroup"===t.node.type.name)return!(t.$head.parentOffset===t.$anchor.parent.content.size)}return t instanceof r.TextSelection&&!t.empty||!Object(l.d)(e)}function h(e){const t=e.$anchor.node(0),n=e.$anchor.node(1);return t.lastChild===n}function f(e){return e.$cursor||void 0}function m(e,t){if(t.selection instanceof a.a)return!0;if(!function(e,t){return Object(o.h)(e)(t)}(e,t))return!1;const{empty:n,$cursor:r,ranges:i}=t.selection;if(n&&!r)return!1;let s=t=>function(e,t){return!t.type.excludes(e)&&!e.excludes(t.type)}(e,t);return!(t.tr.storedMarks&&!t.tr.storedMarks.every(s))&&(r?r.marks().every(s):i.every(({$from:e,$to:n})=>{let o=0!==e.depth||t.doc.marks.every(s);return t.doc.nodesBetween(e.pos,n.pos,e=>{o=o&&e.marks.every(s)}),o}))}function b(e,t,n){const o=g(t,e.$to).depth;if(0===o)return!1;const r=t.resolve(e.$to.after(o));return!!r.nodeAfter&&n(r.nodeAfter)}function g(e,t){const n=["blockquote","bulletList","orderedList"];if(1===t.depth)return t;let o=t.node(t.depth),r=t;for(;t.depth>=1;)o=(t=e.resolve(t.before(t.depth))).node(t.depth),o&&-1!==n.indexOf(o.type.name)&&(r=t);return r}const v=new i.a;function y(e){return v.encode(e)}function O(){const e=document.createElement("fakeelement"),t={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(const n in t)if(void 0!==e.style[n])return t[n]}function E(e){const t=function(e){const t=[];if(e.selection){const{$from:n,$to:o}=e.selection,{blockquote:r,panel:i,orderedList:a,bulletList:s,listItem:c,codeBlock:l,decisionItem:d,decisionList:u,taskItem:p,taskList:h}=e.schema.nodes;e.doc.nodesBetween(n.pos,o.pos,e=>{e.isBlock&&[r,i,a,s,c,l,d,u,p,h].indexOf(e.type)>=0&&t.push(e.type)})}return t}(e),{panel:n}=e.schema.nodes;return t.filter(e=>e!==n).length>0}const w=e=>0===e.indexOf("temporary:"),C=e=>{const{doc:t,paragraph:n,codeBlock:o,blockquote:r,panel:i,heading:a,listItem:s,bulletList:l,orderedList:d,taskList:u,taskItem:p,decisionList:h,decisionItem:f,media:m,mediaGroup:b,mediaSingle:g}=e.nodes,v=e=>{switch(e.type){case m:case b:case g:return!1;case n:case o:case a:case p:case f:return 0===e.content.size;case r:case i:case s:return 2===e.content.size&&v(e.content.firstChild);case l:case d:return 4===e.content.size&&v(e.content.firstChild);case u:case h:return 2===e.content.size&&v(e.content.firstChild);case t:let y=!0;return e.content.forEach(e=>{y=y&&v(e)}),y;default:return Object(c.i)(e)}};return v},T=e=>{const{table:t,tableCell:n}=e.schema.nodes;return Object(s.hasParentNodeOfType)([t,n])(e.selection)},S=e=>{const{tableCell:t,tableHeader:n}=e.schema.nodes;return Object(s.hasParentNodeOfType)([t,n])(e.selection)},k=e=>Object(d.a)(e,"td")||Object(d.a)(e,"th"),x=e=>{const{content:t}=e;return!!t.lastChild&&"mediaGroup"===t.lastChild.type.name},A=e=>Object(s.hasParentNodeOfType)(e.schema.nodes.layoutSection)(e.selection),j=e=>Object(s.hasParentNodeOfType)(e.schema.nodes.listItem)(e.selection);function I(e,t,n,o){const r=[];return e.nodesBetween(t,n,(e,t,n)=>{o(e,t,n)&&r.push({node:e,pos:t})}),r}function M(e=[],t=(e=>e)){const n=new Set;return e.forEach(e=>n.add(t(e))),e.filter(e=>{const o=t(e);return!!n.has(o)&&(n.delete(o),!0)})}const N=e=>e instanceof r.TextSelection;function R(e,...t){const n=[e,...t];return function(e){return n.reduceRight((e,t)=>t(e),e)}}function P(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>t(e(...n)))}function L(e={},t={}){const n=Object.keys(e),o=Object.keys(t);return n.length===o.length&&n.reduce((n,o)=>n&&e[o]===t[o],!0)}function D(e,t){return e.reduce((e,n)=>e+t(n),0)}function _(e){return null!=e}},Cdbx:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));class o{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)}off(e,t){this.listeners[e]&&this.listeners[e].has(t)&&this.listeners[e].delete(t)}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}destroy(){this.listeners={}}}function r(e){return(t,n)=>{if(!t)throw new Error("event name is required!");const o="string"==typeof t?t:t.key;e.emit(o,n)}}},"D//s":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("ERkP"),r=n.n(o),i=n("aWzz"),a=n.n(i);class s extends r.a.Component{constructor(){super(...arguments),this.onContextUpdate=()=>{this.forceUpdate()}}componentDidMount(){this.context.editorActions._privateSubscribe(this.onContextUpdate)}componentWillUnmount(){this.context.editorActions._privateUnsubscribe(this.onContextUpdate)}render(){return this.props.render(this.context.editorActions)}}s.contextTypes={editorActions:a.a.object.isRequired}},DA0Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return m}));var o=n("UdmJ"),r=n("I9T1"),i=n("ehfC");function a(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function s(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function c(e,t,n){var o=e.selection,r=o.$head,a=r;if(!o.empty)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;a=l(r)}var s=a&&a.nodeBefore;return!(!s||!i.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)}function l(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function d(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function u(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function p(e,t){var n=e.selection,o=n.$from,r=n.$to;if(o.parent.inlineContent||r.parent.inlineContent)return!1;var a=u(o.parent.contentMatchAt(r.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){var s=(!o.parentOffset&&r.index()<r.parent.childCount?o:r).pos,c=e.tr.insert(s,a.createAndFill());c.setSelection(i.TextSelection.create(c.doc,s+1)),t(c.scrollIntoView())}return!0}function h(e,t){var n=e.selection,a=n.$from,s=n.$to;if(e.selection instanceof i.NodeSelection&&e.selection.node.isBlock)return!(!a.parentOffset||!Object(o.canSplit)(e.doc,a.pos))&&(t&&t(e.tr.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(t){var c=s.parentOffset==s.parent.content.size,l=e.tr;e.selection instanceof i.TextSelection&&l.deleteSelection();var d=0==a.depth?null:u(a.node(-1).contentMatchAt(a.indexAfter(-1))),p=c&&d?[{type:d}]:null,h=Object(o.canSplit)(l.doc,l.mapping.map(a.pos),1,p);p||h||!Object(o.canSplit)(l.doc,l.mapping.map(a.pos),1,d&&[{type:d}])||(p=[{type:d}],h=!0),h&&(l.split(l.mapping.map(a.pos),1,p),c||a.parentOffset||a.parent.type==d||!a.node(-1).canReplace(a.index(-1),a.indexAfter(-1),r.Fragment.from(d.create(),a.parent))||l.setNodeMarkup(l.mapping.map(a.before()),d)),t(l.scrollIntoView())}return!0}function f(e,t,n){var a,s,c=t.nodeBefore,l=t.nodeAfter;if(c.type.spec.isolating||l.type.spec.isolating)return!1;if(function(e,t,n){var r=t.nodeBefore,i=t.nodeAfter,a=t.index();return!!(r&&i&&r.type.compatibleContent(i.type))&&(!r.content.size&&t.parent.canReplace(a-1,a)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(a,a+1)||!i.isTextblock&&!Object(o.canJoin)(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(a=(s=c.contentMatchAt(c.childCount)).findWrapping(l.type))&&s.matchType(a[0]||l.type).validEnd){if(n){for(var d=t.pos+l.nodeSize,u=r.Fragment.empty,p=a.length-1;p>=0;p--)u=r.Fragment.from(a[p].create(null,u));u=r.Fragment.from(c.copy(u));var h=e.tr.step(new o.ReplaceAroundStep(t.pos-1,d,t.pos,d,new r.Slice(u,1,0),a.length,!0)),f=d+2*a.length;Object(o.canJoin)(h.doc,f)&&h.join(f),n(h.scrollIntoView())}return!0}var m=i.Selection.findFrom(t,1),b=m&&m.$from.blockRange(m.$to),g=b&&Object(o.liftTarget)(b);return null!=g&&g>=t.depth&&(n&&n(e.tr.lift(b,g).scrollIntoView()),!0)}function m(e,t){return function(n,o){var r=n.selection,i=r.empty,a=r.$cursor,s=r.ranges;if(i&&!a||!function(e,t,n){for(var o=function(o){var r=t[o],i=r.$from,a=r.$to,s=0==i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,a.pos,(function(e){if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)})),s)return{v:!0}},r=0;r<t.length;r++){var i=o(r);if(i)return i.v}return!1}(n.doc,s,e))return!1;if(o)if(a)e.isInSet(n.storedMarks||a.marks())?o(n.tr.removeStoredMark(e)):o(n.tr.addStoredMark(e.create(t)));else{for(var c=!1,l=n.tr,d=0;!c&&d<s.length;d++){var u=s[d],p=u.$from,h=u.$to;c=n.doc.rangeHasMark(p.pos,h.pos,e)}for(var f=0;f<s.length;f++){var m=s[f],b=m.$from,g=m.$to;c?l.removeMark(b.pos,g.pos,e):l.addMark(b.pos,g.pos,e.create(t))}o(l.scrollIntoView())}return!0}}function b(e,t){if(Array.isArray(t)){var n=t;t=function(e){return n.indexOf(e.type.name)>-1}}return function(n,r){return e(n,r&&function(e,t){return function(n){if(!n.isGeneric)return e(n);for(var r=[],i=0;i<n.mapping.maps.length;i++){for(var a=n.mapping.maps[i],s=0;s<r.length;s++)r[s]=a.map(r[s]);a.forEach((function(e,t,n,o){return r.push(n,o)}))}for(var c=[],l=0;l<r.length;l+=2)for(var d=r[l],u=r[l+1],p=n.doc.resolve(d),h=p.sharedDepth(u),f=p.node(h),m=p.indexAfter(h),b=p.after(h+1);b<=u;++m){var g=f.maybeChild(m);if(!g)break;if(m&&-1==c.indexOf(b)){var v=f.child(m-1);v.type==g.type&&t(v,g)&&c.push(b)}b+=g.nodeSize}c.sort((function(e,t){return e-t}));for(var y=c.length-1;y>=0;y--)Object(o.canJoin)(n.doc,c[y])&&n.join(c[y]);e(n)}}(r,t))}}function g(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,o){for(var r=0;r<e.length;r++)if(e[r](t,n,o))return!0;return!1}}var v=g(a,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var a=l(r);if(!a){var c=r.blockRange(),d=c&&Object(o.liftTarget)(c);return null!=d&&(t&&t(e.tr.lift(c,d).scrollIntoView()),!0)}var u=a.nodeBefore;if(!u.type.spec.isolating&&f(e,a,t))return!0;if(0==r.parent.content.size&&(s(u,"end")||i.NodeSelection.isSelectable(u))){if(t){var p=e.tr.deleteRange(r.before(),r.after());p.setSelection(s(u,"end")?i.Selection.findFrom(p.doc.resolve(p.mapping.map(a.pos,-1)),-1):i.NodeSelection.create(p.doc,a.pos-u.nodeSize)),t(p.scrollIntoView())}return!0}return!(!u.isAtom||a.depth!=r.depth-1)&&(t&&t(e.tr.delete(a.pos-u.nodeSize,a.pos).scrollIntoView()),!0)}),c),y=g(a,(function(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var r=d(o);if(!r)return!1;var a=r.nodeAfter;if(f(e,r,t))return!0;if(0==o.parent.content.size&&(s(a,"start")||i.NodeSelection.isSelectable(a))){if(t){var c=e.tr.deleteRange(o.before(),o.after());c.setSelection(s(a,"start")?i.Selection.findFrom(c.doc.resolve(c.mapping.map(r.pos)),1):i.NodeSelection.create(c.doc,c.mapping.map(r.pos))),t(c.scrollIntoView())}return!0}return!(!a.isAtom||r.depth!=o.depth-1)&&(t&&t(e.tr.delete(r.pos,r.pos+a.nodeSize).scrollIntoView()),!0)}),(function(e,t,n){var o=e.selection,r=o.$head,a=r;if(!o.empty)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;a=d(r)}var s=a&&a.nodeAfter;return!(!s||!i.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,a.pos)).scrollIntoView()),!0)})),O={Enter:g((function(e,t){var n=e.selection,o=n.$head,r=n.$anchor;return!(!o.parent.type.spec.code||!o.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}),p,(function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(Object(o.canSplit)(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var i=n.blockRange(),a=i&&Object(o.liftTarget)(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}),h),"Mod-Enter":function(e,t){var n=e.selection,o=n.$head,r=n.$anchor;if(!o.parent.type.spec.code||!o.sameParent(r))return!1;var a=o.node(-1),s=o.indexAfter(-1),c=u(a.contentMatchAt(s));if(!a.canReplaceWith(s,s,c))return!1;if(t){var l=o.after(),d=e.tr.replaceWith(l,l,c.createAndFill());d.setSelection(i.Selection.near(d.doc.resolve(l),1)),t(d.scrollIntoView())}return!0},Backspace:v,"Mod-Backspace":v,Delete:y,"Mod-Delete":y,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new i.AllSelection(e.doc))),!0}},E={"Ctrl-h":O.Backspace,"Alt-Backspace":O["Mod-Backspace"],"Ctrl-d":O.Delete,"Ctrl-Alt-Backspace":O["Mod-Delete"],"Alt-Delete":O["Mod-Delete"],"Alt-d":O["Mod-Delete"]};for(var w in O)E[w]=O[w];var C=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?E:O},DAa0:function(e,t,n){"use strict";n.d(t,"p",(function(){return c})),n.d(t,"B",(function(){return l})),n.d(t,"A",(function(){return d})),n.d(t,"l",(function(){return u})),n.d(t,"r",(function(){return p})),n.d(t,"D",(function(){return h})),n.d(t,"o",(function(){return f})),n.d(t,"q",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"C",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"y",(function(){return y})),n.d(t,"z",(function(){return O})),n.d(t,"x",(function(){return E})),n.d(t,"w",(function(){return w})),n.d(t,"u",(function(){return C})),n.d(t,"t",(function(){return T})),n.d(t,"E",(function(){return S})),n.d(t,"s",(function(){return k})),n.d(t,"v",(function(){return x})),n.d(t,"f",(function(){return A})),n.d(t,"g",(function(){return j})),n.d(t,"a",(function(){return I})),n.d(t,"c",(function(){return M})),n.d(t,"b",(function(){return N})),n.d(t,"h",(function(){return R})),n.d(t,"j",(function(){return P})),n.d(t,"i",(function(){return L})),n.d(t,"e",(function(){return D})),n.d(t,"d",(function(){return _})),n.d(t,"k",(function(){return B}));var o=n("3IV/"),r=n("HL7A"),i=n("qPpp"),a=n("Vqim"),s=n("w301");const c=Object(s.a)({light:o.N0,dark:o.DN30}),l=Object(s.a)({light:i.S,dark:i.T}),d=Object(s.a)({light:o.N200,dark:o.DN400}),u=Object(s.a)({light:i.N,dark:i.O}),p=(o.N20,o.B75),h=o.B100,f=o.B300,m=o.R50,b=o.R300,g=o.R75,v=3,y=8,O=15,E=2,w=20,C=16,T=6,S=i.U,k=r.h+y-r.c,x=3,A=13,j=4,I=25,M=10*i.W,N=M+1,R=a.a/3,P=2,L=M+i.Z,D=16,_=180,B=L+2},DDxP:function(e,t,n){"use strict";var o=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,r=/\((c|tm|r|p)\)/i,i=/\((c|tm|r|p)\)/gi,a={c:"",r:"",p:"",tm:""};function s(e,t){return a[t.toLowerCase()]}function c(e){var t,n,o=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||o||(n.content=n.content.replace(i,s)),"link_open"===n.type&&"auto"===n.info&&o--,"link_close"===n.type&&"auto"===n.info&&o++}function l(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)"text"!==(n=e[t]).type||r||o.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1$2").replace(/(^|\s)--(\s|$)/gm,"$1$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1$2")),"link_open"===n.type&&"auto"===n.info&&r--,"link_close"===n.type&&"auto"===n.info&&r++}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(r.test(e.tokens[t].content)&&c(e.tokens[t].children),o.test(e.tokens[t].content)&&l(e.tokens[t].children))}},DGUU:function(e,t,n){"use strict";var o=n("lRcl"),r=n("ERkP"),i=n.n(r),a=n("LxhQ"),s=n.n(a),c=n("L21V"),l=n("mjri"),d=n("nEFo"),u=n("AyqE");class p extends r.PureComponent{render(){const{id:e,title:t,className:n}=this.props;return i.a.createElement("div",{id:e,"data-category-id":e,className:s()(n)},i.a.createElement("div",{className:u.e},Object(l.m)(t)?i.a.createElement(c.b,Object.assign({},d.a[t])):t))}}var h=n("6wBK");class f extends r.PureComponent{render(){const{emojis:e,onSelected:t,onMouseMove:n,title:o,showDelete:r,onDelete:a}=this.props;return i.a.createElement("div",{className:u.k},e.map(e=>{const{shortName:s,id:c}=e,l=c?`${c}-${o}`:`${s}-${o}`;return i.a.createElement("span",{className:u.f,key:l},i.a.createElement(h.a,{emoji:e,selectOnHover:!0,onSelected:t,onMouseMove:n,showDelete:r,onDelete:a,placeholderSize:24}))}))}}var m=n("76qw");n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return O}));class b{constructor(e,t){this.props=e,this.height=t}}class g extends b{constructor(e){super(e,m.a.emojiRowHeight),this.renderItem=()=>i.a.createElement(f,Object.assign({},this.props))}}class v extends b{constructor(){super({},m.a.loadingRowHeight),this.renderItem=()=>i.a.createElement("div",{className:u.l},i.a.createElement("div",null,i.a.createElement(o.a,{size:"medium"})))}}class y extends b{constructor(e){super(e,m.a.categoryHeadingHeight),this.renderItem=()=>i.a.createElement(p,Object.assign({},this.props))}}const O=(e,t)=>{const{index:n,key:o,style:r}=t,a=e[n];return i.a.createElement("div",{style:r,key:o},a.renderItem(t))}},DH0k:function(e,t){function n(e){switch(e){case 9:case 32:return!0}return!1}function o(e,t){var n=e.bMarks[t]+e.blkIndent,o=e.eMarks[t];return e.src.substr(n,o-n)}function r(e){var t,n=[],o=0,r=e.length,i=0,a=0,s=!1,c=0;for(t=e.charCodeAt(o);o<r;)96===t?s?(s=!1,c=o):i%2==0&&(s=!0,c=o):124!==t||i%2!=0||s||(n.push(e.substring(a,o)),a=o+1),92===t?i++:i=0,++o===r&&s&&(s=!1,o=c+1),t=e.charCodeAt(o);return n.push(e.substring(a)),n}e.exports=function(e,t,i,a){var s,c,l,d,u,p,h,f,m,b,g;if(t+2>i)return!1;if(u=t+1,e.sCount[u]<e.blkIndent)return!1;if(e.sCount[u]-e.blkIndent>=4)return!1;if((l=e.bMarks[u]+e.tShift[u])>=e.eMarks[u])return!1;if(124!==(s=e.src.charCodeAt(l++))&&45!==s&&58!==s)return!1;for(;l<e.eMarks[u];){if(124!==(s=e.src.charCodeAt(l))&&45!==s&&58!==s&&!n(s))return!1;l++}for(p=(c=o(e,t+1)).split("|"),f=[],d=0;d<p.length;d++){if(!(m=p[d].trim())){if(0===d||d===p.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;58===m.charCodeAt(m.length-1)?f.push(58===m.charCodeAt(0)?"center":"right"):58===m.charCodeAt(0)?f.push("left"):f.push("")}if(-1===(c=o(e,t).trim()).indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;if((p=r(c.replace(/^\||\|$/g,""))).length>f.length)return!1;if(a)return!0;for((h=e.push("table_open","table",1)).map=b=[t,0],(h=e.push("tr_open","tr",1)).map=[t,t+1],d=0;d<p.length;d++)(h=e.push("th_open","th",1)).map=[t,t+1],f[d]&&(h.attrs=[["style","text-align:"+f[d]]]),h=e.push("paragraph_open","p",1),(h=e.push("inline","",0)).content=p[d].trim(),h.map=[t,t+1],h.children=[],h=e.push("paragraph_close","p",-1),h=e.push("th_close","th",-1);for((h=e.push("tr_close","tr",-1)).map=g=[t+2,0],u=t+2;u<i&&!(e.sCount[u]<e.blkIndent)&&-1!==(c=o(e,u).trim()).indexOf("|")&&!(e.sCount[u]-e.blkIndent>=4);u++){p=r(c.replace(/^\||\|$/g,"")),h=e.push("tr_open","tr",1);for(var v=0,y=1;v<p.length;v++){h=e.push("td_open","td",1),f[v]&&(h.attrs=[["style","text-align:"+f[v]]]);var O=" "===p[v][0]||/^(\d+\.|\*|-)$/.test(p[v].trim())?1:0;e.bMarks[u]+=y+O,y=(p[v]||"").length+(O?0:1),e.eMarks[u]=e.bMarks[u]+y-1,e.lineMax=1,e.md.block.tokenize(e,u,u+1),h=e.push("td_close","td",-1)}h=e.push("tr_close","tr",-1)}return h=e.push("table_close","table",-1),b[1]=g[1]=u,e.line=u,!0}},DIje:function(e,t,n){"use strict";var o=n("JzjW"),r=n("T1Ll").has,i=n("T1Ll").isValidEntityCode,a=n("T1Ll").fromCodePoint,s=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,c=/^&([a-z][a-z0-9]{1,31});/i;e.exports=function(e,t){var n,l,d=e.pos,u=e.posMax;if(38!==e.src.charCodeAt(d))return!1;if(d+1<u)if(35===e.src.charCodeAt(d+1)){if(l=e.src.slice(d).match(s))return t||(n="x"===l[1][0].toLowerCase()?parseInt(l[1].slice(1),16):parseInt(l[1],10),e.pending+=i(n)?a(n):a(65533)),e.pos+=l[0].length,!0}else if((l=e.src.slice(d).match(c))&&r(o,l[1]))return t||(e.pending+=o[l[1]]),e.pos+=l[0].length,!0;return t||(e.pending+="&"),e.pos++,!0}},DR7P:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return c}));var o=n("KsTJ");const r=420,i=360,a="\n  display: flex;\n  line-height: 0;\n  padding: 5px 0;\n  align-items: center;\n",s=o.default.div`
  ${a}
`,c=o.default.div`
  width: ${r}px;
  display: flex;
  flex-direction: column;
  overflow: auto;
  padding: 0;

  ${({provider:e})=>o.css`
      width: ${e?r:360}px;
    `};
  line-height: initial;
`},"DqM+":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));const o={richText:"richText",plain:"plain",markdown:"markdown",binary:"binary"},r={text:"text",url:"url",code:"code",mediaSingle:"mediaSingle",mediaCard:"mediaCard",mediaGroup:"mediaGroup",tableCells:"tableCells",table:"table",expand:"expand",nestedExpand:"nestedExpand",mixed:"mixed",blockquote:"blockquote",blockCard:"blockCard",bodiedExtension:"bodiedExtension",bulletList:"bulletList",codeBlock:"codeBlock",decisionList:"decisionList",decisionItem:"decisionItem",extension:"extension",heading:"heading",layoutSection:"layoutSection",orderedList:"orderedList",panel:"panel",rule:"rule",tableHeader:"tableHeader",tableRow:"tableRow",taskItem:"taskItem",uncategorized:"uncategorized"}},Dsb4:function(e,t,n){"use strict";var o=/\r\n?|\n/g,r=/\0/g;e.exports=function(e){var t;t=(t=e.src.replace(o,"\n")).replace(r,""),e.src=t}},DysG:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("lRcl");const a=n("KsTJ").default.div`
  display: flex;
  justify-content: center;
  margin-top: 64px;
`;t.a=()=>r.a.createElement(a,null,r.a.createElement(i.a,{size:"small"}))},E40X:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const o="ak-editor-expand",r={prefix:o,expanded:o+"__expanded",titleContainer:o+"__title-container",inputContainer:o+"__input-container",iconContainer:o+"__icon-container",icon:o+"__icon",titleInput:o+"__title-input",content:o+"__content",type:e=>`${o}__type-${e}`}},E8Kj:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return m}));var o=n("DA0Z"),r=n("ehfC"),i=n("m23B"),a=n("ArAF"),s=n("EE0K"),c=n("4FMG"),l=n("tVIO"),d=n("eGvA"),u=n("mHbP");const p=(e,t)=>{const{decisionList:n,decisionItem:o,taskList:r,taskItem:i}=t.nodes;return"taskList"===e?{list:r,item:i}:{list:n,item:o}},h=(e,t,n=c.e.TOOLBAR,i,a)=>{const{state:s}=e,{schema:l}=s,d=f(s,t,n,({tr:e,list:t,item:n,listLocalId:o,itemLocalId:r})=>b(e,t,n,l,s,o,r),({state:e,tr:t,item:n,itemLocalId:o})=>{const{$to:i}=e.selection,a=i.end(i.depth);return t.split(a,1,[{type:n,attrs:{localId:o}}]).setSelection(new r.TextSelection(t.doc.resolve(a+i.depth)))},i,a);return Object(o.a)((e,t)=>!!d&&(t&&t(d),!0),["taskList","decisionList"])},f=(e,t,n,o,r,d,h)=>{const{schema:f}=e,{list:m,item:b}=p(t,f),{tr:g}=e,{$to:v}=e.selection,y=Object(i.findParentNodeOfType)(m)(e.selection),O=((e={})=>{const{objectId:t,containerId:n}=e;return{objectId:t,containerId:n,userContext:t?s.a.EDIT:s.a.NEW}})(u.a.getState(e).contextIdentifierProvider);let E,w,C;if(y){if(v.node().textContent.length>=0){C=y.node.childCount+1,d=d||y.node.attrs.localId;const t=Object(i.findParentNodeOfType)(b)(e.selection);w=t?e.doc.resolve(t.pos).index()+1:0,E=r||o}}else w=0,C=1,E=o;if(d=d||a.b.generate(),h=h||a.b.generate(),E){let o=E({state:e,tr:g,list:m,item:b,listLocalId:d,itemLocalId:h});return o&&(o=Object(l.a)(e,o,((e,t,n,o,r,i,a)=>{let s,l,d;return t&&({containerId:s,objectId:l,userContext:d}=t),{action:c.a.INSERTED,actionSubject:c.b.DOCUMENT,actionSubjectId:"taskList"===e?c.c.ACTION:c.c.DECISION,eventType:c.d.TRACK,attributes:{inputMethod:n,containerAri:s,objectAri:l,userContext:d,localId:o,listLocalId:r,position:i,listSize:a}}})(t,O,n,h,d,w||0,C||0))),o}return null},m=(e,t)=>t.depth-e.depth,b=(e,t,n,o,s,c=a.b.generate(),l=a.b.generate())=>{const{selection:u}=s,{$from:p,$to:h}=u;if(p.parent!==h.parent)return null;const{paragraph:f,blockquote:b,decisionList:g,taskList:v,decisionItem:y,taskItem:O,mediaGroup:E}=o.nodes;if(p.parent.type===E)return null;const w=t.create({localId:c},[n.create({localId:l})]);if(u instanceof d.a)return Object(i.safeInsert)(w)(e);if(((e,t)=>{const{paragraph:n,blockquote:o,decisionList:r,taskList:a}=e.nodes;return Object(i.hasParentNodeOfType)([o,n,r,a])(t)})(o,u)){const{type:o,childCount:s}=u.$from.node(),c=t.create({localId:a.b.generate()},[n.create({localId:a.b.generate()},p.node(p.depth).content)]),l=Object(i.findParentNodeOfType)(v)(u)||Object(i.findParentNodeOfType)(g)(u),d=Object(i.findParentNodeOfType)(O)(u)||Object(i.findParentNodeOfType)(y)(u);if(l&&d){let t,n,o=u.from;return l.node.firstChild===d.node?(t=l.start-1,n=d.start+d.node.nodeSize,1===l.node.childCount&&(n=l.start+l.node.nodeSize-1)):(t=d.start-1,n=d.start+d.node.nodeSize,o+=2),e.replaceWith(t,n,c),e=Object(i.setTextSelection)(o)(e)}const E=[b];o===f&&s>0&&E.push(f);let w=e;w=Object(i.replaceParentNodeOfType)(E,c)(e);const C=m(h,w.selection.$to);if(w!==(e=e.setSelection(new r.TextSelection(e.doc.resolve(h.pos+C)))))return e}return Object(i.safeInsert)(w)(e)}},EE0K:function(e,t,n){"use strict";var o,r,i,a;n.d(t,"a",(function(){return o})),function(e){e.EDIT="edit",e.NEW="new"}(o||(o={})),function(e){e.RESOLVED="resolved",e.UNRESOLVED="unresolved"}(r||(r={})),function(e){e.TEXT="text",e.INLINE_CARD="inlineCard",e.BLOCK_CARD="blockCard",e.EMBED="embed"}(i||(i={})),function(e){e.JIRA="jiraIssue",e.CONFLUENCE="confluencePage",e.BITBUCKET_PR="bitbucketPR",e.BITBUCKET_REPO="bitbucketRepo",e.TRELLO_CARD="trelloCard",e.TRELLO_BOARD="trelloBoard",e.STATUS_PAGE="statusPage",e.BOX="boxFile",e.DROPBOX="dropboxFile",e.OFFICE="office",e.DRIVE="drive",e.YOUTUBE="youtubeVideo",e.TWITTER="twitterTweet",e.OTHER="other"}(a||(a={}))},ELNC:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("liuE"),a=n("lbXe"),s=n("Czhu"),c=n("Mgyk");const l=e=>t=>{const n=Object(s.a)(Object(s.a)({},t),{},{eventType:"ui"});n.attributes||(n.attributes={}),n.attributes.packageName=c.a,n.attributes.packageVersion=c.b,n.attributes.componentName="status";const o=e(n);return o.fire("fabric-elements"),o};var d=n("K6aX");const u={neutral:"default",purple:"new",blue:"inprogress",red:"removed",yellow:"moved",green:"success"};class p extends o.PureComponent{constructor(){super(...arguments),this.hoverStartTime=0,this.handleMouseEnter=e=>{this.hoverStartTime=Date.now()},this.handleMouseLeave=e=>{const{onHover:t}=this.props;Date.now()-this.hoverStartTime>=d.a&&t&&t(),this.hoverStartTime=0}}componentWillUnmount(){this.hoverStartTime=0}render(){const{text:e,color:t,style:n,onClick:o}=this.props;if(0===e.trim().length)return null;const a=u[t]||"default";return r.a.createElement("span",{className:"status-lozenge-span",title:e,onClick:o,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-node-type":"status","data-color":t,"data-style":n},r.a.createElement(i.a,{appearance:a,maxWidth:200},e))}}p.displayName="StatusInternal";const h=Object(a.a)({onClick:(e,t)=>{const{localId:n}=t;return l(e)({action:"clicked",actionSubject:"statusLozenge",attributes:{localId:n}})},onHover:(e,t)=>{const{localId:n}=t;return l(e)({action:"hovered",actionSubject:"statusLozenge",attributes:{localId:n}})}})(p);n.d(t,"a",(function(){return h}))},EYzQ:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var o=n("ehfC");const r=new o.PluginKey("selection"),i=new o.PluginKey("gapCursorPlugin");var a,s;!function(e){e.Before="Before",e.Start="Start",e.Inside="Inside",e.End="End"}(a||(a={})),function(e){e[e.Before=-1]="Before",e[e.After=1]="After"}(s||(s={}))},EZ5g:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return c}));var o=n("Rs2C"),r=n("GGKp");const i=e=>Object(r.a)({type:o.a.SET_KEYBOARD_HEIGHT,keyboardHeight:e}),a=e=>Object(r.a)({type:o.a.SET_HEIGHT_DIFF,heightDiff:e}),s=e=>Object(r.a)({type:o.a.SET_WINDOW_HEIGHT,windowHeight:e}),c=e=>Object(r.a)({type:o.a.SET_MOBILE_PADDING_TOP,paddingTop:e})},EgIc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("ERkP")),r=i(n("ZUNO"));function i(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var s=function(e){return o.default.createElement(r.default,a({dangerouslySetGlyph:'<svg width="16" height="16" viewBox="0 0 16 16" focusable="false" role="presentation"><path fill="#FF5630" fill-rule="evenodd" d="M2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm6 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/></svg>'},e,{size:"small"}))};s.displayName="Bug16Icon";var c=s;t.default=c},Ejnt:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("ERkP"),r=n.n(o);function i(){const e=document.createElement("span");return e.contentEditable="false",e.classList.add("inline-node--mobile"),e}const a=n("KsTJ").default.span`
  display: block;
`,s=({useInlineWrapper:e,children:t})=>e?r.a.createElement(a,null,t):r.a.createElement(r.a.Fragment,null,t);s.displayName="InlineNodeWrapper",t.b=s},EruW:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("yKQC");const r=e=>({payload:t,channel:n=o.b})=>e&&e(t).fire(n)},EwaM:function(e,t,n){"use strict";var o=n("ehfC"),r=n("UdmJ"),i=n("lSUb"),a=n("X78g"),s=n("BC/G");const c=((e,t)=>{let n,o;return(...r)=>(o&&t(n,r)||(o=e(...r),n=r),o)})((e,t,n,o)=>{let r;const i=()=>{Object(s.a)(e.state,e.state.tr)("disconnected")},c=()=>{Object(s.a)(e.state,e.state.tr)("error")},l=()=>{r&&(r.off("disconnected",i),r.off("error",c))},d=t=>{e.dispatch(e.state.tr.setMeta("collabInitialised",!0)),Object(a.d)(t,e,n)},u=t=>Object(a.c)(t,e),p=t=>Object(a.a)(t,e,n),h=t=>Object(a.e)(t,e),f=t=>Object(a.f)(t,e),m=t=>{const{steps:n}=t,{state:o}=e,{tr:r}=o;n.forEach(e=>r.step(e)),e.dispatch(r)},b=t=>{Object(s.b)(e.state,e.state.tr)(t)},g=({entity:e})=>{l(),n.EXPERIMENTAL_allowInternalErrorAnalytics&&(e.on("disconnected",i),e.on("error",c),r=e)};return t.on("init",d).on("connected",u).on("data",p).on("presence",h).on("telepointer",f).on("local-steps",m).on("error",b).on("entity",g),()=>{l(),t.off("init",d).off("connected",u).off("data",p).off("presence",h).off("telepointer",f).off("local-steps",m).off("error",b).off("entity",g)}},(e,t)=>t&&t.every((t,n)=>t===e[n]));var l=n("IUoJ");const d=Object(i.default)((e,t)=>{e.initialize(()=>t.state,e=>r.Step.fromJSON(t.state.schema,e))});var u=n("oPym");n.d(t,"a",(function(){return p}));const p=(e,t,n,r)=>new o.Plugin({key:l.a,state:{init:e=>u.a.init(e),apply(t,n,o,r){const i=n.apply(t);return e(l.a,i),i}},props:{decorations(e){return this.getState(e).decorations}},filterTransaction(e,t){const n=l.a.getState(t);return!!e.getMeta("collabInitialised")||!(!n.isReady&&e.docChanged)},view(e){const o=Object(s.b)(e.state,e.state.tr),i=n((({options:e,providerFactory:t,view:n})=>o=>{let r;return l.a.getState(n.state).isReady&&r&&r(),r=c(n,o,e,t),d(o,n),r})({view:e,options:r,providerFactory:t}),o);return{destroy(){t.unsubscribeAll("collabEditProvider"),i&&i.then(e=>{e&&e()})}}}})},"F/mI":function(e,t,n){"use strict";var o,r;n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),function(e){e.INDENT="indent",e.OUTDENT="outdent"}(o||(o={})),function(e){e.PARAGRAPH="paragraph",e.LIST="list",e.HEADING="heading",e.CODE_BLOCK="codeBlock",e.TASK_LIST="taskList"}(r||(r={}))},F3Fu:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return g}));var o=n("I9T1"),r=n("ehfC"),i=n("UdmJ"),a=n("rq0r"),s=n("eObz"),c=n("DA0Z");function l(e,t,n){let{$from:r,$to:a}=t;const s=e.schema.nodes.listItem;let c=r.blockRange(a,e=>!!e.childCount&&!!e.firstChild&&e.firstChild.type===s);if(!c||c.depth<2||r.node(c.depth-1).type!==s)return n;let l=c.end,d=a.end(c.depth);return l<d&&(n.step(new i.ReplaceAroundStep(l-1,d,l,d,new o.Slice(o.Fragment.from(s.create(void 0,c.parent.copy())),1,0),1,!0)),c=new o.NodeRange(n.doc.resolve(r.pos),n.doc.resolve(d),c.depth)),n.lift(c,Object(i.liftTarget)(c)).scrollIntoView()}function d(e,t,n,o,i){const{listItem:a}=e.schema.nodes;let s=!1;return i.doc.nodesBetween(t,n,(n,c)=>{if(!s&&n.type===a&&c>t){s=!0;let t=o+3;for(;t>o+2;){const o=i.doc.resolve(i.mapping.map(c));t=o.depth;const a=i.doc.resolve(i.mapping.map(c+n.textContent.length)),s=new r.TextSelection(o,a);i=l(e,s,i)}}}),i}function u(e,t){const{from:n,to:o}=e.selection,{paragraph:r}=e.schema.nodes,i=[];t.doc.nodesBetween(n,o,(e,t)=>{e.type===r&&i.push({node:e,pos:t})});for(let s=i.length-1;s>=0;s--){const n=i[s],o=t.doc.resolve(t.mapping.map(n.pos));if(o.depth>0){let r;r=n.node.textContent&&n.node.textContent.length>0?t.doc.resolve(t.mapping.map(n.pos+n.node.textContent.length)):t.doc.resolve(t.mapping.map(n.pos+1));const i=o.blockRange(r);i&&t.lift(i,Object(a.c)(e.schema,o))}}return t}const p=/^\s*[\*\-\u2022](\s+|\s+$)/,h=/^\s*\d[\.\)](\s+|$)/,f=(e,t,n)=>{const{hardBreak:i,bulletList:a,orderedList:l}=n.nodes,d=Object(s.c)(e.content,e=>e),u=[a,l],f=d.map((e,r)=>{const a=((e,t)=>{if(!e.text)return null;const{bulletList:n,orderedList:o}=t.nodes;return[{node:n,matcher:p},{node:o,matcher:h}].reduce((t,n)=>{if(t)return t;const o=e.text.match(n.matcher);return o?[n.node,o[0].length]:t},null)})(e,n),s=r>0&&d[r-1];if(s&&s.type!==i)return e;if(!a||!e.text)return e;const[c,l]=a,u=e.text.substr(l),f=n.nodes.listItem.createAndFill(void 0,n.nodes.paragraph.createChecked(void 0,u.length?n.text(u):void 0));if(!f)return e;const m=c.createChecked(void 0,[f]);return t&&!t.type.validContent(o.Fragment.from(m))?e:m}).filter((e,t,n)=>e.type!==i?e:t>0&&u.indexOf(n[t-1].type)>-1||t<n.length-1&&u.indexOf(n[t+1].type)>-1?null:e),m=r.EditorState.create({schema:n});let b;Object(c.a)((e,t)=>!!t&&(t(e.tr.replaceWith(0,2,f)),!0),()=>!0)(m,e=>{b=e});const g=b?b.doc.content:o.Fragment.from(f),{paragraph:v}=n.nodes;return v.validContent(g)?o.Fragment.from(v.create(e.attrs,g,e.marks)):g},m=(e,t)=>{const n=[];let r=[],i=null;const{hardBreak:a,paragraph:s}=t.nodes;return e.forEach(e=>{if(i&&i.type===a&&e.type===a)return r.pop(),n.push(s.createChecked(void 0,r)),void(r=[]);r.push(e),i=e}),r.length&&n.push(s.createChecked(void 0,r)),o.Fragment.from(n.length?n:[s.createAndFill()])},b=(e,t)=>{let n=!1;if(e.content.forEach(e=>{n=n||e.marks.some(e=>e.type===t.marks.code)}),t.nodes.paragraph.validContent(e.content)&&!n){const n=m(e.content,t);return new o.Slice(n,e.openStart+1,e.openEnd+1)}return Object(s.e)(e,(e,n)=>e.type===t.nodes.paragraph?m(e.content,t):e)},g=(e,t)=>Object(s.e)(e,(e,n)=>e.type===t.nodes.paragraph?f(e,n,t):e)},F3Zm:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c}));var o=n("m23B"),r=n("I9T1"),i=n("eObz");const a=(e,t)=>{const{expand:n,nestedExpand:r}=e.schema.nodes;return Object(o.findSelectedNodeOfType)([n,r])(t||e.selection)||Object(o.findParentNodeOfType)([n,r])(t||e.selection)},s=(e,t)=>e.openStart>1&&e.openEnd>1&&1===e.content.childCount&&e.content.firstChild&&e.content.firstChild.type===t.nodes.expand?new r.Slice(e.content.firstChild.content,e.openStart-1,e.openEnd-1):e,c=(e,t)=>{const{expand:n,nestedExpand:o}=t.nodes,a=[];return Object(i.c)(e.content,e=>{e.type===o?a.push(n.createChecked(e.attrs,e.content,e.marks)):a.push(e)}),new r.Slice(r.Fragment.fromArray(a),e.openStart,e.openEnd)}},FMEA:function(e,t,n){var o=n("UFJf");e.exports=function(e,t){var n=o(e).getTime(),r=o(t).getTime();return n>r?-1:n<r?1:0}},FcLh:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("lRcl"),a=n("KsTJ"),s=n("BMbf"),c=n("3IV/"),l=n("qx7d"),d=n.n(l),u=n("ByaW"),p=n.n(u),h=n("m67B"),f=n.n(h),m=n("L21V"),b=n("bQC9");const g=a.default.li`
  background-color: ${e=>e.selected?c.N20:"transparent"};
  padding: 8px 12px;
  cursor: pointer;
  display: flex;
  margin-top: 0;
`,v=a.default.span`
  overflow: hidden;
`,y=a.default.div`
  color: ${c.N800};
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 20px;
`,O=a.default.div`
  color: ${c.N100};
  line-height: 14px;
  font-size: ${Object(s.g)()}px;
`,E=a.default.span`
  min-width: 16px;
  margin-top: 3px;
  margin-right: 12px;

  img {
    max-width: 16px;
  }
`;class w extends r.a.PureComponent{constructor(){super(...arguments),this.handleSelect=e=>{e.preventDefault();const{item:t,onSelect:n}=this.props;n(t.url,t.name)},this.handleMouseMove=()=>{const{onMouseMove:e,item:t}=this.props;e(t.objectId)}}renderIcon(){const{item:{icon:e,iconUrl:t}}=this.props;return e?r.a.createElement(E,null,e):t?r.a.createElement(E,null,r.a.createElement("img",{src:t})):null}renderWithSpaces(e,t,n=""){return r.a.createElement(r.a.Fragment,null," ",r.a.createElement("span",{className:"link-search-timestamp","data-test-id":"link-search-timestamp"}," ",e," ",t," ",n))}renderAbsoluteOrRelativeDate(e,t){const{intl:n}=this.props;let o="";switch(t){case"updated":o=n.formatMessage(b.a.timeUpdated);break;case"viewed":o=n.formatMessage(b.a.timeViewed)}return p()(e,Date.now())<-7?this.renderWithSpaces(o,f()(e,"MMMM DD, YYYY")):this.renderWithSpaces(o,d()(e,Date.now()),n.formatMessage(b.a.timeAgo))}renderTimeStamp(){const{lastUpdatedDate:e,lastViewedDate:t}=this.props.item;return t?this.renderAbsoluteOrRelativeDate(t,"viewed"):e?this.renderAbsoluteOrRelativeDate(e,"updated"):void 0}render(){const{item:e,selected:t}=this.props;return r.a.createElement(g,{"data-testid":"link-search-list-item",selected:t,onMouseMove:this.handleMouseMove,onClick:this.handleSelect},this.renderIcon(),r.a.createElement(v,null,r.a.createElement(y,null,e.name),r.a.createElement(O,null,e.container,this.renderTimeStamp())))}}var C=Object(m.g)(w);n.d(t,"a",(function(){return x}));const T=a.default.div`
  padding-top: 0;
`,S=a.default.div`
  text-align: center;
  min-height: 80px;
  margin-top: 30px;
`,k=a.default.ul`
  padding: 0;
  list-style: none;
`;class x extends o.PureComponent{render(){const{onSelect:e,onMouseMove:t,items:n,selectedIndex:o,isLoading:a}=this.props;let s,c;return n&&n.length>0&&(s=r.a.createElement(k,null,n.map((n,i)=>r.a.createElement(C,{item:n,selected:o===i,onMouseMove:t,onSelect:e,key:n.objectId})))),a&&(c=r.a.createElement(S,null,r.a.createElement(i.a,{size:"medium"}))),r.a.createElement(T,null,s,c)}}},FqsR:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return f}));var o=n("Y9Xt"),r=n("OiW7"),i=n.n(r),a=n("GSvx"),s=n.n(a),c=n("5IXX"),l=n.n(c);function d(e){return void 0!==e&&(e>="0"&&e<="9")}function u(e){for(const t of e){const e=t>="0"&&t<="9",n=-1!==". ,/".indexOf(t);if(!e&&!n)return!1}return!0}function p(e,t,n){if(e>t.length)return;const r=function(e){const t=Object(o.c)({day:7,month:1,year:1992},e);return t.replace(/\d+/g,e=>{if(!e)return"";switch(parseInt(e)%100){case 92:return e.replace(/.{1}/g,"y");case 1:return 1===e.length?"m":"mm";case 7:return 1===e.length?"d":"dd"}return""})}(n);if(!r)return;const i=r.replace(/[^ymd]+$/g,""),a={d:"day",m:"month",y:"year"},s=a[i[0]],c=a[i[i.length-1]],l=["day","month","year"].filter(e=>e!==s&&e!==c)[0];return function(e,t){let n=e-1,o=!0;const r=t.replace(/[^0-9]+$/g,"");for(;n>=0&&o;){d(r[n])||(o=!1),n-=1}return o}(e,t)?s:function(e,t){let n=e,o=!0;const r=t.replace(/[^0-9]+$/g,"");for(;n<r.length&&o;){d(r[n])||(o=!1),n+=1}return o}(e,t)?c:l}function h(e,t,n){const r=Object(o.b)(e),a="day"===t?i()(r,n):"month"===t?s()(r,n):l()(r,n);return Object(o.a)(a)}function f(e){const t=new Date;return void 0!==e&&t.getDate()===e.day&&e.month===t.getMonth()+1&&e.year===t.getFullYear()}},GGKp:function(e,t,n){"use strict";var o=n("ehfC"),r=n("9dFV"),i=n("Czhu"),a=n("Rs2C");n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d}));const s=new o.PluginKey("mobileScroll"),{createPluginState:c,getPluginState:l,createCommand:d}=Object(r.a)(s,(function(e,t){switch(t.type){case a.a.SET_KEYBOARD_HEIGHT:return Object(i.a)(Object(i.a)({},e),{},{keyboardHeight:t.keyboardHeight});case a.a.SET_HEIGHT_DIFF:return Object(i.a)(Object(i.a)({},e),{},{heightDiff:t.heightDiff});case a.a.SET_WINDOW_HEIGHT:return Object(i.a)(Object(i.a)({},e),{},{windowHeight:t.windowHeight});case a.a.SET_MOBILE_PADDING_TOP:return Object(i.a)(Object(i.a)({},e),{},{mobilePaddingTop:t.paddingTop})}return e}))},GKbP:function(e,t,n){"use strict";e.exports=function(e,t,n){var o,r,i,a,s,c,l,d,u,p,h=t+1,f=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(p=e.parentType,e.parentType="paragraph";h<n&&!e.isEmpty(h);h++)if(!(e.sCount[h]-e.blkIndent>3)){if(e.sCount[h]>=e.blkIndent&&(c=e.bMarks[h]+e.tShift[h])<(l=e.eMarks[h])&&(45===(u=e.src.charCodeAt(c))||61===u)&&(c=e.skipChars(c,u),(c=e.skipSpaces(c))>=l)){d=61===u?1:2;break}if(!(e.sCount[h]<0)){for(r=!1,i=0,a=f.length;i<a;i++)if(f[i](e,h,n,!0)){r=!0;break}if(r)break}}return!!d&&(o=e.getLines(t,h,e.blkIndent,!1).trim(),e.line=h+1,(s=e.push("heading_open","h"+String(d),1)).markup=String.fromCharCode(u),s.map=[t,e.line],(s=e.push("inline","",0)).content=o,s.map=[t,e.line-1],s.children=[],(s=e.push("heading_close","h"+String(d),-1)).markup=String.fromCharCode(u),e.parentType=p,!0)}},GSvx:function(e,t,n){var o=n("UFJf"),r=n("TxQ3");e.exports=function(e,t){var n=o(e),i=Number(t),a=n.getMonth()+i,s=new Date(0);s.setFullYear(n.getFullYear(),a,1),s.setHours(0,0,0,0);var c=r(s);return n.setMonth(a,Math.min(c,n.getDate())),n}},"Gc+k":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));const o={color:n("3IV/").N800.toLowerCase(),label:"Dark gray"},r=e=>{const{$from:t,$to:n,$cursor:r}=e.selection,{textColor:i}=e.schema.marks;let a,s=[];r?s.push(i.isInSet(e.storedMarks||r.marks())||void 0):e.doc.nodesBetween(t.pos,n.pos,e=>{if(e.isLeaf){const t=i.isInSet(e.marks)||void 0;return s.push(t),!t}return!0}),s=s.filter(e=>(!e||!a||e.attrs.color!==a.attrs.color)&&(a=e,!0));const c=s.filter(e=>!!e);return c.length>1||1===c.length&&s.length>1?null:c.length?c[0].attrs.color:o.color}},GeyI:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("ehfC"),r=n("m23B");function i(e,t=!1){return(n,i)=>{if(!i)return!1;if(t){const{tr:t,selection:r}=n,a=r.$from.marks();return i(t.setSelection(o.TextSelection.create(t.doc,r.$from.pos-1,r.$from.pos)).replaceSelectionWith(n.doc.type.schema.text(e,[n.schema.marks.typeAheadQuery.create({trigger:e}),...a]),!1)),!0}return i(Object(r.safeInsert)(n.schema.text(e,[n.schema.marks.typeAheadQuery.create({trigger:e})]))(n.tr)),!0}}},GlS5:function(e,t,n){"use strict";var o=n("Czhu"),r=n("UdmJ"),i=n("4zHY"),a=n("5p9S");const s=(e,t,n)=>t*e.width+n;function c(e,t,n){const o=s(e,t,n);return n>0&&e.map[o-1]===e.map[o]||n<e.width-1&&e.map[o+1]===e.map[o]}function l(e,t,n){const o=s(e,t,n);return!(t>0)||e.map[o-e.width]!==e.map[o]}function*d(e,t){const{map:n,tableStart:o,table:r}=e;let d=t>0?-1:0;Object(i.b)(n,r,t+d)&&(d=0===t||t===n.width?null:0);for(let i=0;i<n.height;i++){let u=s(e.map,i,t),p=n.map[u];const h=c(e.map,i,t)&&l(e.map,i,t);let f=null==d?Object(a.a)(r.type.schema).cell:r.nodeAt(n.map[u+d]).type;h||(p=n.positionAt(i,t,r));let m=r.nodeAt(p);const b={from:o+p,to:o+p,row:i,col:h?n.colCount(p):t,type:f,hasMergedCells:h};m&&(b.attrs=m.attrs,b.to=o+p+m.nodeSize);const g=yield b;g&&g>0&&(i+=g)}}function u(e,t){let[n,o]=[0,t.map.width-1];const r=e.values();let i=r.next();for(let a=0;a<t.map.height&&!i.done;a++)for(let e=n;e<=o;e++){const s=a*t.map.width+e,c=t.map.map[s],l=i.value.from-t.tableStart;if(c===l){n=e;const a=o-n+s;for(let e=s;e<=a&&t.map.map[e]===c;e++)o=n+e-s;if(n===o)return n;i=r.next();break}if(e===t.map.width-1){if(c+t.table.nodeAt(c).nodeSize===l)return t.map.width}}return null}var p=n("jyPs");function h(e,t){const n=e.nodeAt(t);if(!n||"table"!==n.type.name)throw new Error(`No table at position "${t}".`);return{map:p.b.get(n),table:n,tableStart:e.resolve(t).start(1),bottom:0,left:0,right:0,top:0}}var f=n("rYm2");function m(e){return e&&e.rowspan?e.rowspan-1:0}function b(e,t,n,o,r,i){if(void 0!==o.mergeWith){let n=e.doc.nodeAt(e.mapping.map(o.mergeWith));const a=i-t.map.colCount(o.mergeWith-t.tableStart),s=r?Object(f.c)(n.attrs,a):Object(f.a)(n.attrs,a);if(s.colspan>0)return e.setNodeMarkup(e.mapping.map(o.mergeWith),void 0,s),{tr:e,skipRows:m(s),cellStep:o};o.from=o.mergeWith,o.to=o.from+n.nodeSize,o.mergeWith=void 0}let a=0;if(r){a=m(e.doc.nodeAt(e.mapping.map(o.from)).attrs),e.delete(e.mapping.map(o.from),e.mapping.map(o.to))}else o.newCell?(e.insert(e.mapping.map(o.from),o.newCell),a=m(o.newCell.attrs)):e.insert(e.mapping.map(o.from),n.type.createAndFill());return{tr:e,skipRows:a,cellStep:o}}function g(e,t){return void 0!==e.mergeWith?[e.mergeWith,1,1]:t?[e.from,e.to-e.from,0]:e.newCell?[e.from,0,e.newCell.nodeSize]:[e.from,0,4]}function v(e,t,n,r,i){const a=function(e,t,n){if(n)return e.map(t.from)-t.from;const[,o,r]=g(t,n);return e.map(t.from)-t.from-(r-o)}(i,n,r),s=Object(o.a)(Object(o.a)({},n),{},{from:n.from+a,to:n.to+a});if(void 0!==n.mergeWith&&(s.mergeWith=n.mergeWith+a),r){const o=e.nodeAt(n.from);s.newCell=o.copy(o.content);const{column:r,rect:i}=t();if(r<i.map.width){const e=i.map.colCount(n.from-i.tableStart)+o.attrs.colspan-1===r;void 0!==n.mergeWith&&e&&(s.mergeWith=s.from,s.from=s.to)}}return s}function y(e,t,n,o){const r={from:e.from,to:e.to};return e.hasMergedCells&&(t!==e.col||n)&&(r.mergeWith=e.from),o&&(void 0!==o.mergeWith&&(r.mergeWith=o.mergeWith),o.newCell&&(r.newCell=o.newCell)),r}class O{constructor(e){e&&(this.table=e)}addTableSideEffect(e,t,n){this.table={from:e,to:t,node:n}}handleAddTable(e,t){return!(t||!this.table)&&(e.insert(this.table.from,this.table.node),!0)}handleRemoveTable(e,t,n,o,r){return!(!r||1!==n.map.width||0!==o)&&(this.addTableSideEffect(t,t+n.table.nodeSize,n.table.copy(n.table.content)),e.delete(t,t+n.table.nodeSize),!0)}getTableMap(e){if(!this.table)return;const{from:t,to:n}=this.table;return e?new r.StepMap([t,n-t,0]):new r.StepMap([t,0,n-t])}map(e){if(this.table)return{from:e.map(this.table.from),to:e.map(this.table.to),node:this.table.node}}invert(e){if(!this.table)return;const t=e.nodeAt(this.table.from);return{from:this.table.from,to:this.table.from+t.nodeSize,node:t.copy(t.content)}}toJSON(){if(this.table)return{from:this.table.from,to:this.table.to,node:this.table.node.toJSON()}}static fromJSON(e,t){return{from:t.from,to:t.to,node:e.nodeFromJSON(t.node)}}}function E(e,t,n,r){let i=t.tableStart;for(let o=0;o<n;o++)i+=t.table.child(o).nodeSize;const a=t.table.child(n);let s=i+a.nodeSize;e.delete(e.mapping.map(i),e.mapping.map(s));return{skipRows:function(e,t,n,r){let i=0;const{map:a,table:s,tableStart:c}=t;for(let l=0;l<a.width;l++){let t=n*a.width+l,d=a.map[t];if(n>0&&d===a.map[t-a.width]){const t=e.mapping.map(d+c);let n=e.doc.nodeAt(t).attrs;e.setNodeMarkup(t,void 0,Object(o.a)(Object(o.a)({},n),{},{rowspan:n.rowspan-1})),l+=n.colspan-1}else l===r&&(i=s.nodeAt(d).attrs.rowspan-1)}return i}(e,t,n,r),row:{from:i,to:s,rowNode:a.copy(a.content)}}}function w(e,t,n,r){const i=r.rowNode.child(0);return e.insert(e.mapping.map(r.from),r.rowNode),function(e,t,n){const{map:r,tableStart:i}=t;for(let a=0;a<r.width;a++){let t=n*r.width+a,s=r.map[t];const c=e.mapping.map(s+i);let l=e.doc.nodeAt(c).attrs;e.setNodeMarkup(c,void 0,Object(o.a)(Object(o.a)({},l),{},{rowspan:l.rowspan+1})),a+=l.colspan-1}}(e,t,n),i.attrs.rowspan-1}class C{constructor(e){this.deleteHandler=()=>{const e=[];return{handle:(t,n,o,r,i)=>{if(!function(e,t,n){const o=e.table.child(t);return!!o&&(1===o.childCount&&!c(e.map,t,n))}(n,o,r))return{handled:!1};const{row:a,skipRows:s}=E(t,n,o,r);return e.push(a),{handled:!0,skipRows:s}},end:()=>{e.length>0?this.rows=e:this.rows=void 0}}},this.addHandler=()=>{let e=0,t=0;return{handle:(n,o,r,i,a)=>{if(!this.rows||t>=this.rows.length)return{handled:!1};let s,c;for(;(c=this.rows[t])&&c.from>e&&c.from<a.from;)s=w(n,o,r-1,c),t++;return e=a.from,s&&0!==s?{handled:!0,skipRows:s-1}:{handled:!1}},end:(e,n,o)=>{if(!this.rows||t>=this.rows.length)return;let r;for(;r=this.rows[t];)w(e,n,n.map.height-1,r),t++}}},this.rows=e}start(e){return e?this.deleteHandler():this.addHandler()}addRowRanges(e,t){if(!this.rows)return e;const n=[];for(const o of this.rows){const{from:e,to:r}=o;t?n.push(e,r-e,0):n.push(e,0,r-e)}return function(e,t){const n=[],o=e.length,r=t.length;let i=0,a=0;for(;i<o&&a<r;)e[i]<t[a]?(n.push(e[i],e[i+1],e[i+2]),i+=3):(n.push(t[a],t[a+1],t[a+2]),a+=3);return i<o&&n.push(...e.slice(i)),a<r&&n.push(...t.slice(i)),n}(e,n)}map(e){return[]}invert(e,t,n){if(!this.rows)return;const r=[];for(const i of this.rows)if(t){let e=n.map(i.from)-i.from;r.push(Object(o.a)(Object(o.a)({},i),{},{from:i.from+e,to:i.from+e}))}return r}toJSON(){if(!this.rows)return;const e=[];for(const t of this.rows)e.push({from:t.from,to:t.to,rowNode:t.rowNode.toJSON()});return e}static fromJSON(e,t){const n=[];for(const o of t)n.push({from:o.from,to:o.to,rowNode:e.nodeFromJSON(o.rowNode)});return n}}class T{constructor(e){this.table=new O(e&&e.table),this.rows=new C(e&&e.rows)}getTableMap(e){return this.table.getTableMap(e)}map(e){const t={},n=this.table.map(e),o=this.rows.map(e);return n&&(t.table=n),o&&(t.rows=o),t}invert(e,t,n){const o={},r=this.table.invert(e);r&&(o.table=r);const i=this.rows.invert(e,t,n);return i&&(o.rows=i),o}toJSON(){const e=this.table.toJSON(),t=this.rows.toJSON();if(!e&&!t)return;const n={};return e&&(n.table=e),t&&(n.rows=t),n}static fromJSON(e,t){const n={};return t.table&&(n.table=O.fromJSON(e,t.table)),t.rows&&(n.rows=C.fromJSON(e,t.rows)),n}}var S=n("lSUb");n.d(t,"a",(function(){return k}));class k extends r.Step{constructor(e,t,n=!1){var o;super(),this.tablePos=e,this.isDelete=n,this.sideEffectsHandler=new T(t.sideEffects),this.columnInfo=(o=t.cells,new Map(o.map(e=>[e.from,e])))}apply(e){const{tablePos:t}=this,n=new r.Transform(e);if(this.sideEffectsHandler.table.handleAddTable(n,this.isDelete))return r.StepResult.ok(n.doc);let o;try{o=h(e,t)}catch(a){return r.StepResult.fail(a.message)}const i=u(this.columnInfo,o);return null===i?r.StepResult.fail(`No column for this cells "${function(e){let t=[];for(const n of e.values())t.push(n.from);return`[${t.join(",")}]`}(this.columnInfo)}" in table at position "${t}".`):(this.sideEffectsHandler.table.handleRemoveTable(n,this.tablePos,o,i,this.isDelete)||(this.columnInfo=this.applyCellSteps(n,o,i,this.isDelete)),r.StepResult.ok(n.doc))}map(e){const t=e.mapResult(this.tablePos);if(t.deleted)return null;const n=[];for(const i of this.columnInfo.values()){const t=e.mapResult(i.from),r=e.mapResult(i.to);if(t.deleted&&r.deleted)continue;const a=Object(o.a)(Object(o.a)({},i),{},{from:t.pos,to:r.pos});void 0!==i.mergeWith&&(a.mergeWith=e.map(i.mergeWith)),n.push(a)}if(0===n.length)return null;const r=this.sideEffectsHandler.map(e);return new k(t.pos,{cells:n,sideEffects:r},this.isDelete)}invert(e){const t=this.getMap(),n=(o=e,r=this.tablePos,i=this.columnInfo,Object(S.default)(()=>{const e=h(o,r),t=u(i,e);if(null===t)throw new Error("no column");return{rect:e,column:t}}));var o,r,i;const a=Array.from(this.columnInfo.values(),o=>v(e,n,o,this.isDelete,t)),s=this.sideEffectsHandler.invert(e,this.isDelete,t);return new k(this.tablePos,{cells:a,sideEffects:s},!this.isDelete)}getMap(){const e=this.sideEffectsHandler.getTableMap(this.isDelete);if(e)return e;let t=[];for(const n of this.columnInfo.values())t.push(...g(n,this.isDelete));return t=this.sideEffectsHandler.rows.addRowRanges(t,this.isDelete),new r.StepMap(t)}merge(e){return null}toJSON(){const e={stepType:"ak-add-column",tablePos:this.tablePos,cells:Array.from(this.columnInfo.values(),e=>{const t={from:e.from,to:e.to};return void 0!==e.mergeWith&&(t.mergeWith=e.mergeWith),void 0!==e.newCell&&(t.newCell=e.newCell.toJSON()),t}),isDelete:this.isDelete},t=this.sideEffectsHandler.toJSON();return t&&(e.sideEffects=t),e}static fromJSON(e,t){const n=t.cells.map(t=>Object(o.a)(Object(o.a)({},t),{},{newCell:t.newCell?e.nodeFromJSON(t.newCell):void 0}));let r;return t.sideEffects&&(r=T.fromJSON(e,t.sideEffects)),new k(t.tablePos,{cells:n,sideEffects:r},t.isDelete)}static create(e,t,n,o=!1){const r=[],i=d(h(e,t),n);let a=i.next();for(;!a.done;){const e=a.value;r.push(y(e,n,o));let t=0;e.attrs&&e.attrs.rowspan&&(t=e.attrs.rowspan-1),a=i.next(t)}return new k(t,{cells:r},o)}applyCellSteps(e,t,n,o){const r=new Map,i=this.sideEffectsHandler.rows.start(this.isDelete),a=d(t,n);let s=a.next();for(;!s.done;){const c=s.value,l=y(c,n,o,this.columnInfo.get(c.from)),d=i.handle(e,t,c.row,n,c);if(d.handled){s=a.next(d.skipRows);continue}const{skipRows:u,cellStep:p}=b(e,t,c,l,o,n);r.set(l.from,p),s=a.next(u)}return i.end(e,t,n),r}}r.Step.jsonID("ak-add-column",k)},HPtl:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("5rvf"),r=n("jVwy"),i=n("n46c"),a=n("fyDS");const s=(e,t)=>{const n=e.toLowerCase().replace(" ","-"),o=Object(r.a)(i.a,n);return{value:t,label:e,border:a.a,message:o}},c=[],l=[];o.a.forEach((e,t)=>{c.push(s(e,t))}),o.b.forEach((e,t)=>{l.push(s(e,t))})},HbsM:function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("ERkP")),a={top:{width:"100%",height:"10px",top:"-5px",left:"0px",cursor:"row-resize"},right:{width:"10px",height:"100%",top:"0px",right:"-5px",cursor:"col-resize"},bottom:{width:"100%",height:"10px",bottom:"-5px",left:"0px",cursor:"row-resize"},left:{width:"10px",height:"100%",top:"0px",left:"-5px",cursor:"col-resize"},topRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",top:"-10px",cursor:"ne-resize"},bottomRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",bottom:"-10px",cursor:"se-resize"},bottomLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",bottom:"-10px",cursor:"sw-resize"},topLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",top:"-10px",cursor:"nw-resize"}};t.Resizer=function(e){return i.createElement("div",{className:e.className||"",style:o({position:"absolute",userSelect:"none"},a[e.direction],e.replaceStyles||{}),onMouseDown:function(t){e.onResizeStart(t,e.direction)},onTouchStart:function(t){e.onResizeStart(t,e.direction)}},e.children)}},HlfJ:function(e,t,n){"use strict";var o=n("T1Ll").arrayReplaceAt;function r(e){return/^<\/a\s*>/i.test(e)}e.exports=function(e){var t,n,i,a,s,c,l,d,u,p,h,f,m,b,g,v,y,O,E=e.tokens;if(e.md.options.linkify)for(n=0,i=E.length;n<i;n++)if("inline"===E[n].type&&e.md.linkify.pretest(E[n].content))for(m=0,t=(a=E[n].children).length-1;t>=0;t--)if("link_close"!==(c=a[t]).type){if("html_inline"===c.type&&(O=c.content,/^<a[>\s]/i.test(O)&&m>0&&m--,r(c.content)&&m++),!(m>0)&&"text"===c.type&&e.md.linkify.test(c.content)){for(u=c.content,y=e.md.linkify.match(u),l=[],f=c.level,h=0,d=0;d<y.length;d++)b=y[d].url,g=e.md.normalizeLink(b),e.md.validateLink(g)&&(v=y[d].text,v=y[d].schema?"mailto:"!==y[d].schema||/^mailto:/i.test(v)?e.md.normalizeLinkText(v):e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,""),(p=y[d].index)>h&&((s=new e.Token("text","",0)).content=u.slice(h,p),s.level=f,l.push(s)),(s=new e.Token("link_open","a",1)).attrs=[["href",g]],s.level=f++,s.markup="linkify",s.info="auto",l.push(s),(s=new e.Token("text","",0)).content=v,s.level=f,l.push(s),(s=new e.Token("link_close","a",-1)).level=--f,s.markup="linkify",s.info="auto",l.push(s),h=y[d].lastIndex);h<u.length&&((s=new e.Token("text","",0)).content=u.slice(h),s.level=f,l.push(s)),E[n].children=a=o(a,t,l)}}else for(t--;a[t].level!==c.level&&"link_open"!==a[t].type;)t--}},HwP6:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("Vhfh"),a=n("oW86"),s=n("DPgy"),c=n("MN6c"),l=n("PZ9j"),d=n("ehfC"),u=n("Czhu"),p=n("9dFV");const h=new d.PluginKey("mediaEditorPlugin"),{createPluginState:f,createCommand:m,getPluginState:b}=Object(p.a)(h,(e,t)=>{switch(t.type){case"open":return Object(u.a)(Object(u.a)({},e),{},{editor:{identifier:t.identifier,pos:t.pos}});case"close":case"upload":return Object(u.a)(Object(u.a)({},e),{},{editor:void 0});case"setMediaClientConfig":return Object(u.a)(Object(u.a)({},e),{},{mediaClientConfig:t.mediaClientConfig});default:return e}},{mapping:(e,t)=>t.editor?Object(u.a)(Object(u.a)({},t),{},{editor:Object(u.a)(Object(u.a)({},t.editor),{},{pos:e.mapping.map(t.editor.pos)})}):t}),g=e=>t=>{const n=async(e,n)=>{if("mediaProvider"!==e)return;const o=await n;if(!o)return;const r=await o.uploadMediaClientConfig||await o.viewMediaClientConfig,{dispatch:i,state:a}=t;m({type:"setMediaClientConfig",mediaClientConfig:r})(a,i,t)};return e.subscribe("mediaProvider",n),{destroy(){e.unsubscribe("mediaProvider",n)}}},v=({dispatch:e,providerFactory:t})=>new d.Plugin({state:f(e,{}),key:h,view:g(t)});var y=n("u5kr");const O=new d.PluginKey("mediaAltTextPlugin"),{createPluginState:E,createCommand:w,getPluginState:C}=Object(p.a)(O,(e,t)=>{switch(t.type){case"updateAltText":return Object(u.a)({},e);case"openMediaAltTextMenu":return Object(u.a)(Object(u.a)({},e),{},{isAltTextEditorOpen:!0});case"closeMediaAltTextMenu":return Object(u.a)(Object(u.a)({},e),{},{isAltTextEditorOpen:!1});default:return e}},{onSelectionChanged:(e,t)=>e.getMeta(y.a)?t:{isAltTextEditorOpen:!1}}),T=({dispatch:e,providerFactory:t})=>new d.Plugin({state:E(e,{isAltTextEditorOpen:!1}),key:O,view:()=>({update:(e,t)=>{const n=C(e.state),o=C(t);n&&o&&o.isAltTextEditorOpen&&!n.isAltTextEditorOpen&&!e.hasFocus()&&e.focus()}})});var S=n("ALnk"),k=n("IWmk"),x=n("ACnq"),A=n("tVIO"),j=n("4FMG");const I=w(e=>!!Object(x.e)(e)&&{type:"closeMediaAltTextMenu"}),M=(N=j.a.OPENED,R=e=>!!Object(x.e)(e)&&{type:"openMediaAltTextMenu"},P=e=>e.setMeta("scrollIntoView",!1),Object(A.d)({action:N,actionSubject:j.b.MEDIA,actionSubjectId:j.c.ALT_TEXT,eventType:j.d.TRACK})(w(R,P)));var N,R,P;var L=n("CP8u"),D=n("m23B"),_=n("DA0Z"),B=n("mQXi");function $(e,t){const{$from:n}=e,o=n.index(n.depth-1),r=n.node(n.depth-1);return r?r.maybeChild(o+t):null}function z(e){return(t,n)=>{const{$from:o}=t.selection,{paragraph:r}=t.schema.nodes,i=$(t.selection,-2);if(!i)return!1;const a=$(t.selection,-1),s=o.pos-a.nodeSize-i.nodeSize;let c=t.tr;if(function(t){let n=!1;try{n=e(t)}catch(o){}return n}(i))c=c.replace(s-1,s+i.nodeSize);else if(Object(L.q)(t.selection)?c.replace(o.pos,o.pos+o.parent.nodeSize-1):c.replace(o.pos-1,o.pos+o.parent.nodeSize-1),i.type===r){const e=s+i.nodeSize-2;Object(D.safeInsert)(o.parent.content,e)(c)}else{const e=s+i.nodeSize-1;Object(D.safeInsert)(o.parent.copy(o.parent.content),e)(c)}return n&&n(c),!0}}const F=e=>{const t=Object(L.l)(e);return(e,n)=>{const{selection:o,schema:r}=e,{$from:i}=o;if(!function(e){if(!e.empty)return!1;const{$from:t}=e;return t.parentOffset<=0}(e.selection))return!1;if(!function(e,t){const{$from:n}=e;return n.parent.type===t}(e.selection,r.nodes.paragraph))return!1;if(!function(e,t,n){const o=$(e,n);return!!o&&o.type===t}(e.selection,r.nodes.mediaSingle,-1))return!1;return"wrap-right"===$(e.selection,-1).attrs.layout?z(t)(e,n):(n&&Object(_.f)(e,o=>{t(i.parent)&&!Object(B.d)(e)&&o.replace(i.pos-1,i.pos+i.parent.nodeSize-1),n(o)}),!0)}};var U;!function(e){e.showToolbar="MEDIA_SHOW_TOOLBAR",e.hideToolbar="MEDIA_HIDE_TOOLBAR",e.setUrl="MEDIA_SET_LINK_TO",e.unlink="MEDIA_LINKING_UNLINK"}(U||(U={}));const H=new d.PluginKey("mediaLinking"),W={visible:!1,editable:!1,mediaPos:null,link:""};const V=Object(p.a)(H,(e,t)=>{switch(t.type){case U.showToolbar:return Object(u.a)(Object(u.a)({},e),{},{visible:!0});case U.setUrl:return Object(u.a)(Object(u.a)({},e),{},{editable:!0,link:t.payload});case U.hideToolbar:return Object(u.a)(Object(u.a)({},e),{},{visible:!1});case U.unlink:return Object(u.a)(Object(u.a)({},e),{},{link:"",visible:!1,editable:!1})}return e},{mapping:function(e,t){return t&&null!==t.mediaPos?Object(u.a)(Object(u.a)({},t),{},{mediaPos:e.mapping.map(t.mediaPos)}):t},onSelectionChanged:function(e){if(!(e.selection instanceof d.NodeSelection))return W;const t=e.selection.$from.pos+1,n=e.doc.nodeAt(t);if(!n||"media"!==n.type.name)return W;const o=n.marks.find(e=>"link"===e.type.name);return o?Object(u.a)(Object(u.a)({},W),{},{mediaPos:t,editable:!0,link:o.attrs.href}):Object(u.a)(Object(u.a)({},W),{},{mediaPos:t})}}),{createCommand:K,getPluginState:q}=V;var G=n("4SN/"),Y=n("rEY+");const X=e=>{const{doc:t,selection:n,schema:o}=e;if(!(t&&n&&n instanceof d.NodeSelection&&n.node.type===o.nodes.mediaSingle))return;const r=t.nodeAt(n.$anchor.pos+1);return r&&r.type===o.nodes.media?r:void 0};var J=n("CROD");const Z=async(e,t)=>{if("external"===e.attrs.type)return"external";if(e.attrs.id)try{const n=await Object(J.a)(t).file.getCurrentState(e.attrs.id,{collectionName:e.attrs.collection});if(n&&"error"!==n.status)return n.mediaType}catch(n){}},Q=K(e=>{const t=q(e);if(t&&null!==t.mediaPos){if(e.doc.nodeAt(t.mediaPos))return{type:U.showToolbar}}return!1}),ee=(e,t,n)=>{if(t&&n){const o=X(e);if(!o)return!1;const{mediaClientConfig:r}=Object(c.b)(e);if(!r)return!1;Z(o,r).then(e=>{"external"!==e&&"image"!==e||X(n.state)!==o||t(n.state.tr.setMeta(H,{type:U.showToolbar}))})}return!0},te=K({type:U.hideToolbar}),ne=(e,t,n)=>{te(e,t,n),n&&n.focus()};function oe(e,t,{forceRemove:n=!1,url:o}){const r=q(t);if(!r||null===r.mediaPos)return e;const i=t.doc.resolve(r.mediaPos),a=t.doc.nodeAt(i.pos);if(!a)return e;const s=t.schema.marks.link,{media:c}=t.schema.nodes;return Object(Y.g)(s,(e,t)=>{if(!t||t.type!==c)return;if(n)return!1;const r=Object(G.g)(o);return e&&e.href===r?void 0:""!==r.trim()&&Object(u.a)(Object(u.a)({},e),{},{href:r})},[c])(i.pos,i.pos+a.nodeSize,e,t),e}const re=(e,t,n,o)=>Object(A.a)(t,e,{action:n,eventType:j.d.TRACK,actionSubject:j.b.MEDIA,actionSubjectId:j.c.LINK,attributes:o}),ie=K({type:U.unlink},(e,t)=>{const n=oe(e,t,{forceRemove:!0});return re(n,t,j.a.DELETED)}),ae=(e,t)=>{const n=function(e){const{link:t}=e.schema.marks,n=q(e);if(!n||null===n.mediaPos)return;const o=e.doc.resolve(n.mediaPos),r=e.doc.nodeAt(o.pos);if(!r)return;if(!t.isInSet(r.marks))return;return r.marks.find(e=>e.type===t).attrs.href}(t);return n?e!==n?j.a.EDITED:void 0:j.a.ADDED},se=(e,t)=>K({type:U.setUrl,payload:Object(G.g)(e)},(n,o)=>{const r=ae(e,o);if(!r)return n;try{const i=oe(n,o,{url:e});return re(n,o,r,r===j.a.ADDED?{inputMethod:t}:void 0),i}catch(i){throw re(n,o,j.a.ERRORED,{action:r}),i}});const ce=e=>(l.a.getState(e).ignoreLinks=!0,!1),le=e=>l.a.getState(e).splitMediaGroup();var de=function(){const e={};return k.bindKeymapWithCommand(k.undo.common,ce,e),k.bindKeymapWithCommand(k.enter.common,le,e),k.bindKeymapWithCommand(k.insertNewLine.common,le,e),Object(S.b)(e)},ue=n("BYFu"),pe=n.n(ue),he=n("cU7i"),fe=n("xuWu");var me=({editorView:e,eventDispatcher:t,pluginKey:n,isDisabled:o,isReducedSpacing:i})=>r.a.createElement(fe.a,{editorView:e,eventDispatcher:t,plugins:{mediaPlugin:n},render:({mediaPlugin:e})=>{return e.allowsUploads?r.a.createElement(he.a,{onClick:(t=e,()=>(t.showMediaPicker(),!0)),disabled:o,title:"Files & images",spacing:i?"none":"default",iconBefore:r.a.createElement(pe.a,{label:"Files & images"})}):null;var t}}),be=n("DhWB"),ge=n("WCbN"),ve=n.n(ge),ye=n("lb6e"),Oe=n("4p2i"),Ee=n("bwR+"),we=n("2McE");let Ce=1;const Te=new Map;class Se extends o.Component{constructor(){super(...arguments),this.state={animate:!1,offset:0},this.handleSize=({offset:e})=>this.setState({offset:e}),this.handleScroll=({animate:e,offset:t})=>this.setState({animate:e,offset:t})}renderCards(){const{items:e,mediaClientConfig:t,shouldOpenMediaViewer:n,featureFlags:o}=this.props,i=n?{list:e.map(e=>e.identifier)}:void 0;return e.map(e=>{const a=(e=>{switch(e.mediaItemType){case"external-image":return e.dataURI;case"file":if("string"==typeof e.id)return e.id;{const t=Te.get(e.id);if(t)return t;Ce++;const n=""+Ce;return Te.set(e.id,n),n}}})(e.identifier);return t?r.a.createElement(Ee.a,Object.assign({key:a,mediaClientConfig:t,dimensions:Oe.a,useInlinePlayer:!1,shouldOpenMediaViewer:n,mediaViewerDataSource:i,featureFlags:o},e)):r.a.createElement(ye.a,{key:a,dimensions:Oe.a})})}render(){const{testId:e="media-filmstrip"}=this.props,{animate:t,offset:n}=this.state;return r.a.createElement(we.a,{animate:t,offset:n,onSize:this.handleSize,onScroll:this.handleScroll,testId:e},this.renderCards())}}var ke=n("IkHm"),xe=n("NlFJ"),Ae=n("MWcs"),je=n("h75s"),Ie=n("5lLR"),Me=n("IC1n"),Ne=n.n(Me),Re=n("mSFF"),Pe=n("Am/7"),Le=n("K1NO");class De{constructor(e){this.updateContextId=async()=>{const e=this.getAttrs();if(!e||"file"!==e.type)return;const{id:t}=e,n=await this.getObjectId();Object(Le.e)(t,{__contextId:n},this.props.isMediaSingle)(this.props.view.state,this.props.view.dispatch)},this.hasFileAttributesDefined=()=>{const e=this.getAttrs();return e&&"file"===e.type&&e.__fileName&&e.__fileMimeType&&e.__fileSize&&e.__contextId},this.updateFileAttrs=async(e=!0)=>{const t=this.getAttrs(),n=await this.props.mediaProvider;if(!n||!n.uploadParams||!t||"file"!==t.type||this.hasFileAttributesDefined())return;const o=n.viewMediaClientConfig,r=Object(J.a)(o),i={collectionName:t.collection};let a;try{if(a=await r.file.getCurrentState(t.id,i),"error"===a.status)return}catch(p){return}const s=this.getNodeContextId()||await this.getObjectId(),{name:c,mimeType:l,size:d}=a,u={__fileName:c,__fileMimeType:l,__fileSize:d,__contextId:s};_e(t,u)&&Object(Le.e)(t.id,u,e)(this.props.view.state,this.props.view.dispatch)},this.getAttrs=()=>{const{attrs:e}=this.props.node;if(e)return e},this.getObjectId=async()=>{const e=await this.props.contextIdentifierProvider;return e&&e.objectId},this.uploadExternalMedia=async e=>{const{node:t}=this.props,n=await this.props.mediaProvider;if(t&&n){const r=n.uploadMediaClientConfig;if(!r||!t.attrs.url)return;const i=Object(J.a)(r),a=n.uploadParams&&n.uploadParams.collection;try{const n=await i.file.uploadExternal(t.attrs.url,a),{uploadableFileUpfrontIds:o,dimensions:r}=n;Object(Le.d)(e()+1,{id:o.id,collection:a,height:r.height,width:r.width,occurrenceKey:o.occurrenceKey})(this.props.view.state,this.props.view.dispatch)}catch(o){this.props.dispatchAnalyticsEvent&&this.props.dispatchAnalyticsEvent({action:j.a.UPLOAD_EXTERNAL_FAIL,actionSubject:j.b.EDITOR,eventType:j.d.OPERATIONAL})}}},this.getNodeContextId=()=>{const e=this.getAttrs();if(e&&"file"===e.type)return e.__contextId},this.updateDimensions=e=>{Object(Le.e)(e.id,{height:e.height,width:e.width},!0)(this.props.view.state,this.props.view.dispatch)},this.hasDifferentContextId=async()=>{const e=this.getNodeContextId(),t=await this.getObjectId();return!(!e||!t||e===t)},this.isNodeFromDifferentCollection=async()=>{const e=await this.props.mediaProvider;if(!e||!e.uploadParams)return!1;const t=e.uploadParams.collection,n=this.getAttrs();if(!n||"file"!==n.type)return!1;const{collection:o,__contextId:r}=n;return!(!r&&!(await this.getObjectId())||t===o)},this.copyNodeFromBlobUrl=async e=>{const t=this.getAttrs();if(!t||"external"!==t.type)return;const{url:n}=t,o=Object(Pe.b)(n);if(!o)return;const r=await this.props.mediaProvider;if(!r||!r.uploadParams)return;const i=r.uploadParams.collection,{contextId:a,id:s,collection:c,height:l,width:d,mimeType:u,name:p,size:h}=o,f=r.uploadMediaClientConfig;if(!f||!f.getAuthFromContext)return;const m=Object(J.a)(f),b=await f.getAuthFromContext(a),g={id:s,collection:c,authProvider:()=>Promise.resolve(b)},v={collection:i,authProvider:f.authProvider,occurrenceKey:Ne()()},y=await m.file.copyFile(g,v);Object(Le.d)(e()+1,{id:y.id,collection:i,height:l,width:d,__fileName:p,__fileMimeType:u,__fileSize:h})(this.props.view.state,this.props.view.dispatch)},this.copyNode=async()=>{const e=await this.props.mediaProvider,{isMediaSingle:t,view:n}=this.props,o=this.getAttrs();if(!e||!e.uploadParams||!o||"file"!==o.type)return;const r=this.getNodeContextId(),i=e.uploadMediaClientConfig;if(i&&i.getAuthFromContext&&r){const a=Object(J.a)(i),s=await i.getAuthFromContext(r),c=await this.getObjectId(),{id:l,collection:d}=o,u={id:l,collection:d,authProvider:()=>Promise.resolve(s)},p=e.uploadParams.collection,h={collection:p,authProvider:i.authProvider,occurrenceKey:Ne()()},f=await a.file.copyFile(u,h);Object(Le.f)(u.id,{id:f.id,collection:p,__contextId:c},t)(n.state,n.dispatch)}},this.props=e}isMediaBlobUrl(){const e=this.getAttrs();return!(!e||"external"!==e.type||!Object(Pe.c)(e.url))}async getRemoteDimensions(){const e=await this.props.mediaProvider,{mediaOptions:t}=this.props,n=this.getAttrs();if(!e||!n)return!1;const{height:o,width:r}=n;if("external"===n.type||!n.id)return!1;const{id:i,collection:a}=n;if(o&&r)return!1;if(t&&!t.allowRemoteDimensionsFetch)return{id:i,height:Re.a,width:Re.b};const s=e.viewMediaClientConfig,c=Object(J.a)(s),l=await c.getImageMetadata(i,{collection:a});return!(!l||!l.original)&&{id:i,height:l.original.height||Re.a,width:l.original.width||Re.b}}async handleExternalMedia(e){if(this.isMediaBlobUrl())try{await this.copyNodeFromBlobUrl(e)}catch(t){await this.uploadExternalMedia(e)}else await this.uploadExternalMedia(e)}}const _e=(e,t)=>e.__fileName!==t.__fileName||e.__fileMimeType!==t.__fileMimeType||e.__fileSize!==t.__fileSize||e.__contextId!==t.__contextId,Be=e=>Object(je.c)(e.anchorPos,e.headPos,e.getPos(),e.node.nodeSize);class $e extends r.a.Component{constructor(e){super(e),this.state={viewMediaClientConfig:void 0},this.updateNodeAttrs=e=>{const{view:t,mediaProvider:n,contextIdentifierProvider:o}=e;this.mediaNodes.forEach(e=>{new De({view:t,mediaProvider:n,contextIdentifierProvider:o,node:e,isMediaSingle:!1}).updateFileAttrs(!1)})},this.setMediaItems=e=>{const{node:t}=e;this.mediaNodes=[],t.forEach((t,n)=>{this.mediaPluginState.mediaGroupNodes[t.attrs.id]={node:t,getPos:()=>e.getPos()+n+1},this.mediaNodes.push(t)})},this.getIdentifier=e=>"external"===e.attrs.type?{mediaItemType:"external-image",dataURI:e.attrs.url}:{id:e.attrs.id,mediaItemType:"file",collectionName:e.attrs.collection},this.isNodeSelected=e=>{const t=Be(this.props);return t===je.a.selectedInRange||t===je.a.selectedInside&&this.props.anchorPos===e},this.renderChildNodes=()=>{const{viewMediaClientConfig:e}=this.state,{getPos:t,allowLazyLoading:n,disabled:o,mediaOptions:i}=this.props,a=this.mediaNodes.map((e,i)=>{const a=()=>t()+i+1;return{identifier:this.getIdentifier(e),isLazy:n,selected:this.isNodeSelected(a()),onClick:()=>{Object(Ae.f)(this.props.view,a())},actions:[{handler:o?()=>{}:this.mediaPluginState.handleMediaNodeRemoval.bind(null,void 0,a),icon:r.a.createElement(ve.a,{label:"delete"})}]}});return r.a.createElement(Se,{items:a,mediaClientConfig:e,featureFlags:i.featureFlags})},this.mediaNodes=[],this.mediaPluginState=l.a.getState(e.view.state),this.setMediaItems(e),this.state={viewMediaClientConfig:void 0}}componentDidMount(){this.updateMediaClientConfig(),this.mediaNodes.forEach(async e=>{if("external"===e.attrs.type)return;const{view:t,mediaProvider:n,contextIdentifierProvider:o}=this.props,r=new De({view:t,mediaProvider:n,contextIdentifierProvider:o,node:e,isMediaSingle:!1});r.getNodeContextId()||await r.updateContextId();await r.hasDifferentContextId()&&await r.copyNode()})}UNSAFE_componentWillReceiveProps(e){this.updateMediaClientConfig(),this.setMediaItems(e),!1!==e.isCopyPasteEnabled&&this.updateNodeAttrs(e)}shouldComponentUpdate(e){return t=this.props,n=e,Be(t)!==Be(n)||Be(n)===je.a.selectedInside&&t.anchorPos!==n.anchorPos||this.props.node!==e.node||this.state.viewMediaClientConfig!==this.mediaPluginState.mediaClientConfig;var t,n}updateMediaClientConfig(){const{viewMediaClientConfig:e}=this.state,{mediaClientConfig:t}=this.mediaPluginState;!e&&t&&this.setState({viewMediaClientConfig:t})}render(){return this.renderChildNodes()}}$e.displayName="MediaGroup";class ze extends ke.a{render(e,t){const{providerFactory:n,mediaOptions:o}=e,i=this.getPos;return r.a.createElement(be.a,{providers:["mediaProvider","contextIdentifierProvider"],providerFactory:n,renderNode:({mediaProvider:e,contextIdentifierProvider:n})=>r.a.createElement(fe.a,{editorView:this.view,plugins:{reactNodeViewState:xe.b,editorDisabledPlugin:Ie.b},render:({editorDisabledPlugin:a})=>e?r.a.createElement($e,{node:this.node,getPos:i,view:this.view,forwardRef:t,disabled:(a||{}).editorDisabled,allowLazyLoading:o.allowLazyLoading,mediaProvider:e,contextIdentifierProvider:n,isCopyPasteEnabled:o.isCopyPasteEnabled,anchorPos:this.view.state.selection.$anchor.pos,headPos:this.view.state.selection.$head.pos,mediaOptions:o}):null})})}}const Fe=(e,t,n,o={})=>(r,i,a)=>new ze(r,i,a,e,t,{providerFactory:n,mediaOptions:o}).init();var Ue=n("5lAk"),He=n("xwvf"),We=n("J64l"),Ve=n("qPpp"),Ke=n("MhaC"),qe=n("KsTJ");const Ge=qe.default.div`
  img {
    width: 100%;
  }

  & > div {
    ${Ke.a};
    position: relative;
    clear: both;
  }
`;Ge.displayName="ResizerWrapper";var Ye=n("xGpb"),Xe=n("+kAP"),Je=n("0rke"),Ze=n("KwWb"),Qe=n("fPje");class et extends r.a.Component{constructor(){super(...arguments),this.state={offsetLeft:tt(this.insideInlineLike,this.insideLayout,this.props.view.dom,void 0),isVideoFile:!0},this.calcNewSize=(e,t)=>{const{layout:n,view:{state:o}}=this.props,r=100*Object(We.b)(e,this.props.lineLength);this.setState({resizedPctWidth:r});let i=Object(D.hasParentNodeOfType)(o.schema.nodes.table)(o.selection)?n:this.calcUnwrappedLayout(r,e);return r<=100?(!this.wrappedLayout||t&&100===r||(i=n),{width:r,layout:i}):{width:this.props.pctWidth||null,layout:i}},this.calcUnwrappedLayout=(e,t)=>e<=100?"center":t<=Ve.X?"wide":"full-width",this.calcColumnLeftOffset=()=>{const{offsetLeft:e}=this.state;return this.insideInlineLike?Object(We.a)(e,this.props.lineLength,this.props.gridSize):0},this.calcPxWidth=e=>{const{width:t,height:n,layout:o,pctWidth:r,lineLength:i,containerWidth:a,fullWidthMode:s,getPos:c,view:{state:l}}=this.props,{resizedPctWidth:d}=this.state,u="function"==typeof c?c():void 0;return Object(Je.a)({origWidth:t,origHeight:n,pctWidth:r,state:l,containerWidth:{width:a,lineLength:i},isFullWidthModeEnabled:s,layout:e||o,pos:u,resizedPctWidth:d})},this.highlights=(e,t)=>{const n=Object(Xe.c)(e,t),{layoutColumn:o,table:r,expand:i,nestedExpand:a}=this.props.view.state.schema.nodes;if(this.$pos&&Object(D.findParentNodeOfTypeClosestToPos)(this.$pos,[o,r,i,a].filter(Boolean)))return[];if(n>Ve.X)return["full-width"];const{layout:s,lineLength:c,gridSize:l}=this.props,d=Object(We.a)(n,c,l),u=Math.round(d),p=[];return"wrap-left"===s||"align-start"===s?p.push(0,u):"wrap-right"===s||"align-end"===s?p.push(l,l-u):this.insideInlineLike?p.push(Math.round(d+this.calcColumnLeftOffset())):p.push(Math.floor((l-u)/2),Math.ceil((l+u)/2)),p},this.saveWrapper=e=>this.wrapper=e}componentDidUpdate(){const e=tt(this.insideInlineLike,this.insideLayout,this.props.view.dom,this.wrapper);return e!==this.state.offsetLeft&&e>=0&&this.setState({offsetLeft:e}),!0}get wrappedLayout(){return Re.e.indexOf(this.props.layout)>-1}async componentDidMount(){const{viewMediaClientConfig:e}=this.props;e&&await this.checkVideoFile(e)}UNSAFE_componentWillReceiveProps(e){this.props.viewMediaClientConfig!==e.viewMediaClientConfig&&this.checkVideoFile(e.viewMediaClientConfig),this.props.layout!==e.layout&&this.checkLayout(this.props.layout,e.layout)}async checkVideoFile(e){const t=this.$pos;if(!t||!e)return;const n=this.props.view.state.doc.nodeAt(t.pos+1);if(!n||!n.attrs.id)return;const o=Object(J.a)(e);try{const e=await o.file.getCurrentState(n.attrs.id,{collectionName:n.attrs.collection});e&&"error"!==e.status&&"image"===e.mediaType&&this.setState({isVideoFile:!1})}catch(r){this.setState({isVideoFile:!1})}}checkLayout(e,t){const{resizedPctWidth:n}=this.state;if(Re.e.indexOf(e)>-1&&"center"===t&&n){const e=this.calcUnwrappedLayout(n,this.calcPxWidth(t));this.props.updateSize(n,e)}}get $pos(){if("function"!=typeof this.props.getPos)return null;const e=this.props.getPos();return Number.isNaN(e)||"number"!=typeof e?null:this.props.view.state.doc.resolve(e)}get gridWidth(){const{gridSize:e}=this.props;return this.wrappedLayout||this.insideInlineLike?e:e/2}get insideInlineLike(){const e=this.$pos;if(!e)return!1;const{listItem:t}=this.props.view.state.schema.nodes;return!!Object(D.findParentNodeOfTypeClosestToPos)(e,[t])}get insideLayout(){const e=this.$pos;if(!e)return!1;const{layoutColumn:t}=this.props.view.state.schema.nodes;return!!Object(D.findParentNodeOfTypeClosestToPos)(e,[t])}render(){const{width:e,height:t,layout:n,pctWidth:o,containerWidth:i,fullWidthMode:a,selected:s,view:{state:c},children:l}=this.props,d=this.calcPxWidth(),u=t/e*d,p=d,h={};Xe.a.forEach(e=>{const t="left"===e?"right":"left";h[e]=["full-width","wide","center"].concat("wrap-"+t).concat("align-"+Xe.b[t]).indexOf(n)>-1,"left"===e&&this.insideInlineLike&&(h[e]=!1)});const f={$pos:this.$pos,akEditorWideLayoutWidth:Ve.X,allowBreakoutSnapPoints:this.props.allowBreakoutSnapPoints,containerWidth:this.props.containerWidth,gridSize:this.props.gridSize,gridWidth:this.gridWidth,insideInlineLike:this.insideInlineLike,insideLayout:this.insideLayout,isVideoFile:this.state.isVideoFile,lineLength:this.props.lineLength,offsetLeft:this.state.offsetLeft,wrappedLayout:this.wrappedLayout};return r.a.createElement(Ge,{ratio:(u/p*100).toFixed(3),layout:n,isResized:!!o,containerWidth:i||e,innerRef:this.saveWrapper,fullWidthMode:a},r.a.createElement(Ye.a,Object.assign({},this.props,{width:p,height:u,selected:s,enable:h,calcNewSize:this.calcNewSize,snapPoints:Object(Qe.b)(f),scaleFactor:this.wrappedLayout||this.insideInlineLike?1:2,highlights:this.highlights,handleResizeStart:()=>{const e=Object(Ze.c)(c);return!e||!e.dragging},nodeType:"media",dispatchAnalyticsEvent:this.props.dispatchAnalyticsEvent}),l))}}function tt(e,t,n,o){let r=0;if(o&&e&&!t){r=o.getBoundingClientRect().left-n.getBoundingClientRect().left}return r}var nt=n("1TJf"),ot=n("czJC"),rt=n("L2cJ");class it extends o.Component{constructor(){super(...arguments),this.state={width:void 0,height:void 0,viewMediaClientConfig:void 0,isCopying:!1},this.createMediaNodeUpdater=e=>{const t=this.props.node.firstChild;return new De(Object(u.a)(Object(u.a)({},e),{},{isMediaSingle:!0,node:t||this.props.node,dispatchAnalyticsEvent:this.props.dispatchAnalyticsEvent}))},this.setViewMediaClientConfig=async e=>{const t=await e.mediaProvider;if(t){const e=t.viewMediaClientConfig;this.setState({viewMediaClientConfig:e})}},this.updateMediaNodeAttributes=async e=>{const t=this.createMediaNodeUpdater(e),{addPendingTask:n}=this.props.mediaPluginState,o=this.props.node.firstChild;if(!o)return;const r=await t.getRemoteDimensions();if(r&&t.updateDimensions(r),"external"===o.attrs.type&&o.attrs.__external){const e=t.handleExternalMedia(this.props.getPos);return n(e),void(await e)}t.getNodeContextId()||await t.updateContextId();if(await t.hasDifferentContextId()){this.setState({isCopying:!0});try{const e=t.copyNode();n(e),await e}catch(i){this.setState({isCopying:!1})}}},this.selectMediaSingle=({event:e})=>{e.stopPropagation();const t=this.props.getPos(),{state:n}=this.props.view;if(e.shiftKey){if(n.selection instanceof ot.a)return;Object(Ae.g)(this.props.view,n.selection.from<t?n.selection.from:t,n.selection.to>t?n.selection.to:t+3)}else Object(Ae.f)(this.props.view,t)},this.updateSize=(e,t)=>{const{state:n,dispatch:o}=this.props.view,r=this.props.getPos();if(void 0===r)return;const i=n.tr.setNodeMarkup(r,void 0,Object(u.a)(Object(u.a)({},this.props.node.attrs),{},{layout:t,width:e}));return i.setMeta("scrollIntoView",!1),o(i)},this.forwardInnerRef=e=>{this.props.forwardRef(e)},this.getLineLength=(e,t)=>{if(Object(Qe.d)(e,t)){const n=e.state.doc.resolve(t),o=e.nodeDOM(n.pos);if(n.nodeAfter&&Qe.c.indexOf(n.nodeAfter.attrs.layout)>-1&&o&&o.parentElement)return o.parentElement.offsetWidth;if(o instanceof HTMLElement)return o.offsetWidth}return null}}UNSAFE_componentWillReceiveProps(e){e.mediaProvider!==this.props.mediaProvider&&this.setViewMediaClientConfig(e),!1!==e.isCopyPasteEnabled&&this.createMediaNodeUpdater(e).updateFileAttrs()}async componentDidMount(){const{contextIdentifierProvider:e}=this.props;await Promise.all([this.setViewMediaClientConfig(this.props),this.updateMediaNodeAttributes(this.props)]),this.setState({contextIdentifierProvider:await e})}render(){const{selected:e,getPos:t,node:n,mediaOptions:o,fullWidthMode:i,view:{state:a},view:s}=this.props,{layout:c,width:l}=n.attrs,d=n.firstChild.attrs;let{width:u,height:p}=d;if("external"===d.type){if(Object(x.d)(d)){const e=Object(Pe.b)(d.url);if(e){const{width:t,height:n}=e;u=u||t,p=p||n}}const{width:e,height:t}=this.state;null===u&&(u=e||Re.b),null===p&&(p=t||Re.a)}u&&p||(u=Re.b,p=Re.a);const h={layout:c,width:u,height:p,containerWidth:this.props.width,lineLength:this.props.lineLength,pctWidth:l,fullWidthMode:i},f=r.a.createElement(rt.a,{innerRef:this.forwardInnerRef});let m=!!this.props.mediaOptions.allowResizing;if(!this.props.mediaOptions.allowResizingInTables){const e=t();if(e){const t=a.doc.resolve(e),{table:n}=a.schema.nodes,o=!!Object(D.findParentNodeOfTypeClosestToPos)(t,[n]);m=m&&!o}}const b=this.getLineLength(s,t())||this.props.lineLength;return m?r.a.createElement(et,Object.assign({},h,{lineLength:b,view:this.props.view,getPos:t,updateSize:this.updateSize,displayGrid:Object(nt.a)(this.props.eventDispatcher),gridSize:12,viewMediaClientConfig:this.state.viewMediaClientConfig,allowBreakoutSnapPoints:o&&o.allowBreakoutSnapPoints,selected:e(),dispatchAnalyticsEvent:this.props.dispatchAnalyticsEvent}),f):r.a.createElement(Re.c,Object.assign({},h),f)}}it.defaultProps={mediaOptions:{}},it.displayName="MediaSingleNode";class at extends ke.a{constructor(){super(...arguments),this.lastOffsetLeft=0,this.forceViewUpdate=!1,this.selectionType=null,this.checkAndUpdateSelectionType=()=>{const e=this.getPos,{selection:t}=this.view.state,n=Object(je.c)(t.$anchor.pos,t.$head.pos,e(),this.node.nodeSize);return this.selectionType=n,n},this.isNodeSelected=()=>(this.checkAndUpdateSelectionType(),null!==this.selectionType)}createDomRef(){const e=document.createElement("div");return Ue.a.chrome&&this.reactComponentProps.mediaOptions&&this.reactComponentProps.mediaOptions.allowMediaSingleEditable&&(e.contentEditable="true"),e}getContentDOM(){return{dom:document.createElement("div")}}viewShouldUpdate(e){return this.forceViewUpdate?(this.forceViewUpdate=!1,!0):this.node.attrs!==e.attrs||(this.selectionType!==this.checkAndUpdateSelectionType()||super.viewShouldUpdate(e))}getNodeMediaId(e){if(e.firstChild)return e.firstChild.attrs.id}update(e,t,n){return n||(n=(e,t)=>this.getNodeMediaId(e)===this.getNodeMediaId(t)),super.update(e,t,n)}render(e,t){const{eventDispatcher:n,fullWidthMode:o,providerFactory:i,mediaOptions:a,dispatchAnalyticsEvent:s}=this.reactComponentProps,c=this.getPos;return r.a.createElement(be.a,{providers:["mediaProvider","contextIdentifierProvider"],providerFactory:i,renderNode:({mediaProvider:e,contextIdentifierProvider:i})=>r.a.createElement(fe.a,{editorView:this.view,plugins:{width:He.b,mediaPluginState:l.a},render:({width:l,mediaPluginState:d})=>r.a.createElement(it,{width:l.width,lineLength:l.lineLength,node:this.node,getPos:c,mediaProvider:e,contextIdentifierProvider:i,mediaOptions:a,view:this.view,fullWidthMode:o,selected:this.isNodeSelected,eventDispatcher:n,mediaPluginState:d,dispatchAnalyticsEvent:s,forwardRef:t})})})}ignoreMutation(){if(this.dom){const e=this.dom.offsetLeft;e!==this.lastOffsetLeft&&(this.lastOffsetLeft=e,this.forceViewUpdate=!0,this.update(this.node,[],()=>!0))}return!0}}const st=(e,t,n,o,r={})=>(i,a,s)=>new at(i,a,s,e,t,{eventDispatcher:t,fullWidthMode:r.fullWidthEnabled,providerFactory:n,mediaOptions:r,dispatchAnalyticsEvent:o,isCopyPasteEnabled:r.isCopyPasteEnabled}).init();var ct=n("xzME"),lt=n.n(ct),dt=n("bQC9"),ut=n("QF9V"),pt=n("trDh"),ht=n.n(pt),ft=n("koe5"),mt=n("zxbv"),bt=n("L21V");const gt=Object(bt.f)({annotate:{id:"fabric.editor.annotate",defaultMessage:"Annotate",description:"Annotate an image by drawing arrows, adding text, or scribbles."}}),vt=(e,t)=>{const n=l.a.getState(e);if(!n)return!1;const{mediaSingle:o}=e.schema.nodes,r=n.selectedMediaContainerNode();if(!r||r.type!==o)return!1;const{id:i,collection:a,occurrenceKey:s}=r.firstChild.attrs;return Object(A.d)({action:j.a.CLICKED,actionSubject:j.b.MEDIA,actionSubjectId:j.c.ANNOTATE_BUTTON,eventType:j.d.UI})((c=e.selection.from+1,m({type:"open",identifier:{id:i,collectionName:a,mediaItemType:"file",occurrenceKey:s},pos:c})))(e,t);var c};class yt extends r.a.Component{constructor(){super(...arguments),this.state={isImage:!1},this.onClickAnnotation=()=>{const{view:e}=this.props;e&&vt(e.state,e.dispatch)}}async componentDidMount(){await this.checkIsImage()}async checkIsImage(){const e=Object(J.a)(this.props.viewMediaClientConfig);if(this.props.id)try{const t=await e.file.getCurrentState(this.props.id,{collectionName:this.props.collection});t&&"error"!==t.status&&"image"===t.mediaType&&this.setState({isImage:!0})}catch(t){}}componentDidUpdate(e){e.id!==this.props.id&&this.setState({isImage:!1},()=>{this.checkIsImage()})}render(){if(!this.state.isImage)return null;const{intl:e}=this.props,t=e.formatMessage(gt.annotate);return r.a.createElement(r.a.Fragment,null,r.a.createElement(mt.a,null),r.a.createElement(ft.a,{title:t,icon:r.a.createElement(ht.a,{label:t}),onClick:this.onClickAnnotation}))}}const Ot=(e,t)=>(n,o)=>{const i=e.selectedMediaContainerNode();return i&&e.mediaClientConfig?r.a.createElement(yt,{key:o,viewMediaClientConfig:e.mediaClientConfig,id:i.firstChild.attrs.id,collection:i.firstChild.attrs.collection,view:n,intl:t}):null};var Et=n("YEM6"),wt=n.n(Et),Ct=n("ZTTl"),Tt=n.n(Ct),St=n("aAmv"),kt=n("DR7P"),xt=n("FcLh"),At=n("HbGN");const jt=(e,t)=>e.slice(0,t);class It extends r.a.Component{constructor(e){super(e),this.activityProvider=null,this.handleSubmit=()=>{const{items:e,url:t,selectedIndex:n}=this.state,o=this.getCurrentInputMethod();if(o)switch(o){case j.e.MANUAL:this.props.onSubmit({url:t,text:t,inputMethod:j.e.MANUAL});break;case j.e.TYPEAHEAD:{const t=e[n];this.setState(()=>({url:t.url})),this.props.onSubmit&&this.props.onSubmit({url:t.url,text:t.name,inputMethod:j.e.TYPEAHEAD});break}}},this.handleSelected=(e,t)=>{this.props.onSubmit&&(this.setState(()=>({url:e})),this.props.onSubmit({text:t,url:e,inputMethod:j.e.TYPEAHEAD}))},this.handleChange=async e=>{this.setState({url:e}),this.activityProvider&&(0===e.length?this.setState({items:jt(await this.activityProvider.getRecentItems(),this.props.limit),selectedIndex:-1}):this.setState({items:jt(await this.activityProvider.searchRecent(e),this.props.limit),selectedIndex:0}))},this.handleKeyDown=e=>{const{items:t,selectedIndex:n}=this.state;t&&t.length&&("ArrowDown"===e.key?(e.preventDefault(),this.setState({selectedIndex:(n+1)%t.length})):"ArrowUp"===e.key&&(e.preventDefault(),this.setState({selectedIndex:n>0?n-1:t.length-1})))},this.handleMouseMove=e=>{const{items:t}=this.state;if(t){const n=t.findIndex(t=>t.objectId===e);this.setState({selectedIndex:n})}},this.renderRecentList=()=>{const{items:e,isLoading:t,selectedIndex:n}=this.state;return r.a.createElement(xt.a,{items:e,isLoading:t,selectedIndex:n,onSelect:this.handleSelected,onMouseMove:this.handleMouseMove})},this.clearValue=()=>{this.setState({url:""})},this.state={selectedIndex:-1,isLoading:!1,items:[],url:e.defaultUrl||""}}UNSAFE_componentWillReceiveProps(e){this.props.defaultUrl!==e.defaultUrl&&this.setState(t=>t.url!==e.defaultUrl?{items:[],selectedIndex:-1,url:e.defaultUrl||""}:null)}async componentDidMount(){this.props.activityProvider&&(this.activityProvider=await this.props.activityProvider,await this.loadRecentItems(this.activityProvider))}async loadRecentItems(e){try{this.state.url||this.setState({isLoading:!0,items:jt(await e.getRecentItems(),this.props.limit)})}finally{this.setState({isLoading:!1})}}getCurrentInputMethod(){const{items:e,url:t,selectedIndex:n}=this.state;return e&&e.length>0&&n>-1?j.e.TYPEAHEAD:t&&t.length>0?j.e.MANUAL:void 0}render(){const{render:e}=this.props,{url:t}=this.state;return e({activityProvider:this.activityProvider,inputProps:{onChange:this.handleChange,onKeyDown:this.handleKeyDown,onSubmit:this.handleSubmit,value:t},clearValue:this.clearValue,currentInputMethod:this.getCurrentInputMethod(),renderRecentList:this.renderRecentList})}}It.defaultProps={limit:5};var Mt,Nt=(Mt=Object(bt.g)(It),class extends r.a.Component{constructor(){super(...arguments),this.renderNode=e=>{const t=this.props,{providerFactory:n}=t,o=Object(At.a)(t,["providerFactory"]),{activityProvider:i}=e;return r.a.createElement(Mt,Object.assign({activityProvider:i},o))}}render(){const{providerFactory:e}=this.props;return r.a.createElement(be.a,{providers:["activityProvider"],providerFactory:e,renderNode:this.renderNode})}}),Rt=n("3IV/"),Pt=(n("przm"),n("1whV")),Lt=n.n(Pt),Dt=n("BMbf"),_t=n("ZgvQ"),Bt=n("WEdt");const $t=qe.default.div`
  ${Bt.h200} font-weight: normal;
  color: ${e=>e.error?Rt.R400:e.valid?Rt.G400:Rt.N200};
  margin-top: ${Object(_t.multiply)(Dt.h,.5)}px;
  display: flex;
  justify-content: baseline;
`,zt=qe.default.span`
  display: flex;
  margin-right: 4px;
`,Ft=({children:e})=>r.a.createElement($t,{error:!0},r.a.createElement(zt,null,r.a.createElement(Lt.a,{size:"small",label:"error","aria-label":"error"})),e),Ut=Object(bt.f)({backLink:{id:"fabric.editor.backLink",defaultMessage:"Go back",description:"Go back from media linking toolbar to main toolbar"}}),Ht=qe.default.section`
  display: flex;
  line-height: 0;
  padding: 12px 24px 12px 0;
  margin: 0 4px 0 32px;
  border-top: 1px solid ${Rt.R400};
  align-items: start;
  display: flex;
  flex-direction: column;
`,Wt=qe.default.span`
  padding: 4px 8px 4px 0px;
`;class Vt extends r.a.PureComponent{constructor(){super(...arguments),this.state={validationErrors:[]},this.handleSubmit=({url:e,inputMethod:t})=>{this.props.onSubmit(e,{inputMethod:t})},this.handleOnBack=({url:e,inputMethod:t})=>{const{onBack:n}=this.props;n&&n(e,{inputMethod:t})},this.handleCancel=()=>{const{onCancel:e}=this.props;e&&e()},this.handleUnlink=()=>{const{onUnlink:e}=this.props;e&&e()},this.handleOnBlur=e=>{this.props.onBlur(e.url)},this.renderContainer=({activityProvider:e,inputProps:{onChange:t,onKeyDown:n,onSubmit:o,value:i},currentInputMethod:a,renderRecentList:s})=>{const{intl:{formatMessage:c},displayUrl:l}=this.props,d=c(Ut.backLink),u=c(dt.b.unlink),p=this.state.validationErrors.map((function(e,t){return r.a.createElement(Ft,{key:t},e)}));return r.a.createElement("div",{className:"recent-list"},r.a.createElement(kt.a,{provider:!!e},r.a.createElement(kt.e,null,r.a.createElement(Wt,null,r.a.createElement(ft.a,{title:d,icon:r.a.createElement(wt.a,{label:d}),onClick:()=>this.handleOnBack({url:i,inputMethod:a})})),r.a.createElement(St.a,{testId:"media-link-input",placeholder:(h=!!e,c(h?dt.b.placeholder:dt.b.linkPlaceholder)),autoFocus:!0,onCancel:this.handleCancel,defaultValue:i,onSubmit:e=>{const t=this.getValidationErrors(e,a);this.setState({validationErrors:t}),t.length||o()},onChange:e=>{this.setState({validationErrors:[]}),t(e)},onKeyDown:n}),Object(G.g)(l)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(mt.a,null),r.a.createElement(ft.a,{title:u,icon:r.a.createElement(Tt.a,{label:u}),onClick:this.handleUnlink}))),!!p.length&&r.a.createElement(Ht,null,p),s()));var h}}getValidationErrors(e,t){const{intl:{formatMessage:n}}=this.props;return t===j.e.TYPEAHEAD?[]:e?Object(G.g)(e)?[]:[n(dt.b.invalidLink)]:[n(dt.b.emptyLink)]}render(){const{providerFactory:e,displayUrl:t}=this.props;return r.a.createElement(Nt,{defaultUrl:Object(G.g)(t),providerFactory:e,onSubmit:this.handleSubmit,onBlur:this.handleOnBlur,render:this.renderContainer})}}var Kt=Vt;function qt(e){const t=q(e);if(!t||null===t.mediaPos)return!1;const{nodes:{media:n},marks:{link:o}}=e.schema,r=e.doc.nodeAt(t.mediaPos);if(!r||r.type!==n)return!1;const{parent:i}=e.doc.resolve(t.mediaPos);return i&&i.type.allowsMarkType(o)}var Gt=n("Qwog");const Yt=Object(bt.f)({altText:{id:"fabric.editor.addAltText",defaultMessage:"Alt text",description:"Add an alt text for this image"},editAltText:{id:"fabric.editor.editAltText",defaultMessage:"Edit alt text",description:"Edit an alt text for this image"},back:{id:"fabric.editor.closeAltTextEdit",defaultMessage:"Back",description:"Back to toolbar"},clear:{id:"fabric.editor.clearAltTextEdit",defaultMessage:"Clear alt text",description:"Clear alt text"},placeholder:{id:"fabric.editor.placeholderAltText",defaultMessage:"Describe this image with alt text",description:"Describe this image with alt text"},supportText:{id:"fabric.editor.supportAltText",defaultMessage:"Alt text is useful for people using screen readers because of visual limitations.",description:"Alt text is useful for people using screen readers because of visual limitations."},validationMessage:{id:"fabric.editor.alttext.validation",defaultMessage:"Please remove any special characters in alt text.",description:"Please remove any special characters in alt text. "}});var Xt=n("wMvT"),Jt=n.n(Xt),Zt=n("lbXe"),Qt=n("EruW");const en=kt.d,tn=qe.default.p`
  color: ${Rt.N100};
  font-size: 12px;
  padding: 12px 40px;
  line-height: 20px;
  border-top: 1px solid ${Rt.N30};
  margin: 0;
`,nn=qe.default.div`
  width: ${en}px;
  display: flex;
  flex-direction: column;
  overflow: auto;
  line-height: 2;
`,on=qe.default.section`
  display: flex;
  line-height: 0;
  padding: 5px 0;
  align-items: center;
`,rn=qe.default.section`
  display: flex;
  line-height: 0;
  padding: 12px 24px 12px 0;
  margin: 0 12px 0 40px;
  border-top: 1px solid ${Rt.R400};
  align-items: start;
  display: flex;
  flex-direction: column;
`,an=qe.default.div`
  display: flex;
  padding: 4px 8px;
`,sn=qe.default.span`
  color: ${Rt.N80};
`;class cn extends r.a.Component{constructor(e){super(e),this.state={showClearTextButton:Boolean(this.props.value),validationErrors:this.props.value?this.getValidationErrors(this.props.value):[],lastValue:this.props.value},this.closeMediaAltTextMenu=()=>{const{view:e}=this.props;I(e.state,e.dispatch)},this.dispatchCancelEvent=e=>{const{view:t}=this.props;t.someProp("handleKeyDown",n=>n(t,e))},this.updateAltText=e=>{const{view:t}=this.props;(e=>w(e=>!!Object(x.e)(e)&&{type:"updateAltText"},(t,n)=>{const o=Object(x.b)(n),r=t.selection.from+1;return o&&(t.setMeta("scrollIntoView",!1),t.setNodeMarkup(r,void 0,Object(u.a)(Object(u.a)({},o.attrs),{},{alt:e}))),t}))(0===e.length?null:e)(t.state,t.dispatch)},this.handleOnChange=e=>{const t=this.getValidationErrors(e);this.setState({showClearTextButton:Boolean(e),validationErrors:t,lastValue:e},()=>{t&&t.length||this.updateAltText(e)})},this.handleOnBlur=()=>{const{value:e}=this.props,t=(this.state.lastValue||e||"").trim();this.handleOnChange(t)},this.handleClearText=()=>{this.handleOnChange("")};const{createAnalyticsEvent:t}=e;this.fireCustomAnalytics=Object(Qt.a)(t)}componentDidMount(){this.prevValue=this.props.value}componentWillUnmount(){this.fireAnalytics(j.a.CLOSED),!this.prevValue&&this.props.value&&this.fireAnalytics(j.a.ADDED),this.prevValue&&!this.props.value&&this.fireAnalytics(j.a.CLEARED),this.prevValue&&this.prevValue!==this.props.value&&this.fireAnalytics(j.a.EDITED)}getValidationErrors(e){const{altTextValidator:t}=this.props;return e&&"function"==typeof t&&t(e)||[]}render(){const{intl:{formatMessage:e}}=this.props,{showClearTextButton:t}=this.state,n=e(Yt.back),o=r.a.createElement(k.ToolTipContent,{description:n,keymap:k.escape,shortcutOverride:"Esc"}),i=(this.state.validationErrors||[]).map((function(e,t){return r.a.createElement(Ft,{key:t},e)}));return r.a.createElement(nn,null,r.a.createElement(on,null,r.a.createElement(an,null,r.a.createElement(ft.a,{title:e(Yt.back),icon:r.a.createElement(wt.a,{label:e(Yt.back)}),tooltipContent:o,onClick:this.closeMediaAltTextMenu})),r.a.createElement(St.a,{testId:"alt-text-input",placeholder:e(Yt.placeholder),defaultValue:this.state.lastValue,onCancel:this.dispatchCancelEvent,onChange:this.handleOnChange,onBlur:this.handleOnBlur,onSubmit:this.closeMediaAltTextMenu,maxLength:510,autoFocus:!0}),t&&r.a.createElement(an,null,r.a.createElement(ft.a,{testId:"alt-text-clear-button",title:e(Yt.clear),icon:r.a.createElement(sn,null,r.a.createElement(Jt.a,{label:e(Yt.clear)})),tooltipContent:e(Yt.clear),onClick:this.handleClearText}))),!!i.length&&r.a.createElement(rn,null,i),r.a.createElement(tn,null,e(Yt.supportText)))}fireAnalytics(e){const{createAnalyticsEvent:t}=this.props;t&&this.fireCustomAnalytics&&this.fireCustomAnalytics({payload:{action:e,actionSubject:j.b.MEDIA,actionSubjectId:j.c.ALT_TEXT,eventType:j.d.TRACK}})}}var ln=Object(Zt.a)()(Object(bt.g)(cn)),dn=n("P4jJ");const un=e=>({type:"custom",render:(t,n)=>{if(!t)return null;const o=Object(x.b)(t.state);return o?r.a.createElement(ln,{view:t,key:n,value:o.attrs.alt,altTextValidator:e&&e.altTextValidator}):null}});var pn=n("0dje"),hn=n.n(pn),fn=n("EFtY"),mn=n.n(fn),bn=n("iXHT"),gn=n("fVkN");const vn=qe.default.div`
  display: flex;
  align-items: center;
  margin-right: 4px;
`,yn=({editorState:e,mediaLinkingState:t,intl:n,showSeparatorLeft:i,onAddLink:a,onEditLink:s,onOpenLink:c})=>{const[d,u]=Object(o.useState)(!1);if(Object(o.useEffect)(()=>{var t;u(!1);const n=X(e);if(!n)return;const o=null===(t=l.a.getState(e))||void 0===t?void 0:t.mediaClientConfig;o&&Z(n,o).then(e=>{"external"!==e&&"image"!==e||u(!0)})},[e]),!d)return null;if(t&&t.editable){const e=Object(bn.a)(t.link),o=n.formatMessage(dt.b.editLink),a=n.formatMessage(e?gn.a.openLink:dt.b.unableToOpenLink);return r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(vn,null,r.a.createElement(mt.a,null)),r.a.createElement(vn,null,r.a.createElement(ft.a,{onClick:s,title:o,tooltipContent:r.a.createElement(k.ToolTipContent,{description:o,keymap:k.addLink})},o)),r.a.createElement(vn,null,r.a.createElement(mt.a,null)),r.a.createElement(ft.a,{target:"_blank",href:e?t.link:void 0,disabled:!e,onClick:c,title:a,icon:r.a.createElement(mn.a,{label:a}),className:"hyperlink-open-link"}))}{const e=n.formatMessage(dt.b.addLink);return r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(vn,null,r.a.createElement(mt.a,null)),r.a.createElement(ft.a,{testId:"add-link-button",onClick:a,title:e,tooltipContent:r.a.createElement(k.ToolTipContent,{description:e,keymap:k.addLink}),icon:r.a.createElement(hn.a,{label:e})}))}},On=(e,t)=>(t&&t(Object(D.removeSelectedNode)(e.tr)),!0),En=(e,t,n={})=>{const{providerFactory:o,allowResizing:i,allowAnnotation:a,allowLinking:s,allowAdvancedToolBarOptions:c,allowResizingInTables:d,allowAltTextOnImages:p,altTextValidator:h}=n,{mediaSingle:f}=e.schema.nodes,m=l.a.getState(e),b=q(e);if(!f||!m)return;const g={title:"Media floating controls",nodeType:f,getDomRef:()=>m.element};if(s&&b&&b.visible&&qt(e)){const n=((e,t,n,o,i)=>{const{link:a,visible:s,editable:c,mediaPos:l}=t;if(s&&null!==l){if(n.doc.nodeAt(l))return Object(u.a)(Object(u.a)({},e),{},{height:kt.c,width:kt.d,forcePlacement:!0,items:[{type:"custom",render:(e,t)=>e&&i?r.a.createElement(Kt,{key:t,displayUrl:a,providerFactory:i,intl:o,editing:c,onUnlink:()=>ie(e.state,e.dispatch,e),onBack:(t,n)=>{t.trim()&&n.inputMethod&&se(t,n.inputMethod)(e.state,e.dispatch,e),ne(e.state,e.dispatch,e)},onCancel:()=>ne(e.state,e.dispatch,e),onSubmit:(t,n)=>{se(t,n.inputMethod)(e.state,e.dispatch,e),ne(e.state,e.dispatch,e)},onBlur:()=>{ne(e.state,e.dispatch,e)}}):null}]})}})(g,b,e,t,o);if(n)return n}let v=[];if(c){if(v=Object(Gt.a)(e,t,e.schema.nodes.mediaSingle,i,d),v.length&&a&&v.push({type:"custom",render:Ot(m,t)}),s&&qt(e)){const e=v.length>0;v.push({type:"custom",render:(n,o)=>{if(null==n?void 0:n.state){const i=()=>{if(n){const{state:e,dispatch:t}=n;Q(e,t)}},a=()=>{if(n){const{state:e,dispatch:t}=n;return t(Object(A.a)(e,e.tr,{eventType:j.d.TRACK,action:j.a.VISITED,actionSubject:j.b.MEDIA,actionSubjectId:j.c.LINK})),!0}};return r.a.createElement(yn,{key:o,editorState:n.state,intl:t,mediaLinkingState:b,onAddLink:i,onEditLink:i,onOpenLink:a,showSeparatorLeft:e})}return null}})}v.length&&v.push({type:"separator"})}if(p){if(C(e).isAltTextEditorOpen)return((e,t)=>Object(u.a)(Object(u.a)({},e),{},{width:en,className:dn.a.FLOATING_TOOLBAR_COMPONENT,items:[un(t)]}))(g,{altTextValidator:h});v.push(((e,t)=>{const n=Object(x.b)(t),o=n&&n.attrs.alt?Yt.editAltText:Yt.altText,i=e.formatMessage(o);return{title:i,type:"button",onClick:M,showTitle:!0,testId:"alt-text-edit-button",tooltipContent:r.a.createElement(k.ToolTipContent,{description:i,keymap:k.addAltText})}})(t,e),{type:"separator"})}const y=[...v,{type:"button",appearance:"danger",icon:lt.a,onMouseEnter:Object(ut.b)(f,!0),onMouseLeave:Object(ut.b)(f,!1),title:t.formatMessage(dt.a.remove),onClick:On,testId:"media-toolbar-remove-button"}];return Object(u.a)(Object(u.a)({},g),{},{items:y})};var wn=n("5FKe"),Cn=n("Rz8l");class Tn extends r.a.PureComponent{constructor(){super(...arguments),this.state={SmartMediaEditor:Tn.SmartMediaEditor,isErrored:!1}}async UNSAFE_componentWillMount(){if(!this.state.SmartMediaEditor)try{const[e,t]=await Promise.all([Promise.all([n.e(7),n.e(54),n.e(115),n.e("@atlaskit-media-client~4134d62c")]).then(n.bind(null,"kGyc")),Promise.all([n.e(124),n.e("@atlaskit-internal_smart-media-editor~4134d62c")]).then(n.bind(null,"yu6F"))]);Tn.SmartMediaEditor=e.withMediaClient(t.default),this.setState({SmartMediaEditor:Tn.SmartMediaEditor})}catch(e){console.error(e),this.setState({isErrored:!0})}}render(){const{isErrored:e}=this.state;return e?null:this.state.SmartMediaEditor?r.a.createElement(this.state.SmartMediaEditor,Object.assign({},this.props)):r.a.createElement(Cn.a,{blankedColor:Rt.N700A,invertSpinnerColor:!0})}}Tn.displayName="AsyncSmartMediaEditor";class Sn extends r.a.PureComponent{constructor(){super(...arguments),this.onUploadStart=(e,t)=>{const{state:n,dispatch:o}=this.props.view;var r,i;(i=t,m({type:"upload",newIdentifier:r=e},(e,t)=>{const n=b(t).editor;if(!n)return e;const o=e.mapping.map(n.pos),a=e.doc.nodeAt(o),{media:s}=t.schema.nodes;if(!a||a.type!==s)return e;const c=Object(u.a)(Object(u.a)({},a.attrs),{},{id:r.id,collection:r.collectionName||a.attrs.collection,occurrenceKey:r.occurrenceKey,width:i.width,height:i.height});return e.setNodeMarkup(o,void 0,c)}))(n,o)},this.onClose=()=>{const{state:e,dispatch:t}=this.props.view;m({type:"close"})(e,t)}}render(){const{mediaEditorState:{editor:e,mediaClientConfig:t}}=this.props;if(!e||!t)return null;const{identifier:n}=e;return r.a.createElement(Tn,{identifier:n,mediaClientConfig:t,onUploadStart:this.onUploadStart,onClose:this.onClose})}}Sn.displayName="MediaEditor";var kn=n("Pmn2"),xn=n("z43y"),An=n("A0wU");const jn={on:()=>{},removeAllListeners:()=>{},emit:()=>{},destroy:()=>{},setUploadParams:()=>{}};class In extends r.a.Component{constructor(){super(...arguments),this.state={},this.handleMediaProvider=async(e,t)=>{const{mediaState:n,analyticsName:o}=this.props,r=await t;if(!r||!r.uploadParams)return;const i=await r.uploadMediaClientConfig||await r.viewMediaClientConfig;if(!i)return;const a={mediaClientConfig:i,errorReporter:n.options.errorReporter||new xn.a,featureFlags:n.mediaOptions&&n.mediaOptions.featureFlags},s=await new An.a("customMediaPicker",a,jn,kn.d,o).init();s.onNewMedia(n.insertFile),s.setUploadParams(r.uploadParams);const c={uploadParams:r.uploadParams};this.setState({pickerFacadeInstance:s,config:c,mediaClientConfig:i})}}componentDidMount(){this.props.mediaState.options.providerFactory.subscribe("mediaProvider",this.handleMediaProvider)}componentWillUnmount(){this.props.mediaState.options.providerFactory.unsubscribe("mediaProvider",this.handleMediaProvider)}render(){const{mediaClientConfig:e,config:t,pickerFacadeInstance:n}=this.state;return e&&t&&n?this.props.children({mediaClientConfig:e,config:t,pickerFacadeInstance:n}):null}}const Mn=({mediaState:e,featureFlags:t})=>r.a.createElement(In,{mediaState:e,analyticsName:"clipboard"},({mediaClientConfig:e,config:n,pickerFacadeInstance:o})=>r.a.createElement(kn.b,{mediaClientConfig:e,config:n,onError:o.handleUploadError,onPreviewUpdate:o.handleUploadPreviewUpdate,onEnd:o.handleReady,featureFlags:t})),Nn=({mediaState:e,isActive:t,featureFlags:n})=>r.a.createElement(In,{mediaState:e,analyticsName:"dropzone"},({mediaClientConfig:o,config:i,pickerFacadeInstance:a})=>{const{options:{customDropzoneContainer:s},handleDrag:c}=e,l=Object(u.a)(Object(u.a)({},i),{},{container:s});return t?r.a.createElement(kn.c,{mediaClientConfig:o,config:l,onError:a.handleUploadError,onPreviewUpdate:a.handleUploadPreviewUpdate,onEnd:a.handleReady,onDragEnter:()=>c("enter"),onDragLeave:()=>c("leave"),featureFlags:n}):null}),Rn=({mediaState:e,isOpen:t,onBrowseFn:n,featureFlags:o})=>r.a.createElement(In,{mediaState:e,analyticsName:"browser"},({mediaClientConfig:e,config:i,pickerFacadeInstance:a})=>r.a.createElement(kn.a,{onBrowseFn:n,isOpen:t,config:i,mediaClientConfig:e,onEnd:a.handleReady,onError:a.handleUploadError,onPreviewUpdate:a.handleUploadPreviewUpdate,featureFlags:o}));class Pn extends r.a.Component{constructor(){super(...arguments),this.state={isPopupOpened:!1},this.onBrowseFn=e=>{const{mediaState:t}=this.props;t&&t.setBrowseFn(e)}}componentDidMount(){const{mediaState:e}=this.props;e.onPopupToggle(e=>{this.setState({isPopupOpened:e})})}render(){const{mediaState:e}=this.props,{isPopupOpened:t}=this.state,n=e.mediaOptions&&e.mediaOptions.featureFlags;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Mn,{mediaState:e,featureFlags:n}),r.a.createElement(Nn,{mediaState:e,isActive:!t,featureFlags:n}),!e.shouldUseMediaPickerPopup()&&r.a.createElement(Rn,{onBrowseFn:this.onBrowseFn,mediaState:e,featureFlags:n}))}}Pn.displayName="MediaPickerComponents";var Ln=n("4AGm"),Dn=n("zf6/"),_n=n("tAd3");class Bn extends Dn.a{constructor(){super(...arguments),this.renderMediaNodeWithState=(e,t)=>({width:n})=>{const o=this.getPos,{mediaOptions:i}=this.reactComponentProps,{selection:a}=this.view.state,s=this.getAttrs(),c="external"===s.type?s.url:"";let{width:l,height:u}=s;if(this.isMediaBlobUrl()){const e=Object(Pe.b)(c);if(e){const{width:t,height:n}=e;l=l||t,u=u||n}}l=l||Re.b,u=u||Re.a;const p={width:n.width+"px",height:u/l*n.width+"px"},h={width:l,height:u};return r.a.createElement(_n.c,{view:this.view,node:this.node,getPos:o,selected:(()=>this.isNodeInsideSelection(a.from,a.to)||a instanceof d.NodeSelection&&a.from===o())(),originalDimensions:h,maxDimensions:p,url:c,mediaProvider:e,contextIdentifierProvider:t,uploadComplete:this.uploadComplete(),mediaOptions:i})},this.renderMediaNodeWithProviders=({mediaProvider:e,contextIdentifierProvider:t})=>r.a.createElement(fe.a,{editorView:this.view,plugins:{width:He.b},render:this.renderMediaNodeWithState(e,t)})}createDomRef(){const e=document.createElement("div");return Ue.a.chrome&&this.reactComponentProps.mediaOptions&&this.reactComponentProps.mediaOptions.allowMediaSingleEditable&&(e.contentEditable="true"),e}viewShouldUpdate(e){return this.node.attrs!==e.attrs||super.viewShouldUpdate(e)}stopEvent(e){if(-1!==["mousedown","contextmenu"].indexOf(e.type)){if(2===e.button)return!0}return!1}getAttrs(){const{attrs:e}=this.node;return e}isMediaBlobUrl(){const e=this.getAttrs();return Object(x.d)(e)}uploadComplete(){return Object(Le.c)(l.a.getState(this.view.state),this.node.attrs.id)}render(){const{providerFactory:e}=this.reactComponentProps;return r.a.createElement(be.a,{providers:["mediaProvider","contextIdentifierProvider"],providerFactory:e,renderNode:this.renderMediaNodeWithProviders})}}const $n=(e,t,n,o={})=>(r,i,a)=>new Bn(r,i,a,e,t,{eventDispatcher:t,providerFactory:n,mediaOptions:o}).init();t.a=e=>({name:"media",nodes(){const{allowMediaGroup:t=!0,allowMediaSingle:n=!1,UNSAFE_allowImageCaptions:o=!1}=e||{},r=o?i.b:i.a;return[{name:"mediaGroup",node:a.a},{name:"mediaSingle",node:r},{name:"media",node:s.b}].filter(e=>"mediaGroup"===e.name?t:"mediaSingle"!==e.name||n)},pmPlugins(){const t=[{name:"media",plugin:({schema:t,dispatch:n,eventDispatcher:o,providerFactory:r,errorReporter:i,portalProviderAPI:a,reactContext:s,dispatchAnalyticsEvent:l})=>Object(c.a)(t,{providerFactory:r,nodeViews:{mediaGroup:Fe(a,o,r,e),mediaSingle:st(a,o,r,l,e),media:$n(a,o,r,e)},errorReporter:i,uploadErrorHandler:e&&e.uploadErrorHandler,waitForMediaUpload:e&&e.waitForMediaUpload,customDropzoneContainer:e&&e.customDropzoneContainer,customMediaPicker:e&&e.customMediaPicker,allowResizing:!(!e||!e.allowResizing)},s,n,e)},{name:"mediaKeymap",plugin:()=>de()}];return e&&e.allowMediaSingle&&t.push({name:"mediaSingleKeymap",plugin:({schema:e})=>function(e){const t={},n=F(e);return k.bindKeymapWithCommand(k.backspace.common,n,t),Object(S.b)(t)}(e)}),e&&e.allowAnnotation&&t.push({name:"mediaEditor",plugin:v}),e&&e.allowAltTextOnImages&&(t.push({name:"mediaAltText",plugin:T}),t.push({name:"mediaAltTextKeymap",plugin:({schema:e})=>function(e){const t={};return k.bindKeymapWithCommand(k.addAltText.common,M,t),k.bindKeymapWithCommand(k.escape.common,I,t),Object(S.b)(t)}()})),e&&e.allowLinking&&(t.push({name:"mediaLinking",plugin:({dispatch:e})=>(e=>new d.Plugin({key:H,state:V.createPluginState(e,W)}))(e)}),t.push({name:"mediaLinkingKeymap",plugin:({schema:e})=>function(e){const t={};return k.bindKeymapWithCommand(k.addLink.common,ee,t),Object(S.b)(t)}()})),t},contentComponent({editorView:t,eventDispatcher:n}){const o=e&&e.allowAnnotation?r.a.createElement(fe.a,{editorView:t,plugins:{mediaEditorState:h},eventDispatcher:n,render:({mediaEditorState:e})=>r.a.createElement(Sn,{mediaEditorState:e,view:t})}):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{editorView:t,plugins:{mediaState:l.a},render:({mediaState:e})=>r.a.createElement(Pn,{mediaState:e})}),o)},secondaryToolbarComponent:({editorView:e,eventDispatcher:t,disabled:n})=>r.a.createElement(me,{editorView:e,eventDispatcher:t,pluginKey:l.a,isDisabled:n,isReducedSpacing:!0}),pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"media",title:e(Ln.a.filesAndImages),description:e(Ln.a.filesAndImagesDescription),priority:400,keywords:["attachment","gif","media","picture"],icon:()=>r.a.createElement(wn.j,{label:e(Ln.a.filesAndImages)}),action(e,t){l.a.getState(t).showMediaPicker();const n=e("");return Object(A.a)(t,n,{action:j.a.OPENED,actionSubject:j.b.PICKER,actionSubjectId:j.c.PICKER_CLOUD,attributes:{inputMethod:j.e.QUICK_INSERT},eventType:j.d.UI})}}],floatingToolbar:(t,n,o)=>En(t,n,{providerFactory:o,allowResizing:e&&e.allowResizing,allowResizingInTables:e&&e.allowResizingInTables,allowAnnotation:e&&e.allowAnnotation,allowLinking:e&&e.allowLinking,allowAdvancedToolBarOptions:e&&e.allowAdvancedToolBarOptions,allowAltTextOnImages:e&&e.allowAltTextOnImages,altTextValidator:e&&e.altTextValidator})}})},"I+gj":function(e,t,n){"use strict";function o(e,t){var n,o,r,i,a,s,c,l,d={},u=t.length;for(n=0;n<u;n++)if((r=t[n]).length=r.length||0,r.close){for(d.hasOwnProperty(r.marker)||(d[r.marker]=[-1,-1,-1]),a=d[r.marker][r.length%3],s=-1,o=n-r.jump-1;o>a;o-=i.jump+1)if((i=t[o]).marker===r.marker&&(-1===s&&(s=o),i.open&&i.end<0&&i.level===r.level&&(c=!1,(i.close||r.open)&&(i.length+r.length)%3==0&&(i.length%3==0&&r.length%3==0||(c=!0)),!c))){l=o>0&&!t[o-1].open?t[o-1].jump+1:0,r.jump=n-o+l,r.open=!1,i.end=n,i.jump=l,i.close=!1,s=-1;break}-1!==s&&(d[r.marker][(r.length||0)%3]=s)}}e.exports=function(e){var t,n=e.tokens_meta,r=e.tokens_meta.length;for(o(0,e.delimiters),t=0;t<r;t++)n[t]&&n[t].delimiters&&o(0,n[t].delimiters)}},I1dd:function(e,t,n){"use strict";var o=n("TOeK"),r=n.n(o),i=n("3IV/"),a=n("ERkP"),s=n.n(a),c=n("L21V"),l=n("KsTJ");const d=l.default.div`
  align-items: center;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  overflow: hidden;
  padding: 6px 14px;
  text-overflow: ellipsis;
  vertical-align: middle;
`,u=l.default.span`
  position: relative;
  flex: initial;
  opacity: inherit;
  width: 36px;
  height: 36px;

  > span {
    width: 18px;
    height: 18px;
    padding: 9px;
  }
`,p=l.default.div`
  flex: 1;
  min-width: 0;
  margin-left: 14px;
  color: ${i.N300};
  opacity: ${e=>e.restricted?"0.5":"inherit"};
`,h=l.default.div`
  background-color: ${e=>e.selected?i.N30:"transparent"};
  display: block;
  overflow: hidden;
  list-style-type: none;
  cursor: pointer;
`,f=l.default.span`
  text-transform: capitalize;
`,m=Object(c.f)({inviteItemTitle:{id:"fabric.editor.inviteItem.title",defaultMessage:"{userRole, select, admin {Invite} trusted {Invite} other {Add}} teammate to {productName}",description:"Title of the invite teammate item in typeahead plugin"}});n.d(t,"a",(function(){return b}));const b={id:"invite-teammate"};t.b=({productName:e,onMount:t,onMouseEnter:n,onSelection:o,selected:l,userRole:g})=>{const v=Object(a.useCallback)(e=>{(e=>!(0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey))(e)&&o&&(e.preventDefault(),o(b,e))},[o]),y=Object(a.useCallback)(e=>{n&&n(b,e)},[n]);return Object(a.useEffect)(()=>{t&&t()},[t]),s.a.createElement(h,{selected:l,onMouseDown:v,onMouseEnter:y,"data-id":b.id},s.a.createElement(d,null,s.a.createElement(u,null,s.a.createElement(r.a,{label:"search-icon",primaryColor:i.N300})),s.a.createElement(p,null,s.a.createElement(c.b,Object.assign({},m.inviteItemTitle,{values:{userRole:g||"basic",productName:s.a.createElement(f,null,e)}})))))}},IUNd:function(e,t,n){"use strict";n.d(t,"j",(function(){return o})),n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"b",(function(){return f}));const o=37,r=39,i=38,a=40,s=48,c=49,l=50,d=51,u=52,p=53,h=54,f=[s,c,l,d,u,p,h]},IUoJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=new(n("ehfC").PluginKey)("collabEditPlugin")},IWmk:function(e,t,n){"use strict";n.r(t),n.d(t,"addAltText",(function(){return l})),n.d(t,"toggleBold",(function(){return d})),n.d(t,"toggleItalic",(function(){return u})),n.d(t,"toggleUnderline",(function(){return p})),n.d(t,"toggleStrikethrough",(function(){return h})),n.d(t,"toggleCode",(function(){return f})),n.d(t,"pastePlainText",(function(){return m})),n.d(t,"clearFormatting",(function(){return b})),n.d(t,"setNormalText",(function(){return g})),n.d(t,"toggleHeading1",(function(){return v})),n.d(t,"toggleHeading2",(function(){return y})),n.d(t,"toggleHeading3",(function(){return O})),n.d(t,"toggleHeading4",(function(){return E})),n.d(t,"toggleHeading5",(function(){return w})),n.d(t,"toggleHeading6",(function(){return C})),n.d(t,"toggleOrderedList",(function(){return T})),n.d(t,"toggleBulletList",(function(){return S})),n.d(t,"toggleBlockQuote",(function(){return k})),n.d(t,"insertNewLine",(function(){return x})),n.d(t,"shiftBackspace",(function(){return A})),n.d(t,"splitCodeBlock",(function(){return j})),n.d(t,"splitListItem",(function(){return I})),n.d(t,"insertRule",(function(){return M})),n.d(t,"undo",(function(){return N})),n.d(t,"moveUp",(function(){return R})),n.d(t,"moveDown",(function(){return P})),n.d(t,"moveLeft",(function(){return L})),n.d(t,"moveRight",(function(){return D})),n.d(t,"indentList",(function(){return _})),n.d(t,"outdentList",(function(){return B})),n.d(t,"redo",(function(){return $})),n.d(t,"redoBarred",(function(){return z})),n.d(t,"openHelp",(function(){return F})),n.d(t,"addLink",(function(){return U})),n.d(t,"addInlineComment",(function(){return H})),n.d(t,"submit",(function(){return W})),n.d(t,"enter",(function(){return V})),n.d(t,"shiftEnter",(function(){return K})),n.d(t,"tab",(function(){return q})),n.d(t,"indent",(function(){return G})),n.d(t,"outdent",(function(){return Y})),n.d(t,"backspace",(function(){return X})),n.d(t,"deleteKey",(function(){return J})),n.d(t,"forwardDelete",(function(){return Z})),n.d(t,"space",(function(){return Q})),n.d(t,"escape",(function(){return ee})),n.d(t,"nextCell",(function(){return te})),n.d(t,"previousCell",(function(){return ne})),n.d(t,"toggleTable",(function(){return oe})),n.d(t,"addRowBefore",(function(){return re})),n.d(t,"addRowAfter",(function(){return ie})),n.d(t,"addColumnAfter",(function(){return ae})),n.d(t,"addColumnBefore",(function(){return se})),n.d(t,"cut",(function(){return ce})),n.d(t,"copy",(function(){return le})),n.d(t,"paste",(function(){return de})),n.d(t,"altPaste",(function(){return ue})),n.d(t,"find",(function(){return pe})),n.d(t,"TooltipShortcut",(function(){return fe})),n.d(t,"tooltip",(function(){return be})),n.d(t,"ToolTipContent",(function(){return ge})),n.d(t,"findKeymapByDescription",(function(){return ve})),n.d(t,"findShortcutByDescription",(function(){return ye})),n.d(t,"findShortcutByKeymap",(function(){return Oe})),n.d(t,"bindKeymapWithCommand",(function(){return Te})),n.d(t,"findKeyMapForBrowser",(function(){return Se}));var o=n("ERkP"),r=n.n(o),i=n("5lAk"),a=n("KsTJ"),s=n("3IV/"),c=n("IUNd");n.d(t,"DOWN",(function(){return c.a})),n.d(t,"HEADING_KEYS",(function(){return c.b})),n.d(t,"KEY_0",(function(){return c.c})),n.d(t,"KEY_1",(function(){return c.d})),n.d(t,"KEY_2",(function(){return c.e})),n.d(t,"KEY_3",(function(){return c.f})),n.d(t,"KEY_4",(function(){return c.g})),n.d(t,"KEY_5",(function(){return c.h})),n.d(t,"KEY_6",(function(){return c.i})),n.d(t,"LEFT",(function(){return c.j})),n.d(t,"RIGHT",(function(){return c.k})),n.d(t,"UP",(function(){return c.l}));const l=Ce("Add Alt Text","Mod-Alt-y"),d=Ce("Bold","Mod-b"),u=Ce("Italic","Mod-i"),p=Ce("Underline","Mod-u"),h=Ce("Strikethrough","Mod-Shift-s"),f=Ce("Code","Mod-Shift-m"),m=Ce("Paste Plain Text","Mod-Shift-v"),b=Ce("Clear formatting","Mod-\\"),g=Ce("Normal text","Mod-Alt-0"),v=Ce("Heading 1","Mod-Alt-1"),y=Ce("Heading 2","Mod-Alt-2"),O=Ce("Heading 3","Mod-Alt-3"),E=Ce("Heading 4","Mod-Alt-4"),w=Ce("Heading 5","Mod-Alt-5"),C=Ce("Heading 6","Mod-Alt-6"),T=Ce("Numbered list","Mod-Shift-7"),S=Ce("Bullet list","Mod-Shift-8"),k=we("Quote","","Cmd-Alt-9"),x=Ce("Insert new line","Shift-Enter"),A=Ce("Shift Backspace","Shift-Backspace"),j=Ce("Split code block","Enter"),I=Ce("Split list item","Enter"),M=Ce("Insert horizontal rule","Mod-Shift--"),N=Ce("Undo","Mod-z"),R=Ce("Move up","ArrowUp"),P=Ce("Move down","ArrowDown"),L=Ce("Move left","ArrowLeft"),D=Ce("Move right","ArrowRight"),_=Ce("Indent List","Tab"),B=Ce("Outdent List","Shift-Tab"),$=we("Redo","Ctrl-y","Cmd-Shift-z"),z=we("Redo Barred","Ctrl-Shift-z","Cmd-y"),F=Ce("Open Help","Mod-/"),U=Ce("Link","Mod-k"),H=Ce("Annotate","Mod-Alt-c"),W=Ce("Submit Content","Mod-Enter"),V=Ce("Enter","Enter"),K=Ce("Shift Enter","Shift-Enter"),q=Ce("Tab","Tab"),G=Ce("Indent","Tab"),Y=Ce("Outdent","Shift-Tab"),X=Ce("Backspace","Backspace"),J=Ce("Delete","Delete"),Z=we("Forward Delete","","Ctrl-d"),Q=Ce("Space","Space"),ee=Ce("Escape","Escape"),te=Ce("Next cell","Tab"),ne=Ce("Previous cell","Shift-Tab"),oe=Ce("Table","Shift-Alt-t"),re=Ce("Add Row Above","Ctrl-Alt-ArrowUp"),ie=Ce("Add Row Below","Ctrl-Alt-ArrowDown"),ae=Ce("Add Column After","Ctrl-Alt-ArrowRight"),se=Ce("Add Column Before","Ctrl-Alt-ArrowLeft"),ce=Ce("Cut","Mod-x"),le=Ce("Copy","Mod-c"),de=Ce("Paste","Mod-v"),ue=Ce("Paste","Mod-Shift-v"),pe=Ce("Find","Mod-f"),he={ARROWLEFT:"",ARROWRIGHT:"",ARROWUP:"",ARROWDOWN:""},fe=a.default.span`
  border-radius: 2px;
  background-color: ${s.N400};
  padding: 0 2px;
`;function me(e){let t;t=i.a.mac?e.mac.replace(/Cmd/i,"").replace(/Shift/i,"").replace(/Ctrl/i,"").replace(/Alt/i,"").replace(/Backspace/i,"").replace(/Enter/i,""):e.windows.replace(/Backspace/i,"");const n=t.split("-");let o=n[n.length-1];return 1===o.length&&(o=o.toUpperCase()),n[n.length-1]=he[o.toUpperCase()]||o,n.join(i.a.mac?"":"+")}function be(e,t){if(e){const n=me(e);return t?`${t} ${n}`:n}}const ge=r.a.memo(({description:e,shortcutOverride:t,keymap:n})=>{const o=t||n&&me(n);return o||e?r.a.createElement(r.a.Fragment,null,e,o&&e&&"",o&&r.a.createElement(fe,null,o)):null});function ve(e){return Ee.filter(t=>t.description.toUpperCase()===e.toUpperCase())[0]}function ye(e){const t=ve(e);if(t)return Oe(t)}function Oe(e){return i.a.mac?e.mac:e.windows}const Ee=[T,S,d,u,p,h,f,g,v,y,O,E,w,C,k,x,M,j,I,$,N,pe,ee,V,K];function we(e,t,n,o){return{description:e,windows:t,mac:n,common:o}}function Ce(e,t){return we(e,t.replace(/Mod/i,"Ctrl"),t.replace(/Mod/i,"Cmd"),t)}function Te(e,t,n){const o=n[e];let r=t;n[e]&&(r=(e,n,r)=>o(e,n)||t(e,n,r)),n[e]=r}function Se(e){if(e)return i.a.mac?e.mac:e.windows}},IYLv:function(e,t,n){"use strict";var o=n("1798"),r=[["table",n("98cI"),["paragraph","reference"]],["code",n("u+Vw")],["fence",n("2d0V"),["paragraph","reference","blockquote","list"]],["blockquote",n("/NnR"),["paragraph","reference","blockquote","list"]],["hr",n("htpI"),["paragraph","reference","blockquote","list"]],["list",n("jyDn"),["paragraph","reference","blockquote"]],["reference",n("eR5l")],["heading",n("5akD"),["paragraph","reference","blockquote"]],["lheading",n("GKbP")],["html_block",n("ssre"),["paragraph","reference","blockquote"]],["paragraph",n("Vt6h")]];function i(){this.ruler=new o;for(var e=0;e<r.length;e++)this.ruler.push(r[e][0],r[e][1],{alt:(r[e][2]||[]).slice()})}i.prototype.tokenize=function(e,t,n){for(var o,r=this.ruler.getRules(""),i=r.length,a=t,s=!1,c=e.md.options.maxNesting;a<n&&(e.line=a=e.skipEmptyLines(a),!(a>=n))&&!(e.sCount[a]<e.blkIndent);){if(e.level>=c){e.line=n;break}for(o=0;o<i&&!r[o](e,a,n,!1);o++);e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),(a=e.line)<n&&e.isEmpty(a)&&(s=!0,a++,e.line=a)}},i.prototype.parse=function(e,t,n,o){var r;e&&(r=new this.State(e,t,n,o),this.tokenize(r,r.line,r.lineMax))},i.prototype.State=n("XHA8"),e.exports=i},IkHm:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o=n("ERkP"),r=n.n(o),i=n("tdsH"),a=n("XC2T"),s=n("Cdbx"),c=n("4FMG"),l=n("yKQC"),d=n("wN5q");let u=0;class p{constructor(e,t,n,o,r,i,a,c=!1,d){this.handleRef=e=>this._handleRef(e),this.dispatchAnalyticsEvent=e=>{if(this.eventDispatcher&&this.performanceOptions.enabled){Object(s.b)(this.eventDispatcher)(l.a,{payload:e})}},this.node=e,this.view=t,this.getPos=n,this.portalProviderAPI=o,this.reactComponentProps=i||{},this.reactComponent=a,this.hasContext=c,this._viewShouldUpdate=d,this.eventDispatcher=r}init(){this.domRef=this.createDomRef(),this.setDomAttrs(this.node,this.domRef);const{dom:e,contentDOM:t}=this.getContentDOM()||{dom:void 0,contentDOM:void 0};this.domRef&&e&&(this.domRef.appendChild(e),this.contentDOM=t||e,this.contentDOMWrapper=e||t),this.domRef.classList.add(this.node.type.name+"View-content-wrap");const{samplingRate:n,slowThreshold:o,enabled:r}=this.performanceOptions;return r&&Object(i.b)(`${this.node.type.name}::ReactNodeView`),this.renderReactComponent(()=>this.render(this.reactComponentProps,this.handleRef)),r&&Object(i.c)(`${this.node.type.name}::ReactNodeView`,e=>{++u%n==0&&e>o&&this.dispatchAnalyticsEvent({action:c.a.REACT_NODEVIEW_RENDERED,actionSubject:c.b.EDITOR,eventType:c.d.OPERATIONAL,attributes:{node:this.node.type.name,duration:e,participants:Object(d.a)(this.view.state)}})}),this}renderReactComponent(e){this.domRef&&e&&this.portalProviderAPI.render(e,this.domRef,this.hasContext)}createDomRef(){return this.node.isInline?document.createElement("span"):document.createElement("div")}getContentDOM(){}_handleRef(e){const t=this.contentDOMWrapper||this.contentDOM;e&&t&&!e.contains(t)&&e.appendChild(t)}render(e,t){return this.reactComponent?r.a.createElement(this.reactComponent,Object.assign({view:this.view,getPos:this.getPos,node:this.node,forwardRef:t},e)):null}update(e,t,n=(()=>!0)){return!(this.node.type!==e.type||!n(this.node,e))&&(this.domRef&&!this.node.sameMarkup(e)&&this.setDomAttrs(e,this.domRef),this.viewShouldUpdate(e)?(this.node=e,this.renderReactComponent(()=>this.render(this.reactComponentProps,this.handleRef)),!0):(this.node=e,!0))}viewShouldUpdate(e){return!this._viewShouldUpdate||this._viewShouldUpdate(e)}setDomAttrs(e,t){Object.keys(e.attrs||{}).forEach(n=>{t.setAttribute(n,e.attrs[n])})}get dom(){return this.domRef}destroy(){this.domRef&&(this.portalProviderAPI.remove(this.domRef),this.domRef=void 0,this.contentDOM=void 0)}get performanceOptions(){const e=a.a.getState(this.view.state),t=e&&e.performanceTracking&&e.performanceTracking.nodeViewTracking||{},n=t.samplingRate||100,o=t.slowThreshold||7;return{enabled:!!t.enabled,samplingRate:n,slowThreshold:o}}static fromComponent(e,t,n,o,r){return(i,a,s)=>new p(i,a,s,t,n,o,e,!1,r).init()}}},"J/xJ":function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return O}));var o=n("ehfC"),r=n("UdmJ"),i=n("8vqB"),a=n("3rZS"),s=n("tVIO"),c=n("4FMG"),l=n("CP8u"),d=n("25UG");function u(e){return(t,n)=>{const{nodes:o}=t.schema;if(e===i.k.name&&o.paragraph)return function(e,t){const{tr:n,selection:{$from:o,$to:r},schema:i}=e;t&&t(n.setBlockType(o.pos,r.pos,i.nodes.paragraph));return!0}(t,n);const r=i.d[e];return!!(r&&o.heading&&r.level)&&m(r.level)(t,n)}}function p(e,t){return(n,o)=>{const{nodes:r}=n.schema;if(e===i.k.name&&r.paragraph)return f(t)(n,o);const a=i.d[e];return!!(a&&r.heading&&a.level)&&b(a.level,t)(n,o)}}function h(e){return(t,n,o)=>{const{heading:r,paragraph:i}=t.schema.nodes,a=Object(l.g)(t.doc,t.selection.from,t.selection.to,e=>e.type===r||e.type===i);let s;for(let e of a){const t=e.node.type===r?e.node.attrs.level:0;if(s){if(t!==s){s=void 0;break}}else s=t}return e(s)(t,n,o)}}function f(e){return h(t=>Object(s.d)({action:c.a.FORMATTED,actionSubject:c.b.TEXT,eventType:c.d.TRACK,actionSubjectId:c.c.FORMAT_HEADING,attributes:{inputMethod:e,newHeadingLevel:0,previousHeadingLevel:t}})((function(e,t){const{tr:n,selection:{$from:o,$to:r},schema:i}=e;return t&&t(n.setBlockType(o.pos,r.pos,i.nodes.paragraph)),!0})))}function m(e){return function(t,n){const{tr:o,selection:{$from:r,$to:i},schema:a}=t;return n&&n(o.setBlockType(r.pos,i.pos,a.nodes.heading,{level:e})),!0}}const b=(e,t)=>h(n=>Object(s.d)({action:c.a.FORMATTED,actionSubject:c.b.TEXT,eventType:c.d.TRACK,actionSubjectId:c.c.FORMAT_HEADING,attributes:{inputMethod:t,newHeadingLevel:e,previousHeadingLevel:n}})(m(e)));function g(e){return function(t,n){const{nodes:r}=t.schema;switch(e){case i.a.name:if(r.paragraph&&r.blockquote)return y(r.blockquote)(t,n);break;case i.b.name:if(r.codeBlock)return function(e,t){const{tr:n}=e,{$to:r}=e.selection,{codeBlock:i}=e.schema.nodes,a=e.doc.nodeAt(r.pos+1),s=a&&a.isText?0:1;return n.replaceRangeWith(r.pos+s,r.pos+s,i.createAndFill()),n.setSelection(o.Selection.near(n.doc.resolve(e.selection.to+s))),t&&t(n),!0}(t,n);break;case i.m.name:if(r.panel&&r.paragraph)return y(r.panel)(t,n)}return!1}}const v=(e,t)=>{switch(e){case i.a.name:return Object(s.d)({action:c.a.FORMATTED,actionSubject:c.b.TEXT,eventType:c.d.TRACK,actionSubjectId:c.c.FORMAT_BLOCK_QUOTE,attributes:{inputMethod:t}})(g(e));case i.b.name:return Object(s.d)({action:c.a.INSERTED,actionSubject:c.b.DOCUMENT,actionSubjectId:c.c.CODE_BLOCK,attributes:{inputMethod:t},eventType:c.d.TRACK})(g(e));case i.m.name:return Object(s.d)({action:c.a.INSERTED,actionSubject:c.b.DOCUMENT,actionSubjectId:c.c.PANEL,attributes:{inputMethod:t,panelType:d.a.INFO},eventType:c.d.TRACK})(g(e));default:return g(e)}};function y(e){return function(t,n){let{tr:i}=t;const{$from:s,$to:c}=t.selection,{paragraph:l}=t.schema.nodes,{alignment:d,indentation:u}=t.schema.marks;i=Object(a.c)(t,[d,u])||i;const p=s.blockRange(c),h=p&&Object(r.findWrapping)(p,e);return p&&h?i.wrap(p,h).scrollIntoView():(i.replaceRangeWith(c.pos+1,c.pos+1,e.createAndFill({},l.create())),i.setSelection(o.Selection.near(i.doc.resolve(t.selection.to+1)))),n&&n(i),!0}}const O=(e,t)=>{const{$cursor:n}=e.selection;if(n&&!n.nodeBefore&&!n.nodeAfter&&1===n.pos){const{tr:o,schema:r}=e,{paragraph:i}=r.nodes,{parent:a}=n;return o.setNodeMarkup(0,i,a.attrs,[]),t&&t(o),!0}return!1}},J4U1:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ehfC"),i=n("lELC"),a=n("gyAA"),s=n("ERkP"),c=n.n(s),l=n("L21V"),d=n("KsTJ"),u=n("ELNC"),p=n("IkHm"),h=n("Ejnt");const f=Object(l.f)({placeholder:{id:"fabric.editor.statusPlaceholder",defaultMessage:"Set a status",description:"Placeholder description for an empty (new) status item in the editor"}}),m=d.default.span`
  opacity: ${e=>e.placeholderStyle?.5:1};
`;class b extends c.a.Component{constructor(e){super(e),this.handleClick=e=>{e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}}render(){const{text:e,color:t,localId:n,style:o,intl:{formatMessage:r}}=this.props,i=e||r(f.placeholder);return c.a.createElement(m,{placeholderStyle:!e},c.a.createElement(u.a,{text:i,color:t,localId:n,style:o,onClick:this.handleClick}))}}b.displayName="StatusContainerView";const g=Object(l.g)(b);class v extends p.a{createDomRef(){return this.reactComponentProps.options&&this.reactComponentProps.options.useInlineWrapper?Object(h.a)():super.createDomRef()}setDomAttrs(e,t){const{color:n,localId:o,style:r}=e.attrs;t.dataset.color=n,t.dataset.localId=o,t.dataset.style=r}render(e){const{options:t}=e,{text:n,color:o,localId:r,style:i}=this.node.attrs;return c.a.createElement(h.b,{useInlineWrapper:t&&t.useInlineWrapper},c.a.createElement(g,{view:this.view,text:n,color:o,style:i,localId:r}),t&&t.allowZeroWidthSpaceAfter&&a.a)}}function y(e,t,n){return(o,r,i)=>new v(o,r,i,e,t,{options:n}).init()}var O=n("QuFy"),E=n("X+bm");t.a=(e,t,n,s)=>new r.Plugin({state:{init:()=>({isNew:!1,showStatusPickerAt:null}),apply(t,n,i){const a=t.getMeta(O.a);if(a){const t=Object(o.a)(Object(o.a)({},n),a);return e(O.a,t),t}if(t.docChanged&&n.showStatusPickerAt){const{pos:r,deleted:i}=t.mapping.mapResult(n.showStatusPickerAt),a=i?null:r,s=Object(o.a)(Object(o.a)({},n),{},{showStatusPickerAt:a});if(s.showStatusPickerAt!==n.showStatusPickerAt)return e(O.a,s),s}if(!t.selection.eq(i.selection)){const a=t.selection.from,s=t.doc.nodeAt(a);let c=null;if(s&&s.type===i.schema.nodes.status&&t.selection instanceof r.NodeSelection&&(c=a),c!==n.showStatusPickerAt){const t=Object(o.a)(Object(o.a)({},n),{},{isNew:!1,showStatusPickerAt:c});return e(O.a,t),t}}return n}},filterTransaction:(e,t)=>{if(e.selectionSet&&!e.steps.length&&e.isGeneric&&e.selection instanceof r.TextSelection&&t.selection instanceof r.NodeSelection){const{isNew:n,showStatusPickerAt:o}=O.a.getState(t),r=e.doc.nodeAt(e.selection.from);if(n&&o&&r&&r.type===t.schema.nodes.status)return!1}return!0},appendTransaction:(e,t,n)=>{let o=!1,r=n.tr;if(e.find(e=>e.selectionSet)){let e=Object(E.b)(t.selection),i=Object(E.b)(n.selection);if(e&&(i&&e.localId!==i.localId||!i)&&Object(E.a)(e)){const e=t.selection.from;r.delete(r.mapping.map(e),r.mapping.map(e+1)),o=!0}}return o?r:void 0},key:O.a,props:{nodeViews:{status:y(t,n,s)},decorations(e){const{tr:t}=e,n=t.doc.nodeAt(t.selection.from);if(s&&s.allowZeroWidthSpaceAfter&&n&&n.type===e.schema.nodes.status){const n=()=>document.createTextNode(a.a),o=i.a.widget(t.selection.from,n,{side:1,key:"#status-zero-width-char-decoration"}),{doc:r}=e;return i.b.create(r,[o])}return null}}})},JDys:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ERkP"),i=n.n(r),a=n("ehfC"),s=n("5FKe"),c=n("KjAf"),l=n("tVIO"),d=n("4FMG");var u=(e,t)=>{let n,o="",r="",i=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(let a in i){const t=i[a];if(t.r.test(e)){o=t.s;break}}switch(/Windows/.test(o)&&(n=/Windows (.*)/.exec(o),r=n&&n[1],o="Windows"),o){case"Mac OS X":n=/Mac OS X (10[\.\_\d]+)/.exec(e),r=n&&n[1];break;case"Android":n=/Android ([\.\_\d]+)/.exec(e),r=n&&n[1];break;case"iOS":n=/OS (\d+)_(\d+)_?(\d+)?/.exec(t),r=n&&n[1]+"."+n[2]+"."+(n[3]||0)}return`${o} ${r}`};var p=e=>{let t,n,o,r,i;return-1!==(r=e.indexOf("OPR/"))?(t="Opera",n=e.substring(r+4)):-1!==(r=e.indexOf("Opera"))?(t="Opera",n=-1!==(r=e.indexOf("Version"))?e.substring(r+8):e.substring(r+6)):-1!==(r=e.indexOf("MSIE"))?(t="Microsoft Internet Explorer",n=e.substring(r+5)):-1!==(r=e.indexOf("Chrome"))?(t="Chrome",n=e.substring(r+7)):-1!==(r=e.indexOf("Safari"))?(t="Safari",n=-1!==(r=e.indexOf("Version"))?e.substring(r+8):e.substring(r+7)):-1!==(r=e.indexOf("Firefox"))?(t="Firefox",n=e.substring(r+8)):(o=e.lastIndexOf(" ")+1)<(r=e.lastIndexOf("/"))?(t=e.substring(o,r),n=e.substring(r+1),t.toLowerCase()===t.toUpperCase()&&(t=navigator.appName)):(t=navigator.appName,n=""+parseFloat(navigator.appVersion)),-1!==(i=n.indexOf(";"))&&(n=n.substring(0,i)),-1!==(i=n.indexOf(" "))&&(n=n.substring(0,i)),`${t} ${n}`};var h=(e,t,n,o)=>new Promise(async(r,i)=>{window.jQuery?(window.ATL_JQ_PAGE_PROPS={triggerFunction:e=>{"function"==typeof e?r(e):i("Failed to initialize showCollectorDialog")},fieldValues:{description:"Please describe the problem you're having or feature you'd like to see:\n\n\n",customfield_11711:e||[],customfield_11712:`version: ${t}@${o} (${n})\n              Browser: ${p(navigator.userAgent)}\n              OS: ${u(navigator.userAgent,navigator.appVersion)}`},environment:{"Editor Package":t,"Editor Version":o,"Editor Core Version":n},priority:"1",components:"15306"},window.jQuery.ajax({url:"https://product-fabric.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/-w0bwo4/b/14/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=98644b9c",type:"get",cache:!0,dataType:"script"})):i("jQuery is not defined")}),f=n("4AGm");n.d(t,"b",(function(){return v}));new a.PluginKey("feedbackDialogPlugin");let m,b,g;const v=async e=>new Promise(async(t,n)=>{const r=Object(o.a)(Object(o.a)({},g),e),i=(e=>{const{product:t,packageName:n,packageVersion:o,labels:r}=e;return[t,n,o,...r||[]].join("|")})(r);if(!m||b!==i)try{m=await h([r.product||"n/a",...r.labels||[]],r.packageName||"",c.b,r.packageVersion||""),b=i}catch(a){n(a)}t(window.setTimeout(m,0))});t.a=e=>(g=e,{name:"feedbackDialog",pluginsOptions:{quickInsert:({formatMessage:t})=>[{id:"feedbackdialog",title:t(f.a.feedbackDialog),description:t(f.a.feedbackDialogDescription),priority:400,keywords:["bug"],icon:()=>i.a.createElement(s.h,{label:t(f.a.feedbackDialog)}),action(t,n){const o=t("");return v(e),Object(l.a)(n,o,{action:d.a.OPENED,actionSubject:d.b.FEEDBACK_DIALOG,attributes:{inputMethod:d.e.QUICK_INSERT},eventType:d.d.UI})}}]}})},JIgR:function(e,t,n){"use strict";var o=function(){};o.prototype.append=function(e){return e.length?(e=o.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},o.prototype.prepend=function(e){return e.length?o.from(e).append(this):this},o.prototype.appendInner=function(e){return new i(this,e)},o.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?o.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},o.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},o.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},o.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var o=[];return this.forEach((function(t,n){return o.push(e(t,n))}),t,n),o},o.from=function(e){return e instanceof o?e:e&&e.length?new r(e):o.empty};var r=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,o){for(var r=t;r<n;r++)if(!1===e(this.values[r],o+r))return!1},t.prototype.forEachInvertedInner=function(e,t,n,o){for(var r=t-1;r>=n;r--)if(!1===e(this.values[r],o+r))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(o);o.empty=new r([]);var i=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,o){var r=this.left.length;return!(t<r&&!1===this.left.forEachInner(e,t,Math.min(n,r),o))&&(!(n>r&&!1===this.right.forEachInner(e,Math.max(t-r,0),Math.min(this.length,n)-r,o+r))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,o){var r=this.left.length;return!(t>r&&!1===this.right.forEachInvertedInner(e,t-r,Math.max(n,r)-r,o+r))&&(!(n<r&&!1===this.left.forEachInvertedInner(e,Math.min(t,r),n,o))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(o),a=o,s=n("UdmJ"),c=n("ehfC");n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return T})),n.d(t,"d",(function(){return C}));var l=function(e,t){this.items=e,this.eventCount=t};l.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var o,r,i=this.items.length;;i--){if(this.items.get(i-1).selection){--i;break}}t&&(o=this.remapping(i,this.items.length),r=o.maps.length);var a,s,c=e.tr,u=[],p=[];return this.items.forEach((function(e,t){if(!e.step)return o||(o=n.remapping(i,t+1),r=o.maps.length),r--,void p.push(e);if(o){p.push(new d(e.map));var h,f=e.step.map(o.slice(r));f&&c.maybeStep(f).doc&&(h=c.mapping.maps[c.mapping.maps.length-1],u.push(new d(h,null,null,u.length+p.length))),r--,h&&o.appendMap(h,r)}else c.maybeStep(e.step);return e.selection?(a=o?e.selection.map(o.slice(r)):e.selection,s=new l(n.items.slice(0,i).append(p.reverse().concat(u)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:c,selection:a}},l.prototype.addTransform=function(e,t,n,o){for(var r=[],i=this.eventCount,a=this.items,s=!o&&a.length?a.get(a.length-1):null,c=0;c<e.steps.length;c++){var u,h=e.steps[c].invert(e.docs[c]),f=new d(e.mapping.maps[c],h,t);(u=s&&s.merge(f))&&(f=u,c?r.pop():a=a.slice(0,a.length-1)),r.push(f),t&&(i++,t=null),o||(s=f)}var m,b,g,v=i-n.depth;return v>p&&(b=v,(m=a).forEach((function(e,t){if(e.selection&&0==b--)return g=t,!1})),a=m.slice(g),i-=v),new l(a.append(r),i)},l.prototype.remapping=function(e,t){var n=new s.Mapping;return this.items.forEach((function(t,o){var r=null!=t.mirrorOffset&&o-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,r)}),e,t),n},l.prototype.addMaps=function(e){return 0==this.eventCount?this:new l(this.items.append(e.map((function(e){return new d(e)}))),this.eventCount)},l.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],o=Math.max(0,this.items.length-t),r=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach((function(e){e.selection&&a--}),o);var s=t;this.items.forEach((function(t){var o=r.getMirror(--s);if(null!=o){i=Math.min(i,o);var c=r.maps[o];if(t.step){var l=e.steps[o].invert(e.docs[o]),u=t.selection&&t.selection.map(r.slice(s+1,o));u&&a++,n.push(new d(c,l,u))}else n.push(new d(c))}}),o);for(var c=[],u=t;u<i;u++)c.push(new d(r.maps[u]));var p=this.items.slice(0,o).append(c).append(n),h=new l(p,a);return h.emptyItemCount()>500&&(h=h.compress(this.items.length-n.length)),h},l.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},l.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,o=[],r=0;return this.items.forEach((function(i,a){if(a>=e)o.push(i),i.selection&&r++;else if(i.step){var s=i.step.map(t.slice(n)),c=s&&s.getMap();if(n--,c&&t.appendMap(c,n),s){var l=i.selection&&i.selection.map(t.slice(n));l&&r++;var u,p=new d(c.invert(),s,l),h=o.length-1;(u=o.length&&o[h].merge(p))?o[h]=u:o.push(p)}}else i.map&&n--}),this.items.length,0),new l(a.from(o.reverse()),r)},l.empty=new l(a.empty,0);var d=function(e,t,n,o){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=o};d.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new d(t.getMap().invert(),t,this.selection)}};var u=function(e,t,n,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=o},p=20;function h(e){var t=[];return e.forEach((function(e,n,o,r){return t.push(o,r)})),t}function f(e,t){if(!e)return null;for(var n=[],o=0;o<e.length;o+=2){var r=t.map(e[o],1),i=t.map(e[o+1],-1);r<=i&&n.push(r,i)}return n}function m(e,t,n,o){var r=v(t),i=O.get(t).spec.config,a=(o?e.undone:e.done).popEvent(t,r);if(a){var s=a.selection.resolve(a.transform.doc),c=(o?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),i,r),l=new u(o?c:a.remaining,o?a.remaining:c,null,0);n(a.transform.setSelection(s).setMeta(O,{redo:o,historyState:l}).scrollIntoView())}}var b=!1,g=null;function v(e){var t=e.plugins;if(g!=t){b=!1,g=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){b=!0;break}}return b}function y(e){return e.setMeta(E,!0)}var O=new c.PluginKey("history"),E=new c.PluginKey("closeHistory");function w(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new c.Plugin({key:O,state:{init:function(){return new u(l.empty,l.empty,null,0)},apply:function(t,n,o){return function(e,t,n,o){var r,i=n.getMeta(O);if(i)return i.historyState;n.getMeta(E)&&(e=new u(e.done,e.undone,null,0));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(a&&a.getMeta(O))return a.getMeta(O).redo?new u(e.done.addTransform(n,null,o,v(t)),e.undone,h(n.mapping.maps[n.steps.length-1]),e.prevTime):new u(e.done,e.undone.addTransform(n,null,o,v(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new u(e.done.rebased(n,r),e.undone.rebased(n,r),f(e.prevRanges,n.mapping),e.prevTime):new u(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),f(e.prevRanges,n.mapping),e.prevTime);var s=0==e.prevTime||!a&&(e.prevTime<(n.time||0)-o.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,o){for(var r=0;r<t.length;r+=2)e<=t[r+1]&&o>=t[r]&&(n=!0)})),n}(n,e.prevRanges)),c=a?f(e.prevRanges,n.mapping):h(n.mapping.maps[n.steps.length-1]);return new u(e.done.addTransform(n,s?t.selection.getBookmark():null,o,v(t)),l.empty,c,n.time)}(n,o,t,e)}},config:e})}function C(e,t){var n=O.getState(e);return!(!n||0==n.done.eventCount)&&(t&&m(n,e,t,!1),!0)}function T(e,t){var n=O.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&m(n,e,t,!0),!0)}},"JsG+":function(e,t,n){"use strict";var o=n("Czhu"),r=n("ERkP"),i=n.n(r),a=n("ehfC"),s=n("4FMG"),c=n("yKQC"),l=n("OUhg"),d=n("/YBo"),u=n("xuWu"),p=n("KsTJ"),h=n("L21V"),f=n("3IV/"),m=n("w301"),b=n("BMbf"),g=n("zJ/j"),v=n("kbI0"),y=n("MqVv"),O=n("cJDk"),E=n("9Vuo");const w=Object(h.f)({all:{id:"fabric.editor.elementbrowser.categorylist.category-all",defaultMessage:"All",description:"all"},formatting:{id:"fabric.editor.elementbrowser.categorylist.category-formatting",defaultMessage:"Formatting",description:"formatting"},"confluence-content":{id:"fabric.editor.elementbrowser.categorylist.category-confluence-content",defaultMessage:"Confluence content",description:"confluence-content"},media:{id:"fabric.editor.elementbrowser.categorylist.category-media",defaultMessage:"Media",description:"media"},visuals:{id:"fabric.editor.elementbrowser.categorylist.category-visuals",defaultMessage:"Visuals & images",description:"visuals"},navigation:{id:"fabric.editor.elementbrowser.categorylist.category-navigation",defaultMessage:"Navigation",description:"navigation"},"external-content":{id:"fabric.editor.elementbrowser.categorylist.category-external-content",defaultMessage:"External content",description:"external-content"},communication:{id:"fabric.editor.elementbrowser.categorylist.category-communication",defaultMessage:"Communication",description:"communication"},reporting:{id:"fabric.editor.elementbrowser.categorylist.category-reporting",defaultMessage:"Reporting",description:"reporting"},admin:{id:"fabric.editor.elementbrowser.categorylist.category-admin",defaultMessage:"Administration",description:"admin"},development:{id:"fabric.editor.elementbrowser.categorylist.category-development",defaultMessage:"Development",description:"development"}});var C=n("zLY1");const T=e=>{const[t,n]=Object(r.useState)(),o=Object(r.useCallback)(e=>{n(e)},[n]),a=Object(r.useCallback)(t=>{e.onInsertItem(t)},[e]),s=Object(r.useCallback)(e=>i.a.createElement(k,Object.assign({},e,{onInsert:()=>a(t)})),[a,t]),c=Object(r.useCallback)(t=>{"Escape"===t.key&&e.onClose()},[e]),l={Body:Object(r.useCallback)(()=>{return i.a.createElement(j,null,i.a.createElement(E.a,{categories:(t=e.intl,[{title:t.formatMessage(w.all),name:"all"},{title:t.formatMessage(w.formatting),name:"formatting"},{title:t.formatMessage(w["confluence-content"]),name:"confluence-content"},{title:t.formatMessage(w.media),name:"media"},{title:t.formatMessage(w.visuals),name:"visuals"},{title:t.formatMessage(w.navigation),name:"navigation"},{title:t.formatMessage(w["external-content"]),name:"external-content"},{title:t.formatMessage(w.communication),name:"communication"},{title:t.formatMessage(w.reporting),name:"reporting"},{title:t.formatMessage(w.admin),name:"admin"},{title:t.formatMessage(w.development),name:"development"}]),getItems:e.getItems,showSearch:!0,showCategories:!0,mode:"full",onSelectItem:o,onInsertItem:a}));var t},[e.intl,e.getItems,o,a]),Footer:s};return i.a.createElement("div",{"data-editor-popup":!0,onClick:S,onKeyDown:c},i.a.createElement(v.b,null,e.isOpen&&i.a.createElement(y.a,{stackIndex:1,key:"element-browser-modal",onClose:e.onClose,height:"664px",width:"x-large",autoFocus:!1,components:l,shouldCloseOnEscapePress:!1})))};T.displayName="ModalElementBrowser";const S=e=>e.stopPropagation(),k=({onInsert:e,onClose:t,showKeyline:n})=>i.a.createElement(O.d,{showKeyline:n,style:{padding:C.g}},i.a.createElement("span",null),i.a.createElement(x,null,i.a.createElement(A,null,i.a.createElement(g.a,{appearance:"primary",onClick:e,testId:"ModalElementBrowser__insert-button"},"Insert")),i.a.createElement(A,null,i.a.createElement(g.a,{appearance:"subtle",onClick:t,testId:"ModalElementBrowser__close-button"},"Close")))),x=p.default.div`
  display: inline-flex;
  margin: 0 -4px;
`,A=p.default.div`
  flex: 1 0 auto;
  margin: 0 4px;
`,j=p.default.div`
  display: flex;
  flex: 1 1 auto;
  box-sizing: border-box;
  padding: ${C.g}px ${C.g}px 0 10px;
  overflow: hidden;
  background-color: ${Object(m.a)({light:f.N0,dark:f.DN50})()};
  border-radius: ${Object(b.c)()}px;
`;var I=Object(h.g)(T),M=n("S7GL");const N=({quickInsertState:e,editorView:t})=>{const n=Object(r.useCallback)((t,n)=>Object(d.b)(e,{})(t,n),[e]),o=Object(r.useCallback)(()=>{t.hasFocus()||t.focus()},[t]),a=Object(r.useCallback)(e=>{Object(M.a)()(t.state,t.dispatch),o(),Object(M.b)(e)(t.state,t.dispatch)},[t.dispatch,t.state,o]),s=Object(r.useCallback)(()=>{Object(M.a)()(t.state,t.dispatch),o()},[t.dispatch,t.state,o]);return i.a.createElement(I,{getItems:n,onInsertItem:a,isOpen:e&&e.isElementBrowserModalOpen||!1,onClose:s})};var R=({editorView:e})=>{const t=Object(r.useCallback)(({quickInsertState:t})=>i.a.createElement(N,{quickInsertState:t,editorView:e}),[e]);return i.a.createElement(u.a,{plugins:{quickInsertState:l.a},render:t})};n.d(t,"b",(function(){return L}));t.a=e=>({name:"quickInsert",pmPlugins:e=>[{name:"quickInsert",plugin:({providerFactory:t,reactContext:n,dispatch:r})=>function(e,t,n,r){return new a.Plugin({key:l.a,state:{init:()=>({isElementBrowserModalOpen:!1,lazyDefaultItems:()=>L(e||[],n)}),apply(e,t){const n=e.getMeta(l.a);if(n){if(Object.keys(n).some(e=>t[e]!==n[e])){const e=Object(o.a)(Object(o.a)({},t),n);return r(l.a,e),e}}return t}},view(e){const n=async(t,n)=>{if(n)try{const t=await n,r=await t.getItems();(o={provider:t,providedItems:r},(e,t)=>(t&&t(e.tr.setMeta(l.a,o)),!0))(e.state,e.dispatch)}catch(r){console.error("Error getting items from quick insert provider",r)}var o};return t.subscribe("quickInsertProvider",n),{destroy(){t.unsubscribe("quickInsertProvider",n)}}}})}(e,t,n().intl,r)}],pluginsOptions:{typeAhead:{trigger:"/",headless:e?e.headless:void 0,getItems:(t,n,o,{prevActive:r,queryChanged:i},a,u)=>{!r&&i&&u(c.a,{payload:{action:s.a.INVOKED,actionSubject:s.b.TYPEAHEAD,actionSubjectId:s.c.TYPEAHEAD_QUICK_INSERT,attributes:{inputMethod:s.e.KEYBOARD},eventType:s.d.UI}});const p=l.a.getState(n);return Object(d.b)(p,e)(t)},selectItem:(e,t,n)=>t.action(n,e)}},contentComponent:({editorView:t})=>e&&e.enableElementBrowser?i.a.createElement(R,{editorView:t}):null});const P={},L=(e,t)=>(P[t.locale]||(P[t.locale]=e.reduce((e,n)=>"function"==typeof n?e.concat(n(t)):e.concat(n),[])),P[t.locale])},JumK:function(e,t,n){"use strict";var o=n("HbGN"),r=n("Czhu"),i=n("ERkP"),a=n.n(i),s=n("aWzz"),c=n.n(s),l=n("ehfC"),d=n("lELC"),u=n("L21V"),p=n("tdsH"),h=n("PuUi"),f=n("IrpU"),m=n("pZ4U"),b=n("6r2W"),g=n("5lAk"),v=n("Cdbx"),y=n("UP2C"),O=n("h75s"),E=n("+Leu"),w=n("4FMG"),C=n("cRXR"),T=n("tVIO"),S=n("EruW"),k=n("4yVO"),x=n("z43y"),A={plugins:["featureFlagsContextPlugin","compositionPlugin","inlineCursorTargetPlugin","focusHandlerPlugin","frozenEditor","submitEditor","saveOnEnter","customAutoformatting","newlinePreserveMarksPlugin","imageUpload","imageUploadInputRule","clipboard","paste","pasteKeymap","mention","mentionInputRule","mentionKeymap","emoji","placeholderText","emojiInputRule","emojiKeymap","emojiAsciiInputRule","blockType","quickInsert","tasksAndDecisions","blockTypeInputRule","tasksAndDecisionsInputRule","typeAhead","typeAheadKeymap","typeAheadInputRule","date","dateKeymap","indentationKeymap","lists","listsPredictable","textColor","alignmentPlugin","listsInputRule","listsPredictableInputRule","listsKeymap","listsPredictableKeymap","codeBlock","codeBlockIDEKeyBindings","codeBlockKeyMap","textFormatting","textFormattingCursor","textFormattingInputRule","textFormattingSmartRule","textFormattingClear","textFormattingKeymap","tasksAndDecisionsKeyMap","expandKeymap","tableSelectionKeymap","tableKeymap","selectionKeymap","gapCursorKeymap","gapCursor","syncUrlText","fakeCursorToolbarPlugin","hyperLink","table","tableDecorations","hyperlinkInputRule","tablePMColResizing","hyperlinkKeymap","tableColResizing","blockTypeKeyMap","tableEditing","filterStepsPlugin","pmCollab","collab","ruleInputRule","ruleKeymap","panel","media","mediaKeymap","mediaSingleKeymap","mediaEditor","unsupportedContent","jiraIssue","fakeTextCursor","helpDialog","helpDialogKeymap","macro","expand","extension","layout","contextPanel","floatingToolbar","clearMarksOnChange","reactNodeView","history","codeBlockIndent","placeholder","width","maxContentSize","multilineContent","grid","mobileScroll","scrollGutterPlugin","analytics","findReplace","selection"],nodes:["doc","paragraph","text","bulletList","orderedList","listItem","heading","blockquote","codeBlock","rule","panel","mention","confluenceUnsupportedBlock","confluenceUnsupportedInline","unsupportedBlock","unsupportedInline","confluenceJiraIssue","hardBreak","emoji","placeholder","mediaSingle","mediaGroup","table","expand","nestedExpand","media","tableHeader","decisionList","tableRow","decisionItem","tableCell","taskList","taskItem","extension","bodiedExtension","inlineExtension","layoutSection","layoutColumn","inlineCard","blockCard","embedCard"],marks:["link","em","strong","textColor","strike","subsup","underline","code","typeAheadQuery","alignment","breakout","indentation","annotation","unsupportedMark","unsupportedNodeAttribute"]};function j(e){return function(t,n){return A[e].indexOf(t.name)-A[e].indexOf(n.name)}}let I=0;const M=e=>{const{enabled:t,samplingRate:n=100}=e,o=t&&++I===n;return o&&(I=0),o};class N extends l.Plugin{constructor(e,t={}){const{transactionTracking:n={enabled:!1},uiTracking:o={enabled:!1}}=t;if(n.enabled&&e.state){const t=e.state.apply.bind(e.state);e.state.apply=(e,o,r,i)=>{if(!M(n))return t(e,o,r,i);const a=`${this.key}::apply`;Object(p.b)(a);const s=t(e,o,r,i);return Object(p.c)(a,()=>{}),s}}if(o.enabled&&e.view){const t=e.view.bind(e);e.view=e=>{const n=`${this.key}::view::update`,o=t(e);if(o.update){const e=o.update;o.update=(t,o)=>{Object(p.b)(n),e(t,o),Object(p.c)(n,()=>{})}}return o}}super(e)}static fromPlugin(e,t){return new N(e.spec,t)}}function R(e){const t=e.reduce((e,t)=>(t.pluginsOptions&&Object.keys(t.pluginsOptions).forEach(n=>{e[n]||(e[n]=[]),e[n].push(t.pluginsOptions[n])}),e),{});return e.reduce((e,n)=>(n.pmPlugins&&e.pmPlugins.push(...n.pmPlugins(n.name?t[n.name]:void 0)),n.nodes&&e.nodes.push(...n.nodes()),n.marks&&e.marks.push(...n.marks()),n.contentComponent&&e.contentComponents.push(n.contentComponent),n.primaryToolbarComponent&&e.primaryToolbarComponents.push(n.primaryToolbarComponent),n.secondaryToolbarComponent&&e.secondaryToolbarComponents.push(n.secondaryToolbarComponent),n.onEditorViewStateUpdated&&e.onEditorViewStateUpdatedCallbacks.push({pluginName:n.name,callback:n.onEditorViewStateUpdated}),e),{nodes:[],marks:[],pmPlugins:[],contentComponents:[],primaryToolbarComponents:[],secondaryToolbarComponents:[],onEditorViewStateUpdatedCallbacks:[]})}const P={enabled:!1};function L(e){const{editorConfig:t,performanceTracking:n={}}=e,r=Object(o.a)(e,["editorConfig","performanceTracking"]),{uiTracking:i=P,transactionTracking:a=P}=n,s=i.enabled||a.enabled?e=>N.fromPlugin(e,{uiTracking:i,transactionTracking:a}):e=>e;return t.pmPlugins.sort(j("plugins")).map(({plugin:e})=>e(r)).filter(e=>void 0!==e).map(s)}const D=(e,t)=>{const n={type:e.type.name,pos:t,nodeSize:e.nodeSize},o=_(e.content,t);o.length>0&&(n.content=o);const r=$(e);return r.length>0&&(n.marks=r),n},_=(e,t)=>{if(!e||!e.content||!e.content.length)return[];let n=[];const{content:o}=e;if(o[0].isBlock){let e;n=o.map(n=>(t+=e?e.nodeSize:1,e=n,D(n,t)))}else{const e=B(o,t);n=e.inlineNodes,t=e.pos}return n},B=(e,t)=>({inlineNodes:e.map(e=>{const{nodeSize:n}=e,o={type:e.type.name,pos:t,nodeSize:n},r=$(e);return r.length>0&&(o.marks=r),t+=n,o}),pos:t}),$=e=>e.marks.map(e=>e.type.name);var z=n("twlq"),F=n("/P2d"),U=n("I9T1"),H=n("y6Ns");function W(e){const t=function(e){const t=Object.keys(e),n=new Set(t.map(t=>e[t].group));return t.forEach(t=>{const o=e[t];o.excludes&&(o.excludes=o.excludes.split(" ").filter(e=>n.has(e)).join(" "))}),e}(e.marks.sort(j("marks")).reduce((e,t)=>(e[t.name]=t.mark,e),{})),n=Object(H.b)(e.nodes.sort(j("nodes")).reduce((e,t)=>(e[t.name]=t.node,e),{}),t);return new U.Schema({nodes:n,marks:t})}const V=(e,t)=>{const n=e.sort((e,t)=>e-t),o=n.length*t,r=Math.floor(o);if(o-r>0)return n[r];const i=n[r-1],a=n[r];return void 0!==i&&void 0!==a?(i+a)/2:void 0},K=(e,t)=>{const n=V(e,.25),o=V(e,.75);if(void 0===n||void 0===o)return;return o+(o-n)*t};class q{constructor(e){this.entry=e,this.count=0,this.pluginNames=[],this.nodes={},this.nodesDuration=0,this.plugins={},this.slowPlugins={},this.options={samplingRate:100,slowThreshold:300,outlierThreshold:30,outlierFactor:3},this.isChild=e=>e.startTime>=this.entry.startTime&&e.startTime+e.duration<=this.entry.startTime+this.entry.duration}static fromEntry(e){return new q(e)}getEntryByName(e,t){return e.getEntriesByName(t).find(this.isChild)}getMethodSum(e){return Object.values(e).reduce((e,t)=>e+t,0)}greaterEquals(e,t){return"number"==typeof t&&e>=t}hasOutlierMethods(e,t){return this.greaterEquals(e.stateApply,t.stateApplyOutlier)||this.greaterEquals(e.viewUpdate,t.viewUpdateOutlier)}get trigger(){return this.entry.duration>this.options.slowThreshold?"slow":this.hasSlowPlugins&&this.entry.duration>this.options.outlierThreshold?"distribution":this.count>0&&this.count%this.options.samplingRate==0?"sample":"none"}get hasSlowPlugins(){return Object.keys(this.slowPlugins).length>0}withEntryList(e){return this.entryList=e,this.stateApplied=this.getEntryByName(e," EditorView::state::apply"),this.viewUpdated=this.getEntryByName(e," EditorView::updateState"),this.onChangeCalled=this.getEntryByName(e," ReactEditorView::onChange"),this.onEditorViewStateUpdatedCalled=this.getEntryByName(e," ReactEditorView::onEditorViewStateUpdated"),this.withPlugins(this.pluginNames),this}withPlugins(e){const t={duration:0};if(this.pluginNames=e,this.plugins=e.reduce((e,n)=>{const o=this.entryList&&this.getEntryByName(this.entryList,`${n}::apply`)||t,r=this.entryList&&this.getEntryByName(this.entryList,`${n}::view::update`)||t,i=this.entryList&&this.getEntryByName(this.entryList,`${n}::onEditorViewStateUpdated`)||t;return e[n]={stateApply:o.duration,viewUpdate:r.duration,onEditorViewStateUpdated:i.duration},e},{}),this.stateApplied&&e.length>0){const e=Object.entries(this.plugins),t=K(e.map(([,{stateApply:e}])=>e),this.options.outlierFactor),n=K(e.map(([,{viewUpdate:e}])=>e),this.options.outlierFactor),o=this.options.outlierThreshold/e.length,i=([,e])=>this.getMethodSum(e)>o&&this.hasOutlierMethods(e,{stateApplyOutlier:t,viewUpdateOutlier:n});this.slowPlugins=e.filter(i).reduce((e,[t,n])=>Object(r.a)(Object(r.a)({},e),{},{[t]:n}),{})}return this}withNodes(e,t=0){return this.nodes=e,this.nodesDuration=t,this}withCount(e){return this.count=e,this}withOptions(e){return Object.assign(this.options,e),this}toJSON(){return{trigger:this.trigger,duration:this.entry.duration,nodes:this.nodes,plugins:this.plugins,slowPlugins:this.slowPlugins,stepDurations:{stateApply:this.stateApplied?this.stateApplied.duration:0,viewUpdate:this.viewUpdated?this.viewUpdated.duration:0,onChange:this.onChangeCalled?this.onChangeCalled.duration:0,onEditorViewStateUpdated:this.onEditorViewStateUpdatedCalled?this.onEditorViewStateUpdatedCalled.duration:0,countNodes:this.nodesDuration}}}}class G{constructor(e){this.callback=e,this.getNodeCounts=()=>[{},0],this.getPlugins=()=>[],this.getOptions=()=>({}),this.reportCount=0,this.onObserveration=e=>{e.getEntriesByName(" ReactEditorView::dispatchTransaction").map(t=>q.fromEntry(t).withCount(++this.reportCount).withEntryList(e).withNodes(...this.getNodeCounts()).withPlugins(this.getPlugins()).withOptions(this.getOptions()).toJSON()).filter(e=>"none"!==e.trigger).forEach(e=>this.callback(e))},this.observer=window.PerformanceObserver?new PerformanceObserver(this.onObserveration):{observe(){},disconnect(){},takeRecords:()=>[]}}withNodeCounts(e){return this.getNodeCounts=()=>{const t=performance.now();return[e(),performance.now()-t]},this}withPlugins(e){return this.getPlugins=e,this}withOptions(e){return this.getOptions=e,this}observe(){try{this.observer.observe({buffered:!1,type:"measure"})}catch(e){this.observer.observe({entryTypes:["measure"]})}}disconnect(){this.observer.disconnect()}takeRecords(){return this.observer.takeRecords()}}var Y=n("wN5q"),X=n("77XF");var J=n("iOxE");function Z(e){if(!e.hasFocus())return window.setTimeout(()=>{e.focus()},0)}n.d(t,"a",(function(){return Q}));class Q extends a.a.Component{constructor(e,t){super(e,t),this.canDispatchTransactions=!0,this.pluginPerformanceObserver=new G(e=>this.onPluginObservation(e,this.editorState)).withPlugins(()=>this.getPluginNames()).withNodeCounts(()=>this.countNodes()).withOptions(()=>this.transactionTrackingOptions),this.onPluginObservation=(e,t)=>{this.dispatchAnalyticsEvent({action:w.a.TRANSACTION_DISPATCHED,actionSubject:w.b.EDITOR,eventType:w.d.OPERATIONAL,attributes:{report:e,participants:Object(Y.a)(t)}})},this.formatFullWidthAppearance=e=>"full-width"===e?C.b.FULL_WIDTH:C.b.FIXED_WIDTH,this.reconfigureState=e=>{if(!this.view)return;this.view.dom instanceof HTMLElement&&this.view.hasFocus()&&this.view.dom.blur(),this.config=R(this.getPlugins(e.editorProps,this.props.editorProps,e.createAnalyticsEvent));const t=this.editorState,n=L({schema:t.schema,dispatch:this.dispatch,errorReporter:this.errorReporter,editorConfig:this.config,eventDispatcher:this.eventDispatcher,providerFactory:e.providerFactory,portalProviderAPI:e.portalProviderAPI,reactContext:()=>this.context,dispatchAnalyticsEvent:this.dispatchAnalyticsEvent,performanceTracking:e.editorProps.performanceTracking||{transactionTracking:this.transactionTrackingProp}}),o=t.reconfigure({plugins:n});return this.view.updateState(o),this.view.update(Object(r.a)(Object(r.a)({},this.view.props),{},{state:o}))},this.createEditorState=e=>{if(this.view)return console.warn("The editor does not support changing the schema dynamically."),this.editorState;this.config=R(this.getPlugins(e.props.editorProps,void 0,e.props.createAnalyticsEvent));const t=W(this.config),{contentTransformerProvider:n,defaultValue:o}=e.props.editorProps,r=L({schema:t,dispatch:this.dispatch,errorReporter:this.errorReporter,editorConfig:this.config,eventDispatcher:this.eventDispatcher,providerFactory:e.props.providerFactory,portalProviderAPI:this.props.portalProviderAPI,reactContext:()=>e.context,dispatchAnalyticsEvent:this.dispatchAnalyticsEvent,performanceTracking:this.props.editorProps.performanceTracking||{transactionTracking:this.transactionTrackingProp}});let i,a;this.contentTransformer=n?n(t):void 0,e.replaceDoc&&(i=Object(y.l)(t,o,e.props.providerFactory,e.props.editorProps.sanitizePrivateContent,this.contentTransformer,this.dispatchAnalyticsEvent)),i&&(a=Object(z.a)(e.props.editorProps.appearance)?l.Selection.atStart(i):l.Selection.atEnd(i));const s=a&&l.Selection.findFrom(a.$head,-1,!0)||void 0;return l.EditorState.create({schema:t,plugins:r,doc:i,selection:s})},this.onEditorViewStateUpdated=({transaction:e,oldEditorState:t,newEditorState:n})=>{const{enabled:o}=this.transactionTrackingProp;this.config.onEditorViewStateUpdatedCallbacks.forEach(r=>{o&&Object(p.b)(` ${r.pluginName}::onEditorViewStateUpdated`),r.callback({transaction:e,oldEditorState:t,newEditorState:n}),o&&Object(p.c)(` ${r.pluginName}::onEditorViewStateUpdated`)})},this.dispatchTransaction=e=>{if(!this.view)return;const t=M(this.transactionTrackingProp);t&&Object(p.b)(" ReactEditorView::dispatchTransaction");const n=Object(O.b)(e);if(Object(O.g)(n)){const n=this.view.state;t&&Object(p.b)(" EditorView::state::apply");const o=this.view.state.apply(e);if(t&&Object(p.c)(" EditorView::state::apply"),o===n)return;if(t&&Object(p.b)(" EditorView::updateState"),this.view.updateState(o),t&&Object(p.c)(" EditorView::updateState"),t&&Object(p.b)(" EditorView::onEditorViewStateUpdated"),this.onEditorViewStateUpdated({transaction:e,oldEditorState:n,newEditorState:o}),t&&Object(p.c)(" EditorView::onEditorViewStateUpdated"),this.props.editorProps.onChange&&e.docChanged){const n=e.getMeta("isRemote")?"remote":"local";t&&Object(p.b)(" ReactEditorView::onChange"),this.props.editorProps.onChange(this.view,{source:n}),t&&Object(p.c)(" ReactEditorView::onChange")}this.editorState=o}else{const t=n.filter(e=>!Object(O.f)(e)).map(e=>(e=>{try{return D(e,0)}catch(t){return"Error logging document structure: "+t}})(e));this.dispatchAnalyticsEvent({action:w.a.DISPATCHED_INVALID_TRANSACTION,actionSubject:w.b.EDITOR,eventType:w.d.OPERATIONAL,attributes:{analyticsEventPayloads:Object(T.b)(e),invalidNodes:t}})}t&&Object(p.c)(" ReactEditorView::dispatchTransaction",()=>{})},this.getDirectEditorProps=e=>({state:e||this.editorState,dispatchTransaction:e=>{this.canDispatchTransactions&&this.dispatchTransaction(e)},editable:e=>!this.props.editorProps.disabled,attributes:{"data-gramm":"false"}}),this.createEditorView=e=>{Object(h.a)(F.a.PROSEMIRROR_RENDERED,(e,t)=>{var n,o,r,i,a;const s=null===(o=null===(n=this.props.editorProps)||void 0===n?void 0:n.performanceTracking)||void 0===o?void 0:o.proseMirrorRenderedTracking,c=void 0===s&&Object(f.a)();this.proseMirrorRenderedSeverity=c||(null==s?void 0:s.trackSeverity)?Object(m.g)(e,null!==(r=null==s?void 0:s.severityNormalThreshold)&&void 0!==r?r:2e3,null!==(i=null==s?void 0:s.severityDegradedThreshold)&&void 0!==i?i:3e3):void 0,this.view&&this.dispatchAnalyticsEvent({action:w.a.PROSEMIRROR_RENDERED,actionSubject:w.b.EDITOR,attributes:{duration:e,startTime:t,nodes:Object(y.c)(this.view.state.doc),ttfb:Object(b.a)(),severity:this.proseMirrorRenderedSeverity,objectId:null===(a=Object(J.b)(this.editorState))||void 0===a?void 0:a.objectId},eventType:w.d.OPERATIONAL})}),this.view=new d.c({mount:e},this.getDirectEditorProps())},this.handleEditorViewRef=e=>{if(!this.view&&e){this.createEditorView(e);const t=this.view;this.props.onEditorCreated({view:t,config:this.config,eventDispatcher:this.eventDispatcher,transformer:this.contentTransformer}),this.props.editorProps.shouldFocus&&t.props.editable&&t.props.editable(t.state)&&(this.focusTimeoutId=Z(t)),this.forceUpdate()}else this.view&&!e&&(this.props.onEditorDestroyed({view:this.view,config:this.config,eventDispatcher:this.eventDispatcher,transformer:this.contentTransformer}),this.view.destroy(),this.view=void 0)},this.dispatchAnalyticsEvent=e=>{if(this.props.allowAnalyticsGASV3&&this.eventDispatcher){Object(v.b)(this.eventDispatcher)(m.e,{payload:e})}},this.editor=a.a.createElement("div",{className:ee(),key:"ProseMirror",ref:this.handleEditorViewRef}),this.eventDispatcher=new v.a,this.dispatch=Object(v.b)(this.eventDispatcher),this.errorReporter=function(e){const t=new x.a;return e&&(t.handler=e),t}(e.editorProps.errorReporterHandler);const{createAnalyticsEvent:n,allowAnalyticsGASV3:o}=e;o&&this.activateAnalytics(n),this.editorState=this.createEditorState({props:e,context:t,replaceDoc:!0});const i=Object(k.a)(this.props.editorProps),s=i?Object(k.b)(i):[];this.dispatchAnalyticsEvent({action:w.a.STARTED,actionSubject:w.b.EDITOR,attributes:{platform:C.d.WEB,featureFlags:s},eventType:w.d.UI})}get transactionTrackingProp(){const{editorProps:e}=this.props,{transactionTracking:t}=e.performanceTracking?e.performanceTracking:e;return t||{enabled:!1}}get transactionTrackingOptions(){const e=this.transactionTrackingProp,{enabled:t}=e,n=Object(o.a)(e,["enabled"]);return t?n:{}}getPluginNames(){return this.editorState.plugins.map(e=>e.key)}countNodes(){return Object(X.a)(this.editorState)}UNSAFE_componentWillReceiveProps(e){this.view&&this.props.editorProps.disabled!==e.editorProps.disabled&&(this.view.setProps({editable:t=>!e.editorProps.disabled}),!e.editorProps.disabled&&e.editorProps.shouldFocus&&(this.focusTimeoutId=Z(this.view))),this.props.allowAnalyticsGASV3!==e.allowAnalyticsGASV3?e.allowAnalyticsGASV3?this.activateAnalytics(e.createAnalyticsEvent):this.deactivateAnalytics():this.props.allowAnalyticsGASV3&&e.createAnalyticsEvent!==this.props.createAnalyticsEvent&&(this.deactivateAnalytics(),this.activateAnalytics(e.createAnalyticsEvent));const{appearance:t}=this.props.editorProps,{appearance:n}=e.editorProps;n!==t&&(this.reconfigureState(e),"full-width"!==n&&"full-width"!==t||this.dispatchAnalyticsEvent({action:w.a.CHANGED_FULL_WIDTH_MODE,actionSubject:w.b.EDITOR,eventType:w.d.TRACK,attributes:{previousMode:this.formatFullWidthAppearance(t),newMode:this.formatFullWidthAppearance(n)}})),this.transactionTrackingProp.enabled||this.pluginPerformanceObserver.disconnect()}deactivateAnalytics(){this.analyticsEventHandler&&this.eventDispatcher.off(m.e,this.analyticsEventHandler)}activateAnalytics(e){e&&(this.analyticsEventHandler=Object(S.a)(e),this.eventDispatcher.on(m.e,this.analyticsEventHandler))}componentDidMount(){this.canDispatchTransactions=!0,this.transactionTrackingProp.enabled&&this.pluginPerformanceObserver.observe()}componentWillUnmount(){if(this.canDispatchTransactions=!1,this.eventDispatcher.destroy(),clearTimeout(this.focusTimeoutId),this.pluginPerformanceObserver.disconnect(),this.view){const e=this.view.state;e.plugins.forEach(t=>{const n=t.getState(e);n&&n.destroy&&n.destroy()})}}getPlugins(e,t,n){return Object(E.a)(e,t,n)}render(){return this.props.render?this.props.render({editor:this.editor,view:this.view,config:this.config,eventDispatcher:this.eventDispatcher,transformer:this.contentTransformer,dispatchAnalyticsEvent:this.dispatchAnalyticsEvent}):this.editor}}function ee(){return g.a.chrome?"ua-chrome":g.a.ie?"ua-ie":g.a.gecko?"ua-firefox":""}Q.contextTypes={getAtlaskitAnalyticsEventHandlers:c.a.func,intl:u.h}},"Jx+6":function(e,t,n){"use strict";var o=n("Czhu"),r=n("zJ/j"),i=n("wMvT"),a=n.n(i),s=n("3IV/"),c=n("a8dO"),l=n("LxhQ"),d=n.n(l),u=n("ERkP"),p=n.n(u),h=n("Bo9c"),f=n("IGfZ"),m=n("mjri"),b=n("cH8Y"),g=n("fCxE");const v=(e,t)=>{if(t.target instanceof Element&&t.target.getAttribute("aria-label")===f.g)return;const{emoji:n,onSelected:o}=e;t.preventDefault(),o&&Object(b.a)(t)&&o(Object(m.q)(n),n,t)},y=(e,t)=>{const{emoji:n,onMouseMove:o}=e;o&&o(Object(m.q)(n),n,t)},O=e=>{const{emoji:t,fitToHeight:n,selected:o,selectOnHover:i,className:l,showTooltip:u,showDelete:b}=e,O={[g.k]:!0,[g.q]:!0,[g.G]:o,[g.F]:i,[g.p]:!0};let E,w,C;l&&(O[l]=!0);const T=Object(h.d)(t,n)?t.altRepresentation:t.representation;let S;Object(m.i)(T)?(C=T.imagePath,E=T.width,w=T.height):Object(m.l)(T)&&(C=T.mediaPath,E=T.width,w=T.height),b&&(S=p.a.createElement("span",{className:g.g},p.a.createElement(r.a,{iconBefore:p.a.createElement(a.a,{label:f.g,primaryColor:s.N500,size:"small"}),onClick:t=>((e,t)=>{const{emoji:n,onDelete:o}=e;o&&o(Object(m.q)(n),n,t)})(e,t),appearance:"subtle-link",spacing:"none"})));let k={};n&&E&&w&&(k={width:n/w*E,height:n});const x=p.a.createElement("img",Object.assign({src:C,key:C,alt:t.shortName,"data-emoji-short-name":t.shortName,"data-emoji-id":t.id,"data-emoji-text":t.fallback||t.shortName,className:"emoji",style:{visibility:"visible"},onError:t=>{((e,t)=>{const{emoji:n,onLoadError:o}=e;if(t.target){t.target.style.visibility="hidden"}o&&o(Object(m.q)(n),n,t)})(e,t)}},k));return p.a.createElement("span",{className:d()(O),onMouseDown:t=>{v(e,t)},onMouseMove:t=>{y(e,t)},"aria-label":t.shortName},S,u?p.a.createElement(c.a,{tag:"span",content:t.shortName},x):x)};t.a=e=>{const{emoji:t}=e;return Object(m.o)(t.representation)?(e=>{const{emoji:t,fitToHeight:n,selected:r,selectOnHover:i,className:a,showTooltip:s}=e,l=t.representation,u=l.sprite,h={[g.n]:!0,[g.q]:!0,[g.G]:r,[g.F]:i};a&&(h[a]=!0);let f={};n&&(f={width:n+"px",height:n+"px"});const m=100/(u.column-1)*(l.xIndex-0),b=100/(u.row-1)*(l.yIndex-0),O=Object(o.a)({backgroundImage:`url(${u.url})`,backgroundPosition:`${m}% ${b}%`,backgroundSize:`${100*u.column}% ${100*u.row}%`},f),E=p.a.createElement("span",{className:g.u,style:O},"");return p.a.createElement("span",{className:d()(h),onMouseDown:t=>{v(e,t)},onMouseMove:t=>{y(e,t)},"aria-label":t.shortName},s?p.a.createElement(c.a,{tag:"span",content:t.shortName},E):E)})(e):O(e)}},JzjW:function(e,t,n){"use strict";e.exports=n("5hiN")},JzyM:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var o=n("m23B"),r=n("jyPs");const i=e=>Object(o.findParentNode)(e=>e.type.spec.tableRole&&"table"===e.type.spec.tableRole)(e),a=e=>Object(o.findParentNodeClosestToPos)(e,e=>e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)),s=e=>{const t=a(e);if(t){const n=(e=>Object(o.findParentNodeClosestToPos)(e,e=>e.type.spec.tableRole&&"table"===e.type.spec.tableRole))(e);if(n){const e=r.b.get(n.node),o=t.pos-n.start;return e.rectBetween(o,o)}}}},K1NO:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return u}));var o=n("Czhu"),r=n("PZ9j"),i=n("xi0w");const a=(e,t)=>{const{mediaNodes:n}=e;return n.reduce((e,n)=>{if(e)return e;const{node:o}=n;return o.attrs.id===t?n:e},null)},s=(e,t,n)=>n?a(e,t):e.mediaGroupNodes[t],c=(e,t)=>e.mediaOptions&&e.mediaOptions.allowMarkingUploadsAsIncomplete&&"boolean"==typeof e.mobileUploadComplete[t]?e.mobileUploadComplete[t]:void 0,l=(e,t,n)=>(o,a)=>{const c=r.a.getState(o);let l;if(n)l=((e,t)=>{const{mediaNodes:n}=e;return n.filter(e=>e.node.attrs.id===t)})(c,e);else{const t=s(c,e,n);l=t?[t]:[]}const d=o.schema.nodes.media;if(l=l.filter(e=>{let t;try{t=o.doc.nodeAt(e.getPos())}catch(n){return!1}return t&&t.type===d}),0===l.length)return!1;if(a){const e=o.tr;l.forEach(({getPos:n})=>e.step(new i.a(n(),t))),e.setMeta("addToHistory",!1),a(e)}return!0},d=(e,t,n)=>(o,a)=>{const c=r.a.getState(o),l=s(c,e,n);return!!l&&(a&&a(o.tr.step(new i.a(l.getPos(),t)).setMeta("addToHistory",!1)),!0)},u=(e,t)=>(n,r)=>!!r&&(r(n.tr.step(new i.a(e,Object(o.a)({type:"file",url:null},t))).setMeta("addToHistory",!1)),!0)},K6aX:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=1e3},KWMf:function(e,t,n){"use strict";function o(e,t){if(!e)return!1;return e.toJSON().type===t}n.d(t,"a",(function(){return o}))},KXMh:function(e,t,n){"use strict";var o,r;n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),function(e){e.ARROW_RIGHT="rightArrow",e.ARROW_LEFT="leftArrow",e.ARROW_DOUBLE="doubleArrow"}(o||(o={})),function(e){e.DASH="emDash",e.ELLIPSIS="ellipsis",e.QUOTE_SINGLE="singleQuote",e.QUOTE_DOUBLE="doubleQuote"}(r||(r={}))},KjAf:function(e){e.exports=JSON.parse('{"a":"@atlaskit/editor-core","b":"134.0.0"}')},KwWb:function(e,t,n){"use strict";var o=n("Czhu"),r=n("9dFV"),i=n("+Mvc");n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}));const a=Object(r.a)(i.a,(e,t)=>{switch(t.type){case"STOP_RESIZING":return Object(o.a)(Object(o.a)({},e),{},{resizeHandlePos:null,dragging:null});case"SET_RESIZE_HANDLE_POSITION":return Object(o.a)(Object(o.a)({},e),{},{resizeHandlePos:t.data.resizeHandlePos});case"SET_DRAGGING":return Object(o.a)(Object(o.a)({},e),{},{dragging:t.data.dragging});case"SET_LAST_CLICK":const{lastClick:n}=t.data;return Object(o.a)(Object(o.a)({},e),{},{lastClick:n,resizeHandlePos:n?e.resizeHandlePos:null});default:return e}},{mapping:function(e,t){return t&&null!==t.resizeHandlePos?Object(o.a)(Object(o.a)({},t),{},{resizeHandlePos:e.mapping.map(t.resizeHandlePos)}):t}}),s=a.createCommand,c=a.createPluginState,l=a.getPluginState},L2cJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l}));var o=n("ERkP"),r=n.n(o),i=n("KsTJ");const a=i.default.figure`
  margin: 0;
`;a.displayName="FigureWrapper";const s=i.default.div`
  position: absolute;
  width: 100%;
  height: 100%;
`,c=i.default.div`
  width: 100%;
  position: relative;
  padding-bottom: ${e=>e.dimensions.height/e.dimensions.width*100}%;
`,l=({dimensions:e,children:t,onContextMenu:n})=>r.a.createElement(c,{dimensions:e,onContextMenuCapture:n},r.a.createElement(s,null,t))},LMBy:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("L21V");const r=Object(o.f)({unknownUserError:{id:"fabric.mention.unknow.user.error",defaultMessage:"Unknown user {userId}",description:"Mention user name could not be found or look up failed"},noAccessWarning:{id:"fabric.mention.noAccess.warning",defaultMessage:"{name} won't be notified as they have no access",description:"Warning message to show that the mentioned user won't be notified"},noAccessLabel:{id:"fabric.mention.noAccess.label",defaultMessage:"No access",description:"Label for no access icon"},defaultHeadline:{id:"fabric.mention.error.defaultHeadline",defaultMessage:"Something went wrong",description:"Error message shown when there is an error communicating with backend"},defaultAdvisedAction:{id:"fabric.mention.error.defaultAction",defaultMessage:"Try again in a few seconds",description:"Default advised action when an error occurs"},loginAgain:{id:"fabric.mention.error.loginAgain",defaultMessage:"Try logging out then in again",description:"Login again message when there is an authentication error occurs"},differentText:{id:"fabric.mention.error.differentText",defaultMessage:"Try entering different text",description:"Enter different text message when a forbidden error occurs"},memberCountWithoutYou:{id:"fabric.elements.mentions.team.member.count",defaultMessage:"{0, plural, one {1 member} other {{0} members}}",description:"Byline to show the number of members in the team when the current user is not a member of the team"},memberCountWithYou:{id:"fabric.elements.mentions.team.member.count.including.you",defaultMessage:"{0, plural, one {1 member} other {{0} members}}, including you",description:"Byline to show the number of members in the team when the current user is also a member of the team"},plus50MembersWithoutYou:{id:"fabric.elements.mentions.team.member.50plus",defaultMessage:"50+ members",description:"Byline to show the number of members in the team when the number exceeds 50"},plus50MembersWithYou:{id:"fabric.elements.mentions.team.member.50plus.including.you",defaultMessage:"50+ members, including you",description:"Byline to show the number of members in the team when the number exceeds 50 and also includes the current user"},TeamMentionHighlightTitle:{id:"fabric.elements.mentions.team.mention.highlight.title",defaultMessage:"Mention your team",description:"Title of the highlight shown in the mention tpyeahead. This is related to team mentions"},TeamMentionHighlightDescription:{id:"fabric.elements.mentions.team.mention.highlight.description",defaultMessage:"Get everyone on the page with one click. No team?",description:"Description of the highlight shown in the mention tpyeahead. This is related to team mentions"},TeamMentionHighlightDescriptionLink:{id:"fabric.elements.mentions.team.mention.highlight.description.link",defaultMessage:"Start one.",description:"Team creation link in the description of the highlight shown in the mention tpyeahead. This is related to team mentions"},TeamMentionHighlightCloseButtonToolTip:{id:"fabric.elements.mentions.team.meantion.highlight.close.button.tooltip",defaultMessage:"Dismiss",description:"Closes the highlight component when this button is clicked. This text for the tooltip of that button"}})},LUcZ:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var o=n("Czhu"),r=n("ehfC"),i=n("m23B"),a=n("rq0r"),s=n("3rZS");const c=new r.PluginKey("listsPlugin"),l=e=>new r.Plugin({state:{init:()=>({bulletListActive:!1,bulletListDisabled:!1,orderedListActive:!1,orderedListDisabled:!1}),apply(t,n,r,s){const{bulletList:l,orderedList:d}=s.schema.nodes,u=Object(i.findParentNodeOfType)([l,d])(t.selection),p=!!u&&u.node.type===l,h=!!u&&u.node.type===d,f=!(p||h||Object(a.g)(l,s)),m=!(p||h||Object(a.g)(d,s));if(p!==n.bulletListActive||h!==n.orderedListActive||f!==n.bulletListDisabled||m!==n.orderedListDisabled){const t=Object(o.a)(Object(o.a)({},n),{},{bulletListActive:p,orderedListActive:h,bulletListDisabled:f,orderedListDisabled:m});return e(c,t),t}return n}},view:()=>({update:({state:e,dispatch:t})=>{const{bulletList:n,orderedList:o}=e.schema.nodes,{alignment:r,indentation:a}=e.schema.marks;if(!Object(i.findParentNodeOfType)([n,o])(e.tr.selection))return;const c=Object(s.c)(e,[r,a]);c&&t(c)}}),key:c})},"Llt/":function(e,t,n){"use strict";var o=n("ehfC"),r=n("m23B");n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));const i=new o.PluginKey("mobile-selection"),a=e=>new o.Plugin({view:t=>{const n=t.domAtPos.bind(t);return{update:(t,o)=>{const{state:a,state:{selection:s,doc:c}}=t;if(o.doc.eq(c)&&o.selection.eq(s))return;const l=Object(r.findDomRefAtPos)(s.$anchor.pos,n),{top:d,left:u}=l.getBoundingClientRect(),{nodeTypes:p,markTypes:h}=(({selection:e,doc:t})=>{const n=new Set,o=new Set;return t.nodesBetween(e.from,e.to,e=>(n.add(e.type.name),e.marks.forEach(e=>o.add(e.type.name)),!0)),{nodeTypes:Array.from(n),markTypes:Array.from(o)}})(a);e(i,{rect:{top:Math.round(d),left:Math.round(u)},selection:a.selection.toJSON(),nodeTypes:p,markTypes:h})}}}}),s=()=>({name:"mobileSelection",pmPlugins:()=>[{name:"mobileSelection",plugin:({dispatch:e})=>a(e)}]})},LsVN:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),function(e){e.INVALID="invalid",e.DISABLED="disabled",e.VALID="valid"}(o||(o={}));const r="ak-editor-annotation",i={prefix:r,floatingComponent:r+"-floating-component",floatingToolbarCreateButton:r+"-toolbar-create-button",componentSave:r+"-dummy-save-button",componentClose:r+"-dummy-close-button"}},M3To:function(e,t,n){"use strict";var o=n("Czhu"),r=n("9dFV"),i=n("Y8iL"),a=n("xphB"),s=n("lELC");function c(e,t,n){let{draftDecorationSet:r}=e;r&&t||(r=s.b.empty);let a=Object(o.a)(Object(o.a)({},e),{},{draftDecorationSet:r});if(a.bookmark=void 0,t&&n){a.bookmark=n.selection.getBookmark();const e=a.bookmark.resolve(n.doc),t=Object(i.a)(e.from,e.to);a.draftDecorationSet=r.add(n.doc,[t])}return a}n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}));const l=(e,t)=>{const n=Object(i.c)(e.selection,e.doc);return n.length!==t.selectedAnnotations.length||n.some(e=>!t.selectedAnnotations.some(t=>t.type===e.id))?Object(o.a)(Object(o.a)({},t),{},{selectedAnnotations:n}):t},{createPluginState:d,createCommand:u}=Object(r.a)(i.i,(e,t)=>{switch(t.type){case a.a.UPDATE_INLINE_COMMENT_STATE:return Object(o.a)(Object(o.a)({},e),{},{annotations:Object(o.a)(Object(o.a)({},e.annotations),t.data)});case a.a.INLINE_COMMENT_UPDATE_MOUSE_STATE:const n=Object.assign({},e.mouseData,t.data.mouseData);return Object(o.a)(Object(o.a)({},e),{},{mouseData:n});case a.a.SET_INLINE_COMMENT_DRAFT_STATE:return c(e,t.data.drafting,t.data.editorState);case a.a.INLINE_COMMENT_CLEAR_DIRTY_MARK:return Object(o.a)(Object(o.a)({},e),{},{dirtyAnnotations:!1,annotations:{}});case a.a.CLOSE_COMPONENT:return Object(o.a)(Object(o.a)({},e),{},{selectedAnnotations:[]});case a.a.ADD_INLINE_COMMENT:const r=c(e,t.data.drafting,t.data.editorState);return Object(o.a)(Object(o.a)({},r),{},{selectedAnnotations:[...r.selectedAnnotations,...t.data.selectedAnnotations],annotations:Object(o.a)(Object(o.a)({},e.annotations),t.data.inlineComments)});case a.a.INLINE_COMMENT_SET_VISIBLE:const{isVisible:i}=t.data;return i===e.isVisible?e:Object(o.a)(Object(o.a)({},i?e:c(e,!1)),{},{isVisible:i});default:return e}},{onSelectionChanged:l,onDocChanged:(e,t)=>e.getMeta("replaceDocument")?Object(o.a)(Object(o.a)({},t),{},{dirtyAnnotations:!0}):l(e,t),mapping:(e,t)=>{let n,r,{draftDecorationSet:i,bookmark:a}=t;return i&&(n=i.map(e.mapping,e.doc)),a&&(r=a.map(e.mapping)),r===a&&n===i?t:Object(o.a)(Object(o.a)({},t),{},{draftDecorationSet:n,bookmark:r})}})},M3Ut:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return h}));var o,r=n("ByaW"),i=n.n(r),a=n("6eyB"),s=n.n(a);!function(e){e.ISO_FORMAT="YYYY-MM-DD",e.CURRENT_YEAR_FORMAT_WITHOUT_YEAR="CURRENT_YEAR_FORMAT_WITHOUT_YEAR",e.LOCALIZED_FORMAT="LOCALIZED_FORMAT"}(o||(o={}));const c=e=>{const t=new Date(Number(e));return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}},l=()=>{const e=new Date(Date.now());return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()).toString()},d=(e,t,n)=>{if(!t||n===o.ISO_FORMAT)return u(e);const r=new Date(Number(e)),i=n===o.CURRENT_YEAR_FORMAT_WITHOUT_YEAR,a=!i;return t.formatDate(r,{timeZone:"UTC",weekday:i?"short":void 0,month:"short",day:"numeric",year:a?"numeric":void 0,formatMatcher:"best fit"})},u=e=>{const t=new Date(Number(e));return`${t.getUTCFullYear()}-${n=t.getUTCMonth()+1,n<10?"0"+n:n}-${t.getUTCDate()}`;var n},p=e=>s()(u(Number(e)),u(Number(l()))),h=(e,t)=>{const n=new Date(Number(l())),r=new Date(Number(e)),a=i()(r,n),s=r.getUTCFullYear()===n.getUTCFullYear();return t&&[-1,0,1].indexOf(a)>-1?(c=t.formatRelative(r,{units:"day",now:Number(l())})).charAt(0).toUpperCase()+c.slice(1):d(e,t,s?o.CURRENT_YEAR_FORMAT_WITHOUT_YEAR:o.LOCALIZED_FORMAT);var c}},MAnY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("ERkP")),r=i(n("ZUNO"));function i(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var s=function(e){return o.default.createElement(r.default,a({dangerouslySetGlyph:'<svg width="16" height="16" viewBox="0 0 16 16" focusable="false" role="presentation"><path fill="#2684FF" fill-rule="evenodd" d="M2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm2 3a1 1 0 1 0 0 2h8a1 1 0 0 0 0-2H4zm0 4a1 1 0 1 0 0 2h8a1 1 0 0 0 0-2H4zm0 4a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2H4z"/></svg>'},e,{size:"small"}))};s.displayName="Page16Icon";var c=s;t.default=c},MN6c:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ERkP"),i=n.n(r),a=n("7nmT"),s=n.n(a),c=n("ehfC"),l=n("UdmJ"),d=n("lELC"),u=n("z43y"),p=n("DPCN"),h=n.n(p),f=n("m23B"),m=n("0rke"),b=n("KsTJ"),g=n("BMbf"),v=n("3IV/"),y=n("kjku"),O=n.n(y),E=n("HCLf"),w=n("tAd3");const C=b.default.div`
  color: ${Object(E.J)(v.B400,.4)||v.B400};
  background: ${Object(E.J)(v.B300,.6)||v.B300};
  border-radius: ${Object(g.c)()}px;
  margin: 5px 3px 25px;
  width: ${w.a}px;
  min-height: ${w.b}px;
  display: flex;
  align-items: center;
  justify-content: center;
`,T=b.default.div`
  background: ${v.B200};
  border-radius: ${Object(g.c)()}px;
  margin: 2px 0;
  width: 100%;
  height: 2px;
`;var S=({type:e="group"})=>"single"===e?i.a.createElement(T,null):i.a.createElement(C,null,i.a.createElement(O.a,{label:"Document",size:"medium"})),k=n("I9T1"),x=n("CP8u"),A=n("UP2C"),j=n("MWcs"),I=n("ACnq"),M=n("mQXi"),N=n("h75s"),R=n("4FMG"),P=n("tVIO");const L=(e,t)=>{let n="";return 1===e.length?n=e[0].fileMimeType||"unknown":e.length>1&&(n="multiple"),{action:R.a.INSERTED,actionSubject:R.b.DOCUMENT,actionSubjectId:R.c.MEDIA,attributes:{type:R.c.MEDIA_GROUP,inputMethod:t,fileExtension:n},eventType:R.d.TRACK}};const D=(e,t,n,o)=>{const{state:r,dispatch:i}=e,{tr:a,schema:s}=r,{media:c,paragraph:l}=s.nodes;if(!c||!t.length)return;const d=_(t,n,c),u=$(r),p=a.doc.resolve(u).parent,h=a.doc.nodeAt(u),m=!function(e){const{schema:t}=e,n=e.selection.$anchor.node();return n&&n.type===t.nodes.mediaGroup}(r)&&Object(N.e)(r,k.Fragment.from(r.schema.nodes.mediaGroup.createChecked({},d))),b=function(e,t){const{schema:{nodes:{media:n}}}=e,o=t&&t.type===n;return(Object(x.j)(e)||Object(x.n)(e)||Object(x.m)(e)||Object(M.d)(e)&&(!Object(I.i)(e)||Object(I.f)(e)))&&!o}(r,h);let g=p.type===s.nodes.mediaGroup?d:[s.nodes.mediaGroup.createChecked({},d)];if(m){g=b?g.concat(l.create()):g;const n=z(r);return n?u<=n.start?a.deleteRange(n.start,n.end).insert(u,g):a.insert(u,g).deleteRange(n.start,n.end):a.insert(u,g),Object(P.a)(r,a,L(t,o)),i(a),void U(e)}b&&p.type!==s.nodes.mediaGroup&&g.push(l.create()),Object(P.a)(r,a,L(t,o)),i(Object(f.safeInsert)(k.Fragment.fromArray(g),u)(a))},_=(e,t,n)=>e.map(e=>{const{id:o}=e,r=n.create({id:o,type:"file",collection:t});return Object(I.a)(e,r),r}),B=e=>{const{schema:{nodes:{mediaGroup:t,listItem:n}}}=e;if(Object(f.hasParentNode)(e=>e.type===n)(e.selection)){const n=(e=>{const{schema:{nodes:{bulletList:t,orderedList:n}}}=e;return Object(A.b)(e=>e.type===t||e.type===n)(e.selection.$from)})(e);if(n){const o=n.pos+n.node.nodeSize,r=e.doc.nodeAt(o);return r&&r.type===t?o+1:o}}},$=e=>{const{$from:t,$to:n}=e.selection,o=B(e);if(o)return o;const r=Object(I.g)(e);return r&&(!Object(I.f)(e)||t.pos<r&&n.pos<r)?r:Object(I.f)(e)?n.pos:Object(M.c)(e)?n.pos+1:Object(M.a)(e)?t.pos-1:n.pos},z=e=>{const{$from:t,$to:n}=e.selection;if(!Object(I.h)(e))return!Object(I.c)(e)||Object(I.g)(e)?F(t.pos,n.pos):F(Object(M.f)(t)-1,Object(M.e)(n))},F=(e,t=e)=>({start:e,end:t}),U=e=>{const{state:t}=e,{doc:n}=t,o=Object(I.g)(t);if(!o)return;const r=n.resolve(o),i=Object(M.e)(r);i+1>=n.nodeSize-1?Object(j.f)(e,o):Object(j.g)(e,i+1)};var H=n("K1NO"),W=n("PZ9j"),V=n("A0wU"),K=n("dzF+");n.d(t,"b",(function(){return Y})),n.d(t,"a",(function(){return X}));const q=["ready","error","cancelled"];class G{constructor(e,t,n,r,i){this.allowsUploads=!1,this.ignoreLinks=!1,this.waitForMediaUpload=!0,this.allUploadsFinished=!0,this.showDropzone=!1,this.layout="center",this.mediaNodes=[],this.mediaGroupNodes={},this.mobileUploadComplete={},this.pendingTask=Promise.resolve(null),this.destroyed=!1,this.removeOnCloseListener=()=>{},this.onPopupToogleCallback=()=>{},this.pickers=[],this.pickerPromises=[],this.onContextIdentifierProvider=async(e,t)=>{t&&(this.contextIdentifierProvider=await t)},this.setMediaProvider=async e=>{if(!e)return this.destroyPickers(),this.allowsUploads=!1,void(this.destroyed||this.view.dispatch(this.view.state.tr.setMeta(W.a,{allowsUploads:this.allowsUploads})));try{if(this.mediaProvider=await e,!this.mediaProvider.viewMediaClientConfig){const e=this.mediaProvider.viewMediaClientConfig;e&&(this.mediaProvider.viewMediaClientConfig=e)}h()(this.mediaProvider.viewMediaClientConfig,"MediaProvider promise did not resolve to a valid instance of MediaProvider - "+this.mediaProvider)}catch(o){const e=new Error("Media functionality disabled due to rejected provider: "+o.message);return this.errorReporter.captureException(e),this.destroyPickers(),this.allowsUploads=!1,void(this.destroyed||this.view.dispatch(this.view.state.tr.setMeta(W.a,{allowsUploads:this.allowsUploads})))}this.mediaClientConfig=this.mediaProvider.viewMediaClientConfig,this.allowsUploads=!!this.mediaProvider.uploadMediaClientConfig;const{view:t,allowsUploads:n}=this;!this.destroyed&&t.dom.parentNode&&t.dispatch(t.state.tr.setMeta(W.a,{allowsUploads:n})),this.allowsUploads?(this.uploadMediaClientConfig=this.mediaProvider.uploadMediaClientConfig,this.mediaProvider.uploadParams&&this.uploadMediaClientConfig?await this.initPickers(this.mediaProvider.uploadParams,V.a,this.reactContext):this.destroyPickers()):this.destroyPickers()},this.getMediaOptions=()=>this.options,this.hasUserAuthProvider=()=>!!this.uploadMediaClientConfig&&!!this.uploadMediaClientConfig.userAuthProvider,this.insertFile=(e,t,n)=>{const r=Object(o.a)(Object(o.a)({},e),{},{contextId:this.contextIdentifierProvider?this.contextIdentifierProvider.objectId:void 0}),i=this.collectionFromProvider();if(void 0===i)return;this.mediaOptions&&this.mediaOptions.allowMarkingUploadsAsIncomplete&&(this.mobileUploadComplete[r.id]=!1),"error"!==e.status&&this.updateAndDispatch({allUploadsFinished:!1}),Object(m.d)(this.view.state.schema,r.fileMimeType)?Object(m.c)(this.view,r,this.getInputMethod(n),i,this.mediaOptions&&this.mediaOptions.alignLeftOnInsert):D(this.view,[r],i,this.getInputMethod(n)),t(this.handleMediaState);const a=e=>e.status&&-1!==q.indexOf(e.status);a(r)||(this.addPendingTask(new Promise(e=>{t(t=>{a(t)&&e(t)})})),this.pendingTask.then(()=>{this.updateAndDispatch({allUploadsFinished:!0})}));const{view:s}=this;s.hasFocus()||s.focus()},this.addPendingTask=e=>{const t=this.pendingTask,n=()=>t;this.pendingTask=e.then(n,n)},this.splitMediaGroup=()=>Object(I.k)(this.view),this.onPopupPickerClose=()=>{this.onPopupToogleCallback(!1)},this.shouldUseMediaPickerPopup=()=>!this.mediaOptions||this.mediaOptions&&void 0===this.mediaOptions.useMediaPickerPopup?this.hasUserAuthProvider():!!this.mediaOptions.useMediaPickerPopup,this.showMediaPicker=()=>{if(this.openMediaPickerBrowser&&!this.shouldUseMediaPickerPopup())return this.openMediaPickerBrowser();this.popupPicker&&(this.popupPicker.show(),this.onPopupToogleCallback(!0))},this.setBrowseFn=e=>{this.openMediaPickerBrowser=e},this.onPopupToggle=e=>{this.onPopupToogleCallback=e},this.waitForPendingTasks=(e,t)=>{if(t&&this.pendingTask===t)return t;const n=this.pendingTask.then(()=>this.waitForPendingTasks(void 0,this.pendingTask));if(!e)return n;let o;const r=new Promise((t,n)=>{o=window.setTimeout(()=>n(new Error(`Media operations did not finish in ${e} ms`)),e)});return Promise.race([r,n.then(e=>(clearTimeout(o),e))])},this.handleMediaNodeRemoval=(e,t)=>{let n=e;n||(n=this.view.state.doc.nodeAt(t())),Object(I.j)(this.view,n,t)},this.handleMediaNodeMount=(e,t)=>{this.mediaNodes.unshift({node:e,getPos:t})},this.handleMediaNodeUnmount=e=>{this.mediaNodes=this.mediaNodes.filter(({node:t})=>e!==t)},this.findMediaNode=e=>H.b(this,e),this.destroyAllPickers=e=>{e.forEach(e=>e.destroy()),this.pickers.splice(0,this.pickers.length)},this.destroyPickers=()=>{const{pickers:e,pickerPromises:t}=this;t.length===e.length?this.destroyAllPickers(this.pickers):Promise.all(t).then(e=>this.destroyAllPickers(e)),this.popupPicker=void 0,this.customPicker=void 0},this.getInputMethod=e=>{switch(e){case"popup":return R.e.PICKER_CLOUD;case"clipboard":return R.e.CLIPBOARD;case"dropzone":return R.e.DRAG_AND_DROP}},this.updateMediaNodeAttrs=(e,t,n)=>{const{view:o}=this;if(o)return Object(H.f)(e,t,n)(o.state,o.dispatch)},this.handleMediaState=e=>{switch(e.status){case"error":const{uploadErrorHandler:t}=this.options;t&&t(e);break;case"mobile-upload-end":const n={id:e.publicId||e.id};"string"==typeof e.collection&&(n.collection=e.collection),this.updateMediaNodeAttrs(e.id,n,Object(m.d)(this.view.state.schema,e.fileMimeType)),this.mobileUploadComplete[n.id]=!0,delete this.mediaGroupNodes[e.id]}},this.isMobileUploadCompleted=e=>H.c(this,e),this.removeNodeById=e=>{const{id:t}=e,n=H.a(this,t,Object(K.a)(e.fileMimeType));n&&Object(I.j)(this.view,n.node,n.getPos)},this.removeSelectedMediaContainer=()=>{const{view:e}=this,t=this.selectedMediaContainerNode();if(!t)return!1;let{from:n}=e.state.selection;return Object(I.j)(e,t.firstChild,()=>n+1),!0},this.selectedMediaContainerNode=()=>{const{selection:e,schema:t}=this.view.state;if(e instanceof c.NodeSelection&&(e.node.type===t.nodes.mediaSingle||e.node.type===t.nodes.mediaGroup))return e.node},this.handleDrag=e=>{const t="enter"===e;if(this.showDropzone===t)return;this.showDropzone=t;const{dispatch:n,state:o}=this.view;n(o.tr)},this.reactContext=n,this.options=t,this.mediaOptions=r,this.dispatch=i,this.waitForMediaUpload=void 0===t.waitForMediaUpload||t.waitForMediaUpload;const{nodes:a}=e.schema;h()(a.media&&(a.mediaGroup||a.mediaSingle),"Editor: unable to init media plugin - media or mediaGroup/mediaSingle node absent in schema"),t.providerFactory.subscribe("mediaProvider",(e,t)=>this.setMediaProvider(t)),t.providerFactory.subscribe("contextIdentifierProvider",this.onContextIdentifierProvider),this.errorReporter=t.errorReporter||new u.a}updateElement(){let e;const t=this.selectedMediaContainerNode(),{mediaSingle:n}=this.view.state.schema.nodes;t&&t.type===n&&(e=this.getDomElement(this.view.domAtPos.bind(this.view))),this.element!==e&&(this.element=e)}getDomElement(e){const{selection:t,schema:n}=this.view.state;if(!(t instanceof c.NodeSelection))return;if(t.node.type!==n.nodes.mediaSingle)return;const o=Object(f.findDomRefAtPos)(t.from,e);if(o){if(!o.childNodes.length)return o.parentNode;return o.querySelector(".wrapper")||o}}setView(e){this.view=e}destroy(){if(this.destroyed)return;this.destroyed=!0;const{mediaNodes:e}=this;e.splice(0,e.length),this.removeOnCloseListener(),this.destroyPickers()}async initPickers(e,t,n){if(this.destroyed||!this.uploadMediaClientConfig)return;const{errorReporter:o,pickers:r,pickerPromises:i}=this;if(!r.length){const a={mediaClientConfig:this.uploadMediaClientConfig,errorReporter:o},s={uploadParams:e,proxyReactContext:n(),useForgePlugins:this.mediaOptions&&this.mediaOptions.useForgePlugins||!1,featureFlags:this.mediaOptions&&this.mediaOptions.featureFlags};if(this.options.customMediaPicker){const e=new t("customMediaPicker",a,this.options.customMediaPicker).init();i.push(e),r.push(this.customPicker=await e)}else if(this.shouldUseMediaPickerPopup()){const e=new t("popup",a,s).init();i.push(e),r.push(this.popupPicker=await e),this.removeOnCloseListener=this.popupPicker.onClose(this.onPopupPickerClose)}r.forEach(e=>{e.onNewMedia(this.insertFile)})}r.forEach(t=>t.setUploadParams(e))}collectionFromProvider(){return this.mediaProvider&&this.mediaProvider.uploadParams&&this.mediaProvider.uploadParams.collection}updateAndDispatch(e){Object.keys(e).forEach(t=>{const n=t,o=e[n];void 0!==o&&(this[n]=o)}),this.dispatch&&this.dispatch(W.a,Object(o.a)({},this))}}const Y=e=>W.a.getState(e),X=(e,t,n,o,r)=>{const a=(e=>{const t=document.createElement("div");return e?s.a.render(i.a.createElement(S,{type:"single"}),t):s.a.render(i.a.createElement(S),t),t})(r&&r.allowDropzoneDropLine);return new c.Plugin({state:{init:(e,i)=>new G(i,t,n,r,o),apply(e,t){"number"==typeof t.editingMediaSinglePos&&(t.editingMediaSinglePos=e.mapping.map(t.editingMediaSinglePos));const n=e.getMeta(W.a);if(n){const{allowsUploads:e}=n;t.updateAndDispatch({allowsUploads:void 0===e?t.allowsUploads:e})}return t}},filterTransaction:(e,t)=>!(e.selectionSet&&Object(f.isNodeSelection)(e.selection)&&e.selection.node.type===t.schema.nodes.media&&e.selection.$anchor.parent.type===t.schema.nodes.mediaSingle),key:W.a,view:e=>{const t=Y(e.state);return t.setView(e),t.updateElement(),{update:()=>{t.updateElement()}}},props:{decorations:e=>{if(!Y(e).showDropzone)return;const{schema:t,selection:{$anchor:n}}=e;if(e.selection instanceof c.NodeSelection){if(e.selection.node.type===t.nodes.mediaSingle){const t=d.a.node(e.selection.from,e.selection.to,{class:"richMedia-selected"});return d.b.create(e.doc,[t])}return}let o=n.pos;if(n.parent.type!==t.nodes.paragraph&&n.parent.type!==t.nodes.codeBlock&&(o=Object(l.insertPoint)(e.doc,o,t.nodes.mediaGroup)),null==o)return;const r=[d.a.widget(o,a,{key:"drop-placeholder"})];return d.b.create(e.doc,r)},nodeViews:t.nodeViews,handleTextInput:e=>(Y(e.state).splitMediaGroup(),!1)}})}},MaKF:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("jyPs"),r=n("JzyM");const i=e=>t=>{const n=Object(r.c)(t);if(!n)return;const i=o.b.get(n.node);return(Array.isArray(e)?e:[e]).filter(e=>e>=0&&e<=i.height-1).reduce((e,t)=>{const o=i.cellsInRect({left:0,right:i.width,top:t,bottom:t+1});return e.concat(o.map(e=>{const t=n.node.nodeAt(e),o=e+n.start;return{pos:o,start:o+1,node:t,depth:n.depth+2}}))},[])}},Mgyk:function(e){e.exports=JSON.parse('{"a":"@atlaskit/status","b":"0.10.5"}')},MrDN:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));var o=n("ERkP"),r=n.n(o);const{Provider:i,Consumer:a}=r.a.createContext({width:0,broadcastWidth:()=>{}});class s extends r.a.Component{constructor(e){super(e),this.state={width:0},this.broadcastSidebarWidth=e=>{e!==this.state.width&&this.setState({width:e})}}render(){const{width:e}=this.state;return r.a.createElement(i,{value:{width:e,broadcastWidth:this.broadcastSidebarWidth}},this.props.children)}}},NC4b:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("a8dO"),r=n("ERkP"),i=n.n(r),a=n("UEfI");const s=({name:e,children:t})=>i.a.createElement(a.f,{name:e},e=>i.a.createElement(o.a,{content:e,position:"right"},t))},NSXj:function(e,t,n){"use strict";var o=n("aTr9"),r=n("M3To"),i=n("4FMG"),a=n("Y8iL"),s=n("xphB"),c=n("ehfC"),l=n("tVIO"),d=n("TIUX");const u=e=>(t,n)=>{const r=Object(a.g)(n),{from:i,to:s,head:l}=Object(a.h)(n,r),u=n.schema.marks.annotation.create({id:e,type:o.b.INLINE_COMMENT});let p=Object(d.a)(i,s,!1,u,t);return p.setSelection(c.TextSelection.create(p.doc,l)),p},p=(e,t=i.e.TOOLBAR)=>(n,o)=>{const r=Object(a.f)(e,t)(o);return Object(l.a)(o,n,r)},h=(e,t)=>Object(l.a)(t,e,{action:i.a.INSERTED,actionSubject:i.b.ANNOTATION,eventType:i.d.TRACK,actionSubjectId:i.c.INLINE_COMMENT});var f={addAnnotationMark:u,addInlineComment:e=>(t,n)=>{let o=u(e)(t,n);return o=h(o,n),o=p(!1,i.e.TOOLBAR)(o,n),o},addOpenCloseAnalytics:p,addInsertAnalytics:h,addResolveAnalytics:e=>(t,n)=>{const o={action:i.a.RESOLVED,actionSubject:i.b.ANNOTATION,actionSubjectId:i.c.INLINE_COMMENT,eventType:i.d.TRACK,attributes:{method:e}};return Object(l.a)(n,t,o)}},m=n("LsVN");n.d(t,"g",(function(){return b})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return O})),n.d(t,"h",(function(){return E})),n.d(t,"c",(function(){return w})),n.d(t,"f",(function(){return C}));const b=(e,t)=>{const n={type:s.a.UPDATE_INLINE_COMMENT_STATE,data:e},o=Object.values(e).every(e=>e);return t&&o?Object(r.a)(n,f.addResolveAnalytics(t)):Object(r.a)(n)},g=()=>Object(r.a)({type:s.a.CLOSE_COMPONENT}),v=()=>Object(r.a)({type:s.a.INLINE_COMMENT_CLEAR_DIRTY_MARK}),y=e=>(t,n)=>{const{tr:r,selection:{$from:i}}=t,{annotation:a}=t.schema.marks;return!!i.marks().some(e=>e.type===a)&&(r.removeMark(i.start(),i.end(),a.create({id:e,type:o.b.INLINE_COMMENT})),n&&n(r),!0)},O=(e,t=i.e.TOOLBAR)=>{const n=(e=>t=>(!e||Object(a.j)(t)===m.a.VALID)&&{type:s.a.SET_INLINE_COMMENT_DRAFT_STATE,data:{drafting:e,editorState:t}})(e);return Object(r.a)(n,f.addOpenCloseAnalytics(e,t))},E=e=>Object(r.a)({type:s.a.INLINE_COMMENT_UPDATE_MOUSE_STATE,data:{mouseData:e}}),w=(e,t=o.b.INLINE_COMMENT)=>(n,i)=>{const{bookmark:c}=Object(a.g)(n)||{};return!(!c||!i)&&(t===o.b.INLINE_COMMENT&&(e=>Object(r.a)(t=>({type:s.a.ADD_INLINE_COMMENT,data:{drafting:!1,inlineComments:{[e]:!1},selectedAnnotations:[{id:e,type:o.b.INLINE_COMMENT}],editorState:t}}),f.addInlineComment(e)))(e)(n,i))},C=e=>Object(r.a)({type:s.a.INLINE_COMMENT_SET_VISIBLE,data:{isVisible:e}})},Nc4I:function(e,t,n){"use strict";var o=n("1798"),r=[["normalize",n("Dsb4")],["block",n("pAx/")],["inline",n("mUT7")],["linkify",n("HlfJ")],["replacements",n("DDxP")],["smartquotes",n("AXp1")]];function i(){this.ruler=new o;for(var e=0;e<r.length;e++)this.ruler.push(r[e][0],r[e][1])}i.prototype.process=function(e){var t,n,o;for(t=0,n=(o=this.ruler.getRules("")).length;t<n;t++)o[t](e)},i.prototype.State=n("t+9L"),e.exports=i},Ncve:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("czJC"),r=n("jyPs"),i=n("hrqP");function a(e){const t=e.selection,n=Object(i.a)(t);if(!n)throw new Error("selectedRect: invalid $pos for selection");const a=n.node(-1),s=n.start(-1),c=r.b.get(a);let l;return l=t instanceof o.a?c.rectBetween(t.$anchorCell.pos-s,t.$headCell.pos-s):c.findCell(n.pos-s),l.tableStart=s,l.map=c,l.table=a,l}},NlFJ:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var o=n("ehfC");class r{constructor(){this.changeHandlers=[],this.changeHandlers=[]}subscribe(e){this.changeHandlers.push(e)}unsubscribe(e){this.changeHandlers=this.changeHandlers.filter(t=>t!==e)}notifyNewSelection(e,t){this.changeHandlers.forEach(n=>n(e,t))}}const i=new o.PluginKey("reactNodeView"),a=new o.Plugin({state:{init:()=>new r,apply:(e,t)=>t},key:i,view:e=>{const t=i.getState(e.state);return{update:e=>{const{from:n,to:o}=e.state.selection;t.notifyNewSelection(n,o)}}}})},"Nla+":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("L21V");const r=Object(o.f)({normal:{id:"fabric.editor.normal",defaultMessage:"Normal text",description:"This is the default text style"},heading1:{id:"fabric.editor.heading1",defaultMessage:"Heading 1",description:"Used for the title of a section of your document, headings run from 1 (largest size) to 6 (smallest size)"},heading1Description:{id:"fabric.editor.heading1Description",defaultMessage:"Use this for a top level heading",description:"Description of the main heading, heading 1"},heading2:{id:"fabric.editor.heading2",defaultMessage:"Heading 2",description:"Used for the title of a section of your document, headings run from 1 (largest size) to 6 (smallest size)"},heading2Description:{id:"fabric.editor.heading2Description",defaultMessage:"Use this for key sections",description:"Description of a subtitle heading or secondary heading"},heading3:{id:"fabric.editor.heading3",defaultMessage:"Heading 3",description:"Used for the title of a section of your document, headings run from 1 (largest size) to 6 (smallest size)"},heading3Description:{id:"fabric.editor.heading3Description",defaultMessage:"Use this for sub sections and group headings",description:""},heading4:{id:"fabric.editor.heading4",defaultMessage:"Heading 4",description:"Used for the title of a section of your document, headings run from 1 (largest size) to 6 (smallest size)"},heading4Description:{id:"fabric.editor.heading4Description",defaultMessage:"Use this for deep headings",description:""},heading5:{id:"fabric.editor.heading5",defaultMessage:"Heading 5",description:"Used for the title of a section of your document, headings run from 1 (largest size) to 6 (smallest size)"},heading5Description:{id:"fabric.editor.heading5Description",defaultMessage:"Use this for grouping list items",description:""},heading6:{id:"fabric.editor.heading6",defaultMessage:"Heading 6",description:"Used for the title of a section of your document, headings run from 1 (largest size) to 6 (smallest size)"},heading6Description:{id:"fabric.editor.heading6Description",defaultMessage:"Use this for low level headings",description:""},blockquote:{id:"fabric.editor.blockquote2",defaultMessage:"Quote",description:"Quote some text"},blockquoteDescription:{id:"fabric.editor.blockquote.description",defaultMessage:"Insert a quote or citation",description:"Quote some text"},codeblock:{id:"fabric.editor.codeblock",defaultMessage:"Code snippet",description:"Insert a snippet/segment of code (code block)"},codeblockDescription:{id:"fabric.editor.codeblock.description",defaultMessage:"Display code with syntax highlighting",description:"Insert a snippet/segment of code (code block)"},infoPanel:{id:"fabric.editor.infoPanel",defaultMessage:"Info panel",description:"Visually distinguishes your text by adding a background colour (blue, purple, yellow, green, red)"},infoPanelDescription:{id:"fabric.editor.infoPanel.description",defaultMessage:"Highlight information in a colored panel",description:"Visually distinguishes your text by adding a background colour (blue, purple, yellow, green, red)"},notePanel:{id:"fabric.editor.notePanel",defaultMessage:"Note panel",description:"Visually distinguishes your text by adding a note panel"},notePanelDescription:{id:"fabric.editor.notePanel.description",defaultMessage:"Add a note in a colored panel",description:"Visually distinguishes your text by adding a note panel"},successPanel:{id:"fabric.editor.successPanel",defaultMessage:"Success panel",description:"Visually distinguishes your text by adding a success panel"},successPanelDescription:{id:"fabric.editor.successPanel.description",defaultMessage:"Add tips in a colored panel",description:"Visually distinguishes your text by adding a success panel"},warningPanel:{id:"fabric.editor.warningPanel",defaultMessage:"Warning panel",description:"Visually distinguishes your text by adding a warning panel"},warningPanelDescription:{id:"fabric.editor.warningPanel.description",defaultMessage:"Add a note of caution in a colored panel",description:"Visually distinguishes your text by adding a warning panel"},errorPanel:{id:"fabric.editor.errorPanel",defaultMessage:"Error panel",description:"Visually distinguishes your text by adding a error panel"},errorPanelDescription:{id:"fabric.editor.errorPanel.description",defaultMessage:"Call out errors in a colored panel",description:"Visually distinguishes your text by adding a error panel"},other:{id:"fabric.editor.other",defaultMessage:"Others...",description:"Other text formatting"}})},OOYR:function(e,t,n){"use strict";var o=n("T1Ll").isSpace;e.exports=function(e,t){var n,r,i=e.pos;if(10!==e.src.charCodeAt(i))return!1;for(n=e.pending.length-1,r=e.posMax,t||(n>=0&&32===e.pending.charCodeAt(n)?n>=1&&32===e.pending.charCodeAt(n-1)?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),i++;i<r&&o(e.src.charCodeAt(i));)i++;return e.pos=i,!0}},OSPm:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));const o=n("KsTJ").keyframes`
  from, to {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
`,r="ProseMirror-hide-gapcursor",i=".ProseMirror-gapcursor",a='[layout="wrap-left"]',s='[layout="wrap-right"]',c=`\n  /* =============== GAP CURSOR ================== */\n  .ProseMirror {\n    &.${r} {\n      caret-color: transparent;\n    }\n\n    ${i} {\n      display: none;\n      pointer-events: none;\n      position: relative;\n\n      & span {\n        caret-color: transparent;\n        position: absolute;\n        height: 100%;\n        width: 100%;\n        display: block;\n      }\n\n      & span::after {\n        animation: 1s ${o} step-end infinite;\n        border-left: 1px solid;\n        content: '';\n        display: block;\n        position: absolute;\n        top: 0;\n        height: 100%;\n      }\n      &.-left span::after {\n        left: -3px;\n      }\n      &.-right span::after {\n        right: -3px;\n      }\n      & span[layout='full-width'],\n      & span[layout='wide'] {\n        margin-left: 50%;\n        transform: translateX(-50%);\n      }\n      &${s} {\n        float: right;\n      }\n\n      /* fix vertical alighment of gap cursor */\n      &:first-child + ul,\n      &:first-child + span + ul,\n      &:first-child + ol,\n      &:first-child + span + ol,\n      &:first-child + pre,\n      &:first-child + span + pre,\n      &:first-child + blockquote,\n      &:first-child + span + blockquote {\n        margin-top: 0;\n      }\n    }\n    &.ProseMirror-focused ${i} {\n      display: block;\n      border-color: transparent;\n    }\n  }\n\n  /* This hack below is for two images aligned side by side */\n  ${i}${a} + span + ${a},\n  ${i}${s} + span + ${s},\n  ${i} + ${a} + ${s},\n  ${i} + ${a} + span + ${s},\n  ${i} + ${s} + ${a},\n  ${i} + ${s} + span + ${a},\n  ${a} + ${i} + ${s},\n  ${a} + ${i} + span ${s},\n  ${s} + ${i} + ${a},\n  ${s} + ${i} + span + ${a} {\n    clear: none;\n  }\n\n  ${a} + ${i} + ${s} > div,\n  ${a} + ${i} + span + ${s} > div,\n  ${s} + ${i} + ${a} > div,\n  ${s} + ${i} + span + ${a} > div,\n  ${i} + ${s} + ${a} > div,\n  ${i} + ${s} + span + ${a} > div,\n  ${i} + ${a} + ${s} > div,\n  ${i} + ${a} + span + ${s} > div {\n    margin-right: 0;\n    margin-left: 0;\n    margin-bottom: 0;\n  }\n\n  ${a} + ${i},\n  ${s} + ${i} {\n    float: left;\n  }\n\n  ${i} + ${a} + span + ${s}::after,\n  ${i} + ${s} + span + ${a}::after,\n  ${a} + ${i} + ${s}::after,\n  ${a} + ${i} + span + ${s}::after,\n  ${s} + ${i} + ${a}::after,\n  ${s} + ${i} + span + ${a}::after {\n    visibility: hidden;\n    display: block;\n    font-size: 0;\n    content: ' ';\n    clear: both;\n    height: 0;\n  }\n\n  ${a} + ${i} + ${s} + *,\n  ${a} + ${i} + ${s} + span + *,\n  ${s} + ${i} + ${a} + *,\n  ${s} + ${i} + ${a} + span + *,\n  ${a} + ${i} + span + ${s} + *,\n  ${s} + ${i} + span + ${a} + *,\n  ${i} + ${a} + span + ${s} + *,\n  ${i} + ${s} + span + ${a} + *,\n  ${a} + ${i} + ${s} + * > *,\n  ${a} + ${i} + ${s} + span + * > *,\n  ${s} + ${i} + ${a} + * > *,\n  ${s} + ${i} + ${a} + span + * > *,\n  ${a} + ${i} + span + ${s} + * > *,\n  ${s} + ${i} + span + ${a} + * > *,\n  ${i} + ${a} + span + ${s} + * > *,\n  ${i} + ${s} + span + ${a} + * > *,\n  .ProseMirror-widget + ${i} + *,\n  .ProseMirror-widget + ${i} + span + * {\n    margin-top: 0;\n  }\n`},OUhg:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=new(n("ehfC").PluginKey)("quickInsertPluginKey")},OYpl:function(e,t,n){"use strict";var o=n("Oqsm"),r=n("anra"),i=n.n(r),a=n("liuE"),s=n("3IV/"),c=n("ERkP"),l=n.n(c),d=n("MjPE"),u=n("UEfI"),p=n("s2dH"),h=n("NC4b"),f=n("KsTJ");const m=f.default.div`
  align-items: center;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  overflow: hidden;
  padding: 6px 14px;
  text-overflow: ellipsis;
  vertical-align: middle;
`,b=f.default.span`
  position: relative;
  flex: initial;
  opacity: ${e=>e.restricted?"0.5":"inherit"};
`,g=f.default.div`
  flex: 1;
  min-width: 0;
  margin-left: 14px;
  opacity: ${e=>e.restricted?"0.5":"inherit"};
`,v=f.default.span`
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: ${s.N900};
`,y=f.default.div`
  display: flex;
  flex-direction: column;
  text-align: right;
  opacity: ${e=>e.restricted?"0.5":"inherit"};

  & {
    /* Lozenge */
    & > span {
      margin-bottom: 2px;
    }
  }
`,O=f.default.div`
  margin-left: 20px;
  flex: none;
  color: ${s.N100};
  font-size: 12px;
`,E=f.default.div`
  background-color: ${e=>e.selected?s.N30:"transparent"};
  display: block;
  overflow: hidden;
  list-style-type: none;
  height: 48px;
  line-height: 1.2;
  cursor: pointer;
`,w=f.default.div`
  padding-left: 5px;
  color: ${s.N500};
`;function C(e,t,n,o){if(!t)return null;const r=[],i=o||"";let a=0;if(n){for(let e=0;e<n.length;e++){const o=n[e],i=o.start,s=o.end;i>a&&r.push({value:t.substring(a,i),matches:!1}),r.push({value:t.substring(i,s+1),matches:!0}),a=s+1}a<t.length&&r.push({value:t.substring(a,t.length),matches:!1})}else r.push({value:t,matches:!1});return l.a.createElement(e,null,i,r.map((e,t)=>e.matches?l.a.createElement("b",{key:t},e.value):e.value))}const T=f.default.span`
  color: ${s.N100};
  font-size: 12px;

  margin-top: 2px;

  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`;class S extends l.a.PureComponent{render(){const{highlight:e,name:t,nickname:n}=this.props.mention,o=e&&e.nickname;return t===n?null:C(T,n,o,"@")}}var k=n("L21V"),x=n("LMBy");class A extends l.a.PureComponent{constructor(){super(...arguments),this.renderByline=(e,t)=>t?e>50?this.getBylineComponent(l.a.createElement(k.b,Object.assign({},x.a.plus50MembersWithYou))):this.getBylineComponent(l.a.createElement(k.b,Object.assign({},x.a.memberCountWithYou,{values:{0:e}}))):e>50?this.getBylineComponent(l.a.createElement(k.b,Object.assign({},x.a.plus50MembersWithoutYou))):this.getBylineComponent(l.a.createElement(k.b,Object.assign({},x.a.memberCountWithoutYou,{values:{0:e}}))),this.getBylineComponent=e=>l.a.createElement(T,null,e)}render(){const{context:e}=this.props.mention;if(!e)return null;const t=e.includesYou,n=e.memberCount;return this.renderByline(n,t)}}class j extends l.a.PureComponent{render(){const{userType:e}=this.props.mention;switch(e){case d.d[d.d.TEAM]:return l.a.createElement(A,{mention:this.props.mention});default:return l.a.createElement(S,{mention:this.props.mention})}}}n.d(t,"a",(function(){return I}));class I extends l.a.PureComponent{constructor(){super(...arguments),this.onMentionSelected=e=>{Object(p.b)(e)&&this.props.onSelection&&(e.preventDefault(),this.props.onSelection(this.props.mention,e))},this.onMentionMenuItemMouseMove=e=>{this.props.onMouseMove&&this.props.onMouseMove(this.props.mention,e)},this.onMentionMenuItemMouseEnter=e=>{this.props.onMouseEnter&&this.props.onMouseEnter(this.props.mention,e)}}render(){const{mention:e,selected:t}=this.props,{id:n,highlight:r,avatarUrl:c,presence:p,name:f,mentionName:T,lozenge:S,accessLevel:k}=e,{status:x,time:A}=p||{},I=Object(d.g)(k),M=r&&r.name,N=t?s.N30:void 0;return l.a.createElement(E,{selected:t,onMouseDown:this.onMentionSelected,onMouseMove:this.onMentionMenuItemMouseMove,onMouseEnter:this.onMentionMenuItemMouseEnter,"data-mention-id":n,"data-mention-name":T},l.a.createElement(m,null,l.a.createElement(b,{restricted:I},l.a.createElement(o.a,{src:c,size:"medium",presence:x,borderColor:N})),l.a.createElement(g,{restricted:I},C(v,f,M),l.a.createElement(j,{mention:e})),l.a.createElement(y,{restricted:I},function(e){return e?l.a.createElement(a.a,null,e):null}(S),function(e){return e?l.a.createElement(O,null,e):null}(A)),I?l.a.createElement(h.a,{name:f},l.a.createElement(w,null,l.a.createElement(u.e,null,e=>l.a.createElement(i.a,{label:e})))):null))}}},OiW7:function(e,t,n){var o=n("UFJf");e.exports=function(e,t){var n=o(e),r=Number(t);return n.setDate(n.getDate()+r),n}},OqJb:function(e,t,n){"use strict";var o="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",r="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",i=new RegExp("^(?:"+o+"|"+r+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),a=new RegExp("^(?:"+o+"|"+r+")");e.exports.HTML_TAG_RE=i,e.exports.HTML_OPEN_CLOSE_TAG_RE=a},P3V9:function(e,t,n){"use strict";const o=e=>e.replace(/_/g,"-"),r=e=>new Date(e.year,e.month-1,e.day),i=new Date(NaN),a={year:1993,month:2,day:18},s=r(a),c=/(\d+)[^\d]+(\d+)[^\d]+(\d+)\.?/,l=/(\d+)[^\d]*(\d+)?[^\d]*(\d+)?\.?/,d=e=>e.replace(/\u200E/g,""),u=e=>e.splice(1,4).map(e=>parseInt(e,10)),p=e=>{const t=o(e),n=Intl.DateTimeFormat(t).format(s),p=d(n).match(c);if(!p)throw new Error("Unable to create DateParser");const h=u(p),f=h.indexOf(a.year),m=h.indexOf(a.month),b=h.indexOf(a.day);return e=>{const t=d(e).match(l);if(!t)return i;const n=u(t),o=(e=>{const t=(e=>({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}))(new Date),{year:n,month:o,day:r}=e,i=n<100?2e3+n:n;return{year:isNaN(i)?t.year:i,month:isNaN(o)||0===o?t.month:o,day:isNaN(r)||0===r?t.day:r}})({year:n[f],month:n[m],day:n[b]});return(e=>{const{year:t,month:n,day:o}=e,r=((e,t)=>2===t&&(e=>e%4==0&&e%100!=0||e%400==0)(e)?29:[31,28,31,30,31,30,31,31,30,31,30,31][t-1])(t,n);return 1<=n&&n<=12&&1<=o&&o<=r})(o)?r(o):i}};var h=n("Czhu");const f=e=>e.reduce((e,t)=>Object(h.a)(Object(h.a)({},e),{},{[t.type]:t.value}),{});n.d(t,"a",(function(){return m}));const m=(e,t)=>{const n=o(e);return{getDaysShort:()=>{const e=Intl.DateTimeFormat(n,{weekday:"short"});return[1,2,3,4,5,6,7].map(t=>e.format(new Date(2e3,9,t,12)).replace(/[\s\u200E]/g,"").substring(0,3))},getMonthsLong:()=>{const e=Intl.DateTimeFormat(n,{month:"long"});return[0,1,2,3,4,5,6,7,8,9,10,11].map(t=>e.format(new Date(2020,t,1)))},formatDate:e=>Intl.DateTimeFormat(n).format(e),formatTime:e=>Intl.DateTimeFormat(n,{hour:"numeric",minute:"numeric"}).format(e),parseDate:e=>p(n)(e),formatToParts:(e=new Date)=>{const o=new Intl.DateTimeFormat(n,t),r=new Date(e);r.setFullYear(2020);const i=f(o.formatToParts(r)),a=f(o.formatToParts(e));return i.year&&(i.year=a.year),"00"===i.hour&&12===r.getHours()&&(i.hour="12"),i}}}},P4jJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o={FLOATING_TOOLBAR_COMPONENT:"pm-alt-text-alt-text-floating-toolbar"}},PZ9j:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=new(n("ehfC").PluginKey)("mediaPlugin")},PZQm:function(e,t,n){"use strict";e.exports=n("vtBm")},Pmn2:function(e,t,n){"use strict";var o=n("j8G4"),r=n("ERkP"),i=n.n(r);class a extends i.a.PureComponent{constructor(){super(...arguments),this.state={Dropzone:a.Dropzone,MediaPickerErrorBoundary:a.MediaPickerErrorBoundary}}async UNSAFE_componentWillMount(){if(!this.state.Dropzone||!this.state.MediaPickerErrorBoundary)try{const[e,t,o]=await Promise.all([Promise.all([n.e(7),n.e(54),n.e(115),n.e("@atlaskit-media-client~4134d62c")]).then(n.bind(null,"kGyc")),Promise.all([n.e(7),n.e(48),n.e(54),n.e(74),n.e("@atlaskit-internal_Dropzone~4134d62c")]).then(n.bind(null,"3dXF")),n.e("@atlaskit-internal_MediaPickerErrorBoundary~b0ab8eb5").then(n.bind(null,"1i9s"))]);a.Dropzone=e.withMediaClient(t.Dropzone,this.props.featureFlags),a.MediaPickerErrorBoundary=o.default,this.setState({Dropzone:a.Dropzone,MediaPickerErrorBoundary:a.MediaPickerErrorBoundary})}catch(e){}}render(){const{Dropzone:e,MediaPickerErrorBoundary:t}=this.state;return e&&t?i.a.createElement(t,null,i.a.createElement(e,Object.assign({},this.props))):null}}a.displayName="AsyncDropzone";class s extends i.a.PureComponent{constructor(){super(...arguments),this.state={Clipboard:s.Clipboard}}async UNSAFE_componentWillMount(){if(!this.state.Clipboard){const[e,t]=await Promise.all([Promise.all([n.e(7),n.e(54),n.e(115),n.e("@atlaskit-media-client~4134d62c")]).then(n.bind(null,"kGyc")),Promise.all([n.e(7),n.e(48),n.e(54),n.e(74),n.e("@atlaskit-internal_Clipboard~4134d62c")]).then(n.bind(null,"IQey"))]);s.Clipboard=e.withMediaClient(t.Clipboard,this.props.featureFlags),this.setState({Clipboard:s.Clipboard})}}render(){return this.state.Clipboard?i.a.createElement(this.state.Clipboard,Object.assign({},this.props)):null}}s.displayName="AsyncClipboard";class c extends i.a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={Browser:c.Browser}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}async UNSAFE_componentWillMount(){if(!this.state.Browser){const[e,t]=await Promise.all([Promise.all([n.e(7),n.e(54),n.e(115),n.e("@atlaskit-media-client~4134d62c")]).then(n.bind(null,"kGyc")),Promise.all([n.e(7),n.e(48),n.e(54),n.e(74),n.e("@atlaskit-internal_Browser~4134d62c")]).then(n.bind(null,"wRhx"))]);c.Browser=e.withMediaClient(t.Browser,this.props.featureFlags),this.mounted&&this.setState({Browser:c.Browser})}}render(){return this.state.Browser?i.a.createElement(this.state.Browser,Object.assign({},this.props)):null}}async function l(e,t){const[{PopupImpl:o},{getMediaClient:r}]=await Promise.all([Promise.all([n.e("atlaskit~66e23772"),n.e("vendors~4134d62c"),n.e(7),n.e(11),n.e(10),n.e(23),n.e(48),n.e(54),n.e(60),n.e(74),n.e("@atlaskit-internal_media-picker-popup~4134d62c")]).then(n.bind(null,"O5Vb")),Promise.all([n.e(7),n.e(54),n.e(115),n.e("@atlaskit-media-client~4134d62c")]).then(n.bind(null,"kGyc"))]);return new o(r(e),t)}c.displayName="AsyncBrowser",n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return o.b})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}))},PuUi:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("F/E8");function r(e,t){if(!Object(o.a)())return;const n="[START]: "+e,r="[END]: "+e,i=performance.now();performance.mark(n),requestAnimationFrame(()=>{requestAnimationFrame(()=>{performance.mark(r);const o=performance.now()-i;try{performance.measure(e,n,r);const a=performance.getEntriesByName(e).pop();a?t(a.duration,a.startTime):t(o,i)}catch(a){t(o,i)}performance.clearMeasures(e),performance.clearMarks(n),performance.clearMarks(r)})})}},Pudr:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("tV3p");function r(e){const t=Object(o.c)(e);return Boolean(t)&&Boolean(t.pluginConfig.allowAddColumnWithCustomStep)}},Pxjv:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ehfC"),i=n("F/E8"),a=n("PuUi"),s=n("4FMG"),c=n("tVIO"),l=n("XC2T"),d=n("EruW");function u(e,t){return Object(o.a)(Object(o.a)({},e),{},{attributes:Object(o.a)(Object(o.a)({},e.attributes),{},{duration:t}),eventType:s.d.OPERATIONAL})}var p=e=>({name:"analytics",pmPlugins:()=>[{name:"analyticsPlugin",plugin:()=>function(e){if(!e||!e.createAnalyticsEvent)return;const t=Object(i.a)();return new r.Plugin({key:l.a,state:{init:()=>e,apply:(e,n)=>{const o=Object(c.b)(e);if(o.length>0)for(const{payload:r,channel:i}of o)if(t&&e.docChanged&&r.action!==s.a.INSERTED&&r.action!==s.a.DELETED){const e=`${r.actionSubject}:${r.action}:${r.actionSubjectId}`;Object(a.a)(e,e=>{Object(d.a)(n.createAnalyticsEvent)({payload:u(r,e),channel:i})})}return n}}})}(e)}]});n.d(t,"a",(function(){return h}));const h=l.a;t.b=p},QADc:function(e,t,n){"use strict";var o,r;n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),function(e){e.TWO_COLS_EQUAL="twoColumnsEqual",e.THREE_COLS_EQUAL="threeColumnsEqual",e.LEFT_SIDEBAR="twoColumnsLeftSidebar",e.RIGHT_SIDEBAR="twoColumnsRightSidebar",e.THREE_WITH_SIDEBARS="threeColumnsWithSidebars "}(o||(o={})),function(e){e.INLINE_CARD="inline",e.BLOCK_CARD="block",e.URL="url"}(r||(r={}))},QF9V:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var o=n("lELC"),r=n("ehfC"),i=n("m23B");const a=new r.PluginKey("decorationPlugin");var s;!function(e){e[e.DECORATION_ADD=0]="DECORATION_ADD",e[e.DECORATION_REMOVE=1]="DECORATION_REMOVE"}(s||(s={}));const c=(e,t,n="danger")=>(c,l)=>{let d,u;if(c.selection instanceof r.NodeSelection){const t=c.selection.node;(Array.isArray(e)?e:[e]).indexOf(t.type)>-1&&(d=c.selection.from,u=t)}const p=Object(i.findParentNodeOfType)(e)(c.selection);return void 0===d&&p&&(d=p.pos,u=p.node),void 0!==d&&void 0!==u&&(l&&l(c.tr.setMeta(a,{action:t?s.DECORATION_ADD:s.DECORATION_REMOVE,data:o.a.node(d,d+u.nodeSize,{class:n},{key:"decorationNode"})}).setMeta("addToHistory",!1)),!0)};t.a=()=>new r.Plugin({key:a,state:{init:()=>({decoration:void 0}),apply(e,t){if(t.decoration){e.mapping.mapResult(t.decoration.from).deleted&&(t={decoration:void 0})}const n=e.getMeta(a);if(!n)return t;switch(n.action){case s.DECORATION_ADD:return{decoration:n.data};case s.DECORATION_REMOVE:return{decoration:void 0};default:return t}}},props:{decorations(e){const{doc:t}=e,{decoration:n}=a.getState(e);return n?o.b.create(t,[n]):null}}})},QOuT:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o={gutter:"line-number-gutter",content:"code-content"}},QVO1:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ehfC"),i=n("I9T1"),a=n("JIgR"),s=n("4icS"),c=n("WXVP"),l=n("oSff"),d=n("UP2C"),u=n("tVIO"),p=n("4FMG"),h=n("iXHT"),f=n("4SN/"),m=n("Bole");function b(e,t=!0,n){const o=e.marks.find(e=>"link"===e.type.name);if(!o)return!1;const r=Object(h.b)(m.a.normalizeLinkText(o.attrs.href)),i=Object(h.b)(m.a.normalizeLinkText(e.text||""));if(t&&r!==i)return!1;if(n){if(Object(h.b)(m.a.normalizeLinkText(n))!==r)return!1}return!0}var g=n("QADc");function v(e,t,n){const{inlineCard:o}=n.nodes,r=[t];return t.type===o&&r.push(n.text(" ")),e.replaceSelection(new i.Slice(i.Fragment.fromArray(r),0,0))}n.d(t,"c",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return O})),n.d(t,"a",(function(){return E})),n.d(t,"g",(function(){return w})),n.d(t,"b",(function(){return T})),n.d(t,"f",(function(){return S}));const y=(e,t,n)=>(o,r)=>{const i=s.a.getState(o);if(!i)return!1;const l=i.requests.filter(t=>t.url===e),m=o.schema,g=Object(d.l)(m,t);let v=o.tr;if(g){const t=l.map(e=>function(e,t,n,o){const{inlineCard:r}=n.nodes,{url:i}=o;if(!Object(h.a)(i))return;const a=e.mapping.map(o.pos),s=e.doc.resolve(a),c=e.doc.nodeAt(a);if(!c||!c.type.isText)return;if(!(o.shouldReplaceLink||b(c,o.compareLinkText,i)))return;const l=[t];return t.type===r&&l.push(n.text(" ")),e.replaceWith(a,a+(c.text||i).length,l),s.node(s.depth-1).type.name}(v,g,m,e)).filter(e=>!!e);if(t.length){const r=t.every(e=>e===t[0])?t[0]:"mixed",i="inlineCard",[,,a]=e.split("/");Object(u.a)(o,v,{action:n||p.a.INSERTED,actionSubject:p.b.DOCUMENT,actionSubjectId:p.c.SMART_LINK,eventType:p.d.TRACK,attributes:{inputMethod:l[0].source,nodeType:i,nodeContext:r,domainName:a,fromCurrentDomain:Object(f.d)(e)}})}}return r&&r(Object(c.d)(e)(Object(a.a)(v))),!0},O=(e,t,n,o=!0)=>{const{schema:r}=e,{link:i}=r.marks,a=[];return Object(d.k)(t,(e,t)=>{if(!e.isText)return!0;const r=e.marks.find(e=>e.type===i);if(r){if(!b(e,o))return!1;a.push({url:r.attrs.href,pos:t,appearance:"inline",compareLinkText:o,source:n})}return!1}),Object(c.b)(a)(t)},E=(e,t,n)=>(o,r)=>{const i=C(o,e,t);return n&&Object(u.a)(o,i,{action:p.a.CHANGED_TYPE,actionSubject:p.b.SMART_LINK,eventType:p.d.TRACK,attributes:{newType:g.b.URL}}),r&&r(i.scrollIntoView()),!0},w=e=>(t,n)=>{if(!(t.selection instanceof r.NodeSelection&&t.selection.node))return!1;const o=C(t,e,e);return O(t,o,p.e.MANUAL),n&&n(o.scrollIntoView()),!0};function C(e,t,n){const o=e.selection instanceof r.NodeSelection&&e.selection.node;if(!o)return e.tr;const{link:i}=e.schema.marks,a=o.attrs.url||o.attrs.data.url;return e.tr.replaceSelectionWith(e.schema.text(t||a,[i.create({href:n||a})]),!1)}const T=e=>(t,n)=>{if(!(t.selection instanceof r.NodeSelection&&t.selection.node))return!1;const o=t.tr.replaceSelectionWith(t.schema.text(e),!1);return n&&n(o.scrollIntoView()),!0},S=e=>(t,n)=>{const i=t.selection instanceof r.NodeSelection&&t.selection.node;if(!i){const o=((e,t,n,o=!0)=>{const{schema:r}=e,{link:i}=r.marks,a=[];return e.tr.doc.nodesBetween(e.selection.from,e.selection.to,(e,r)=>{const s=e.marks.find(e=>e.type===i);if(s){const e={url:s.attrs.href,pos:r,appearance:n,compareLinkText:o,source:t,analyticsAction:p.a.CHANGED_TYPE,shouldReplaceLink:!0};a.push(e)}}),Object(c.b)(a)(e.tr)})(t,p.e.MANUAL,e);return n&&n(o.scrollIntoView()),!1}if(Object(l.a)(i.type)===e)return!1;const a="embed"===e?Object(o.a)(Object(o.a)({},i.attrs),{},{layout:"center"}):i.attrs,{from:s}=t.selection,d=k(e,t.schema.nodes),h=t.tr.setNodeMarkup(s,d,a,i.marks);return Object(u.a)(t,h,{action:p.a.CHANGED_TYPE,actionSubject:p.b.SMART_LINK,eventType:p.d.TRACK,attributes:{newType:e,previousType:Object(l.a)(i.type)}}),n&&n(h.scrollIntoView()),!0},k=(e,t)=>{switch(e){case"inline":return t.inlineCard;case"block":return t.blockCard;case"embed":return t.embedCard}}},QWk3:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("W5QA"),a=n("xuWu"),s=n("ZJN8"),c=n("ALnk"),l=n("IWmk"),d=n("h3S+"),u=n("evQN"),p=n("qeFW"),h=n("VA4Z");function f(){const e={};return l.bindKeymapWithCommand(l.enter.common,(e,t)=>{const n=p.a.getState(e);return!(!n||!n.active)&&Object(u.b)("enter")(e,t)},e),l.bindKeymapWithCommand(l.moveUp.common,(e,t)=>{const n=p.a.getState(e);return!(!n||!n.active)&&(t&&t(e.tr.setMeta(p.a,{action:h.a.SELECT_PREV})),!0)},e),l.bindKeymapWithCommand(l.moveDown.common,(e,t)=>{const n=p.a.getState(e);return!(!n||!n.active)&&(t&&t(e.tr.setMeta(p.a,{action:h.a.SELECT_NEXT})),!0)},e),l.bindKeymapWithCommand(l.insertNewLine.common,(e,t)=>{const n=p.a.getState(e);return!(!n||!n.active)&&Object(u.b)("shift-enter")(e,t)},e),l.bindKeymapWithCommand(l.tab.common,(e,t)=>{const n=p.a.getState(e);return!(!n||!n.active)&&Object(u.b)("tab")(e,t)},e),l.bindKeymapWithCommand(l.escape.common,(e,t)=>{const n=p.a.getState(e);return!(!n||!n.active)&&(window.event&&window.event.stopPropagation(),Object(d.a)()(e,t))},e),l.bindKeymapWithCommand(l.space.common,(e,t)=>{const n=p.a.getState(e);return!(!n||!n.active)&&Object(u.d)("space")(e,t)},e),Object(c.b)(e)}var m=n("UZGJ"),b=n("KsTJ"),g=n("pZXv"),v=n("qPpp"),y=n("BMbf"),O=n("3IV/"),E=n("ZgvQ");var w=n("lyVh");const C=b.default.div`
  background: ${O.N0};
  border-radius: ${Object(y.c)()}px;
  box-shadow: 0 0 1px ${O.N60A}, 0 4px 8px -2px ${O.N50A};
  padding: ${Object(E.divide)(y.h,2)}px 0;
  width: 320px;
  max-height: 380px; /* ~5.5 visibile items */
  overflow-y: auto;
  -ms-overflow-style: -ms-autohiding-scrollbar;
  position: relative;
`;class T extends r.a.Component{constructor(){super(...arguments),this.composing=!1,this.handleKeyPress=()=>{this.composing=!0},this.handleMouseMove=()=>{this.composing=!1},this.componentDidMount=()=>{window.addEventListener("keypress",this.handleKeyPress),window.addEventListener("mousemove",this.handleMouseMove)},this.componentWillUnmount=()=>{window.removeEventListener("keypress",this.handleKeyPress),window.removeEventListener("mousemove",this.handleMouseMove)},this.insertByIndex=e=>{Object(u.a)(e)(this.props.editorView.state,this.props.editorView.dispatch)},this.setCurrentIndex=e=>{var t;this.composing||e!==this.props.currentIndex&&(t=e,(e,n)=>(n&&n(e.tr.setMeta(p.a,{action:h.a.SET_CURRENT_INDEX,params:{currentIndex:t}})),!0))(this.props.editorView.state,this.props.editorView.dispatch)}}render(){const{active:e,items:t,isLoading:n,anchorElement:o,currentIndex:i,popupsMountPoint:a,popupsBoundariesElement:s,popupsScrollableElement:c,highlight:l}=this.props;return e&&o&&t&&t.length?r.a.createElement(g.a,{zIndex:v.l,target:o,mountTo:a,boundariesElement:s,scrollableElement:c,fitHeight:300,fitWidth:340,offset:[0,8]},r.a.createElement(C,{className:"fabric-editor-typeahead"},l,Array.isArray(t)?r.a.createElement(w.b,{insertByIndex:this.insertByIndex,setCurrentIndex:this.setCurrentIndex,items:t,currentIndex:i}):!t&&n?"loading...":"no items")):null}}T.displayName="TypeAhead";t.a=()=>({name:"typeAhead",marks:()=>[{name:"typeAheadQuery",mark:i.a}],pmPlugins:(e=[])=>[{name:"typeAhead",plugin:({dispatch:t,reactContext:n})=>Object(m.b)(t,n,e)},{name:"typeAheadInputRule",plugin:({schema:t})=>Object(s.a)(t,e)},{name:"typeAheadKeymap",plugin:()=>f()}],contentComponent:({editorView:e,popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o})=>r.a.createElement(a.a,{plugins:{typeAhead:p.a},render:({typeAhead:i=Object(m.a)()})=>{if(i.typeAheadHandler&&i.typeAheadHandler.headless)return null;const{queryMarkPos:a}=i;let s=null;if(null!==a)try{s=e.domAtPos(a)}catch(l){return null}const c=s?s.node.childNodes[s.offset]:void 0;return r.a.createElement(T,{editorView:e,popupsMountPoint:t,popupsBoundariesElement:n,popupsScrollableElement:o,anchorElement:c,active:i.active,isLoading:!!i.itemsLoader,items:i.items,currentIndex:i.currentIndex,highlight:i.highlight})}})})},QuFy:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=new(n("ehfC").PluginKey)("statusPlugin")},Qwog:function(e,t,n){"use strict";var o=n("ehfC"),r=n("m23B"),i=n("bQC9"),a=n("weJF"),s=n.n(a),c=n("GMOd"),l=n.n(c),d=n("6T+A"),u=n.n(d),p=n("uvSL"),h=n.n(p),f=n("Dezw"),m=n.n(f),b=n("zP/5"),g=n.n(b),v=n("ZuDi"),y=n.n(v),O=n("fPje"),E=n("xwvf"),w=n("qPpp"),C=n("tVIO"),T=n("4FMG"),S=n("L21V");const k=Object(S.f)({wrapLeft:{id:"fabric.editor.wrapLeft",defaultMessage:"Wrap left",description:"Aligns your image to the left and wraps text around it."},wrapRight:{id:"fabric.editor.wrapRight",defaultMessage:"Wrap right",description:"Aligns your image to the right and wraps text around it."}}),x=[{value:"align-start",icon:m.a},{value:"center",icon:y.a},{value:"align-end",icon:g.a}],A=[{value:"wrap-left",icon:s.a},{value:"wrap-right",icon:l.a}],j=[{value:"wide",icon:u.a},{value:"full-width",icon:h.a}],I={"wrap-left":k.wrapLeft,center:i.a.alignImageCenter,"wrap-right":k.wrapRight,wide:i.a.layoutWide,"full-width":i.a.layoutFullWidth,"align-end":i.a.alignImageRight,"align-start":i.a.alignImageLeft},M=(e,t)=>(n,o)=>{const{node:r}=n.selection,{layout:i}=r.attrs,{mediaSingle:a}=n.schema.nodes;if(!o)return!1;const s=E.b.getState(n);if(!r||r.type!==t||!s)return!1;const c=((e,t)=>{const{embedCard:n}=t.nodes;return e.type===n?e.attrs.originalWidth||w.b:e.firstChild&&e.firstChild.attrs.width||e.attrs.width})(r,n.schema),l=Object(O.a)(e,r.attrs,void 0,c,s.lineLength),d=n.tr.setNodeMarkup(n.selection.from,void 0,l);return d.setMeta("scrollIntoView",!1),o(Object(C.a)(n,d,{eventType:T.d.TRACK,action:T.a.SELECTED,actionSubject:T.b[r.type===a?"MEDIA_SINGLE":"EMBEDS"],actionSubjectId:T.c.RICH_MEDIA_LAYOUT,attributes:{previousLayoutType:i,currentLayoutType:e}})),!0},N=(e,t,n,o)=>e.map(e=>{const{value:r}=e;return{type:"button",icon:e.icon,title:n.formatMessage(I[r]),selected:t===r,onClick:M(r,o)}});t.a=(e,t,n,i,a)=>{const{selection:s}=e;if(!(s instanceof o.NodeSelection)||!s.node||!n||((e,{nodes:t},n)=>Object(r.hasParentNodeOfType)([t.bodiedExtension,t.listItem,t.expand,t.nestedExpand,...n?[]:[t.table]].filter(Boolean))(e))(s,e.schema,a))return[];const{layout:c}=s.node.attrs;let l=[...N(x,c,t,n),{type:"separator"},...N(A,c,t,n)];return i||(l=l.concat([{type:"separator"},...N(j,c,t,n)])),l}},RHiN:function(e,t,n){"use strict";n.r(t),n.d(t,"headingSizes",(function(){return g})),n.d(t,"h900",(function(){return v})),n.d(t,"h800",(function(){return y})),n.d(t,"h700",(function(){return O})),n.d(t,"h600",(function(){return E})),n.d(t,"h500",(function(){return w})),n.d(t,"h400",(function(){return C})),n.d(t,"h300",(function(){return T})),n.d(t,"h200",(function(){return S})),n.d(t,"h100",(function(){return k}));var o,r,i,a,s,c,l,d,u,p=n("4uKn"),h=n("KsTJ"),f=n("L48P"),m=n("HIRw"),b=function(e,t){return"\n  font-size: "+e/Object(m.f)()+"em;\n  font-style: inherit;\n  line-height: "+t/e+";\n"},g={h900:{size:35,lineHeight:40},h800:{size:29,lineHeight:32},h700:{size:24,lineHeight:28},h600:{size:20,lineHeight:24},h500:{size:16,lineHeight:20},h400:{size:14,lineHeight:16},h300:{size:12,lineHeight:16},h200:{size:12,lineHeight:16},h100:{size:11,lineHeight:16}},v=function(){return Object(h.css)(o||(o=Object(p.c)(["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"])),b(g.h900.size,g.h900.lineHeight),f.heading,6.5*Object(m.g)())},y=function(){return Object(h.css)(r||(r=Object(p.c)(["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"])),b(g.h800.size,g.h800.lineHeight),f.heading,5*Object(m.g)())},O=function(){return Object(h.css)(i||(i=Object(p.c)(["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.01em;\n  margin-top: ","px;\n"])),b(g.h700.size,g.h700.lineHeight),f.heading,5*Object(m.g)())},E=function(){return Object(h.css)(a||(a=Object(p.c)(["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.008em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 500;\n  letter-spacing: -0.008em;\n  margin-top: ","px;\n"])),b(g.h600.size,g.h600.lineHeight),f.heading,3.5*Object(m.g)())},w=function(){return Object(h.css)(s||(s=Object(p.c)(["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.006em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.006em;\n  margin-top: ","px;\n"])),b(g.h500.size,g.h500.lineHeight),f.heading,3*Object(m.g)())},C=function(){return Object(h.css)(c||(c=Object(p.c)(["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.003em;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 600;\n  letter-spacing: -0.003em;\n  margin-top: ","px;\n"])),b(g.h400.size,g.h400.lineHeight),f.heading,2*Object(m.g)())},T=function(){return Object(h.css)(l||(l=Object(p.c)(["\n  ","\n  color: ",";\n  font-weight: 600;\n  margin-top: ","px;\n  text-transform: uppercase;\n"],["\n  ","\n  color: ",";\n  font-weight: 600;\n  margin-top: ","px;\n  text-transform: uppercase;\n"])),b(g.h300.size,g.h300.lineHeight),f.heading,2.5*Object(m.g)())},S=function(){return Object(h.css)(d||(d=Object(p.c)(["\n  ","\n  color: ",";\n  font-weight: 600;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 600;\n  margin-top: ","px;\n"])),b(g.h200.size,g.h200.lineHeight),f.subtleHeading,2*Object(m.g)())},k=function(){return Object(h.css)(u||(u=Object(p.c)(["\n  ","\n  color: ",";\n  font-weight: 700;\n  margin-top: ","px;\n"],["\n  ","\n  color: ",";\n  font-weight: 700;\n  margin-top: ","px;\n"])),b(g.h100.size,g.h100.lineHeight),f.subtleHeading,2*Object(m.g)())}},RMGf:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));var o=n("UdmJ"),r=n("I9T1");function i(e,t){return function(n,i){var a=n.selection,s=a.$from,c=a.$to,l=s.blockRange(c),d=!1,u=l;if(!l)return!1;if(l.depth>=2&&s.node(l.depth-1).type.compatibleContent(e)&&0==l.startIndex){if(0==s.index(l.depth-1))return!1;var p=n.doc.resolve(l.start-2);u=new r.NodeRange(p,p,l.depth),l.endIndex<l.parent.childCount&&(l=new r.NodeRange(s,n.doc.resolve(c.end(l.depth)),l.depth)),d=!0}var h=Object(o.findWrapping)(u,e,t,l);return!!h&&(i&&i(function(e,t,n,i,a){for(var s=r.Fragment.empty,c=n.length-1;c>=0;c--)s=r.Fragment.from(n[c].type.create(n[c].attrs,s));e.step(new o.ReplaceAroundStep(t.start-(i?2:0),t.end,t.start,t.end,new r.Slice(s,0,0),n.length,!0));for(var l=0,d=0;d<n.length;d++)n[d].type==a&&(l=d+1);for(var u=n.length-l,p=t.start+n.length-(i?2:0),h=t.parent,f=t.startIndex,m=t.endIndex,b=!0;f<m;f++,b=!1)!b&&Object(o.canSplit)(e.doc,p,u)&&(e.split(p,u),p+=2*u),p+=h.child(f).nodeSize;return e}(n.tr,l,h,d,e).scrollIntoView()),!0)}}function a(e){return function(t,n){var i=t.selection,a=i.$from,s=i.$to,c=a.blockRange(s,(function(t){return t.childCount&&t.firstChild.type==e}));return!!c&&(!n||(a.node(c.depth-1).type==e?function(e,t,n,i){var a=e.tr,s=i.end,c=i.$to.end(i.depth);s<c&&(a.step(new o.ReplaceAroundStep(s-1,c,s,c,new r.Slice(r.Fragment.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new r.NodeRange(a.doc.resolve(i.$from.pos),a.doc.resolve(c),i.depth));return t(a.lift(i,Object(o.liftTarget)(i)).scrollIntoView()),!0}(t,n,e,c):function(e,t,n){for(var i=e.tr,a=n.parent,s=n.end,c=n.endIndex-1,l=n.startIndex;c>l;c--)s-=a.child(c).nodeSize,i.delete(s-1,s+1);var d=i.doc.resolve(n.start),u=d.nodeAfter,p=0==n.startIndex,h=n.endIndex==a.childCount,f=d.node(-1),m=d.index(-1);if(!f.canReplace(m+(p?0:1),m+1,u.content.append(h?r.Fragment.empty:r.Fragment.from(a))))return!1;var b=d.pos,g=b+u.nodeSize;return i.step(new o.ReplaceAroundStep(b-(p?1:0),g+(h?1:0),b+1,g-1,new r.Slice((p?r.Fragment.empty:r.Fragment.from(a.copy(r.Fragment.empty))).append(h?r.Fragment.empty:r.Fragment.from(a.copy(r.Fragment.empty))),p?0:1,h?0:1),p?0:1)),t(i.scrollIntoView()),!0}(t,n,c)))}}function s(e){return function(t,n){var i=t.selection,a=i.$from,s=i.$to,c=a.blockRange(s,(function(t){return t.childCount&&t.firstChild.type==e}));if(!c)return!1;var l=c.startIndex;if(0==l)return!1;var d=c.parent,u=d.child(l-1);if(u.type!=e)return!1;if(n){var p=u.lastChild&&u.lastChild.type==d.type,h=r.Fragment.from(p?e.create():null),f=new r.Slice(r.Fragment.from(e.create(null,r.Fragment.from(d.type.create(null,h)))),p?3:1,0),m=c.start,b=c.end;n(t.tr.step(new o.ReplaceAroundStep(m-(p?3:1),b,m,b,f,1,!0)).scrollIntoView())}return!0}}},Rljp:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var o=n("I1dd");const r=e=>"TEAM"===e,i=e=>e&&!isNaN(e.teamMentionDuration),a=e=>e&&e.id===o.a.id},Rs2C:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e.SET_KEYBOARD_HEIGHT="SET_KEYBOARD_HEIGHT",e.SET_HEIGHT_DIFF="SET_HEIGHT_DIFF",e.SET_WINDOW_HEIGHT="SET_WINDOW_HEIGHT",e.SET_MOBILE_PADDING_TOP="SET_MOBILE_PADDING_TOP"}(o||(o={}))},"Rw0+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var o=n("ehfC"),r=n("lELC"),i=n("I9T1");class a{constructor(e){this.pos=void 0,this.visible=!1,this.pos=e}map(e){return new a(e.map(this.pos))}resolve(e){const t=e.resolve(this.pos);return o.Selection.near(t)}}class s extends o.Selection{constructor(e){super(e,e)}map(e,t){const n=e.resolve(t.map(this.$head.pos));return new s(n)}static content(){return i.Slice.empty}eq(e){return e instanceof s&&e.head===this.head}toJSON(){return{type:"Cursor",pos:this.head}}static fromJSON(e,t){return new s(e.resolve(t.pos))}getBookmark(){return new a(this.anchor)}}o.Selection.jsonID("fake-text-cursor",s);const c=e=>{if(!(e.selection instanceof s))return null;const t=document.createElement("div");return t.className="ProseMirror-fake-text-cursor",r.b.create(e.doc,[r.a.widget(e.selection.head,t,{key:"Cursor"})])}},Rz8l:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("BMbf"),a=n("lRcl"),s=n("KsTJ");const c=i.i.modal()+10,l=s.default.div`
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  z-index: ${c};
`;l.displayName="Blanket";const d=s.default.div`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`;d.displayName="SpinnerWrapper";const u="none",p=!1;t.a=({blankedColor:e,invertSpinnerColor:t})=>r.a.createElement(l,{style:{backgroundColor:e||u}},r.a.createElement(d,null,r.a.createElement(a.a,{size:"large",appearance:t||p?"invert":"inherit"})))},S7GL:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var o=n("3uux"),r=n("OUhg");const i=()=>(e,t)=>(t&&t(e.tr.setMeta(r.a,{isElementBrowserModalOpen:!0})),!0),a=()=>(e,t)=>(t&&t(e.tr.setMeta(r.a,{isElementBrowserModalOpen:!1})),!0),s=e=>(t,n)=>{const r=e.action((e,n={})=>Object(o.a)(e,n)(t,t.tr,t.selection.head),t);return r&&n&&n(r),!0}},SHkB:function(e,t,n){"use strict";var o=n("I9T1"),r=n("ehfC"),i=n("CP8u"),a=n("UP2C"),s=n("Z0f3"),c=n("Czhu"),l=n("AhzI");function d(e){let t=Object(c.a)({},e);return delete t.marks,t}var u=n("Cdbx"),p=n("m23B"),h=n("pZ4U");n.d(t,"a",(function(){return f}));class f{constructor(){this.listeners=[],this.dispatchAnalyticsEvent=e=>{if(this.eventDispatcher){Object(u.b)(this.eventDispatcher)(h.e,{payload:e})}}}static from(e,t,n){const o=new f;return o._privateRegisterEditor(e,t,n),o}_privateGetEditorView(){return this.editorView}_privateGetEventDispatcher(){return this.eventDispatcher}_privateRegisterEditor(e,t,n){if(this.contentTransformer=n,this.eventDispatcher=t,!this.editorView&&e)this.editorView=e,this.listeners.forEach(n=>n(e,t));else if(this.editorView!==e)throw new Error("Editor has already been registered! It's not allowed to re-register editor with the new Editor instance.");this.contentTransformer&&(this.contentEncode=this.contentTransformer.encode.bind(this.contentTransformer))}_privateUnregisterEditor(){this.editorView=void 0,this.contentTransformer=void 0,this.contentEncode=void 0,this.eventDispatcher=void 0}_privateSubscribe(e){this.editorView&&this.eventDispatcher&&e(this.editorView,this.eventDispatcher),this.listeners.push(e)}_privateUnsubscribe(e){this.listeners=this.listeners.filter(t=>t!==e)}focus(){return!(!this.editorView||this.editorView.hasFocus())&&(this.editorView.focus(),this.editorView.dispatch(this.editorView.state.tr.scrollIntoView()),!0)}blur(){return!(!this.editorView||!this.editorView.hasFocus())&&(this.editorView.dom.blur(),!0)}clear(){if(!this.editorView)return!1;const e=this.editorView,{state:t}=e,n=e.state.tr.setSelection(r.TextSelection.create(t.doc,0,t.doc.nodeSize-2)).deleteSelection();return e.dispatch(n),!0}async __temporaryFixForConfigPanel(){const{editorView:e}=this;e&&Object(s.a)(e)}async getValue(){const{editorView:e}=this;if(!e)return;const t=await Object(s.c)(e),n=function(e){return Object(l.a)(e,{text:e=>e&&Array.isArray(e.marks)?Object(c.a)(Object(c.a)({},e),{},{marks:e.marks.filter(e=>"typeAheadQuery"!==e.type)}):e,status:e=>!(!e.attrs||!e.attrs.text)&&d(e),emoji:d,mention:d,date:d,hardBreak:d,inlineCard:d})}(Object(i.x)(t));if(!this.contentEncode)return n;const r=o.Node.fromJSON(this.editorView.state.schema,n);return this.contentEncode(r)}isDocumentEmpty(){return!this.editorView||Object(a.f)(this.editorView.state.doc)}replaceDocument(e,t=!0,n=!0){if(!this.editorView||null==e)return!1;const{state:o}=this.editorView,{schema:i}=o,s=Object(a.l)(i,e,void 0,void 0,this.contentTransformer,this.dispatchAnalyticsEvent);if(!s)return!1;let c=o.tr.replaceWith(0,o.doc.nodeSize-2,s.content);return t||c.selectionSet||c.setSelection(r.Selection.atStart(c.doc)),t&&(c=c.scrollIntoView()),n||c.setMeta("addToHistory",!1),this.editorView.dispatch(c),!0}replaceSelection(e,t){if(!this.editorView)return!1;const{state:n}=this.editorView;if(!e){const e=n.tr.deleteSelection().scrollIntoView();return this.editorView.dispatch(e),!0}const{schema:o}=n,r=Object(a.l)(o,e);return!!r&&(this.editorView.dispatch(Object(p.safeInsert)(r,void 0,t)(n.tr).scrollIntoView()),!0)}appendText(e){if(!this.editorView||!e)return!1;const{state:t}=this.editorView,n=t.doc.lastChild;if(n&&n.type!==t.schema.nodes.paragraph)return!1;const o=t.tr.insertText(e).scrollIntoView();return this.editorView.dispatch(o),!0}}},T1Ll:function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty;function r(e,t){return o.call(e,t)}function i(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(65535!=(65535&e)&&65534!=(65535&e)&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function a(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}var s=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,c=new RegExp(s.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),l=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,d=n("JzjW");var u=/[&<>"]/,p=/[&<>"]/g,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function f(e){return h[e]}var m=/[.?*+^$[\]\\(){}|-]/g;var b=n("gtbP");t.lib={},t.lib.mdurl=n("BmNk"),t.lib.ucmicro=n("vu0X"),t.assign=function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(n){e[n]=t[n]}))}})),e},t.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},t.has=r,t.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(s,"$1")},t.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(c,(function(e,t,n){return t||function(e,t){var n=0;return r(d,t)?d[t]:35===t.charCodeAt(0)&&l.test(t)&&i(n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?a(n):e}(e,n)}))},t.isValidEntityCode=i,t.fromCodePoint=a,t.escapeHtml=function(e){return u.test(e)?e.replace(p,f):e},t.arrayReplaceAt=function(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))},t.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},t.isWhiteSpace=function(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},t.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},t.isPunctChar=function(e){return b.test(e)},t.escapeRE=function(e){return e.replace(m,"\\$&")},t.normalizeReference=function(e){return e=e.trim().replace(/\s+/g," "),""==="".toLowerCase()&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}},TIUX:function(e,t,n){"use strict";var o=n("ehfC"),r=n("czJC"),i=n("CP8u");const a={"":"...","":"->","":"<-","":"--","":'"',"":'"',"":"'","":"'"},s=new RegExp(`[${Object.keys(a).join("")}]`,"g"),c=(e,t,n)=>{const{schema:o}=n.doc.type,{mention:r,text:c,emoji:l}=o.nodes;Object(i.g)(n.doc,e,t,(e=>{const{mention:t,text:n,emoji:o}=e.nodes;return(e,r,i)=>{if(e.type===t||e.type===o||e.type===n)return i.isTextblock}})(o)).forEach(({node:t,pos:o})=>{if(t.type===r||t.type===l)((e,t,n,o)=>{const r=o.mapping.map(e),{schema:i}=o.doc.type;o.replaceWith(r,r+t,i.text(n))})(o,t.nodeSize,t.attrs.text,n);else if(t.type===c&&t.text){((e,t,n)=>{const o=t.substr(e-1),{schema:r}=n.doc.type;let i;for(;i=s.exec(o);){const{0:t,index:o}=i,s=n.mapping.map(e+o),c=r.text(a[t]);n.replaceWith(s,s+t.length,c)}})(o>e?o:e,t.text,n)}})};var l=n("eGvA");n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"i",(function(){return b})),n.d(t,"a",(function(){return m})),n.d(t,"l",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"k",(function(){return y})),n.d(t,"d",(function(){return O})),n.d(t,"h",(function(){return E}));const d=(e,t)=>function(n,o,r){return Array.isArray(e)||(e=[e]),!e.some(e=>!e(n,r))&&(t(n,o,r)||!1)},u=e=>{const{empty:t,$from:n}=e.selection;return t&&(0===n.parentOffset||e.selection instanceof l.a)},p=e=>{const{empty:t,$from:n}=e.selection;return t&&(n.end()===n.pos||e.selection instanceof l.a)},h=e=>{const{$from:t}=e.selection;return!(t.depth>1)||(e.selection instanceof l.a&&0===t.parentOffset||0===t.index(t.depth-1))};function f(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}const m=(e,t,n,o,r)=>{const{schema:i}=r.doc.type,{code:a}=i.marks;return o.type===a&&c(e,t,r),r.doc.nodesBetween(r.mapping.map(e),r.mapping.map(t),(i,a)=>{if(!i.isText)return!0;const s=Math.max(a,r.mapping.map(e)),c=Math.min(a+i.nodeSize,r.mapping.map(t));return n?r.removeMark(s,c,o):r.addMark(s,c,o),!0}),r},b=(e,t)=>(n,i)=>{const a=e.create(t);if(n.selection instanceof o.TextSelection&&n.selection.$cursor){const e=n.tr;return a.isInSet(n.storedMarks||n.selection.$cursor.marks())?e.removeStoredMark(a):e.addStoredMark(a),!!i&&(i(e),!0)}return(e=>(t,n)=>{const o=t.tr;if(t.selection instanceof r.a){let n=!1;const r=[];t.selection.forEachCell((o,i)=>{r.push({node:o,pos:i});const a=i,s=i+o.nodeSize;n||(n=t.doc.rangeHasMark(a,s,e))});for(let t=r.length-1;t>=0;t--){const i=r[t],a=i.pos,s=a+i.node.nodeSize;m(a,s,n,e,o)}}else{const{$from:n,$to:r}=t.selection,i=t.doc.rangeHasMark(n.pos,r.pos,e);m(n.pos,r.pos,i,e,o)}return!!o.docChanged&&(n&&n(o),!0)})(a)(n,i)},g=e=>(t,n,o)=>e(t,e=>{e.scrollIntoView(),n&&n(e)},o),v=e=>{let t=e;for(;t.pos<t.doc.nodeSize-2&&(t.pos===e.pos||t.parentOffset>0);)t=t.doc.resolve(t.pos+1);return{$pos:t,foundNode:t.pos<t.doc.nodeSize-2}},y=e=>{let t=e;for(;t.pos>0&&(t.pos===e.pos||t.parentOffset<t.parent.nodeSize-2);)t=t.doc.resolve(t.pos-1);return{$pos:t,foundNode:t.pos>0}},O=(e,t,n,r)=>{n.forEach(t=>{let[n,o]=t;e.insert(e.mapping.map(o),n)}),r.forEach(t=>{let[n,o]=t;e.delete(e.mapping.map(n),e.mapping.map(o))}),e.setSelection(new o.TextSelection(t(e)))},E=e=>(t,n)=>(n&&n(t.tr.setSelection(new o.NodeSelection(t.doc.resolve(e)))),!0)},TxQ3:function(e,t,n){var o=n("UFJf");e.exports=function(e){var t=o(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}},U6fo:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return f}));var o=n("KsTJ"),r=n("BMbf"),i=n("3IV/"),a=n("xN7r"),s=n("qPpp"),c=n("lEOu"),l=n("Jl7S"),d=n("Vqim"),u=n("DAa0");const p=Object(r.h)(),h=1.5*Object(r.h)(),f=o.css`
  .ProseMirror {
    ${a.a} [data-layout-section] {
      margin: ${Object(r.h)()-1}px -${s.Y}px 0;
      transition: border-color 0.3s ${s.M};
      cursor: pointer;

      /* Inner cursor located 26px from left */
      [data-layout-column] {
        flex: 1;
        min-width: 0;
        border: ${s.F}px solid ${i.N40A};
        border-radius: 4px;
        padding: ${h}px;
        box-sizing: border-box;

        > div {
          > *:first-child {
            margin-top: 0;
          }

          > .ProseMirror-gapcursor.-right:first-child + * {
            margin-top: 0;
          }

          > .ProseMirror-gapcursor:first-child + span + * {
            margin-top: 0;
          }

          > .mediaSingleView-content-wrap:first-child .rich-media-item {
            margin-top: 0;
          }

          > .ProseMirror-gapcursor.-right:first-child
            + .mediaSingleView-content-wrap
            .rich-media-item {
            margin-top: 0;
          }

          > .ProseMirror-gapcursor:first-child
            + span
            + .mediaSingleView-content-wrap
            .rich-media-item {
            margin-top: 0;
          }

          /* Prevent first DecisionWrapper's margin-top: 8px from shifting decisions down
             and shrinking layout's node selectable area (leniency margin) */
          > [data-node-type='decisionList'] {
            li:first-of-type [data-decision-wrapper] {
              margin-top: 0;
            }
          }
        }

        /* Make the 'content' fill the entire height of the layout column to allow click
           handler of layout section nodeview to target only data-layout-column */
        [data-layout-content] {
          height: 100%;
          cursor: text;
        }
      }

      [data-layout-column] + [data-layout-column] {
        margin-left: ${p}px;
      }

      @media screen and (max-width: ${s.eb}px) {
        [data-layout-column] + [data-layout-column] {
          margin-left: 0;
        }
      }

      /* Shows the border when cursor is inside a layout */
      &.selected [data-layout-column],
      &:hover [data-layout-column] {
        border-color: ${i.N50A};
      }

      &.selected.danger > [data-layout-column] {
        background-color: ${s.h};
        border-color: ${s.j};
      }

      &.${s.H}:not(.danger) {
        [data-layout-column] {
          ${Object(c.a)([l.a.Border,l.a.Blanket])}
        }
      }
    }
  }

  .fabric-editor--full-width-mode .ProseMirror {
    [data-layout-section] {
      .${d.c.TABLE_CONTAINER} {
        margin: 0 ${u.x}px;
      }
    }
  }
`},UEfI:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return v}));var o=n("HbGN"),r=n("ERkP"),i=n.n(r),a=n("L21V"),s=n("LMBy");const c=e=>t=>i.a.createElement(a.b,Object.assign({},t,e)),l=e=>{let{name:t}=e,n=Object(o.a)(e,["name"]);return i.a.createElement(a.b,Object.assign({},n,{values:{name:t}},s.a.noAccessWarning))},d=c(s.a.noAccessLabel),u=c(s.a.defaultHeadline),p=c(s.a.defaultAdvisedAction),h=c(s.a.loginAgain),f=c(s.a.differentText),m=c(s.a.TeamMentionHighlightTitle),b=c(s.a.TeamMentionHighlightCloseButtonToolTip),g=c(s.a.TeamMentionHighlightDescription),v=c(s.a.TeamMentionHighlightDescriptionLink)},UKA5:function(e,t,n){"use strict";var o=n("T1Ll").normalizeReference,r=n("T1Ll").isSpace;e.exports=function(e,t){var n,i,a,s,c,l,d,u,p,h,f,m,b,g="",v=e.pos,y=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(l=e.pos+2,(c=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0)return!1;if((d=c+1)<y&&40===e.src.charCodeAt(d)){for(d++;d<y&&(i=e.src.charCodeAt(d),r(i)||10===i);d++);if(d>=y)return!1;for(b=d,(p=e.md.helpers.parseLinkDestination(e.src,d,e.posMax)).ok&&(g=e.md.normalizeLink(p.str),e.md.validateLink(g)?d=p.pos:g=""),b=d;d<y&&(i=e.src.charCodeAt(d),r(i)||10===i);d++);if(p=e.md.helpers.parseLinkTitle(e.src,d,e.posMax),d<y&&b!==d&&p.ok)for(h=p.str,d=p.pos;d<y&&(i=e.src.charCodeAt(d),r(i)||10===i);d++);else h="";if(d>=y||41!==e.src.charCodeAt(d))return e.pos=v,!1;d++}else{if(void 0===e.env.references)return!1;if(d<y&&91===e.src.charCodeAt(d)?(b=d+1,(d=e.md.helpers.parseLinkLabel(e,d))>=0?s=e.src.slice(b,d++):d=c+1):d=c+1,s||(s=e.src.slice(l,c)),!(u=e.env.references[o(s)]))return e.pos=v,!1;g=u.href,h=u.title}return t||(a=e.src.slice(l,c),e.md.inline.parse(a,e.md,e.env,m=[]),(f=e.push("image","img",0)).attrs=n=[["src",g],["alt",""]],f.children=m,f.content=a,h&&n.push(["title",h])),e.pos=d,e.posMax=y,!0}},UP2C:function(e,t,n){"use strict";var o=n("I9T1"),r=n("Czhu"),i=n("AhzI"),a=n("xV3C");var s=n("F6Vc"),c=n("bcOB");function l(e){return!!e&&"paragraph"===e.type.name&&!e.childCount}function d(e){if(e.isInline)return(t=e).isText?!!t.textContent.trim():"hardBreak"!==t.type.name;if(e.isBlock&&(e.isLeaf||e.isAtom))return!0;if(!e.childCount)return!1;var t;for(let n=0;n<e.childCount;n++){if(d(e.child(n)))return!0}return!1}function u(e){if(e&&e.textContent)return!1;if(!e||!e.childCount||1===e.childCount&&l(e.firstChild))return!0;const t=[],n=[];return e.forEach(e=>{e.isInline?n.push(e):t.push(e)}),!n.length&&!t.filter(e=>!!e.childCount&&!(1===e.childCount&&l(e.firstChild))||e.isAtom).length}function p(e){const t=e.content.firstChild;return!(1!==e.childCount||!t)&&l(t)}function h(e){return 1===e.depth}function f(e){const{selection:t}=e,{$cursor:n,$anchor:o}=t;if(!n)return!1;const r=n.node();return!!r&&(l(r)&&h(o))}function m(e){const{selection:t}=e,{$cursor:n,$anchor:o}=t;if(!n)return!1;const r=n.nodeBefore;if(!r)return!1;if("text"===r.type.name&&"{"===r.text){return 0===o.node().marks.length&&h(o)}return!1}function b(e,t,n,r,i,a){if(!t)return;let l;if("string"==typeof t)try{if(i){l=i.parse(t).toJSON()}else l=JSON.parse(t)}catch(d){return void console.error(`Error processing value: ${t} isn't a valid JSON`)}else l=t;if(Array.isArray(l))console.error(`Error processing value: ${l} is an array, but it must be an object.`);else try{if("doc"===l.type&&(Array.isArray(l.content)&&0===l.content.length&&l.content.push({type:"paragraph",content:[]}),l.version||(l.version=1)),i)return o.Node.fromJSON(e,l);const t=Object(s.a)(e,l,a);let d=g(t,n,r);const u=o.Node.fromJSON(e,d);return u.check(),a&&Object(c.a)(u,e,a),u}catch(d){return void console.error(`Error processing document:\n${d.message}\n\n`,JSON.stringify(l))}}n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"i",(function(){return u})),n.d(t,"f",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"j",(function(){return O})),n.d(t,"k",(function(){return E})),n.d(t,"c",(function(){return w}));const g=(e,t,n)=>n&&t?function(e,t){const n=new Map;let o=!1;const s=Object(i.a)(e,{mention:e=>{if(e.attrs&&e.attrs.text){o=!0;const t=e.attrs.text,r=t.startsWith("@")?t.slice(1):t;n.set(e.attrs.id,r)}return Object(r.a)(Object(r.a)({},e),{},{attrs:Object(r.a)(Object(r.a)({},e.attrs),{},{text:""})})}});if(o&&t){const e=(o,r)=>{r&&r.then(o=>{Object(a.d)(o)&&(n.forEach((e,t)=>{o.cacheMentionName(t,e)}),n.clear(),t.unsubscribe("mentionProvider",e))})};t.subscribe("mentionProvider",e)}return s}(e,t):e,v=e=>{let t=-1,n=-1;return e.steps.forEach(e=>{e.getMap().forEach((e,o,r,i)=>{t=r<t||-1===t?r:t,n=i<n||-1===n?i:n})}),-1!==t?{from:t,to:n}:null},y=e=>t=>{let n=null;for(let o=t.depth;o>0;o--){const r=t.node(o);e(r)&&(n={pos:o>0?t.before(o):0,start:t.start(o),depth:o,node:r})}return n},O=e=>e.selection.$to.parent.type===e.schema.nodes.paragraph&&e.selection.$to.pos===e.doc.resolve(e.selection.$to.pos).end();function E(e,t,n){const o=v(e);o&&e.doc.nodesBetween(o.from,o.to,t,n)}function w(e){let t={};return e.nodesBetween(0,e.nodeSize-2,e=>{t[e.type.name]=(t[e.type.name]||0)+1}),t}},UZGJ:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ehfC"),i=n("CP8u"),a=n("h3S+"),s=n("GeyI"),c=n("VA4Z"),l=n("qeFW");var d=n("evQN"),u=n("c9+K");function p(e,t,n,o){let r=!1;return t.nodesBetween(n,o,t=>{!r&&e.isInSet(t.marks)&&(r=!0)}),r}function h(e=!1,t=!0){return{isAllowed:t,active:!1,prevActiveState:e,query:null,trigger:null,typeAheadHandler:null,currentIndex:0,items:[],itemsLoader:null,queryMarkPos:null,queryStarted:0,upKeyCount:0,downKeyCount:0}}function f(e,t,n){return new r.Plugin({key:l.a,state:{init:()=>h(),apply(r,i,a,s){const d=r.getMeta(l.a)||{},{action:u,params:p}=d;switch(u){case c.a.SET_CURRENT_INDEX:return function({dispatch:e,pluginState:t,params:n}){if(!n)return t;const r=Object(o.a)(Object(o.a)({},t),{},{currentIndex:n.currentIndex||0===n.currentIndex?n.currentIndex:t.currentIndex});return e(l.a,r),r}({dispatch:e,pluginState:i,tr:r,params:p});case c.a.SELECT_PREV:return function({dispatch:e,pluginState:t}){const n=t.currentIndex-1,r=Object(o.a)(Object(o.a)({},t),{},{currentIndex:n<0?t.items.length-1:n,upKeyCount:++t.upKeyCount});return e(l.a,r),r}({dispatch:e,pluginState:i,tr:r});case c.a.SELECT_NEXT:return function({dispatch:e,pluginState:t}){const n=t.currentIndex+1,r=Object(o.a)(Object(o.a)({},t),{},{currentIndex:n>t.items.length-1?0:n,downKeyCount:++t.downKeyCount});return e(l.a,r),r}({dispatch:e,pluginState:i,tr:r});case c.a.ITEMS_LIST_UPDATED:return function({dispatch:e,pluginState:t,tr:n}){const r=n.getMeta(l.a).items,i=Object(o.a)(Object(o.a)({},t),{},{items:r,itemsLoader:null,currentIndex:0});return e(l.a,i),i}({dispatch:e,pluginState:i,tr:r});case c.a.SELECT_CURRENT:const{from:a,to:d}=r.selection,{typeAheadQuery:u}=s.schema.marks;return r.doc.rangeHasMark(a-1,d,u)?m({dispatch:e,reactContext:t,typeAhead:n,state:s,pluginState:i,tr:r}):function({dispatch:e}){const t=h(!1);return e(l.a,t),t}({dispatch:e,pluginState:i,tr:r});case c.a.SET_QUERY:return function({dispatch:e,pluginState:t,params:n}){if(!n)return t;const r=Object(o.a)(Object(o.a)({},t),{},{query:"string"==typeof n.query?n.query:null});return e(l.a,r),r}({dispatch:e,pluginState:i,tr:r,params:p});default:return m({dispatch:e,reactContext:t,typeAhead:n,state:s,pluginState:i,tr:r})}}},view:()=>({update(e){const t=l.a.getState(e.state);if(!t)return;const{state:n,dispatch:o}=e,{doc:r,selection:i}=n,{from:s,to:d}=i,{typeAheadQuery:u}=n.schema.marks;!t.active||t.query||t.trigger?t.active&&0===(t.query||"").indexOf(" ")?Object(a.a)()(n,o):t.active||!t.prevActiveState||r.rangeHasMark(s-1,d,u)?t.active&&t.itemsLoader&&t.itemsLoader.promise.then(t=>(e=>(t,n)=>(n&&n(t.tr.setMeta(l.a,{action:c.a.ITEMS_LIST_UPDATED,items:e})),!0))(t)(e.state,o)):Object(a.a)()(n,o):Object(a.a)()(n,o)}}),appendTransaction(e,t,n){const o=l.a.getState(n);if(o.active&&o.query&&o.typeAheadHandler&&o.typeAheadHandler.forceSelect&&o.typeAheadHandler.forceSelect(o.query,o.items)){let e;return Object(d.b)()(n,t=>e=t),e}return null},props:{handleDOMEvents:{input(e,t){const{state:n,dispatch:o}=e,{selection:i,schema:a}=n;return!!(i instanceof r.TextSelection&&i.$cursor&&a.marks.typeAheadQuery.isInSet(i.$cursor.marks()))&&((s=t.data,(e,t)=>{const n=Object(u.a)(e),o=p(e.schema.marks.typeAheadQuery,e.doc,e.selection.from,e.selection.to);return null!==n&&!1!==o&&(t&&t(e.tr.setMeta(l.a,{action:c.a.SET_QUERY,params:{query:s}})),!0)})(n,o),!1);var s},compositionend:(e,t)=>{const{state:o,dispatch:i}=e,{selection:a,schema:c}=o;return!(!(-1!==n.map(e=>e.trigger).indexOf(t.data)&&a instanceof r.TextSelection&&a.$cursor)||c.marks.typeAheadQuery.isInSet(a.$cursor.marks()))&&(Object(s.a)(t.data,!0)(o,i),!0)}}}})}function m({dispatch:e,reactContext:t,typeAhead:n,pluginState:r,state:a,tr:s}){const{typeAheadQuery:c}=a.schema.marks,{doc:d,selection:f}=a,{from:m,to:b}=f,g=p(c,d,m-1,b),v=Object(i.p)(c,a);if(!v&&!g){if(r&&r.active===g&&r.isAllowed===v)return r;const t=h(r.active,v);return e(l.a,t),t}const{nodeBefore:y}=f.$from;if(!g||!y||!r){const t=h(!!r&&r.active);return r&&!r.active&&r.isAllowed||e(l.a,t),t}const O=c.isInSet(y.marks||[]);if(!O||!O.attrs.trigger)return r;const E=y.textContent||"",w=O.attrs.trigger.replace(/([^\x00-\xFF]|[\s\n])+/g,"");if(!E.includes(w)){const t=Object(o.a)(Object(o.a)({},h(!0)),{},{active:!0});return e(l.a,t),t}const C=E.replace(/^([^\x00-\xFF]|[\s\n])+/g,"").replace(w,""),T=n.find(e=>e.trigger===w);let S=[],k=null,x=null;try{const{intl:n}=t();S=T.getItems(C,a,n,{prevActive:r.prevActiveState,queryChanged:C!==r.query||w!==r.trigger},s,e),T.getHighlight&&(x=T.getHighlight(a)),r.itemsLoader&&r.itemsLoader.cancel(),Array.isArray(S)||(k=function(e){let t=!1;return{promise:new Promise((n,o)=>{e.then(e=>!t&&n(e)).catch(e=>!t&&o(e))}),cancel(){t=!0}}}(S),S=r.items)}catch(I){}const A=Object(u.a)(a),j={isAllowed:v,query:C,trigger:w,typeAheadHandler:T,active:!0,prevActiveState:r.active,items:S,itemsLoader:k,currentIndex:r.currentIndex,queryMarkPos:null!==A?A.start:null,queryStarted:Date.now(),upKeyCount:0,downKeyCount:0,highlight:x};return e(l.a,j),j}n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f}))},"V/yS":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("5p9S");const r=(e,t)=>t?e.createChecked(null,t):e.createAndFill(),i=(e,t=3,n=3,i=!0,a)=>{const{cell:s,header_cell:c,row:l,table:d}=Object(o.a)(e),u=[],p=[];for(let o=0;o<n;o++){const e=r(s,a);if(e&&u.push(e),i){const e=r(c,a);e&&p.push(e)}}const h=[];for(let o=0;o<t;o++)h.push(l.createChecked(null,i&&0===o?p:u));return d.createChecked(null,h)}},V0iC:function(e,t,n){"use strict";var o=n("ehfC"),r=n("jyPs"),i=n("JzyM"),a=n("4zHY"),s=n("stHy");var c=n("Ncve"),l=n("m23B"),d=n("Czhu"),u=n("5p9S");function p(e,{map:t,tableStart:n,table:o},r){let i=n;for(let l=0;l<r;l++)i+=o.child(l).nodeSize;const a=[];let s=r>0?-1:0;(function(e,t,n){const o=Object(u.a)(t.type.schema).header_cell;for(let r=0;r<e.width;r++){const i=t.nodeAt(e.map[r+n*e.width]);if(i&&i.type!==o)return!1}return!0})(t,o,r+s)&&(s=0===r||r===t.height?null:0);for(let l=0,p=t.width*r;l<t.width;l++,p++)if(r>0&&r<t.height&&t.map[p]===t.map[p-t.width]){const r=t.map[p],i=o.nodeAt(r);if(!i)throw new Error("addRow: node not found at pos "+r);const{attrs:a}=i;e.setNodeMarkup(n+r,void 0,Object(d.a)(Object(d.a)({},a),{},{rowspan:a.rowspan+1})),l+=a.colspan-1}else{let e;if(null==s)e=Object(u.a)(o.type.schema).cell;else{const n=t.map[p+s*t.width],r=o.nodeAt(n);if(!r)throw new Error("addRow: invalid node at mapped pos "+n);e=r.type}a.push(e.createAndFill())}const c=Object(u.a)(o.type.schema).row.create(null,a);return e.insert(i,c),e}var h=n("MaKF"),f=n("lsWn");const m=(e,t)=>n=>{let o=[];const r=Object(h.a)(e)(n.selection);if(r)for(let e=r.length-1;e>=0;e--)t(r[e],n)&&o.push(r[e]);return o},b=(e,t)=>n=>{const o=Object(i.c)(n.selection);if(o){const a=r.b.get(o.node),c=e-1;if(t&&c>=0)return Object(s.a)((e=>t=>{const n=Object(i.c)(t.selection);if(n){const o=r.b.get(n.node);if(e>=0&&e<=o.height){const r=n.node,i=Object(u.a)(r.type.schema);let a=n.start;for(let t=0;t<e+1;t++)a+=r.child(t).nodeSize;const s=r.child(e);let c=[],d=0;if(s.forEach(e=>{if(1===e.attrs.rowspan){d+=e.attrs.colspan;const t=i[e.type.spec.tableRole].createAndFill(e.attrs,[],e.marks);t&&c.push(t)}}),d<o.width){let n=[];for(let o=e;o>=0;o--){let r=m(o,(t,n)=>{const r=t.node.attrs.rowspan;return r>1&&o+r>e})(t);n.push(...r)}n.length&&n.forEach(e=>{t=Object(f.a)(e,{rowspan:e.node.attrs.rowspan+1})(t)})}return Object(l.safeInsert)(i.row.create(s.attrs,c),a)(t)}}return t})(c)(n));if(e>=0&&e<=a.height)return Object(s.a)(p(n,{map:a,tableStart:o.start,table:o.node},e))}return n};var g=n("V/yS"),v=n("GlS5"),y=n("tV3p"),O=n("q4xv"),E=n("gRiq"),w=n("Pudr");function C(e,t=!1){return t?function(e){return t=>{const n=Object(i.c)(t.selection);return n?t.step(v.a.create(t.doc,n.pos,e)):t}}(e):(n=e,e=>{const t=Object(i.c)(e.selection);if(t){const o=r.b.get(t.node);if(n>=0&&n<=o.width)return Object(s.a)(Object(a.a)(e,{map:o,tableStart:t.start,table:t.node},n))}return e});var n}n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return S})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return x})),n.d(t,"c",(function(){return A}));const T=(e,t)=>{if(!Object(i.c)(e.selection))return!1;if(t){t(C(Object(c.a)(e).left,Object(w.a)(e))(e.tr))}return!0},S=(e,t)=>{if(!Object(i.c)(e.selection))return!1;if(t){t(C(Object(c.a)(e).right,Object(w.a)(e))(e.tr))}return!0},k=e=>(t,n)=>{const a=C(e,Object(w.a)(t))(t.tr),s=Object(i.c)(a.selection);if(!s)return!1;const c=r.b.get(s.node).positionAt(0,e,s.node);return n&&n(a.setSelection(o.Selection.near(a.doc.resolve(s.start+c)))),!0},x=(e,t)=>(n,a)=>{const s=Object(O.b)(n);if(0===e&&s)return!1;const c=s&&e>1||!s&&e>0?Object(E.a)(n.schema)(e)(n.tr):b(e)(n.tr),l=Object(i.c)(c.selection);if(!l)return!1;if(a){const{selection:i}=n;if(t){const t=r.b.get(l.node).positionAt(e,0,l.node);c.setSelection(o.Selection.near(c.doc.resolve(l.start+t)))}else c.setSelection(i.map(c.doc,c.mapping));a(c)}return!0},A=(e,t)=>{if(!Object(y.c)(e))return!1;const n=Object(g.a)(e.schema);return t&&t(Object(l.safeInsert)(n)(e.tr).scrollIntoView()),!0}},VA4Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o={SELECT_PREV:"SELECT_PREV",SELECT_NEXT:"SELECT_NEXT",SELECT_CURRENT:"SELECT_CURRENT",SET_CURRENT_INDEX:"SET_CURRENT_INDEX",SET_QUERY:"SET_QUERY",ITEMS_LIST_UPDATED:"ITEMS_LIST_UPDATED"}},VEgZ:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"i",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return y}));var o=n("KsTJ"),r=n("BMbf"),i=n("3IV/"),a=n("qPpp");const s=Object(r.h)()+"px",c=o.default.span`
  display: inline-flex;
  align-items: center;

  & > div {
    display: flex;
  }
`,l=o.default.span`
  background: ${i.N30};
  width: 1px;
  height: 24px;
  display: inline-block;
  margin: 0 8px;
`,d=o.default.span`
  display: flex;
  align-items: center;

  > div,
  > span {
    display: flex;
  }

  > div > div {
    display: flex;
  }
  margin-left: ${({isSmall:e})=>e?4:0}px;
  min-width: ${({isSmall:e})=>e?"40px":"auto"};
`,u=o.default.span`
  margin-left: -8px;
`,p=o.default.div`
  display: flex;
`,h=d,f=o.default.span`
  display: flex;
  min-width: 80px;
  align-items: center;
  overflow: hidden;
  justify-content: center;
  flex-direction: column;
  padding: 0 ${e=>"none"===e.spacing?"8px":"6px"};
`,m=o.css`
  box-shadow: 0 0 1px rgba(9, 30, 66, 0.31),
    0 4px 8px -2px rgba(9, 30, 66, 0.25);
`,b=`\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n\n  &::-webkit-scrollbar {\n    height: ${s};\n    width: ${s};\n  }\n\n  &::-webkit-scrollbar-corner {\n    display: none;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background-color: rgba(0, 0, 0, 0);\n  }\n\n  &:hover::-webkit-scrollbar-thumb {\n    background-color: rgba(0, 0, 0, 0.2);\n    border-radius: ${s};\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background-color: rgba(0, 0, 0, 0.4);\n  }\n`,g=o.default.div`
  background-color: rgba(223, 225, 229, 0.5); /* N60 at 50% */
  color: ${i.N100};
  border-radius: ${Object(r.c)()}px;
  padding: 4px;
  line-height: 12px;
  font-size: 11.67px;
  align-self: flex-end;
  @media (max-width: ${a.y}px) {
    display: none;
  }
`,v=o.default.span`
  user-select: all;
`,y=o.default.div`
  &::before {
    background: ${e=>e.selectedColor};
  }
`},"VF/E":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var o=n("DA0Z"),r=n("ehfC"),i=n("IWmk"),a=n("CP8u"),s=n("mF23"),c=n("fDJo");const l=new r.PluginKey("textFormatting"),d=e=>{const{em:t,code:n,strike:r,strong:i,subsup:a,underline:s}=e.schema.marks,l={};if(n&&(l.codeActive=Object(c.a)(e,n.create()),l.codeDisabled=!Object(o.h)(n)(e)),t&&(l.emActive=Object(c.a)(e,t),l.emDisabled=!!l.codeActive||!Object(o.h)(t)(e)),r&&(l.strikeActive=Object(c.a)(e,r),l.strikeDisabled=!!l.codeActive||!Object(o.h)(r)(e)),i&&(l.strongActive=Object(c.a)(e,i),l.strongDisabled=!!l.codeActive||!Object(o.h)(i)(e)),a){const t=a.create({type:"sub"}),n=a.create({type:"sup"});l.subscriptActive=Object(c.a)(e,t),l.subscriptDisabled=!!l.codeActive||!Object(o.h)(a,{type:"sub"})(e),l.superscriptActive=Object(c.a)(e,n),l.superscriptDisabled=!!l.codeActive||!Object(o.h)(a,{type:"sup"})(e)}return s&&(l.underlineActive=Object(c.a)(e,s),l.underlineDisabled=!!l.codeActive||!Object(o.h)(s)(e)),l},u=e=>new r.Plugin({state:{init:(e,t)=>d(t),apply(t,n,o,r){const i=d(r);return Object(a.v)(n,i)?n:(e(l,i),i)}},key:l,props:{handleKeyDown(e,t){const{state:n,dispatch:o}=e;return t.key===i.moveRight.common?s.c()(n,o):t.key===i.moveLeft.common&&s.b()(n,o)},handleTextInput(e,t,n,o){const{state:r,dispatch:i}=e,{schema:a,selection:{$from:{parent:{type:c}}}}=r;return!!c.allowsMarkType(a.marks.code)&&Object(s.a)(t,n,o)(r,i)}}})},VMHS:function(e,t,n){"use strict";var o={};function r(e,t){var n;return"string"!=typeof t&&(t=r.defaultChars),n=function(e){var t,n,r=o[e];if(r)return r;for(r=o[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),r.push(n);for(t=0;t<e.length;t++)r[n=e.charCodeAt(t)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return r}(t),e.replace(/(%[a-f0-9]{2})+/gi,(function(e){var t,o,r,i,a,s,c,l="";for(t=0,o=e.length;t<o;t+=3)(r=parseInt(e.slice(t+1,t+3),16))<128?l+=n[r]:192==(224&r)&&t+3<o&&128==(192&(i=parseInt(e.slice(t+4,t+6),16)))?(l+=(c=r<<6&1984|63&i)<128?"":String.fromCharCode(c),t+=3):224==(240&r)&&t+6<o&&(i=parseInt(e.slice(t+4,t+6),16),a=parseInt(e.slice(t+7,t+9),16),128==(192&i)&&128==(192&a))?(l+=(c=r<<12&61440|i<<6&4032|63&a)<2048||c>=55296&&c<=57343?"":String.fromCharCode(c),t+=6):240==(248&r)&&t+9<o&&(i=parseInt(e.slice(t+4,t+6),16),a=parseInt(e.slice(t+7,t+9),16),s=parseInt(e.slice(t+10,t+12),16),128==(192&i)&&128==(192&a)&&128==(192&s))?((c=r<<18&1835008|i<<12&258048|a<<6&4032|63&s)<65536||c>1114111?l+="":(c-=65536,l+=String.fromCharCode(55296+(c>>10),56320+(1023&c))),t+=9):l+="";return l}))}r.defaultChars=";/?:@&=+$,#",r.componentChars="",e.exports=r},Vqim:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var o,r=n("Czhu"),i=n("qFXU"),a=n("HL7A");!function(e){e.ASC="asc",e.DESC="desc"}(o||(o={}));const s=30;var c;!function(e){e.ALL_CONTROLS_HOVER="CONTROLS_HOVER",e.ROW_CONTROLS_HOVER="ROW_CONTROLS_HOVER",e.COLUMN_CONTROLS_HOVER="COLUMN_CONTROLS_HOVER",e.TABLE_CONTROLS_HOVER="TABLE_CONTROLS_HOVER",e.CELL_CONTROLS_HOVER="CELL_CONTROLS_HOVER",e.COLUMN_CONTROLS_DECORATIONS="COLUMN_CONTROLS_DECORATIONS",e.COLUMN_SELECTED="COLUMN_SELECTED",e.COLUMN_RESIZING_HANDLE="COLUMN_RESIZING_HANDLE",e.COLUMN_RESIZING_HANDLE_LINE="COLUMN_RESIZING_HANDLE_LINE",e.LAST_CELL_ELEMENT="LAST_CELL_ELEMENT"}(c||(c={}));const l=Object(r.a)(Object(r.a)({},a.a),{},{COLUMN_CONTROLS:i.l+"-column-controls",COLUMN_CONTROLS_DECORATIONS:i.l+"-column-controls-decoration",COLUMN_SELECTED:i.l+"-column__selected",ROW_CONTROLS_WRAPPER:i.l+"-row-controls-wrapper",ROW_CONTROLS:i.l+"-row-controls",ROW_CONTROLS_INNER:i.l+"-row-controls__inner",ROW_CONTROLS_BUTTON_WRAP:i.l+"-row-controls__button-wrap",ROW_CONTROLS_BUTTON:i.l+"-row-controls__button",CONTROLS_BUTTON:i.l+"-controls__button",CONTROLS_BUTTON_ICON:i.l+"-controls__button-icon",CONTROLS_INSERT_BUTTON:i.l+"-controls__insert-button",CONTROLS_INSERT_BUTTON_INNER:i.l+"-controls__insert-button-inner",CONTROLS_INSERT_BUTTON_WRAP:i.l+"-controls__insert-button-wrap",CONTROLS_INSERT_LINE:i.l+"-controls__insert-line",CONTROLS_BUTTON_OVERLAY:i.l+"-controls__button-overlay",LAYOUT_BUTTON:i.l+"-layout-button",CONTROLS_INSERT_MARKER:i.l+"-controls__insert-marker",CONTROLS_INSERT_COLUMN:i.l+"-controls__insert-column",CONTROLS_INSERT_ROW:i.l+"-controls__insert-row",CONTROLS_DELETE_BUTTON_WRAP:i.l+"-controls__delete-button-wrap",CONTROLS_DELETE_BUTTON:i.l+"-controls__delete-button",CONTROLS_FLOATING_BUTTON_COLUMN:i.l+"-controls-floating__button-column",CONTROLS_FLOATING_BUTTON_ROW:i.l+"-controls-floating__button-row",CORNER_CONTROLS:i.l+"-corner-controls",CORNER_CONTROLS_INSERT_ROW_MARKER:i.l+"-corner-controls__insert-row-marker",CORNER_CONTROLS_INSERT_COLUMN_MARKER:i.l+"-corner-controls__insert-column-marker",CONTROLS_CORNER_BUTTON:i.l+"-corner-button",NUMBERED_COLUMN:i.l+"-numbered-column",NUMBERED_COLUMN_BUTTON:i.l+"-numbered-column__button",HOVERED_COLUMN:i.l+"-hovered-column",HOVERED_ROW:i.l+"-hovered-row",HOVERED_TABLE:i.l+"-hovered-table",HOVERED_CELL:i.l+"-hovered-cell",HOVERED_CELL_IN_DANGER:"danger",HOVERED_CELL_ACTIVE:"active",HOVERED_CELL_WARNING:i.l+"-hovered-cell__warning",HOVERED_DELETE_BUTTON:i.l+"-hovered-delete-button",WITH_CONTROLS:i.l+"-with-controls",RESIZING_PLUGIN:i.l+"-resizing-plugin",RESIZE_CURSOR:i.l+"-resize-cursor",IS_RESIZING:i.l+"-is-resizing",RESIZE_HANDLE:i.l+"-resize-handle",RESIZE_HANDLE_DECORATION:i.l+"-resize-decoration",CONTEXTUAL_SUBMENU:i.l+"-contextual-submenu",CONTEXTUAL_MENU_BUTTON_WRAP:i.l+"-contextual-menu-button-wrap",CONTEXTUAL_MENU_BUTTON:i.l+"-contextual-menu-button",CONTEXTUAL_MENU_ICON:i.l+"-contextual-submenu-icon",SELECTED_CELL:"selectedCell",NODEVIEW_WRAPPER:"tableView-content-wrap",TABLE_SELECTED:i.l+"-table__selected",TABLE_CELL:i.i,TABLE_HEADER_CELL:i.k,TABLE_STICKY:i.l+"-sticky",TOP_LEFT_CELL:"table > tbody > tr:nth-child(2) > td:nth-child(1)",LAST_ITEM_IN_CELL:i.l+"-last-item-in-cell",WITH_RESIZE_LINE:i.l+"-column-resize-line"})},Vt6h:function(e,t,n){"use strict";e.exports=function(e,t){var n,o,r,i,a,s,c=t+1,l=e.md.block.ruler.getRules("paragraph"),d=e.lineMax;for(s=e.parentType,e.parentType="paragraph";c<d&&!e.isEmpty(c);c++)if(!(e.sCount[c]-e.blkIndent>3||e.sCount[c]<0)){for(o=!1,r=0,i=l.length;r<i;r++)if(l[r](e,c,d,!0)){o=!0;break}if(o)break}return n=e.getLines(t,c,e.blkIndent,!1).trim(),e.line=c,(a=e.push("paragraph_open","p",1)).map=[t,e.line],(a=e.push("inline","",0)).content=n,a.map=[t,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=s,!0}},Vtgc:function(e,t,n){"use strict";e.exports=function(e,t){var n,o,r,i,a,s,c=e.pos;if(96!==e.src.charCodeAt(c))return!1;for(n=c,c++,o=e.posMax;c<o&&96===e.src.charCodeAt(c);)c++;for(r=e.src.slice(n,c),i=a=c;-1!==(i=e.src.indexOf("`",a));){for(a=i+1;a<o&&96===e.src.charCodeAt(a);)a++;if(a-i===r.length)return t||((s=e.push("code_inline","code",0)).markup=r,s.content=e.src.slice(c,i).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=a,!0}return t||(e.pending+=r),e.pos+=r.length,!0}},WQPC:function(e,t,n){"use strict";t.parseLinkLabel=n("AsbT"),t.parseLinkDestination=n("eO16"),t.parseLinkTitle=n("YdLh")},WXVP:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return d}));var o=n("4icS");const r=(e,t)=>e.setMeta(o.a,t),i=e=>t=>r(t,{type:"RESOLVE",url:e}),a=e=>t=>r(t,{type:"QUEUE",requests:e}),s=e=>t=>r(t,{type:"REGISTER",info:e}),c=e=>t=>r(t,{type:"SET_PROVIDER",provider:e}),l=e=>r(e,{type:"SHOW_LINK_TOOLBAR"}),d=e=>r(e,{type:"HIDE_LINK_TOOLBAR"})},WuRq:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("ERkP"),r=n.n(o),i=n("7nmT"),a=n.n(i);function s(e){return class extends o.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{const t=a.a.findDOMNode(this);(!t||e.target instanceof Node&&!t.contains(e.target))&&this.props.handleClickOutside&&this.props.handleClickOutside(e)},this.handleKeydown=e=>{"Escape"===e.code&&this.props.handleEscapeKeydown?this.props.handleEscapeKeydown(e):"Enter"===e.code&&this.props.handleEnterKeydown&&this.props.handleEnterKeydown(e)}}componentDidMount(){this.props.handleClickOutside&&document.addEventListener("click",this.handleClick,!1),this.props.handleEscapeKeydown&&document.addEventListener("keydown",this.handleKeydown,!1)}componentWillUnmount(){this.props.handleClickOutside&&document.removeEventListener("click",this.handleClick,!1),this.props.handleEscapeKeydown&&document.removeEventListener("keydown",this.handleKeydown,!1)}render(){return r.a.createElement(e,Object.assign({},this.props))}}}},"Wun/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("KsTJ"),r=n("3IV/");const i=o.default.input`
  input& {
    background: transparent;
    border: 0;
    border-radius: 0;
    box-sizing: content-box;
    color: ${r.N400};
    flex-grow: 1;
    font-size: 13px;
    line-height: 20px;
    padding: 0;
    ${e=>e.width?`width: ${e.width}px`:""};
    min-width: 145px;

    /* Hides IE10+ built-in [x] clear input button */
    &::-ms-clear {
      display: none;
    }

    &:focus {
      outline: none;
    }

    &::placeholder {
      color: ${r.N800};
      opacity: 0.5;
    }
  }
`},Wuxy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("ERkP")),r=i(n("ZUNO"));function i(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var s=function(e){return o.default.createElement(r.default,a({dangerouslySetGlyph:'<svg width="16" height="16" viewBox="0 0 16 16" focusable="false" role="presentation"><path fill="#2684FF" fill-rule="evenodd" d="M6.972 6.128a2.5 2.5 0 1 0-2.37 2.87c-.277.394-.616.815-1.016 1.265a.916.916 0 0 0-.058 1.147.607.607 0 0 0 .948.043c1.939-2.221 2.77-3.996 2.496-5.325zm7 0a2.5 2.5 0 1 0-2.37 2.87c-.277.394-.616.815-1.016 1.265a.916.916 0 0 0-.058 1.147.607.607 0 0 0 .948.043c1.939-2.221 2.77-3.996 2.496-5.325zM2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z"/></svg>'},e,{size:"small"}))};s.displayName="Blog16Icon";var c=s;t.default=c},WwDD:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l}));var o=n("KsTJ"),r=n("3IV/");const i=r.B75,a=r.B200,s="search-match",c="selected-search-match",l=o.css`
  .${s} {
    background-color: ${i};
  }

  .${c} {
    background-color: ${a};
    color: white;
  }
`},WyF7:function(e,t,n){"use strict";n.d(t,"f",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"i",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return O})),n.d(t,"g",(function(){return E}));var o=n("Czhu"),r=n("ehfC"),i=n("m23B"),a=n("JzyM"),s=n("4FMG"),c=n("tVIO"),l=n("cRXR"),d=n("eGvA"),u=n("F3Zm"),p=n("eryT");const h=e=>Object(p.a)({type:"SET_EXPAND_REF",data:{ref:e}},e=>e.setMeta("addToHistory",!1)),f=(e,t)=>(n,o)=>{if(!t||isNaN(e))return!1;const r={action:s.a.DELETED,actionSubject:t.type===n.schema.nodes.expand?s.b.EXPAND:s.b.NESTED_EXPAND,attributes:{inputMethod:s.e.TOOLBAR},eventType:s.d.TRACK};return t&&o&&o(Object(c.a)(n,n.tr.delete(e,e+t.nodeSize),r)),!0},m=()=>(e,t)=>{const n=Object(u.a)(e);return!!n&&f(n.pos,n.node)(e,t)},b=(e,t,n)=>(r,i)=>{const a=r.doc.nodeAt(t);if(a&&a.type===n&&i){const{tr:n}=r;n.setNodeMarkup(t,a.type,Object(o.a)(Object(o.a)({},a.attrs),{},{title:e}),a.marks),i(n)}return!0},g=(e,t)=>(n,r)=>{const i=n.doc.nodeAt(e);if(i&&i.type===t&&r){const{tr:a}=n,p=!i.attrs.__expanded;a.setNodeMarkup(e,i.type,Object(o.a)(Object(o.a)({},i.attrs),{},{__expanded:p}),i.marks),!1===p&&Object(u.a)(n)&&a.setSelection(new d.a(a.doc.resolve(e+i.nodeSize),d.c.RIGHT));const h={action:s.a.TOGGLE_EXPAND,actionSubject:t===n.schema.nodes.expand?s.b.EXPAND:s.b.NESTED_EXPAND,attributes:{platform:l.d.WEB,mode:l.c.EDITOR,expanded:p},eventType:s.d.TRACK};r(Object(c.a)(n,a.setMeta("isRemote",!0),h))}return!0},v=e=>{const{expand:t,nestedExpand:n}=e.schema.nodes;return(Object(a.c)(e.selection)?n:t).createAndFill({})},y=(e,t)=>{const n=v(e),o={action:s.a.INSERTED,actionSubject:s.b.DOCUMENT,actionSubjectId:n.type===e.schema.nodes.expand?s.c.EXPAND:s.c.NESTED_EXPAND,attributes:{inputMethod:s.e.INSERT_MENU},eventType:s.d.TRACK};return t&&t(Object(c.a)(e,Object(i.safeInsert)(n)(e.tr).scrollIntoView(),o)),!0},O=e=>(t,n,o)=>{if(o){const r=o.domAtPos(e).node.parentElement;if(r){E(t,n,o);const e=r.querySelector("input");if(e)return e.focus(),!0}}return!1},E=(e,t,n)=>{const{tr:o,doc:i,selection:a}=e;return n&&!n.hasFocus()&&n.focus(),t&&t(o.setSelection(r.TextSelection.create(i,a.from))),!0}},WzKz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("ERkP")),r=i(n("ZUNO"));function i(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var s=function(e){return o.default.createElement(r.default,a({dangerouslySetGlyph:'<svg width="16" height="16" viewBox="0 0 16 16" focusable="false" role="presentation"><path fill="#36B37E" fill-rule="evenodd" d="M2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm6 11l-2.863 1.822c-.42.38-1.137.111-1.137-.427v-8.19C4 3.54 4.596 3 5.333 3h5.334C11.403 3 12 3.539 12 4.206v8.19c0 .537-.719.806-1.139.426L8 11zm0-2.371l2 1.274V5H6v4.902L8 8.63z"/></svg>'},e,{size:"small"}))};s.displayName="Story16Icon";var c=s;t.default=c},"X+bm":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var o=n("ehfC");const r=e=>{if(e&&e instanceof o.NodeSelection){if("status"===e.node.type.name)return e.node.attrs||null}return null},i=e=>e&&(e.text&&0===e.text.trim().length||""===e.text)},"X/3Q":function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("5rvf"),a=n("xuWu"),s=n("3l5s"),c=n("Czhu"),l=n("L21V"),d=n("zJ/j"),u=n("qPpp"),p=n("PLaw"),h=n.n(p),f=n("s3oS"),m=n.n(f),b=n("/Tyz"),g=n("HPtl"),v=n("uo6K"),y=n("VEgZ"),O=n("cU7i"),E=n("4FMG"),w=n("f+8s"),C=n("4KTy"),T=n.n(C);const S=()=>r.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M14 12.5h-4l-.874 2.186A.5.5 0 0 1 8.66 15H7.273a.5.5 0 0 1-.456-.705l4.05-9A.5.5 0 0 1 11.323 5h1.354a.5.5 0 0 1 .456.295l4.05 9a.5.5 0 0 1-.456.705h-1.388a.5.5 0 0 1-.465-.314L14 12.5zm-.6-1.5L12 7.5 10.6 11h2.8z",fill:"currentColor",fillRule:"evenodd"})),k=()=>r.a.createElement(T.a,{glyph:S,label:"Text color icon"});var x=n("KsTJ"),A=n("BMbf"),j=n("3IV/");const I=x.default.div`
  display: flex;
  margin-top: ${Object(A.h)()/2}px;
  padding: ${Object(A.h)()/2}px;
  padding-bottom: 0;
  border-top: 1px solid #dfe1e6;

  > button {
    flex-grow: 1;
  }
`,M=x.default.div`
  position: relative;
`,N=x.default.div`
  position: absolute;
  left: 0;
  right: 0;
  top: 16px;
  margin: auto;
  width: 12px;
  height: 3px;
  border-radius: ${Object(A.c)()+"px"};

  ${({gradientColors:e,selectedColor:t})=>t?"background: "+t:"background: "+e};
`,R=e=>`\n    linear-gradient(\n      to right,\n      ${e.map((t,n)=>{const o=100/e.length,r=n+1;return 0===n?`${t} ${r*o}%,`:n===e.length-1?`${t} ${(r-1)*o}%`:`\n            ${t} ${(r-1)*o}%,\n            ${t} ${r*o}%,\n          `}).join("\n")}\n    );\n    `,P=R([j.P300,j.T300,j.Y400,j.R400]),L=R([j.N80,j.N60,j.N40,j.N60]),D=Object(l.f)({textColor:{id:"fabric.editor.textColor",defaultMessage:"Text color",description:""},moreColors:{id:"fabric.editor.textColor.moreColors",defaultMessage:"More colors",description:"More colors"},lessColors:{id:"fabric.editor.textColor.lessColors",defaultMessage:"Fewer colors",description:"Fewer colors"}});class _ extends r.a.Component{constructor(){super(...arguments),this.state={isOpen:!1,isShowingMoreColors:!1},this.changeColor=e=>w.a(e)(this.props.editorView.state,this.props.editorView.dispatch),this.changeTextColor=(e,t)=>{if(!t){const{pluginState:{palette:t,paletteExpanded:n,defaultColor:o}}=this.props,{isShowingMoreColors:r}=this.state,i=(n||t).find(t=>t.value===e),a=e!==o&&!g.a.some(t=>t.value===e);return this.dispatchAnalyticsEvent(this.buildExperimentalAnalyticsSelectColor({color:(i?i.label:e).toLowerCase(),isShowingMoreColors:r,isNewColor:a})),this.handleOpenChange({isOpen:!1,logCloseEvent:!1}),this.changeColor(e)}return!1},this.toggleOpen=()=>{this.handleOpenChange({isOpen:!this.state.isOpen,logCloseEvent:!0})},this.handleOpenChange=({isOpen:e,logCloseEvent:t})=>{const{pluginState:{palette:n,color:o}}=this.props,{isShowingMoreColors:r}=this.state,i=!n.find(e=>e.value===o);this.setState({isOpen:e,isShowingMoreColors:i||r}),t&&this.dispatchAnalyticsEvent(this.buildExperimentalAnalyticsPalette(e?E.a.OPENED:E.a.CLOSED,{isShowingMoreColors:i||r,noSelect:!1===e}))},this.hide=e=>{const{isOpen:t,isShowingMoreColors:n}=this.state;e.defaultPrevented||!0===t&&(this.dispatchAnalyticsEvent(this.buildExperimentalAnalyticsPalette(E.a.CLOSED,{isShowingMoreColors:n,noSelect:!0})),this.setState({isOpen:!1}))},this.handleShowMoreToggle=e=>{e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.setState(e=>(this.dispatchAnalyticsEvent(this.buildExperimentalAnalyticsShowMore(e.isShowingMoreColors?E.a.CLOSED:E.a.OPENED,{showMoreButton:!e.isShowingMoreColors,showLessButton:e.isShowingMoreColors})),{isShowingMoreColors:!e.isShowingMoreColors}))}}render(){const{isOpen:e,isShowingMoreColors:t}=this.state,{popupsMountPoint:n,popupsBoundariesElement:o,popupsScrollableElement:i,isReducedSpacing:a,pluginState:s,pluginState:{paletteExpanded:c},intl:{formatMessage:l},showMoreColorsToggle:p,disabled:f}=this.props,g=l(D.textColor),E=t&&c?c:s.palette;let w;return document.body.clientWidth<=740&&(w=242),r.a.createElement(y.f,null,r.a.createElement(v.a,{mountTo:n,boundariesElement:o,scrollableElement:i,isOpen:e&&!s.disabled,handleClickOutside:this.hide,handleEscapeKeydown:this.hide,zIndex:u.w,fitWidth:w,trigger:r.a.createElement(O.a,{spacing:a?"none":"default",disabled:f||s.disabled,selected:e,"aria-label":g,title:g,onClick:this.toggleOpen,iconBefore:r.a.createElement(y.i,null,r.a.createElement(M,null,r.a.createElement(k,null),r.a.createElement(N,{selectedColor:s.color!==s.defaultColor&&s.color,gradientColors:s.disabled?L:P})),r.a.createElement(y.e,null,r.a.createElement(h.a,{label:g})))})},r.a.createElement(b.a,{palette:E,onClick:e=>this.changeTextColor(e,s.disabled),selectedColor:s.color}),p&&r.a.createElement(I,null,r.a.createElement(d.a,{appearance:"subtle",onClick:this.handleShowMoreToggle,iconBefore:r.a.createElement(m.a,{label:""})},l(t?D.lessColors:D.moreColors)))),r.a.createElement(y.g,null))}getCommonExperimentalAnalyticsAttributes(){const{showMoreColorsToggle:e}=this.props;return{experiment:"editor.toolbarTextColor.moreColors",experimentGroup:e?"subject":"control"}}buildExperimentalAnalyticsPalette(e,t){return{action:e,actionSubject:E.b.TOOLBAR,actionSubjectId:E.c.FORMAT_COLOR,eventType:E.d.TRACK,attributes:Object(c.a)(Object(c.a)({},this.getCommonExperimentalAnalyticsAttributes()),t)}}buildExperimentalAnalyticsShowMore(e,t){return{action:e,actionSubject:E.b.TOOLBAR,actionSubjectId:E.c.FORMAT_COLOR,eventType:E.d.TRACK,attributes:Object(c.a)(Object(c.a)({},this.getCommonExperimentalAnalyticsAttributes()),t)}}buildExperimentalAnalyticsSelectColor(e){return{action:E.a.FORMATTED,actionSubject:E.b.TEXT,actionSubjectId:E.c.FORMAT_COLOR,eventType:E.d.TRACK,attributes:Object(c.a)(Object(c.a)({},this.getCommonExperimentalAnalyticsAttributes()),e)}}dispatchAnalyticsEvent(e){const{dispatchAnalyticsEvent:t}=this.props;t&&t(e)}}var B=Object(l.g)(_);const $=e=>{if(e&&"boolean"!=typeof e)return e};t.a=e=>({name:"textColor",marks:()=>[{name:"textColor",mark:i.c}],pmPlugins:()=>[{name:"textColor",plugin:({dispatch:t})=>Object(s.b)(t,$(e))}],primaryToolbarComponent({editorView:t,popupsMountPoint:n,popupsBoundariesElement:o,popupsScrollableElement:i,isToolbarReducedSpacing:c,dispatchAnalyticsEvent:l,disabled:d}){const u=$(e),p=u&&u.EXPERIMENTAL_allowMoreTextColors;return r.a.createElement(a.a,{plugins:{textColor:s.c},render:({textColor:e})=>r.a.createElement(B,{pluginState:e,isReducedSpacing:c,editorView:t,popupsMountPoint:n,popupsBoundariesElement:o,popupsScrollableElement:i,showMoreColorsToggle:p,dispatchAnalyticsEvent:l,disabled:d})})}})},X3tg:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=a(n("ERkP")),l=n("HbsM"),d=s(n("Yu3e")),u={width:"auto",height:"auto"},p=d.default((function(e,t,n){return Math.max(Math.min(e,n),t)})),h=d.default((function(e,t){return Math.round(e/t)*t})),f=d.default((function(e,t){return new RegExp(e,"i").test(t)})),m=d.default((function(e,t,n){void 0===n&&(n=0);var o=t.reduce((function(n,o,r){return Math.abs(o-e)<Math.abs(t[n]-e)?r:n}),0),r=Math.abs(t[o]-e);return 0===n||r<n?t[o]:e})),b=d.default((function(e,t){return e.substr(e.length-t.length,t.length)===t})),g=d.default((function(e){return"auto"===(e=e.toString())||b(e,"px")||b(e,"%")||b(e,"vh")||b(e,"vw")||b(e,"vmax")||b(e,"vmin")?e:e+"px"})),v=d.default((function(e,t,n,o,r){if(t&&"string"==typeof t&&b(t,"%")){var i=Number(t.replace("%",""))/100;t=e.width*i}if(n&&"string"==typeof n&&b(n,"%")){i=Number(n.replace("%",""))/100;n=e.height*i}if(o&&"string"==typeof o&&b(o,"%")){i=Number(o.replace("%",""))/100;o=e.width*i}if(r&&"string"==typeof r&&b(r,"%")){i=Number(r.replace("%",""))/100;r=e.height*i}return{maxWidth:void 0===t?void 0:Number(t),maxHeight:void 0===n?void 0:Number(n),minWidth:void 0===o?void 0:Number(o),minHeight:void 0===r?void 0:Number(r)}})),y=["style","className","grid","snap","bounds","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],O=function(e){function t(t){var n=e.call(this,t)||this;return n.ratio=1,n.resizable=null,n.parentLeft=0,n.parentTop=0,n.resizableLeft=0,n.resizableTop=0,n.targetLeft=0,n.targetTop=0,n.state={isResizing:!1,resizeCursor:"auto",width:void 0===(n.propsSize&&n.propsSize.width)?"auto":n.propsSize&&n.propsSize.width,height:void 0===(n.propsSize&&n.propsSize.height)?"auto":n.propsSize&&n.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0}},n.onResizeStart=n.onResizeStart.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),"undefined"!=typeof window&&(window.addEventListener("mouseup",n.onMouseUp),window.addEventListener("mousemove",n.onMouseMove),window.addEventListener("mouseleave",n.onMouseUp),window.addEventListener("touchmove",n.onMouseMove),window.addEventListener("touchend",n.onMouseUp)),n}return r(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||u},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"base",{get:function(){var e=this.parentNode;if(e)for(var t=0,n=[].slice.call(e.children);t<n.length;t++){var o=n[t];if(o instanceof HTMLElement&&o.classList.contains("__resizable_base__"))return o}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if("undefined"!=typeof window&&this.resizable){var n=this.resizable.offsetWidth,o=this.resizable.offsetHeight,r=this.resizable.style.position;"relative"!==r&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:n,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:o,this.resizable.style.position=r}return{width:e,height:t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,n=function(t){if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&b(e.propsSize[t].toString(),"%")){if(b(e.state[t].toString(),"%"))return e.state[t].toString();var n=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/n[t]*100+"%"}return g(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?g(t.width):n("width"),height:t&&void 0!==t.height&&!this.state.isResizing?g(t.height):n("height")}},enumerable:!0,configurable:!0}),t.prototype.getParentSize=function(){if(!this.base||!this.parentNode)return{width:window.innerWidth,height:window.innerHeight};var e=!1,t=this.parentNode.style.flexWrap,n=this.base.style.minWidth;"wrap"!==t&&(e=!0,this.parentNode.style.flexWrap="wrap"),this.base.style.position="relative",this.base.style.minWidth="100%";var o={width:this.base.offsetWidth,height:this.base.offsetHeight};return this.base.style.position="absolute",e&&(this.parentNode.style.flexWrap=t),this.base.style.minWidth=n,o},t.prototype.componentDidMount=function(){this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height});var e=this.parentNode;if(e instanceof HTMLElement&&!this.base){var t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0",t.classList?t.classList.add("__resizable_base__"):t.className+="__resizable_base__",e.appendChild(t)}},t.prototype.componentWillUnmount=function(){if("undefined"!=typeof window){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseleave",this.onMouseUp),window.removeEventListener("touchmove",this.onMouseMove),window.removeEventListener("touchend",this.onMouseUp);var e=this.parentNode;if(!this.base||!e)return;if(!(e instanceof HTMLElement&&this.base instanceof Node))return;e.removeChild(this.base)}},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==n&&"auto"!==n?e:"auto"},t.prototype.calculateNewMaxFromBoundary=function(e,t){if("parent"===this.props.bounds){var n=this.parentNode;if(n instanceof HTMLElement){var o=n.offsetWidth+(this.parentLeft-this.resizableLeft),r=n.offsetHeight+(this.parentTop-this.resizableTop);e=e&&e<o?e:o,t=t&&t<r?t:r}}else if("window"===this.props.bounds){if("undefined"!=typeof window){o=window.innerWidth-this.resizableLeft,r=window.innerHeight-this.resizableTop;e=e&&e<o?e:o,t=t&&t<r?t:r}}else if(this.props.bounds instanceof HTMLElement){o=this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),r=this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop);e=e&&e<o?e:o,t=t&&t<r?t:r}return{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n=this.props.scale||1,o=this.props.resizeRatio||1,r=this.state,i=r.direction,a=r.original,s=this.props,c=s.lockAspectRatio,l=s.lockAspectRatioExtraHeight,d=s.lockAspectRatioExtraWidth,u=a.width,p=a.height,h=l||0,m=d||0;return f("right",i)&&(u=a.width+(e-a.x)*o/n,c&&(p=(u-m)/this.ratio+h)),f("left",i)&&(u=a.width-(e-a.x)*o/n,c&&(p=(u-m)/this.ratio+h)),f("bottom",i)&&(p=a.height+(t-a.y)*o/n,c&&(u=(p-h)*this.ratio+m)),f("top",i)&&(p=a.height-(t-a.y)*o/n,c&&(u=(p-h)*this.ratio+m)),{newWidth:u,newHeight:p}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,o){var r=this.props,i=r.lockAspectRatio,a=r.lockAspectRatioExtraHeight,s=r.lockAspectRatioExtraWidth,c=void 0===o.width?10:o.width,l=void 0===n.width||n.width<0?e:n.width,d=void 0===o.height?10:o.height,u=void 0===n.height||n.height<0?t:n.height,h=a||0,f=s||0;if(i){var m=(d-h)*this.ratio+f,b=(u-h)*this.ratio+f,g=(c-f)/this.ratio+h,v=(l-f)/this.ratio+h,y=Math.max(c,m),O=Math.min(l,b),E=Math.max(d,g),w=Math.min(u,v);e=p(e,y,O),t=p(t,E,w)}else e=p(e,c,l),t=p(t,d,u);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){if("parent"===this.props.bounds){var e=this.parentNode;if(e instanceof HTMLElement){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds instanceof HTMLElement){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left,this.targetTop=n.top}if(this.resizable){var o=this.resizable.getBoundingClientRect(),r=o.left,i=o.top;this.resizableLeft=r,this.resizableTop=i}},t.prototype.onResizeStart=function(e,t){var n=0,o=0;if(e.nativeEvent instanceof MouseEvent){if(n=e.nativeEvent.clientX,o=e.nativeEvent.clientY,3===e.nativeEvent.which)return}else e.nativeEvent instanceof TouchEvent&&(n=e.nativeEvent.touches[0].clientX,o=e.nativeEvent.touches[0].clientY);if(this.props.onResizeStart&&(this.resizable&&!1===this.props.onResizeStart(e,t,this.resizable)))return;this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height,this.setBoundingClientRect(),this.setState({original:{x:n,y:o,width:this.size.width,height:this.size.height},isResizing:!0,resizeCursor:window.getComputedStyle(e.target).cursor||"auto",direction:t})},t.prototype.onMouseMove=function(e){if(this.state.isResizing&&this.resizable){var t=this.props,n=t.maxWidth,o=t.maxHeight,r=t.minWidth,i=t.minHeight,a=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,s=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,c=this.state,l=c.direction,d=c.original,u=c.width,p=c.height,f=this.getParentSize(),g=v(f,n,o,r,i);n=g.maxWidth,o=g.maxHeight,r=g.minWidth,i=g.minHeight;var y=this.calculateNewSizeFromDirection(a,s),O=y.newHeight,E=y.newWidth,w=this.calculateNewMaxFromBoundary(n,o),C=this.calculateNewSizeFromAspectRatio(E,O,{width:w.maxWidth,height:w.maxHeight},{width:r,height:i});if(E=C.newWidth,O=C.newHeight,this.props.grid){var T=h(E,this.props.grid[0]),S=h(O,this.props.grid[1]),k=this.props.snapGap||0;E=0===k||Math.abs(T-E)<=k?T:E,O=0===k||Math.abs(S-O)<=k?S:O}this.props.snap&&this.props.snap.x&&(E=m(E,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(O=m(O,this.props.snap.y,this.props.snapGap));var x={width:E-d.width,height:O-d.height};if(u&&"string"==typeof u)if(b(u,"%"))E=E/f.width*100+"%";else if(b(u,"vw")){E=E/window.innerWidth*100+"vw"}else if(b(u,"vh")){E=E/window.innerHeight*100+"vh"}if(p&&"string"==typeof p)if(b(p,"%"))O=O/f.height*100+"%";else if(b(p,"vw")){O=O/window.innerWidth*100+"vw"}else if(b(p,"vh")){O=O/window.innerHeight*100+"vh"}this.setState({width:this.createSizeForCssProperty(E,"width"),height:this.createSizeForCssProperty(O,"height")}),this.props.onResize&&this.props.onResize(e,l,this.resizable,x)}},t.prototype.onMouseUp=function(e){var t=this.state,n=t.isResizing,o=t.direction,r=t.original;if(n&&this.resizable){var i={width:this.size.width-r.width,height:this.size.height-r.height};this.props.onResizeStop&&this.props.onResizeStop(e,o,this.resizable,i),this.props.size&&this.setState(this.props.size),this.setState({isResizing:!1,resizeCursor:"auto"})}},t.prototype.updateSize=function(e){this.setState({width:e.width,height:e.height})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,o=t.handleStyles,r=t.handleClasses,i=t.handleWrapperStyle,a=t.handleWrapperClass,s=t.handleComponent;if(!n)return null;var d=Object.keys(n).map((function(t){return!1!==n[t]?c.createElement(l.Resizer,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:o&&o[t],className:r&&r[t]},s&&s[t]?s[t]:null):null}));return c.createElement("span",{className:a,style:i},d)},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce((function(t,n){return-1!==y.indexOf(n)||(t[n]=e.props[n]),t}),{});return c.createElement("div",i({ref:function(t){t&&(e.resizable=t)},style:i({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style,this.sizeStyle,{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box"}),className:this.props.className},t),this.state.isResizing&&c.createElement("div",{style:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:""+(this.state.resizeCursor||"auto"),opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"}}),this.props.children,this.renderResizer())},t.defaultProps={onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(c.PureComponent);t.Resizable=O},X78g:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"b",(function(){return m}));var o=n("eUCP"),r=n("UdmJ"),i=n("ehfC"),a=n("fttP");const s=(e,t,n)=>{const{doc:o,json:r,version:i}=e;if(o){const{state:e}=t,r=Object(a.e)(o,e,i,n);r.setMeta("isRemote",!0),t.dispatch(r)}else r&&u(r,void 0,t)},c=(e,t)=>{const{state:{tr:n}}=t;t.dispatch(n.setMeta("sessionId",e))},l=(e,t)=>{const{state:{tr:n}}=t;t.dispatch(n.setMeta("presence",e))},d=(e,t,n)=>{const{json:o,userIds:r=[]}=e;o&&u(o,r,t,n)},u=(e,t,n,i)=>{if(!e||!e.length)return;const{state:a,state:{schema:s}}=n,c=e.map(e=>r.Step.fromJSON(s,e));let l;if(i&&i.useNativePlugin&&t?l=Object(o.receiveTransaction)(a,c,t):(l=a.tr,c.forEach(e=>l.step(e))),l){l.setMeta("addToHistory",!1),l.setMeta("isRemote",!0);const{from:t,to:o}=a.selection,[r]=e;t===r.from&&o===r.to&&l.setSelection(a.selection.map(l.doc,l.mapping)),n.dispatch(l)}},p=(e,t)=>{const{state:{tr:n}}=t;t.dispatch(n.setMeta("telepointer",e))};function h(e){return e instanceof i.AllSelection}function f(e){return e instanceof i.NodeSelection}const m=e=>({type:"textSelection",anchor:e.anchor,head:h(e)||f(e)?e.head-1:e.head})},XC2T:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=new(n("ehfC").PluginKey)("analyticsPlugin")},XHA8:function(e,t,n){"use strict";var o=n("5z8k"),r=n("T1Ll").isSpace;function i(e,t,n,o){var i,a,s,c,l,d,u,p;for(this.src=e,this.md=t,this.env=n,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",p=!1,s=c=d=u=0,l=(a=this.src).length;c<l;c++){if(i=a.charCodeAt(c),!p){if(r(i)){d++,9===i?u+=4-u%4:u++;continue}p=!0}10!==i&&c!==l-1||(10!==i&&c++,this.bMarks.push(s),this.eMarks.push(c),this.tShift.push(d),this.sCount.push(u),this.bsCount.push(0),p=!1,d=0,u=0,s=c+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}i.prototype.push=function(e,t,n){var r=new o(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r},i.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},i.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},i.prototype.skipSpaces=function(e){for(var t,n=this.src.length;e<n&&(t=this.src.charCodeAt(e),r(t));e++);return e},i.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!r(this.src.charCodeAt(--e)))return e+1;return e},i.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},i.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},i.prototype.getLines=function(e,t,n,o){var i,a,s,c,l,d,u,p=e;if(e>=t)return"";for(d=new Array(t-e),i=0;p<t;p++,i++){for(a=0,u=c=this.bMarks[p],l=p+1<t||o?this.eMarks[p]+1:this.eMarks[p];c<l&&a<n;){if(s=this.src.charCodeAt(c),r(s))9===s?a+=4-(a+this.bsCount[p])%4:a++;else{if(!(c-u<this.tShift[p]))break;a++}c++}d[i]=a>n?new Array(a-n+1).join(" ")+this.src.slice(c,l):this.src.slice(c,l)}return d.join("")},i.prototype.Token=o,e.exports=i},XWar:function(e,t,n){"use strict";for(var o=n("T1Ll").isSpace,r=[],i=0;i<256;i++)r.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){r[e.charCodeAt(0)]=1})),e.exports=function(e,t){var n,i=e.pos,a=e.posMax;if(92!==e.src.charCodeAt(i))return!1;if(++i<a){if((n=e.src.charCodeAt(i))<256&&0!==r[n])return t||(e.pending+=e.src[i]),e.pos+=2,!0;if(10===n){for(t||e.push("hardbreak","br",0),i++;i<a&&(n=e.src.charCodeAt(i),o(n));)i++;return e.pos=i,!0}}return t||(e.pending+="\\"),e.pos++,!0}},Xq3U:function(e,t,n){"use strict";var o,r;n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),function(e){e.DELETED="deleted",e.CLEARED="cleared",e.MERGED="merged",e.SPLIT="split",e.COLORED="colored",e.TOGGLED_HEADER_COLUMN="toggledHeaderColumn",e.TOGGLED_HEADER_ROW="toggledHeaderRow",e.TOGGLED_NUMBER_COLUMN="toggledNumberColumn",e.CHANGED_BREAKOUT_MODE="changedBreakoutMode",e.CUT="cut",e.COPIED="copied",e.ADDED_ROW="addedRow",e.ADDED_COLUMN="addedColumn",e.DELETED_ROW="deletedRow",e.DELETED_COLUMN="deletedColumn",e.SORTED_COLUMN="sortedColumn",e.REPLACED="replaced",e.ATTEMPTED_TABLE_WIDTH_CHANGE="attemptedTableWidthChange"}(o||(o={})),function(e){e.WIDE="wide",e.FULL_WIDTH="fullWidth",e.NORMAL="normal"}(r||(r={}))},Y8iL:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return y})),n.d(t,"g",(function(){return O})),n.d(t,"f",(function(){return w})),n.d(t,"j",(function(){return C})),n.d(t,"b",(function(){return k})),n.d(t,"k",(function(){return x}));var o=n("ehfC"),r=n("lELC"),i=n("cX+u"),a=n("Fazm"),s=n("aTr9"),c=n("LsVN"),l=n("CP8u"),d=n("4FMG");const u=e=>{if(!e.length)return[];const{annotation:t}=e[0].type.schema.marks;return e.filter(e=>e.type===t).map(e=>e.attrs.id)},p=(e,t)=>{const n=(e=>{const{nodeBefore:t,nodeAfter:n}=e,o=t&&e.doc.nodeAt(Math.max(0,e.pos-t.nodeSize-1)),r=n&&e.doc.nodeAt(e.pos+n.nodeSize);return[o&&o.marks||[],r&&r.marks||[]]})(t).map(u);e.sort((e,t)=>Object(l.w)(n,t=>t.indexOf(e.id))-Object(l.w)(n,e=>e.indexOf(t.id)))},h=e=>{const t=new Set;return e.descendants(e=>(e.marks.filter(e=>"annotation"===e.type.name).filter(f).forEach(e=>t.add(e.attrs.id)),!0)),Array.from(t)},f=e=>{const{id:t,annotationType:n}=e.attrs;return function(e){if(!e||"string"!=typeof e)return!1;return!["null","undefined"].includes(e.toLowerCase())}(t)&&function(e){if(!e||"string"!=typeof e)return!1;return Object.values(s.b).includes(e)}(n)},m=(e,t)=>r.a.inline(e,t,{class:""+i.b.draft}),b=e=>"view-annotation-wrapper_"+e.map(e=>e.id).join("_"),g=(e,t)=>{const{empty:n,$anchor:o,anchor:r}=e;if(!n||!t)return[];const i=t.nodeAt(r);if(!i&&!o.nodeBefore)return[];const a=t.type.schema.marks.annotation,s=o.nodeBefore,c=i&&i.marks||[];let l=[];a.isInSet(c)?l=c:s&&a.isInSet(s.marks)&&(l=s.marks);const d=l.filter(e=>"annotation"===e.type.name).map(e=>({id:e.attrs.id,type:e.attrs.annotationType}));return p(d,o),d};function v(e,t){const{bookmark:n}=t;return n?n.resolve(e.doc):e.selection}const y=new o.PluginKey("inlineCommentPluginKey"),O=e=>y.getState(e),E=e=>{const{from:t,to:n}=e.selection;return Object(a.b)({from:t,to:n},e.doc,e.schema).length},w=(e,t)=>n=>{let o={};return e&&(o={inputMethod:t,overlap:E(n)}),{action:e?d.a.OPENED:d.a.CLOSED,actionSubject:d.b.ANNOTATION,actionSubjectId:d.c.INLINE_COMMENT,eventType:d.d.TRACK,attributes:o}},C=e=>{const{selection:t}=e,{disallowOnWhitespace:n}=O(e);if(t.empty||!(t instanceof o.TextSelection||t instanceof o.AllSelection))return c.a.INVALID;const r=T(e);return r&&t.to-t.from==1?c.a.INVALID:r?c.a.DISABLED:n&&function(e){let t=!1;return e.content().content.descendants(e=>(""===e.textContent.trim()&&(t=!0),!t)),t}(t)?c.a.INVALID:c.a.VALID},T=e=>{const{selection:t,doc:n,schema:o}=e;return!Object(a.a)({from:t.from,to:t.to},n,o)};function S(e,t){const{schema:{marks:{annotation:n}}}=t;return!!(n&&e&&e.marks.length&&n.isInSet(e.marks))}function k(e,t){if(!e.content.size)return!1;let n=!1;return e.content.forEach(e=>{if(n=n||S(e,t),n)return!0;e.descendants(e=>!S(e,t)||(n=!0,!1))}),n}function x(e,t){if(!e.content.size)return!1;e.content.forEach(e=>{A(e,t),e.content.descendants(e=>(A(e,t),!0))})}function A(e,t){return S(e,t)&&(e.marks=e.marks.filter(e=>"annotation"!==e.type.name||function(e,t){const n=O(t);return n.annotations&&Object.keys(n.annotations).includes(e)}(e.attrs.id,t))),e}},Y9Xt:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var o=n("P3V9");function r(e,t){try{const n=Object(o.a)(t).parseDate(e);if(isNaN(n.getTime()))return null;const r=n.getFullYear();if(r<1e3||r>9999)return null;return{day:n.getDate(),month:n.getMonth()+1,year:r}}catch(n){return null}}function i(e,t){const{day:n,month:r,year:i}=e,a=Object(o.a)(t),s=new Date(Date.UTC(i,r-1,n));return a.formatDate(s)}function a(e){const{day:t,month:n,year:o}=e;return new Date(Date.UTC(o,n-1,t))}function s(e){return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}},YF5E:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ERkP"),i=n.n(r),a=n("KsTJ"),s=n("w301"),c=n("BMbf"),l=n("3IV/");const d=a.default.span`
  flex: 0 0 16px;
  width: 16px;
  height: 16px;
  position: relative;
  align-self: start;
  margin: 4px ${Object(c.h)()}px 0 0;

  & > input[type='checkbox'] {
    position: absolute;
    outline: none;
    margin: 0;
    opacity: 0;
    left: 0;
    top: 50%;
    transform: translateY(-50%);

    + label {
      box-sizing: border-box;
      display: block;
      position: relative;
      width: 100%;
      cursor: pointer;

      &::after {
        background: ${Object(s.a)({light:l.N0,dark:l.DN80})}
        background-size: 16px;
        border-radius: 3px;
        border-style: solid;
        border-width: 1px;
        border-color: ${Object(s.a)({light:l.N50,dark:l.DN90})}
        box-sizing: border-box;
        content: '';
        height: 16px;
        left: 50%;
        position: absolute;
        transition: border-color 0.2s ease-in-out;
        top: 8px;
        width: 16px;
        transform: translate(-50%, -50%);
      }
    }
    &:not([disabled]) + label:hover::after {
      background: ${Object(s.a)({light:l.N30,dark:l.B75})}
      transition: border 0.2s ease-in-out;
    }
    &[disabled] + label {
      opacity: 0.5;
      cursor: default;
    }
    &:checked {
      + label::after {
        background: url(data:image/svg+xml;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDEyIDEyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICA8cmVjdCB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHJ4PSIyIiBmaWxsPSIjMDA1MkNDIj48L3JlY3Q+DQogIDxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik05LjM3NCA0LjkxNEw1LjQ1NiA4LjgzMmEuNzY5Ljc2OSAwIDAgMS0xLjA4OCAwTDIuNjI2IDcuMDkxYS43NjkuNzY5IDAgMSAxIDEuMDg4LTEuMDg5TDQuOTEyIDcuMmwzLjM3NC0zLjM3NGEuNzY5Ljc2OSAwIDEgMSAxLjA4OCAxLjA4OCI+PC9wYXRoPg0KPC9zdmc+)
          no-repeat 0 0;
        background-size: 16px;
        border: 0;
        border-color: transparent;
        border-radius: 0; /* FS-1392 */
      }
      &:not([disabled]) + label:hover::after {
        background: url(data:image/svg+xml;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDEyIDEyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICA8cmVjdCB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHJ4PSIyIiBmaWxsPSIjMDc0N0E2Ij48L3JlY3Q+DQogIDxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik05LjM3NCA0LjkxNEw1LjQ1NiA4LjgzMmEuNzY5Ljc2OSAwIDAgMS0xLjA4OCAwTDIuNjI2IDcuMDkxYS43NjkuNzY5IDAgMSAxIDEuMDg4LTEuMDg5TDQuOTEyIDcuMmwzLjM3NC0zLjM3NGEuNzY5Ljc2OSAwIDEgMSAxLjA4OCAxLjA4OCI+PC9wYXRoPg0KPC9zdmc+)
          no-repeat 0 0;
        background-size: 16px;
      }
    }
  }
`;var u=n("jlYC"),p=n("lbXe"),h=n("Cmaw");const f=Object(h.a)("fabric-elements");let m=0;const b=e=>`${e}-${m++}`;class g extends r.PureComponent{constructor(e){super(e),this.handleOnChange=e=>{const{onChange:t,taskId:n,isDone:o,createAnalyticsEvent:r}=this.props,i=!o;t&&t(n,i);r&&f({action:i?"checked":"unchecked",actionSubject:"action",eventType:"ui",attributes:{localId:n}})(r)},this.checkBoxId=b(e.taskId)}UNSAFE_componentWillReceiveProps(e){e.taskId!==this.props.taskId&&(this.checkBoxId=b(e.taskId))}render(){const{appearance:e,isDone:t,contentRef:n,children:o,placeholder:r,showPlaceholder:a,disabled:s,dataAttributes:c}=this.props,l=i.a.createElement(d,{contentEditable:!1},i.a.createElement("input",{id:this.checkBoxId,name:this.checkBoxId,type:"checkbox",onChange:this.handleOnChange,checked:!!t,disabled:!!s,suppressHydrationWarning:!0}),i.a.createElement("label",{htmlFor:this.checkBoxId,suppressHydrationWarning:!0}));return i.a.createElement(u.a,{appearance:e,contentRef:n,icon:l,placeholder:r,showPlaceholder:a,itemType:"TASK",dataAttributes:c},o)}}g.defaultProps={appearance:"inline"};var v=Object(p.a)()(g),y=n("TBbV");n.d(t,"a",(function(){return O}));class O extends r.PureComponent{constructor(e){super(e),this.mounted=!1,this.onUpdate=e=>{this.setState({isDone:"DONE"===e})},this.handleOnChange=(e,t)=>{const{taskDecisionProvider:n,objectAri:o,onChange:r}=this.props;this.setState({isDone:t}),n&&o?n.then(n=>{this.mounted&&(n.toggleTask({localId:e,objectAri:o},t?"DONE":"TODO"),r&&r(e,t))}):r&&r(e,t)},this.state={isDone:e.isDone}}componentDidMount(){this.mounted=!0,this.subscribe(this.props.taskDecisionProvider,this.props.objectAri,this.props.isDone)}UNSAFE_componentWillReceiveProps(e){e.isDone!==this.props.isDone&&this.onUpdate(e.isDone?"DONE":"TODO"),e.taskDecisionProvider===this.props.taskDecisionProvider&&e.objectAri===this.props.objectAri||(this.unsubscribe(),this.subscribe(e.taskDecisionProvider,e.objectAri,e.isDone))}componentWillUnmount(){this.unsubscribe(),this.mounted=!1}subscribe(e,t,n){e&&t&&e.then(e=>{if(!this.mounted)return;const{taskId:r}=this.props,i={localId:r,objectAri:t},a=Object(o.a)(Object(o.a)({},i),{},{state:n?"DONE":"TODO",lastUpdateDate:new Date,type:"TASK"});e.subscribe({localId:r,objectAri:t},this.onUpdate,a)})}unsubscribe(){const{taskDecisionProvider:e,taskId:t,objectAri:n}=this.props;e&&n&&e.then(e=>{e.unsubscribe({localId:t,objectAri:n},this.onUpdate)})}render(){const{isDone:e}=this.state,{appearance:t,children:n,contentRef:o,objectAri:r,showPlaceholder:a,placeholder:s,taskId:c,disabled:l,dataAttributes:d}=this.props;return i.a.createElement(y.e,{data:{objectAri:r}},i.a.createElement(v,{isDone:e,taskId:c,onChange:this.handleOnChange,appearance:t,contentRef:o,showPlaceholder:a,placeholder:s,disabled:l,dataAttributes:d},n))}}O.defaultProps={appearance:"inline"}},"YKy/":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return b}));var o,r,i=n("Czhu"),a=n("ehfC"),s=n("fN3Q"),c=n.n(s),l=n("CP8u");!function(e){e.SHOW_INSERT_TOOLBAR="SHOW_INSERT_TOOLBAR",e.HIDE_TOOLBAR="HIDE_TOOLBAR",e.SELECTION_CHANGE="SELECTION_CHANGE",e.INSERT_LINK_TOOLBAR="INSERT",e.EDIT_INSERTED_TOOLBAR="EDIT_INSERTED_TOOLBAR"}(o||(o={})),function(e){e.EDIT_LINK_TOOLBAR="EDIT",e.INSERT_LINK_TOOLBAR="INSERT",e.EDIT_INSERTED_TOOLBAR="EDIT_INSERTED"}(r||(r={}));const d=(e,t)=>n=>{if(!n.doc.rangeHasMark(e,t,n.schema.marks.link)){const o=n.doc.resolve(e),r=n.doc.resolve(t),i=n.schema.marks.link;if(o.parent===r.parent&&o.parent.isTextblock&&o.parent.type.allowsMarkType(i)){let o=!0;return n.doc.nodesBetween(e,t,e=>(o=o&&!e.marks.some(e=>e.type.excludes(i)),o)),o}}return!1},u=(e,t)=>{if(e){if(e.type===r.EDIT_LINK_TOOLBAR||e.type===r.EDIT_INSERTED_TOOLBAR){const{pos:n,deleted:o}=t.mapping.mapResult(e.pos,1),r=t.doc.nodeAt(n);return!o&&r.type.schema.marks.link.isInSet(r.marks)?r===e.node&&n===e.pos?e:Object(i.a)(Object(i.a)({},e),{},{pos:n,node:r}):void 0}return e.type===r.INSERT_LINK_TOOLBAR?Object(i.a)(Object(i.a)({},e),{},{from:t.mapping.map(e.from),to:t.mapping.map(e.to)}):void 0}},p=(e,t,n)=>{if(!e)switch(t){case o.SHOW_INSERT_TOOLBAR:{const{from:e,to:t}=n.selection;return d(e,t)(n)?{type:r.INSERT_LINK_TOOLBAR,from:e,to:t}:void 0}case o.SELECTION_CHANGE:const e=h(n);return e?Object(i.a)(Object(i.a)({},e),{},{type:r.EDIT_LINK_TOOLBAR}):void 0;default:return}if(e.type===r.EDIT_LINK_TOOLBAR)switch(t){case o.EDIT_INSERTED_TOOLBAR:{const t=h(n);return t?t.pos===e.pos&&t.node===e.node?Object(i.a)(Object(i.a)({},e),{},{type:r.EDIT_INSERTED_TOOLBAR}):Object(i.a)(Object(i.a)({},t),{},{type:r.EDIT_INSERTED_TOOLBAR}):void 0}case o.SELECTION_CHANGE:const t=h(n);return t?t.pos===e.pos&&t.node===e.node?e:Object(i.a)(Object(i.a)({},t),{},{type:r.EDIT_LINK_TOOLBAR}):void 0;case o.HIDE_TOOLBAR:return;default:return e}if(e.type===r.INSERT_LINK_TOOLBAR)switch(t){case o.SELECTION_CHANGE:case o.HIDE_TOOLBAR:return;default:return e}},h=e=>{const{selection:{$from:t}}=e;if((e=>!!e.doc.type.schema.marks.link.isInSet(e.selection.$from.marks()))(e)||(e=>{const{$from:t,$to:n}=e.selection,o=t.nodeAfter;return!!o&&0===t.textOffset&&n.pos-t.pos===o.nodeSize&&!!e.doc.type.schema.marks.link.isInSet(o.marks)})(e)){const n=t.pos-t.textOffset,o=e.doc.nodeAt(n);return o&&o.isText?{node:o,pos:n}:void 0}},f=e=>{const t=e.content();if(0!==t.size)return 1===t.content.childCount&&t.content.firstChild&&e instanceof a.TextSelection?t.content.firstChild.textContent:void 0},m=new a.PluginKey("hyperlinkPlugin"),b=e=>new a.Plugin({state:{init(e,t){const n=d(t.selection.from,t.selection.to)(t);return{activeText:f(t.selection),canInsertLink:n,timesViewed:0,activeLinkMark:p(void 0,o.SELECTION_CHANGE,t)}},apply(t,n,r,a){let s=n;const h=t.getMeta(m)&&t.getMeta(m).type,b=t.getMeta(m)&&t.getMeta(m).inputMethod;if(t.docChanged&&(s={activeText:s.activeText,canInsertLink:d(a.selection.from,a.selection.to)(a),timesViewed:s.timesViewed,inputMethod:b,activeLinkMark:u(s.activeLinkMark,t)}),h){const e=[o.SHOW_INSERT_TOOLBAR,o.EDIT_INSERTED_TOOLBAR].includes(h)?{timesViewed:++s.timesViewed,searchSessionId:c()()}:{timesViewed:s.timesViewed,searchSessionId:s.searchSessionId};s=Object(i.a)({activeText:s.activeText,canInsertLink:s.canInsertLink,inputMethod:b,activeLinkMark:p(s.activeLinkMark,h,a)},e)}return t.selectionSet&&(s={activeText:f(a.selection),canInsertLink:d(a.selection.from,a.selection.to)(a),activeLinkMark:p(s.activeLinkMark,o.SELECTION_CHANGE,a),timesViewed:s.timesViewed,searchSessionId:s.searchSessionId,inputMethod:b}),Object(l.v)(s,n)||e(m,s),s}},key:m})},YdLh:function(e,t,n){"use strict";var o=n("T1Ll").unescapeAll;e.exports=function(e,t,n){var r,i,a=0,s=t,c={ok:!1,pos:0,lines:0,str:""};if(t>=n)return c;if(34!==(i=e.charCodeAt(t))&&39!==i&&40!==i)return c;for(t++,40===i&&(i=41);t<n;){if((r=e.charCodeAt(t))===i)return c.pos=t+1,c.lines=a,c.str=o(e.slice(s+1,t)),c.ok=!0,c;10===r?a++:92===r&&t+1<n&&(t++,10===e.charCodeAt(t)&&a++),t++}return c}},Yu3e:function(e,t){function n(e,t,n,o){var r,i=null==(r=o)||"number"==typeof r||"boolean"==typeof r?o:n(o),a=t.get(i);return void 0===a&&(a=e.call(this,o),t.set(i,a)),a}function o(e,t,n){var o=Array.prototype.slice.call(arguments,3),r=n(o),i=t.get(r);return void 0===i&&(i=e.apply(this,o),t.set(r,i)),i}function r(e,t,n,o,r){return n.bind(t,e,o,r)}function i(e,t){return r(e,this,1===e.length?n:o,t.cache.create(),t.serializer)}function a(){return JSON.stringify(arguments)}function s(){this.cache=Object.create(null)}s.prototype.has=function(e){return e in this.cache},s.prototype.get=function(e){return this.cache[e]},s.prototype.set=function(e,t){this.cache[e]=t};var c={create:function(){return new s}};e.exports=function(e,t){var n=t&&t.cache?t.cache:c,o=t&&t.serializer?t.serializer:a;return(t&&t.strategy?t.strategy:i)(e,{cache:n,serializer:o})},e.exports.strategies={variadic:function(e,t){return r(e,this,o,t.cache.create(),t.serializer)},monadic:function(e,t){return r(e,this,n,t.cache.create(),t.serializer)}}},"Z+h7":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const o=(e,t)=>{if(e===t)return!0;if(null==e||null==t)return!1;const n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;const r=Object.prototype.hasOwnProperty.bind(t);for(let i=0;i<n.length;i++){const o=n[i];if(!r(o))return!1;if(e[o]!==t[o])return!1}return!0},r=(e,t,n=o)=>{if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!n(e[o],t[o]))return!1;return!0};function i(e,t){let n;return e.descendants(e=>!n&&(!t(e)||(n=e,!1))),n}},Z0f3:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("ehfC"),r=n("icD4"),i=n("OiFN"),a=n("PZ9j");async function s(e){const t=e.state&&r.a.getState(e.state);t&&t.showContextPanel&&await new Promise(t=>{Object(i.b)(t)(e.state,e.dispatch)})}async function c(e){const t=e.state&&a.a.getState(e.state);return t&&t.waitForMediaUpload&&await t.waitForPendingTasks(),e.state.doc}function l(e){return(t,n)=>{let{tr:r}=t,i=!1;const a=e=>{const t=e.selection.toJSON();r.setSelection(o.Selection.fromJSON(r.doc,t)),e.steps.forEach(e=>{r.step(e)}),i=!0};return e.forEach(e=>e(t,a)),!(!n||!i)&&(n(r),!0)}}},ZJN8:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var o=n("AcaO"),r=n("qeFW");let i="";function a(e,t){const n=t.map(e=>e.customRegex||e.trigger).join("|");if(!n.length)return;const a=new RegExp(`(^|[.!?\\s${o.d}])(${n})$`),s=Object(o.a)(a,(t,n)=>{const o=r.a.getState(t),i=n[3]||n[2];if(!o.isAllowed||!i)return null;const a=e.mark("typeAheadQuery",{trigger:i}),{tr:s,selection:c}=t,l=c.$from.marks();return s.replaceSelectionWith(e.text(i,[a,...l]),!1)}),c=Object(o.c)("type-ahead",{rules:[s]});return i=c.key,c}},ZUNO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("D57K"),r=o.__importStar(n("ERkP")),i=o.__importDefault(n("KsTJ")),a=n("3IV/"),s={small:{height:"16px",width:"16px"},medium:{height:"24px",width:"24px"}},c=function(e){return e.size?"height: "+s[e.size].height+"; width: "+s[e.size].width+";":null};t.IconWrapper=i.default.span(l||(l=o.__makeTemplateObject(["\n  "," color: ",";\n  display: inline-block;\n  fill: ",";\n  flex-shrink: 0;\n  line-height: 1;\n\n  > svg {\n    "," max-height: 100%;\n    max-width: 100%;\n    overflow: hidden;\n    pointer-events: none;\n    vertical-align: bottom;\n  }\n  /* Stop-color doesn't properly apply in chrome when the inherited/current color changes.\n   * We have to initially set stop-color to inherit (either via DOM attribute or an initial CSS\n   * rule) and then override it with currentColor for the color changes to be picked up.\n   */\n  stop {\n    stop-color: currentColor;\n  }\n"],["\n  "," color: ",";\n  display: inline-block;\n  fill: ",";\n  flex-shrink: 0;\n  line-height: 1;\n\n  > svg {\n    "," max-height: 100%;\n    max-width: 100%;\n    overflow: hidden;\n    pointer-events: none;\n    vertical-align: bottom;\n  }\n  /* Stop-color doesn't properly apply in chrome when the inherited/current color changes.\n   * We have to initially set stop-color to inherit (either via DOM attribute or an initial CSS\n   * rule) and then override it with currentColor for the color changes to be picked up.\n   */\n  stop {\n    stop-color: currentColor;\n  }\n"])),c,(function(e){return e.primaryColor||"currentColor"}),(function(e){return e.secondaryColor||a.background}),c);var l,d=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(n,e),n.prototype.render=function(){var e=this.props,n=e.dangerouslySetGlyph,o=e.label,i=e.size;return r.default.createElement(t.IconWrapper,{size:i,"aria-label":o||void 0,role:o?"img":"presentation",dangerouslySetInnerHTML:n?{__html:n}:void 0})},n}(r.Component);t.default=d,t.size=Object.keys(s).reduce((function(e,t){var n;return Object.assign(e,((n={})[t]=t,n))}),{})},"ZvC/":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("KjAf");const r=()=>[Number(o.b.split(".")[0])+1,0,0].join(".")},a1BY:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var o=n("yguP");const r=(e,t)=>(e=e.setMeta(o.a,!0),!!t&&(t(e),!0)),i=(e,t)=>{t(e=e.setMeta(o.a,!1))}},aAmv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("ERkP"),r=n.n(o),i=n("Wun/"),a=n("5lAk");class s extends o.PureComponent{constructor(e){super(e),this.onMouseDown=()=>{const{onMouseDown:e}=this.props;e&&e()},this.onBlur=e=>{const{onBlur:t}=this.props;t&&t(e)},this.handleChange=()=>{const{onChange:e}=this.props;this.input&&this.setState({value:this.input.value}),e&&this.input&&e(this.input.value)},this.handleKeydown=e=>{const{onUndo:t,onRedo:n,onSubmit:o,onCancel:r}=this.props;13===e.keyCode&&o?(e.preventDefault(),o(this.input.value)):27===e.keyCode&&r?r(e):"function"==typeof t&&this.isUndoEvent(e)?(e.preventDefault(),t()):"function"==typeof n&&this.isRedoEvent(e)&&(e.preventDefault(),n()),this.props.onKeyDown&&this.props.onKeyDown(e)},this.handleRef=e=>{e instanceof HTMLInputElement?(this.input=e,this.props.autoFocus&&(this.focusTimeoutId=window.setTimeout(()=>this.focus()))):this.input=void 0},this.state={value:e.defaultValue||""}}UNSAFE_componentWillReceiveProps(e){e.defaultValue!==this.props.defaultValue&&this.setState({value:e.defaultValue})}componentWillUnmount(){window.clearTimeout(this.focusTimeoutId)}render(){const{placeholder:e,width:t,maxLength:n,testId:o,ariaLabel:a}=this.props,{value:s}=this.state;return r.a.createElement(i.a,{"data-testid":o||"",type:"text",placeholder:e,value:s,onChange:this.handleChange,onKeyDown:this.handleKeydown,onMouseDown:this.onMouseDown,onBlur:this.onBlur,innerRef:this.handleRef,width:t,maxLength:n,"aria-label":a})}focus(){const{input:e}=this;if(e){const t="object"==typeof this.props.autoFocus?this.props.autoFocus:{};e.focus(t)}}isUndoEvent(e){return 90===e.keyCode&&(a.a.mac&&e.metaKey&&!e.shiftKey||!a.a.mac&&e.ctrlKey)}isRedoEvent(e){return!a.a.mac&&e.ctrlKey&&89===e.keyCode||a.a.mac&&e.metaKey&&e.shiftKey&&90===e.keyCode||e.ctrlKey&&e.shiftKey&&90===e.keyCode}}},amtX:function(e,t,n){"use strict";var o=n("HbGN"),r=n("ERkP"),i=n.n(r),a=n("EFzz"),s=n("mAAO"),c=n("I17z"),l=n("g52X");function d(){}const u="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,p=i.a.forwardRef((function(e,t){let{mode:n,onMouseDown:a=d,onMouseUp:p=d}=e,h=Object(o.a)(e,["mode","onMouseDown","onMouseUp"]);const f=h.appearance||"default",m=h.spacing||"default",b=Boolean(h.shouldFitContainer),g=Boolean(h.isSelected),v=Object(l.a)(h),[y,O]=Object(r.useState)(!1),E=Object(r.useCallback)(e=>{a(e),u&&O(!0)},[a,O]),w=Object(r.useCallback)(e=>{p(e),u&&O(!1)},[p,O]),C=Object(r.useMemo)(()=>Object(c.b)({appearance:f,spacing:m,mode:n,isSelected:g,shouldFitContainer:b,isOnlySingleIcon:v}),[f,m,n,g,b,v]);return i.a.createElement(s.a,Object.assign({},h,{ref:t,buttonCss:C,"data-firefox-is-active":!!y||void 0,onMouseDown:E,onMouseUp:w}))})),h=i.a.memo(i.a.forwardRef((function(e,t){return i.a.createElement(a.a.Consumer,null,({mode:n})=>i.a.createElement(p,Object.assign({},e,{ref:t,mode:n})))})));h.displayName="Button",t.a=h},atAw:function(e,t,n){"use strict";e.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},bQC9:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var o=n("L21V");const r=Object(o.f)({addLink:{id:"fabric.editor.mediaAddLink",defaultMessage:"Add link",description:"Add link"},unableToOpenLink:{id:"fabric.editor.unableToOpenLink",defaultMessage:"Unable to open this link",description:"Unable to open this link"},unlink:{id:"fabric.editor.unlink",defaultMessage:"Unlink",description:"Removes the hyperlink but keeps your text."},editLink:{id:"fabric.editor.editLink",defaultMessage:"Edit link",description:"Edit the link, update display text"},placeholder:{id:"fabric.editor.hyperlinkToolbarPlaceholder",defaultMessage:"Paste link or search recently viewed",description:"Paste link or search recently viewed"},linkPlaceholder:{id:"fabric.editor.linkPlaceholder",defaultMessage:"Paste link",description:"Create a new link by pasting a URL."},linkAddress:{id:"fabric.editor.linkAddress",defaultMessage:"Link address",description:"Insert the address of the link"},invalidLink:{id:"fabric.editor.invalidLink",defaultMessage:"Please enter a valid link.",description:"Please enter a valid link."},emptyLink:{id:"fabric.editor.emptyLink",defaultMessage:"Please enter a link.",description:"Please enter a link."}});t.a=Object(o.f)({layoutFixedWidth:{id:"fabric.editor.layoutFixedWidth",defaultMessage:"Back to center",description:"Display your element (image, table, extension, etc) as standard width"},layoutWide:{id:"fabric.editor.layoutWide",defaultMessage:"Go wide",description:"Display your element (image, table, extension, etc) wider than normal"},layoutFullWidth:{id:"fabric.editor.layoutFullWidth",defaultMessage:"Go full width",description:"Display your element (image, table, extension, etc) as full width"},alignImageRight:{id:"fabric.editor.alignImageRight",defaultMessage:"Align right",description:"Aligns image to the right"},alignImageCenter:{id:"fabric.editor.alignImageCenter",defaultMessage:"Align center",description:"Aligns image to the center"},alignImageLeft:{id:"fabric.editor.alignImageLeft",defaultMessage:"Align left",description:"Aligns image to the left"},remove:{id:"fabric.editor.remove",defaultMessage:"Remove",description:"Delete the element (image, panel, table, etc.) from your document"},visit:{id:"fabric.editor.visit",defaultMessage:"Open link in a new window",description:"Open the link in a new window"},inviteToEditButtonTitle:{id:"fabric.editor.editMode.inviteToEditButton.title",defaultMessage:"Invite to edit",description:"Invite another user to edit the current document"},saveButton:{id:"fabric.editor.saveButton",defaultMessage:"Save",description:"Submit and save a comment or document"},cancelButton:{id:"fabric.editor.cancelButton",defaultMessage:"Cancel",description:"Discard the current comment or document"},taskList:{id:"fabric.editor.tooltip.taskList",defaultMessage:"an action item",description:"an action item in the Editor"},nestedExpand:{id:"fabric.editor.tooltip.nestedExpand",defaultMessage:"a nested expand",description:"expand node which is nested"},decisionList:{id:"fabric.editor.tooltip.decisionList",defaultMessage:"a decision list",description:"a list of decisions"},defaultBlockNode:{id:"fabric.editor.tooltip.defaultBlockNode",defaultMessage:"a block node",description:"a block node element"},panel:{id:"fabric.editor.tooltip.blockPanel",defaultMessage:"a panel",description:"Panel node in the Editor"},blockquote:{id:"fabric.editor.blockquote",defaultMessage:"a quote",description:"a quote node"},timeUpdated:{id:"fabric.editor.time.updated",defaultMessage:"Updated",description:"Time last updated"},timeViewed:{id:"fabric.editor.time.viewed",defaultMessage:"Viewed",description:"Time last viewed"},timeAgo:{id:"fabric.editor.time.ago",defaultMessage:"ago",description:"Some time ago"},copyToClipboard:{id:"fabric.editor.copyToClipboard",defaultMessage:"Copy",description:"Copy the whole content of the element to your clipboard"},copiedToClipboard:{id:"fabric.editor.copiedToClipboard",defaultMessage:"Copied!",description:"Copied the whole content of the element to clipboard"}})},bUrk:function(e,t){e.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},"bwR+":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("ERkP"),r=n.n(o),i=n("lb6e");class a extends r.a.PureComponent{constructor(){super(...arguments),this.state={Card:a.Card,MediaCardErrorBoundary:a.MediaCardErrorBoundary}}async componentDidMount(){if(!this.state.Card)try{const[e,t,o]=await Promise.all([Promise.all([n.e(7),n.e(54),n.e(115),n.e("@atlaskit-media-client~4134d62c")]).then(n.bind(null,"kGyc")),Promise.all([n.e("vendors~4134d62c"),n.e(2),n.e(9),n.e(11),n.e(48),n.e(60),n.e(115),n.e("@atlaskit-internal_Card~4134d62c")]).then(n.bind(null,"em5d")),n.e("@atlaskit-internal_MediaCardErrorBoundary~b0ab8eb5").then(n.bind(null,"mU6V"))]);a.Card=e.withMediaClient(t.Card,this.props.featureFlags),a.MediaCardErrorBoundary=o.default,this.setState({Card:a.Card,MediaCardErrorBoundary:a.MediaCardErrorBoundary})}catch(e){}}render(){const{dimensions:e,testId:t}=this.props,{Card:n,MediaCardErrorBoundary:o}=this.state;return n&&o?r.a.createElement(o,null,r.a.createElement(n,Object.assign({},this.props))):r.a.createElement(i.a,{testId:t,dimensions:e})}}a.displayName="AsyncCard"},"bxm/":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return g}));var o=n("L21V"),r=n("KsTJ"),i=n("qPpp"),a=n("3IV/"),s=n("w301"),c=n("BMbf");const l=Object(o.f)({collapseNode:{id:"fabric.editor.collapseNode",defaultMessage:"Collapse content",description:"Collapse the node"},expandDefaultTitle:{id:"fabric.editor.expandDefaultTitle",defaultMessage:"Click here to expand...",description:"Placeholder text for an expand node"},expandNode:{id:"fabric.editor.expandNode",defaultMessage:"Expand content",description:"Expand the node"},expandPlaceholderText:{id:"fabric.editor.expandPlaceholder",defaultMessage:"Give this expand a title...",description:"Placeholder text for an expand node title input field"}}),d=Object(c.h)()/2,u=Object(s.a)({light:"rgba(255, 255, 255, 0.6)",dark:"rgba(9, 10, 11, 0.29)"}),p=Object(s.a)({light:a.N40A,dark:a.DN50}),h=r.default.div`
  cursor: pointer;
  display: flex;
  color: ${Object(s.a)({light:a.N90,dark:"#d9dde3"})};
  border-radius: ${Object(c.h)()/2}px;
  width: 24px;
  height: 24px;

  &:hover {
    background: ${a.N30A};
  }

  svg {
    ${e=>e.expanded?"transform: rotate(90deg);":""}
    transition: transform 0.2s ${i.M};
  }
`,f=r.default.div`
  width: ${3*Object(c.h)()}px;
  height: ${3*Object(c.h)()}px;
`,m=r.css`
  border-width: 1px;
  border-style: solid;
  border-color: ${({expanded:e})=>e?p:"transparent"};
  border-radius: ${d}px;
  min-height: 25px;
  background: ${({expanded:e})=>e?u:"transparent"};
  margin: ${e=>`${Object(c.h)()/2/Object(c.f)()}rem ${"expand"===e["data-node-type"]?`-${i.Y}px`:"0"} 0`};

  transition: background 0.3s ${i.M},
    border-color 0.3s ${i.M};
  padding: ${c.h}px;

  &:hover {
    border: 1px solid ${Object(s.a)({light:a.N50A,dark:a.DN50})};
    background: ${u};
  }

  td > &:first-child {
    margin-top: 0;
  }
`,b=r.css`
  ${({expanded:e})=>r.css`
      padding-top: ${e?Object(c.h)():0}px;
      padding-right: ${Object(c.h)()}px;
      padding-left: ${4*Object(c.h)()-Object(c.h)()/2}px;
      display: table;
      display: flow-root;

      // The follow rules inside @supports block are added as a part of ED-8893
      // The fix is targeting mobile bridge on iOS 12 or below,
      // We should consider remove this fix when we no longer support iOS 12
      @supports not (display: flow-root) {
        width: 100%;
        box-sizing: border-box;
      }

      ${e?"":"\n        .expand-content-wrapper, .nestedExpand-content-wrapper {\n          /* We visually hide the content here to preserve the content during copy+paste */\n          width: 100%;\n          display: block;\n          height: 0;\n          overflow: hidden;\n          clip: rect(1px, 1px, 1px, 1px);\n          white-space: nowrap;\n          user-select: none;\n        }\n      "}
    `};
`,g={TitleInputStyles:r.css`
  outline: none;
  border: none;
  font-size: ${Object(c.f)()}px;
  line-height: ${i.t};
  font-weight: normal;
  color: ${Object(s.a)({light:a.N200A,dark:a.DN600})};
  background: transparent;
  display: flex;
  flex: 1;
  padding: 0 0 0 ${Object(c.h)()/2}px;
  width: 100%;

  &::placeholder {
    opacity: 0.6;
    color: ${Object(s.a)({light:a.N200A,dark:a.DN600})};
  }
`,TitleContainerStyles:r.css`
  padding: 0;
  display: flex;
  align-items: flex-start;
  background: none;
  border: none;
  font-size: ${Object(c.f)()}px;
  width: 100%;
  color: ${Object(s.a)({light:a.N300A,dark:a.DN600})};
  overflow: hidden;
  cursor: pointer;
  // Prevent browser selection being inside the title container
  user-select: none;

  /* TODO: Fix outline for keyboard navigation */
  &:focus {
    outline: 0;
  }
`,ContainerStyles:m,ContentStyles:b}},"c9+K":function(e,t,n){"use strict";function o(e){const{doc:t,schema:n}=e,{typeAheadQuery:o}=n.marks,{from:r,to:i}=e.selection;return function(e,t,n,o){let r={start:-1,end:-1};return t.nodesBetween(n,o,(t,n)=>{-1===r.start&&e.isInSet(t.marks)&&(r={start:n,end:n+Math.max(t.textContent.length,1)})}),r}(o,t,r-1,i)}n.d(t,"a",(function(){return o}))},cH8Y:function(e,t,n){"use strict";function o(e){return!(0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}n.d(t,"a",(function(){return o}))},cRXR:function(e,t,n){"use strict";var o,r,i,a;n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),function(e){e.NATIVE="mobileNative",e.HYBRID="mobileHybrid",e.WEB="web"}(o||(o={})),function(e){e.RENDERER="renderer",e.EDITOR="editor"}(r||(r={})),function(e){e.FIXED_WIDTH="fixedWidth",e.FULL_WIDTH="fullWidth"}(i||(i={})),function(e){e.LOADING="loading",e.TYPING="typing",e.CLICKING="clicking",e.PASTING="pasting"}(a||(a={}))},cU7i:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("a8dO"),a=n("amtX"),s=e=>r.a.createElement(a.a,Object.assign({},e,{style:{alignItems:"center"}})),c=n("KsTJ");n.d(t,"a",(function(){return d}));const l=c.default.div`
  display: flex;
  height: 100%;
`;class d extends r.a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{const{disabled:t,onClick:n,onItemClick:o,item:r}=this.props;!t&&n&&n(e),!t&&r&&o&&o(r)}}render(){const e=r.a.createElement(s,{appearance:"subtle","aria-haspopup":!0,testId:this.props.testId,className:this.props.className,href:this.props.href,"aria-label":this.props["aria-label"],iconAfter:this.props.iconAfter,iconBefore:this.props.iconBefore,isDisabled:this.props.disabled,isSelected:this.props.selected,onClick:this.handleClick,spacing:this.props.spacing||"default",target:this.props.target,shouldFitContainer:!0},this.props.children),t=this.props.hideTooltip?null:this.props.title;return this.props.title?r.a.createElement(i.a,{content:t,hideTooltipOnClick:!0,position:this.props.titlePosition},r.a.createElement(l,null,e)):e}}d.defaultProps={className:"",titlePosition:"top"}},cZYF:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("jyPs"),r=n("KWMf");const i=e=>{if(!Object(r.a)(e,"cell"))return;const t=e.$anchorCell.start(-1);return o.b.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},de4v:function(e,t,n){"use strict";var o=n("Czhu"),r=n("DA0Z"),i=n("I9T1"),a=n("RMGf"),s=n("ehfC"),c=n("UdmJ"),l=n("m23B"),d=n("CP8u"),u=n("3rZS"),p=n("TIUX"),h=n("UP2C"),f=n("4FMG"),m=n("tVIO"),b=n("F/mI"),g=n("eGvA"),v=n("F3Fu"),y=n("rq0r"),O=n("mOMa");const E={[O.b.JOIN_SIBLINGS]:(e,t,n,o)=>{const r=o.node(-1);if(!r.firstChild)return!1;const i=o.before(-1),a=o.after(-1),s=n.pos-1,c=n.pos,l=o.parent.content,d=r.content.cut(r.firstChild.nodeSize);return Object(p.d)(e,e=>e.doc.resolve(s),[[l,s],[d,c]],[[i,a]]),t&&t(e),!0},[O.b.JOIN_DESCENDANT_TO_PARENT]:(e,t,n,o)=>{const r=o.node(-2),i=o.node(-1);if(!i.firstChild||!i.lastChild)return!1;const a=o.before(-2),s=o.before(-1),c=n.after(),l=o.after(-2),d=o.after(-1),u=o.start(-2),h="bulletList"===i.lastChild.type.name||"orderedList"===i.lastChild.type.name,f=1===r.childCount&&!h,m=n.pos,b=c,g=u,v=o.parent.content,y=h?i.content.cut(i.firstChild.nodeSize,i.nodeSize-i.lastChild.nodeSize-2):i.content.cut(i.firstChild.nodeSize),O=i.lastChild.content;return Object(p.d)(e,e=>e.doc.resolve(m),h?[[v,m],[y,b],[O,g]]:[[v,m],[y,b]],[f?[a,l]:[s,d]]),t&&t(e),!0},[O.b.JOIN_TO_SIBLING_DESCENDANT]:(e,t,n,o,r)=>{if(!r)return!1;const i=o.node(-1);if(!i.firstChild||!i.lastChild)return!1;const a=o.parent,s=o.before(-1),c=r.after(),l=o.after(-1),d="bulletList"===i.lastChild.type.name||"orderedList"===i.lastChild.type.name,u=r.pos,h=c,f=n.pos-1,m=a.content,b=d?i.content.cut(i.firstChild.nodeSize,i.nodeSize-i.lastChild.nodeSize-2):i.content.cut(i.firstChild.nodeSize),g=i.lastChild.content;return Object(p.d)(e,e=>e.doc.resolve(u),d?[[m,u],[b,h],[g,f]]:[[m,u],[b,h]],[[s,l]]),t&&t(e),!0}},w=(e,t)=>{const{tr:n,selection:{$head:o}}=e,r=Object(p.k)(o);if(!Object(p.f)(e))return!1;const i=((e,t,n)=>{const{$pos:o,foundNode:r}=e,i=Object(y.e)(o),a=Object(y.f)(t),s=0===t.index(-1),c=Object(y.e)(t);if(!(r&&i&&a&&s&&c))return!1;if(Object(y.f)(o))return[O.b.JOIN_DESCENDANT_TO_PARENT,null];const l=o.parent.lastChild&&("orderedList"===o.parent.lastChild.type.name||"bulletList"===o.parent.lastChild.type.name),d=o.parent.lastChild&&"paragraph"===o.parent.lastChild.type.name;let u,h=n.doc.resolve(o.pos);do{let e=Object(p.k)(h);h=e.$pos,u=e.foundNode}while(u&&!h.parent.isTextblock);const f=Object(y.f)(h);return u&&l&&f?[O.b.JOIN_TO_SIBLING_DESCENDANT,h]:!!d&&[O.b.JOIN_SIBLINGS,null]})(r,o,n);if(!i)return!1;const{bulletList:a,orderedList:s}=e.schema.nodes,c=Object(l.findParentNodeOfType)([a,s])(n.selection);let d=f.c.FORMAT_LIST_BULLET;return c&&c.node.type===s&&(d=f.c.FORMAT_LIST_NUMBER),Object(m.a)(e,n,{action:f.a.LIST_ITEM_JOINED,actionSubject:f.b.LIST,actionSubjectId:d,eventType:f.d.TRACK,attributes:{inputMethod:f.e.KEYBOARD,direction:O.a.BACKWARD,scenario:i[0]}}),E[i[0]](n,t,r.$pos,o,i[1])},C={[O.b.JOIN_PARAGRAPH_WITH_LIST]:(e,t,n,o)=>{const r=n.parent,i=n.before(),a=n.after(),s=o.pos,c=r.content;return Object(p.d)(e,e=>e.doc.resolve(s),[[c,s]],[[i,a]]),t&&t(e),!0},[O.b.JOIN_SIBLINGS]:(e,t,n,o)=>{const r=n.parent,i=n.nodeAfter;if(!i)return!1;const a=n.before(),s=n.after(),c=o.end(-1),l=o.pos,d=c,u=i.content,h=r.content.cut(i.nodeSize);return Object(p.d)(e,e=>e.doc.resolve(l),[[u,l],[h,d]],[[a,s]]),t&&t(e),!0},[O.b.JOIN_DESCENDANT_TO_PARENT]:(e,t,n,o)=>{const r=n.parent,i=n.nodeAfter;if(!i||!i.lastChild)return!1;const a=i.firstChild;if(!a)return!1;const s=n.before(),c=n.pos,l=o.after(),d=n.after(),u=e.doc.resolve(n.pos+1).after(),h="bulletList"===i.lastChild.type.name||"orderedList"===i.lastChild.type.name,f=1===r.childCount&&!h,m=o.pos,b=l,g=n.pos,v=a.content,y=h?i.content.cut(a.nodeSize,i.nodeSize-i.lastChild.nodeSize-2):i.content.cut(a.nodeSize),O=i.lastChild.content;return Object(p.d)(e,e=>e.doc.resolve(m),h?[[v,m],[y,b],[O,g]]:[[v,m],[y,b]],[f?[s,d]:[c,u]]),t&&t(e),!0},[O.b.JOIN_PARENT_SIBLING_TO_PARENT_CHILD]:(e,t,n,o)=>{const r=n.parent;if(!r.firstChild||!r.lastChild)return!1;const i=n.before(),a=n.before(),s=n.after(),c="bulletList"===r.lastChild.type.name||"orderedList"===r.lastChild.type.name,l=o.pos,d=o.pos+1,u=a-2,h=r.firstChild.content,f=c?r.content.cut(r.firstChild.nodeSize,r.nodeSize-r.lastChild.nodeSize-2):r.content.cut(r.firstChild.nodeSize),m=r.lastChild.content;return Object(p.d)(e,e=>e.doc.resolve(l),c?[[h,l],[f,d],[m,u]]:[[h,l],[f,d]],[[i,s]]),t&&t(e),!0}};n.d(t,"c",(function(){return k})),n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return A})),n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return I})),n.d(t,"g",(function(){return $})),n.d(t,"f",(function(){return z})),n.d(t,"h",(function(){return F}));const T=(e,t)=>{const{$from:n}=e.selection,{listItem:o}=e.schema.nodes,r=Object(p.c)(n);if(!r||!r.nodeBefore||r.nodeBefore.type!==o)return!1;if(1===r.nodeBefore.childCount&&r.nodeBefore.firstChild.nodeSize<=2){const{tr:o}=e;return t&&t(o.delete(r.pos-r.nodeBefore.nodeSize,n.pos).scrollIntoView()),!0}return!1},S=(e,t)=>{const{$from:n}=e.selection,{paragraph:o,listItem:r,codeBlock:a,bulletList:s,orderedList:d}=e.schema.nodes,u=e.selection instanceof g.a,h=u?e.doc.resolve(n.pos+1):n;let f=Object(p.c)(h);if(!f)return!1;if(f.nodeBefore&&[s,d].indexOf(f.nodeBefore.type)>-1&&f.nodeAfter&&(f.nodeAfter.type===o||f.nodeAfter.type===a)){let a=f.doc.resolve(f.pos-1);for(;a.parent.type!==o;)a=e.doc.resolve(a.pos-1);let{tr:p}=e;if(u){const e=Object(l.findPositionOfNodeBefore)(p.selection);if("number"!=typeof e)return!1;const t=f.nodeBefore.copy(f.nodeBefore.content.append(i.Fragment.from(r.createChecked({},f.nodeAfter))));p.replaceWith(e,n.pos+f.nodeAfter.nodeSize,t)}else p=e.tr.step(new c.ReplaceAroundStep(a.pos,f.pos+f.nodeAfter.nodeSize,f.pos+1,f.pos+f.nodeAfter.nodeSize-1,e.tr.doc.slice(a.pos,f.pos),0,!0));let h=p.doc.resolve(p.mapping.map(f.pos+f.nodeAfter.nodeSize));return h.nodeBefore&&h.nodeAfter&&h.nodeBefore.type===h.nodeAfter.type&&[s,d].indexOf(h.nodeBefore.type)>-1&&(p=p.join(h.pos)),t&&t(p.scrollIntoView()),!0}return!1},k=(e,t)=>{const{selection:n}=e;if(n.empty){const{$from:r}=n,{listItem:a,codeBlock:s}=e.schema.nodes,c=r.node(r.depth),d=r.node(r.depth-1);if(d&&d.type===a){const r=Object(h.e)(d);if(Object(h.i)(c)&&!r)return j(f.e.KEYBOARD)(e,t);if(!Object(l.hasParentNodeOfType)(s)(n))return(o=a,function(e,t){const n=e.selection,r=n.$from,a=n.$to,s=n.node;if(s&&s.isBlock||r.depth<2||!r.sameParent(a))return!1;const c=r.node(-1);if(c.type!==o)return!1;if(c.content.content.length<=1&&0===r.parent.content.size&&0!==c.content.size){if(2===r.depth||r.node(-3).type!==o||r.index(-2)!==r.node(-2).childCount-1)return!1;if(t){let n=i.Fragment.empty;const a=r.index(-1)>0;for(let e=r.depth-(a?1:2);e>=r.depth-3;e--)n=i.Fragment.from(r.node(e).copy(n));n=n.append(i.Fragment.from(o.createAndFill()));const s=e.tr.replace(r.before(a?void 0:-1),r.after(-3),new i.Slice(n,a?3:2,2));s.setSelection(e.selection.constructor.near(s.doc.resolve(r.pos+(a?3:2)))),t(s.scrollIntoView())}return!0}const l=a.pos===r.end()?c.contentMatchAt(0).defaultType:void 0,d=e.tr.delete(r.pos,a.pos),u=l&&[void 0,{type:l}];return t&&t(d.split(r.pos,2,u).scrollIntoView()),!0})(e,t)}}var o;return!1},x=(e,t)=>r.c(w,Object(p.b)([p.f,p.g,y.b],r.c(T,j(f.e.KEYBOARD))),Object(p.b)([p.f,y.a],S))(e,t),A=(e,t)=>{const{tr:n,selection:{$head:o}}=e,r=Object(p.j)(o);if(!Object(p.e)(e))return!1;const i=((e,t)=>{const{$pos:n,foundNode:o}=e,r=t.parent,i=t.node(-1),a=Object(y.e)(t),s=Object(y.f)(t),c=i&&i.lastChild&&(i.lastChild===r||i.childCount>1&&i.child(i.childCount-2)===r&&("orderedList"===i.lastChild.type.name||"bulletList"===i.lastChild.type.name)),l=Object(y.e)(n),d=Object(y.f)(n);if(!(o&&a&&s&&c))return!1;if(!l&&d)return O.b.JOIN_PARAGRAPH_WITH_LIST;if(!l)return!1;const u=n.nodeAfter,p=n.node(-1),h=t.node(-2),f="listItem"===n.parent.type.name,m=u&&"listItem"===u.type.name,b=u&&m&&u.firstChild&&"paragraph"===u.firstChild.type.name;if(!f&&b)return O.b.JOIN_DESCENDANT_TO_PARENT;if(!f)return!1;const g=p&&p===h;return!(!u||"paragraph"!==u.type.name)&&(g?O.b.JOIN_SIBLINGS:O.b.JOIN_PARENT_SIBLING_TO_PARENT_CHILD)})(r,o);if(!i)return!1;const{bulletList:a,orderedList:s}=e.schema.nodes,c=Object(l.findParentNodeOfType)([a,s])(n.selection);let d=f.c.FORMAT_LIST_BULLET;return c&&c.node.type===s&&(d=f.c.FORMAT_LIST_NUMBER),Object(m.a)(e,n,{action:f.a.LIST_ITEM_JOINED,actionSubject:f.b.LIST,actionSubjectId:d,eventType:f.d.TRACK,attributes:{inputMethod:f.e.KEYBOARD,direction:O.a.FORWARD,scenario:i}}),C[i](n,t,r.$pos,o)};function j(e=f.e.KEYBOARD){return function(t,n){const{listItem:r}=t.schema.nodes,{$from:i,$to:s}=t.selection;if(Object(y.d)(t)){let c=i.blockRange(s,e=>e.childCount>0&&e.firstChild.type===r);if(!c)return!1;const u=N(t.selection.$from,t.schema.nodes),p=Object(l.findParentNodeOfTypeClosestToPos)(t.selection.$from,[t.schema.nodes.bulletList,t.schema.nodes.orderedList]);return Object(d.e)(Object(m.d)({action:f.a.INDENTED,actionSubject:f.b.LIST,actionSubjectId:B(p.node.type.name),eventType:f.d.TRACK,attributes:Object(o.a)(Object(o.a)({},_(t)),{},{inputMethod:e,indentDirection:b.a.OUTDENT})}),Object(m.d)({action:f.a.FORMATTED,actionSubject:f.b.TEXT,actionSubjectId:f.c.FORMAT_INDENT,eventType:f.d.TRACK,attributes:{inputMethod:e,previousIndentationLevel:u,newIndentLevel:u-1,direction:b.a.OUTDENT,indentType:b.b.LIST}}),function(e,t){return n=>(o,r)=>n(o,n=>{const i=o.doc.resolve(t.start),a=o.doc.resolve(t.end),s=n.doc.resolve(n.mapping.map(t.end-1));s.nodeBefore&&s.nodeAfter&&s.nodeBefore.type===s.nodeAfter.type&&a.nodeAfter&&a.nodeAfter.type===e&&a.parent.type===i.parent.type&&n.join(s.pos),r&&r(n.scrollIntoView())})}(r,c),a.a)(r)(t,n)}return!1}}function I(e=f.e.KEYBOARD){return function(t,n){const{listItem:r}=t.schema.nodes;if(Object(y.d)(t)){const i=N(t.selection.$from,t.schema.nodes),s=function(e,t){let n,o=t.tr.selection.$to.pos;do{const e=t.doc.resolve(o);if(n=N(e,t.schema.nodes),n>5)return!1;o++}while(n>=e);return!0}(i,t);let c=t.tr;const l=e=>{c=e};return s&&Object(d.e)(Object(m.d)({action:f.a.FORMATTED,actionSubject:f.b.TEXT,actionSubjectId:f.c.FORMAT_INDENT,eventType:f.d.TRACK,attributes:{inputMethod:e,previousIndentationLevel:i,newIndentLevel:i+1,direction:b.a.INDENT,indentType:b.b.LIST}}),a.b)(r)(t,l),Object(m.a)(t,c,{action:f.a.INDENTED,actionSubject:f.b.LIST,actionSubjectId:B("bulletList"),eventType:f.d.TRACK,attributes:Object(o.a)(Object(o.a)({},_(t)),{},{inputMethod:e,canSink:c.docChanged,indentDirection:b.a.INDENT})}),n&&n(c),!0}return!1}}function M(){return function(e,t){const{tr:n}=e,{$from:o,$to:r}=e.selection;return n.doc.nodesBetween(o.pos,r.pos,(t,o)=>{if(t.isTextblock){const t=new s.NodeSelection(n.doc.resolve(n.mapping.map(o))),r=t.$from.blockRange(t.$to);if(!r||t.$from.parent.type!==e.schema.nodes.listItem)return!1;const i=r&&Object(c.liftTarget)(r);if(null==i)return!1;n.lift(r,i)}}),t&&t(n),!0}}const N=(e,t)=>{const{bulletList:n,orderedList:o}=t;let r=0;for(let i=e.depth-1;i>0;i--){const t=e.node(i);t.type!==n&&t.type!==o||(r+=1)}return r},R=(e,t,n,o,r)=>{const{selection:i}=e,a=i.$from.node(i.$from.depth-2),s=i.$to.node(i.$to.depth-2);if(a&&a.type.name===o&&s&&s.type.name===o){const n=((e,t)=>{const{bulletList:n,orderedList:o,listItem:r}=t;let i;for(let a=e.depth-1;a>0;a--){const t=e.node(a);if(t.type!==n&&t.type!==o||(i=a),t.type!==n&&t.type!==o&&t.type!==r)break}return i})(i.$to,e.schema.nodes);let a=Object(v.a)(e,i.$to.pos,i.$to.end(n),n||0,e.tr);return a=Object(v.b)(e,a),a=Object(m.a)(e,a,{action:f.a.FORMATTED,actionSubject:f.b.TEXT,actionSubjectId:B(o),eventType:f.d.TRACK,attributes:{inputMethod:r}}),t(a),!0}return $(r,o)(e,t,n)};function P(e){return function(t,n,o){if(n&&n(t.tr.setSelection(function(e,t){let{$from:n,$to:o}=t;const r=n.pos===o.pos;let i=n.pos,a=o.pos;if(r&&i===e.nodeSize-3)return t;if(n.nodeBefore&&!r){i++;let t=e.nodeAt(i);for(;!t||t&&!t.isText;)i++,t=e.nodeAt(i)}return a===i?new s.TextSelection(e.resolve(i)):new s.TextSelection(e.resolve(i),e.resolve(a))}(t.doc,t.selection))),!o)return!1;t=o.state;const{doc:i,selection:{$from:c,$to:d}}=t,p=t.schema.nodes[e],h=Object(l.findParentNodeOfTypeClosestToPos)(i.resolve(c.pos),p),f=h&&d.pos<=h.pos+h.node.nodeSize;if(function(e,t){const{$from:n}=e.selection,o=n.node(-2),r=n.node(-3);return o&&o.type===e.schema.nodes[t]||r&&r.type===e.schema.nodes[t]}(t,e)&&f)return M()(t,n);{f||(M()(t,n),t=o.state);const e=Object(u.e)(t,p);return e&&n&&(n(e),t=o.state),(m=p,r.a(a.c(m),(e,t)=>e.type===t.type&&e.type===m))(t,n)}var m}}const L=(e,t)=>{const n=N(t,e.schema.nodes)-1,o=Object(l.findParentNodeOfTypeClosestToPos)(t,e.schema.nodes.listItem);return{indentLevel:n,itemIndex:t.index(o?o.depth-1:void 0)}},D=e=>{const{tr:t,schema:n}=e,{selection:o,doc:r,selection:{from:i,to:a,empty:c}}=t;if(c)return 1;const d=[];return o instanceof s.TextSelection&&o.$cursor?d.push(i):r.nodesBetween(i,a,(e,t)=>{if(!e.isLeaf)return!0;d.push(t)}),d.reduce((e,t)=>{const o=Object(l.findParentNodeClosestToPos)(r.resolve(t),e=>e.type===n.nodes.listItem);if(!o)return e;return e.find(e=>e.pos===o.pos&&e.start===o.start&&e.depth===o.depth)||e.push(o),e},[]),d.length},_=e=>{const{selection:{$from:t,$to:n}}=e.tr,o=L(e,t),r=L(e,n);return{itemIndexAtSelectionStart:o.itemIndex,itemIndexAtSelectionEnd:r.itemIndex,indentLevelAtSelectionStart:o.indentLevel,indentLevelAtSelectionEnd:r.indentLevel,itemsInSelection:D(e)}},B=e=>"bulletList"===e?f.c.FORMAT_LIST_BULLET:f.c.FORMAT_LIST_NUMBER,$=(e,t)=>(n,r,i)=>{if(i&&r){const a=Object(l.findParentNodeOfTypeClosestToPos)(n.selection.$from,[n.schema.nodes.bulletList,n.schema.nodes.orderedList]);return a&&r(Object(m.a)(n,i.state.tr,{action:f.a.CONVERTED,actionSubject:f.b.LIST,eventType:f.d.TRACK,actionSubjectId:B(t),attributes:Object(o.a)(Object(o.a)({},_(n)),{},{transformedFrom:B(a.node.type.name),inputMethod:e})})),P(t)(n,r,i)&&r(Object(m.a)(n,i.state.tr,{action:f.a.FORMATTED,actionSubject:f.b.TEXT,actionSubjectId:B(t),eventType:f.d.TRACK,attributes:{inputMethod:e}})),!0}return!1};function z(e,t=f.e.TOOLBAR){return R(e.state,e.dispatch,e,"bulletList",t)}function F(e,t=f.e.TOOLBAR){return R(e.state,e.dispatch,e,"orderedList",t)}},dmPu:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ERkP"),i=n.n(r),a=n("aWzz"),s=n.n(a),c=n("KsTJ"),l=n("L21V"),d=n("lSUb"),u=n("KjAf"),p=n("u55h"),h=n("GlNo"),f=n("kvU/"),m=n("tdsH"),b=n("F/E8");var g=n("pZ4U"),v=n("C0a2"),y=n("3yjy"),O=n("qPpp"),E=n("TBbV"),w=n("U6Bd"),C=n("QhI2"),T=n("uxUX"),S=n("lqNA"),k=n("BatE"),x=n("+2W5"),A=n("Tgh5"),j=n("uCVf");const I=c.css`
  .inline-node--mobile {
    display: inline-block !important;
  }
`;var M=n("UBtQ"),N=n("uTum"),R=n("Z8D1"),P=n("cX+u"),L=n("BIWu"),D=n("pWSx"),_=n("oPym"),B=n("fttP");const $=c.css`
  .ProseMirror .telepointer {
    position: relative;
    transition: opacity 200ms;

    &.telepointer-selection {
      line-height: 1.2;
      pointer-events: none;
      user-select: none;
    }

    &.telepointer-selection-badge::after {
      content: attr(data-initial);
      position: absolute;
      display: block;
      top: -14px;
      font-size: 9px;
      padding: 2px;
      color: white;
      left: -1px;
      border-radius: 2px 2px 2px 0;
      line-height: initial;
    }

    &.${_.b} {
      opacity: 0.2;
    }

    ${B.a.map((e,t)=>((e,t)=>`\n  &.color-${t} {\n    background-color: ${e.selection};\n    &::after {\n      background-color: ${e.solid};\n      color: #fff;\n      border-color: ${e.solid};\n    }\n  }\n`)(e,t))};
  }
`;var z=n("OSPm"),F=n("HL7A"),U=n("BMbf"),H=n("3IV/"),W=n("lEOu"),V=n("Jl7S"),K=n("VEgZ"),q=n("Vqim"),G=n("DAa0");const Y=e=>c.css`
  .${q.c.CONTROLS_INSERT_LINE} {
    background: ${G.o};
    display: none;
    position: absolute;
    z-index: ${O.W};
    ${e}
  }
`,X=c.css`
  background-color: ${G.l};
  position: absolute;
  height: ${G.g}px;
  width: ${G.g}px;
  border-radius: 50%;
  pointer-events: none;
`,J=e=>c.css`
  .${q.c.CONTROLS_INSERT_MARKER} {
    ${X};
    ${e}
  }
`,Z=e=>c.css`
  border-radius: ${Object(U.c)()}px;
  border-width: 0px;
  display: inline-flex;
  max-width: 100%;
  text-align: center;
  margin: 0px;
  padding: 0px;
  text-decoration: none;
  transition: background 0.1s ease-out 0s, box-shadow 0.15s cubic-bezier(0.47, 0.03, 0.49, 1.38) 0s;
  outline: none !important;
  cursor: none;

  > .${q.c.CONTROLS_BUTTON_ICON} {
    display: inline-flex;
    max-height: 100%;
    max-width: 100%;
  }
  ${e}
`,Q=()=>c.css`
  .${q.c.CONTROLS_INSERT_BUTTON_INNER} {
    position: absolute;
    z-index: ${O.W+10};
    bottom: 0;
  }
  .${q.c.CONTROLS_INSERT_BUTTON_INNER},
  .${q.c.CONTROLS_INSERT_BUTTON} {
    height: ${G.w}px;
    width: ${G.w}px;
  }
  .${q.c.CONTROLS_INSERT_BUTTON} {
    ${Z(`\n      background: white;\n      box-shadow: 0 4px 8px -2px ${H.N60A}, 0 0 1px ${H.N60A};\n      color: ${H.N300};\n    `)}
  }
  .${q.c.CONTROLS_INSERT_LINE} {
    display: none;
  }
  &:hover .${q.c.CONTROLS_INSERT_LINE} {
    display: flex;
  }
`,ee=()=>c.css`
  .${q.c.CONTROLS_INSERT_BUTTON}:hover {
    background: ${H.B300};
    color: white;
    cursor: pointer;
  }
`,te=c.css`
  ${Q()}
  ${ee()}
  ${Y("\n    width: 2px;\n    left: 9px;\n  ")}
`,ne=c.css`
  ${Q()}
  ${ee()}
  ${Y(`\n    height: 2px;\n    top: -11px;\n    left: ${G.w-1}px;\n  `)}
`,oe=c.css`
  .${q.c.TABLE_CONTAINER}.${q.c.WITH_CONTROLS} table tr:first-child td,
  .${q.c.TABLE_CONTAINER}.${q.c.WITH_CONTROLS} table tr:first-child th {
    position: relative;

    &::before {
      content: ' ';
      ${X};
      top: -${G.E+G.f}px;
      right: -${G.g/2}px;
    }
  }
`,re=c.css`
  .${q.c.CONTROLS_DELETE_BUTTON_WRAP},
  .${q.c.CONTROLS_DELETE_BUTTON} {
    height: ${G.u}px;
    width: ${G.u}px;
  }
  .${q.c.CONTROLS_DELETE_BUTTON_WRAP} {
    .${q.c.CONTROLS_DELETE_BUTTON} {
      ${Z(`\n        background: ${H.N20A};\n        color: ${H.N300};\n      `)}
    }
  }

  .${q.c.CONTROLS_DELETE_BUTTON}:hover {
    background: ${H.R300};
    color: white;
    cursor: pointer;
  }
`,ie=c.css`
.${q.c.TABLE_RIGHT_SHADOW},
.${q.c.TABLE_LEFT_SHADOW}{
  display: block;
  height: calc(100% - ${F.h+F.f+G.E-2}px);
  position: absolute;
  pointer-events: none;
  top: ${F.h+G.E-1}px;
  z-index: ${O.I};
  width: 8px;
}
.${q.c.TABLE_LEFT_SHADOW} {
  background: linear-gradient(
    to left,
    rgba(99, 114, 130, 0) 0,
    ${H.N40A} 100%
  );
  left: 0px;
}
.${q.c.TABLE_CONTAINER}[data-number-column='true'] > :not(.${q.c.TABLE_STICKY_SHADOW}).${q.c.TABLE_LEFT_SHADOW} {
  left: ${O.R-1}px;
}
.${q.c.TABLE_RIGHT_SHADOW} {
  background: linear-gradient(
    to right,
    rgba(99, 114, 130, 0) 0,
    ${H.N40A} 100%
  );
  left: calc(100% + 2px);
}
.${q.c.WITH_CONTROLS} {
  .${q.c.TABLE_RIGHT_SHADOW},
  .${q.c.TABLE_LEFT_SHADOW}{
    height: calc(100% - ${F.h+F.f-2}px);
    top: ${F.h-1}px;
  }
  .${q.c.TABLE_LEFT_SHADOW} {
    border-left: 1px solid ${G.l};
  }
}
.${q.c.WITH_CONTROLS}.${q.c.TABLE_STICKY} {
  .${q.c.TABLE_RIGHT_SHADOW},
  .${q.c.TABLE_LEFT_SHADOW} {
    top: ${G.s}px;
  }
}
`,ae=c.css`
  color: ${H.N0};
  background-color: ${G.D};
  border-color: ${G.o};
  z-index: ${G.b};
`,se=c.css`
  .${q.c.COLUMN_CONTROLS_DECORATIONS} {
    display: none;
    cursor: pointer;
    position: absolute;
    width: calc(100% + ${2*F.c}px);
    left: -1px;
    top: -${G.a+F.c}px;
    height: ${G.a}px;

    &::after {
      content: ' ';

      ${ce=`\n        border-right: ${F.c}px solid ${G.l};\n        border-bottom: none;\n        height: ${G.E}px;\n        width: 100%;\n        position: absolute;\n        top: ${G.a-G.E}px;\n        left: 0px;\n        z-index: ${G.c};\n      `,c.css`
  background: ${G.B};
  border: 1px solid ${G.l};
  display: block;
  box-sizing: border-box;
  padding: 0;

  :focus {
    outline: none;
  }

  ${ce}
`}
    }
  }

  .${q.c.WITH_CONTROLS} .${q.c.COLUMN_CONTROLS_DECORATIONS} {
    display: block;
  }

  table tr:first-child td.${q.c.TABLE_CELL},
  table tr:first-child th.${q.c.TABLE_HEADER_CELL} {
    &.${q.c.COLUMN_SELECTED},
    &.${q.c.HOVERED_COLUMN},
    &.${q.c.HOVERED_TABLE} {
      .${q.c.COLUMN_CONTROLS_DECORATIONS}::after {
        ${ae};
      }

      &.${q.c.HOVERED_CELL_IN_DANGER} .${q.c.COLUMN_CONTROLS_DECORATIONS}::after {
        background-color: ${G.C};
        border: 1px solid ${G.m};
        border-bottom: none;
        z-index: ${100*O.W};
      }
    }
  }

  .${q.c.TABLE_SELECTED} table tr:first-child td.${q.c.TABLE_CELL},
  .${q.c.TABLE_SELECTED} table tr:first-child th.${q.c.TABLE_HEADER_CELL} {
    .${q.c.COLUMN_CONTROLS_DECORATIONS}::after {
      ${ae};
    }
  }
`;var ce;const le=c.css`
  .${q.c.TABLE_CONTAINER}.${q.c.HOVERED_DELETE_BUTTON} {
    .${q.c.SELECTED_CELL},
    .${q.c.COLUMN_SELECTED},
    .${q.c.HOVERED_CELL} {
      border: 1px solid ${G.m};
    }
    .${q.c.SELECTED_CELL}::after {
      background: ${G.q};
    }
  }
`,de=c.css`
  :not(.${q.c.IS_RESIZING}) .${q.c.TABLE_CONTAINER}:not(.${q.c.HOVERED_DELETE_BUTTON}) {
    .${q.c.HOVERED_CELL} {
      position: relative;
      border: 1px solid ${G.o};
    }
  }
`,ue=c.css`
  :not(.${q.c.IS_RESIZING}) .${q.c.TABLE_CONTAINER}:not(.${q.c.HOVERED_DELETE_BUTTON}) {
    td.${q.c.HOVERED_CELL_WARNING} {
      background-color: ${H.Y50} !important; // We need to override the background-color added to the cell
      border: 1px solid ${H.Y200};
    }
  }
`,pe=c.css`
  .${q.c.TABLE_CONTAINER} {
    .${q.c.RESIZE_HANDLE_DECORATION} {
      background-color: transparent;
      position: absolute;
      width: ${G.h}px;
      height: 100%;
      top: 0;
      right: -${G.h/2}px;
      cursor: col-resize;
      z-index: ${G.i};
    }

    td.${q.c.WITH_RESIZE_LINE},
    th.${q.c.WITH_RESIZE_LINE} {
      .${q.c.RESIZE_HANDLE_DECORATION}::after {
        content: ' ';
        right: ${(G.h-G.j)/2}px;
        position: absolute;
        width: ${G.j}px;
        height: calc(100% + 1px);
        background-color: ${G.o};
        z-index: ${2*G.c};
        top: 0;
      }
    }

    table tr:first-child th.${q.c.WITH_RESIZE_LINE} .${q.c.RESIZE_HANDLE_DECORATION}::after,
    table tr:first-child td.${q.c.WITH_RESIZE_LINE} .${q.c.RESIZE_HANDLE_DECORATION}::after {
      top: -${G.E+F.c}px;
      height: calc(100% + ${G.E+F.c}px);
    }
  }
`,he=`\n.${q.c.NODEVIEW_WRAPPER}.${O.H} table tbody tr {\n  th,td {\n    ${Object(W.a)([V.a.Blanket,V.a.Border])}\n  }\n}\n`,fe=c.css`
  .${q.c.LAYOUT_BUTTON} button {
    background: ${H.N20A};
    color: ${H.N300};
    cursor: none;
  }

  .${q.c.LAYOUT_BUTTON}:not(.${q.c.IS_RESIZING}) button:hover {
    background: ${H.B300};
    color: white !important;
    cursor: pointer;
  }


  .ProseMirror {
    ${F.j};
    ${oe};
    ${le};
    ${de};
    ${ue};
    ${pe};
    ${he};

    .${q.c.LAST_ITEM_IN_CELL} {
      margin-bottom: 0;
    }

    .${q.c.TABLE_NODE_WRAPPER} {
      td.${q.c.TABLE_CELL},
      th.${q.c.TABLE_HEADER_CELL} {
        position: relative;
        overflow: visible;
      }

      td.${q.c.TABLE_CELL} {
        background-color: ${G.p};
      }
    }

    .${q.c.CONTROLS_FLOATING_BUTTON_COLUMN} {
      ${te}
    }

    .${q.c.CONTROLS_FLOATING_BUTTON_ROW} {
      ${ne}
    }

    /* Delete button*/
    ${re}
    /* Ends Delete button*/

    /* sticky styles */
    .${q.c.TABLE_STICKY} .${q.c.NUMBERED_COLUMN} .${q.c.NUMBERED_COLUMN_BUTTON}:first-child {
      margin-top: ${10}px;
      width: ${O.R}px;

      position: fixed !important;
      z-index: ${O.K} !important;

      box-shadow: 0px -8px white;
      border-right: 0 none;
      /* top set by NumberColumn component */
    }

    .${q.c.TABLE_STICKY} .${q.c.CORNER_CONTROLS}.sticky {
      position: fixed !important;
      /* needs to be above row controls */
      z-index: ${O.J} !important;
      background: white;

      width: ${G.E}px;
      height: ${G.E}px;
    }

    .${q.c.CORNER_CONTROLS}.sticky .${q.c.CONTROLS_CORNER_BUTTON} {
      border-bottom: 0px none;
      border-right: 0px none;

      height: ${G.E}px;
      width: ${G.E}px;
    }

    .${q.c.TABLE_STICKY} .${q.c.COLUMN_CONTROLS_DECORATIONS} {
      z-index: 0;
    }

    .${q.c.TABLE_STICKY} .${q.c.ROW_CONTROLS} .${q.c.ROW_CONTROLS_BUTTON_WRAP}.sticky {
      position: fixed !important;
      z-index: ${O.K} !important;
      display: flex;
      border-left: ${G.E}px solid white;
      margin-left: -${G.E}px;
    }

    .${q.c.TABLE_STICKY} col:first-of-type {
      /* moving rows out of a table layout does weird things in Chrome */
      border-right: 1px solid green;
    }

    tr.sticky {
      padding-top: 8px;
      position: fixed;
      display: grid;

      /* to keep it above cell selection */
      z-index: ${G.k};

      overflow-y: visible;
      overflow-x: hidden;

      grid-auto-flow: column;

      /* background for where controls apply */
      background: white;
      box-sizing: content-box;

      margin-top: 2px;

      box-shadow: 0 6px 4px -4px ${H.N40A};
      margin-left: -1px;
    }

    .${q.c.TABLE_STICKY} .${q.c.TABLE_STICKY_SHADOW} {
      left: unset;
      position: fixed;
      z-index: ${G.k+1};
    }

    .${q.c.WITH_CONTROLS}.${q.c.TABLE_STICKY} .${q.c.TABLE_STICKY_SHADOW} {
      padding-bottom: ${G.E}px;
    }

    tr.sticky th {
      border-bottom: 1px solid ${G.l};
      margin-right: -1px;
    }

    .${q.c.TABLE_STICKY} tr.sticky > th:last-child {
      border-right-width: 1px;
    }

    /* add left edge for first cell */
    .${q.c.TABLE_STICKY} tr.sticky > th:first-child {
      margin-left: 0px;
    }

    /* add a little bit so the scroll lines up with the table */
    .${q.c.TABLE_STICKY} tr.sticky::after {
      content: ' ';
      width: 1px;
    }

    /* To fix jumpiness caused in Chrome Browsers for sticky headers */
    .${q.c.TABLE_STICKY} .sticky + tr {
      min-height: 0px;
    }

    /* move resize line a little in sticky bar */
    .${q.c.TABLE_CONTAINER}.${q.c.TABLE_STICKY} {
      tr.sticky td.${q.c.WITH_RESIZE_LINE},
      tr.sticky th.${q.c.WITH_RESIZE_LINE} {
        .${q.c.RESIZE_HANDLE_DECORATION}::after {
          right: ${(G.h-G.j)/2+1}px;
        }
      }

      /* when selected put it back to normal -- :not selector would be nicer */
      tr.sticky td.${q.c.WITH_RESIZE_LINE}.${q.c.SELECTED_CELL},
      tr.sticky th.${q.c.WITH_RESIZE_LINE}.${q.c.SELECTED_CELL} {
        .${q.c.RESIZE_HANDLE_DECORATION}::after {
          right: ${(G.h-G.j)/2}px;
        }
      }
    }

    tr.sticky .${q.c.HOVERED_CELL},
    tr.sticky .${q.c.SELECTED_CELL} {
      z-index: 1;
    }

    .${q.c.WITH_CONTROLS} tr.sticky {
      padding-top: ${G.s}px;
    }

    .${q.c.WITH_CONTROLS}.${q.c.TABLE_STICKY} .${q.c.NUMBERED_COLUMN} .${q.c.NUMBERED_COLUMN_BUTTON}:first-child {
      margin-top: ${G.s+2}px;
    }

    .${q.c.CORNER_CONTROLS}.sticky {
      border-top: ${G.s-G.E+2}px solid white;
    }

    ${ie}
    .less-padding {
      padding: 0 ${G.y}px;

      .${q.c.ROW_CONTROLS_WRAPPER} {
        padding: 0 ${G.y}px;
      }

      &.${q.c.TABLE_CONTAINER}[data-number-column='true'] {
        padding-left: ${O.R+G.y-1}px;
      }

      .${q.c.TABLE_LEFT_SHADOW} {
        left: 6px;
      }

      .${q.c.TABLE_RIGHT_SHADOW} {
        left: calc(100% - 6px);
      }
    }

    > .${q.c.NODEVIEW_WRAPPER} {
      /**
       * Prevent margins collapsing, aids with placing the gap-cursor correctly
       * @see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Box_Model/Mastering_margin_collapsing
       *
       * TODO: Enable this, many tests will fail!
       * border-top: 1px solid transparent;
       */
    }

    /* Breakout only works on top level */
    > * .${q.c.NODEVIEW_WRAPPER} .${q.c.TABLE_CONTAINER} {
      margin-left: unset !important;
      width: 100% !important;
    }

    ${se};

    /* Corner controls */
    .${q.c.CORNER_CONTROLS} {
      width: ${G.E+1}px;
      height: ${G.E+1}px;
      display: none;

      .${q.c.CORNER_CONTROLS_INSERT_ROW_MARKER} {
        position: relative;

        ${J("\n          left: -11px;\n          top: 9px;\n        ")};
      }

      .${q.c.CORNER_CONTROLS_INSERT_COLUMN_MARKER} {
        position: relative;

        ${J("\n          right: -1px;\n          top: -12px;\n        ")};
      }
    }
    .${q.c.CORNER_CONTROLS}.sticky {
      .${q.c.CORNER_CONTROLS_INSERT_ROW_MARKER} {
        /* sticky row insert dot overlaps other row insert and messes things up */
        display: none !important;
      }
    }
    .${q.c.CONTROLS_CORNER_BUTTON} {
      position: absolute;
      top: 0;
      width: ${G.E+1}px;
      height: ${G.E+1}px;
      border: 1px solid ${G.l};
      border-radius: 0;
      border-top-left-radius: ${G.n}px;
      background: ${G.B};
      box-sizing: border-box;
      padding: 0;
      :focus {
        outline: none;
      }
    }
    .active .${q.c.CONTROLS_CORNER_BUTTON} {
      border-color: ${G.o};
      background: ${G.D};
    }
    .${q.c.TABLE_CONTAINER}[data-number-column='true'] {
      .${q.c.CORNER_CONTROLS},
      .${q.c.CONTROLS_CORNER_BUTTON} {
        width: ${O.U+O.R}px;
      }
      .${q.c.ROW_CONTROLS} .${q.c.CONTROLS_BUTTON} {
        border-right-width: 0;
      }
    }
    :not(.${q.c.IS_RESIZING}) .${q.c.CONTROLS_CORNER_BUTTON}:hover {
      border-color: ${G.o};
      background: ${G.D};
      cursor: pointer;
    }
    :not(.${q.c.IS_RESIZING}) .${q.c.CONTROLS_CORNER_BUTTON}.${q.c.HOVERED_CELL_IN_DANGER} {
      border-color: ${G.m};
      background: ${G.C};
    }

    /* Row controls */
    .${q.c.ROW_CONTROLS} {
      width: ${G.E}px;
      box-sizing: border-box;
      display: none;
      position: relative;

      ${J("\n        bottom: -1px;\n        left: -11px;\n      ")};

      .${q.c.ROW_CONTROLS_INNER} {
        display: flex;
        flex-direction: column;
      }
      .${q.c.ROW_CONTROLS_BUTTON_WRAP}:last-child > button {
        border-bottom-left-radius: ${G.n}px;
      }
      .${q.c.ROW_CONTROLS_BUTTON_WRAP} {
        position: relative;
        margin-top: -1px;
      }
      .${q.c.ROW_CONTROLS_BUTTON_WRAP}:hover,
      .${q.c.ROW_CONTROLS_BUTTON_WRAP}.active,
      .${q.c.CONTROLS_BUTTON}:hover {
        z-index: ${O.W};
      }

      ${(e=>c.css`
  .${q.c.CONTROLS_BUTTON} {
    background: ${G.B};
    border: 1px solid ${G.l};
    display: block;
    box-sizing: border-box;
    padding: 0;

    :focus {
      outline: none;
    }
    ${e}
  }

  .${q.c.ROW_CONTROLS_BUTTON}::after {
    content: ' ';
    background-color: transparent;
    left: -15px;
    top: 0;
    position: absolute;
    width: 15px;
    height: 100%;
    z-index: 1;
  }

  .active .${q.c.CONTROLS_BUTTON} {
    color: ${H.N0};
    background-color: ${G.D};
    border-color: ${G.o};
  }
`)(`\n        border-bottom: 1px solid ${G.l};\n        border-right: 0px;\n        border-radius: 0;\n        height: 100%;\n        width: ${G.E}px;\n\n        .${q.c.CONTROLS_BUTTON_OVERLAY} {\n          position: absolute;\n          width: 30px;\n          height: 50%;\n          right: 0;\n          bottom: 0;\n        }\n        .${q.c.CONTROLS_BUTTON_OVERLAY}:first-child {\n          top: 0;\n        }\n      `)}
    }
    :not(.${q.c.IS_RESIZING}) .${q.c.ROW_CONTROLS} {
      ${c.css`
  .${q.c.CONTROLS_BUTTON}:hover {
    color: ${H.N0};
    background-color: ${G.D};
    border-color: ${G.o};
    cursor: pointer;
  }
`}
      ${c.css`
  .${q.c.HOVERED_CELL_IN_DANGER} .${q.c.CONTROLS_BUTTON} {
    background-color: ${G.C};
    border-color: ${G.m};
    position: relative;
    z-index: ${O.W};
  }
`}
    }

    /* Numbered column */
    .${q.c.NUMBERED_COLUMN} {
      position: relative;
      float: right;
      margin-left: ${O.U-1}px;
      top: ${O.U}px;
      width: ${O.R+1}px;
      box-sizing: border-box;
    }
    .${q.c.NUMBERED_COLUMN_BUTTON} {
      border: 1px solid ${G.l};
      box-sizing: border-box;
      margin-top: -1px;
      padding-bottom: 2px;
      padding: 10px 2px;
      text-align: center;
      font-size: ${Object(U.f)()}px;
      background-color: ${G.B};
      color: ${G.A};
      border-color: ${G.l};

      :first-child {
        margin-top: 0;
      }
      :last-child {
        border-bottom: 1px solid ${G.l};
      }
    }
    .${q.c.WITH_CONTROLS} {
      .${q.c.CORNER_CONTROLS},
      .${q.c.ROW_CONTROLS} {
        display: block;
      }
      .${q.c.NUMBERED_COLUMN} {
        padding-left: 1px;
         .${q.c.NUMBERED_COLUMN_BUTTON} {
          border-left: 0 none;
        }

        .${q.c.NUMBERED_COLUMN_BUTTON}.active {
          border-bottom: 1px solid ${G.o};
          border-color: ${G.o};
          background-color: ${G.D};
          position: relative;
          z-index: ${O.W};
          color: ${H.N0};
        }
      }
    }
    :not(.${q.c.IS_RESIZING}) .${q.c.WITH_CONTROLS} {
      .${q.c.NUMBERED_COLUMN_BUTTON} {
        cursor: pointer;
      }
      .${q.c.NUMBERED_COLUMN_BUTTON}:hover {
        border-bottom: 1px solid ${G.o};
        border-color: ${G.o};
        background-color: ${G.D};
        position: relative;
        z-index: ${O.W};
        color: ${H.N0};
      }
      .${q.c.NUMBERED_COLUMN_BUTTON}.${q.c.HOVERED_CELL_IN_DANGER} {
        background-color: ${G.C};
        border: 1px solid ${G.m};
        border-left: 0;
        color: ${H.R500};
        position: relative;
        z-index: ${O.W};
      }
    }

    /* Table */
    .${q.c.TABLE_NODE_WRAPPER} > table {
      table-layout: fixed;

      .${q.c.COLUMN_CONTROLS_DECORATIONS} + * {
        margin-top: 0;
      }

      .${q.c.SELECTED_CELL},
      .${q.c.HOVERED_CELL_IN_DANGER} {
        position: relative;
      }
      /* Give selected cells a blue overlay */
      .${q.c.SELECTED_CELL}::after,
      .${q.c.HOVERED_CELL_IN_DANGER}::after {
        z-index: ${O.J};
        position: absolute;
        content: '';
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        opacity: 0.3;
        pointer-events: none;
      }
      .${q.c.SELECTED_CELL} {
        border: 1px solid ${G.o};
      }
      .${q.c.SELECTED_CELL}::after {
        background: ${G.r};
      }
      th.${q.c.HOVERED_CELL_IN_DANGER}::after, td.${q.c.HOVERED_CELL_IN_DANGER}::after {
        background: ${G.q};
      }
    }
    .${q.c.ROW_CONTROLS_WRAPPER} {
      position: absolute;
      top: ${F.h-1}px;
    }
    .${q.c.ROW_CONTROLS_WRAPPER}.${q.c.TABLE_LEFT_SHADOW} {
      z-index: ${O.W};
    }
    .${q.c.ROW_CONTROLS_WRAPPER} {
      left: -${G.E}px;
    }
    .${q.c.TABLE_NODE_WRAPPER} {
      padding-right: ${G.w/2}px;
      margin-right: -${G.w/2}px;
      padding-top: ${G.w/2}px;
      margin-top: -${G.w/2}px;
      padding-bottom: ${G.z}px;
      margin-bottom: -${G.z}px;
      /* fixes gap cursor height */
      overflow: auto;
      position: relative;
    }
  }

  .ProseMirror.${q.c.IS_RESIZING} {
    .${q.c.TABLE_NODE_WRAPPER} {
      overflow-x: auto;
      ${K.l};
    }
  }

  .ProseMirror.${q.c.RESIZE_CURSOR} {
    cursor: col-resize;
  }

`,me=c.css`
  .ProseMirror .${q.c.TABLE_NODE_WRAPPER} > table {
    margin-left: 0;
    margin-right: 0;
    width: 100%;
  }
`,be=c.css`
  .ProseMirror .${q.c.TABLE_NODE_WRAPPER} > table {
    margin-left: 0;
    margin-right: 0;
    ${K.l};
  }
`;var ge=n("6hpg"),ve=n("EPjx"),ye=n("t1jd");const Oe=c.css`
  .ProseMirror {
    ${ve.a};
    ${ye.a};
  }
`;var Ee=n("w301"),we=n("QOuT");const Ce=c.css`
  .ProseMirror .code-block {
    background: ${Object(Ee.a)({light:H.N20,dark:H.DN50})};
    font-family: ${O.f};
    border-radius: ${Object(U.c)()}px;
    font-size: 14px;
    line-height: 24px;
    margin: ${O.ab} 0 0 0;
    counter-reset: line;
    display: flex;
    min-width: ${O.P}px;
    cursor: pointer;

    .${we.a.gutter} {
      background-color: ${Object(Ee.a)({light:"rgba(9, 30, 66, 0.04)",dark:H.DN40})};
      color: ${H.N300};
      text-align: right;
      user-select: none;
      padding: ${O.e} 8px;
      border-radius: ${Object(U.c)()}px;
      font-size: 12px;
      line-height: 24px;

      span {
        display: block;

        &::before {
          counter-increment: line;
          content: counter(line);
          display: inline-block;
        }
      }
    }

    .${we.a.content} {
      color: ${Object(Ee.a)({light:H.N800,dark:H.DN500})};
      border-radius: ${Object(U.c)()}px;
      padding: ${O.e} 16px;
      overflow: auto;
      display: flex;
      flex: 1;

      pre {
        width: 100%;
        cursor: text;
      }

      code {
        display: inline-block;
        min-width: 100%;
        tab-size: 4;
      }
    }

    /* We render this as a basic box in IE11 because it can't handle scrolling */
    &.ie11 {
      display: block;
      .${we.a.gutter} {
        display: none;
      }
      .${we.a.content} {
        display: block;
        overflow: visible;

        pre {
          width: auto;
        }
        code {
          display: inline;
        }
      }
    }
  }

  .ProseMirror li > .code-block {
    margin: 0;
  }

  .ProseMirror .code-block.${O.H}:not(.danger) {
    ${Object(W.a)([V.a.BoxShadow,V.a.Blanket])}
  }

  /* Danger when top level node */
  .ProseMirror .danger.code-block {
    box-shadow: 0 0 0 ${O.F}px ${O.j};

    .${we.a.gutter} {
      background-color: ${H.R75};
      color: ${O.k};
    }

    .${we.a.content} {
      background-color: ${O.h};
    }
  }

  /* Danger when nested node */
  .ProseMirror .danger .code-block {
    .${we.a.gutter} {
      background-color: rgba(255, 143, 115, 0.5);
      color: ${O.k};
    }

    .${we.a.content} {
      background-color: rgba(255, 189, 173, 0.5);
    }
  }
`,Te=c.css`
  .ProseMirror li {
    position: relative;

    > p:not(:first-child) {
      margin: 4px 0 0 0;
    }
  }
`;var Se=n("TZT4");const ke=c.css`
  .ProseMirror {
    ${Se.a};

    hr {
      cursor: pointer;
      padding: 4px 0;
      margin: calc(${O.t}em - 4px) 0;
      background-clip: content-box;

      &.${O.H} {
        outline: none;
        background-color: ${O.E};
      }
    }
  }
`;var xe=n("DM95"),Ae=n("asyg");const je=c.css`
  .ProseMirror {
    ${xe.a} & [layout='full-width'] .${xe.b},
    & [layout='wide'] .${xe.b} {
      margin-left: 50%;
      transform: translateX(-50%);
    }

    & [layout^='wrap-'] + [layout^='wrap-'] {
      clear: none;
      & + p,
      & + div[class^='fabric-editor-align'],
      & + ul,
      & + ol,
      & + h1,
      & + h2,
      & + h3,
      & + h4,
      & + h5,
      & + h6 {
        clear: both !important;
      }
      & .${xe.b} {
        margin-left: 0;
        margin-right: 0;
      }
    }

    .mediaSingleView-content-wrap[layout^='wrap-'] {
      max-width: 100%;
      // overwrite default Prosemirror setting making it clear: both
      clear: inherit;
    }

    .mediaSingleView-content-wrap[layout='wrap-left'] {
      float: left;
    }

    .mediaSingleView-content-wrap[layout='wrap-right'] {
      float: right;
    }

    .mediaSingleView-content-wrap[layout='wrap-right']
      + .mediaSingleView-content-wrap[layout='wrap-left'] {
      clear: both;
    }

    /* Larger margins for resize handlers when at depth 0 of the document */
    & > .mediaSingleView-content-wrap {
      .richMedia-resize-handle-right {
        margin-right: -${O.v}px;
      }
      .richMedia-resize-handle-left {
        margin-left: -${O.v}px;
      }
    }
  }

  .richMedia-resize-handle-right,
  .richMedia-resize-handle-left {
    display: flex;
    flex-direction: column;

    /* vertical align */
    justify-content: center;
  }

  .richMedia-resize-handle-right {
    align-items: flex-end;
    padding-right: 12px;
    margin-right: -${O.u}px;
  }

  .richMedia-resize-handle-left {
    align-items: flex-start;
    padding-left: 12px;
    margin-left: -${O.u}px;
  }

  .richMedia-resize-handle-right::after,
  .richMedia-resize-handle-left::after {
    content: ' ';
    display: flex;
    width: 3px;
    height: 64px;

    border-radius: 6px;
  }

  .${xe.b}:hover .richMedia-resize-handle-left::after,
  .${xe.b}:hover .richMedia-resize-handle-right::after {
    background: ${H.N60};
  }

  .${O.H} .richMedia-resize-handle-right::after,
  .${O.H} .richMedia-resize-handle-left::after,
  .${xe.b} .richMedia-resize-handle-right:hover::after,
  .${xe.b} .richMedia-resize-handle-left:hover::after,
  .${xe.b}.is-resizing .richMedia-resize-handle-right::after,
  .${xe.b}.is-resizing .richMedia-resize-handle-left::after {
    background: ${H.B200};
  }

  .__resizable_base__ {
    left: unset !important;
    width: auto !important;
    height: auto !important;
  }

  /* Danger when top level node for smart cards / inline links */
  .danger > div > div > .media-card-frame,
  .danger > span > a {
    background-color: ${O.h};
    box-shadow: 0px 0px 0px ${O.D}px
      ${O.j};
    transition: background-color 0s;
    transition: box-shadow 0s;
  }

  /* Danger when nested node or common */
  .danger {
    /* Media single */
    .${xe.b} .${Ae.b}::after {
      border: ${O.D}px solid ${O.j};
    }

    .richMedia-selected .richMedia-resize-handle-right::after,
    .richMedia-selected .richMedia-resize-handle-left::after {
      background: ${O.j};
    }

    /* Smart cards */
    div div .media-card-frame,
    .inlineCardView-content-wrap > span > a {
      background-color: rgb(255, 189, 173, 0.5); /* R75 with 50% opactiy */
      transition: background-color 0s;
    }

    div div .media-card-frame::after {
      box-shadow: none;
    }
  }
`;var Ie=n("U6fo"),Me=n("idvw");const Ne=c.css`
  .ProseMirror {
    .${Me.a.prefix} {
      cursor: pointer;

      /* Danger when top level node */
      &.danger {
        box-shadow: 0 0 0 ${O.F}px
          ${O.j};
        background-color: ${O.h} !important;

        .${Me.a.icon} {
          color: ${O.k} !important;
        }
      }
    }

    .${Me.a.content} {
      cursor: text;
    }

    /* Danger when nested node */
    .danger .${Me.a.prefix} {
      &[data-panel-type] {
        background-color: ${O.i};

        .${Me.a.icon} {
          color: ${O.k};
        }
      }
    }

    ${Me.c};
  }

  .${Me.a.prefix}.${O.H}:not(.danger) {
    ${Object(W.a)([V.a.BoxShadow,V.a.Blanket])}
  }
`,Re=c.css`
  .ProseMirror {
    .ProseMirror-fake-text-cursor {
      display: inline;
      pointer-events: none;
      position: relative;
    }

    .ProseMirror-fake-text-cursor::after {
      content: '';
      display: inline;
      top: 0;
      position: absolute;
      border-right: 1px solid rgba(0, 0, 0, 0.4);
    }

    .ProseMirror-fake-text-selection {
      display: inline;
      pointer-events: none;
      position: relative;
      background-color: ${H.B75};
    }
  }
`,Pe="mentionView-content-wrap",Le=c.css`
  .${Pe} {
    &.${O.H} [data-mention-id] > span {
      ${Object(W.a)([V.a.BoxShadow,V.a.Background])}

      /* need to specify dark text colour because personal mentions
         (in dark blue) have white text by default */
      color: ${H.N500};
    }
  }

  .danger {
    .${Pe}.${O.H}
      > span
      > span {
      box-shadow: 0 0 0 ${O.F}px ${O.j};
      background-color: ${O.i};
    }
    .${Pe} > span > span {
      background-color: ${H.N30A};
      color: ${H.N500};
    }
  }
`;var De=n("fCxE");const _e="emojiView-content-wrap",Be=De.q,$e=De.u,ze=De.p,Fe=c.css`
  .${_e} {
    .${Be} {
      cursor: pointer;

      &.${ze} > span {
        /** needed for selection style to cover custom emoji image properly */
        display: flex;
      }
    }

    &.${O.H} {
      .${$e},
        .${ze}
        > span {
        border-radius: 2px;
        ${Object(W.a)([V.a.Blanket,V.a.BoxShadow])}
      }
    }
  }
`;var Ue=n("icXN");const He=c.css`
  ${Ue.a}
`,We=c.css`
  .ProseMirror span[data-placeholder] {
    color: ${H.N300};
  }
`;var Ve=n("Av0W");const Ke=c.css`
  a.blockLink {
    display: block;
  }
`,qe=c.css`
  .ProseMirror {
    ${Ke}
  }
`,Ge=c.css`
  .extensionView-content-wrap,
  .bodiedExtensionView-content-wrap {
    margin: ${O.ab} 0;

    &:first-of-type {
      margin-top: 0;
    }

    &:last-of-type {
      margin-bottom: 0;
    }

    &:not(.danger).${O.H} {
      & > span > .extension-container {
        ${Object(W.a)([V.a.BoxShadow,V.a.Blanket])}
      }
    }

    &.danger > span > .extension-container {
      box-shadow: 0 0 0 ${O.F}px ${O.j};
      background-color: ${O.h};
    }
  }

  .extensionView-content-wrap .extension-container {
    overflow: hidden;
  }
`;var Ye=n("bxm/"),Xe=n("saIY"),Je=n("E40X");const Ze=Object(Ee.a)({light:"rgba(255, 255, 255, 0.6)",dark:"rgba(9, 10, 11, 0.29)"}),Qe=c.css`
  color: ${Object(Ee.a)({light:H.N80A,dark:"#d9dde3"})};
`,et=Object(Ee.a)({dark:"#0C294F"}),tt=Object(Ee.a)({dark:"1px solid #4794ff"}),nt=Object(Ee.a)({dark:"3px"}),ot=Object(Ee.a)({light:H.R50,dark:"#441C13"}),rt=Object(Ee.a)({dark:"1px solid "+H.R200}),it=Object(Ee.a)({light:H.R300}),at=Object(Ee.a)({dark:"3px"}),st=c.css`
  .${Je.a.icon} > div {
    display: flex;
  }

  .${Je.a.prefix} {
    ${Ye.d.ContainerStyles}
    overflow: hidden;
    cursor: pointer;
    box-sizing: border-box;

    td > & {
      margin-top: 0;
    }

    .${Je.a.iconContainer} svg {
      ${Qe};
      transform: rotate(90deg);
    }

    &.${O.H}:not(.danger) {
      ${Object(W.a)([V.a.Blanket,V.a.Border])}

      ::after {
        // Custom background color and borders (for dark theme).
        background-color: ${et};
        border: ${tt};
        border-radius: ${nt};
      }
    }

    &.danger {
      background: ${ot};
      border: ${rt};
      border-color: ${it};
      border-radius: ${at};
    }
  }

  .ProseMirror
    > .${Je.a.type("expand")},
    .${Xe.a.BREAKOUT_MARK_DOM}
    > .${Je.a.type("expand")} {
    margin-left: -${O.Y}px;
    margin-right: -${O.Y}px;
  }

  .${Je.a.content} {
    ${Ye.d.ContentStyles}
    cursor: text;
    padding-top: 0px;
  }

  .${Je.a.titleInput} {
    ${Ye.d.TitleInputStyles}
  }

  .${Je.a.titleContainer} {
    ${Ye.d.TitleContainerStyles};
    overflow: visible;
  }

  .${Je.a.expanded} {
    background: ${Ze};
    border-color: ${Object(Ee.a)({light:H.N40A,dark:H.DN50})};

    .${Je.a.content} {
      padding-top: ${U.h}px;
    }
  }

  .${Je.a.inputContainer} {
    width: 100%;
  }

  .${Je.a.prefix}:(.${Je.a.expanded}) {
    .expand-content-wrapper {
      height: auto;
    }
  }

  .${Je.a.prefix}:not(.${Je.a.expanded}) {
    .ak-editor-expand__content {
      position: absolute;
      height: 1px;
      width: 1px;
      overflow: hidden;
      clip: rect(1px, 1px, 1px, 1px);
      white-space: nowrap;
    }

    .${Je.a.iconContainer} svg {
      ${Qe};
      transform: rotate(0deg);
    }

    &:not(.${O.H}):not(.danger) {
      background: transparent;
      border-color: transparent;

      &:hover {
        border-color: ${Object(Ee.a)({light:H.N50A,dark:H.DN50})};
        background: ${Ze};
      }
    }
  }
`;var ct=n("P4jJ"),lt=n("WwDD");const dt=c.css`
  [data-decision-wrapper] {
    cursor: pointer;
  }

  .${O.H} > [data-decision-wrapper],
  ol[data-node-type='decisionList'].${O.H} {
    border-radius: 4px;
    ${Object(W.a)([V.a.BoxShadow,V.a.Blanket])}
  }

  .danger {
    .${M.a.DECISION_CONTAINER}.${O.H}
      > div {
      box-shadow: 0 0 0 ${O.F}px ${O.j};
      background-color: ${O.i};
      &::after {
        content: none; /* reset the Blanket selection style */
      }
    }
  }
`,ut="statusView-content-wrap",pt="status-lozenge-span",ht=c.css`
  .${ut} {
    > span {
      display: inline-block;
      cursor: pointer;
      line-height: 0; /* Prevent responsive layouts increasing height of container. */
    }

    &.${O.H}
      .${pt}
      > span {
      ${Object(W.a)([V.a.BoxShadow])}
    }
  }

  .danger {
    .${pt} > span {
      background-color: ${O.i};
    }

    .${ut}.${O.H}
      .${pt}
      > span {
      box-shadow: 0 0 0 ${O.F}px ${O.j};
    }
  }
`,ft=c.css`
  .${L.a.INLINE_CARD_CONTAINER} {
    max-width: calc(100% - 20px);
    vertical-align: top;
    word-break: break-all;

    .card {
      padding-left: 2px;
      padding-right: 2px;

      .${L.a.LOADER_WRAPPER} > a:focus {
        ${Object(W.a)([V.a.BoxShadow])}
      }
    }

    &.${O.H}
      .${L.a.LOADER_WRAPPER}
      > a {
      ${Object(W.a)([V.a.BoxShadow])}
    }
  }

  .${L.a.BLOCK_CARD_CONTAINER} {
    .${L.a.LOADER_WRAPPER} > div {
      cursor: pointer;
      &:hover {
        background-color: ${H.N20};
      }
    }

    &.${O.H}
      .${L.a.LOADER_WRAPPER}
      > div {
      ${Object(W.a)([V.a.BoxShadow])}
    }
  }

  .${L.a.EMBED_CARD_CONTAINER} {
    .${L.a.LOADER_WRAPPER} > div {
      cursor: pointer;
      &::after {
        transition: box-shadow 0s;
      }
    }
    &.${O.H}
      .${L.a.LOADER_WRAPPER}
      > div {
      ${Object(W.a)([V.a.BoxShadow])}
    }

    &.${O.H}
      .${L.a.LOADER_WRAPPER}
      > div::after {
      ${Object(W.a)([V.a.BoxShadow])}
    }
  }
`,mt=c.css`
  .${R.a.DATE_CONTAINER} {
    .${R.a.DATE_WRAPPER} {
      line-height: initial;
      cursor: pointer;
    }

    &.${O.H} {
      .${R.a.DATE_WRAPPER} > span {
        ${Object(W.a)([V.a.BoxShadow])}
      }
    }
  }

  .danger {
    .${R.a.DATE_CONTAINER}.${O.H}
      .${R.a.DATE_WRAPPER}
      > span {
      box-shadow: 0 0 0 ${O.F}px ${O.j};
    }
  }
`,bt=c.css`
  .ProseMirror {
    .embedCardView-content-wrap[layout^='wrap-'] {
      max-width: 100%;
    }

    .embedCardView-content-wrap[layout='wrap-left'] {
      float: left;
    }

    .embedCardView-content-wrap[layout='wrap-right'] {
      float: right;
    }

    .embedCardView-content-wrap[layout='wrap-right']
      + .embedCardView-content-wrap[layout='wrap-left'] {
      clear: both;
    }
  }
`;var gt=c.default.div`
  /* Hack for ie11 that is being used in code block.
   * https://bitbucket.org/atlassian/atlaskit/src/ad09f6361109ece1aab316c8cbd8116ffb7963ef/packages/editor-core/src/schema/nodes/code-block.ts?fileviewer=file-view-default#code-block.ts-110
   */
  & .ie11 {
    overflow: visible;
    word-wrap: break-word;
  }

  .ProseMirror {
    outline: none;
    font-size: ${O.cb}px;

    ${S.a};
    ${k.a};
    ${x.a};
    ${A.a};
    ${j.a};
    ${I};
  }

  .ProseMirror[contenteditable='false'] .taskItemView-content-wrap {
    pointer-events: none;
    opacity: 0.7;
  }

  .ProseMirror-hideselection *::selection {
    background: transparent;
  }

  .ProseMirror-hideselection *::-moz-selection {
    background: transparent;
  }

  .ProseMirror-selectednode {
    outline: none;
  }

  .ProseMirror-selectednode:empty {
    outline: 2px solid #8cf;
  }

  ${Oe}
  ${He}
  ${We}
  ${ge.b}
  ${Ce}
  ${Te}
  ${ke}
  ${je}
  ${Ie.c}
  ${$}
  ${z.a};
  ${fe};
  ${Ne}
  ${Re}
  ${Le}
  ${Fe}
  ${M.b}
  ${Ve.b}
  ${qe}
  ${N.a}
  ${R.b}
  ${Ge}
  ${st}
  ${lt.a}
  ${dt}
  ${ht}
  ${P.c}
  ${ft}
  ${L.b}
  ${mt}
  ${bt}
  ${D.b}

  .panelView-content-wrap {
    box-sizing: border-box;
  }

  .mediaGroupView-content-wrap ul {
    padding: 0;
  }

  /** Needed to override any cleared floats, e.g. image wrapping */

  div.fabric-editor-block-mark[class^='fabric-editor-align'] {
    clear: none !important;
  }

  .fabric-editor-align-end {
    text-align: right;
  }

  .fabric-editor-align-start {
    text-align: left;
  }

  .fabric-editor-align-center {
    text-align: center;
  }

  .pm-table-header-content-wrap,
  .pm-table-cell-content-wrap div.fabric-editor-block-mark {
    p {
      margin-top: 0;
    }
  }

  .hyperlink-floating-toolbar,
  .${ct.a.FLOATING_TOOLBAR_COMPONENT} {
    padding: 0;
  }

  /* Link icon in the Atlaskit package
     is bigger than the others
  */
  .hyperlink-open-link {
    svg {
      max-width: 18px;
    }
    &[href] {
      padding: 0 4px;
    }
  }
`;const vt="0.5s "+O.M,yt=2*O.s,Ot=c.default.div`
  min-width: 340px;
  height: 100%;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
`;Ot.displayName="FullPageEditorWrapper";const Et=Object(c.default)(gt)`
  flex-grow: 1;
  height: 100%;
  overflow-y: scroll;
  position: relative;
  display: flex;
  flex-direction: column;
  scroll-behavior: smooth;
  ${K.l};
`;Et.displayName="ScrollContainer";const wt=c.default.div`
  display: flex;
  flex-direction: row;
  height: calc(100% - 80px);
  box-sizing: border-box;
`;wt.displayName="ContentArea";const Ct=c.default.div`
  height: 100%;
  box-sizing: border-box;
  align-self: flex-end;
`;Ct.displayName="SidebarArea";const Tt=c.default.div`
  line-height: 24px;
  padding-top: 50px;
  padding-bottom: 55px;
  height: calc(
    100% - 105px
  ); /* fill the viewport: 100% - (padding top & bottom) */
  width: 100%;
  margin: auto;
  flex-direction: column;
  flex-grow: 1;

  max-width: ${({theme:e,fullWidthMode:t})=>(t?O.q:e.layoutMaxWidth)+yt}px;
  transition: max-width ${vt};

  & .ProseMirror {
    flex-grow: 1;
    box-sizing: border-box;
  }

  & .ProseMirror {
    & > * {
      /* pre-emptively clear all direct descendant content, just in case any are adjacent floated content */
      clear: both;
    }
    > p,
    > ul,
    > ol:not(${C.b}):not(${T.b}),
    > h1,
    > h2,
    > h3,
    > h4,
    > h5,
    > h6 {
      /* deliberately allow wrapping of text based nodes, just in case any are adjacent floated content */
      clear: none;
    }

    > p:last-child {
      margin-bottom: 24px;
    }
  }

  ${me};

  .fabric-editor--full-width-mode {
    /* Full Width Mode styles for ignoring breakout sizes */
    .fabric-editor-breakout-mark,
    .extension-container,
    .pm-table-container {
      width: 100% !important;
    }

    .fabric-editor-breakout-mark {
      margin-left: unset !important;
      transform: none !important;
    }

    /* Prevent horizontal scroll on page in full width mode */
    ${({containerWidth:e})=>e?`\n        .pm-table-container,\n        .code-block,\n        .extension-container {\n          max-width: ${e-yt-2*G.x}px;\n        }\n\n        [data-layout-section] {\n          max-width: ${e-yt+2*O.Y}px;\n        }\n      `:"\n          .pm-table-container,\n          .code-block,\n          .extension-container {\n            display: none;\n          }\n        "}
  }
`;Tt.displayName="EditorContentArea";const St=c.default.div`
  box-sizing: border-box;
  padding: 0 ${O.s}px;
`;St.displayName="EditorContentGutter";var kt=n("MrDN"),xt=n("DBvH"),At=n("rEY+"),jt=n("x9dh");const It=(e,t)=>{const n=t.currentTarget.querySelector(".ak-editor-content-area"),o=!(!e||!e.hasFocus()),r=t.target,i="INPUT"===r.nodeName,a=!!Object(xt.b)(r,"[data-editor-popup]"),s="TEXTAREA"===r.nodeName,c=!n,l=!(e=>{for(;e;){if(e.classList&&e.classList.contains("ak-editor-content-area"))return!0;e=e.parentNode}return!1})(r.parentNode);(c||l||!1===o)&&!i&&!s&&!a&&e&&Mt(e,t)},Mt=(e,t)=>{const{dispatch:n,dom:o}=e,r=!(!e||!e.hasFocus()),i=Nt(t,o,e,n),a=Object(jt.c)(t,o,e.posAtCoords.bind(e),r)(e.state,n);(i||a)&&(e.focus(),t.stopPropagation(),t.preventDefault())},Nt=(e,t,n,o)=>!!(e.clientY>t.getBoundingClientRect().bottom)&&Object(At.e)()(n.state,o),Rt=c.default.div`
  flex-grow: 1;
  height: 100%;
`;Rt.displayName="ClickWrapper";class Pt extends i.a.Component{constructor(){super(...arguments),this.handleClick=e=>{const{editorView:t}=this.props;t&&It(t,e)}}render(){return i.a.createElement(Rt,{onClick:this.handleClick},this.props.children)}}var Lt=n("n0JQ"),Dt=n("CP8u");const _t=c.default.div`
  display: flex;
`;class Bt extends i.a.Component{constructor(){super(...arguments),this.transitionEvent=Object(Dt.y)(),this.forceComponentUpdate=e=>{e.propertyName.includes("width")&&this.forceUpdate()},this.removeModeChangeListener=e=>{e&&this.transitionEvent&&e.removeEventListener(this.transitionEvent,this.forceComponentUpdate)},this.addModeChangeListener=e=>{e&&this.transitionEvent&&e.addEventListener(this.transitionEvent,this.forceComponentUpdate)}}shouldComponentUpdate(e){const{editorView:t,editorActions:n,items:o,providerFactory:r,eventDispatcher:i,popupsMountPoint:a,popupsBoundariesElement:s,popupsScrollableElement:c,containerElement:l,disabled:d}=this.props;return!(e.editorView===t&&e.editorActions===n&&e.items===o&&e.providerFactory===r&&e.eventDispatcher===i&&e.popupsMountPoint===a&&e.popupsBoundariesElement===s&&e.popupsScrollableElement===c&&e.containerElement===l&&e.disabled===d)}componentDidMount(){this.addModeChangeListener(this.props.contentArea)}UNSAFE_componentWillReceiveProps(e){this.props.contentArea!==e.contentArea&&(this.removeModeChangeListener(this.props.contentArea),this.addModeChangeListener(e.contentArea))}componentWillUnmount(){this.removeModeChangeListener(this.props.contentArea)}render(){const{items:e,editorView:t,editorActions:n,eventDispatcher:o,providerFactory:r,appearance:a,popupsMountPoint:s,popupsBoundariesElement:c,popupsScrollableElement:l,containerElement:d,disabled:u,dispatchAnalyticsEvent:p}=this.props;return e&&t?i.a.createElement(_t,null,e.map((e,h)=>{const f={key:h},m=e({editorView:t,editorActions:n,eventDispatcher:o,providerFactory:r,dispatchAnalyticsEvent:p,appearance:a,popupsMountPoint:s,popupsBoundariesElement:c,popupsScrollableElement:l,containerElement:d,disabled:u});return m&&i.a.cloneElement(m,f)})):null}}Bt.displayName="PluginSlot";var $t=n("xwvf");var zt=({editorView:e})=>{const[t,n]=i.a.useState(0),[o,r]=i.a.useState(0),[a,s]=function({setContextPanelWidth:e,setContainerWidth:t}){return[i.a.useCallback(({width:t})=>(e(t),null),[e]),i.a.useCallback(({width:e})=>(t(e),null),[t])]}({setContextPanelWidth:n,setContainerWidth:r});return i.a.useEffect(()=>{const n=o-t;if(n<=0||isNaN(n)||!e)return;const{dom:r,state:{tr:i},dispatch:a}=e;return i.setMeta($t.b,{width:n,lineLength:r?r.clientWidth:void 0}),a(i),()=>{}},[e,t,o]),i.a.createElement(i.a.Fragment,null,i.a.createElement(kt.a,null,a),i.a.createElement(p.a,null,s))};const Ft=i.a.memo(e=>i.a.createElement(wt,null,i.a.createElement(Et,{innerRef:e.scrollContainerRef,allowAnnotation:e.allowAnnotation,className:"fabric-editor-popup-scroll-parent"},i.a.createElement(Pt,{editorView:e.editorView},i.a.createElement(p.a,null,({width:t})=>i.a.createElement(Tt,{fullWidthMode:"full-width"===e.appearance,innerRef:e.contentAreaRef,containerWidth:t},i.a.createElement(St,{className:["ak-editor-content-area","full-width"===e.appearance?"fabric-editor--full-width-mode":""].join(" ")},e.customContentComponents,i.a.createElement(Bt,{editorView:e.editorView,editorActions:e.editorActions,eventDispatcher:e.eventDispatcher,providerFactory:e.providerFactory,appearance:e.appearance,items:e.contentComponents,contentArea:e.contentArea,popupsMountPoint:e.popupsMountPoint,popupsBoundariesElement:e.popupsBoundariesElement,popupsScrollableElement:e.popupsScrollableElement,disabled:!!e.disabled,containerElement:e.scrollContainer,dispatchAnalyticsEvent:e.dispatchAnalyticsEvent}),e.editorDOMElement))))),i.a.createElement(Ct,null,e.contextPanel||i.a.createElement(Lt.a,{visible:!1})),i.a.createElement(zt,{editorView:e.editorView})));var Ut=n("xuWu"),Ht=n("IUoJ"),Wt=n("bQC9"),Vt=n("HEKX");const Kt=c.default.div`
  background: ${H.N20};
  border-radius: 50%;
  min-width: ${4*Object(U.h)()}px;
  margin-left: -${Object(U.h)()/2}px;
`,qt=c.default.div`
  margin-right: ${Object(U.h)()}px;
  display: flex;
  align-items: center;
  div:last-child button.invite-to-edit {
    border-radius: 50%;
    height: 32px;
    width: 32px;
    padding: 2px;
  }
`,Gt=c.default.div`
  display: block;
  position: absolute;
  right: 1px;
  bottom: 1px;
  width: 13px;
  height: 13px;
  z-index: ${O.J};
  border-radius: 3px;
  background: ${({color:e})=>e};
  color: #fff;
  font-size: 9px;
  line-height: 0;
  padding-top: 7px;
  text-align: center;
  box-shadow: 0 0 1px #fff;
  box-sizing: border-box;
`,Yt=e=>{const t=Object(B.d)(e.sessionId).color.solid,n=e.name.substr(0,1).toUpperCase();return i.a.createElement(Gt,{color:t,"data-testid":"editor-collab-badge"},n)};var Xt=Object(d.default)(e=>({name:e.name,src:e.avatar,size:"medium",presence:i.a.createElement(Yt,{name:e.name,sessionId:e.sessionId})}),([e],[t])=>{const n=e,o=t;return n.name===o.name&&n.avatar===o.avatar&&n.sessionId===o.sessionId});const Jt=i.a.memo(e=>{const{sessionId:t}=e,n=e.participants.toArray().sort(e=>e.sessionId===t?-1:1).map(Xt);return n.length?i.a.createElement(qt,null,i.a.createElement(Vt.a,{appearance:"stack",size:"medium",data:n}),e.children):null});var Zt=n("MtlP"),Qt=n.n(Zt),en=n("cU7i");const tn=e=>i.a.createElement(i.a.Fragment,null,e.children),nn=e=>{const{Component:t,onClick:n,selected:o,title:r}=e,a=i.a.useMemo(()=>i.a.createElement(Qt.a,{label:r}),[r]);if(!t&&!n)return null;const s=t||tn;return i.a.createElement(Kt,null,i.a.createElement(s,null,i.a.createElement(en.a,{className:"invite-to-edit",onClick:n,selected:o,title:r,titlePosition:"bottom",iconBefore:a})))};var on=Object(l.g)(e=>{const t=e.intl.formatMessage(Wt.a.inviteToEditButtonTitle),{isInviteToEditButtonSelected:n,inviteToEditHandler:o,inviteToEditComponent:r}=e,a=i.a.useCallback(({data:e})=>e?i.a.createElement(Jt,{sessionId:e.sessionId,participants:e.activeParticipants},i.a.createElement(nn,{title:t,selected:n,onClick:o,Component:r})):null,[n,o,r,t]);return i.a.createElement(Ut.a,{plugins:{data:Ht.a},render:a,editorView:e.editorView})}),rn=n("clDp");var an=n("twlq"),sn=n("y3ol");const cn=[{width:650,size:sn.a.XXL},{width:580,size:sn.a.XL},{width:540,size:sn.a.L},{width:490,size:sn.a.M},{width:410,size:sn.a.S}],ln=[{width:610,size:sn.a.XXL},{width:540,size:sn.a.XL},{width:460,size:sn.a.L},{width:450,size:sn.a.M},{width:370,size:sn.a.S}],dn=(e,t)=>((e=>Object(an.a)(e)?cn:ln)(t).find(({width:t})=>e>t)||{size:sn.a.XXXS}).size,un=c.default.div`
  display: flex;

  @media (max-width: ${O.y}px) {
    justify-content: space-between;
  }
`;class pn extends i.a.Component{shouldComponentUpdate(e){return e.toolbarSize!==this.props.toolbarSize||e.disabled!==this.props.disabled||e.popupsMountPoint===this.props.popupsMountPoint||e.popupsBoundariesElement===this.props.popupsBoundariesElement||e.popupsScrollableElement===this.props.popupsScrollableElement||e.isReducedSpacing!==this.props.isToolbarReducedSpacing}render(){const{appearance:e,editorView:t,editorActions:n,eventDispatcher:o,providerFactory:r,items:a,popupsMountPoint:s,popupsBoundariesElement:c,popupsScrollableElement:l,toolbarSize:d,disabled:u,isToolbarReducedSpacing:p,dispatchAnalyticsEvent:h,containerElement:f}=this.props;return a&&a.length?i.a.createElement(un,null,a.map((m,b)=>{const g={key:b},v=m({editorView:t,editorActions:n,eventDispatcher:o,providerFactory:r,appearance:e,popupsMountPoint:s,popupsBoundariesElement:c,popupsScrollableElement:l,disabled:u,toolbarSize:d,isToolbarReducedSpacing:p,containerElement:f,isLastItem:b===a.length-1,dispatchAnalyticsEvent:h});return v&&i.a.cloneElement(v,g)})):null}}const hn=e=>i.a.createElement(pn,{items:e.items,editorView:e.editorView,editorActions:e.editorActions,eventDispatcher:e.eventDispatcher,providerFactory:e.providerFactory,appearance:e.appearance,popupsMountPoint:e.popupsMountPoint,popupsBoundariesElement:e.popupsBoundariesElement,popupsScrollableElement:e.popupsScrollableElement,disabled:e.disabled,dispatchAnalyticsEvent:e.dispatchAnalyticsEvent,toolbarSize:e.toolbarSize,isToolbarReducedSpacing:e.toolbarSize<sn.a.XXL,containerElement:e.containerElement}),fn=c.default.div`
  width: 100%;
  min-width: 254px;
  position: relative;
  @media (max-width: ${O.y}px) {
    grid-column: 1 / 2;
    grid-row: 2;
    width: calc(100% - 30px);
    margin: 0 15px;
  }
`,mn=e=>{const t=i.a.createRef(),[n,o]=i.a.useState(void 0),r=((e,{skip:t})=>{const[n,o]=i.a.useState(void 0);return i.a.useEffect(()=>{!t&&e.current&&o(Math.round(e.current.getBoundingClientRect().width))},[t,o,e]),n})(t,{skip:void 0!==n}),a=void 0===n&&void 0===r?void 0:dn(n||r,e.appearance);return i.a.createElement(fn,null,i.a.createElement(rn.a,{setWidth:o}),e.editorView&&a?i.a.createElement(hn,Object.assign({},e,{toolbarSize:a})):i.a.createElement("div",{ref:t}))},bn=c.default.div`
  position: relative;
  align-items: center;
  box-shadow: ${e=>e.showKeyline?`0 ${O.V}px 0 0 ${H.N30}`:"none"};
  transition: box-shadow 200ms ${O.M};
  z-index: ${O.w};
  display: flex;
  height: ${56}px;
  flex-shrink: 0;
  background-color: white;

  & object {
    height: 0 !important;
  }

  @media (max-width: ${O.y}px) {
    display: grid;
    height: calc(${56}px * 2);
  }
`;bn.displayName="MainToolbar";const gn=c.default.div`
  margin: ${2*Object(U.h)()}px;
  height: ${4*Object(U.h)()}px;
  width: ${4*Object(U.h)()}px;
  @media (max-width: ${O.y}px) {
    grid-column: 1;
    grid-row: 1;
  }
`;gn.displayName="MainToolbarIconBefore";const vn=c.default.div`
  display: flex;
  justify-content: flex-end;
  flex-grow: 1;
  // ED-10241: We add fit-content to ensure that MainToolbar does not
  // shrink more than the size of its contents. This will prevent the
  // find/replace icon from being overlapped during a confluence
  // publish operation
  min-width: fit-content;
  @media (max-width: ${O.y}px) {
    grid-column: 1;
    grid-row: 1;
  }
`;vn.displayName="MainToolbar";c.default.div`
  box-sizing: border-box;
  justify-content: flex-end;
  align-items: center;
  flex-shrink: 0;
  display: flex;
  padding: 24px 0;
`.displayName="SecondaryToolbar";const yn=i.a.memo(e=>i.a.createElement(kt.a,null,({width:t})=>i.a.createElement(bn,{"data-testid":"ak-editor-main-toolbar",showKeyline:e.showKeyline||t>0},e.beforeIcon&&i.a.createElement(gn,null,e.beforeIcon),i.a.createElement(mn,{editorView:e.editorView,editorActions:e.editorActions,eventDispatcher:e.eventDispatcher,providerFactory:e.providerFactory,appearance:e.appearance,items:e.primaryToolbarComponents,popupsMountPoint:e.popupsMountPoint,popupsBoundariesElement:e.popupsBoundariesElement,popupsScrollableElement:e.popupsScrollableElement,disabled:e.disabled,dispatchAnalyticsEvent:e.dispatchAnalyticsEvent,containerElement:e.containerElement}),i.a.createElement(vn,null,i.a.createElement(on,{editorView:e.editorView,eventDispatcher:e.eventDispatcher,inviteToEditComponent:e.collabEdit&&e.collabEdit.inviteToEditComponent,inviteToEditHandler:e.collabEdit&&e.collabEdit.inviteToEditHandler,isInviteToEditButtonSelected:e.collabEdit&&e.collabEdit.isInviteToEditButtonSelected}),e.customPrimaryToolbarComponents))));class On extends i.a.Component{constructor(){super(...arguments),this.state={showKeyline:!1},this.scrollContainer=null,this.contentAreaRef=e=>{this.contentArea=e},this.scrollContainerRef=e=>{const t=this.scrollContainer;t&&t.removeEventListener("scroll",this.updateToolbarKeyline),this.scrollContainer=e||null,this.scrollContainer&&(this.scrollContainer.addEventListener("scroll",this.updateToolbarKeyline,!1),this.updateToolbarKeyline())},this.updateToolbarKeyline=Object(w.a)(()=>{if(!this.scrollContainer)return!1;const{scrollTop:e}=this.scrollContainer,t=e>O.V;return t!==this.state.showKeyline&&this.setState({showKeyline:t}),!1}),this.handleResize=()=>{this.scheduledKeylineUpdate=this.updateToolbarKeyline()}}componentDidMount(){window.addEventListener("resize",this.handleResize,!1)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.scheduledKeylineUpdate&&cancelAnimationFrame(this.scheduledKeylineUpdate)}render(){const{props:e}=this,{showKeyline:t}=this.state;return i.a.createElement(kt.b,null,i.a.createElement(Ot,{className:"akEditor"},i.a.createElement(yn,{appearance:e.appearance,collabEdit:e.collabEdit,customPrimaryToolbarComponents:e.customPrimaryToolbarComponents,disabled:!!e.disabled,dispatchAnalyticsEvent:e.dispatchAnalyticsEvent,editorActions:e.editorActions,editorDOMElement:e.editorDOMElement,editorView:e.editorView,eventDispatcher:e.eventDispatcher,popupsBoundariesElement:e.popupsBoundariesElement,popupsMountPoint:e.popupsMountPoint,popupsScrollableElement:e.popupsScrollableElement,primaryToolbarComponents:e.primaryToolbarComponents,providerFactory:e.providerFactory,showKeyline:t,containerElement:this.scrollContainer,beforeIcon:e.primaryToolbarIconBefore}),i.a.createElement(Ft,{allowAnnotation:e.allowAnnotation,appearance:e.appearance,contentArea:this.contentArea,contentAreaRef:this.contentAreaRef,contentComponents:e.contentComponents,contextPanel:e.contextPanel,customContentComponents:e.customContentComponents,disabled:e.disabled,dispatchAnalyticsEvent:e.dispatchAnalyticsEvent,editorActions:e.editorActions,editorDOMElement:e.editorDOMElement,editorView:e.editorView,eventDispatcher:e.eventDispatcher,popupsBoundariesElement:e.popupsBoundariesElement,popupsMountPoint:e.popupsMountPoint,popupsScrollableElement:e.popupsScrollableElement,providerFactory:e.providerFactory,scrollContainer:this.scrollContainer,scrollContainerRef:this.scrollContainerRef})))}}On.displayName="FullPageEditor";var En=n("7EeQ");const wn=c.keyframes`
  50% {
    background-color: ${H.R100};
  }
`,Cn=c.keyframes`
  0% {
    background-color: ${H.R100};
  }
  50% {
    background-color: auto;
  }
  100% {
    background-color: ${H.R100};
  }
`,Tn=c.default.div`
  &.-flash > div {
    animation: 0.25s ease-in-out ${Cn};
  }

  & > div {
    animation: ${e=>e.animate?".25s ease-in-out "+wn:"none"};
  }
`;class Sn extends i.a.Component{constructor(){super(...arguments),this.toggle=!1}render(){const{animate:e,children:t}=this.props;return this.toggle=e&&!this.toggle,i.a.createElement(Tn,{className:this.toggle?"-flash":"",animate:e},t)}}const kn=c.default.div`
  line-height: 20px;
  height: auto;
  min-height: 30px;
  ${e=>e.maxHeight?"max-height: "+e.maxHeight+"px;":""} overflow-x: hidden;
  overflow-y: auto;
  ${K.l} max-width: inherit;
  box-sizing: border-box;
  word-wrap: break-word;

  div > .ProseMirror {
    outline: none;
    white-space: pre-wrap;
    padding: 0;
    margin: 0;
  }
`;kn.displayName="ChromelessEditor";const xn=Object(c.default)(gt)``;xn.displayName="ContentArea";class An extends i.a.Component{constructor(){super(...arguments),this.appearance="chromeless",this.containerElement=null,this.renderChrome=({maxContentSize:e})=>{const{editorDOMElement:t,editorView:n,editorActions:o,eventDispatcher:r,providerFactory:a,contentComponents:s,customContentComponents:c,maxHeight:l,popupsMountPoint:d,popupsBoundariesElement:u,popupsScrollableElement:p,disabled:h,dispatchAnalyticsEvent:f}=this.props,m=e&&e.maxContentSizeReached;return i.a.createElement(Sn,{animate:m},i.a.createElement(kn,{maxHeight:l,innerRef:e=>this.containerElement=e},i.a.createElement(xn,null,c,i.a.createElement(Bt,{editorView:n,editorActions:o,eventDispatcher:r,providerFactory:a,appearance:this.appearance,items:s,popupsMountPoint:d,popupsBoundariesElement:u,popupsScrollableElement:p,containerElement:this.containerElement,disabled:!!h,dispatchAnalyticsEvent:f}),t)))}}render(){return i.a.createElement(Ut.a,{plugins:{maxContentSize:En.b},render:this.renderChrome})}}An.displayName="ChromelessEditorAppearance";var jn=n("wn7R"),In=n("zJ/j"),Mn=n("PZ9j"),Nn=n("nB/6"),Rn=n.n(Nn);const Pn=c.default.div`
  display: flex;
  flex-direction: column;

  .less-margin .ProseMirror {
    margin: 12px ${8}px ${8}px;
  }

  min-width: 272px;
  /* Border + Toolbar + Footer + (Paragraph + ((Parahraph + Margin) * (DefaultLines - 1)) */
  /* calc(2px + 40px + 24px + ( 20px + (32px * 2))) */
  min-height: 150px;
  height: auto;
  ${e=>e.maxHeight?"max-height: "+e.maxHeight+"px;":""} background-color: white;
  border: 1px solid ${H.N40};
  box-sizing: border-box;
  border-radius: ${Object(U.c)()}px;

  max-width: inherit;
  word-wrap: break-word;
`;Pn.displayName="CommentEditor";const Ln=c.default.div`
  position: relative;
  align-items: center;
  padding: ${Object(U.h)()}px ${Object(U.h)()}px 0;
  display: flex;
  height: auto;
  background-color: white;

  padding-left: ${20}px;

  & > div > *:first-child {
    margin-left: 0;
  }

  .block-type-btn {
    padding-left: 0;
  }
`;Ln.displayName="MainToolbar";const Dn=c.default.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  flex-grow: 1;
  padding-right: ${20}px;
  > div {
    display: flex;
    flex-shrink: 0;
  }
`;Dn.displayName="MainToolbar";const _n=Object(c.default)(gt)`
  flex-grow: 1;
  overflow-x: hidden;
  overflow-y: auto;
  line-height: 24px;

  /** Hack for Bitbucket to ensure entire editorView gets drop event; see ED-3294 **/
  /** Hack for tables controlls. Otherwise marging collapse and controlls are misplaced. **/
  .ProseMirror {
    margin: 12px ${14}px ${14}px;
  }

  .gridParent {
    margin-left: ${14-Ve.a}px;
    margin-right: ${14-Ve.a}px;
    width: calc(100% + ${14-Ve.a}px);
  }

  padding: ${20}px;

  ${be};
`;_n.displayName="ContentArea";const Bn=c.default.div`
  box-sizing: border-box;
  justify-content: flex-end;
  align-items: center;
  display: flex;
  padding: 12px 1px;
`;Bn.displayName="SecondaryToolbar";class $n extends i.a.Component{constructor(){super(...arguments),this.appearance="comment",this.containerElement=null,this.handleSave=()=>{this.props.editorView&&this.props.onSave&&this.props.onSave(this.props.editorView)},this.handleCancel=()=>{this.props.editorView&&this.props.onCancel&&this.props.onCancel(this.props.editorView)},this.renderChrome=({maxContentSize:e,mediaState:t})=>{const{editorDOMElement:n,editorView:o,editorActions:r,eventDispatcher:a,providerFactory:s,contentComponents:c,customContentComponents:l,customPrimaryToolbarComponents:d,primaryToolbarComponents:u,customSecondaryToolbarComponents:h,popupsMountPoint:f,popupsBoundariesElement:m,popupsScrollableElement:b,maxHeight:g,onSave:v,onCancel:y,disabled:E,dispatchAnalyticsEvent:w,intl:C}=this.props,T=e&&e.maxContentSizeReached;return i.a.createElement(Sn,{animate:T},i.a.createElement(Pn,{maxHeight:g,className:"akEditor"},i.a.createElement(Ln,{"data-testid":"ak-editor-main-toolbar"},i.a.createElement(mn,{editorView:o,editorActions:r,eventDispatcher:a,providerFactory:s,appearance:this.appearance,items:u,popupsMountPoint:f,popupsBoundariesElement:m,popupsScrollableElement:b,disabled:!!E,dispatchAnalyticsEvent:w,containerElement:this.containerElement}),i.a.createElement(Dn,null,d)),i.a.createElement(Pt,{editorView:o},i.a.createElement(p.a,null,({width:e})=>i.a.createElement(_n,{innerRef:e=>this.containerElement=e,className:Rn()("ak-editor-content-area",{"less-margin":e<O.x})},l,i.a.createElement(Bt,{editorView:o,editorActions:r,eventDispatcher:a,dispatchAnalyticsEvent:w,providerFactory:s,appearance:this.appearance,items:c,popupsMountPoint:f,popupsBoundariesElement:m,popupsScrollableElement:b,containerElement:this.containerElement,disabled:!!E}),n))),i.a.createElement(zt,{editorView:o})),i.a.createElement(Bn,null,i.a.createElement(jn.a,null,!!v&&i.a.createElement(In.a,{appearance:"primary",onClick:this.handleSave,testId:"comment-save-button",isDisabled:E||t&&!t.allUploadsFinished},C.formatMessage(Wt.a.saveButton)),!!y&&i.a.createElement(In.a,{appearance:"subtle",onClick:this.handleCancel,isDisabled:E},C.formatMessage(Wt.a.cancelButton))),i.a.createElement("span",{style:{flexGrow:1}}),h))}}render(){return i.a.createElement(Ut.a,{plugins:{maxContentSize:En.b,mediaState:Mn.a},render:this.renderChrome})}}$n.displayName="CommentEditorAppearance";var zn=Object(l.g)($n),Fn=n("GGKp");const Un=c.default.div`
  height: 100%;
  min-height: ${e=>e.minHeight}vh;
`;Un.displayName="ClickWrapper";class Hn extends i.a.Component{constructor(){super(...arguments),this.clickElementRef=i.a.createRef(),this.handleClick=e=>{const{editorView:t}=this.props;if(!t)return;It(t,e);e.clientY>t.dom.getBoundingClientRect().bottom&&this.clickElementRef.current&&this.clickElementRef.current.scrollIntoView(!1)}}render(){return i.a.createElement(Un,{className:"editor-click-wrapper",minHeight:this.props.minHeight,onClick:this.handleClick,innerRef:this.clickElementRef},this.props.children)}}const Wn=c.default.div`
  min-height: 30px;
  width: 100%;
  max-width: inherit;
  box-sizing: border-box;
  word-wrap: break-word;

  div > .ProseMirror {
    outline: none;
    white-space: pre-wrap;
    padding: 0;
    margin: 0;
  }
`;Wn.displayName="MobileEditor";const Vn=Object(c.default)(gt)``;function Kn({editorView:e,maxHeight:t,children:n}){const o=Object(r.useCallback)(({maxContentSize:o,mobileScroll:r})=>{const a=o&&o.maxContentSizeReached;let s=100;if(r){const{keyboardHeight:e,windowHeight:t,mobilePaddingTop:n}=r;s=100-100*e/t-100*n/t}return i.a.createElement(Sn,{animate:a},i.a.createElement(Wn,{isMaxContentSizeReached:a,maxHeight:t},i.a.createElement(Hn,{editorView:e||void 0,minHeight:s},i.a.createElement(Vn,null,i.a.createElement("div",{style:{padding:"0 8px"},className:"ak-editor-content-area"},n)))))},[e,t,n]);return i.a.createElement(Ut.a,{plugins:{maxContentSize:En.b,mobileScroll:Fn.d},render:o})}function qn({editorView:e,maxHeight:t,editorDOMElement:n}){return i.a.createElement(Kn,{editorView:e||null,maxHeight:t},n,e&&i.a.createElement(zt,{editorView:e}))}Vn.displayName="ContentArea";var Gn=n("SHkB"),Yn=n("JumK"),Xn=n("9RRP"),Jn=n("wuk1"),Zn=n("ZvC/"),Qn=n("bU5Q"),eo=n("OMM/");function to(e){const t=i.a.useContext(e);return i.a.useMemo(()=>({Provider:e.Provider,Consumer:e.Consumer,value:t}),[t,e])}const no=({children:e})=>{const t=to(Qn.b),n=to(eo.a);return i.a.createElement(oo,{card:t,analytics:n},e)};class oo extends i.a.PureComponent{constructor(){super(...arguments),this.contextState={}}getChildContext(){return{contextAdapter:{card:this.props.card,analytics:this.props.analytics}}}render(){return this.props.children}}oo.childContextTypes={contextAdapter:s.a.object};var ro=n("/P2d"),io=n("O65l"),ao=n.n(io),so=n("u5XY"),co=n("2SyA"),lo=n("tCDL"),uo=n("4FMG"),po=n("EruW");function ho(e,t){t&&Object(po.a)(t)({payload:{action:uo.a.INSERTED,actionSubject:uo.b.DOCUMENT,actionSubjectId:uo.c.EXTENSION,attributes:{extensionType:e.extensionType,key:e.key,inputMethod:uo.e.QUICK_INSERT},eventType:uo.d.TRACK}})}var fo=n("yKQC");class mo extends i.a.Component{constructor(){super(...arguments),this.state={error:void 0},this.fireAnalytics=e=>{const{createAnalyticsEvent:t}=this.props;this.getProductName().then(n=>{t?t({action:uo.a.EDITOR_CRASHED,actionSubject:uo.b.EDITOR,eventType:uo.d.OPERATIONAL,attributes:Object(o.a)({product:n,browserInfo:window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"unknown"},e)}).fire(fo.b):console.error("Editor Error Boundary: Missing `createAnalyticsEvent` prop.",{channel:fo.b,product:n,error:e})}).catch(e=>{console.error("Failed to resolve product name from contextIdentifierProvider.",e)})},this.getProductName=async()=>{const{contextIdentifierProvider:e}=this.props;if(e){const t=await e;if(t.product)return t.product}return"atlaskit"}}componentDidCatch(e,t){this.fireAnalytics({error:e.toString(),errorInfo:t}),this.setState({error:e},()=>{if(this.props.rethrow)throw e})}render(){return this.props.children}}mo.defaultProps={rethrow:!0},n.d(t,"a",(function(){return go}));const bo=Object(c.default)(p.b)`
  height: 100%;
`;class go extends i.a.Component{constructor(e,t){super(e),this.prepareExtensionProvider=Object(d.default)(e=>{if(e)return"function"==typeof e?Object(h.a)(e(this.editorActions)):Object(h.a)(e)}),this.prepareQuickInsertProvider=(e,t)=>{const n=t&&"boolean"!=typeof t&&t.provider,o=e&&async function(e,t,n){const o=await e.getExtensions();return{getItems:()=>{const e=Object(so.c)(o,e=>{const o=ao()({id:"d7LmB",loader:e.icon,loading:()=>null});return{title:e.title,description:e.description,icon:()=>i.a.createElement(o,{label:e.title}),keywords:e.keywords,featured:e.featured,categories:e.categories,action:o=>"function"==typeof e.node?(Object(co.c)(e.node()).then(o=>{ho(e,n),o&&t.replaceSelection(o)}),o("")):(ho(e,n),o(e.node))}});return Promise.all(e)}}}(e,this.editorActions,this.createAnalyticsEvent);return n&&o?async function(e){const{invokeList:t}=Object(lo.a)(e);return{getItems:()=>t("getItems")}}([n,o]):n||o},this.handleSave=e=>{if(this.props.onSave)return this.props.onSave(e)},this.handleAnalyticsEvent=e=>Object(po.a)(this.createAnalyticsEvent)(e),this.providerFactory=new f.a,this.deprecationWarnings(e),this.onEditorCreated=this.onEditorCreated.bind(this),this.onEditorDestroyed=this.onEditorDestroyed.bind(this),this.editorActions=(t||{}).editorActions||new Gn.a,Object(m.b)(ro.a.EDITOR_MOUNTED),e.performanceTracking&&e.performanceTracking.ttiTracking&&e.performanceTracking.ttiTracking.enabled&&function(e,t=1e3,n=60){if(!Object(b.c)())return;let o,r=1e3*n;const i=performance.now(),a=new PerformanceObserver(e=>{const t=e.getEntries();t.length&&(o=t[t.length-1])});a.observe({entryTypes:["longtask"]});const s=()=>{if(!o)return setTimeout(s,t);const n=o.startTime+o.duration;return performance.now()-n>=t||r<=0?(a.disconnect(),e(n,n-i,r<=0)):(r-=t,setTimeout(s,t))};s()}((e,t,n)=>{this.createAnalyticsEvent&&Object(po.a)(this.createAnalyticsEvent)({payload:{action:uo.a.EDITOR_TTI,actionSubject:uo.b.EDITOR,attributes:{tti:e,ttiFromInvocation:t,canceled:n},eventType:uo.d.OPERATIONAL}})},e.performanceTracking.ttiTracking.ttiIdleThreshold,e.performanceTracking.ttiTracking.ttiCancelTimeout);const n=this.prepareExtensionProvider(e.extensionProviders),o=this.prepareQuickInsertProvider(n,e.quickInsert);this.state={extensionProvider:n,quickInsertProvider:o}}componentDidMount(){Object(m.c)(ro.a.EDITOR_MOUNTED,(e,t)=>{if(this.createAnalyticsEvent){const n=n=>{Object(po.a)(this.createAnalyticsEvent)({payload:{action:uo.a.EDITOR_MOUNTED,actionSubject:uo.b.EDITOR,attributes:{duration:e,startTime:t,objectId:n},eventType:uo.d.OPERATIONAL}})};Promise.resolve(this.props.contextIdentifierProvider).then(e=>{n(null==e?void 0:e.objectId)},n)}}),this.handleProviders(this.props)}componentDidUpdate(e){const{extensionProviders:t,quickInsert:n}=this.props;if(t&&t!==e.extensionProviders||n&&n!==e.quickInsert){const e=this.prepareExtensionProvider(t),o=this.prepareQuickInsertProvider(e,n);this.setState({extensionProvider:e,quickInsertProvider:o},()=>this.handleProviders(this.props))}else this.handleProviders(this.props)}componentWillUnmount(){this.unregisterEditorFromActions(),this.providerFactory.destroy(),Object(m.a)(ro.a.EDITOR_MOUNTED)}onEditorCreated(e){this.registerEditorForActions(e.view,e.eventDispatcher,e.transformer),this.props.onEditorReady&&this.props.onEditorReady(this.editorActions)}deprecationWarnings(e){const t=Object(Zn.a)(),n={allowTasksAndDecisions:{message:"To allow tasks and decisions use taskDecisionProvider  <Editor taskDecisionProvider={{ provider }} />",type:"removed"},allowConfluenceInlineComment:{message:"To integrate inline comments use experimental annotationProvider  <Editor annotationProviders={{ provider }} />",type:"removed"},transactionTracking:{message:"Deprecated. To enable transaction tracking use performanceTracking prop instead: performanceTracking={{ transactionTracking: { enabled: true } }}",type:"removed"}};Object.keys(n).forEach(o=>{if(e.hasOwnProperty(o)){const e=n[o],r=e.type||"enabled by default";console.warn(`${o} property is deprecated. ${e.message||""} [Will be ${r} in editor-core@${t}]`)}}),!e.hasOwnProperty("allowTables")||"boolean"==typeof e.allowTables||e.allowTables&&e.allowTables.advanced||console.warn(`Advanced table options are deprecated (except isHeaderRowRequired) to continue using advanced table features use - <Editor allowTables={{ advanced: true }} /> [Will be changed in editor-core@${t}]`)}onEditorDestroyed(e){this.unregisterEditorFromActions(),this.props.onDestroy&&this.props.onDestroy()}registerEditorForActions(e,t,n){this.editorActions._privateRegisterEditor(e,t,n)}unregisterEditorFromActions(){this.editorActions&&this.editorActions._privateUnregisterEditor()}handleProviders(e){const{emojiProvider:t,mentionProvider:n,taskDecisionProvider:o,contextIdentifierProvider:r,collabEditProvider:i,activityProvider:a,presenceProvider:s,macroProvider:c,legacyImageUploadProvider:l,media:d,collabEdit:u,autoformattingProvider:p,searchProvider:h,UNSAFE_cards:f}=e,{extensionProvider:m,quickInsertProvider:b}=this.state;this.providerFactory.setProvider("emojiProvider",t),this.providerFactory.setProvider("mentionProvider",n),this.providerFactory.setProvider("taskDecisionProvider",o),this.providerFactory.setProvider("contextIdentifierProvider",r),this.providerFactory.setProvider("mediaProvider",d&&d.provider),this.providerFactory.setProvider("imageUploadProvider",l),this.providerFactory.setProvider("collabEditProvider",u&&u.provider?u.provider:i),this.providerFactory.setProvider("activityProvider",a),this.providerFactory.setProvider("searchProvider",h),this.providerFactory.setProvider("presenceProvider",s),this.providerFactory.setProvider("macroProvider",c),f&&f.provider&&this.providerFactory.setProvider("cardProvider",f.provider),this.providerFactory.setProvider("autoformattingProvider",p),m&&this.providerFactory.setProvider("extensionProvider",Promise.resolve(m)),b&&this.providerFactory.setProvider("quickInsertProvider",b)}getBaseFontSize(){return this.props.allowDynamicTextSizing||["comment","chromeless","mobile"].includes(this.props.appearance)?void 0:O.o}render(){const e=function(e){switch(e=e||"comment"){case"full-page":case"full-width":return On;case"chromeless":return An;case"comment":return zn;case"mobile":return qn;default:throw new Error(`Appearance '${e}' is not supported by the editor.`)}}(this.props.appearance),t=Object(o.a)(Object(o.a)({},this.props),{},{onSave:this.props.onSave?this.handleSave:void 0,analyticsHandler:void 0}),n=i.a.createElement(E.d,{data:{packageName:u.a,packageVersion:u.b,componentName:"editorCore",appearance:Object(g.f)(this.props.appearance)}},i.a.createElement(v.a,{render:n=>(this.createAnalyticsEvent=n)&&i.a.createElement(mo,{createAnalyticsEvent:n,contextIdentifierProvider:this.props.contextIdentifierProvider},i.a.createElement(bo,null,i.a.createElement(Xn.a,{editorActions:this.editorActions},i.a.createElement(no,null,i.a.createElement(Jn.a,{onAnalyticsEvent:this.handleAnalyticsEvent,useAnalyticsContext:this.props.UNSAFE_useAnalyticsContext,render:o=>i.a.createElement(i.a.Fragment,null,i.a.createElement(Yn.a,{editorProps:t,createAnalyticsEvent:n,portalProviderAPI:o,providerFactory:this.providerFactory,onEditorCreated:this.onEditorCreated,onEditorDestroyed:this.onEditorDestroyed,allowAnalyticsGASV3:this.props.allowAnalyticsGASV3,disabled:this.props.disabled,render:({editor:t,view:n,eventDispatcher:o,config:r,dispatchAnalyticsEvent:a})=>i.a.createElement(y.a,{dynamicTextSizing:this.props.allowDynamicTextSizing&&"full-width"!==this.props.appearance,baseFontSize:this.getBaseFontSize()},i.a.createElement(e,{appearance:this.props.appearance,disabled:this.props.disabled,editorActions:this.editorActions,editorDOMElement:t,editorView:n,providerFactory:this.providerFactory,eventDispatcher:o,dispatchAnalyticsEvent:a,maxHeight:this.props.maxHeight,onSave:this.props.onSave?this.handleSave:void 0,onCancel:this.props.onCancel,popupsMountPoint:this.props.popupsMountPoint,popupsBoundariesElement:this.props.popupsBoundariesElement,popupsScrollableElement:this.props.popupsScrollableElement,contentComponents:r.contentComponents,primaryToolbarComponents:r.primaryToolbarComponents,primaryToolbarIconBefore:this.props.primaryToolbarIconBefore,secondaryToolbarComponents:r.secondaryToolbarComponents,insertMenuItems:this.props.insertMenuItems,customContentComponents:this.props.contentComponents,customPrimaryToolbarComponents:this.props.primaryToolbarComponents,customSecondaryToolbarComponents:this.props.secondaryToolbarComponents,contextPanel:this.props.contextPanel,collabEdit:this.props.collabEdit,allowAnnotation:!!this.props.annotationProviders}))}),i.a.createElement(Jn.c,{portalProviderAPI:o}))})))))}));return this.context.intl?n:i.a.createElement(l.d,{locale:"en"},n)}}go.defaultProps={appearance:"comment",disabled:!1,extensionHandlers:{},allowHelpDialog:!0,allowNewInsertionBehaviour:!0,quickInsert:!0},go.contextTypes={editorActions:s.a.object,intl:l.h}},"dzF+":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=e=>!!e&&(e.indexOf("image/")>-1||e.indexOf("video/")>-1)},eO16:function(e,t,n){"use strict";var o=n("T1Ll").unescapeAll;e.exports=function(e,t,n){var r,i,a=t,s={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;t<n;){if(10===(r=e.charCodeAt(t)))return s;if(62===r)return s.pos=t+1,s.str=o(e.slice(a+1,t)),s.ok=!0,s;92===r&&t+1<n?t+=2:t++}return s}for(i=0;t<n&&32!==(r=e.charCodeAt(t))&&!(r<32||127===r);)if(92===r&&t+1<n)t+=2;else{if(40===r&&i++,41===r){if(0===i)break;i--}t++}return a===t||0!==i||(s.str=o(e.slice(a,t)),s.lines=0,s.pos=t,s.ok=!0),s}},eR5l:function(e,t,n){"use strict";var o=n("T1Ll").normalizeReference,r=n("T1Ll").isSpace;e.exports=function(e,t,n,i){var a,s,c,l,d,u,p,h,f,m,b,g,v,y,O,E,w=0,C=e.bMarks[t]+e.tShift[t],T=e.eMarks[t],S=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(C))return!1;for(;++C<T;)if(93===e.src.charCodeAt(C)&&92!==e.src.charCodeAt(C-1)){if(C+1===T)return!1;if(58!==e.src.charCodeAt(C+1))return!1;break}for(l=e.lineMax,O=e.md.block.ruler.getRules("reference"),m=e.parentType,e.parentType="reference";S<l&&!e.isEmpty(S);S++)if(!(e.sCount[S]-e.blkIndent>3||e.sCount[S]<0)){for(y=!1,u=0,p=O.length;u<p;u++)if(O[u](e,S,l,!0)){y=!0;break}if(y)break}for(T=(v=e.getLines(t,S,e.blkIndent,!1).trim()).length,C=1;C<T;C++){if(91===(a=v.charCodeAt(C)))return!1;if(93===a){f=C;break}(10===a||92===a&&++C<T&&10===v.charCodeAt(C))&&w++}if(f<0||58!==v.charCodeAt(f+1))return!1;for(C=f+2;C<T;C++)if(10===(a=v.charCodeAt(C)))w++;else if(!r(a))break;if(!(b=e.md.helpers.parseLinkDestination(v,C,T)).ok)return!1;if(d=e.md.normalizeLink(b.str),!e.md.validateLink(d))return!1;for(s=C=b.pos,c=w+=b.lines,g=C;C<T;C++)if(10===(a=v.charCodeAt(C)))w++;else if(!r(a))break;for(b=e.md.helpers.parseLinkTitle(v,C,T),C<T&&g!==C&&b.ok?(E=b.str,C=b.pos,w+=b.lines):(E="",C=s,w=c);C<T&&(a=v.charCodeAt(C),r(a));)C++;if(C<T&&10!==v.charCodeAt(C)&&E)for(E="",C=s,w=c;C<T&&(a=v.charCodeAt(C),r(a));)C++;return!(C<T&&10!==v.charCodeAt(C))&&(!!(h=o(v.slice(1,f)))&&(i||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[h]&&(e.env.references[h]={title:E,href:d}),e.parentType=m,e.line=t+w+1),!0))}},eUCP:function(e,t,n){"use strict";n.r(t),n.d(t,"collab",(function(){return c})),n.d(t,"getVersion",(function(){return u})),n.d(t,"rebaseSteps",(function(){return i})),n.d(t,"receiveTransaction",(function(){return l})),n.d(t,"sendableSteps",(function(){return d}));var o=n("ehfC"),r=function(e,t,n){this.step=e,this.inverted=t,this.origin=n};function i(e,t,n){for(var o=e.length-1;o>=0;o--)n.step(e[o].inverted);for(var i=0;i<t.length;i++)n.step(t[i]);for(var a=[],s=0,c=e.length;s<e.length;s++){var l=e[s].step.map(n.mapping.slice(c));c--,l&&!n.maybeStep(l).failed&&(n.mapping.setMirror(c,n.steps.length-1),a.push(new r(l,l.invert(n.docs[n.docs.length-1]),e[s].origin)))}return a}var a=function(e,t){this.version=e,this.unconfirmed=t};var s=new o.PluginKey("collab");function c(e){return void 0===e&&(e={}),e={version:e.version||0,clientID:null==e.clientID?Math.floor(4294967295*Math.random()):e.clientID},new o.Plugin({key:s,state:{init:function(){return new a(e.version,[])},apply:function(e,t){var n=e.getMeta(s);return n||(e.docChanged?new a(t.version,t.unconfirmed.concat(function(e){for(var t=[],n=0;n<e.steps.length;n++)t.push(new r(e.steps[n],e.steps[n].invert(e.docs[n]),e));return t}(e))):t)}},config:e,historyPreserveItems:!0})}function l(e,t,n,r){for(var c=s.getState(e),l=c.version+t.length,d=s.get(e).spec.config.clientID,u=0;u<n.length&&n[u]==d;)++u;var p=c.unconfirmed.slice(u);if(!(t=u?t.slice(u):t).length)return e.tr.setMeta(s,new a(l,p));var h=p.length,f=e.tr;if(h)p=i(p,t,f);else{for(var m=0;m<t.length;m++)f.step(t[m]);p=[]}var b=new a(l,p);return r&&r.mapSelectionBackward&&e.selection instanceof o.TextSelection&&(f.setSelection(o.TextSelection.between(f.doc.resolve(f.mapping.map(e.selection.anchor,-1)),f.doc.resolve(f.mapping.map(e.selection.head,-1)),-1)),f.updated&=-2),f.setMeta("rebased",h).setMeta("addToHistory",!1).setMeta(s,b)}function d(e){var t=s.getState(e);return 0==t.unconfirmed.length?null:{version:t.version,steps:t.unconfirmed.map((function(e){return e.step})),clientID:s.get(e).spec.config.clientID,get origins(){return this._origins||(this._origins=t.unconfirmed.map((function(e){return e.origin})))}}}function u(e){return s.getState(e).version}},eryT:function(e,t,n){"use strict";var o=n("ehfC"),r=n("9dFV"),i=n("Czhu");n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l}));const a=new o.PluginKey("expandPlugin"),{createPluginState:s,createCommand:c,getPluginState:l}=Object(r.a)(a,(e,t)=>{switch(t.type){case"SET_EXPAND_REF":return Object(i.a)(Object(i.a)({},e),{},{expandRef:t.data.ref});default:return e}})},evQN:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return h}));var o=n("I9T1"),r=n("3uux"),i=n("VA4Z"),a=n("qeFW"),s=n("c9+K"),c=n("Rljp"),l=n("h3S+");const d=(e="selected")=>(t,n)=>{const{active:o,currentIndex:r,items:i,typeAheadHandler:s}=a.a.getState(t);return!(!o||!s)&&(s.selectItem&&i[r]?h(s,i[r],e)(t,n):m(t,(e,o)=>f(e,o)(t,n)))},u=(e="selected")=>(t,n)=>{const{active:o,items:r,typeAheadHandler:i}=a.a.getState(t);return!!(o&&i&&i.selectItem)&&(1===r.length?h(i,r[0],e)(t,n):(r&&0!==r.length||Object(l.a)()(t,n),!1))},p=e=>(t,n)=>{const{active:o,items:r,typeAheadHandler:i}=a.a.getState(t);return!!(o&&i&&i.selectItem&&r[e])&&h(i,r[e])(t,n)},h=(e,t,n="selected")=>(s,l)=>m(s,(d,u)=>{const p=e.selectItem(s,t,(e,t={})=>{let n=s.tr;return n=n.setMeta(a.a,{action:i.a.SELECT_CURRENT}).replaceWith(d,u,o.Fragment.empty),Object(r.a)(e,t)(s,n,d)},{mode:n});return Object(c.a)(t.mention)?!("space"===n||!l)&&(l(s.tr.delete(d,u)),!0):!1===p?f(d,u)(s,l):(l&&l(p),!0)}),f=(e,t)=>(n,o)=>{const{query:r,trigger:i}=a.a.getState(n),s=n.schema.text(i+r);return o&&o(n.tr.replaceWith(e,t,s)),!0},m=(e,t)=>{const n=Object(s.a)(e);return!(!n||-1===n.start)&&t(n.start,n.end)}},"f+8s":function(e,t,n){"use strict";var o=n("tVIO"),r=n("4FMG"),i=n("3l5s"),a=n("Gc+k"),s=n("ehfC"),c=n("czJC");var l=n("TIUX"),d=n("xFa8");n.d(t,"a",(function(){return u}));const u=e=>(t,n)=>{const{textColor:u}=t.schema.marks;if(u){const u=i.c.getState(t),p=Object(a.b)(t),h=function(e,t,n){const i=n.find(({value:t})=>t===e),a=n.find(({value:e})=>e===t),s=i?i.label:e,c=a?a.label:t||"";return Object(o.d)({action:r.a.FORMATTED,actionSubject:r.b.TEXT,actionSubjectId:r.c.FORMAT_COLOR,eventType:r.d.TRACK,attributes:{newColor:s.toLowerCase(),previousColor:c.toLowerCase()}})}(e,p,u.paletteExpanded||u.palette);return!u.disabled&&(e===u.defaultColor?(h((e,t)=>{const{schema:n,selection:o}=e,{textColor:r}=n.marks;let a=e.tr;if(o instanceof s.TextSelection){const{from:t,to:n,$cursor:i}=o;a=i?e.tr.removeStoredMark(r):e.tr.removeMark(t,n,r)}return o instanceof c.a&&o.forEachCell((e,t)=>{const n=t,o=t+e.nodeSize;a.doc.nodesBetween(a.mapping.map(n),a.mapping.map(o),(e,t)=>{if(!e.isText)return!0;const i=Math.max(t,a.mapping.map(n)),s=Math.min(t+e.nodeSize,a.mapping.map(o));return a.removeMark(i,s,r),!0})}),t&&t(a.setMeta(i.c,{action:i.a.RESET_COLOR})),!0})(t,n),!0):(h((e=>(t,n)=>{const{textColor:o}=t.schema.marks;let r=t.tr;return Object(d.a)(t)?(n&&n(r.setMeta(i.c,{action:i.a.DISABLE})),!1):(n&&(t.tr.setMeta(i.c,{action:i.a.SET_COLOR,color:e}),t.tr.scrollIntoView(),Object(l.i)(o,{color:e})(t,n)),!0)})(e))(t,n),!0))}return!1}},fDJo:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var o=n("czJC"),r=n("9hj9");const i=(e,t)=>{const{code:n}=e.schema.marks,o=t>=0&&e.doc.nodeAt(t);return!!o&&!!o.marks.filter(e=>e.type===n).length},a=(e,t)=>{const{from:n,to:o,empty:r}=e.selection;if(r)return!!t.isInSet(e.tr.storedMarks||e.selection.$from.marks());let i=!1;return e.doc.nodesBetween(n,o,e=>{i=i||t.isInSet(e.marks)}),i},s=(e,t)=>{const{$from:n,from:r,to:i,empty:a}=e.selection;if(a)return!!t.isInSet(e.storedMarks||n.marks());let s=!1;return e.selection instanceof o.a?e.selection.forEachCell((n,o)=>{const r=o,i=o+n.nodeSize;s||(s=e.doc.rangeHasMark(r,i,t))}):s=e.doc.rangeHasMark(r,i,t),s},c=e=>(e=>r.a.filter(t=>{if(e.schema.marks[t]){const{$from:n,empty:o}=e.selection,{marks:r}=e.schema;return o?!!r[t].isInSet(e.storedMarks||n.marks()):s(e,r[t])}return!1}).length>0)(e)||(e=>{let{from:t,to:n}=e.selection,o=!1;return e.doc.nodesBetween(t,n,e=>-1===r.b.indexOf(e.type.name)||(o=!0,!1)),o})(e)},fPje:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var o=n("Czhu"),r=n("mSFF"),i=n("J64l"),a=n("m23B"),s=n("qPpp");const c=["center","wide","full-width"],l=["wrap-left","wrap-right"],d=(e,t)=>{if("number"!=typeof t||isNaN(t)||!e)return!1;const n=e.state.doc.resolve(t),{expand:o,nestedExpand:r,layoutColumn:i}=e.state.schema.nodes;return!!Object(a.findParentNodeOfTypeClosestToPos)(n,[o,r,i])},u=(e,t,n=12,i,a)=>{let s=t.width;const l=t.layout,d=c.indexOf(l)>-1,u=c.indexOf(e)>-1,p=r.e.indexOf(e)>-1,h=r.e.indexOf(l)>-1;if(d&&Object(r.d)(e,i,a))(!s||s>=100||"center"!==l)&&(s=50);else if(e!==l&&["full-width","wide"].indexOf(l)>-1)s=void 0;else if(s){const e=Math.round(s/100*n);let t=e;h&&u?(t=2*Math.floor(t/2),s=void 0):d&&p&&(e<=1?t=2:e>=n&&(t=10)),t!==e&&(s=t/n*100)}return Object(o.a)(Object(o.a)({},t),{},{layout:e,width:s})};function p({$pos:e,akEditorWideLayoutWidth:t,allowBreakoutSnapPoints:n,containerWidth:o,gridSize:r,gridWidth:a,insideInlineLike:c,insideLayout:l,isVideoFile:d,lineLength:u,offsetLeft:p,wrappedLayout:h}){const f=[];for(let s=0;s<a;s++){const e=Object(i.c)(s,u,a);f.push(l?e:e-p)}f.push(u-p);const m=h||c?1:2,b=Object(i.c)(m,u,r);let g=f.filter(e=>e>=b);if(!e)return g;g=d?g.filter(e=>e>320):g;if("doc"===e.parent.type.name&&n){g.push(t);const e=o-s.d;e>t&&g.push(e)}return g=g.sort((e,t)=>e-t),g}},fVkN:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("L21V");const r=Object(o.f)({openLink:{id:"fabric.editor.openLink",defaultMessage:"Open link in a new tab",description:"Opens the link in a new tab"}})},fYIR:function(e,t,n){"use strict";var o;function r(e){return-1!==[o.UP,o.LEFT,o.BACKWARD].indexOf(e)}function i(e){return-1!==[o.RIGHT,o.DOWN,o.FORWARD].indexOf(e)}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),function(e){e.UP="up",e.RIGHT="right",e.DOWN="down",e.LEFT="left",e.BACKWARD="backward",e.FORWARD="forward"}(o||(o={}))},fttP:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return p}));var o=n("ehfC"),r=n("lELC"),i=n("3IV/"),a=n("HCLf"),s=n("gyAA");const c=[i.R100,i.R300,i.R500,i.Y100,i.Y300,i.Y500,i.G100,i.G300,i.G500,i.T100,i.T300,i.T500,i.B100,i.B300,i.B500,i.P100,i.P300,i.P500,i.N70,i.N200,i.N800].map(e=>({solid:e,selection:Object(a.J)(e,.2)})),l=e=>{let t=0;for(let o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t&=t;const n=Math.abs(t)%c.length;return{index:n,color:c[n]}},d=(e,t)=>t.find().reduce((t,n)=>n.spec.pointer.sessionId===e?t.concat(n):t,[]);const u=(e,t,n,o,i)=>{let a=[];const c=l(n),d=c.index.toString();if(o){const o=`telepointer color-${d} telepointer-selection`;a.push(r.a.inline(e,t,{class:o,"data-initial":i},{pointer:{sessionId:n}}))}const u=document.createElement("span");return u.textContent=s.a,u.className=`telepointer color-${d} telepointer-selection-badge`,u.style.cssText=function(e){const t=e&&e.color||"black";return`border-left: 1px solid ${t}; border-right: 1px solid ${t}; margin-right: -2px;`}({color:c.color.solid})+";",u.setAttribute("data-initial",i),a.concat(r.a.widget(t,u,{pointer:{sessionId:n},key:"telepointer-"+n}))},p=(e,t,n,r)=>{const{schema:i,tr:a}=t;let s=(e.content||[]).map(e=>i.nodeFromJSON(e));if(!!s.length&&(a.setMeta("addToHistory",!1),a.replaceWith(0,t.doc.nodeSize-2,s),a.setSelection(o.Selection.atStart(a.doc)),a.setMeta("replaceDocument",!0),void 0!==typeof n&&r&&r.useNativePlugin)){const e={version:n,unconfirmed:[]};a.setMeta("collab$",e)}return a}},fyDS:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("3IV/"),r=n("3QpL");const i=function(e,t){const{r:n,g:o,b:i}=r.a.convert(e).rgb;return`rgba(${n}, ${o}, ${i}, ${t})`}(o.N800,.12)},gA4l:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("ERkP")),r=i(n("ZUNO"));function i(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var s=function(e){return o.default.createElement(r.default,a({dangerouslySetGlyph:'<svg width="16" height="16" viewBox="0 0 16 16" focusable="false" role="presentation"><path fill="#2684FF" fill-rule="evenodd" d="M0 1.994C0 .893.895 0 1.994 0h12.012C15.107 0 16 .895 16 1.994v12.012A1.995 1.995 0 0 1 14.006 16H1.994A1.995 1.995 0 0 1 0 14.006V1.994zM4.667 3C3.747 3 3 3.746 3 4.667v6.666C3 12.253 3.746 13 4.667 13h6.666c.92 0 1.667-.746 1.667-1.667V4.667C13 3.747 12.254 3 11.333 3H4.667zM5 5v6h6V5H5z"/></svg>'},e,{size:"small"}))};s.displayName="Task16Icon";var c=s;t.default=c},gRiq:function(e,t,n){"use strict";n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return b}));var o=n("Czhu"),r=n("jyPs"),i=(n("czJC"),n("m23B")),a=n("ANI8"),s=n("cZYF"),c=n("JzyM"),l=n("DBvH"),d=n("Vqim"),u=n("DAa0");const p=e=>{const t=[];if(e.lastChild){const n=e.lastChild.childNodes;for(let e=0,o=n.length;e<o;e++){const o=n[e];if(t[e]=o.getBoundingClientRect().height+1,o.classList.contains("sticky")&&0===e){const n=window.getComputedStyle(o),r=Object(l.e)(n.paddingTop||"");t[e]-=r?r+1:1}}}return t},h=(e,t,n=0)=>{const o=Object(s.a)(t);if(!o)return null;let r=0,i=n;for(let s=0;s<o.top;s++){const t=e[s];t&&(i+=t-1)}const a=[];for(let s=o.top;s<o.bottom;s++){const t=e[s];t&&(r+=t-1,a.push(s))}return{top:i+r/2-u.u/2,indexes:a}},f=e=>{const t=[];for(let n=0,o=e.length;n<o;n++){const o=e[n];if(!o)continue;let r=e.length;for(let t=n+1,i=e.length;t<i;t++)if(e[t]){r=t;break}t.push({startIndex:n,endIndex:r,height:o})}return t},m=(e,t,n=[],o,r)=>{const i=[];return(Object(a.b)(e)(t)||n.indexOf(e)>-1&&!r)&&(i.push(d.c.HOVERED_CELL_ACTIVE),o&&i.push(d.c.HOVERED_CELL_IN_DANGER)),i.join(" ")},b=e=>t=>n=>{const a=Object(c.c)(n.selection);if(!a)return n;const s=r.b.get(a.node),l=t-1;if(t<=0)throw Error("Row Index less or equal 0 isn't not allowed since there is not a previous to copy");if(t>s.height)return n;const d=a.node,{nodes:{tableRow:u}}=e,p=s.cellsInRect({left:0,right:s.width,top:l,bottom:l+1}),h=l*s.width,f=t*s.width,m=s.map.slice(h,h+s.width),b=s.map.slice(f,f+s.width);let g=[],v=[];for(let e=0;e<m.length;){const t=m[e],r=t+a.start,i=n.doc.nodeAt(r);if(!i)continue;const s=Object(o.a)(Object(o.a)({},i.attrs),{},{colspan:1,rowspan:1}),c=i.type.createAndFill(s);if(!c)return n;if(b.indexOf(t)>-1)v.push({pos:r,node:i});else if(p.indexOf(t)>-1){if(i.attrs.colspan>1){const t=i.type.createAndFill(Object(o.a)(Object(o.a)({},s),{},{colspan:i.attrs.colspan}));if(!t)return n;g.push(t),e+=i.attrs.colspan;continue}g.push(c)}else g.push(c);e++}v.forEach(e=>{n.setNodeMarkup(e.pos,void 0,Object(o.a)(Object(o.a)({},e.node.attrs),{},{rowspan:e.node.attrs.rowspan+1}))});const y=d.child(l);let O=a.start;for(let e=0;e<t;e++)O+=d.child(e).nodeSize;return Object(i.safeInsert)(u.createChecked(y.attrs,g,y.marks),O)(n)}},gyAA:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=""},"h3S+":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("qeFW"),r=n("c9+K");const i=()=>(e,t)=>{const n=Object(r.a)(e);if(null===n)return!1;const{start:i,end:a}=n,{schema:s}=e,c=s.marks.typeAheadQuery;if(-1===i)return!1;const{typeAheadHandler:l}=o.a.getState(e);return l&&l.dismiss&&l.dismiss(e),t&&t(e.tr.removeMark(i,a,c).removeStoredMark(c)),!0}},h75s:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l}));const o=e=>{const t=[];return(e.steps||[]).forEach(n=>{const{to:o,from:r,slice:i}=n,a=i&&i.content?i.content.size:0;for(let s=r;s<=o+a;s++)if(s<=e.doc.content.size){const n=e.doc.resolve(s).node(1);n&&!t.find(e=>e===n)&&t.push(n)}}),t},r=e=>{try{e.check()}catch(t){return!1}return!0},i=e=>e.every(r),a=e=>Boolean(e&&e.type&&"paragraph"===e.type.name);var s;!function(e){e[e.selectedInRange=0]="selectedInRange",e[e.selectedInside=1]="selectedInside"}(s||(s={}));const c=(e,t,n,o)=>{const r=Math.min(e,t),i=Math.max(e,t),a=n,c=n+o;return e===t?null:r<=a&&c<i||r<a&&c<=i?s.selectedInRange:a<=e&&t<=c?s.selectedInside:null},l=(e,t)=>{const n=e.selection.$from.node(-1);return n&&n.type.validContent(t)}},hYG7:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return u}));var o=n("Vqim"),r=n("eGvA"),i=n("DBvH"),a=n("pWSx");const s=e=>e===r.c.LEFT;function c(e,t,n,o=-1){let r=t,i=null;const{mediaSingle:a,media:s,mediaGroup:c}=n.nodes;do{if(r=e.resolve(-1===o?r.before():r.after()),!r)return null;if(i=(-1===o?r.nodeBefore:r.nodeAfter)||r.parent,!i||i.type===n.nodes.doc)return null;if(i.type===a||i.type===s||i.type===c)return i}while(r.depth>0);return null}const l=(e,t,n,o)=>{let r=n,i=-1===o?r.nodeBefore:r.nodeAfter;if(i&&(i.isTextblock||i.isText))return!0;for(;r.depth>0;){if(r=e.resolve(-1===o?r.before():r.after()),!r)return!1;if(i=(-1===o?r.nodeBefore:r.nodeAfter)||r.parent,!i||i.type===t.nodes.doc)return!1;if(i.isTextblock)return!0}let a=i;for(;a&&a.firstChild;)if(a=a.firstChild,a&&(a.isTextblock||a.isText))return!0;return!1};function d(e){let t;return e.attrs.layout&&(t=e.attrs.layout),e.marks&&e.marks.length&&(t=(e.marks.find(e=>"breakout"===e.type.name)||{attrs:{mode:""}}).attrs.mode),-1===["wide","full-width"].indexOf(t)?"":t}const u=e=>{if("BUTTON"===e.nodeName||Object(i.b)(e,"button"))return!0;let t,n=e;for(;n;){if(n.className&&(n.getAttribute("class")||"").indexOf(o.c.TABLE_CONTAINER)>-1){t=n;break}n=n.parentNode}if(t){const n=t.querySelector("."+o.c.ROW_CONTROLS_WRAPPER),r=e&&e.classList&&e.classList.contains(o.c.COLUMN_CONTROLS_DECORATIONS);return n&&n.contains(e)||r}return!!Object(i.b)(e,"."+a.a.BLOCK_CONTAINER)}},hc3R:function(e){e.exports=JSON.parse('{"a":"@atlaskit/emoji","b":"63.0.12"}')},hj8b:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return h}));for(var o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),a="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),s="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),d=i&&(c||+i[1]<57)||s&&c,u=0;u<10;u++)o[48+u]=o[96+u]=String(u);for(u=1;u<=24;u++)o[u+111]="F"+u;for(u=65;u<=90;u++)o[u]=String.fromCharCode(u+32),r[u]=String.fromCharCode(u);for(var p in o)r.hasOwnProperty(p)||(r[p]=o[p]);function h(e){var t=!(d&&(e.ctrlKey||e.altKey||e.metaKey)||(a||l)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?r:o)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}},hrqP:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("kf0m"),r=n("KWMf");function i(e){return Object(r.a)(e,"cell")?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:Object(r.a)(e,"node")&&"cell"===e.node.type.spec.tableRole?e.$anchor:Object(o.a)(e.$head)||Object(o.b)(e.$head)}},htpI:function(e,t,n){"use strict";var o=n("T1Ll").isSpace;e.exports=function(e,t,n,r){var i,a,s,c,l=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(42!==(i=e.src.charCodeAt(l++))&&45!==i&&95!==i)return!1;for(a=1;l<d;){if((s=e.src.charCodeAt(l++))!==i&&!o(s))return!1;s===i&&a++}return!(a<3)&&(r||(e.line=t+1,(c=e.push("hr","hr",0)).map=[t,e.line],c.markup=Array(a+1).join(String.fromCharCode(i))),!0)}},iOxE:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var o=n("Czhu"),r=n("ehfC");const i=new r.PluginKey("contextIdentiferPlugin"),a=e=>{var t;if(e)return null===(t=i.getState(e))||void 0===t?void 0:t.contextIdentifierProvider};t.a=(e,t)=>new r.Plugin({key:i,state:{init:()=>({}),apply:(e,t)=>e.getMeta(i)?e.getMeta(i):t},view:e=>{const n=(t,n)=>{n&&"contextIdentifierProvider"===t&&n.then(t=>{const n=e.state.tr.setMeta(i,{contextIdentifierProvider:Object(o.a)({},t)});e.dispatch(n)})};return t&&t.subscribe("contextIdentifierProvider",n),{destroy:()=>{t&&t.unsubscribe("contextIdentifierProvider",n)}}}})},irWM:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("xV3C"),a=n("MjPE"),s=n("L21V"),c=n("w301"),l=n("3IV/"),d=n("KsTJ");const u={[a.b.SELF]:{background:Object(c.a)({light:l.B400,dark:l.B200}),border:"transparent",text:Object(c.a)({light:l.N20,dark:l.DN30})},[a.b.RESTRICTED]:{background:"transparent",border:Object(c.a)({light:l.N500,dark:l.DN80}),text:Object(c.a)({light:l.N500,dark:l.DN100})},[a.b.DEFAULT]:{background:Object(c.a)({light:l.N30A,dark:l.DN80}),border:"transparent",text:Object(c.a)({light:l.N500,dark:l.DN800})}},p=(e,t)=>{const n=u[e.mentionType][t];return"string"==typeof n?n:n(e)},h=d.default.span`
  ${e=>`\n  display: inline;\n  background: ${p(e,"background")};\n  border: 1px solid ${p(e,"border")};\n  border-radius: 20px;\n  color: ${p(e,"text")};\n  cursor: pointer;\n  padding: 0 0.3em 2px 0.23em;\n  line-height: 1.714;\n  font-size: 1em;\n  font-weight: normal;\n  word-break: break-word;\n`};
`;var f=n("NC4b"),m=n("pL3m"),b=n("lbXe"),g=n("LMBy");class v extends r.a.PureComponent{constructor(){super(...arguments),this.handleOnClick=e=>{const{id:t,text:n,onClick:o}=this.props;o&&o(t,n,e)},this.handleOnMouseEnter=e=>{const{id:t,text:n,onMouseEnter:o,onHover:r}=this.props;o&&o(t,n,e),this.hoverTimeout=window.setTimeout(()=>{r&&r(),this.hoverTimeout=void 0},1e3)},this.handleOnMouseLeave=e=>{const{id:t,text:n,onMouseLeave:o}=this.props;o&&o(t,n,e),this.hoverTimeout&&clearTimeout(this.hoverTimeout)},this.getMentionType=()=>{const{accessLevel:e,isHighlighted:t}=this.props;return t?a.b.SELF:Object(a.g)(e)?a.b.RESTRICTED:a.b.DEFAULT}}componentWillUnmount(){this.hoverTimeout&&clearTimeout(this.hoverTimeout)}renderUnknownUserError(e){return r.a.createElement(s.b,Object.assign({},g.a.unknownUserError,{values:{userId:e.slice(-5)}}),e=>"@"+e)}render(){const{handleOnClick:e,handleOnMouseEnter:t,handleOnMouseLeave:n,props:o}=this,{text:i,id:s,accessLevel:c}=o,l=this.getMentionType(),d="@_|unknown|_"===i,u=r.a.createElement(h,{mentionType:l,onClick:e,onMouseEnter:t,onMouseLeave:n},d?this.renderUnknownUserError(s):i||"@...");return r.a.createElement("span",{"data-mention-id":s,"data-access-level":c,spellCheck:!1},l===a.b.RESTRICTED?r.a.createElement(f.a,{name:i},u):u)}}var y=Object(b.a)({onClick:(e,t)=>{const{id:n,text:o,accessLevel:r}=t;return Object(m.f)(e)("mention","selected",o,n,r)},onHover:(e,t)=>{const{id:n,text:o,accessLevel:r}=t;return Object(m.f)(e)("mention","hovered",o,n,r)}})(v),O=n("zDE1");n.d(t,"a",(function(){return E}));class E extends r.a.PureComponent{constructor(e){super(e),this.handleMentionProvider=e=>{const{id:t,mentionProvider:n,text:o}=e;n?n.then(e=>{const n={isHighlighted:e.shouldHighlightMention({id:t})};if(!o&&Object(i.d)(e)){const o=e.resolveMentionName(t);Object(a.f)(o)?o.then(e=>{this.setStateSafely({resolvedMentionName:this.processName(e)})}):n.resolvedMentionName=this.processName(o)}this.setStateSafely(n)}).catch(()=>{this.setStateSafely({isHighlighted:!1})}):this.setStateSafely({isHighlighted:!1})},this._isMounted=!1,this.state={isHighlighted:!1}}componentDidMount(){this.handleMentionProvider(this.props),this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}UNSAFE_componentWillReceiveProps(e){const{props:t}=this;t.id===e.id&&t.mentionProvider===e.mentionProvider||this.handleMentionProvider(e)}setStateSafely(e){this._isMounted?this.setState(e):Object(O.a)("[ResourcedMention]: cannot setState when component is unmounted.")}processName(e){let t;switch(e.status){case a.a.OK:t=e.name||"";break;case a.a.SERVICE_ERROR:case a.a.UNKNOWN:default:t="_|unknown|_"}return"@"+t}render(){const{props:e,state:t}=this;return r.a.createElement(y,{id:e.id,text:t.resolvedMentionName||e.text,isHighlighted:t.isHighlighted,accessLevel:e.accessLevel,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave})}}},j4SW:function(e,t,n){"use strict";var o=n("OqJb").HTML_TAG_RE;e.exports=function(e,t){var n,r,i,a=e.pos;return!!e.md.options.html&&(i=e.posMax,!(60!==e.src.charCodeAt(a)||a+2>=i)&&(!(33!==(n=e.src.charCodeAt(a+1))&&63!==n&&47!==n&&!function(e){var t=32|e;return t>=97&&t<=122}(n))&&(!!(r=e.src.slice(a).match(o))&&(t||(e.push("html_inline","",0).content=e.src.slice(a,a+r[0].length)),e.pos+=r[0].length,!0))))}},j8G4:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));const o=e=>!!e.dimensions,r=e=>{if(!e.original||!e.original.width||!e.original.height)return{};return{dimensions:{width:e.original.width,height:e.original.height},scaleFactor:1}}},jVwy:function(e,t,n){"use strict";function o(e,t){let n=e[t];return n||console.warn(`Text color palette does not have an internationalization message for color ${t.toUpperCase()}.\nYou must add a message description to properly translate this color.\nUsing current label as default message.\nThis could have happen when someone changed the 'colorPalette' from 'adf-schema' without updating this file.\n`),n}n.d(t,"a",(function(){return o}))},jfwB:function(e,t,n){var o=n("UFJf");e.exports=function(e,t){var n=o(e),r=o(t);return n.getTime()-r.getTime()}},jlYC:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("BMbf"),a=n("KsTJ"),s=n("w301"),c=n("3IV/");const l=a.default.div`
  margin: 0;
  word-wrap: break-word;
  min-width: 0;
  flex: 1 1 auto;
`,d=a.default.div`
  display: flex;
  flex-direction: row;
  padding: 6px 3px;
  position: relative;
`,u=a.default.div`
  display: flex;
  flex-direction: row;
  margin: ${Object(i.h)()}px 0 0 0;
  padding: ${Object(i.h)()}px;
  padding-left: ${1.5*Object(i.h)()}px;
  border-radius: ${Object(i.c)()}px;
  background-color: ${Object(s.a)({light:c.N20A,dark:c.DN50})};
  position: relative;

  .decision-item {
    cursor: initial;
  }
`,p=(a.default.div`
  margin: -2px 8px;
`,a.default.span`
  margin: ${e=>`0 0 0 ${e.offset}px;`}
  position: absolute;
  color: ${c.N80};
  pointer-events: none;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  max-width: calc(100% - 50px);
`);n.d(t,"a",(function(){return h}));class h extends o.PureComponent{renderPlaceholder(){const{children:e,placeholder:t,showPlaceholder:n,itemType:o}=this.props;if(!n||!t||e)return null;const a=Object(i.h)()*("TASK"===o?3:3.5);return r.a.createElement(p,{contentEditable:!1,offset:a},t)}renderMessageAppearance(){const{contentRef:e,children:t,icon:n,itemType:o,dataAttributes:i}=this.props;return"TASK"===o?r.a.createElement(d,null,n,this.renderPlaceholder(),r.a.createElement(l,Object.assign({},i,{innerRef:e}),t)):"DECISION"===o?r.a.createElement(u,{"data-decision-wrapper":"true"},n,this.renderPlaceholder(),r.a.createElement(l,Object.assign({},i,{innerRef:e}),t)):null}render(){return this.renderMessageAppearance()}}h.defaultProps={appearance:"inline"}},jyDn:function(e,t,n){"use strict";var o=n("T1Ll").isSpace;function r(e,t){var n,r,i,a;return r=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],42!==(n=e.src.charCodeAt(r++))&&45!==n&&43!==n||r<i&&(a=e.src.charCodeAt(r),!o(a))?-1:r}function i(e,t){var n,r=e.bMarks[t]+e.tShift[t],i=r,a=e.eMarks[t];if(i+1>=a)return-1;if((n=e.src.charCodeAt(i++))<48||n>57)return-1;for(;;){if(i>=a)return-1;if(!((n=e.src.charCodeAt(i++))>=48&&n<=57)){if(41===n||46===n)break;return-1}if(i-r>=10)return-1}return i<a&&(n=e.src.charCodeAt(i),!o(n))?-1:i}e.exports=function(e,t,n,o){var a,s,c,l,d,u,p,h,f,m,b,g,v,y,O,E,w,C,T,S,k,x,A,j,I,M,N,R,P=!1,L=!0;if(e.sCount[t]-e.blkIndent>=4)return!1;if(e.listIndent>=0&&e.sCount[t]-e.listIndent>=4&&e.sCount[t]<e.blkIndent)return!1;if(o&&"paragraph"===e.parentType&&e.tShift[t]>=e.blkIndent&&(P=!0),(A=i(e,t))>=0){if(p=!0,I=e.bMarks[t]+e.tShift[t],v=Number(e.src.substr(I,A-I-1)),P&&1!==v)return!1}else{if(!((A=r(e,t))>=0))return!1;p=!1}if(P&&e.skipSpaces(A)>=e.eMarks[t])return!1;if(g=e.src.charCodeAt(A-1),o)return!0;for(b=e.tokens.length,p?(R=e.push("ordered_list_open","ol",1),1!==v&&(R.attrs=[["start",v]])):R=e.push("bullet_list_open","ul",1),R.map=m=[t,0],R.markup=String.fromCharCode(g),O=t,j=!1,N=e.md.block.ruler.getRules("list"),C=e.parentType,e.parentType="list";O<n;){for(x=A,y=e.eMarks[O],u=E=e.sCount[O]+A-(e.bMarks[t]+e.tShift[t]);x<y;){if(9===(a=e.src.charCodeAt(x)))E+=4-(E+e.bsCount[O])%4;else{if(32!==a)break;E++}x++}if((d=(s=x)>=y?1:E-u)>4&&(d=1),l=u+d,(R=e.push("list_item_open","li",1)).markup=String.fromCharCode(g),R.map=h=[t,0],k=e.tight,S=e.tShift[t],T=e.sCount[t],w=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=l,e.tight=!0,e.tShift[t]=s-e.bMarks[t],e.sCount[t]=E,s>=y&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,t,n,!0),e.tight&&!j||(L=!1),j=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=w,e.tShift[t]=S,e.sCount[t]=T,e.tight=k,(R=e.push("list_item_close","li",-1)).markup=String.fromCharCode(g),O=t=e.line,h[1]=O,s=e.bMarks[t],O>=n)break;if(e.sCount[O]<e.blkIndent)break;if(e.sCount[t]-e.blkIndent>=4)break;for(M=!1,c=0,f=N.length;c<f;c++)if(N[c](e,O,n,!0)){M=!0;break}if(M)break;if(p){if((A=i(e,O))<0)break}else if((A=r(e,O))<0)break;if(g!==e.src.charCodeAt(A-1))break}return(R=p?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(g),m[1]=O,e.line=O,e.parentType=C,L&&function(e,t){var n,o,r=e.level+2;for(n=t+2,o=e.tokens.length-2;n<o;n++)e.tokens[n].level===r&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}(e,b),!0}},koe5:function(e,t,n){"use strict";var o=n("Czhu"),r=n("HbGN"),i=n("ERkP"),a=n.n(i),s=n("a8dO"),c=n("zJ/j"),l=n("3IV/"),d=n("HCLf");const u={danger:{default:{light:"inherit",dark:"inherit"},hover:{light:l.N30A,dark:l.N30A},active:{light:Object(d.J)(l.B75,.6),dark:Object(d.J)(l.B75,.6)}}},p={danger:{default:{light:l.N400,dark:l.DN400},hover:{light:l.R300,dark:l.R300},active:{light:l.R300,dark:l.R300}}},h=(e,{appearance:t="default",state:n="default",mode:o="light"})=>e[t]&&e[t][n]?e[t][n][o]:"initial",f={"&&":{padding:"0px","&[href]":{padding:"0 2px"}},"& > span":{margin:"0px"}};t.a=({title:e,icon:t,iconAfter:n,onClick:i,onMouseEnter:l,onMouseLeave:d,selected:m,disabled:b,href:g,target:v,appearance:y="subtle",children:O,className:E,tooltipContent:w,testId:C,hideTooltipOnClick:T=!0})=>{const S=(t||n)&&!O?f:{};return a.a.createElement(s.a,{content:w||e,hideTooltipOnClick:T,position:"top"},a.a.createElement("div",{onMouseEnter:l,onMouseLeave:d},a.a.createElement(c.a,{className:E,theme:(e,t)=>{const n=e(t),{buttonStyles:i}=n,a=Object(r.a)(n,["buttonStyles"]);return Object(o.a)({buttonStyles:Object(o.a)(Object(o.a)(Object(o.a)({},i),S),"danger"===y&&(s={appearance:y,state:t.state,mode:t.mode},{background:h(u,s),color:h(p,s)}))},a);var s},"aria-label":e,spacing:"compact",href:g,target:v,appearance:y,"aria-haspopup":!0,iconBefore:t||void 0,iconAfter:n,onClick:i,isSelected:m,isDisabled:b,testId:C},O)))}},lELC:function(e,t,n){"use strict";n.d(t,"a",(function(){return wt})),n.d(t,"b",(function(){return kt})),n.d(t,"c",(function(){return _t}));var o=n("ehfC"),r=n("I9T1"),i=n("UdmJ"),a={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var s=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);a.mac=/Mac/.test(navigator.platform);var d=a.ie=!!(c||l||s);a.ie_version=c?document.documentMode||6:l?+l[1]:s?+s[1]:null,a.gecko=!d&&/gecko\/(\d+)/i.test(navigator.userAgent),a.gecko_version=a.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var u=!d&&/Chrome\/(\d+)/.exec(navigator.userAgent);a.chrome=!!u,a.chrome_version=u&&+u[1],a.ios=!d&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),a.android=/Android \d/.test(navigator.userAgent),a.webkit="webkitFontSmoothing"in document.documentElement.style,a.safari=/Apple Computer/.test(navigator.vendor),a.webkit_version=a.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var p=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},h=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},f=function(e,t,n){var o=document.createRange();return o.setEnd(e,null==n?e.nodeValue.length:n),o.setStart(e,t||0),o},m=function(e,t,n,o){return n&&(g(e,t,n,o,-1)||g(e,t,n,o,1))},b=/^(img|br|input|textarea|hr)$/i;function g(e,t,n,o,r){for(;;){if(e==n&&t==o)return!0;if(t==(r<0?0:v(e))){var i=e.parentNode;if(1!=i.nodeType||y(e)||b.test(e.nodeName)||"false"==e.contentEditable)return!1;t=p(e)+(r<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(r<0?-1:0)]).contentEditable)return!1;t=r<0?v(e):0}}}function v(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function y(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var O=function(e){var t=e.isCollapsed;return t&&a.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function E(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function w(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function C(e,t){return"number"==typeof e?e:e[t]}function T(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.left+e.clientWidth,top:t.top,bottom:t.top+e.clientHeight}}function S(e,t,n){for(var o=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,a=n||e.dom;a;a=h(a))if(1==a.nodeType){var s=a==i.body||1!=a.nodeType,c=s?w(i):T(a),l=0,d=0;if(t.top<c.top+C(o,"top")?d=-(c.top-t.top+C(r,"top")):t.bottom>c.bottom-C(o,"bottom")&&(d=t.bottom-c.bottom+C(r,"bottom")),t.left<c.left+C(o,"left")?l=-(c.left-t.left+C(r,"left")):t.right>c.right-C(o,"right")&&(l=t.right-c.right+C(r,"right")),l||d)if(s)i.defaultView.scrollBy(l,d);else{var u=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),l&&(a.scrollLeft+=l);var f=a.scrollLeft-u,m=a.scrollTop-p;t={left:t.left-f,top:t.top-m,right:t.right-f,bottom:t.bottom-m}}if(s)break}}function k(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=h(e));return t}function x(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=o.dom,i=o.top,a=o.left;r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=a&&(r.scrollLeft=a)}}var A=null;function j(e,t){for(var n,o,r=2e8,i=0,a=t.top,s=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var d=void 0;if(1==c.nodeType)d=c.getClientRects();else{if(3!=c.nodeType)continue;d=f(c).getClientRects()}for(var u=0;u<d.length;u++){var p=d[u];if(p.top<=a&&p.bottom>=s){a=Math.max(p.bottom,a),s=Math.min(p.top,s);var h=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(h<r){n=c,r=h,o=h&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==c.nodeType&&h&&(i=l+(t.left>=(p.left+p.right)/2?1:0));continue}}!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(i=l+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,o=document.createRange(),r=0;r<n;r++){o.setEnd(e,r+1),o.setStart(e,r);var i=N(o,1);if(i.top!=i.bottom&&I(t,i))return{node:e,offset:r+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,o):!n||r&&1==n.nodeType?{node:e,offset:i}:j(n,o)}function I(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function M(e,t){var n,o,r,i,s=e.root;if(s.caretPositionFromPoint)try{var c=s.caretPositionFromPoint(t.left,t.top);c&&(r=(n=c).offsetNode,i=n.offset)}catch(b){}if(!r&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(t.left,t.top);l&&(r=(o=l).startContainer,i=o.startOffset)}var d,u=s.elementFromPoint(t.left,t.top+1);if(!u||!e.dom.contains(1!=u.nodeType?u.parentNode:u)){var p=e.dom.getBoundingClientRect();if(!I(t,p))return null;if(!(u=function e(t,n,o){var r=t.childNodes.length;if(r&&o.top<o.bottom)for(var i=Math.max(0,Math.min(r-1,Math.floor(r*(n.top-o.top)/(o.bottom-o.top))-2)),a=i;;){var s=t.childNodes[a];if(1==s.nodeType)for(var c=s.getClientRects(),l=0;l<c.length;l++){var d=c[l];if(I(n,d))return e(s,n,d)}if((a=(a+1)%r)==i)break}return t}(e.dom,t,p)))return null}if(a.safari&&u.draggable&&(r=i=null),u=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(u,t),r){if(a.gecko&&1==r.nodeType&&(i=Math.min(i,r.childNodes.length))<r.childNodes.length){var h,f=r.childNodes[i];"IMG"==f.nodeName&&(h=f.getBoundingClientRect()).right<=t.left&&h.bottom>t.top&&i++}r==e.dom&&i==r.childNodes.length-1&&1==r.lastChild.nodeType&&t.top>r.lastChild.getBoundingClientRect().bottom?d=e.state.doc.content.size:0!=i&&1==r.nodeType&&"BR"==r.childNodes[i-1].nodeName||(d=function(e,t,n,o){for(var r=-1,i=t;i!=e.dom;){var a=e.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>o.left||s.top>o.top)r=a.posBefore;else{if(!(s.right<o.left||s.bottom<o.top))break;r=a.posAfter}}i=a.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,n)}(e,r,i,t))}null==d&&(d=function(e,t,n){var o=j(t,n),r=o.node,i=o.offset,a=-1;if(1==r.nodeType&&!r.firstChild){var s=r.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(r,i,a)}(e,u,t));var m=e.docView.nearestDesc(u,!0);return{pos:d,inside:m?m.posAtStart-m.border:-1}}function N(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function R(e,t){var n=e.docView.domFromPos(t),o=n.node,r=n.offset;if(3==o.nodeType&&(a.webkit||a.gecko)){var i=N(f(o,r,r),0);if(a.gecko&&r&&/\s/.test(o.nodeValue[r-1])&&r<o.nodeValue.length){var s=N(f(o,r-1,r-1),-1);if(s.top==i.top){var c=N(f(o,r,r+1),-1);if(c.top!=i.top)return P(c,c.left<s.left)}}return i}if(1==o.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var l,d=!0;if(r<o.childNodes.length){var u=o.childNodes[r];1==u.nodeType&&(l=u.getBoundingClientRect())}if(!l&&r){var p=o.childNodes[r-1];1==p.nodeType&&(l=p.getBoundingClientRect(),d=!1)}return function(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}(l||o.getBoundingClientRect(),d)}for(var h=-1;h<2;h+=2)if(h<0&&r){var m=void 0,b=3==o.nodeType?f(o,r-1,r):3==(m=o.childNodes[r-1]).nodeType?f(m):1==m.nodeType&&"BR"!=m.nodeName?m:null;if(b){var g=N(b,1);if(g.top<g.bottom)return P(g,!1)}}else if(h>0&&r<v(o)){var y=void 0,O=3==o.nodeType?f(o,r,r+1):3==(y=o.childNodes[r]).nodeType?f(y):1==y.nodeType?y:null;if(O){var E=N(O,-1);if(E.top<E.bottom)return P(E,!0)}}return P(N(3==o.nodeType?f(o):o,0),!1)}function P(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function L(e,t,n){var o=e.state,r=e.root.activeElement;o!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return n()}finally{o!=t&&e.updateState(o),r!=e.dom&&r&&r.focus()}}var D=/[\u0590-\u08ac]/;var _=null,B=null,$=!1;function z(e,t,n){return _==t&&B==n?$:(_=t,B=n,$="up"==n||"down"==n?function(e,t,n){var o=t.selection,r="up"==n?o.$anchor.min(o.$head):o.$anchor.max(o.$head);return L(e,t,(function(){for(var t=e.docView.domFromPos(r.pos).node;;){var o=e.docView.nearestDesc(t,!0);if(!o)break;if(o.node.isBlock){t=o.dom;break}t=o.dom.parentNode}for(var i=R(e,r.pos),a=t.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=f(a,0,a.nodeValue.length).getClientRects()}for(var c=0;c<s.length;c++){var l=s[c];if(l.bottom>l.top&&("up"==n?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var o=t.selection.$head;if(!o.parent.isTextblock)return!1;var r=o.parentOffset,i=!r,a=r==o.parent.content.size,s=getSelection();return D.test(o.parent.textContent)&&s.modify?L(e,t,(function(){var t=s.getRangeAt(0),r=s.focusNode,i=s.focusOffset,a=s.caretBidiLevel;s.modify("move",n,"character");var c=!(o.depth?e.docView.domAfterPos(o.before()):e.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||r==s.focusNode&&i==s.focusOffset;return s.removeAllRanges(),s.addRange(t),null!=a&&(s.caretBidiLevel=a),c})):"left"==n||"backward"==n?i:a}(e,t,n))}var F=function(e,t,n,o){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=o,this.dirty=0},U={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};F.prototype.matchesWidget=function(){return!1},F.prototype.matchesMark=function(){return!1},F.prototype.matchesNode=function(){return!1},F.prototype.matchesHack=function(){return!1},U.beforePosition.get=function(){return!1},F.prototype.parseRule=function(){return null},F.prototype.stopEvent=function(){return!1},U.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},U.border.get=function(){return 0},F.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},F.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var o=this.children[t];if(o==e)return n;n+=o.size}},U.posBefore.get=function(){return this.parent.posBeforeChild(this)},U.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},U.posAfter.get=function(){return this.posBefore+this.size},U.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},F.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var o,r;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(r=o.pmViewDesc)||r.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(r)+r.size:this.posAtStart}var i,a;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(a=i.pmViewDesc)||a.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){s=!1;break}if(c.parentNode.firstChild!=c)break}if(null==s&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart},F.prototype.nearestDesc=function(e,t){for(var n=!0,o=e;o;o=o.parentNode){var r=this.getDesc(o);if(r&&(!t||r.node)){if(!n||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(1==e.nodeType?e:e.parentNode):r.nodeDOM==e))return r;n=!1}}},F.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},F.prototype.posFromDOM=function(e,t,n){for(var o=e;o;o=o.parentNode){var r=this.getDesc(o);if(r)return r.localPosFromDOM(e,t,n)}return-1},F.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var o=this.children[t],r=n+o.size;if(n==e&&r!=n){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<r)return o.descAt(e-n-o.border);n=r}},F.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:p(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+e);var o=this.children[n],r=t+o.size;if(e<r)return o.domFromPos(e-t-o.border);t=r}},F.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var o=-1,r=-1,i=n,a=0;;a++){var s=this.children[a],c=i+s.size;if(-1==o&&e<=c){var l=i+s.border;if(e>=l&&t<=c-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,l);e=i;for(var d=a;d>0;d--){var u=this.children[d-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){o=p(u.dom)+1;break}e-=u.size}-1==o&&(o=0)}if(o>-1&&(c>t||a==this.children.length-1)){t=c;for(var h=a+1;h<this.children.length;h++){var f=this.children[h];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){r=p(f.dom);break}t+=f.size}-1==r&&(r=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:r}},F.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},F.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,o=t.offset;if(1!=n.nodeType||o==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[o]},F.prototype.setSelection=function(e,t,n,o){for(var r=Math.min(e,t),i=Math.max(e,t),s=0,c=0;s<this.children.length;s++){var l=this.children[s],d=c+l.size;if(r>c&&i<d)return l.setSelection(e-c-l.border,t-c-l.border,n,o);c=d}var u=this.domFromPos(e),p=this.domFromPos(t),h=n.getSelection();if(o||!m(u.node,u.offset,h.anchorNode,h.anchorOffset)||!m(p.node,p.offset,h.focusNode,h.focusOffset)){var f=!1;if(a.gecko&&e==t){var b=u.node.childNodes[u.offset-1];b&&"BR"==b.nodeName&&(f=!0)}var g=!1;if((h.extend||e==t)&&!f){h.collapse(u.node,u.offset);try{e!=t&&h.extend(p.node,p.offset),g=!0}catch(O){if(!(O instanceof DOMException))throw O}}if(!g){if(e>t){var v=u;u=p,p=v}var y=document.createRange();y.setEnd(p.node,p.offset),y.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(y)}}},F.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},U.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},F.prototype.markDirty=function(e,t){for(var n=0,o=0;o<this.children.length;o++){var r=this.children[o],i=n+r.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var a=n+r.border,s=i-r.border;if(e>=a&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=a||t!=s||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-a,t-a):r.dirty=3);r.dirty=3}n=i}this.dirty=2},F.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}},Object.defineProperties(F.prototype,U);var H=[],W=function(e){function t(t,n,o,r){var i,a=n.type.toDOM;if("function"==typeof a&&(a=a(o,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:r}))),!n.type.spec.raw){if(1!=a.nodeType){var s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable=!1,a.classList.add("ProseMirror-widget")}e.call(this,t,H,a,null),this.widget=n,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},Object.defineProperties(t.prototype,n),t}(F),V=function(e){function t(t,n,o,r){e.call(this,t,H,n,null),this.textDOM=o,this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(F),K=function(e){function t(t,n,o,r){e.call(this,t,[],o,r),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,o,i){var a=i.nodeViews[n.type.name],s=a&&a(n,i,o);return s&&s.dom||(s=r.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,o))),new t(e,n,s.dom,s.contentDOM||s.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,o){var r=t.create(this.parent,this.mark,!0,o),i=this.children,a=this.size;n<a&&(i=ce(i,n,a,o)),e>0&&(i=ce(i,0,e,o));for(var s=0;s<i.length;s++)i[s].parent=r;return r.children=i,r},t}(F),q=function(e){function t(t,n,o,r,i,a,s,c,l){e.call(this,t,n.isLeaf?H:[],i,a),this.nodeDOM=s,this.node=n,this.outerDeco=o,this.innerDeco=r,a&&this.updateChildren(c,l)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0}};return t.create=function(e,n,o,i,a,s){var c,l,d=a.nodeViews[n.type.name],u=d&&d(n,a,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),o),p=u&&u.dom,h=u&&u.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(p=(c=r.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,h=c.contentDOM);h||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var f=p;return p=oe(p,o,n),u?l=new J(e,n,o,i,p,h,f,u,a,s+1):n.isText?new Y(e,n,o,i,p,f,a):new t(e,n,o,i,p,h,f,a,s+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?r.Fragment.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&re(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,o=this.node.inlineContent,i=t,s=o&&e.composing&&this.localCompositionNode(e,t),c=new ae(this,s&&s.node);!function(e,t,n,o){var r=t.locals(e),i=0;if(0==r.length){for(var a=0;a<e.childCount;a++){var s=e.child(a);o(s,r,t.forChild(i,s),a),i+=s.nodeSize}return}for(var c=0,l=[],d=null,u=0;;){if(c<r.length&&r[c].to==i){for(var p=r[c++],h=void 0;c<r.length&&r[c].to==i;)(h||(h=[p])).push(r[c++]);if(h){h.sort(se);for(var f=0;f<h.length;f++)n(h[f],u,!!d)}else n(p,u,!!d)}var m=void 0,b=void 0;if(d)b=-1,m=d,d=null;else{if(!(u<e.childCount))break;b=u,m=e.child(u++)}for(var g=0;g<l.length;g++)l[g].to<=i&&l.splice(g--,1);for(;c<r.length&&r[c].from<=i&&r[c].to>i;)l.push(r[c++]);var v=i+m.nodeSize;if(m.isText){var y=v;c<r.length&&r[c].from<y&&(y=r[c].from);for(var O=0;O<l.length;O++)l[O].to<y&&(y=l[O].to);y<v&&(d=m.cut(y-i),m=m.cut(0,y-i),v=y,b=-1)}var E=l.length?m.isInline&&!m.isLeaf?l.filter((function(e){return!e.inline})):l.slice():H;o(m,E,t.forChild(i,m),b),i=v}}(this.node,this.innerDeco,(function(t,a,s){t.spec.marks?c.syncToMarks(t.spec.marks,o,e):t.type.side>=0&&!s&&c.syncToMarks(a==n.node.childCount?r.Mark.none:n.node.child(a).marks,o,e),c.placeWidget(t,e,i)}),(function(t,n,r,a){c.syncToMarks(t.marks,o,e),c.findNodeMatch(t,n,r,a)||c.updateNextNode(t,n,r,e,a)||c.addNode(t,n,r,e,i),i+=t.nodeSize})),c.syncToMarks(H,o,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),function e(t,n,o){for(var r=t.firstChild,i=!1,a=0;a<n.length;a++){var s=n[a],c=s.dom;if(c.parentNode==t){for(;c!=r;)r=ie(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(c,r);if(s instanceof K){var l=r?r.previousSibling:t.lastChild;e(s.contentDOM,s.children,o),r=l?l.nextSibling:t.firstChild}}for(;r;)r=ie(r),i=!0;i&&o.trackWrites==t&&(o.trackWrites=null)}(this.contentDOM,this.children,e),a.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,r=n.from,i=n.to;if(!(!(e.state.selection instanceof o.TextSelection)||r<t||i>t+this.node.content.size)){var a=e.root.getSelection(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=v(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(a.focusNode,a.focusOffset);if(s&&this.dom.contains(s.parentNode)){var c=s.nodeValue,l=function(e,t,n,o){for(var r=0,i=0;r<e.childCount&&i<=o;){var a=e.child(r++),s=i;if(i+=a.nodeSize,a.isText){for(var c=a.text;r<e.childCount;){var l=e.child(r++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var d=c.lastIndexOf(t,o-s);if(d>=0&&d+t.length+s>=n)return s+d}}}return-1}(this.node.content,c,r-t,i-t);return l<0?null:{node:s,pos:l,text:c}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,o=t.pos,r=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var a=new V(this,i,n,r);e.compositionNodes.push(a),this.children=ce(this.children,o,o+r.length,e,a)}},t.prototype.update=function(e,t,n,o){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,o),!0)},t.prototype.updateInner=function(e,t,n,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!re(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=te(this.dom,this.nodeDOM,ee(this.outerDeco,this.node,t),ee(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(t.prototype,n),t}(F);function G(e,t,n,o,r){return oe(o,t,e),new q(null,e,t,n,o,o,o,r,0)}var Y=function(e){function t(t,n,o,r,i,a,s){e.call(this,t,n,o,r,i,null,a,s)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,o){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,o){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,o)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,o){var r=this.node.cut(e,n),i=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,i,i,o)},t}(q),X=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(F),J=function(e){function t(t,n,o,r,i,a,s,c,l,d){e.call(this,t,n,o,r,i,a,s,l,d),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,o,r){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n);return i&&this.updateInner(t,n,o,r),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,o,r)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,o,r){this.spec.setSelection?this.spec.setSelection(t,n,o):e.prototype.setSelection.call(this,t,n,o,r)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(q);function Z(e){e&&(this.nodeName=e)}Z.prototype=Object.create(null);var Q=[new Z];function ee(e,t,n){if(0==e.length)return Q;for(var o=n?Q[0]:new Z,r=[o],i=0;i<e.length;i++){var a=e[i].type.attrs,s=o;if(a)for(var c in a.nodeName&&r.push(s=new Z(a.nodeName)),a){var l=a[c];null!=l&&(n&&1==r.length&&r.push(s=o=new Z(t.isInline?"span":"div")),"class"==c?s.class=(s.class?s.class+" ":"")+l:"style"==c?s.style=(s.style?s.style+";":"")+l:"nodeName"!=c&&(s[c]=l))}}return r}function te(e,t,n,o){if(n==Q&&o==Q)return t;for(var r=t,i=0;i<o.length;i++){var a=o[i],s=n[i];if(i){var c=void 0;s&&s.nodeName==a.nodeName&&r!=e&&(c=r.parentNode)&&c.tagName.toLowerCase()==a.nodeName||((c=document.createElement(a.nodeName)).pmIsDeco=!0,c.appendChild(r),s=Q[0]),r=c}ne(r,s||Q[0],a)}return r}function ne(e,t,n){for(var o in t)"class"==o||"style"==o||"nodeName"==o||o in n||e.removeAttribute(o);for(var r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){for(var i=t.class?t.class.split(" "):H,a=n.class?n.class.split(" "):H,s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var c=0;c<a.length;c++)-1==i.indexOf(a[c])&&e.classList.add(a[c])}if(t.style!=n.style){if(t.style)for(var l,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=d.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function oe(e,t,n){return te(e,e,Q,ee(t,n,1!=e.nodeType))}function re(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function ie(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var ae=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var n=function(e,t){for(var n=[],o=e.childCount,r=t.length-1;o>0&&r>=0;r--){var i=t[r],a=i.node;if(a){if(a!=e.child(o-1))break;n.push(i),--o}}return{nodes:n.reverse(),offset:o}}(e.node.content,e.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function se(e,t){return e.type.side-t.type.side}function ce(e,t,n,o,r){for(var i=[],a=0,s=0;a<e.length;a++){var c=e[a],l=s,d=s+=c.size;l>=n||d<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,o)),r&&(i.push(r),r=null),d>n&&i.push(c.slice(n-l,c.size,o)))}return i}function le(e,t){var n=e.selection,r=n.$anchor,i=n.$head,a=t>0?r.max(i):r.min(i),s=a.parent.inlineContent?a.depth?e.doc.resolve(t>0?a.after():a.before()):null:a;return s&&o.Selection.findFrom(s,t)}function de(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function ue(e,t,n){var r=e.state.selection;if(!(r instanceof o.TextSelection)){if(r instanceof o.NodeSelection&&r.node.isInline)return de(e,new o.TextSelection(t>0?r.$to:r.$from));var i=le(e.state,t);return!!i&&de(e,i)}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var s=le(e.state,t);return!!(s&&s instanceof o.NodeSelection)&&de(e,s)}if(!(a.mac&&n.indexOf("m")>-1)){var c,l=r.$head,d=l.textOffset?null:t<0?l.nodeBefore:l.nodeAfter;if(!d||d.isText)return!1;var u=t<0?l.pos-d.nodeSize:l.pos;return!!(d.isAtom||(c=e.docView.descAt(u))&&!c.contentDOM)&&(o.NodeSelection.isSelectable(d)?de(e,new o.NodeSelection(t<0?e.state.doc.resolve(l.pos-d.nodeSize):l)):!!a.webkit&&de(e,new o.TextSelection(e.state.doc.resolve(t<0?u:u+d.nodeSize))))}}function pe(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function he(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function fe(e){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n){var r,i,s=!1;for(a.gecko&&1==n.nodeType&&o<pe(n)&&he(n.childNodes[o])&&(s=!0);;)if(o>0){if(1!=n.nodeType)break;var c=n.childNodes[o-1];if(he(c))r=n,i=--o;else{if(3!=c.nodeType)break;o=(n=c).nodeValue.length}}else{if(be(n))break;for(var l=n.previousSibling;l&&he(l);)r=n.parentNode,i=p(l),l=l.previousSibling;if(l)o=pe(n=l);else{if((n=n.parentNode)==e.dom)break;o=0}}s?ge(e,t,n,o):r&&ge(e,t,r,i)}}function me(e){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n){for(var r,i,a=pe(n);;)if(o<a){if(1!=n.nodeType)break;if(!he(n.childNodes[o]))break;r=n,i=++o}else{if(be(n))break;for(var s=n.nextSibling;s&&he(s);)r=s.parentNode,i=p(s)+1,s=s.nextSibling;if(s)o=0,a=pe(n=s);else{if((n=n.parentNode)==e.dom)break;o=a=0}}r&&ge(e,t,r,i)}}function be(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function ge(e,t,n,o){if(O(t)){var r=document.createRange();r.setEnd(n,o),r.setStart(n,o),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(n,o);e.domObserver.setCurSelection()}function ve(e,t,n){var r=e.state.selection;if(r instanceof o.TextSelection&&!r.empty||n.indexOf("s")>-1)return!1;if(a.mac&&n.indexOf("m")>-1)return!1;var i=r.$from,s=r.$to;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var c=le(e.state,t);if(c&&c instanceof o.NodeSelection)return de(e,c)}if(!i.parent.inlineContent){var l=o.Selection.findFrom(t<0?i:s,t);return!l||de(e,l)}return!1}function ye(e,t){if(!(e.state.selection instanceof o.TextSelection))return!0;var n=e.state.selection,r=n.$head,i=n.$anchor,a=n.empty;if(!r.sameParent(i))return!0;if(!a)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var c=e.state.tr;return t<0?c.delete(r.pos-s.nodeSize,r.pos):c.delete(r.pos,r.pos+s.nodeSize),e.dispatch(c),!0}return!1}function Oe(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Ee(e,t){var n=t.keyCode,o=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||a.mac&&72==n&&"c"==o?ye(e,-1)||fe(e):46==n||a.mac&&68==n&&"c"==o?ye(e,1)||me(e):13==n||27==n||(37==n?ue(e,-1,o)||fe(e):39==n?ue(e,1,o)||me(e):38==n?ve(e,-1,o)||fe(e):40==n?function(e){if(a.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n&&1==n.nodeType&&0==o&&n.firstChild&&"false"==n.firstChild.contentEditable){var r=n.firstChild;Oe(e,r,!0),setTimeout((function(){return Oe(e,r,!1)}),20)}}}(e)||ve(e,1,o)||me(e):o==(a.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function we(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var i=e.docView.nearestDesc(n.focusNode),a=i&&0==i.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(s<0)return null;var c,l,d=r.resolve(s);if(O(n)){for(c=d;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&o.NodeSelection.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(e,t,n){for(var o=0==t,r=t==v(e);o||r;){if(e==n)return!0;var i=p(e);if(!(e=e.parentNode))return!1;o=o&&0==i,r=r&&i==v(e)}}(n.focusNode,n.focusOffset,i.dom))){var u=i.posBefore;l=new o.NodeSelection(s==u?d:r.resolve(u))}}else{var h=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(h<0)return null;c=r.resolve(h)}l||(l=Ie(e,c,d,"pointer"==t||e.state.selection.head<d.pos&&!a?1:-1));return l}function Ce(e,t){var n=e.state.selection;if(Ae(e,n),e.editable?e.hasFocus():Me(e)&&document.activeElement&&document.activeElement.contains(e.dom)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),o=e.cursorWrapper.dom,r="IMG"==o.nodeName;r?n.setEnd(o.parentNode,p(o)+1):n.setEnd(o,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!r&&!e.state.selection.visible&&a.ie&&a.ie_version<=11&&(o.disabled=!0,o.disabled=!1)}(e);else{var r,i,s=n.anchor,c=n.head;!Te||n instanceof o.TextSelection||(n.$from.parent.inlineContent||(r=Se(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=Se(e,n.to))),e.docView.setSelection(s,c,e.root,t),Te&&(r&&xe(r),i&&xe(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),o=n.anchorNode,r=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==o&&n.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}ae.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},ae.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},ae.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ae.prototype.syncToMarks=function(e,t,n){for(var o=0,r=this.stack.length>>1,i=Math.min(r,e.length);o<i&&(o==r-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++)if(this.top.children[s].matchesMark(e[r])){a=s;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var c=K.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,r++}},ae.prototype.findNodeMatch=function(e,t,n,o){var r=-1,i=o<0?void 0:this.getPreMatch(o),a=this.top.children;if(i&&i.matchesNode(e,t,n))r=a.indexOf(i);else for(var s=this.index,c=Math.min(a.length,s+5);s<c;s++){var l=a[s];if(l.matchesNode(e,t,n)&&this.preMatched.indexOf(l)<0){r=s;break}}return!(r<0)&&(this.destroyBetween(this.index,r),this.index++,!0)},ae.prototype.updateNextNode=function(e,t,n,o,r){for(var i=this.index;i<this.top.children.length;i++){var a=this.top.children[i];if(a instanceof q){var s=this.preMatched.indexOf(a);if(s>-1&&s+this.preMatchOffset!=r)return!1;var c=a.dom;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&re(t,a.outerDeco)))&&a.update(e,t,n,o))return this.destroyBetween(this.index,i),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},ae.prototype.addNode=function(e,t,n,o,r){this.top.children.splice(this.index++,0,q.create(this.top,e,t,n,o,r)),this.changed=!0},ae.prototype.placeWidget=function(e,t,n){var o=this.index<this.top.children.length?this.top.children[this.index]:null;if(!o||!o.matchesWidget(e)||e!=o.widget&&o.widget.type.toDOM.parentNode){var r=new W(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++},ae.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof K;)e=e.children[e.children.length-1];if(!e||!(e instanceof Y)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new X(this.top,H,t,null)),this.changed=!0}};var Te=a.safari||a.chrome&&a.chrome_version<63;function Se(e,t){var n=e.docView.domFromPos(t),o=n.node,r=n.offset,i=r<o.childNodes.length?o.childNodes[r]:null,s=r?o.childNodes[r-1]:null;if(a.safari&&i&&"false"==i.contentEditable)return ke(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return ke(i);if(s)return ke(s)}}function ke(e){return e.contentEditable="true",a.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function xe(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Ae(e,t){if(t instanceof o.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(je(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else je(e)}function je(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Ie(e,t,n,r){return e.someProp("createSelectionBetween",(function(o){return o(e,t,n)}))||o.TextSelection.between(t,n,r)}function Me(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function Ne(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(a.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||a.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Re(e,t,n,i,s){if(t<0){var c=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,l=we(e,c);if(l&&!e.state.selection.eq(l)){var d=e.state.tr.setSelection(l);"pointer"==c?d.setMeta("pointer",!0):"key"==c&&d.scrollIntoView(),e.dispatch(d)}}else{var u=e.state.doc.resolve(t),p=u.sharedDepth(n);t=u.before(p+1),n=e.state.doc.resolve(n).after(p+1);var h,f,m=e.state.selection,b=function(e,t,n){var o=e.docView.parseRange(t,n),i=o.node,s=o.fromOffset,c=o.toOffset,l=o.from,d=o.to,u=e.root.getSelection(),p=null,h=u.anchorNode;if(h&&e.dom.contains(1==h.nodeType?h:h.parentNode)&&(p=[{node:h,offset:u.anchorOffset}],O(u)||p.push({node:u.focusNode,offset:u.focusOffset})),a.chrome&&8===e.lastKeyCode)for(var f=c;f>s;f--){var m=i.childNodes[f-1],b=m.pmViewDesc;if("BR"==m.nodeType&&!b){c=f;break}if(!b||b.size)break}var g=e.state.doc,v=e.someProp("domParser")||r.DOMParser.fromSchema(e.state.schema),y=g.resolve(l),E=null,w=v.parse(i,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:s,to:c,preserveWhitespace:!y.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:Ne,context:y});if(p&&null!=p[0].pos){var C=p[0].pos,T=p[1]&&p[1].pos;null==T&&(T=C),E={anchor:C+l,head:T+l}}return{doc:w,sel:E,from:l,to:d}}(e,t,n),g=e.state.doc,v=g.slice(b.from,b.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(h=e.state.selection.to,f="end"):(h=e.state.selection.from,f="start"),e.lastKeyCode=null;var y=function(e,t,n,o,r){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,c=a.b;if("end"==r){var l=Math.max(0,i-Math.min(s,c));o-=s+l-i}if(s<i&&e.size<t.size){c=(i-=o<=i&&o>=s?i-o:0)+(c-s),s=i}else if(c<i){s=(i-=o<=i&&o>=c?i-o:0)+(s-c),c=i}return{start:i,endA:s,endB:c}}(v.content,b.doc.content,b.from,h,f);if(!y){if(!(i&&m instanceof o.TextSelection&&!m.empty&&m.$head.sameParent(m.$anchor))||e.composing||b.sel&&b.sel.anchor!=b.sel.head){if(b.sel){var w=Pe(e,e.state.doc,b.sel);w&&!w.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(w))}return}y={start:m.from,endA:m.to,endB:m.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof o.TextSelection&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),a.ie&&a.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>b.from&&" "==b.doc.textBetween(y.start-b.from-1,y.start-b.from+1)&&(y.start--,y.endA--,y.endB--);var C,T=b.doc.resolveNoCache(y.start-b.from),S=b.doc.resolveNoCache(y.endB-b.from),k=T.sameParent(S)&&T.parent.inlineContent;if((a.ios&&e.lastIOSEnter>Date.now()-225&&(!k||s.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!k&&T.pos<b.doc.content.size&&(C=o.Selection.findFrom(b.doc.resolve(T.pos+1),1,!0))&&C.head==S.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,E(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>y.start&&function(e,t,n,o,r){if(!o.parent.isTextblock||n-t<=r.pos-o.pos||Le(o,!0,!1)<r.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=e.resolve(Le(i,!0,!0));if(!a.parent.isTextblock||a.pos>n||Le(a,!0,!1)<n)return!1;return o.parent.content.cut(o.parentOffset).eq(a.parent.content)}(g,y.start,y.endA,T,S)&&e.someProp("handleKeyDown",(function(t){return t(e,E(8,"Backspace"))})))a.android&&a.chrome&&e.domObserver.suppressSelectionUpdates();else{a.android&&!k&&T.start()!=S.start()&&0==S.parentOffset&&T.depth==S.depth&&b.sel&&b.sel.anchor==b.sel.head&&b.sel.head==y.endA&&(y.endB-=2,S=b.doc.resolveNoCache(y.endB-b.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,E(13,"Enter"))}))}),20));var x,A,j,I,M=y.start,N=y.endA;if(k)if(T.pos==S.pos)a.ie&&a.ie_version<=11&&0==T.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Ce(e)}),20)),x=e.state.tr.delete(M,N),A=g.resolve(y.start).marksAcross(g.resolve(y.endA));else if(y.endA==y.endB&&(I=g.resolve(y.start))&&(j=function(e,t){for(var n,o,i,a=e.firstChild.marks,s=t.firstChild.marks,c=a,l=s,d=0;d<s.length;d++)c=s[d].removeFromSet(c);for(var u=0;u<a.length;u++)l=a[u].removeFromSet(l);if(1==c.length&&0==l.length)o=c[0],n="add",i=function(e){return e.mark(o.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;o=l[0],n="remove",i=function(e){return e.mark(o.removeFromSet(e.marks))}}for(var p=[],h=0;h<t.childCount;h++)p.push(i(t.child(h)));if(r.Fragment.from(p).eq(e))return{mark:o,type:n}}(T.parent.content.cut(T.parentOffset,S.parentOffset),I.parent.content.cut(I.parentOffset,y.endA-I.start()))))x=e.state.tr,"add"==j.type?x.addMark(M,N,j.mark):x.removeMark(M,N,j.mark);else if(T.parent.child(T.index()).isText&&T.index()==S.index()-(S.textOffset?0:1)){var R=T.parent.textBetween(T.parentOffset,S.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,M,N,R)})))return;x=e.state.tr.insertText(R,M,N)}if(x||(x=e.state.tr.replace(M,N,b.doc.slice(y.start-b.from,y.endB-b.from))),b.sel){var P=Pe(e,x.doc,b.sel);P&&!(a.chrome&&a.android&&e.composing&&P.empty&&(P.head==M||P.head==x.mapping.map(N)-1)||a.ie&&P.empty&&P.head==M)&&x.setSelection(P)}A&&x.ensureMarks(A),e.dispatch(x.scrollIntoView())}}}function Pe(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Ie(e,t.resolve(n.anchor),t.resolve(n.head))}function Le(e,t,n){for(var o=e.depth,r=t?e.end():e.pos;o>0&&(t||e.indexAfter(o)==e.node(o).childCount);)o--,r++,t=!1;if(n)for(var i=e.node(o).maybeChild(e.indexAfter(o));i&&!i.isLeaf;)i=i.firstChild,r++;return r}function De(e,t){for(var n=[],o=t.content,i=t.openStart,a=t.openEnd;i>1&&a>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,a--;var s=o.firstChild;n.push(s.type.name,s.type.hasRequiredAttrs()?s.attrs:null),o=s.content}var c=e.someProp("clipboardSerializer")||r.DOMSerializer.fromSchema(e.state.schema),l=Ue(),d=l.createElement("div");d.appendChild(c.serializeFragment(o,{document:l}));for(var u,p=d.firstChild;p&&1==p.nodeType&&(u=ze[p.nodeName.toLowerCase()]);){for(var h=u.length-1;h>=0;h--){for(var f=l.createElement(u[h]);d.firstChild;)f.appendChild(d.firstChild);d.appendChild(f)}p=d.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",i+" "+a+" "+JSON.stringify(n)),{dom:d,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function _e(e,t,n,o,i){var a,s,c=i.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(o||c||!n);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t,c||o)})),c)return new r.Slice(r.Fragment.from(e.state.schema.text(t)),0,0);var d=e.someProp("clipboardTextParser",(function(e){return e(t,i,o)}));d?s=d:(a=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){a.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),a=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,o=Ue().createElement("div"),r=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=r&&ze[r[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),i=n.length);o.innerHTML=e;for(var a=0;a<i;a++)o=o.firstChild;return o}(n);var u=a&&a.querySelector("[data-pm-slice]"),p=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!s){var h=e.someProp("clipboardParser")||e.someProp("domParser")||r.DOMParser.fromSchema(e.state.schema);s=h.parseSlice(a,{preserveWhitespace:!(!l&&!p),context:i})}return s=p?function(e,t){if(!e.size)return e;var n,o=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(d){return e}for(var i=e.content,a=e.openStart,s=e.openEnd,c=n.length-2;c>=0;c-=2){var l=o.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=r.Fragment.from(l.create(n[c+1],i)),a++,s++}return new r.Slice(i,a,s)}(function(e,t,n){t<e.openStart&&(e=new r.Slice($e(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));n<e.openEnd&&(e=new r.Slice($e(e.content,1,n,e.openEnd,0,0),e.openStart,n));return e}(s,+p[1],+p[2]),p[3]):r.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var o=t.node(n).contentMatchAt(t.index(n)),i=void 0,a=[];if(e.forEach((function(e){if(a){var t,n=o.findWrapping(e.type);if(!n)return a=null;if(t=a.length&&i.length&&function e(t,n,o,i,a){if(a<t.length&&a<n.length&&t[a]==n[a]){var s=e(t,n,o,i.lastChild,a+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(a==t.length-1?o.type:t[a+1]))return i.copy(i.content.append(r.Fragment.from(Be(o,t,a+1))))}}(n,i,e,a[a.length-1],0))a[a.length-1]=t;else{a.length&&(a[a.length-1]=function e(t,n){if(0==n)return t;var o=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),i=t.contentMatchAt(t.childCount).fillBefore(r.Fragment.empty,!0);return t.copy(o.append(i))}(a[a.length-1],i.length));var s=Be(e,n);a.push(s),o=o.matchType(s.type,s.attrs),i=n}}})),a)return{v:r.Fragment.from(a)}},o=t.depth;o>=0;o--){var i=n(o);if(i)return i.v}return e}(s.content,i),!1),e.someProp("transformPasted",(function(e){s=e(s)})),s}function Be(e,t,n){void 0===n&&(n=0);for(var o=t.length-1;o>=n;o--)e=t[o].create(null,r.Fragment.from(e));return e}function $e(e,t,n,o,i,a){var s=t<0?e.firstChild:e.lastChild,c=s.content;return i<o-1&&(c=$e(c,t,n,o,i+1,a)),i>=n&&(c=t<0?s.contentMatchAt(0).fillBefore(c,e.childCount>1||a<=i).append(c):c.append(s.contentMatchAt(s.childCount).fillBefore(r.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(c))}var ze={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Fe=null;function Ue(){return Fe||(Fe=document.implementation.createHTMLDocument("title"))}var He={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},We=a.ie&&a.ie_version<=11,Ve=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Ve.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Ve.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Ke=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);a.ie&&a.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Ve,We&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Ke.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},Ke.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Ke.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,He),We&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Ke.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}We&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Ke.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Ke.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Ke.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Ke.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&Me(e)){var e;if(this.suppressingSelectionUpdates)return Ce(this.view);if(a.ie&&a.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&m(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Ke.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Ke.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Ke.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Me(this.view)&&!this.ignoreSelectionChange(t),o=-1,r=-1,i=!1,s=[];if(this.view.editable)for(var c=0;c<e.length;c++){var l=this.registerMutation(e[c],s);l&&(o=o<0?l.from:Math.min(l.from,o),r=r<0?l.to:Math.max(l.to,r),l.typeOver&&(i=!0))}if(a.gecko&&s.length>1){var d=s.filter((function(e){return"BR"==e.nodeName}));if(2==d.length){var u=d[0],p=d[1];u.parentNode&&u.parentNode.parentNode==p.parentNode?p.remove():u.remove()}}(o>-1||n)&&(o>-1&&(this.view.docView.markDirty(o,r),function(e){if(qe)return;qe=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(o,r,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Ce(this.view))}},Ke.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){var o=e.previousSibling,r=e.nextSibling;if(a.ie&&a.ie_version<=11&&e.addedNodes.length)for(var i=0;i<e.addedNodes.length;i++){var s=e.addedNodes[i],c=s.previousSibling,l=s.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(o=c),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(r=l)}for(var d=o&&o.parentNode==e.target?p(o)+1:0,u=n.localPosFromDOM(e.target,d,-1),h=r&&r.parentNode==e.target?p(r):e.target.childNodes.length,f=0;f<e.addedNodes.length;f++)t.push(e.addedNodes[f]);return{from:u,to:n.localPosFromDOM(e.target,h,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var qe=!1;var Ge={},Ye={};function Xe(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Je(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Ze(e,t)})}))}function Ze(e,t){return e.someProp("handleDOMEvents",(function(n){var o=n[t.type];return!!o&&(o(e,t)||t.defaultPrevented)}))}function Qe(e){return{left:e.clientX,top:e.clientY}}function et(e,t,n,o,r){if(-1==o)return!1;for(var i=e.state.doc.resolve(o),a=function(o){if(e.someProp(t,(function(t){return o>i.depth?t(e,n,i.nodeAfter,i.before(o),r,!0):t(e,n,i.node(o),i.before(o),r,!1)})))return{v:!0}},s=i.depth+1;s>0;s--){var c=a(s);if(c)return c.v}return!1}function tt(e,t,n){e.focused||e.focus();var o=e.state.tr.setSelection(t);"pointer"==n&&o.setMeta("pointer",!0),e.dispatch(o)}function nt(e,t,n,r,i){return et(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(i?function(e,t){if(-1==t)return!1;var n,r,i=e.state.selection;i instanceof o.NodeSelection&&(n=i.node);for(var a=e.state.doc.resolve(t),s=a.depth+1;s>0;s--){var c=s>a.depth?a.nodeAfter:a.node(s);if(o.NodeSelection.isSelectable(c)){r=n&&i.$from.depth>0&&s>=i.$from.depth&&a.before(i.$from.depth+1)==i.$from.pos?a.before(i.$from.depth):a.before(s);break}}return null!=r&&(tt(e,o.NodeSelection.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&o.NodeSelection.isSelectable(r))&&(tt(e,new o.NodeSelection(n),"pointer"),!0)}(e,n))}function ot(e,t,n,o){return et(e,"handleDoubleClickOn",t,n,o)||e.someProp("handleDoubleClick",(function(n){return n(e,t,o)}))}function rt(e,t,n,r){return et(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(tt(e,o.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),i=r.depth+1;i>0;i--){var a=i>r.depth?r.nodeAfter:r.node(i),s=r.before(i);if(a.inlineContent)tt(e,o.TextSelection.create(n,s+1,s+1+a.content.size),"pointer");else{if(!o.NodeSelection.isSelectable(a))continue;tt(e,o.NodeSelection.create(n,s),"pointer")}return!0}}(e,n)}function it(e){return pt(e)}Ye.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!ct(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!a.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||Ee(e,t)?t.preventDefault():Xe(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,E(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},Ye.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Ye.keypress=function(e,t){if(!(ct(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||a.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof o.TextSelection&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,r)}))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var at=a.mac?"metaKey":"ctrlKey";Ge.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=it(e),o=Date.now(),r="singleClick";o-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,o=t.y-e.clientY;return n*n+o*o<100}(t,e.lastClick)&&!t[at]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:o,x:t.clientX,y:t.clientY,type:r};var i=e.posAtCoords(Qe(t));i&&("singleClick"==r?e.mouseDown=new st(e,i,t,n):("doubleClick"==r?ot:rt)(e,i.pos,i.inside,t)?t.preventDefault():Xe(e,"pointer"))};var st=function(e,t,n,r){var i,s,c=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[at],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{var l=e.state.doc.resolve(t.pos);i=l.parent,s=l.depth?l.before():0}this.mightDrag=null;var d=r?null:n.target,u=d?e.docView.nearestDesc(d,!0):null;this.target=u?u.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||e.state.selection instanceof o.NodeSelection&&s==e.state.selection.from)&&(this.mightDrag={node:i,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&a.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xe(e,"pointer")};function ct(e,t){return!!e.composing||!!(a.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}st.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},st.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Qe(e))),this.allowDefault||!t?Xe(this.view,"pointer"):nt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||a.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||a.chrome&&!(this.view.state.selection instanceof o.TextSelection)&&(t.pos==this.view.state.selection.from||t.pos==this.view.state.selection.to)?(tt(this.view,o.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Xe(this.view,"pointer")}},st.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Xe(this.view,"pointer")},Ge.touchdown=function(e){it(e),Xe(e,"pointer")},Ge.contextmenu=function(e){return it(e)};var lt=a.android?5e3:-1;function dt(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return pt(e)}),t))}function ut(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function pt(e,t){if(e.domObserver.forceFlush(),ut(e),t||e.docView.dirty){var n=we(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}Ye.compositionstart=Ye.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),pt(e,!0),e.markCursor=null;else if(pt(e),a.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var o=e.root.getSelection(),r=o.focusNode,i=o.focusOffset;r&&1==r.nodeType&&0!=i;){var s=i<0?r.lastChild:r.childNodes[i-1];if(!s)break;if(3==s.nodeType){o.collapse(s,s.nodeValue.length);break}r=s,i=-1}e.composing=!0}dt(e,lt)},Ye.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,dt(e,20))};var ht=a.ie&&a.ie_version<15||a.ios&&a.webkit_version<604;function ft(e,t,n,o){var i=_e(e,t,n,e.shiftKey,e.state.selection.$from);if(!e.someProp("handlePaste",(function(t){return t(e,o,i||r.Slice.empty)}))&&i){var a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),s=a?e.state.tr.replaceSelectionWith(a,e.shiftKey):e.state.tr.replaceSelection(i);e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Ge.copy=Ye.cut=function(e,t){var n=e.state.selection,o="cut"==t.type;if(!n.empty){var r=ht?null:t.clipboardData,i=De(e,n.content()),a=i.dom,s=i.text;r?(t.preventDefault(),r.clearData(),r.setData("text/html",a.innerHTML),r.setData("text/plain",s)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(r),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Ye.paste=function(e,t){var n=ht?null:t.clipboardData,o=n&&n.getData("text/html"),r=n&&n.getData("text/plain");n&&(o||r||n.files.length)?(ft(e,r,o,t),t.preventDefault()):function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,o=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout((function(){e.focus(),o.parentNode&&o.parentNode.removeChild(o),n?ft(e,o.value,null,t):ft(e,o.textContent,o.innerHTML,t)}),50)}}(e,t)};var mt=function(e,t){this.slice=e,this.move=t},bt=a.mac?"altKey":"ctrlKey";for(var gt in Ge.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,i=r.empty?null:e.posAtCoords(Qe(t));if(i&&i.pos>=r.from&&i.pos<=(r instanceof o.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(o.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var a=e.docView.nearestDesc(t.target,!0);if(!a||!a.node.type.spec.draggable||a==e.docView)return;e.dispatch(e.state.tr.setSelection(o.NodeSelection.create(e.state.doc,a.posBefore)))}var s=e.state.selection.content(),c=De(e,s),l=c.dom,d=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(ht?"Text":"text/html",l.innerHTML),ht||t.dataTransfer.setData("text/plain",d),e.dragging=new mt(s,!t[bt])}},Ge.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)},Ye.dragover=Ye.dragenter=function(e,t){return t.preventDefault()},Ye.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var a=e.posAtCoords(Qe(t));if(a){var s=e.state.doc.resolve(a.pos);if(s){var c=n&&n.slice||_e(e,t.dataTransfer.getData(ht?"Text":"text/plain"),ht?null:t.dataTransfer.getData("text/html"),!1,s);if(e.someProp("handleDrop",(function(o){return o(e,t,c||r.Slice.empty,n&&n.move)})))t.preventDefault();else if(c){t.preventDefault();var l=c?Object(i.dropPoint)(e.state.doc,s.pos,c):s.pos;null==l&&(l=s.pos);var d=e.state.tr;n&&n.move&&d.deleteSelection();var u=d.mapping.map(l),p=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,h=d.doc;if(p?d.replaceRangeWith(u,u,c.content.firstChild):d.replaceRange(u,u,c),!d.doc.eq(h)){var f=d.doc.resolve(u);p&&o.NodeSelection.isSelectable(c.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(c.content.firstChild)?d.setSelection(new o.NodeSelection(f)):d.setSelection(Ie(e,f,d.doc.resolve(d.mapping.map(l)))),e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))}}}}}},Ge.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Ce(e)}),20))},Ge.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},Ge.beforeinput=function(e,t){if(a.chrome&&a.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,E(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},Ye)Ge[gt]=Ye[gt];function vt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var o in t)if(!(o in e))return!1;return!0}var yt=function(e,t){this.spec=t||St,this.side=this.spec.side||0,this.toDOM=e};yt.prototype.map=function(e,t,n,o){var r=e.mapResult(t.from+o,this.side<0?-1:1),i=r.pos;return r.deleted?null:new wt(i-n,i-n,this)},yt.prototype.valid=function(){return!0},yt.prototype.eq=function(e){return this==e||e instanceof yt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vt(this.spec,e.spec))};var Ot=function(e,t){this.spec=t||St,this.attrs=e};Ot.prototype.map=function(e,t,n,o){var r=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-n;return r>=i?null:new wt(r,i,this)},Ot.prototype.valid=function(e,t){return t.from<t.to},Ot.prototype.eq=function(e){return this==e||e instanceof Ot&&vt(this.attrs,e.attrs)&&vt(this.spec,e.spec)},Ot.is=function(e){return e.type instanceof Ot};var Et=function(e,t){this.spec=t||St,this.attrs=e};Et.prototype.map=function(e,t,n,o){var r=e.mapResult(t.from+o,1);if(r.deleted)return null;var i=e.mapResult(t.to+o,-1);return i.deleted||i.pos<=r.pos?null:new wt(r.pos-n,i.pos-n,this)},Et.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),o=n.index,r=n.offset;return r==t.from&&r+e.child(o).nodeSize==t.to},Et.prototype.eq=function(e){return this==e||e instanceof Et&&vt(this.attrs,e.attrs)&&vt(this.spec,e.spec)};var wt=function(e,t,n){this.from=e,this.to=t,this.type=n},Ct={spec:{configurable:!0},inline:{configurable:!0}};wt.prototype.copy=function(e,t){return new wt(e,t,this.type)},wt.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},wt.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},wt.widget=function(e,t,n){return new wt(e,e,new yt(t,n))},wt.inline=function(e,t,n,o){return new wt(e,t,new Ot(n,o))},wt.node=function(e,t,n,o){return new wt(e,t,new Et(n,o))},Ct.spec.get=function(){return this.type.spec},Ct.inline.get=function(){return this.type instanceof Ot},Object.defineProperties(wt.prototype,Ct);var Tt=[],St={},kt=function(e,t){this.local=e&&e.length?e:Tt,this.children=t&&t.length?t:Tt};kt.create=function(e,t){return t.length?Nt(t,e,0,St):xt},kt.prototype.find=function(e,t,n){var o=[];return this.findInner(null==e?0:e,null==t?1e9:t,o,0,n),o},kt.prototype.findInner=function(e,t,n,o,r){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!r||r(a.spec))&&n.push(a.copy(a.from+o,a.to+o))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var c=this.children[s]+1;this.children[s+2].findInner(e-c,t-c,n,o+c,r)}},kt.prototype.map=function(e,t,n){return this==xt||0==e.maps.length?this:this.mapInner(e,t,0,0,n||St)},kt.prototype.mapInner=function(e,t,n,o,r){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(e,n,o);s&&s.type.valid(t,s)?(i||(i=[])).push(s):r.onRemove&&r.onRemove(this.local[a].spec)}return this.children.length?function(e,t,n,o,r,i,a){for(var s=e.slice(),c=function(e,t,n,o){for(var a=0;a<s.length;a+=3){var c=s[a+1],l=void 0;-1==c||e>c+i||(t>=s[a]+i?s[a+1]=-1:n>=r&&(l=o-n-(t-e))&&(s[a]+=l,s[a+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var d=!1,u=0;u<s.length;u+=3)if(-1==s[u+1]){var p=n.map(s[u]+i),h=p-r;if(h<0||h>=o.content.size){d=!0;continue}var f=n.map(e[u+1]+i,-1)-r,m=o.content.findIndex(h),b=m.index,g=m.offset,v=o.maybeChild(b);if(v&&g==h&&g+v.nodeSize==f){var y=s[u+2].mapInner(n,v,p+1,s[u]+i+1,a);y!=xt?(s[u]=h,s[u+1]=f,s[u+2]=y):(s[u+1]=-2,d=!0)}else d=!0}if(d){var O=Nt(function(e,t,n,o,r,i,a){function s(e,t){for(var i=0;i<e.local.length;i++){var c=e.local[i].map(o,r,t);c?n.push(c):a.onRemove&&a.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)s(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&s(e[c+2],t[c]+i+1);return n}(s,e,t||[],n,r,i,a),o,0,a);t=O.local;for(var E=0;E<s.length;E+=3)s[E+1]<0&&(s.splice(E,3),E-=3);for(var w=0,C=0;w<O.children.length;w+=3){for(var T=O.children[w];C<s.length&&s[C]<T;)C+=3;s.splice(C,0,O.children[w],O.children[w+1],O.children[w+2])}}return new kt(t&&t.sort(Rt),s)}(this.children,i,e,t,n,o,r):i?new kt(i.sort(Rt)):xt},kt.prototype.add=function(e,t){return t.length?this==xt?kt.create(e,t):this.addInner(e,t,0):this},kt.prototype.addInner=function(e,t,n){var o,r=this,i=0;e.forEach((function(e,a){var s,c=a+n;if(s=It(t,e,c)){for(o||(o=r.children.slice());i<o.length&&o[i]<a;)i+=3;o[i]==a?o[i+2]=o[i+2].addInner(e,s,c+1):o.splice(i,0,a,a+e.nodeSize,Nt(s,e,c+1,St)),i+=3}}));var a=jt(i?Mt(t):t,-n);return new kt(a.length?this.local.concat(a).sort(Rt):this.local,o||this.children)},kt.prototype.remove=function(e){return 0==e.length||this==xt?this:this.removeInner(e,0)},kt.prototype.removeInner=function(e,t){for(var n=this.children,o=this.local,r=0;r<n.length;r+=3){for(var i=void 0,a=n[r]+t,s=n[r+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>a&&l.to<s&&(e[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var d=n[r+2].removeInner(i,a+1);d!=xt?n[r+2]=d:(n.splice(r,3),r-=3)}}if(o.length)for(var u=0,p=void 0;u<e.length;u++)if(p=e[u])for(var h=0;h<o.length;h++)o[h].eq(p,t)&&(o==this.local&&(o=this.local.slice()),o.splice(h--,1));return n==this.children&&o==this.local?this:o.length||n.length?new kt(o,n):xt},kt.prototype.forChild=function(e,t){if(this==xt)return this;if(t.isLeaf)return kt.empty;for(var n,o,r=0;r<this.children.length;r+=3)if(this.children[r]>=e){this.children[r]==e&&(n=this.children[r+2]);break}for(var i=e+1,a=i+t.content.size,s=0;s<this.local.length;s++){var c=this.local[s];if(c.from<a&&c.to>i&&c.type instanceof Ot){var l=Math.max(i,c.from)-i,d=Math.min(a,c.to)-i;l<d&&(o||(o=[])).push(c.copy(l,d))}}if(o){var u=new kt(o.sort(Rt));return n?new At([u,n]):u}return n||xt},kt.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof kt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},kt.prototype.locals=function(e){return Pt(this.localsInner(e))},kt.prototype.localsInner=function(e){if(this==xt)return Tt;if(e.inlineContent||!this.local.some(Ot.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Ot||t.push(this.local[n]);return t};var xt=new kt;kt.empty=xt,kt.removeOverlap=Pt;var At=function(e){this.members=e};function jt(e,t){if(!t||!e.length)return e;for(var n=[],o=0;o<e.length;o++){var r=e[o];n.push(new wt(r.from+t,r.to+t,r.type))}return n}function It(e,t,n){if(t.isLeaf)return null;for(var o=n+t.nodeSize,r=null,i=0,a=void 0;i<e.length;i++)(a=e[i])&&a.from>n&&a.to<o&&((r||(r=[])).push(a),e[i]=null);return r}function Mt(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Nt(e,t,n,o){var r=[],i=!1;t.forEach((function(t,a){var s=It(e,t,a+n);if(s){i=!0;var c=Nt(s,t,n+a+1,o);c!=xt&&r.push(a,a+t.nodeSize,c)}}));for(var a=jt(i?Mt(e):e,-n).sort(Rt),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(o.onRemove&&o.onRemove(a[s].spec),a.splice(s--,1));return a.length||r.length?new kt(a,r):xt}function Rt(e,t){return e.from-t.from||e.to-t.to}function Pt(e){for(var t=e,n=0;n<t.length-1;n++){var o=t[n];if(o.from!=o.to)for(var r=n+1;r<t.length;r++){var i=t[r];if(i.from!=o.from){i.from<o.to&&(t==e&&(t=e.slice()),t[n]=o.copy(o.from,i.from),Lt(t,r,o.copy(i.from,o.to)));break}i.to!=o.to&&(t==e&&(t=e.slice()),t[r]=i.copy(i.from,o.to),Lt(t,r+1,i.copy(o.to,i.to)))}}return t}function Lt(e,t,n){for(;t<e.length&&Rt(n,e[t])>0;)t++;e.splice(t,0,n)}function Dt(e){var t=[];return e.someProp("decorations",(function(n){var o=n(e.state);o&&o!=xt&&t.push(o)})),e.cursorWrapper&&t.push(kt.create(e.state.doc,[e.cursorWrapper.deco])),At.from(t)}At.prototype.forChild=function(e,t){if(t.isLeaf)return kt.empty;for(var n=[],o=0;o<this.members.length;o++){var r=this.members[o].forChild(e,t);r!=xt&&(r instanceof At?n=n.concat(r.members):n.push(r))}return At.from(n)},At.prototype.eq=function(e){if(!(e instanceof At)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},At.prototype.locals=function(e){for(var t,n=!0,o=0;o<this.members.length;o++){var r=this.members[o].localsInner(e);if(r.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<r.length;i++)t.push(r[i])}else t=r}return t?Pt(n?t:t.sort(Rt)):Tt},At.from=function(e){switch(e.length){case 0:return xt;case 1:return e[0];default:return new At(e)}};var _t=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ft(this),this.markCursor=null,this.cursorWrapper=null,zt(this),this.nodeViews=Ut(this),this.docView=G(this.state.doc,$t(this),Dt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Ke(e,(function(t,n,o,r){return Re(e,t,n,o,r)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=Ge[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Ze(e,t)||!e.editable&&t.type in Ye||n(e,t)})};for(var n in Ge)t(n);a.safari&&e.dom.addEventListener("input",(function(){return null})),Je(e)}(this),this.pluginViews=[],this.updatePluginViews()},Bt={props:{configurable:!0},root:{configurable:!0}};function $t(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var o in n)"class"==o?t.class+=" "+n[o]:t[o]||"contenteditable"==o||"nodeName"==o||(t[o]=String(n[o]))})),[wt.node(0,e.state.doc.content.size,t)]}function zt(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:wt.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Ft(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Ut(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}Bt.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},_t.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Je(this),this._props=e,this.updateStateInner(e.state,!0)},_t.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var o in t.state=this.state,e)t[o]=e[o];this.update(t)},_t.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},_t.prototype.updateStateInner=function(e,t){var n=this,r=this.state,i=!1,s=!1;if(e.storedMarks&&this.composing&&(ut(this),s=!0),this.state=e,t){var c=Ut(this);(function(e,t){var n=0,o=0;for(var r in e){if(e[r]!=t[r])return!0;n++}for(var i in t)o++;return n!=o})(c,this.nodeViews)&&(this.nodeViews=c,i=!0),Je(this)}this.editable=Ft(this),zt(this);var l=Dt(this),d=$t(this),u=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(e.doc,d,l);!p&&e.selection.eq(r.selection)||(s=!0);var h,f,b,g,v,y,O,E,w,C,T,A="preserve"==u&&s&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,o=e.dom.getBoundingClientRect(),r=Math.max(0,o.top),i=(o.left+o.right)/2,a=r+1;a<Math.min(innerHeight,o.bottom);a+=5){var s=e.root.elementFromPoint(i,a);if(s!=e.dom&&e.dom.contains(s)){var c=s.getBoundingClientRect();if(c.top>=r-20){t=s,n=c.top;break}}}return{refDOM:t,refTop:n,stack:k(e.dom)}}(this);if(s){this.domObserver.stop();var j=p&&(a.ie||a.chrome)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(g=r.selection,v=e.selection,y=Math.min(g.$anchor.sharedDepth(g.head),v.$anchor.sharedDepth(v.head)),g.$anchor.start(y)!=v.$anchor.start(y));if(p){var I=a.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(e.doc,d,l,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=G(e.doc,d,l,this.dom,this)),I&&!this.trackWrites&&(j=!0)}j||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(h=this,f=h.docView.domFromPos(h.state.selection.anchor),b=h.root.getSelection(),m(f.node,f.offset,b.anchorNode,b.anchorOffset)))?Ce(this,j):(Ae(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==u)this.dom.scrollTop=0;else if("to selection"==u){var M=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof o.NodeSelection?S(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),M):S(this,this.coordsAtPos(e.selection.head),M))}else A&&(E=(O=A).refDOM,w=O.refTop,C=O.stack,T=E?E.getBoundingClientRect().top:0,x(C,0==T?0:T-w))},_t.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},_t.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var o=0;o<this.state.plugins.length;o++){var r=this.state.plugins[o];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}},_t.prototype.someProp=function(e,t){var n,o=this._props&&this._props[e];if(null!=o&&(n=t?t(o):o))return n;var r=this.state.plugins;if(r)for(var i=0;i<r.length;i++){var a=r[i].props[e];if(null!=a&&(n=t?t(a):a))return n}},_t.prototype.hasFocus=function(){return this.root.activeElement==this.dom},_t.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(A)return e.focus(A);var t=k(e);e.focus(null==A?{get preventScroll(){return A={preventScroll:!0},!0}}:void 0),A||(A=!1,x(t,0))}(this.dom),Ce(this),this.domObserver.start()},Bt.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},_t.prototype.posAtCoords=function(e){return M(this,e)},_t.prototype.coordsAtPos=function(e){return R(this,e)},_t.prototype.domAtPos=function(e){return this.docView.domFromPos(e)},_t.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},_t.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var o=this.docView.posFromDOM(e,t,n);if(null==o)throw new RangeError("DOM position not inside the editor");return o},_t.prototype.endOfTextblock=function(e,t){return z(this,t||this.state,e)},_t.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Dt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},_t.prototype.dispatchEvent=function(e){return function(e,t){Ze(e,t)||!Ge[t.type]||!e.editable&&t.type in Ye||Ge[t.type](e,t)}(this,e)},_t.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(_t.prototype,Bt)},lOw6:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("4FMG"),r=n("4SN/");function i(e,t){return{action:o.a.INSERTED,actionSubject:o.b.DOCUMENT,actionSubjectId:o.c.LINK,attributes:{inputMethod:e,fromCurrentDomain:Object(r.d)(t)},eventType:o.d.TRACK,nonPrivacySafeAttributes:{linkDomain:Object(r.b)(t)}}}},lsWn:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("stHy");const r=(e,t)=>n=>e?(n.setNodeMarkup(e.pos,void 0,Object.assign({},e.node.attrs,t)),Object(o.a)(n)):n},lyVh:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return O}));var o=n("ERkP"),r=n.n(o),i=n("KsTJ"),a=n("3GHw"),s=n("2suc"),c=n("mQlO"),l=n("w301"),d=n("BMbf"),u=n("3IV/"),p=n("VEgZ"),h=n("nsBn");const f={overflow:"hidden"},m={[a.e]:{padding:{default:{bottom:12,left:12,right:12,top:12}},beforeItemSpacing:{default:()=>12},borderRadius:()=>0,hover:{text:u.text,secondaryText:u.N200},selected:{background:Object(l.a)({light:u.N20,dark:u.DN70}),text:Object(l.a)({light:u.N800,dark:u.DN600}),secondaryText:Object(l.a)({light:u.N200,dark:u.DN300})}}},b=i.default.div`
  width: 40px;
  height: 40px;
  overflow: hidden;
  border: 1px solid rgba(223, 225, 229, 0.5); /* N60 at 50% */
  border-radius: ${Object(d.c)()}px;
  box-sizing: border-box;

  display: flex;
  justify-content: center;
  align-items: center;

  div {
    width: 40px;
    height: 40px;
  }
`,g=i.default.div`
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: space-between;
  line-height: 1.4;
`,v=i.default.div`
  white-space: initial;
  .item-description {
    font-size: 11.67px;
    color: ${u.N200};
    margin-top: 4px;
  }
`,y=i.default.div`
  flex: 0 0 auto;
`;function O({items:e,currentIndex:t,insertByIndex:n,setCurrentIndex:o}){return Array.isArray(e)?r.a.createElement(i.ThemeProvider,{theme:m},r.a.createElement(s.a,null,e.map((e,i)=>r.a.createElement(E,{key:e.key||e.title,item:e,index:i,currentIndex:t,insertByIndex:n,setCurrentIndex:o})))):null}class E extends r.a.Component{constructor(){super(...arguments),this.state={ref:null},this.insertByIndex=()=>{this.props.insertByIndex(this.props.index)},this.setCurrentIndex=()=>{this.isSelected(this.props)||this.props.setCurrentIndex(this.props.index)},this.handleRef=e=>{this.setState({ref:(e=>e&&e.ref)(e)?e.ref:e})}}shouldComponentUpdate(e){return this.isSelected(this.props)!==this.isSelected(e)}isSelected(e){return e.index===e.currentIndex}componentDidUpdate(){const e=this.state.ref;this.props.index===this.props.currentIndex&&e&&function(e){const{offsetTop:t,offsetHeight:n,offsetParent:o}=e,{offsetHeight:r,scrollTop:i}=o,a=t+n>r+i?1:i>t?-1:0;0!==a&&o&&(o.scrollTop=1===a?t+n-r:t)}(e)}render(){const{item:e}=this.props;return e.render?r.a.createElement("div",{onMouseMove:this.setCurrentIndex,ref:this.handleRef,style:f},r.a.createElement(e.render,{onClick:this.insertByIndex,onHover:this.setCurrentIndex,isSelected:this.isSelected(this.props)})):r.a.createElement(c.a,{onClick:this.insertByIndex,onMouseMove:this.setCurrentIndex,elemBefore:r.a.createElement(b,null,e.icon?e.icon():(t=e.title,r.a.createElement(h.default,{label:t}))),isSelected:this.isSelected(this.props),"aria-describedby":e.title,ref:this.handleRef},r.a.createElement(g,null,r.a.createElement(v,null,r.a.createElement("div",{className:"item-title"},e.title),e.description&&r.a.createElement("div",{className:"item-description"},e.description)),r.a.createElement(y,null,e.keyshortcut&&r.a.createElement(p.h,null,e.keyshortcut))));var t}}},mF23:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return y})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return E})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return C})),n.d(t,"a",(function(){return T}));var o=n("ehfC"),r=n("TIUX"),i=n("tVIO"),a=n("4FMG"),s=n("fDJo");const c=()=>(e,t)=>{const{code:n}=e.schema.marks,{empty:o,$cursor:r}=e.selection;if(!o||!r)return!1;const{storedMarks:i}=e.tr;if(n){const o=Object(s.d)(e,n.create()),a=e.doc.rangeHasMark(r.pos,r.pos,n),c=e.doc.rangeHasMark(r.pos,r.pos+1,n),l=!(a||c||i&&!i.length),d=!a&&c&&(!i||!i.length);if(!o&&d)return t&&t(e.tr.addStoredMark(n.create())),!0;if(o&&l)return t&&t(e.tr.removeStoredMark(n)),!0}return!1},l=()=>(e,t)=>{const{code:n}=e.schema.marks,{empty:r,$cursor:i}=e.selection;if(!r||!i)return!1;const{storedMarks:a}=e.tr;if(n){const r=n&&Object(s.d)(e,n.create()),c=Object(s.c)(e,i.pos),l=Object(s.c)(e,i.pos-1),d=Object(s.c)(e,i.pos-2),u=c&&!l&&Array.isArray(a),p=l&&!d&&(null===a||Array.isArray(a)&&!!a.length),h=(u&&Array.isArray(a)&&!a.length||!u&&null===a)&&!l&&d,f=!c&&l&&Array.isArray(a)&&!a.length;if(!r&&h){const r=e.tr.setSelection(o.Selection.near(e.doc.resolve(i.pos-1)));return t&&t(r.removeStoredMark(n)),!0}if(!r&&f)return t&&t(e.tr.addStoredMark(n.create())),!0;if(r&&p){const r=e.tr.setSelection(o.Selection.near(e.doc.resolve(i.pos-1)));return t&&t(r.addStoredMark(n.create())),!0}const m=0===i.index(i.depth-1);if(r&&(u||!i.nodeBefore&&m))return t&&t(e.tr.removeStoredMark(n)),!0}return!1},d=()=>(e,t)=>{const{em:n}=e.schema.marks;return!!n&&Object(r.i)(n)(e,t)},u=({inputMethod:e})=>Object(i.d)({action:a.a.FORMATTED,actionSubject:a.b.TEXT,eventType:a.d.TRACK,actionSubjectId:a.c.FORMAT_ITALIC,attributes:{inputMethod:e}})(d()),p=()=>(e,t)=>{const{strike:n}=e.schema.marks;return!!n&&Object(r.i)(n)(e,t)},h=({inputMethod:e})=>Object(i.d)({action:a.a.FORMATTED,actionSubject:a.b.TEXT,eventType:a.d.TRACK,actionSubjectId:a.c.FORMAT_STRIKE,attributes:{inputMethod:e}})(p()),f=()=>(e,t)=>{const{strong:n}=e.schema.marks;return!!n&&Object(r.i)(n)(e,t)},m=({inputMethod:e})=>Object(i.d)({action:a.a.FORMATTED,actionSubject:a.b.TEXT,eventType:a.d.TRACK,actionSubjectId:a.c.FORMAT_STRONG,attributes:{inputMethod:e}})(f()),b=()=>(e,t)=>{const{underline:n}=e.schema.marks;return!!n&&Object(r.i)(n)(e,t)},g=({inputMethod:e})=>Object(i.d)({action:a.a.FORMATTED,actionSubject:a.b.TEXT,eventType:a.d.TRACK,actionSubjectId:a.c.FORMAT_UNDERLINE,attributes:{inputMethod:e}})(b()),v=()=>(e,t)=>{const{subsup:n}=e.schema.marks;return!!n&&Object(r.i)(n,{type:"sup"})(e,t)},y=({inputMethod:e})=>Object(i.d)({action:a.a.FORMATTED,actionSubject:a.b.TEXT,eventType:a.d.TRACK,actionSubjectId:a.c.FORMAT_SUPER,attributes:{inputMethod:e}})(v()),O=()=>(e,t)=>{const{subsup:n}=e.schema.marks;return!!n&&Object(r.i)(n,{type:"sub"})(e,t)},E=({inputMethod:e})=>Object(i.d)({action:a.a.FORMATTED,actionSubject:a.b.TEXT,eventType:a.d.TRACK,actionSubjectId:a.c.FORMAT_SUB,attributes:{inputMethod:e}})(O()),w=()=>(e,t)=>{const{code:n}=e.schema.marks;return!!n&&Object(r.i)(n)(e,t)},C=({inputMethod:e})=>Object(i.d)({action:a.a.FORMATTED,actionSubject:a.b.TEXT,eventType:a.d.TRACK,actionSubjectId:a.c.FORMAT_CODE,attributes:{inputMethod:e}})(w()),T=(e,t,n)=>Object(i.d)({action:a.a.FORMATTED,actionSubject:a.b.TEXT,eventType:a.d.TRACK,actionSubjectId:a.c.FORMAT_CODE,attributes:{inputMethod:a.e.FORMATTING}})(((e,t,n)=>(o,i)=>{if(o.selection.empty){const{nodeBefore:a}=o.doc.resolve(e),{nodeAfter:s}=o.doc.resolve(t),c=a&&a.text&&a.text.endsWith("`"),l=s&&s.text&&s.text.startsWith("`");if(c&&l){let a=o.tr.replaceRangeWith(e-1,t+1,o.schema.text(n));if(i){const n=o.schema.marks.code.create();a=Object(r.a)(a.mapping.map(e-1),a.mapping.map(t+1),!1,n,a).setStoredMarks([n]),i(a)}return!0}}return!1})(e,t,n))},mHbP:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=new(n("ehfC").PluginKey)("tasksAndDecisionsPlugin")},mLjB:function(e,t,n){"use strict";e.exports=function(e){var t,n,o=0,r=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)r[t].nesting<0&&o--,r[t].level=o,r[t].nesting>0&&o++,"text"===r[t].type&&t+1<i&&"text"===r[t+1].type?r[t+1].content=r[t].content+r[t+1].content:(t!==n&&(r[n]=r[t]),n++);t!==n&&(r.length=n)}},mOMa:function(e,t,n){"use strict";var o,r;n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),function(e){e.BACKWARD="backward",e.FORWARD="forward"}(o||(o={})),function(e){e.JOIN_SIBLINGS="joinSiblings",e.JOIN_DESCENDANT_TO_PARENT="joinDescendantToParent",e.JOIN_TO_SIBLING_DESCENDANT="joinToSiblingDescendant",e.JOIN_PARAGRAPH_WITH_LIST="joinParagraphWithList",e.JOIN_PARENT_SIBLING_TO_PARENT_CHILD="joinParentSiblingToParentChild",e.JOIN_LIST_ITEM_WITH_PARAGRAPH="joinListItemWithParagraph"}(r||(r={}))},mQXi:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return d}));var o=n("ehfC"),r=n("eGvA");function i(e){const{selection:t,doc:n}=e;return n.nodeSize-t.$to.pos-2===t.$to.depth}function a(e){const{selection:t}=e;return t.$from.pos===t.$from.depth}function s(e){const{selection:t}=e,{$to:n}=t;return!(t instanceof r.a)&&(!!(t instanceof o.NodeSelection&&t.node.isBlock)||d(n)===n.pos+1)}function c(e){const{selection:t}=e,{$from:n}=t;return!(t instanceof r.a)&&(!!(t instanceof o.NodeSelection&&t.node.isBlock)||l(n)===n.pos)}function l(e){return e.start(e.depth)}function d(e){return e.end(e.depth)+1}},mURL:function(e,t,n){"use strict";var o=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,r=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;e.exports=function(e,t){var n,i,a,s,c,l,d=e.pos;return 60===e.src.charCodeAt(d)&&(!((n=e.src.slice(d)).indexOf(">")<0)&&(r.test(n)?(s=(i=n.match(r))[0].slice(1,-1),c=e.md.normalizeLink(s),!!e.md.validateLink(c)&&(t||((l=e.push("link_open","a",1)).attrs=[["href",c]],l.markup="autolink",l.info="auto",(l=e.push("text","",0)).content=e.md.normalizeLinkText(s),(l=e.push("link_close","a",-1)).markup="autolink",l.info="auto"),e.pos+=i[0].length,!0)):!!o.test(n)&&(s=(a=n.match(o))[0].slice(1,-1),c=e.md.normalizeLink("mailto:"+s),!!e.md.validateLink(c)&&(t||((l=e.push("link_open","a",1)).attrs=[["href",c]],l.markup="autolink",l.info="auto",(l=e.push("text","",0)).content=e.md.normalizeLinkText(s),(l=e.push("link_close","a",-1)).markup="autolink",l.info="auto"),e.pos+=a[0].length,!0))))}},mUT7:function(e,t,n){"use strict";e.exports=function(e){var t,n,o,r=e.tokens;for(n=0,o=r.length;n<o;n++)"inline"===(t=r[n]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},"mVB+":function(e,t,n){"use strict";var o=n("T1Ll").assign,r=n("T1Ll").unescapeAll,i=n("T1Ll").escapeHtml,a={};function s(){this.rules=o({},a)}a.code_inline=function(e,t,n,o,r){var a=e[t];return"<code"+r.renderAttrs(a)+">"+i(e[t].content)+"</code>"},a.code_block=function(e,t,n,o,r){var a=e[t];return"<pre"+r.renderAttrs(a)+"><code>"+i(e[t].content)+"</code></pre>\n"},a.fence=function(e,t,n,o,a){var s,c,l,d,u=e[t],p=u.info?r(u.info).trim():"",h="";return p&&(h=p.split(/\s+/g)[0]),0===(s=n.highlight&&n.highlight(u.content,h)||i(u.content)).indexOf("<pre")?s+"\n":p?(c=u.attrIndex("class"),l=u.attrs?u.attrs.slice():[],c<0?l.push(["class",n.langPrefix+h]):l[c][1]+=" "+n.langPrefix+h,d={attrs:l},"<pre><code"+a.renderAttrs(d)+">"+s+"</code></pre>\n"):"<pre><code"+a.renderAttrs(u)+">"+s+"</code></pre>\n"},a.image=function(e,t,n,o,r){var i=e[t];return i.attrs[i.attrIndex("alt")][1]=r.renderInlineAsText(i.children,n,o),r.renderToken(e,t,n)},a.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},a.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},a.text=function(e,t){return i(e[t].content)},a.html_block=function(e,t){return e[t].content},a.html_inline=function(e,t){return e[t].content},s.prototype.renderAttrs=function(e){var t,n,o;if(!e.attrs)return"";for(o="",t=0,n=e.attrs.length;t<n;t++)o+=" "+i(e.attrs[t][0])+'="'+i(e.attrs[t][1])+'"';return o},s.prototype.renderToken=function(e,t,n){var o,r="",i=!1,a=e[t];return a.hidden?"":(a.block&&-1!==a.nesting&&t&&e[t-1].hidden&&(r+="\n"),r+=(-1===a.nesting?"</":"<")+a.tag,r+=this.renderAttrs(a),0===a.nesting&&n.xhtmlOut&&(r+=" /"),a.block&&(i=!0,1===a.nesting&&t+1<e.length&&("inline"===(o=e[t+1]).type||o.hidden||-1===o.nesting&&o.tag===a.tag)&&(i=!1)),r+=i?">\n":">")},s.prototype.renderInline=function(e,t,n){for(var o,r="",i=this.rules,a=0,s=e.length;a<s;a++)void 0!==i[o=e[a].type]?r+=i[o](e,a,t,n,this):r+=this.renderToken(e,a,t);return r},s.prototype.renderInlineAsText=function(e,t,n){for(var o="",r=0,i=e.length;r<i;r++)"text"===e[r].type?o+=e[r].content:"image"===e[r].type&&(o+=this.renderInlineAsText(e[r].children,t,n));return o},s.prototype.render=function(e,t,n){var o,r,i,a="",s=this.rules;for(o=0,r=e.length;o<r;o++)"inline"===(i=e[o].type)?a+=this.renderInline(e[o].children,t,n):void 0!==s[i]?a+=s[e[o].type](e,o,t,n,this):a+=this.renderToken(e,o,t,n);return a},e.exports=s},n0JQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("Czhu"),r=n("ERkP"),i=n.n(r),a=n("sypB"),s=n("KsTJ"),c=n("3IV/"),l=n("qPpp"),d=n("MrDN"),u=n("xuWu"),p=n("6rIb"),h=n("D//s");const f=s.default.div`
  will-change: width;
  width: ${e=>e.visible?e.panelWidth:0}px;
  height: 100%;
  transition: width ${500}ms ${l.M};
  overflow: hidden;
  box-shadow: inset 2px 0 0 0 ${c.N30};
`,m=s.default.div`
  box-sizing: border-box;
  padding: 16px 16px 0px;
  width: ${e=>e.panelWidth}px;
  height: 100%;
  overflow-y: auto;
`;class b extends i.a.PureComponent{constructor(){super(...arguments),this.state={mounted:!1,currentPluginContent:void 0},this.showPluginContent=()=>{const{pluginContent:e}=this.props,{currentPluginContent:t}=this.state;if(t)return i.a.createElement(a.a,{timeout:this.state.mounted?500:0,in:!!e,mountOnEnter:!0,unmountOnExit:!0,onExited:()=>this.unsetPluginContent()},t)},this.showProvidedContent=e=>{const{children:t}=this.props;if(t)return i.a.createElement(a.a,{timeout:this.state.mounted?500:0,in:e,mountOnEnter:!0,unmountOnExit:!0},t)}}static getDerivedStateFromProps(e,t){return e.pluginContent!==t.currentPluginContent?Object(o.a)(Object(o.a)({},t),{},{currentPluginContent:e.pluginContent}):null}unsetPluginContent(){this.setState({currentPluginContent:void 0})}componentDidMount(){this.setState({mounted:!0})}render(){const{currentPluginContent:e}=this.state,t=e?360:this.props.width||360,n=!!this.props.visible,o=n||!!this.state.currentPluginContent;return i.a.createElement(d.a,null,({broadcastWidth:e})=>(e(o?t:0),i.a.createElement(f,{panelWidth:t,visible:o},i.a.createElement(m,{panelWidth:t},this.showPluginContent()||this.showProvidedContent(n)))))}}class g extends i.a.Component{render(){return i.a.createElement(h.a,{render:e=>{const t=e._privateGetEventDispatcher(),n=e._privateGetEditorView();return t?i.a.createElement(u.a,{eventDispatcher:t,plugins:{contextPanel:p.b},render:({contextPanel:e})=>{const t=e&&e.contents.find(Boolean);return i.a.createElement(b,Object.assign({},this.props,{editorView:n,pluginContent:t}))}}):i.a.createElement(b,Object.assign({editorView:n},this.props))}})}}g.defaultProps={width:360}},n46c:function(e,t,n){"use strict";var o=n("L21V");t.a=Object(o.f)({white:{id:"fabric.theme.white",defaultMessage:"White",description:"Name of a color"},"light-blue":{id:"fabric.theme.light-blue",defaultMessage:"Light blue",description:"Name of a color"},"light-teal":{id:"fabric.theme.light-teal",defaultMessage:"Light teal",description:"Name of a color"},"light-green":{id:"fabric.theme.light-green",defaultMessage:"Light green",description:"Name of a color"},"light-yellow":{id:"fabric.theme.light-yellow",defaultMessage:"Light yellow",description:"Name of a color"},"light-red":{id:"fabric.theme.light-red",defaultMessage:"Light red",description:"Name of a color"},"light-purple":{id:"fabric.theme.light-purple",defaultMessage:"Light purple",description:"Name of a color"},"light-gray":{id:"fabric.theme.light-gray",defaultMessage:"Light gray",description:"Name of a color"},blue:{id:"fabric.theme.blue",defaultMessage:"Blue",description:"Name of a color"},teal:{id:"fabric.theme.teal",defaultMessage:"Teal",description:"Name of a color"},green:{id:"fabric.theme.green",defaultMessage:"Green",description:"Name of a color"},yellow:{id:"fabric.theme.yellow",defaultMessage:"Yellow",description:"Name of a color"},red:{id:"fabric.theme.red",defaultMessage:"Red",description:"Name of a color"},orange:{id:"fabric.theme.orange",defaultMessage:"Orange",description:"Name of a color."},purple:{id:"fabric.theme.purple",defaultMessage:"Purple",description:"Name of a color"},gray:{id:"fabric.theme.gray",defaultMessage:"Gray",description:"Name of a color"},"dark-blue":{id:"fabric.theme.dark-blue",defaultMessage:"Dark blue",description:"Name of a color"},"dark-teal":{id:"fabric.theme.dark-teal",defaultMessage:"Dark teal",description:"Name of a color"},"dark-green":{id:"fabric.theme.dark-green",defaultMessage:"Dark green",description:"Name of a color"},"dark-yellow":{id:"fabric.theme.dark-yellow",defaultMessage:"Dark yellow",description:"Name of a color"},"dark-red":{id:"fabric.theme.dark-red",defaultMessage:"Dark red",description:"Name of a color"},"dark-purple":{id:"fabric.theme.dark-purple",defaultMessage:"Dark purple",description:"Name of a color"}})},"nB/6":function(e,t,n){var o;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o)&&o.length){var a=r.apply(null,o);a&&e.push(a)}else if("object"===i)for(var s in o)n.call(o,s)&&o[s]&&e.push(s)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(o=function(){return r}.apply(t,[]))||(e.exports=o)}()},nsBn:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var o=n("ERkP"),r=n.n(o);function i({label:e=""}){return r.a.createElement("svg",{"aria-label":e,width:40,height:40},r.a.createElement("defs",null,r.a.createElement("linearGradient",{x1:"-26.046%",y1:"100%",x2:"62.626%",y2:"0%",id:"fallback-a"},r.a.createElement("stop",{stopColor:"#B3BAC5",offset:"0%"}),r.a.createElement("stop",{stopColor:"#A5ADBA",offset:"100%"}))),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#FFF",d:"M0 0h40v40H0z"}),r.a.createElement("path",{fill:"#DFE1E6",d:"M20 16h12v12H20z"}),r.a.createElement("path",{fill:"url(#fallback-a)",d:"M8 16h12v12H8z"}),r.a.createElement("path",{d:"M20 16c-4 .5-6.029 2.5-6.086 6-.057 3.5-2.028 5.5-5.914 6h12V16z",fill:"#A5ADBA"}),r.a.createElement("path",{fill:"#B3BAC5",d:"M17.5 13h5v3h-5z"}),r.a.createElement("path",{fill:"#A5ADBA",d:"M10 13h5v3h-5z"}),r.a.createElement("path",{fill:"#DFE1E6",d:"M25 13h5v3h-5z"})))}},o5vo:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o={hoveredColumns:[],hoveredRows:[],isInDanger:!1}},oPym:function(e,t,n){"use strict";var o=n("ehfC"),r=n("lELC"),i=n("UdmJ"),a=n("Czhu");class s{constructor(e=new Map){this.participants=e}add(e){const t=new Map(this.participants);return e.forEach(e=>{t.set(e.sessionId,e)}),new s(t)}remove(e){const t=new Map(this.participants);return e.forEach(e=>{t.delete(e)}),new s(t)}update(e,t){const n=new Map(this.participants),o=n.get(e);return o?(n.set(e,Object(a.a)(Object(a.a)({},o),{},{lastActive:t})),new s(n)):this}toArray(){return Array.from(this.participants.values())}get(e){return this.participants.get(e)}size(){return this.participants.size}eq(e){return this.toArray().map(e=>e.sessionId).sort((e,t)=>e>t?-1:1).join("")===e.toArray().map(e=>e.sessionId).sort((e,t)=>e>t?-1:1).join("")}}var c=n("fttP");n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));const l=e=>e instanceof i.ReplaceStep,d="telepointer-dim",u=(e,t)=>{const n=e.doc.resolve(t),r=o.Selection.findFrom(n,-1,!0),i=o.Selection.findFrom(n,1,!0);return r?r.from:i?i.from:t};class p{constructor(e,t,n,o=!1,r){this.onError=e=>console.error(e),this.decorationSet=e,this.participants=t,this.sid=n,this.isReady=o,this.onError=r||this.onError}get decorations(){return this.decorationSet}get activeParticipants(){return this.participants}get sessionId(){return this.sid}getInitial(e){const t=this.participants.get(e);return t?t.name.substring(0,1).toUpperCase():"X"}apply(e){let{participants:t,sid:n,isReady:o}=this;const r=e.getMeta("presence"),i=e.getMeta("telepointer"),a=e.getMeta("sessionId");let s=e.getMeta("collabInitialised");"boolean"!=typeof s&&(s=o),a&&(n=a.sid);let h=[],f=[];if(r){const{joined:e=[],left:n=[]}=r;t=t.remove(n.map(e=>e.sessionId)),t=t.add(e),n.forEach(e=>{const t=Object(c.c)(e.sessionId,this.decorationSet);t&&(f=f.concat(t))})}if(i){const{sessionId:o}=i;if(t.get(o)&&o!==n){const t=Object(c.c)(i.sessionId,this.decorationSet);t&&(f=f.concat(t));const{anchor:n,head:r}=i.selection,a=n<r?n:r,s=n>=r?n:r,l=s-a>0;let d=1,p=1;try{d=u(e,l?Math.max(a-1,0):a),p=l?u(e,s):d}catch(g){this.onError(g)}h=h.concat(Object(c.b)(d,p,o,l,this.getInitial(o)))}}if(e.docChanged){try{this.decorationSet=this.decorationSet.map(e.mapping,e.doc,{onRemove:t=>{if(t.pointer&&t.pointer.sessionId){const n=e.steps.filter(l)[0];if(n){const{sessionId:o}=t.pointer,{slice:{content:{size:r}},from:i}=n,a=u(e,r?Math.min(i+r,e.doc.nodeSize-3):Math.max(i,1));h=h.concat(Object(c.b)(a,a,o,!1,this.getInitial(o)))}}}})}catch(g){this.onError(g)}e.steps.filter(l).forEach(e=>{const{from:t,to:n}=e;this.decorationSet.find(t,n).forEach(e=>{e.from!==e.to&&f.push(e)})})}const{selection:m}=e;this.decorationSet.find().forEach(e=>{if(e.type.toDOM){const t=e.type.toDOM.classList.contains(d);e.from===m.from&&e.to===m.to?(t||e.type.toDOM.classList.add(d),e.type.side=-1):(t&&e.type.toDOM.classList.remove(d),e.type.side=0)}}),f.length&&(this.decorationSet=this.decorationSet.remove(f)),h.length&&(this.decorationSet=this.decorationSet.add(e.doc,h));const b=new p(this.decorationSet,t,n,s);return p.eq(b,this)?this:b}static eq(e,t){return e.participants===t.participants&&e.sessionId===t.sessionId&&e.isReady===t.isReady}static init(e){const{doc:t,onError:n}=e;return new p(r.b.create(t,[]),new s,void 0,void 0,n)}}},oSff:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return u}));n("ehfC");var o=n("I9T1"),r=n("4icS"),i=n("eObz"),a=n("h75s");const s=e=>"inlineCard"===e.name?"inline":"blockCard"===e.name?"block":"embedCard"===e.name?"embed":void 0,c=e=>{const{attrs:t}=e;return{url:t.url||t.data&&t.data.url,title:t.data&&t.data.title}},l=(e,t)=>((e,t)=>({title:t&&t.title||e.title,url:t&&t.url||e.url}))(c(e),t),d=e=>r.a.getState(e).cards.find(t=>t.pos===e.selection.from),u=(e,t)=>{const{blockCard:n,inlineCard:r}=t.schema.nodes,s=[];return Object(i.c)(e.content,(e,o,i)=>{e.type!==n||Object(a.e)(t,i)?s.push(e):s.push(r.createChecked(e.attrs,e.content,e.marks))}),new o.Slice(o.Fragment.fromArray(s),e.openStart,e.openEnd)}},otMq:function(e,t,n){"use strict";var o=n("T1Ll").normalizeReference,r=n("T1Ll").isSpace;e.exports=function(e,t){var n,i,a,s,c,l,d,u,p,h="",f=e.pos,m=e.posMax,b=e.pos,g=!0;if(91!==e.src.charCodeAt(e.pos))return!1;if(c=e.pos+1,(s=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)return!1;if((l=s+1)<m&&40===e.src.charCodeAt(l)){for(g=!1,l++;l<m&&(i=e.src.charCodeAt(l),r(i)||10===i);l++);if(l>=m)return!1;for(b=l,(d=e.md.helpers.parseLinkDestination(e.src,l,e.posMax)).ok&&(h=e.md.normalizeLink(d.str),e.md.validateLink(h)?l=d.pos:h=""),b=l;l<m&&(i=e.src.charCodeAt(l),r(i)||10===i);l++);if(d=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<m&&b!==l&&d.ok)for(p=d.str,l=d.pos;l<m&&(i=e.src.charCodeAt(l),r(i)||10===i);l++);else p="";(l>=m||41!==e.src.charCodeAt(l))&&(g=!0),l++}if(g){if(void 0===e.env.references)return!1;if(l<m&&91===e.src.charCodeAt(l)?(b=l+1,(l=e.md.helpers.parseLinkLabel(e,l))>=0?a=e.src.slice(b,l++):l=s+1):l=s+1,a||(a=e.src.slice(c,s)),!(u=e.env.references[o(a)]))return e.pos=f,!1;h=u.href,p=u.title}return t||(e.pos=c,e.posMax=s,e.push("link_open","a",1).attrs=n=[["href",h]],p&&n.push(["title",p]),e.md.inline.tokenize(e),e.push("link_close","a",-1)),e.pos=l,e.posMax=m,!0}},oxCZ:function(e,t,n){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=n(1),a=n(7),s=a.get,c=(a.deepValue,a.isArray),l=function(){function e(t,n){var o=n.location,r=void 0===o?0:o,i=n.distance,a=void 0===i?100:i,c=n.threshold,l=void 0===c?.6:c,d=n.maxPatternLength,u=void 0===d?32:d,p=n.caseSensitive,h=void 0!==p&&p,f=n.tokenSeparator,m=void 0===f?/ +/g:f,b=n.findAllMatches,g=void 0!==b&&b,v=n.minMatchCharLength,y=void 0===v?1:v,O=n.id,E=void 0===O?null:O,w=n.keys,C=void 0===w?[]:w,T=n.shouldSort,S=void 0===T||T,k=n.getFn,x=void 0===k?s:k,A=n.sortFn,j=void 0===A?function(e,t){return e.score-t.score}:A,I=n.tokenize,M=void 0!==I&&I,N=n.matchAllTokens,R=void 0!==N&&N,P=n.includeMatches,L=void 0!==P&&P,D=n.includeScore,_=void 0!==D&&D,B=n.verbose,$=void 0!==B&&B;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:r,distance:a,threshold:l,maxPatternLength:u,isCaseSensitive:h,tokenSeparator:m,findAllMatches:g,minMatchCharLength:y,id:E,keys:C,includeMatches:L,includeScore:_,shouldSort:S,getFn:x,sortFn:j,verbose:$,tokenize:M,matchAllTokens:R},this.setCollection(t),this._processKeys(C)}var t,n;return t=e,(n=[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"_processKeys",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,n=e.length;t<n;t+=1){var o=e[t];this._keyWeights[o]=1,this._keyNames.push(o)}else{for(var r=null,i=null,a=0,s=0,c=e.length;s<c;s+=1){var l=e[s];if(!l.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var d=l.name;if(this._keyNames.push(d),!l.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');var u=l.weight;if(u<0||u>1)throw new Error('"weight" property in key must bein the range of [0, 1)');i=null==i?u:Math.max(i,u),r=null==r?u:Math.min(r,u),this._keyWeights[d]=u,a+=u}if(a>1)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var n=this._prepareSearchers(e),o=n.tokenSearchers,r=n.fullSearcher,i=this._search(o,r);return this._computeScore(i),this.options.shouldSort&&this._sort(i),t.limit&&"number"==typeof t.limit&&(i=i.slice(0,t.limit)),this._format(i)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),o=0,r=n.length;o<r;o+=1)t.push(new i(n[o],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.list,o={},r=[];if("string"==typeof n[0]){for(var i=0,a=n.length;i<a;i+=1)this._analyze({key:"",value:n[i],record:i,index:i},{resultMap:o,results:r,tokenSearchers:e,fullSearcher:t});return r}for(var s=0,c=n.length;s<c;s+=1)for(var l=n[s],d=0,u=this._keyNames.length;d<u;d+=1){var p=this._keyNames[d];this._analyze({key:p,value:this.options.getFn(l,p),record:l,index:s},{resultMap:o,results:r,tokenSearchers:e,fullSearcher:t})}return r}},{key:"_analyze",value:function(e,t){var n=this,o=e.key,r=e.arrayIndex,i=void 0===r?-1:r,a=e.value,s=e.record,l=e.index,d=t.tokenSearchers,u=void 0===d?[]:d,p=t.fullSearcher,h=t.resultMap,f=void 0===h?{}:h,m=t.results,b=void 0===m?[]:m;!function e(t,r,i,a){if(null!=r)if("string"==typeof r){var s=!1,l=-1,d=0;n._log("\nKey: ".concat(""===o?"--":o));var h=p.search(r);if(n._log('Full text: "'.concat(r,'", score: ').concat(h.score)),n.options.tokenize){for(var m=r.split(n.options.tokenSeparator),g=m.length,v=[],y=0,O=u.length;y<O;y+=1){var E=u[y];n._log('\nPattern: "'.concat(E.pattern,'"'));for(var w=!1,C=0;C<g;C+=1){var T=m[C],S=E.search(T),k={};S.isMatch?(k[T]=S.score,s=!0,w=!0,v.push(S.score)):(k[T]=1,n.options.matchAllTokens||v.push(1)),n._log('Token: "'.concat(T,'", score: ').concat(k[T]))}w&&(d+=1)}l=v[0];for(var x=v.length,A=1;A<x;A+=1)l+=v[A];l/=x,n._log("Token score average:",l)}var j=h.score;l>-1&&(j=(j+l)/2),n._log("Score average:",j);var I=!n.options.tokenize||!n.options.matchAllTokens||d>=u.length;if(n._log("\nCheck Matches: ".concat(I)),(s||h.isMatch)&&I){var M={key:o,arrayIndex:t,value:r,score:j};n.options.includeMatches&&(M.matchedIndices=h.matchedIndices);var N=f[a];N?N.output.push(M):(f[a]={item:i,output:[M]},b.push(f[a]))}}else if(c(r))for(var R=0,P=r.length;R<P;R+=1)e(R,r[R],i,a)}(i,a,s,l)}},{key:"_computeScore",value:function(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,n=!!Object.keys(t).length,o=0,r=e.length;o<r;o+=1){for(var i=e[o],a=i.output,s=a.length,c=1,l=0;l<s;l+=1){var d=a[l],u=d.key,p=n?t[u]:1,h=0===d.score&&t&&t[u]>0?Number.EPSILON:d.score;c*=Math.pow(h,p)}i.score=c,this._log(i)}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,(function(e,t){if("object"===o(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t}),2)),n=null}var r=[];this.options.includeMatches&&r.push((function(e,t){var n=e.output;t.matches=[];for(var o=0,r=n.length;o<r;o+=1){var i=n[o];if(0!==i.matchedIndices.length){var a={indices:i.matchedIndices,value:i.value};i.key&&(a.key=i.key),i.hasOwnProperty("arrayIndex")&&i.arrayIndex>-1&&(a.arrayIndex=i.arrayIndex),t.matches.push(a)}}})),this.options.includeScore&&r.push((function(e,t){t.score=e.score}));for(var i=0,a=e.length;i<a;i+=1){var s=e[i];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),r.length){for(var c={item:s.item},l=0,d=r.length;l<d;l+=1)r[l](s,c);t.push(c)}else t.push(s.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&r(t.prototype,n),e}();e.exports=l},function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=n(2),i=n(3),a=n(6),s=function(){function e(t,n){var o=n.location,r=void 0===o?0:o,i=n.distance,s=void 0===i?100:i,c=n.threshold,l=void 0===c?.6:c,d=n.maxPatternLength,u=void 0===d?32:d,p=n.isCaseSensitive,h=void 0!==p&&p,f=n.tokenSeparator,m=void 0===f?/ +/g:f,b=n.findAllMatches,g=void 0!==b&&b,v=n.minMatchCharLength,y=void 0===v?1:v,O=n.includeMatches,E=void 0!==O&&O;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:r,distance:s,threshold:l,maxPatternLength:u,isCaseSensitive:h,tokenSeparator:m,findAllMatches:g,includeMatches:E,minMatchCharLength:y},this.pattern=h?t:t.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=a(this.pattern))}var t,n;return t=e,(n=[{key:"search",value:function(e){var t=this.options,n=t.isCaseSensitive,o=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var a={isMatch:!0,score:0};return o&&(a.matchedIndices=[[0,e.length-1]]),a}var s=this.options,c=s.maxPatternLength,l=s.tokenSeparator;if(this.pattern.length>c)return r(e,this.pattern,l);var d=this.options,u=d.location,p=d.distance,h=d.threshold,f=d.findAllMatches,m=d.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:u,distance:p,threshold:h,findAllMatches:f,minMatchCharLength:m,includeMatches:o})}}])&&o(t.prototype,n),e}();e.exports=s},function(e,t){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,r=new RegExp(t.replace(n,"\\$&").replace(o,"|")),i=e.match(r),a=!!i,s=[];if(a)for(var c=0,l=i.length;c<l;c+=1){var d=i[c];s.push([e.indexOf(d),d.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,n){var o=n(4),r=n(5);e.exports=function(e,t,n,i){for(var a=i.location,s=void 0===a?0:a,c=i.distance,l=void 0===c?100:c,d=i.threshold,u=void 0===d?.6:d,p=i.findAllMatches,h=void 0!==p&&p,f=i.minMatchCharLength,m=void 0===f?1:f,b=i.includeMatches,g=void 0!==b&&b,v=s,y=e.length,O=u,E=e.indexOf(t,v),w=t.length,C=[],T=0;T<y;T+=1)C[T]=0;if(-1!==E){var S=o(t,{errors:0,currentLocation:E,expectedLocation:v,distance:l});if(O=Math.min(S,O),-1!==(E=e.lastIndexOf(t,v+w))){var k=o(t,{errors:0,currentLocation:E,expectedLocation:v,distance:l});O=Math.min(k,O)}}E=-1;for(var x=[],A=1,j=w+y,I=1<<(w<=31?w-1:30),M=0;M<w;M+=1){for(var N=0,R=j;N<R;)o(t,{errors:M,currentLocation:v+R,expectedLocation:v,distance:l})<=O?N=R:j=R,R=Math.floor((j-N)/2+N);j=R;var P=Math.max(1,v-R+1),L=h?y:Math.min(v+R,y)+w,D=Array(L+2);D[L+1]=(1<<M)-1;for(var _=L;_>=P;_-=1){var B=_-1,$=n[e.charAt(B)];if($&&(C[B]=1),D[_]=(D[_+1]<<1|1)&$,0!==M&&(D[_]|=(x[_+1]|x[_])<<1|1|x[_+1]),D[_]&I&&(A=o(t,{errors:M,currentLocation:B,expectedLocation:v,distance:l}))<=O){if(O=A,(E=B)<=v)break;P=Math.max(1,2*v-E)}}if(o(t,{errors:M+1,currentLocation:v,expectedLocation:v,distance:l})>O)break;x=D}var z={isMatch:E>=0,score:0===A?.001:A};return g&&(z.matchedIndices=r(C,m)),z}},function(e,t){e.exports=function(e,t){var n=t.errors,o=void 0===n?0:n,r=t.currentLocation,i=void 0===r?0:r,a=t.expectedLocation,s=void 0===a?0:a,c=t.distance,l=void 0===c?100:c,d=o/e.length,u=Math.abs(s-i);return l?d+u/l:u?1:d}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],o=-1,r=-1,i=0,a=e.length;i<a;i+=1){var s=e[i];s&&-1===o?o=i:s||-1===o||((r=i-1)-o+1>=t&&n.push([o,r]),o=-1)}return e[i-1]&&i-o>=t&&n.push([o,i-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,o=0;o<n;o+=1)t[e.charAt(o)]=0;for(var r=0;r<n;r+=1)t[e.charAt(r)]|=1<<n-r-1;return t}},function(e,t){var n=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},o=function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)},r=function(e){return"string"==typeof e},i=function(e){return"number"==typeof e};e.exports={get:function(e,t){var a=[];return function e(t,s){if(s){var c=s.indexOf("."),l=s,d=null;-1!==c&&(l=s.slice(0,c),d=s.slice(c+1));var u=t[l];if(null!=u)if(d||!r(u)&&!i(u))if(n(u))for(var p=0,h=u.length;p<h;p+=1)e(u[p],d);else d&&e(u,d);else a.push(o(u))}else a.push(t)}(e,t),a},isArray:n,isString:r,isNum:i,toString:o}}])},"pAx/":function(e,t,n){"use strict";e.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},pVcW:function(e,t,n){"use strict";function o(e,t){var n,o,r,i,a,s;for(n=t.length-1;n>=0;n--)95!==(o=t[n]).marker&&42!==o.marker||-1!==o.end&&(r=t[o.end],s=n>0&&t[n-1].end===o.end+1&&t[n-1].token===o.token-1&&t[o.end+1].token===r.token+1&&t[n-1].marker===o.marker,a=String.fromCharCode(o.marker),(i=e.tokens[o.token]).type=s?"strong_open":"em_open",i.tag=s?"strong":"em",i.nesting=1,i.markup=s?a+a:a,i.content="",(i=e.tokens[r.token]).type=s?"strong_close":"em_close",i.tag=s?"strong":"em",i.nesting=-1,i.markup=s?a+a:a,i.content="",s&&(e.tokens[t[n-1].token].content="",e.tokens[t[o.end+1].token].content="",n--))}e.exports.tokenize=function(e,t){var n,o,r=e.pos,i=e.src.charCodeAt(r);if(t)return!1;if(95!==i&&42!==i)return!1;for(o=e.scanDelims(e.pos,42===i),n=0;n<o.length;n++)e.push("text","",0).content=String.fromCharCode(i),e.delimiters.push({marker:i,length:o.length,jump:n,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0},e.exports.postProcess=function(e){var t,n=e.tokens_meta,r=e.tokens_meta.length;for(o(e,e.delimiters),t=0;t<r;t++)n[t]&&n[t].delimiters&&o(e,n[t].delimiters)}},pWSx:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var o=n("KsTJ"),r=n("qPpp"),i=n("lEOu"),a=n("Jl7S");const s={BLOCK_CONTAINER:"unsupportedBlockView-content-wrap",INLINE_CONTAINER:"unsupportedInlineView-content-wrap"},c=`.${s.INLINE_CONTAINER} > span`,l=`.${s.BLOCK_CONTAINER} > div`,d=o.css`
  ${l}, ${c} {
    cursor: pointer;
  }

  .${r.H}${l},
    .${r.H}${c} {
    ${Object(i.a)([a.a.Background,a.a.Border])}
  }

  .danger {
    .${r.H}${l},
      .${r.H}${c} {
      border: ${r.F}px solid ${r.j};
      background-color: ${r.i};
    }
  }
`},pZXv:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n("Czhu"),r=n("ERkP"),i=n.n(r),a=n("U6Bd"),s=n("7nmT"),c=n("qPpp"),l=n("tAeE");class d extends i.a.Component{constructor(){super(...arguments),this.state={overflowScrollParent:!1,validPosition:!0},this.placement=["",""],this.handleRef=e=>{e&&this.initPopup(e)},this.scheduledUpdatePosition=Object(a.a)(e=>this.updatePosition(e)),this.onResize=()=>this.scheduledUpdatePosition()}updatePosition(e=this.props,t=this.state){const{target:n,fitHeight:o,fitWidth:r,boundariesElement:i,offset:a,onPositionCalculated:s,onPlacementChanged:c,alignX:d,alignY:u,stick:p,forcePlacement:h,allowOutOfBounds:f,rect:m}=e,{popup:b}=t;if(!n||!b)return;const g=Object(l.a)(n,i||document.body,r,o,d,u,h);c&&this.placement.join("")!==g.join("")&&(c(g),this.placement=g);let v=Object(l.b)({placement:g,popup:b,target:n,stick:p,offset:a,allowOutOfBounds:f,rect:m});v=s?s(v):v,this.setState({position:v,validPosition:Object(l.d)(n)})}cannotSetPopup(e,t,n){return!t||document.body.contains(t)&&e.offsetParent&&!e.offsetParent.contains(t)||n&&!n.contains(e.offsetParent)}initPopup(e){const{target:t}=this.props,n=Object(l.c)(e);this.cannotSetPopup(e,t,n)||this.setState({popup:e,overflowScrollParent:n},this.scheduledUpdatePosition)}UNSAFE_componentWillReceiveProps(e){this.scheduledUpdatePosition(e)}componentDidMount(){window.addEventListener("resize",this.onResize);const{stick:e}=this.props;this.scrollElement=e?Object(l.c)(this.props.target):this.props.scrollableElement,this.scrollElement&&this.scrollElement.addEventListener("scroll",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize),this.scrollElement&&this.scrollElement.removeEventListener("scroll",this.onResize),this.scheduledUpdatePosition.cancel()}renderPopup(){const{position:e}=this.state,{shouldRenderPopup:t}=this.props;return t&&!t(e||{})?null:i.a.createElement("div",{ref:this.handleRef,style:Object(o.a)({position:"absolute",zIndex:this.props.zIndex||c.n},e),"aria-label":this.props.ariaLabel||"Popup","data-editor-popup":!0},this.props.children)}render(){const{target:e,mountTo:t}=this.props,{validPosition:n}=this.state;return e&&n?t?Object(s.createPortal)(this.renderPopup(),t):this.renderPopup():null}}d.defaultProps={offset:[0,0],allowOutOfBound:!1}},q4xv:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return b}));var o=n("jyPs"),r=n("m23B"),i=n("JzyM"),a=n("tV3p");const s=e=>!!e.type.spec.isolating,c=(e,t)=>{const n=o.b.get(t),r=n.cellsInRect({left:0,top:0,right:1,bottom:n.height});for(let o=0;o<r.length;o++)try{const n=t.nodeAt(r[o]);if(n&&n.type!==e.schema.nodes.tableHeader)return!1}catch(i){return!1}return!0},l=(e,t)=>{const n=o.b.get(t);for(let o=0;o<n.width;o++){const r=t.nodeAt(n.map[o]);if(r&&r.type!==e.schema.nodes.tableHeader)return!1}return!0},d=e=>g(e,i.c,c,!1),u=e=>g(e,i.c,l,!1),p=e=>g(e,i.c,(e,t)=>!!t.attrs.isNumberColumnEnabled,!1),h=e=>{const{permittedLayouts:t}=a.d.getState(e).pluginConfig,{bodiedExtension:n,layoutSection:o,expand:i}=e.schema.nodes;return!Object(r.hasParentNodeOfType)([i,o,n])(e.selection)&&t&&("all"===t||t.indexOf("default")>-1&&t.indexOf("wide")>-1&&t.indexOf("full-page")>-1)},f=e=>v(e).reduce((e,t)=>e+t,0),m=(e,t)=>{let n=v(e),o=v(t);return!1===n.every((e,t)=>e===o[t])},b=(e,t)=>{const n=o.b.get(t),r=o.b.get(e);return n.width!==r.width};function g(e,t,n,o){const r=t(e.selection);return r?n(e,r.node,r.pos):o}function v(e){if(!e.content.firstChild)return[];let t=[];return e.content.firstChild.content.forEach(e=>{if(Array.isArray(e.attrs.colwidth)){const n=e.attrs.colspan||1;t.push(...e.attrs.colwidth.slice(0,n))}}),t}},qeFW:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=new(n("ehfC").PluginKey)("typeAheadPlugin")},qx7d:function(e,t,n){var o=n("FMEA"),r=n("UFJf"),i=n("1CCx"),a=n("Epbs"),s=n("hqGV");e.exports=function(e,t,n){var c=n||{},l=o(e,t),d=c.locale,u=s.distanceInWords.localize;d&&d.distanceInWords&&d.distanceInWords.localize&&(u=d.distanceInWords.localize);var p,h,f={addSuffix:Boolean(c.addSuffix),comparison:l};l>0?(p=r(e),h=r(t)):(p=r(t),h=r(e));var m,b=i(h,p),g=h.getTimezoneOffset()-p.getTimezoneOffset(),v=Math.round(b/60)-g;if(v<2)return c.includeSeconds?b<5?u("lessThanXSeconds",5,f):b<10?u("lessThanXSeconds",10,f):b<20?u("lessThanXSeconds",20,f):b<40?u("halfAMinute",null,f):u(b<60?"lessThanXMinutes":"xMinutes",1,f):0===v?u("lessThanXMinutes",1,f):u("xMinutes",v,f);if(v<45)return u("xMinutes",v,f);if(v<90)return u("aboutXHours",1,f);if(v<1440)return u("aboutXHours",Math.round(v/60),f);if(v<2520)return u("xDays",1,f);if(v<43200)return u("xDays",Math.round(v/1440),f);if(v<86400)return u("aboutXMonths",m=Math.round(v/43200),f);if((m=a(h,p))<12)return u("xMonths",Math.round(v/43200),f);var y=m%12,O=Math.floor(m/12);return y<3?u("aboutXYears",O,f):y<9?u("overXYears",O,f):u("almostXYears",O+1,f)}},qzjl:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ehfC"),i=n("ULBo"),a=n("m/ut");t.a=()=>({name:"macro",pmPlugins:()=>[{name:"macro",plugin:({dispatch:e,providerFactory:t})=>((e,t)=>new r.Plugin({state:{init:()=>({macroProvider:null}),apply(t,n){const r=t.getMeta(a.a);if(r){const t=Object(o.a)(Object(o.a)({},n),r);return e(a.a,t),t}return n}},key:a.a,view:e=>{const n=(t,n)=>n&&Object(i.c)(n)(e);return e.dom.parentNode&&t.subscribe("macroProvider",n),{destroy(){t.unsubscribe("macroProvider",n)}}}}))(e,t)}]})},r1uL:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return b})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"k",(function(){return O})),n.d(t,"o",(function(){return E})),n.d(t,"l",(function(){return w})),n.d(t,"f",(function(){return T})),n.d(t,"e",(function(){return S})),n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return A})),n.d(t,"n",(function(){return j})),n.d(t,"m",(function(){return I}));var o=n("ehfC"),r=n("lELC"),i=n("czJC"),a=n("Ncve"),s=n("m23B"),c=n("qPpp"),l=n("TIUX"),d=n("UP2C"),u=n("MWcs"),p=n("4FMG"),h=n("hS8s");function f(e,t,n){return function(o,r,i,a,s,c){if(n.useLongPressSelection)return!1;if(c&&-1!==e.indexOf(i.type.name)&&s.target){const e=s.target;if(t(e)){const e=n.getNodeSelectionPos?n.getNodeSelectionPos(o.state,a):a;return Object(l.h)(e)(o.state,o.dispatch),!0}}return!1}}const m=e=>{if(e.selection instanceof o.NodeSelection)return r.b.create(e.doc,[r.a.node(e.selection.from,e.selection.to,{class:c.H})]);if(e.selection instanceof o.TextSelection||e.selection instanceof o.AllSelection){const t=y(e.selection,e.doc).map(({node:e,pos:t})=>r.a.node(t,t+e.nodeSize,{class:c.H}));return r.b.create(e.doc,t)}return r.b.empty};function b(e){if(e instanceof o.NodeSelection)return{action:p.a.SELECTED,actionSubject:p.b.DOCUMENT,actionSubjectId:p.c.NODE,eventType:p.d.TRACK,attributes:{node:e.node.type.name}}}function g(e){if(e instanceof o.AllSelection)return{action:p.a.SELECTED,actionSubject:p.b.DOCUMENT,actionSubjectId:p.c.ALL,eventType:p.d.TRACK}}function v(e){if(e.selection instanceof i.a){const t=Object(a.a)(e),n=t.map.cellsInRect(t).length,o=t.map.map.length;return{action:p.a.SELECTED,actionSubject:p.b.DOCUMENT,actionSubjectId:p.c.CELL,eventType:p.d.TRACK,attributes:{selectedCells:n,totalCells:o}}}}const y=(e,t)=>{const n=[];if(e.from!==e.to){const{from:o,to:r}=e;t.nodesBetween(o,r,(e,t)=>{const i=o<=t&&t+e.nodeSize<=r;return!(e&&"paragraph"!==e.type.name&&!e.isText&&i)||(n.push({node:e,pos:t}),!1)})}return n};function O(e,t){if(e instanceof o.TextSelection&&e.from!==e.to){const{from:n,to:o,anchor:r,head:i}=e,a=[];return t.nodesBetween(n,o,(e,t)=>{if(e.isText||t>=n&&t+e.nodeSize<=o)return a.push(e.type.name),!1}),{action:p.a.SELECTED,actionSubject:p.b.DOCUMENT,actionSubjectId:p.c.RANGE,eventType:p.d.TRACK,attributes:{from:r,to:i,nodes:a}}}}function E(e,t){const{selection:n,decorationSet:r}=e,{selection:i}=t;if(n.eq(i)){if(n instanceof o.NodeSelection&&i instanceof o.NodeSelection){const e=r.find(),n=m(t.tr).find();return e.length>0&&n.length>0?!e[0].eq(n[0]):!(0===e.length&&0===n.length)}return!1}return!(n instanceof o.TextSelection&&i instanceof o.TextSelection&&n.from===n.to&&i.from===i.to)}const w=e=>!(!e||e.isAtom||!o.NodeSelection.isSelectable(e)),C=e=>!(!e||!(e.isText||Object(d.g)(e)||o.NodeSelection.isSelectable(e))),T=e=>{let t=!1;const n=Object(s.findParentNode)(e=>{const n=w(e);return n||Object(h.a)(e)||(t=!0),n})(e);if(!t)return n},S=(e,t)=>{e.parent.inlineContent&&w(e.parent)&&(e=t.resolve(e.start()-1));const n=o.Selection.findFrom(e,-1);if(n){const o=t.resolve(n.from);for(let t=e.depth+1;t<=o.depth;t++){const n=o.node(t);if(w(n))return{node:n,pos:o.start(t)-1};if(t>e.depth+1&&!Object(h.a)(n))return}}},k=(e,t)=>{const n=o.Selection.findFrom(e,1);if(n){const o=t.resolve(n.from);for(let t=e.depth+1;t<=o.depth;t++){const n=o.node(t);if(w(n))return{node:n,pos:o.start(t)-1};if(t>e.depth+1&&!Object(h.a)(n))return}}},x=e=>Object(s.flatten)(e).find(e=>C(e.node)||!Object(h.a)(e.node)),A=e=>{let t;if(e.descendants((e,n)=>{if(C(e)||!Object(h.a)(e))return t={node:e,pos:n},!1}),t)return t},j=(e,t)=>Object(u.c)(e,T(t)),I=(e,t)=>Object(u.b)(e,T(t))},r8pW:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l}));var o=n("ehfC"),r=n("UdmJ"),i=function(e,t){var n;this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,o,r){var i=n;if(t[1]){var a=t[0].lastIndexOf(t[1]);i+=t[0].slice(a+t[1].length);var s=(o+=a)-r;s>0&&(i=t[0].slice(a-s,a)+i,o=r)}return e.tr.insertText(i,o,r)}):t};function a(e){var t=e.rules,n=new o.Plugin({state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,o,r,i){return s(e,o,r,i,t,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var o=e.state.selection.$cursor;o&&s(e,o.pos,o.pos,"",t,n)}))}}},isInputRules:!0});return n}function s(e,t,n,o,r,i){if(e.composing)return!1;var a=e.state,s=a.doc.resolve(t);if(s.parent.type.spec.code)return!1;for(var c=s.parent.textBetween(Math.max(0,s.parentOffset-500),s.parentOffset,null,"")+o,l=0;l<r.length;l++){var d=r[l].match.exec(c),u=d&&r[l].handler(a,d,t-(d[0].length-o.length),n);if(u)return e.dispatch(u.setMeta(i,{transform:u,from:t,to:n,text:o})),!0}return!1}function c(e,t){for(var n=e.plugins,o=0;o<n.length;o++){var r=n[o],i=void 0;if(r.spec.isInputRules&&(i=r.getState(e))){if(t){for(var a=e.tr,s=i.transform,c=s.steps.length-1;c>=0;c--)a.step(s.steps[c].invert(s.docs[c]));if(i.text){var l=a.doc.resolve(i.from).marks();a.replaceWith(i.from,i.to,e.schema.text(i.text,l))}else a.delete(i.from,i.to);t(a)}return!0}}return!1}new i(/--$/,""),new i(/\.\.\.$/,""),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new i(/"$/,""),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new i(/'$/,"");function l(e,t,n,o){return new i(e,(function(e,i,a,s){var c=n instanceof Function?n(i):n,l=e.tr.delete(a,s),d=l.doc.resolve(a).blockRange(),u=d&&Object(r.findWrapping)(d,t,c);if(!u)return null;l.wrap(d,u);var p=l.doc.resolve(a-1).nodeBefore;return p&&p.type==t&&Object(r.canJoin)(l.doc,a-1)&&(!o||o(i,p))&&l.join(a-1),l}))}function d(e,t,n){return new i(e,(function(e,o,r,i){var a=e.doc.resolve(r),s=n instanceof Function?n(o):n;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t)?e.tr.delete(r,i).setBlockType(r,r,t,s):null}))}},"rEY+":function(e,t,n){"use strict";n.d(t,"j",(function(){return d})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"k",(function(){return O})),n.d(t,"b",(function(){return E}));var o=n("Czhu"),r=n("I9T1"),i=n("ehfC"),a=n("czJC"),s=n("CP8u"),c=n("tVIO"),l=n("4FMG");function d(){return function(){return!0}}const u=Object(c.d)({action:l.a.INSERTED,actionSubject:l.b.TEXT,actionSubjectId:l.c.LINE_BREAK,eventType:l.d.TRACK})((function(e,t){const{$from:n}=e.selection,o=n.parent,{hardBreak:a}=e.schema.nodes;if(a){const n=a.createChecked();if(o&&o.type.validContent(r.Fragment.from(n)))return t&&t(e.tr.replaceSelectionWith(n,!1)),!0}return e.selection instanceof i.TextSelection&&(t&&t(e.tr.insertText("\n")),!0)}));function p(){return function(e,t){const{to:n}=e.selection,{rule:o}=e.schema.nodes;if(o){const r=o.create();return t&&t(e.tr.insert(n+1,r)),!0}return!1}}const h=(e,t)=>!(Object(s.c)(e)||!m(e))&&(b(!1)(e,t),!0),f=(e,t)=>!(Object(s.b)(e)||!m(e))&&(b(!0)(e,t),!0);function m(e){const{selection:{$from:t}}=e,n=t.node(t.depth),o=!!n&&n.type===e.schema.nodes.codeBlock,r=e.selection instanceof i.NodeSelection;return t.depth>1||r||o}function b(e=!0){return function(t,n){const o=t.schema.nodes.paragraph;if(!o)return!1;let r;if(t.selection instanceof i.TextSelection){if(function(e){const t=e.selection.$from.node(1);return t.isTextblock&&t.type!==e.schema.nodes.codeBlock&&2===t.nodeSize}(t))return!1;r=function(e,t){const{$from:n,$to:o}=e.selection;let r;r=t?o.end(0):n.start(0);return r}(t,e)}else r=function(e,t){const{$from:n,$to:o}=e.selection,r=e.selection instanceof i.NodeSelection&&e.doc.nodeAt(e.selection.$anchor.pos),a=r&&"mediaGroup"===r.type.name;let s;t?(s=o.end(o.depth),s=o.depth>0&&!a?s+1:s):(s=n.start(n.depth),s=n.depth>0&&!a?s-1:s);return s}(t,e);const a=t.tr.insert(r,o.createAndFill());return a.setSelection(i.TextSelection.create(a.doc,r+1)),n&&n(a),!0}}function g(){return function(e,t){const{doc:n,tr:o,schema:{nodes:r}}=e;return!n.lastChild||n.lastChild.type===r.paragraph&&0===n.lastChild.content.size||o.insert(n.content.size,r.paragraph.createAndFill()),o.setSelection(i.TextSelection.create(o.doc,o.doc.content.size-1)),o.scrollIntoView(),t&&t(o),!0}}const v=e=>(t,n)=>{const{from:r,to:i}=t.selection,a=t.tr;return t.doc.nodesBetween(r,i,(n,r)=>{n.type===t.schema.nodes.mediaSingle&&a.setNodeMarkup(r,void 0,Object(o.a)(Object(o.a)({},n.attrs),{},{layout:"center"===e?"center":"align-"+e}))}),!(!a.docChanged||!n)&&(n(a.scrollIntoView()),!0)},y=(e,t,n)=>(o,r,i,a)=>{let s=!1;return a.doc.nodesBetween(o,r,(o,r,c)=>{if(!o.type.isBlock)return!1;if((!n||(Array.isArray(n)?n.indexOf(o.type)>-1:n(a.schema,o,c)))&&c.type.allowsMarkType(e)){const n=o.marks.filter(t=>t.type===e),a=n.length?n[0].attrs:void 0,c=t(a,o);void 0!==c&&(i.setNodeMarkup(r,o.type,o.attrs,o.marks.filter(t=>!e.excludes(t.type)).concat(!1===c?[]:e.create(c))),s=!0)}}),s},O=(e,t,n)=>(o,r)=>{let i=!1;const s=o.tr,c=y(e,t,n);if(o.selection instanceof a.a)o.selection.forEachCell((e,t)=>{i=c(t,t+e.nodeSize,s,o)});else{const{from:e,to:t}=o.selection;i=c(e,t,s,o)}return!(!i||!s.docChanged)&&(r&&r(s.scrollIntoView()),!0)},E=(e,t)=>{const n=e.tr;return n.replace(0,e.doc.nodeSize-2),n.setSelection(i.Selection.atStart(n.doc)),!!t&&(t(n),!0)}},rKbX:function(e,t,n){"use strict";var o=n("ehfC"),r=n("l4NO"),i=n("r1uL"),a=n("ERkP"),s=n.n(a),c=n("gyAA"),l=n("IkHm"),d=n("kvU/"),u=n("DhWB"),p=n("lSUb"),h=n("iuk6"),f=n("RFyg"),m=n("DFGU"),b=n("KsTJ"),g=n("w301"),v=n("BMbf"),y=n("3IV/"),O=n("2c8S");const E=Object(b.default)(O.f)`
  .extension-overflow-wrapper:not(.with-body) {
    overflow-x: auto;
  }

  /* extension container breakout, only works on top level */
  .ProseMirror > [extensiontype] &[data-layout='full-width'],
  .ProseMirror > [extensiontype] &[data-layout='wide'] {
    margin-left: 50%;
    transform: translateX(-50%);
  }
  .ProseMirror > * [extensiontype] &[data-layout='wide'],
  .ProseMirror > * [extensiontype] &[data-layout='wide'] {
    width: 100% !important;
  }
  cursor: pointer;
`,w=b.default.div`
  padding: ${O.g/2}px ${O.g/2}px ${O.g/4}px;
  vertical-align: middle;

  &.with-children {
    padding: 4px 8px 8px;
  }
`,C=b.default.div`
  padding: ${O.g}px;
  background: ${Object(g.a)({light:"white",dark:y.DN30})};
  color: ${Object(g.a)({dark:y.DN900})};
  border: 1px solid ${y.N30};
  border-radius: ${Object(v.c)()}px;
  cursor: initial;
`,T=b.default.div`
  padding: 0 ${O.g}px ${O.g}px;
`;var S=n("Czhu"),k=n("HbGN"),x=n("S5NY"),A=n.n(x);const j=({node:e,type:t})=>{if(!e.attrs.parameters)return;const{macroMetadata:n}=e.attrs.parameters;if(n&&n.placeholder){let e;return n.placeholder.forEach(n=>{n.type===t&&n.data&&n.data.url&&(e=n.data)}),e}};class I extends a.Component{render(){const{node:e}=this.props,t=j({node:e,type:"image"});if(t&&"extension"!==e.type.name)return this.renderImage(t);const n=j({node:e,type:"icon"});return this.renderFallback(n)}renderImage(e){const{extensionKey:t}=this.props.node.attrs,{url:n}=e,o=Object(k.a)(e,["url"]);return s.a.createElement(O.e,Object.assign({src:n},o,{alt:t}))}renderFallback(e){const{parameters:t,extensionKey:n}=this.props.node.attrs,{name:o}=this.props.node.type,r=t&&t.macroParams,i=t&&t.extensionTitle||t&&t.macroMetadata&&t.macroMetadata.title||n,a="extension"===o;return s.a.createElement(O.c,null,e&&!a?this.renderImage(Object(S.a)({height:24,width:24},e)):s.a.createElement(A.a,{label:i}),s.a.createElement("span",{className:"extension-title"},(c=i).charAt(0).toUpperCase()+c.slice(1)),r&&!a&&s.a.createElement(O.d,null,Object.keys(r).map(e=>e&&` | ${e} = ${r[e].value}`)));var c}}var M=n("xwvf"),N=n("xuWu");var R=Object(m.a)(e=>{const{node:t,handleContentDOMRef:n,children:o,view:r,handleRef:i,shadowClassNames:a}=e,c="bodiedExtension"===t.type.name,l=!!o;return s.a.createElement(N.a,{editorView:r,plugins:{widthState:M.b},render:({widthState:e={width:0}})=>s.a.createElement(E,{innerRef:i,"data-layout":t.attrs.layout,className:`extension-container ${a} ${c?"":"with-overlay"}`,style:{width:Object(f.c)(t.attrs.layout,e.width)}},s.a.createElement("div",{className:"extension-overflow-wrapper "+(c?"with-body":"")},s.a.createElement(O.b,{className:"extension-overlay"}),s.a.createElement(w,{contentEditable:!1,className:l?"with-children":""},s.a.createElement(I,{node:t}),o),c&&s.a.createElement(T,null,s.a.createElement(C,{innerRef:n,className:"extension-content"}))))})},{overflowSelector:".extension-overflow-wrapper"});const P=Object(b.default)(O.f)`
  cursor: pointer;
  display: inline-flex;
  margin: 1px;

  > img {
    border-radius: ${Object(v.c)()}px;
  }

  &::after,
  &::before {
    vertical-align: text-top;
    display: inline-block;
    width: 1px;
    content: '';
  }

  &.with-children {
    padding: 0;
    background: white;
  }
`;class L extends a.Component{render(){const{node:e,children:t}=this.props,n=!!t?"with-overlay with-children":"with-overlay";return s.a.createElement(P,{className:"extension-container "+n},s.a.createElement(O.b,{className:"extension-overlay"}),t||s.a.createElement(I,{node:e}))}}class D extends a.Component{constructor(){super(...arguments),this.state={},this.mounted=!1,this.getNodeRenderer=Object(p.default)(r.b),this.setStateFromPromise=(e,t)=>{t&&t.then(t=>{this.mounted&&this.setState({[e]:t})})},this.handleExtension=e=>{const{extensionHandlers:t,editorView:n}=this.props,{extensionType:o,extensionKey:r,parameters:i,text:a}=e.attrs;if("bodiedExtension"===e.type.name)return;const c={type:e.type.name,extensionType:o,extensionKey:r,parameters:i,content:a};let l;if(t&&t[o]){l=Object(h.a)(t[o])(c,n.state.doc)}if(!l){const e=this.state.extensionProvider&&this.getNodeRenderer(this.state.extensionProvider,o,r);if(e){const t=e;return s.a.createElement(t,{node:c})}}return l}}UNSAFE_componentWillMount(){this.mounted=!0}componentDidMount(){const{extensionProvider:e}=this.props;e&&this.setStateFromPromise("extensionProvider",e)}componentWillUnmount(){this.mounted=!1}UNSAFE_componentWillReceiveProps(e){const{extensionProvider:t}=e;t&&this.props.extensionProvider!==t&&this.setStateFromPromise("extensionProvider",t)}render(){const{node:e,handleContentDOMRef:t,editorView:n}=this.props,o=this.tryExtensionHandler();switch(e.type.name){case"extension":case"bodiedExtension":return s.a.createElement(R,{node:e,extensionProvider:this.state.extensionProvider,handleContentDOMRef:t,view:n},o);case"inlineExtension":return s.a.createElement(L,{node:e},o);default:return null}}tryExtensionHandler(){const{node:e}=this.props;try{const t=this.handleExtension(e);if(t&&s.a.isValidElement(t))return t}catch(t){console.error("Provided extension handler has thrown an error\n",t)}return null}}class _ extends a.Component{constructor(e){super(e),this.renderWithProvider=({extensionProvider:e})=>{const{node:t,editorView:n,handleContentDOMRef:o,extensionHandlers:r}=this.props;return s.a.createElement(D,{editorView:n,node:t,extensionProvider:e,handleContentDOMRef:o,extensionHandlers:r})},this.providerFactory=e.providerFactory||new d.a}componentWillUnmount(){this.props.providerFactory||this.providerFactory.destroy()}render(){return s.a.createElement(u.a,{providers:["extensionProvider"],providerFactory:this.providerFactory,renderNode:this.renderWithProvider})}}_.displayName="Extension";class B extends l.a{ignoreMutation(e){return this.node.type.isAtom||"selection"!==e.type&&"data-layout"!==e.attributeName}getContentDOM(){if(this.node.isInline)return;const e=document.createElement("div");return e.className=this.node.type.name+"-content-dom-wrapper",{dom:e}}render(e,t){return s.a.createElement("span",null,s.a.createElement(_,{editorView:this.view,node:this.node,providerFactory:e.providerFactory,handleContentDOMRef:t,extensionHandlers:e.extensionHandlers}),"inlineExtension"===this.node.type.name&&c.a)}}function $(e,t,n,o){return(r,i,a)=>new B(r,i,a,e,t,{providerFactory:n,extensionHandlers:o}).init()}var z=n("OiFN"),F=n("zpdP"),U=n("NscV"),H=n("icD4");n.d(t,"a",(function(){return V}));const W=async(e,t)=>{try{const n=await(async(e,t)=>{const n=Object(F.b)(e.state,!0);if(!n)throw new Error("There is no selection");const{extensionType:o,extensionKey:i}=n.node.attrs,a=await Object(r.a)(t,o,i),s=Object(F.b)(e.state,!0);if(s&&s.node.attrs.extensionType===o&&s.node.attrs.extensionKey===i&&s.pos===n.pos&&a)return a.update})(e,t);return Object(z.f)({showEditButton:!!n,updateExtension:n&&Promise.resolve(n)||void 0})(e.state,e.dispatch),n}catch(n){}},V=(e,t,n,r,a,s=!1)=>{const c=Object(U.b)(e,{layout:"default",showEditButton:!1,showContextPanel:!1});return new o.Plugin({state:c,view:e=>{const o=e.domAtPos.bind(e),r=(i=e,async(e,t)=>{if("extensionProvider"===e&&t)try{const e=await t;Object(z.f)({extensionProvider:e})(i.state,i.dispatch),await W(i,e)}catch(n){Object(z.f)({extensionProvider:void 0})(i.state,i.dispatch)}});var i;return t.subscribe("extensionProvider",r),{update:e=>{const{state:t,dispatch:r}=e,{element:i,extensionProvider:a,showContextPanel:s}=Object(U.c)(t),c=Object(F.b)(t,!0);if(!c)return void(s&&Object(z.a)(t,r));const l=!!Object(F.c)(t),d=Object(F.a)(o,c,l);if(i!==d){s&&Object(z.a)(t,r);const{extensionType:o}=c.node.attrs,i=n[o],l=((e,t)=>{const n=!e&&!t||"function"==typeof e,o="object"==typeof e&&"function"==typeof e.update;return!(!n&&!o)})(i,a),u=(async(e,t,n)=>{if(t&&"object"==typeof t)return t.update;if(n){const t=await W(e,n);if(t)return t}throw new Error("No update method available")})(e,i,a).catch(()=>{}),p=c?c.node.attrs.layout:"default";Object(z.f)({showContextPanel:!1,element:d,showEditButton:l,updateExtension:u,layout:p})(t,r)}return!0},destroy:()=>{t.unsubscribe("extensionProvider",r)}}},key:H.a,props:{nodeViews:{extension:$(r,a,t,n),bodiedExtension:$(r,a,t,n),inlineExtension:$(r,a,t,n)},handleClickOn:Object(i.a)(["extension","bodiedExtension"],e=>!e.closest(".extension-content"),{useLongPressSelection:s})}})}},rq0r:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p}));var o=n("UdmJ"),r=n("m23B"),i=n("eGvA");const a=(e,t)=>{const{$from:n,$to:r}=t.selection,i=n.blockRange(r);if(!i)return!1;return!!Object(o.findWrapping)(i,e)},s=e=>"paragraph"===e.parent.type.name,c=e=>{const t=e.parent.type.name,n=e.node(-1);return"listItem"===t||"orderedList"===t||"bulletList"===t||n&&"listItem"===n.type.name},l=e=>{const{$from:t}=e.selection,{listItem:n,paragraph:o}=e.schema.nodes;return e.selection instanceof i.a?t.parent.type===n:Object(r.hasParentNodeOfType)(n)(e.selection)&&t.parent.type===o},d=e=>{const{$from:t}=e.selection,{bulletList:n,orderedList:o}=e.schema.nodes,r=e.doc.resolve(t.pos-1);let a=r?r.nodeBefore:null;return e.selection instanceof i.a&&(a=t.nodeBefore),!!a&&[n,o].indexOf(a.type)>-1},u=e=>{const{parent:t}=e.selection.$from,{listItem:n,paragraph:o}=e.schema.nodes;return e.selection instanceof i.a?t.type===n:t.type===o&&Object(r.hasParentNodeOfType)(n)(e.selection)},p=(e,t)=>{let n=t.depth;const{bulletList:o,orderedList:r,listItem:i}=e.nodes;for(let a=t.depth;a>0;a--){const e=t.node(a);if(e.type!==o&&e.type!==r||(n=a),e.type!==o&&e.type!==r&&e.type!==i)break}return n-1}},s1lm:function(e,t,n){"use strict";var o=n("1798"),r=[["text",n("Bpyo")],["newline",n("OOYR")],["escape",n("XWar")],["backticks",n("Vtgc")],["strikethrough",n("/t9N").tokenize],["emphasis",n("pVcW").tokenize],["link",n("otMq")],["image",n("UKA5")],["autolink",n("mURL")],["html_inline",n("j4SW")],["entity",n("DIje")]],i=[["balance_pairs",n("I+gj")],["strikethrough",n("/t9N").postProcess],["emphasis",n("pVcW").postProcess],["text_collapse",n("mLjB")]];function a(){var e;for(this.ruler=new o,e=0;e<r.length;e++)this.ruler.push(r[e][0],r[e][1]);for(this.ruler2=new o,e=0;e<i.length;e++)this.ruler2.push(i[e][0],i[e][1])}a.prototype.skipToken=function(e){var t,n,o=e.pos,r=this.ruler.getRules(""),i=r.length,a=e.md.options.maxNesting,s=e.cache;if(void 0===s[o]){if(e.level<a)for(n=0;n<i&&(e.level++,t=r[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,s[o]=e.pos}else e.pos=s[o]},a.prototype.tokenize=function(e){for(var t,n,o=this.ruler.getRules(""),r=o.length,i=e.posMax,a=e.md.options.maxNesting;e.pos<i;){if(e.level<a)for(n=0;n<r&&!(t=o[n](e,!1));n++);if(t){if(e.pos>=i)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},a.prototype.parse=function(e,t,n,o){var r,i,a,s=new this.State(e,t,n,o);for(this.tokenize(s),a=(i=this.ruler2.getRules("")).length,r=0;r<a;r++)i[r](s)},a.prototype.State=n("zwr4"),e.exports=a},s2dH:function(e,t,n){"use strict";function o(e){return{x:e.clientX,y:e.clientY}}function r(e,t){return!e||e.x!==t.x||e.y!==t.y}function i(e){return!(0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},saIY:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o={BREAKOUT_MARK:"fabric-editor-breakout-mark",BREAKOUT_MARK_DOM:"fabric-editor-breakout-mark-dom"}},ssre:function(e,t,n){"use strict";var o=n("36MB"),r=n("OqJb").HTML_OPEN_CLOSE_TAG_RE,i=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+o.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(r.source+"\\s*$"),/^$/,!1]];e.exports=function(e,t,n,o){var r,a,s,c,l=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(l))return!1;for(c=e.src.slice(l,d),r=0;r<i.length&&!i[r][0].test(c);r++);if(r===i.length)return!1;if(o)return i[r][2];if(a=t+1,!i[r][1].test(c))for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(l=e.bMarks[a]+e.tShift[a],d=e.eMarks[a],c=e.src.slice(l,d),i[r][1].test(c)){0!==c.length&&a++;break}return e.line=a,(s=e.push("html_block","",0)).map=[t,a],s.content=e.getLines(t,a,e.blkIndent,!0),!0}},stHy:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=e=>Object.assign(Object.create(e),e).setTime(Date.now())},"t+9L":function(e,t,n){"use strict";var o=n("5z8k");function r(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}r.prototype.Token=o,e.exports=r},tAd3:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h}));var o=n("yD9K"),r=n("lb6e"),i=n("bwR+"),a=n("czJC"),s=n("ERkP"),c=n.n(s),l=n("MWcs"),d=n("PZ9j"),u=n("L2cJ");const p=125,h=156;class f extends s.Component{constructor(e){super(e),this.state={},this.setViewMediaClientConfig=async()=>{const e=await this.props.mediaProvider;if(e){const t=e.viewMediaClientConfig;this.setState({viewMediaClientConfig:t})}},this.selectMediaSingleFromCard=({event:e})=>{this.selectMediaSingle(e)},this.selectMediaSingle=e=>{e.stopPropagation();const t=this.props.getPos(),{state:n}=this.props.view;if(e.shiftKey){if(n.selection instanceof a.a)return;Object(l.g)(this.props.view,n.selection.from<t?n.selection.from:t-1,n.selection.to>t?n.selection.to:t+2)}else Object(l.f)(this.props.view,t-1)},this.handleNewNode=e=>{const{node:t}=e;this.mediaPluginState.handleMediaNodeMount(t,()=>this.props.getPos())};const{view:t}=this.props;this.mediaPluginState=d.a.getState(t.state)}shouldComponentUpdate(e,t){const n=!this.state.viewMediaClientConfig&&t.viewMediaClientConfig;return!(this.props.selected===e.selected&&this.props.uploadComplete===e.uploadComplete&&this.props.node.attrs.id===e.node.attrs.id&&this.props.node.attrs.collection===e.node.attrs.collection&&this.props.maxDimensions.height===e.maxDimensions.height&&this.props.maxDimensions.width===e.maxDimensions.width&&this.props.contextIdentifierProvider===e.contextIdentifierProvider&&this.props.isLoading===e.isLoading&&this.props.mediaProvider===e.mediaProvider&&!n)}async componentDidMount(){this.handleNewNode(this.props);const{contextIdentifierProvider:e}=this.props;this.setState({contextIdentifierProvider:await e}),await this.setViewMediaClientConfig()}componentWillUnmount(){const{node:e}=this.props;this.mediaPluginState.handleMediaNodeUnmount(e)}componentDidUpdate(e){e.node.attrs.id!==this.props.node.attrs.id&&(this.mediaPluginState.handleMediaNodeUnmount(e.node),this.handleNewNode(this.props)),this.mediaPluginState.updateElement(),this.setViewMediaClientConfig()}render(){const{node:e,selected:t,uploadComplete:n,originalDimensions:o,isLoading:a,maxDimensions:s,mediaOptions:l}=this.props,{viewMediaClientConfig:d,contextIdentifierProvider:p}=this.state,{id:h,type:f,collection:m,url:b,alt:g}=e.attrs;if(a||"external"!==f&&(!d||"boolean"==typeof n&&!n))return c.a.createElement(u.b,{dimensions:o},c.a.createElement(r.a,null));const v=p&&p.objectId,y="external"===f?{dataURI:b,name:b,mediaItemType:"external-image"}:{id:h,mediaItemType:"file",collectionName:m},O=d||{authProvider:()=>({})};return c.a.createElement(u.b,{dimensions:o,onContextMenu:this.selectMediaSingle},c.a.createElement(i.a,{mediaClientConfig:O,resizeMode:"stretchy-fit",dimensions:s,originalDimensions:o,identifier:y,selectable:!0,selected:t,disableOverlay:!0,onClick:this.selectMediaSingleFromCard,useInlinePlayer:l&&l.allowLazyLoading,isLazy:l&&l.allowLazyLoading,featureFlags:l&&l.featureFlags,contextId:v,alt:g}))}}t.c=Object(o.a)(f)},tAeE:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return p}));var o=n("Czhu");function r(e){return e===document.body}function i(e){return e&&3===e.nodeType}function a(e,t,n,o,a){if(a&&o)return o;if(!n)return"bottom";i(e)&&(e=e.parentElement);const s=t.getBoundingClientRect(),{height:c}=s,l=r(t)?0:s.top,{top:d,height:u}=e.getBoundingClientRect(),p=d-(l-t.scrollTop),h=l+c-(d+u);return h>=n||h>=p?"bottom":"top"}function s(e,t,n,o,r){if(r&&o)return o;if(!n)return o||"left";i(e)&&(e=e.parentElement);const{left:a,width:s}=e.getBoundingClientRect(),{left:c,width:l}=t.getBoundingClientRect(),d=a-c+s,u=c+l-a;return o&&d>n&&u>n?o:u>=n||u>=d&&!o?"left":"right"}function c(e,t,n,o,r,i,c){return[a(e,t,o,i,c),s(e,t,n,r,c)]}const l=(e,t,n)=>(n<e+t&&(e=n-t-1),Math.max(1,e));function d({placement:e,target:t,popup:n,offset:a,stick:s,allowOutOfBounds:c=!1,rect:d}){let u={};if(!t||!n||!n.offsetParent)return u;i(t)&&(t=t.parentElement);const h=n.offsetParent,f=h.style;let m=0;f&&f.borderBottomWidth&&(m=parseInt(f.borderBottomWidth,10));const[b,g]=e,{top:v,left:y,right:O,height:E}=d||h.getBoundingClientRect(),{top:w,left:C,right:T,height:S,width:k}=t.getBoundingClientRect(),x=r(h),A=(({placement:e,targetTop:t,targetHeight:n,isPopupParentBody:o,popupOffsetParentHeight:r,popupOffsetParentTop:i,popupOffsetParentScrollTop:a,borderBottomWidth:s,offset:c})=>{const l={};if("top"===e)l.bottom=Math.ceil(r-(t-i)-(o?0:a)-s+c[1]);else if("start"===e)l.top=Math.ceil(t-i-c[1]+(o?0:a));else{let e=Math.ceil(t-i+n+(o?0:a)-s+c[1]);l.top=e}return l})({placement:b,targetTop:w,isPopupParentBody:x,popupOffsetParentHeight:E,popupOffsetParentTop:v,popupOffsetParentScrollTop:h.scrollTop||0,targetHeight:S,borderBottomWidth:m,offset:a});u=Object(o.a)(Object(o.a)({},u),A),"top"!==b&&"start"!==b||!s||(u=(({target:e,targetTop:t,targetHeight:n,popupOffsetParentHeight:r,popupOffsetParent:i,offset:a,position:s,placement:c})=>{const l=p(e),d=Object(o.a)({},s);if(l){const{top:e}=l.getBoundingClientRect(),o=t-e,s=l.scrollTop;if(o<0){const l=t+(s-e)+n+a[1]<s;"top"===c&&(d.bottom=l?r-(o+i.scrollTop+n):o+(d.bottom||0)),"start"===c&&(d.top=l?o+i.scrollTop+n:Math.abs(o)+(d.top||0)+a[1])}}return d})({target:t,targetTop:w,targetHeight:S,popupOffsetParentHeight:E,popupOffsetParent:h,popup:n,offset:a,position:u,placement:b})),"top"!==b&&"start"!==b&&s&&(u=(({target:e,targetTop:t,targetHeight:n,popup:r,offset:i,position:a})=>{const s=p(e),c=Object(o.a)({},a);if(s){let e=t-s.getBoundingClientRect().top,o=n+e;if(s.clientHeight-o<=r.clientHeight+2*i[1]&&e<s.clientHeight){const e=o-s.clientHeight+2*i[1];let t=c.top||0;t-=e+r.clientHeight,c.top=t}}return c})({target:t,targetTop:w,targetHeight:S,popup:n,offset:a,position:u}));const j=(({placement:e,targetLeft:t,targetRight:n,targetWidth:o,isPopupParentBody:r,popupOffsetParentLeft:i,popupOffsetParentRight:a,popupOffsetParentScrollLeft:s,popupOffsetParentClientWidth:c,popupClientWidth:d,offset:u,allowOutOfBounds:p=!1})=>{const h={};if("left"===e)h.left=Math.ceil(t-i+(r?0:s)+u[0]);else if("center"===e)h.left=Math.ceil(t-i+(r?0:s)+u[0]+o/2-d/2);else if("end"===e){const e=Math.ceil(n-i+(r?0:s)+u[0]);h.left=e}else h.right=Math.ceil(a-n-(r?0:s)+u[0]);return p||(void 0!==h.left&&(h.left=l(h.left,d,c)),void 0!==h.right&&(h.right=l(h.right,d,c))),h})({placement:g,targetLeft:C,targetRight:T,targetWidth:k,isPopupParentBody:x,popupOffsetParentLeft:y,popupOffsetParentRight:O,popupOffsetParentScrollLeft:h.scrollLeft||0,popupOffsetParentClientWidth:n.offsetParent.clientWidth,popupClientWidth:n.clientWidth||0,offset:a,allowOutOfBounds:c});return u=Object(o.a)(Object(o.a)({},u),j),u}function u(e){return!(!e||!e.offsetParent)}function p(e){let t=e;if(!t)return!1;for(;t=t.parentElement;){const e=window.getComputedStyle(t);if("scroll"===e.overflow||"scroll"===e.overflowX||"scroll"===e.overflowY||t.classList.contains("fabric-editor-popup-scroll-parent"))return t}return!1}},tV3p:function(e,t,n){"use strict";var o=n("Czhu"),r=n("ehfC"),i=n("9dFV"),a=n("m23B"),s=n("JzyM"),c=n("UdmJ");var l=n("o5vo"),d=n("+Mvc"),u=n("AY2A");const p=(e,t)=>{const n=e.steps.find(e=>e instanceof u.a);return n&&t&&t.pos===n.pos?n.next:void 0},h=(e,t)=>{if(!e.getMeta(d.a))return t},f=({tr:e,table:t})=>n=>{if(!(t&&t.node))return Object(o.a)(Object(o.a)({},n),{},{targetCellPosition:void 0});const{tableCell:r,tableHeader:i}=e.doc.type.schema.nodes,s=Object(a.findParentNodeOfType)([r,i])(e.selection),c=s?s.pos:void 0;return n.targetCellPosition===c?n:Object(o.a)(Object(o.a)({},n),{},{targetCellPosition:c})},m=({tr:e,table:t})=>n=>{const r=t&&t.node;return!r||(e=>{const[t]=e.steps;if(!(t&&t instanceof c.ReplaceStep))return!1;const{slice:{content:n},from:o,to:r}=t,i=n.firstChild;return o===r&&1===n.childCount&&!!i&&!!i.text&&1===i.text.length})(e)?n:Object(o.a)(Object(o.a)(Object(o.a)({},n),l.a),{},{tableNode:r,ordering:p(e,t),resizeHandleColumnIndex:h(e,n.resizeHandleColumnIndex)})},b=(e,t)=>{return(n=[f,m],e=>t=>e.table?n.reduce((t,n)=>n(e)(t),t):t.targetCellPosition?Object(o.a)(Object(o.a)({},t),{},{targetCellPosition:void 0}):t)({tr:e,table:Object(s.c)(e.selection)})(t);var n};n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return O}));const g=new r.PluginKey("tablePlugin"),{createPluginState:v,createCommand:y,getPluginState:O}=Object(i.a)(g,(e,t)=>{switch(t.type){case"TOGGLE_HEADER_COLUMN":return Object(o.a)(Object(o.a)({},e),{},{isHeaderColumnEnabled:!e.isHeaderColumnEnabled});case"TOGGLE_HEADER_ROW":return Object(o.a)(Object(o.a)({},e),{},{isHeaderRowEnabled:!e.isHeaderRowEnabled});case"CLEAR_HOVER_SELECTION":return Object(o.a)(Object(o.a)(Object(o.a)({},e),t.data),l.a);case"SELECT_COLUMN":case"SET_TARGET_CELL_POSITION":return Object(o.a)(Object(o.a)(Object(o.a)({},e),t.data),{},{isContextualMenuOpen:!1});case"SET_TABLE_LAYOUT":return Object(o.a)(Object(o.a)({},e),t.data);case"TOGGLE_CONTEXTUAL_MENU":return Object(o.a)(Object(o.a)({},e),{},{isContextualMenuOpen:!e.isContextualMenuOpen});case"SHOW_INSERT_ROW_BUTTON":return t.data.insertRowButtonIndex===e.insertRowButtonIndex?e:Object(o.a)(Object(o.a)(Object(o.a)({},e),t.data),{},{insertColumnButtonIndex:void 0});case"SHOW_INSERT_COLUMN_BUTTON":return t.data.insertColumnButtonIndex===e.insertColumnButtonIndex?e:Object(o.a)(Object(o.a)(Object(o.a)({},e),t.data),{},{insertRowButtonIndex:void 0});case"HIDE_INSERT_COLUMN_OR_ROW_BUTTON":return void 0!==e.insertRowButtonIndex||void 0!==e.insertColumnButtonIndex?Object(o.a)(Object(o.a)({},e),{},{insertRowButtonIndex:void 0,insertColumnButtonIndex:void 0}):e;case"HIDE_RESIZE_HANDLE_LINE":return Object(o.a)(Object(o.a)(Object(o.a)({},e),t.data),{},{resizeHandleColumnIndex:void 0});case"ADD_RESIZE_HANDLE_DECORATIONS":case"SET_TABLE_REF":case"HOVER_ROWS":case"HOVER_COLUMNS":case"HOVER_TABLE":case"HOVER_CELLS":case"SHOW_RESIZE_HANDLE_LINE":case"SET_EDITOR_FOCUS":return Object(o.a)(Object(o.a)({},e),t.data);default:return e}},{mapping:(e,t)=>{if(e.docChanged){let n={};if(t.targetCellPosition){const{pos:o,deleted:r}=e.mapping.mapResult(t.targetCellPosition);n={targetCellPosition:r?void 0:o}}let r={};if(t.tablePos){const{pos:n,deleted:o}=e.mapping.mapResult(t.tablePos,-1);r={tablePos:o?void 0:n}}return Object(o.a)(Object(o.a)(Object(o.a)({},t),n),r)}return t},onDocChanged:b,onSelectionChanged:b})},tVIO:function(e,t,n){"use strict";var o=n("m23B"),r=n("czJC"),i=n("ehfC"),a=n("eGvA"),s=n("Czhu"),c=n("UdmJ"),l=n("I9T1");var d;!function(e){e.UNDID="undid",e.REDID="redid"}(d||(d={}));class u extends c.Step{constructor(e,t,n=[],o){super(),this.analyticsEvents=[],this.actionsToIgnore=[],this.handleAnalyticsEvent=e,this.analyticsEvents=t,this.actionsToIgnore=n,this.pos=o}invert(){const e=this.analyticsEvents.filter(e=>-1===this.actionsToIgnore.indexOf(e.payload.action)).map(e=>{return(t=e).payload.action===d.UNDID||t.payload.action===d.REDID?(e=>Object(s.a)(Object(s.a)({},e),{},{payload:Object(s.a)(Object(s.a)({},e.payload),{},{action:e.payload.action===d.UNDID?d.REDID:d.UNDID})}))(e):function(e){return Object(s.a)(Object(s.a)({},e),{},{payload:{action:d.UNDID,actionSubject:e.payload.actionSubject,actionSubjectId:e.payload.action,attributes:Object(s.a)(Object(s.a)({},e.payload.attributes),{},{actionSubjectId:e.payload.actionSubjectId}),eventType:"track"}})}(e);var t});return new u(this.handleAnalyticsEvent,e)}apply(e){for(const t of this.analyticsEvents)this.handleAnalyticsEvent(t.payload,t.channel);return c.StepResult.ok(e)}map(e){let t=this.pos;return"number"==typeof t&&(t=e.map(t)),new u(this.handleAnalyticsEvent,this.analyticsEvents,this.actionsToIgnore,t)}getMap(){return"number"==typeof this.pos?new c.StepMap([this.pos,0,0]):new c.StepMap([])}merge(e){if(e instanceof u){const t=e.analyticsEvents;return new u(this.handleAnalyticsEvent,[...t,...this.analyticsEvents])}return null}toJSON(){return{stepType:"atlaskit-analytics"}}static fromJSON(){return new c.ReplaceStep(0,0,l.Slice.empty)}}c.Step.jsonID("atlaskit-analytics",u);var p,h,f=n("yKQC"),m=n("4FMG");!function(e){e.CURSOR="cursor",e.RANGED="ranged",e.GAP_CURSOR="gapCursor",e.NODE="node",e.CELL="cell"}(p||(p={})),function(e){e.START="start",e.MIDDLE="middle",e.END="end",e.LEFT="left",e.RIGHT="right"}(h||(h={}));var b=n("XC2T"),g=n("EruW");function v(e,t){if(!t.attributes)return t;const{type:n,position:s}=function(e){const{selection:t}=e;let n,o;if(t instanceof a.a)n=p.GAP_CURSOR,o=t.side===a.c.LEFT?h.LEFT:h.RIGHT;else if(t instanceof r.a)n=p.CELL;else if(t instanceof i.NodeSelection)n=p.NODE;else if(t.from!==t.to)n=p.RANGED;else{n=p.CURSOR;const{from:e,$from:r}=t;o=e===r.start()?h.START:e===r.end()?h.END:h.MIDDLE}return{type:n,position:o}}(e);t.attributes.selectionType=n,s&&(t.attributes.selectionPosition=s);const c=function(e){const{selection:t}=e;if(t instanceof i.NodeSelection)return t.node.type.name;if(t instanceof r.a)return e.schema.nodes.table.name;const n=Object(o.findParentNode)(t=>t.type!==e.schema.nodes.paragraph)(e.selection);return n?n.node.type.name:e.doc.type.name}(e);return t.action===m.a.INSERTED&&t.actionSubject===m.b.DOCUMENT&&t.attributes?t.attributes.insertLocation=c:t.attributes.nodeLocation=c,t}n.d(t,"a",(function(){return O})),n.d(t,"d",(function(){return E})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return C}));const y=[m.a.INVOKED,m.a.OPENED];function O(e,t,n,o=f.b){const r=function(e){const t=b.a.getState(e);return t?t.createAnalyticsEvent:void 0}(e);if(n=v(e,n),r){const{storedMarks:e}=t;t.step(new u((e,t)=>{Object(g.a)(r)({payload:e,channel:t})},[{payload:n,channel:o}],y,t.selection.$from.pos)),e&&t.setStoredMarks(e)}return t}function E(e,t){return n=>(o,r,i)=>n(o,n=>{if(r)if(e instanceof Function){const i=e(o);i&&r(O(o,n,i,t))}else r(O(o,n,e,t))},i)}function w(e){return t=>{const n=t.handler;return t.handler=(t,o,r,i)=>{let a=n(t,o,r,i);if(a){a=O(t,a,e(t,o,r,i))}return a},t}}function C(e){return e.steps.filter(e=>e instanceof u).reduce((e,t)=>[...e,...t.analyticsEvents],[])}},twlq:function(e,t,n){"use strict";function o(e){return"full-page"===e||"full-width"===e}n.d(t,"a",(function(){return o}))},"u+Vw":function(e,t,n){"use strict";e.exports=function(e,t,n){var o,r,i;if(e.sCount[t]-e.blkIndent<4)return!1;for(r=o=t+1;o<n;)if(e.isEmpty(o))o++;else{if(!(e.sCount[o]-e.blkIndent>=4))break;r=++o}return e.line=r,(i=e.push("code_block","code",0)).content=e.getLines(t,r,4+e.blkIndent,!0),i.map=[t,e.line],!0}},u5kr:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o="history$"},ucQ5:function(e,t,n){"use strict";function o(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var r=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(s),l=["%","/","?",";","#"].concat(c),d=["/","?","#"],u=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h={javascript:!0,"javascript:":!0},f={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};o.prototype.parse=function(e,t){var n,o,i,s,c,m=e;if(m=m.trim(),!t&&1===e.split("#").length){var b=a.exec(m);if(b)return this.pathname=b[1],b[2]&&(this.search=b[2]),this}var g=r.exec(m);if(g&&(i=(g=g[0]).toLowerCase(),this.protocol=g,m=m.substr(g.length)),(t||g||m.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(c="//"===m.substr(0,2))||g&&h[g]||(m=m.substr(2),this.slashes=!0)),!h[g]&&(c||g&&!f[g])){var v,y,O=-1;for(n=0;n<d.length;n++)-1!==(s=m.indexOf(d[n]))&&(-1===O||s<O)&&(O=s);for(-1!==(y=-1===O?m.lastIndexOf("@"):m.lastIndexOf("@",O))&&(v=m.slice(0,y),m=m.slice(y+1),this.auth=v),O=-1,n=0;n<l.length;n++)-1!==(s=m.indexOf(l[n]))&&(-1===O||s<O)&&(O=s);-1===O&&(O=m.length),":"===m[O-1]&&O--;var E=m.slice(0,O);m=m.slice(O),this.parseHost(E),this.hostname=this.hostname||"";var w="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!w){var C=this.hostname.split(/\./);for(n=0,o=C.length;n<o;n++){var T=C[n];if(T&&!T.match(u)){for(var S="",k=0,x=T.length;k<x;k++)T.charCodeAt(k)>127?S+="x":S+=T[k];if(!S.match(u)){var A=C.slice(0,n),j=C.slice(n+1),I=T.match(p);I&&(A.push(I[1]),j.unshift(I[2])),j.length&&(m=j.join(".")+m),this.hostname=A.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var M=m.indexOf("#");-1!==M&&(this.hash=m.substr(M),m=m.slice(0,M));var N=m.indexOf("?");return-1!==N&&(this.search=m.substr(N),m=m.slice(0,N)),m&&(this.pathname=m),f[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this},o.prototype.parseHost=function(e){var t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},e.exports=function(e,t){if(e&&e instanceof o)return e;var n=new o;return n.parse(e,t),n}},uo6K:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("S6ul"),a=n("pZXv"),s=n("WuRq");class c extends o.PureComponent{constructor(e){super(e),this.handleRef=e=>{this.setState({target:e||void 0})},this.updatePopupPlacement=e=>{this.setState({popupPlacement:e})},this.state={popupPlacement:["bottom","left"]}}renderDropdown(){const{target:e,popupPlacement:t}=this.state,{children:n,mountTo:o,boundariesElement:s,scrollableElement:c,onOpenChange:l,fitHeight:d,fitWidth:u,zIndex:p}=this.props;return r.a.createElement(a.a,{target:e,mountTo:o,boundariesElement:s,scrollableElement:c,onPlacementChanged:this.updatePopupPlacement,fitHeight:d,fitWidth:u,zIndex:p},r.a.createElement("div",{style:{height:0,minWidth:u||0}},r.a.createElement(i.a,{disabled:!0,isOpen:!0,onOpenChange:l,appearance:"tall",position:t.join(" "),shouldFlip:!1,shouldFitContainer:!0},n)))}render(){const{trigger:e,isOpen:t}=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:this.handleRef},e),t?this.renderDropdown():null)}}const l=Object(s.a)(c);t.a=l},vtBm:function(e,t,n){"use strict";var o=n("T1Ll"),r=n("WQPC"),i=n("mVB+"),a=n("Nc4I"),s=n("IYLv"),c=n("s1lm"),l=n("mpTe"),d=n("BmNk"),u=n("q3/s"),p={default:n("20jC"),zero:n("45E7"),commonmark:n("atAw")},h=/^(vbscript|javascript|file|data):/,f=/^data:image\/(gif|png|jpeg|webp);/;function m(e){var t=e.trim().toLowerCase();return!h.test(t)||!!f.test(t)}var b=["http:","https:","mailto:"];function g(e){var t=d.parse(e,!0);if(t.hostname&&(!t.protocol||b.indexOf(t.protocol)>=0))try{t.hostname=u.toASCII(t.hostname)}catch(n){}return d.encode(d.format(t))}function v(e){var t=d.parse(e,!0);if(t.hostname&&(!t.protocol||b.indexOf(t.protocol)>=0))try{t.hostname=u.toUnicode(t.hostname)}catch(n){}return d.decode(d.format(t))}function y(e,t){if(!(this instanceof y))return new y(e,t);t||o.isString(e)||(t=e||{},e="default"),this.inline=new c,this.block=new s,this.core=new a,this.renderer=new i,this.linkify=new l,this.validateLink=m,this.normalizeLink=g,this.normalizeLinkText=v,this.utils=o,this.helpers=o.assign({},r),this.options={},this.configure(e),t&&this.set(t)}y.prototype.set=function(e){return o.assign(this.options,e),this},y.prototype.configure=function(e){var t,n=this;if(o.isString(e)&&!(e=p[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach((function(t){e.components[t].rules&&n[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&n[t].ruler2.enableOnly(e.components[t].rules2)})),this},y.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.enable(e,!0))}),this),n=n.concat(this.inline.ruler2.enable(e,!0));var o=e.filter((function(e){return n.indexOf(e)<0}));if(o.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+o);return this},y.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.disable(e,!0))}),this),n=n.concat(this.inline.ruler2.disable(e,!0));var o=e.filter((function(e){return n.indexOf(e)<0}));if(o.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+o);return this},y.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},y.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},y.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},y.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},y.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},e.exports=y},vtGW:function(e,t,n){"use strict";e.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}},vu0X:function(e,t,n){"use strict";t.Any=n("7EA0"),t.Cc=n("RYQf"),t.Cf=n("bUrk"),t.P=n("gtbP"),t.Z=n("Ckiu")},wMQd:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"h",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"k",(function(){return g})),n.d(t,"o",(function(){return y})),n.d(t,"q",(function(){return O})),n.d(t,"p",(function(){return E})),n.d(t,"r",(function(){return C})),n.d(t,"t",(function(){return T})),n.d(t,"s",(function(){return S})),n.d(t,"v",(function(){return k})),n.d(t,"u",(function(){return x})),n.d(t,"d",(function(){return A})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return I})),n.d(t,"n",(function(){return M})),n.d(t,"m",(function(){return N})),n.d(t,"l",(function(){return R}));var o=n("Czhu"),r=n("Cmaw"),i=n("hc3R");const a=Object(r.a)("fabric-elements"),s=(e,t,n,r,a={})=>({eventType:e,action:t,actionSubject:n,actionSubjectId:r,attributes:Object(o.a)({packageName:i.a,packageVersion:i.b},a)}),c=e=>s("operational","succeeded","recordEmojiSelection",void 0,{source:e}),l=e=>s("operational","failed","recordEmojiSelection",void 0,{source:e}),d=(e,t={},n)=>s("ui",e,"emojiPicker",n,t),u=()=>d("opened"),p=e=>d("closed",e),h=[{id:"-1f3fb",skinToneModifier:"light"},{id:"-1f3fc",skinToneModifier:"mediumLight"},{id:"-1f3fd",skinToneModifier:"medium"},{id:"-1f3fe",skinToneModifier:"mediumDark"},{id:"-1f3ff",skinToneModifier:"dark"}],f=e=>{if(!e)return{};for(const{id:t,skinToneModifier:n}of h)if(-1!==e.indexOf(t))return{skinToneModifier:n,baseEmojiId:e.replace(t,"")};return{}},m=e=>d("clicked",Object(o.a)(Object(o.a)({},f(e.emojiId)),e),"emoji"),b=e=>d("clicked",e,"category"),g=e=>d("searched",e,"query"),v=(e,t={})=>s("ui",e,"emojiSkintoneSelector",void 0,t),y=e=>v("clicked",e),O=e=>v("opened",e),E=()=>v("cancelled"),w=(e,t,n)=>s("ui",e,"emojiUploader",t,n),C=()=>w("clicked","addButton"),T=e=>w("clicked","confirmButton",e),S=()=>w("clicked","cancelButton"),k=e=>s("operational","finished","emojiUploader",void 0,e),x=e=>s("operational","failed","emojiUploader",void 0,e),A=e=>s("ui","clicked","emojiPicker","deleteEmojiTrigger",e),j=e=>s("ui","clicked","emojiPicker","deleteEmojiConfirm",e),I=e=>s("ui","clicked","emojiPicker","deleteEmojiCancel",e),M=()=>s("ui","clicked","emojiUploader","selectFile"),N=e=>()=>{e&&e.createAnalyticsEvent&&Object(r.a)("editor")(c("typeahead"))(e.createAnalyticsEvent)},R=e=>t=>(e&&e.createAnalyticsEvent&&Object(r.a)("editor")(l("typeahead"))(e.createAnalyticsEvent),Promise.reject(t))},wN5q:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("IUoJ");function r(e){if(!e)return 1;const t=o.a.getState(e);return t&&t.participants?t.participants.size():1}},wuk1:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return f}));var o,r=n("ERkP"),i=n.n(r),a=n("7nmT"),s=n("aWzz"),c=n.n(s),l=n("OMM/"),d=n("Cdbx"),u=n("4FMG");class p extends d.a{constructor(e,t){super(),this.portals=new Map,this.setContext=e=>{this.context=e},this.onAnalyticsEvent=e,this.useAnalyticsContext=t}render(e,t,n=!1){this.portals.set(t,{children:e,hasReactContext:n});const o=this.useAnalyticsContext?i.a.createElement(b,null,e()):e();Object(a.unstable_renderSubtreeIntoContainer)(this.context,o,t)}forceUpdate(){this.portals.forEach((e,t)=>{if(!e.hasReactContext&&!this.useAnalyticsContext)return;const n=this.useAnalyticsContext?i.a.createElement(b,null,e.children()):e.children();Object(a.unstable_renderSubtreeIntoContainer)(this.context,n,t)})}remove(e){this.portals.delete(e);try{Object(a.unmountComponentAtNode)(e)}catch(t){this.onAnalyticsEvent&&this.onAnalyticsEvent({payload:{action:u.a.FAILED_TO_UNMOUNT,actionSubject:u.b.EDITOR,actionSubjectId:u.c.REACT_NODE_VIEW,attributes:{error:t,domNodes:{container:e?e.className:void 0,child:e.firstElementChild?e.firstElementChild.className:void 0}},eventType:u.d.OPERATIONAL}})}}}class h extends i.a.Component{constructor(e){super(e),this.portalProviderAPI=new p(e.onAnalyticsEvent,e.useAnalyticsContext)}render(){return this.props.render(this.portalProviderAPI)}componentDidUpdate(){this.portalProviderAPI.forceUpdate()}}h.displayName="PortalProvider";class f extends i.a.Component{constructor(e){super(e),this.handleUpdate=e=>this.setState({portals:e}),e.portalProviderAPI.setContext(this),e.portalProviderAPI.on("update",this.handleUpdate),this.state={portals:new Map}}render(){const{portals:e}=this.state;return i.a.createElement(i.a.Fragment,null,Array.from(e.entries()).map(([e,t])=>Object(a.createPortal)(t,e)))}}const m={getAtlaskitAnalyticsContext(){},getAtlaskitAnalyticsEventHandlers(){}},b=((o=class extends i.a.Component{render(){const{value:e}=this.context.contextAdapter.analytics||{value:m};return i.a.createElement(l.a.Provider,{value:e},this.props.children)}}).contextTypes={contextAdapter:c.a.object},o)},x9dh:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return b}));var o=n("ehfC"),r=n("m23B"),i=n("gyAA"),a=n("fYIR"),s=n("eGvA"),c=n("hYG7"),l=n("mMrh"),d=n("mQXi"),u=n("EYzQ");const p={[a.a.LEFT]:-1,[a.a.RIGHT]:1,[a.a.UP]:-1,[a.a.DOWN]:1,[a.a.BACKWARD]:-1,[a.a.FORWARD]:1};const h=(e,t)=>(n,u,h)=>{const{doc:f,schema:m,selection:b,tr:g}=n;let v=Object(a.b)(e)?b.$from:b.$to,y=b.empty;if(b instanceof o.TextSelection){if(!t||!t(e.toString()))return!1;if(e===a.a.UP&&!Object(d.b)(n)&&Object(c.e)(f,m,v,-1)||e===a.a.DOWN&&(Object(d.d)(n)||Object(c.e)(f,m,v,1)))return!1;v=f.resolve(Object(a.b)(e)?v.before():v.after()),y=!1}if(b instanceof o.NodeSelection){if(b.node.isInline)return!1;if(e===a.a.UP||e===a.a.DOWN)return!1}if(!function(e,t){const{doc:n,schema:r,selection:i}=t;let s=Object(a.b)(e)?i.$from:i.$to;if(i instanceof o.TextSelection){if(e===a.a.UP&&!Object(d.b)(t)||e===a.a.DOWN&&!Object(d.d)(t)){if(Object(c.b)(n,s,r,p[e]))return!1}if(e===a.a.LEFT||e===a.a.RIGHT){const t=Object(c.b)(n,s,r,p[e]),{mediaSingle:o}=r.nodes;if(t&&t.type===o&&("wrap-right"===t.attrs.layout||"wrap-left"===t.attrs.layout))return!1}}if(i instanceof o.NodeSelection&&(e===a.a.LEFT||e===a.a.RIGHT)){const e=n.nodeAt(i.$from.pos),{mediaSingle:t}=r.nodes;if(e&&e.type===t&&("wrap-right"===e.attrs.layout||"wrap-left"===e.attrs.layout))return!1}return!0}(e,n))return!1;if(b instanceof s.a&&Object(l.a)(Object(a.b)(e)?v.nodeBefore:v.nodeAfter)&&(Object(a.b)(e)&&b.side===s.c.LEFT||Object(a.c)(e)&&b.side===s.c.RIGHT))return u&&u(g.setSelection(new s.a(v,b.side===s.c.RIGHT?s.c.LEFT:s.c.RIGHT)).scrollIntoView()),!0;if(h){const e=h.domAtPos.bind(h),t=Object(r.findDomRefAtPos)(v.pos,e);if(t&&t.textContent===i.a)return!1}const O=s.a.findFrom(v,Object(a.b)(e)?-1:1,y);return!!O&&(Object(l.a)(Object(a.c)(e)?O.$from.nodeBefore:O.$from.nodeAfter)?(u&&u(g.setSelection(O).scrollIntoView()),!0):(u&&u(g.setSelection(new s.a(O.$from,Object(a.c)(e)?s.c.LEFT:s.c.RIGHT)).scrollIntoView()),!0))},f=e=>(t,n)=>{if(t.selection instanceof s.a){const{$from:i,$anchor:c}=t.selection;let{tr:l}=t;if(Object(a.b)(e)){if("left"===t.selection.side)return l.setSelection(new s.a(c,s.c.RIGHT)),n&&n(l),!0;l=Object(r.removeNodeBefore)(t.tr)}else i.nodeAfter&&(l=l.delete(i.pos,i.pos+i.nodeAfter.nodeSize));return n&&n(l.setSelection(o.Selection.near(l.doc.resolve(l.mapping.map(t.selection.$from.pos)))).scrollIntoView()),!0}return!1},m=(e,t=s.c.LEFT)=>(n,o)=>{if(e>n.doc.content.size)return!1;const r=n.doc.resolve(e);return!!s.a.valid(r)&&(o&&o(n.tr.setSelection(new s.a(r,t))),!0)},b=(e,t,n,r)=>(i,a)=>{if(!u.c.get(i))return!1;const c=((e,t,n,o)=>{const r=t.getBoundingClientRect();if(e.clientY<r.top)return{position:0,side:s.c.LEFT};if(r.left>0){const t=n({left:r.left,top:e.clientY});if(t&&t.inside>-1){const n=o.doc.resolve(t.inside).before(1),i=e.clientX<r.left?s.c.LEFT:s.c.RIGHT;let a;if(i===s.c.LEFT)a=n;else{const e=o.doc.nodeAt(n);e&&(a=n+e.nodeSize)}return{position:a,side:i}}}return null})(e,t,n,i);if(!c)return!1;const d=void 0!==c.position?i.doc.resolve(c.position):null;if(null===d)return!1;if((c.side===s.c.LEFT?Object(l.a)(d.nodeAfter):Object(l.a)(d.nodeBefore))&&s.a.valid(d))return i.selection instanceof s.a&&a&&a(i.tr.setSelection(o.Selection.near(d))),a&&a(i.tr.setSelection(new s.a(d,c.side))),!0;if(!1===r){const e=o.Selection.findFrom(d,c.side===s.c.LEFT?1:-1,!0);if(e)return a&&a(i.tr.setSelection(e)),!0}return!1}},xFa8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("3rZS");const r=e=>{const{textColor:t}=e.schema.marks;if(t){const{empty:n,ranges:r,$cursor:i}=e.selection;return!((!n||i)&&!1!==Object(o.a)(e.doc,r,t))||!!Object(o.b)(t,e.storedMarks||i&&i.marks())}return!0}},xGpb:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var o=n("ERkP"),r=n.n(o),i=n("nB/6"),a=n.n(i),s=n("X3tg"),c=n("1TJf"),l=n("+kAP"),d=n("DM95"),u=n("qPpp"),p=n("4FMG");const h=(e,t)=>t.length?Math.min(Math.max(e,t[0]),t[t.length-1]):e;class f extends r.a.Component{constructor(){super(...arguments),this.resizable=r.a.createRef(),this.state={isResizing:!1},this.handleResizeStart=e=>{const{handleResizeStart:t,highlights:n,displayGrid:o,layout:r,width:i,snapPoints:a}=this.props;if(e.preventDefault(),t&&!t(e))return!1;this.setState({isResizing:!0},()=>{const e=n(i,a);o(e.length>0,Object(c.c)(r),e)})},this.handleResize=(e,t,n,o)=>{const{highlights:r,calcNewSize:i,scaleFactor:a,snapPoints:s,displayGrid:l,layout:d,updateSize:u}=this.props,p=this.resizable.current,{isResizing:f}=this.state;if(!p||!p.state.original||!f)return;const m=h(p.state.original.width+o.width*(a||1),s),b=i(m,!1);b.layout!==d&&u(b.width,b.layout);const g=r(m,s);l(g.length>0,Object(c.c)(b.layout),g),p.updateSize({width:m,height:"auto"}),p.setState({isResizing:!0})},this.handleResizeStop=(e,t,n,o)=>{const{highlights:r,calcNewSize:i,snapPoints:a,displayGrid:s,layout:d,updateSize:u,dispatchAnalyticsEvent:f,nodeType:m}=this.props,b=this.resizable.current,{isResizing:g}=this.state;if(!b||!b.state.original||!g)return;const v=h(b.state.original.width+o.width,a),y=i(Object(l.c)(v,a),!0),O=r(v,a);f&&f(((e,t,n)=>{const o="embed"===e?p.b.EMBEDS:p.b.MEDIA_SINGLE;return{action:p.a.EDITED,actionSubject:o,actionSubjectId:p.c.RESIZED,attributes:{size:t,layout:n},eventType:p.d.UI}})(m,y.width,y.layout)),s(O.length>0,Object(c.c)(y.layout),O),this.setState({isResizing:!1},()=>{u(y.width,y.layout),s(!1,Object(c.c)(d))})}}render(){const e={},t={},{innerPadding:n=0,width:o,pctWidth:i,selected:c,layout:p,enable:h,children:f}=this.props,{isResizing:m}=this.state;l.a.forEach(o=>{t[o]="richMedia-resize-handle-"+o,e[o]={width:"24px",[o]:-13-n+"px",zIndex:u.Z}});const b=a()(d.b,"image-"+p,this.props.className,{"is-resizing":m,"not-resized":!i,"richMedia-selected":c,"rich-media-wrapped":"wrap-left"===p||"wrap-right"===p});return r.a.createElement(s.Resizable,{ref:this.resizable,size:{width:o-n,height:"auto"},className:b,handleClasses:t,handleStyles:e,enable:h,onResize:this.handleResize,onResizeStop:this.handleResizeStop,onResizeStart:this.handleResizeStart},f)}}},xi0w:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("Czhu"),r=n("UdmJ"),i=n("I9T1");class a extends r.Step{constructor(e,t){super(),this.pos=e,this.attrs=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return r.StepResult.fail("No node at given position");const n=Object(o.a)(Object(o.a)({},t.attrs||{}),this.attrs||{});let a=t.type.create(n,i.Fragment.empty,t.marks),s=new i.Slice(i.Fragment.from(a),0,t.isLeaf?0:1);return r.StepResult.fromReplace(e,this.pos,this.pos+1,s)}invert(e){let t=e.nodeAt(this.pos);return new a(this.pos,t?t.attrs:{})}map(e){let t=e.mapResult(this.pos,1);return t.deleted?null:new a(t.pos,this.attrs)}toJSON(){return{stepType:"setAttrs",pos:this.pos,attrs:this.attrs}}static fromJSON(e,t){if("number"!=typeof t.pos||null!==t.attrs&&"object"!=typeof t.attrs)throw new RangeError("Invalid input for SetAttrsStep.fromJSON");return new a(t.pos,t.attrs)}}r.Step.jsonID("setAttrs",a)},xphB:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e[e.UPDATE_INLINE_COMMENT_STATE=0]="UPDATE_INLINE_COMMENT_STATE",e[e.SET_INLINE_COMMENT_DRAFT_STATE=1]="SET_INLINE_COMMENT_DRAFT_STATE",e[e.INLINE_COMMENT_UPDATE_MOUSE_STATE=2]="INLINE_COMMENT_UPDATE_MOUSE_STATE",e[e.INLINE_COMMENT_CLEAR_DIRTY_MARK=3]="INLINE_COMMENT_CLEAR_DIRTY_MARK",e[e.ADD_INLINE_COMMENT=4]="ADD_INLINE_COMMENT",e[e.INLINE_COMMENT_SET_VISIBLE=5]="INLINE_COMMENT_SET_VISIBLE",e[e.CLOSE_COMPONENT=6]="CLOSE_COMPONENT"}(o||(o={}))},xuWu:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var o=n("Czhu"),r=n("ERkP"),i=n.n(r),a=n("aWzz"),s=n.n(a),c=n("tdsH"),l=n("Cdbx"),d=n("4FMG"),u=n("yKQC"),p=n("XC2T"),h=n("wN5q");class f extends i.a.Component{constructor(e,t){super(e),this.listeners={},this.debounce=null,this.notAppliedState={},this.isSubscribed=!1,this.callsCount=0,this.state={},this.handlePluginStateChange=(e,t,n,o)=>r=>{(this.state[e]!==r||o)&&this.updateState({stateSubset:{[e]:r},pluginName:t,performanceOptions:n})},this.updateState=({stateSubset:e,pluginName:t,performanceOptions:n})=>{this.notAppliedState=Object(o.a)(Object(o.a)({},this.notAppliedState),e),this.debounce&&window.clearTimeout(this.debounce),this.debounce=window.setTimeout(()=>{const e=`${t}::WithPluginState`;n.trackingEnabled&&Object(c.b)(e),this.setState(this.notAppliedState,()=>{n.trackingEnabled&&Object(c.c)(e,e=>{if(++this.callsCount%n.samplingRate==0&&e>n.slowThreshold){const n=this.getEditorView();this.dispatchAnalyticsEvent({action:d.a.WITH_PLUGIN_STATE_CALLED,actionSubject:d.b.EDITOR,eventType:d.d.OPERATIONAL,attributes:{plugin:t,duration:e,participants:Object(h.a)(n&&n.state)}})}})}),this.debounce=null,this.notAppliedState={}},0)},this.dispatchAnalyticsEvent=e=>{const t=this.getEventDispatcher();if(t){Object(l.b)(t)(u.a,{payload:e})}},this.onContextUpdate=()=>{this.subscribe(this.props)},this.state=this.getPluginsStates(e.plugins,this.getEditorView(e,t))}getEditorView(e,t){const n=e||this.props,o=t||this.context;return n.editorView||o&&o.editorActions&&o.editorActions._privateGetEditorView()||o&&o.editorSharedConfig&&o.editorSharedConfig.editorView}getEventDispatcher(e){return(e||this.props).eventDispatcher||this.context&&this.context.editorActions&&this.context.editorActions._privateGetEventDispatcher()||this.context&&this.context.editorSharedConfig&&this.context.editorSharedConfig.eventDispatcher}getPluginsStates(e,t){return t&&e?Object.keys(e).reduce((n,o)=>{const r=e[o];return r?(n[o]=r.getState(t.state),n):n},{}):{}}subscribe(e){const t=e.plugins,n=this.getEventDispatcher(e),o=this.getEditorView(e);if(!n||!o||this.isSubscribed)return;const r=p.a.getState(o.state),i=r&&r.performanceTracking&&r.performanceTracking.uiTracking||{},a=!0===i.enabled,s=i.samplingRate||100,c=i.slowThreshold||4;this.isSubscribed=!0;const l=this.getPluginsStates(t,o);this.setState(l),Object.keys(t).forEach(e=>{const o=t[e];if(!o)return;const r=o.key,i=l[e],d=i&&i.subscribe,u=this.handlePluginStateChange(e,r,{samplingRate:s,slowThreshold:c,trackingEnabled:a},d);d?i.subscribe(u):n.on(o.key,u),this.listeners[o.key]={handler:u,pluginKey:o}})}unsubscribe(){const e=this.getEventDispatcher(),t=this.getEditorView();e&&t&&this.isSubscribed&&(Object.keys(this.listeners).forEach(n=>{const o=this.listeners[n].pluginKey.getState(t.state);o&&o.unsubscribe?o.unsubscribe(this.listeners[n].handler):e.off(n,this.listeners[n].handler)}),this.listeners=[])}subscribeToContextUpdates(e){e&&e.editorActions&&e.editorActions._privateSubscribe(this.onContextUpdate)}unsubscribeFromContextUpdates(e){e&&e.editorActions&&e.editorActions._privateUnsubscribe(this.onContextUpdate)}componentDidMount(){this.subscribe(this.props),this.subscribeToContextUpdates(this.context)}UNSAFE_componentWillReceiveProps(e){this.isSubscribed||this.subscribe(e)}componentWillUnmount(){this.debounce&&window.clearTimeout(this.debounce),this.unsubscribeFromContextUpdates(this.context),this.unsubscribe()}render(){const{render:e}=this.props;return e(this.state)}}f.displayName="WithPluginState",f.contextTypes={editorActions:s.a.object,editorSharedConfig:s.a.object}},xwvf:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var o=n("Czhu"),r=n("ehfC");const i=new r.PluginKey("widthPlugin");t.a=()=>({name:"width",pmPlugins:()=>[{name:"width",plugin:({dispatch:e})=>function(e){return new r.Plugin({key:i,state:{init:()=>({width:document.body.offsetWidth}),apply(t,n){const r=t.getMeta(i);if(!r)return n;const a=Object(o.a)(Object(o.a)({},n),r);return!a||n.width===a.width&&n.lineLength===a.lineLength?n:(e(i,a),a)}}})}(e)}],contentComponent({editorView:e,containerElement:t}){const n={lineLength:e.dom.clientWidth};t&&(n.width=t.offsetWidth);const o=e.state.tr.setMeta(i,n);return e.dispatch(o),null}})},y1Xn:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("L21V");const r=Object(o.f)({bold:{id:"fabric.editor.bold",defaultMessage:"Bold",description:"This refers to bold or strong formatting, indicates that its contents have strong importance, seriousness, or urgency."},italic:{id:"fabric.editor.italic",defaultMessage:"Italic",description:"This refers to italics or emphasized formatting."}})},y3ol:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e[e.XXL=6]="XXL",e[e.XL=5]="XL",e[e.L=4]="L",e[e.M=3]="M",e[e.S=2]="S",e[e.XXXS=1]="XXXS"}(o||(o={}))},yD9K:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("ERkP"),r=n.n(o);const i=e=>class extends o.Component{constructor(){super(...arguments),this.state={imageStatus:"loading"},this.onLoad=()=>{this.setState({imageStatus:"complete"});const{onExternalImageLoaded:e}=this.props;e&&this.img&&e({width:this.img.naturalWidth,height:this.img.naturalHeight})},this.onError=()=>{this.setState({imageStatus:"error"})}}componentDidMount(){this.fetchImage(this.props)}UNSAFE_componentWillReceiveProps(e){e.url!==this.props.url&&(this.setState({imageStatus:"loading"}),this.fetchImage(e))}componentWillUnmount(){this.img&&(this.img.removeEventListener("load",this.onLoad),this.img.removeEventListener("error",this.onError),this.img=null)}fetchImage({url:e}){e&&(this.img||(this.img=new Image,this.img.addEventListener("load",this.onLoad),this.img.addEventListener("error",this.onError)),this.img.src=e)}render(){const{imageStatus:t}=this.state;return r.a.createElement(e,Object.assign({},this.props,{imageStatus:t}))}}},yKQC:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var o=n("rClA");const r=n("pZ4U").e,i=o.a.editor},yguP:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=new(n("ehfC").PluginKey)("helpDialogPlugin")},z43y:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));class o{constructor(){this.handlerStorage=null}captureMessage(e,t){this.handlerStorage&&this.handlerStorage.captureMessage(e,t)}captureException(e,t){this.handlerStorage&&this.handlerStorage.captureException(e,t)}set handler(e){this.handlerStorage=e}}},zLY1:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"n",(function(){return s})),n.d(t,"m",(function(){return c})),n.d(t,"l",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"k",(function(){return u})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return b})),n.d(t,"b",(function(){return g}));var o=n("BMbf");const r=Object(o.h)(),i={small:40*r,medium:75*r,large:128*r},a={small:50*r,medium:i.medium,large:i.large},s=25*r+"px",c=6*r+"px",l="12px",d="54px",u="20px",p=r,h="#eeeeee",f="rgba(255, 255, 255, 0)",m=2,b=16,g=75},"zf6/":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("ehfC"),r=n("NlFJ"),i=n("IkHm");class a extends i.a{constructor(e,t,n,i,a,s,c,l=!1,d){super(e,t,n,i,a,s,c,l,d),this.isNodeInsideSelection=(e,t,n,o)=>(({pos:n,posEnd:o}=this.getPositionsWithDefault(n,o)),"number"==typeof n&&"number"==typeof o&&(e<=n&&t>=o)),this.isSelectionInsideNode=(e,t,n,o)=>(({pos:n,posEnd:o}=this.getPositionsWithDefault(n,o)),"number"==typeof n&&"number"==typeof o&&(n<e&&t<o)),this.isSelectedNode=e=>{if(e instanceof o.NodeSelection){const{selection:{from:t,to:n}}=this.view.state;return e.node===this.node||this.pos===t&&this.posEnd===n&&e.node.eq(this.node)}return!1},this.insideSelection=()=>{const{selection:{from:e,to:t}}=this.view.state;return this.isSelectedNode(this.view.state.selection)||this.isSelectionInsideNode(e,t)},this.onSelectionChange=()=>{this.update(this.node,[])},this.updatePos(),this.oldSelection=t.state.selection,this.selectionChangeState=r.b.getState(this.view.state),this.selectionChangeState.subscribe(this.onSelectionChange)}updatePos(){"boolean"!=typeof this.getPos&&(this.pos=this.getPos(),this.posEnd=this.pos+this.node.nodeSize)}getPositionsWithDefault(e,t){return{pos:"number"!=typeof e?this.pos:e,posEnd:"number"!=typeof t?this.posEnd:t}}viewShouldUpdate(e){const{state:{selection:t}}=this.view,n=this.oldSelection;this.oldSelection=t;const{pos:r,posEnd:i}=this;this.updatePos();const{from:a,to:s}=t,{from:c,to:l}=n;if(this.node.type.spec.selectable){const e=t instanceof o.NodeSelection&&t.from===this.pos,r=n instanceof o.NodeSelection&&n.from===this.pos;if(e&&!r||r&&!e)return!0}const d=this.isNodeInsideSelection(a,s)&&!this.isNodeInsideSelection(c,l),u=!this.isNodeInsideSelection(a,s)&&this.isNodeInsideSelection(c,l),p=this.isNodeInsideSelection(a,s,r,i)&&!this.isNodeInsideSelection(a,s);return!!(d||u||p)}destroy(){this.selectionChangeState.unsubscribe(this.onSelectionChange),super.destroy()}}},zitS:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("lbXe"),a=n("zJ/j"),s=n("WCbN"),c=n.n(s),l=n("a8dO"),d=n("+1K0"),u=n("pL3m"),p=n("UEfI"),h=n("KsTJ"),f=n("BMbf"),m=n("3IV/"),b=n("WEdt");const g=h.default.div`
  justify-content: flex-end;
  margin-top: -${.5*Object(f.h)()}px; /* Negative margin is used to middle align x button with title*/
  margin-right: ${.5*Object(f.h)()}px;
`,v=h.default.div`
  ${b.h400};
  margin-top: 0px;
`,y=h.default.div`
  margin-left: ${2*Object(f.h)()}px;
  margin-bottom: ${.5*Object(f.h)()}px;
`,O=h.default.div`
  display: flex;
  flex-direction: row;
  background-color: ${m.P50};
  overflow: hidden;
  line-height: 21px;
  padding-top: ${2*Object(f.h)()}px;
  padding-bottom: ${2*Object(f.h)()}px;
  padding-left: ${2*Object(f.h)()}px;
  padding-right: 0px;
  margin-top: -${.5*Object(f.h)()}px; /* Negative margin is used to fill the entire top of the mention dropdown with background colour of highlight*/
`,E=h.default.div`
  max-width: 290px;
  display: flex;
`,w=h.default.div``,C=h.default.div`
  opacity: 0.8;
`,T=h.default.div`
  margin-left: ${2*Object(f.h)()}px;
`;class S extends r.a.Component{constructor(e){super(e),this.onCreateTeamLinkClick=()=>{this.setState({isHighlightHidden:!0});const{onCreateTeamLinkClick:e}=this.props;d.a.registerCreateLinkClick(),e&&e()},this.preventClickOnCard=e=>{this.elCloseWrapper.current&&this.elCloseWrapper.current.contains(e.target)&&this.onCloseClick();this.elCreateTeamWrapper.current&&this.elCreateTeamWrapper.current.contains(e.target)&&this.onCreateTeamLinkClick(),e.stopPropagation(),e.stopImmediatePropagation()},this.onCloseClick=()=>{this.setState({isHighlightHidden:!0}),this.props.onClose()},this.elWrapper=r.a.createRef(),this.elCloseWrapper=r.a.createRef(),this.elCreateTeamWrapper=r.a.createRef(),this.state={isHighlightHidden:!1}}componentDidMount(){const{onViewed:e}=this.props;this.addEventHandler(),d.a.isHighlightEnabled()?(d.a.registerRender(),e&&e()):this.setState({isHighlightHidden:!0})}componentWillUnmount(){this.removeEventHandler()}addEventHandler(){this.elWrapper.current&&this.elWrapper.current.addEventListener("click",this.preventClickOnCard)}removeEventHandler(){this.elWrapper.current&&this.elWrapper.current.removeEventListener("click",this.preventClickOnCard)}render(){const{createTeamLink:e}=this.props,{isHighlightHidden:t}=this.state;return t?null:r.a.createElement("div",{ref:this.elWrapper},r.a.createElement(O,null,r.a.createElement(E,null,r.a.createElement(C,null,r.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHdpZHRoPSIxMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIGN4PSI2NCIgY3k9IjY0IiBmaWxsPSIjNTI0M2FhIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHI9IjY0Ii8+PHBhdGggZD0ibTgwIDY0Yy02LjYyNzQxNyAwLTEyLTUuMzcyNTgzLTEyLTEyczUuMzcyNTgzLTEyIDEyLTEyIDEyIDUuMzcyNTgzIDEyIDEyLTUuMzcyNTgzIDEyLTEyIDEyem0tMzItMTJjLTYuNjI3NDE3IDAtMTItNS4zNzI1ODMtMTItMTJzNS4zNzI1ODMtMTIgMTItMTIgMTIgNS4zNzI1ODMgMTIgMTItNS4zNzI1ODMgMTItMTIgMTJ6bTEyIDI0YzAtNC40MiAzLjU0OC04IDgtOGgyNGM0LjQyIDAgOCAzLjU0IDggOHYxNC45MmMwIDEyLjEwOC00MCAxMi4xMDgtNDAgMHptOC0xMmgtLjAxMmMtMy4xODQzNTM3LjAwNDI0LTYuMjM2NTQxIDEuMjczNTYxNS04LjQ4NDg0MjcgMy41Mjg2MTQ5LTIuMjQ4MzAxOCAyLjI1NTA1MzQtMy41MDg0NjU2IDUuMzExMDMzLTMuNTAzMTU3MyA4LjQ5NTM4NTF2MTEuMjI4Yy0xMS43ODQgMi4xMzYtMjgtLjI1Mi0yOC03LjkzNnYtMTUuMzA0YzAtNC40MjQgMy41NDgtOC4wMTIgOC04LjAxMmgyNGMyLjEyMjcwODYtLjAwMzE5MTIgNC4xNTkzOTQ2LjgzODYzODYgNS42NjAzNzggMi4zMzk2MjJzMi4zNDI4MTMyIDMuNTM3NjY5NCAyLjMzOTYyMiA1LjY2MDM3OHoiIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iLjk1Ii8+PC9nPjwvc3ZnPg==",height:32})),r.a.createElement(w,null,r.a.createElement(y,null,r.a.createElement(v,null,r.a.createElement(p.j,null))),r.a.createElement(T,null,r.a.createElement(p.h,null,t=>r.a.createElement("div",null,t,r.a.createElement("span",{ref:this.elCreateTeamWrapper},r.a.createElement(p.i,null,t=>r.a.createElement("a",{href:e,target:"_blank"}," ",t))))))),r.a.createElement(g,null,r.a.createElement("div",{ref:this.elCloseWrapper},r.a.createElement(p.g,null,e=>r.a.createElement(l.a,{content:e,position:"bottom"},r.a.createElement(a.a,{appearance:"subtle",iconBefore:r.a.createElement(c.a,{label:"Close",size:"medium"}),spacing:"none"}))))))))}}S.defaultProps={createTeamLink:"/people/search#createTeam"};const k=Object(i.a)({onClose:e=>{Object(u.i)(e)(u.b.TEAM_MENTION_HIGHLIGHT,u.a.CLOSED,u.b.MENTION,"closeButton")},onCreateTeamLinkClick:e=>{Object(u.i)(e)(u.b.TEAM_MENTION_HIGHLIGHT,u.a.CLICKED,u.b.MENTION,"createTeamLink")},onViewed:e=>{Object(u.i)(e)(u.b.TEAM_MENTION_HIGHLIGHT,u.a.VIEWED,u.b.MENTION,void 0,d.a.getSeenCount())}})(S);t.a=k},zwr4:function(e,t,n){"use strict";var o=n("5z8k"),r=n("T1Ll").isWhiteSpace,i=n("T1Ll").isPunctChar,a=n("T1Ll").isMdAsciiPunct;function s(e,t,n,o){this.src=e,this.env=n,this.md=t,this.tokens=o,this.tokens_meta=Array(o.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[]}s.prototype.pushPending=function(){var e=new o("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},s.prototype.push=function(e,t,n){this.pending&&this.pushPending();var r=new o(e,t,n),i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r},s.prototype.scanDelims=function(e,t){var n,o,s,c,l,d,u,p,h,f=e,m=!0,b=!0,g=this.posMax,v=this.src.charCodeAt(e);for(n=e>0?this.src.charCodeAt(e-1):32;f<g&&this.src.charCodeAt(f)===v;)f++;return s=f-e,o=f<g?this.src.charCodeAt(f):32,u=a(n)||i(String.fromCharCode(n)),h=a(o)||i(String.fromCharCode(o)),d=r(n),(p=r(o))?m=!1:h&&(d||u||(m=!1)),d?b=!1:u&&(p||h||(b=!1)),t?(c=m,l=b):(c=m&&(!b||u),l=b&&(!m||h)),{can_open:c,can_close:l,length:s}},s.prototype.Token=o,e.exports=s},zxbv:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),i=n("KsTJ"),a=n("3IV/");const s=i.default.div`
  background: ${a.N30};
  width: 1px;
  height: 20px;
  margin: 0 4px;
`;t.a=()=>r.a.createElement(s,{className:"separator"})}}]);
//# sourceMappingURL=36.AuV694GQSy.js.map
