WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ThreeDots.js' */
(function(e){e.fn.ThreeDots=function(h){var g=this;if((typeof h=="object")||(h==undefined)){e.fn.ThreeDots.the_selected=this;var g=e.fn.ThreeDots.update(h)}return g};e.fn.ThreeDots.update=function(u){var k,t=null;var m,j,s,q,o;var l,i;var r,h,n;if((typeof u=="object")||(u==undefined)){e.fn.ThreeDots.c_settings=e.extend({},e.fn.ThreeDots.settings,u);var p=e.fn.ThreeDots.c_settings.max_rows;if(p<1){return e.fn.ThreeDots.the_selected}var g=false;jQuery.each(e.fn.ThreeDots.c_settings.valid_delimiters,function(v,w){if(((new String(w)).length==1)){g=true}});if(g==false){return e.fn.ThreeDots.the_selected}e.fn.ThreeDots.the_selected.each(function(){k=e(this);if(e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).length==0){return true}l=e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).get(0);var y=a(k,true);var x=e(l).text();d(k,l,y);var v=e(l).text();if((h=e(k).attr("threedots"))!=undefined){e(l).text(h);e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).remove()}r=e(l).text();if(r.length<=0){r=""}e(k).attr("threedots",x);if(a(k,y)>p){curr_ellipsis=e(k).append('<span style="white-space:nowrap" class="'+e.fn.ThreeDots.c_settings.e_span_class+'">'+e.fn.ThreeDots.c_settings.ellipsis_string+"</span>");while(a(k,y)>p){i=b(e(l).text());e(l).text(i.updated_string);t=i.word;n=i.del;if(n==null){break}}if(t!=null){var w=c(k,y);if((a(k,y)<=p-1)||(w)||(!e.fn.ThreeDots.c_settings.whole_word)){r=e(l).text();if(i.del!=null){e(l).text(r+n)}if(a(k,y)>p){e(l).text(r)}else{e(l).text(e(l).text()+t);if((a(k,y)>p+1)||(!e.fn.ThreeDots.c_settings.whole_word)||(v==t)||w){while((a(k,y)>p)){if(e(l).text().length>0){e(l).text(e(l).text().substr(0,e(l).text().length-1))}else{break}}}}}}}if(x==e(e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).get(0)).text()){e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).remove()}else{if((e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class)).length>0){if(e.fn.ThreeDots.c_settings.alt_text_t){e(k).children("."+e.fn.ThreeDots.c_settings.text_span_class).attr("title",x)}if(e.fn.ThreeDots.c_settings.alt_text_e){e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).attr("title",x)}}}})}return e.fn.ThreeDots.the_selected};e.fn.ThreeDots.settings={valid_delimiters:[" ",",","."],ellipsis_string:"...",max_rows:2,text_span_class:"ellipsis_text",e_span_class:"threedots_ellipsis",whole_word:true,allow_dangle:false,alt_text_e:false,alt_text_t:false};function c(k,h){if(e.fn.ThreeDots.c_settings.allow_dangle==true){return false}var l=e(k).children("."+e.fn.ThreeDots.c_settings.e_span_class).get(0);var g=e(l).css("display");var i=a(k,h);e(l).css("display","none");var j=a(k,h);e(l).css("display",g);if(i>j){return true}else{return false}}function a(i,j){var g=typeof j;if((g=="object")||(g==undefined)){return e(i).height()/j.lh}else{if(g=="boolean"){var h=f(e(i));return{lh:h}}}}function b(k){var j;var i=e.fn.ThreeDots.c_settings.valid_delimiters;k=jQuery.trim(k);var g=-1;var h=null;var l=null;jQuery.each(i,function(m,o){if(((new String(o)).length!=1)||(o==null)){return false}var n=k.lastIndexOf(o);if(n!=-1){if(n>g){g=n;h=k.substring(g+1);l=o}}});if(g>0){return{updated_string:jQuery.trim(k.substring(0,g)),word:h,del:l}}else{return{updated_string:"",word:jQuery.trim(k),del:null}}}function f(h){e(h).append("<div id='temp_ellipsis_div' style='position:absolute; visibility:hidden'>H</div>");var g=e("#temp_ellipsis_div").height();e("#temp_ellipsis_div").remove();return g}function d(k,l,m){var q=e(l).text();var i=q;var o=e.fn.ThreeDots.c_settings.max_rows;var h,g,n,r,j;var p;if(a(k,m)<=o){return}else{p=0;curr_length=i.length;curr_middle=Math.floor((curr_length-p)/2);h=q.substring(p,p+curr_middle);g=q.substring(p+curr_middle);while(curr_middle!=0){e(l).text(h);if(a(k,m)<=(o)){j=Math.floor(g.length/2);n=g.substring(0,j);p=h.length;i=h+n;curr_length=i.length;e(l).text(i)}else{i=h;curr_length=i.length}curr_middle=Math.floor((curr_length-p)/2);h=q.substring(0,p+curr_middle);g=q.substring(p+curr_middle)}}}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ui.autocomplete.js' */
(function(a){a.widget("ui.autocompleteTC",{options:{minLength:1,delay:300},_create:function(){var b=this,c=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:b._move("previousPage",d);break;case e.PAGE_DOWN:b._move("nextPage",d);break;case e.UP:b._move("previous",d);d.preventDefault();break;case e.DOWN:b._move("next",d);d.preventDefault();break;case e.ENTER:if(b.menu.active){d.preventDefault()}case e.TAB:if(!b.menu.active){return}b.menu.select(d);break;case e.ESCAPE:b.element.val(b.term);b.close(d);break;case e.LEFT:case e.RIGHT:case e.SHIFT:case e.CONTROL:case e.ALT:break;default:clearTimeout(b.searching);b.searching=setTimeout(function(){b.search(null,d)},b.options.delay);break}}).bind("focus.autocomplete",function(){b.selectedItem=null;b.previous=b.element.val()}).bind("blur.autocomplete",function(d){clearTimeout(b.searching);b.closing=setTimeout(function(){b.close(d);b._change(d)},150)});this._initSource();this.response=function(){return b._response.apply(b,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo("body",c).menu({focus:function(e,f){var d=f.item.data("item.autocomplete");if(false!==b._trigger("focus",null,{item:d})){if(/^key/.test(e.originalEvent.type)){b.element.val(d.value)}}},selected:function(f,g){var e=g.item.data("item.autocomplete");if(false!==b._trigger("select",f,{item:e})){b.element.val(e.value)}b.close(f);var d=b.previous;if(b.element[0]!==c.activeElement){b.element.focus();b.previous=d}b.selectedItem=e},blur:function(d,e){if(b.menu.element.is(":visible")){b.element.val(b.term)}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if(a.fn.bgiframe){this.menu.element.bgiframe()}},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(b){a.Widget.prototype._setOption.apply(this,arguments);if(b==="source"){this._initSource()}},_initSource:function(){var c,b;if(a.isArray(this.options.source)){c=this.options.source;this.source=function(e,d){d(a.ui.autocompleteTC.filter(c,e.term))}}else{if(typeof this.options.source==="string"){b=this.options.source;this.source=function(e,d){a.getJSON(b,e,d)}}else{this.source=this.options.source}}},search:function(c,b){c=c!=null?c:this.element.val();if(c.length<this.options.minLength){return this.close(b)}clearTimeout(this.closing);if(this._trigger("search")===false){return}return this._search(c)},_search:function(b){this.term=this.element.addClass("ui-autocomplete-loading").val();this.source({term:b},this.response)},_response:function(b){if(b.length){b=this._normalize(b);this._suggest(b);this._trigger("open")}else{this.close()}this.element.removeClass("ui-autocomplete-loading")},close:function(b){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",b);this.menu.element.hide();this.menu.deactivate()}},_change:function(b){if(this.previous!==this.element.val()){this._trigger("change",b,{item:this.selectedItem})}},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b}return a.map(b,function(c){if(typeof c==="string"){return{label:c,value:c}}return a.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1),d,e;this._renderMenu(c,b);this.menu.deactivate();this.menu.refresh();this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"none"});d=c.width("").width();e=this.element.width();c.width(Math.max(d,e))},_renderMenu:function(d,c){var b=this;a.each(c,function(e,f){b._renderItem(d,f)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append("<a>"+c.label+"</a>").appendTo(b)},_move:function(c,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(c)||this.menu.last()&&/^next/.test(c)){this.element.val(this.term);this.menu.deactivate();return}this.menu[c](b)},widget:function(){return this.menu.element}});a.extend(a.ui.autocompleteTC,{escapeRegex:function(b){return b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},filter:function(d,b){var c=new RegExp(a.ui.autocompleteTC.escapeRegex(b),"i");return a.grep(d,function(e){return c.test(e.label||e.value||e)})}})}(jQuery));(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length){return}c.preventDefault();b.select(c)});this.refresh()},refresh:function(){var c=this;var b=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");b.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(d){c.activate(d,a(this).parent())}).mouseleave(function(){c.deactivate()})},activate:function(e,d){this.deactivate();if(this.hasScroll()){var f=d.offset().top-this.element.offset().top,b=this.element.attr("scrollTop"),c=this.element.height();if(f<0){this.element.attr("scrollTop",b+f)}else{if(f>c){this.element.attr("scrollTop",b+f-c+d.height())}}}this.active=d.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",e,{item:d})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(b){this.move("next",".ui-menu-item:first",b)},previous:function(b){this.move("prev",".ui-menu-item:last",b)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(e,d,c){if(!this.active){this.activate(c,this.element.children(d));return}var b=this.active[e+"All"](".ui-menu-item").eq(0);if(b.length){this.activate(c,b)}else{this.activate(c,this.element.children(d))}},nextPage:function(d){if(this.hasScroll()){if(!this.active||this.last()){this.activate(d,this.element.children(":first"));return}var e=this.active.offset().top,c=this.element.height(),b=this.element.children("li").filter(function(){var f=a(this).offset().top-e-c+a(this).height();return f<10&&f>-10});if(!b.length){b=this.element.children(":last")}this.activate(d,b)}else{this.activate(d,this.element.children(!this.active||this.last()?":first":":last"))}},previousPage:function(c){if(this.hasScroll()){if(!this.active||this.first()){this.activate(c,this.element.children(":last"));return}var d=this.active.offset().top,b=this.element.height();result=this.element.children("li").filter(function(){var e=a(this).offset().top-d+b-a(this).height();return e<10&&e>-10});if(!result.length){result=this.element.children(":first")}this.activate(c,result)}else{this.activate(c,this.element.children(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(b){this._trigger("selected",b,{item:this.active})}})}(jQuery));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ui.position.js' */
(function(f){f.ui=f.ui||{};var c=/left|center|right/,e="center",d=/top|center|bottom/,g="center",a=f.fn.position,b=f.fn.offset;f.fn.position=function(i){if(!i||!i.of){return a.apply(this,arguments)}i=f.extend({},i);var l=f(i.of),n=(i.collision||"flip").split(" "),m=i.offset?i.offset.split(" "):[0,0],k,h,j;if(i.of.nodeType===9){k=l.width();h=l.height();j={top:0,left:0}}else{if(i.of.scrollTo&&i.of.document){k=l.width();h=l.height();j={top:l.scrollTop(),left:l.scrollLeft()}}else{if(i.of.preventDefault){i.at="left top";k=h=0;j={top:i.of.pageY,left:i.of.pageX}}else{k=l.outerWidth();h=l.outerHeight();j=l.offset()}}}f.each(["my","at"],function(){var o=(i[this]||"").split(" ");if(o.length===1){o=c.test(o[0])?o.concat([g]):d.test(o[0])?[e].concat(o):[e,g]}o[0]=c.test(o[0])?o[0]:e;o[1]=d.test(o[1])?o[1]:g;i[this]=o});if(n.length===1){n[1]=n[0]}m[0]=parseInt(m[0],10)||0;if(m.length===1){m[1]=m[0]}m[1]=parseInt(m[1],10)||0;if(i.at[0]==="right"){j.left+=k}else{if(i.at[0]===e){j.left+=k/2}}if(i.at[1]==="bottom"){j.top+=h}else{if(i.at[1]===g){j.top+=h/2}}j.left+=m[0];j.top+=m[1];return this.each(function(){var r=f(this),q=r.outerWidth(),p=r.outerHeight(),o=f.extend({},j);if(i.my[0]==="right"){o.left-=q}else{if(i.my[0]===e){o.left-=q/2}}if(i.my[1]==="bottom"){o.top-=p}else{if(i.my[1]===g){o.top-=p/2}}o.left=parseInt(o.left);o.top=parseInt(o.top);f.each(["left","top"],function(t,s){if(f.ui.position[n[t]]){f.ui.position[n[t]][s](o,{targetWidth:k,targetHeight:h,elemWidth:q,elemHeight:p,offset:m,my:i.my,at:i.at})}});if(f.fn.bgiframe){r.bgiframe()}r.offset(f.extend(o,{using:i.using}))})};f.ui.position={fit:{left:function(h,i){var k=f(window),j=h.left+i.elemWidth-k.width()-k.scrollLeft();h.left=j>0?h.left-j:Math.max(0,h.left)},top:function(h,i){var k=f(window),j=h.top+i.elemHeight-k.height()-k.scrollTop();h.top=j>0?h.top-j:Math.max(0,h.top)}},flip:{left:function(i,j){if(j.at[0]==="center"){return}var l=f(window),k=i.left+j.elemWidth-l.width()-l.scrollLeft(),h=j.my[0]==="left"?-j.elemWidth:j.my[0]==="right"?j.elemWidth:0,m=-2*j.offset[0];i.left+=i.left<0?h+j.targetWidth+m:k>0?h-j.targetWidth+m:0},top:function(i,k){if(k.at[1]==="center"){return}var m=f(window),l=i.top+k.elemHeight-m.height()-m.scrollTop(),h=k.my[1]==="top"?-k.elemHeight:k.my[1]==="bottom"?k.elemHeight:0,j=k.at[1]==="top"?k.targetHeight:-k.targetHeight,n=-2*k.offset[1];i.top+=i.top<0?h+k.targetHeight+n:l>0?h+j+n:0}}};if(!f.offset.setOffset){f.offset.setOffset=function(l,i){if(/static/.test(f.curCSS(l,"position"))){l.style.position="relative"}var k=f(l),n=k.offset(),h=parseInt(f.curCSS(l,"top",true),10)||0,m=parseInt(f.curCSS(l,"left",true),10)||0,j={top:(i.top-n.top)+h,left:(i.left-n.left)+m};if("using" in i){i.using.call(l,j)}else{k.css(j)}};f.fn.offset=function(h){var i=this[0];if(!i||!i.ownerDocument){return null}if(h){return this.each(function(){f.offset.setOffset(this,h)})}return b.call(this)}}}(jQuery));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.ui.resizable.js' */
(function(c){c.widget("ui.resizable",c.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var e=this,j=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!(j.aspectRatio),aspectRatio:j.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:j.helper||j.ghost||j.animate?j.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){if(/relative/.test(this.element.css("position"))&&c.browser.opera){this.element.css({position:"relative",top:"auto",left:"auto"})}this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=j.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var k=this.handles.split(",");this.handles={};for(var f=0;f<k.length;f++){var h=c.trim(k[f]),d="ui-resizable-"+h;var g=c('<div class="ui-resizable-handle '+d+'"></div>');if(/sw|se|ne|nw/.test(h)){g.css({zIndex:++j.zIndex})}if("se"==h){g.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[h]=".ui-resizable-"+h;this.element.append(g)}}this._renderAxis=function(p){p=p||this.element;for(var m in this.handles){if(this.handles[m].constructor==String){this.handles[m]=c(this.handles[m],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=c(this.handles[m],this.element),o=0;o=/sw|ne|nw|se|n|s/.test(m)?n.outerHeight():n.outerWidth();var l=["padding",/ne|nw|n/.test(m)?"Top":/se|sw|s/.test(m)?"Bottom":/^e$/.test(m)?"Right":"Left"].join("");p.css(l,o);this._proportionallyResize()}if(!c(this.handles[m]).length){continue}}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!e.resizing){if(this.className){var i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}e.axis=i&&i[1]?i[1]:"se"}});if(j.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").hover(function(){c(this).removeClass("ui-resizable-autohide");e._handles.show()},function(){if(!e.resizing){c(this).addClass("ui-resizable-autohide");e._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(f){c(f).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var e=this.element;e.after(this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement);return this},_mouseCapture:function(e){var f=false;for(var d in this.handles){if(c(this.handles[d])[0]==e.target){f=true}}return !this.options.disabled&&f},_mouseStart:function(f){var i=this.options,e=this.element.position(),d=this.element;this.resizing=true;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};if(d.is(".ui-draggable")||(/absolute/).test(d.css("position"))){d.css({position:"absolute",top:e.top,left:e.left})}if(c.browser.opera&&(/relative/).test(d.css("position"))){d.css({position:"relative",top:"auto",left:"auto"})}this._renderProxy();var j=b(this.helper.css("left")),g=b(this.helper.css("top"));if(i.containment){j+=c(i.containment).scrollLeft()||0;g+=c(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:j,top:g};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:j,top:g};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio=(typeof i.aspectRatio=="number")?i.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var h=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",h=="auto"?this.axis+"-resize":h);d.addClass("ui-resizable-resizing");this._propagate("start",f);return true},_mouseDrag:function(d){var g=this.helper,f=this.options,l={},p=this,i=this.originalMousePosition,m=this.axis;var q=(d.pageX-i.left)||0,n=(d.pageY-i.top)||0;var h=this._change[m];if(!h){return false}var k=h.apply(this,[d,q,n]),j=c.browser.msie&&c.browser.version<7,e=this.sizeDiff;if(this._aspectRatio||d.shiftKey){k=this._updateRatio(k,d)}k=this._respectSize(k,d);this._propagate("resize",d);g.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}this._updateCache(k);this._trigger("resize",d,this.ui());return false},_mouseStop:function(g){this.resizing=false;var h=this.options,l=this;if(this._helper){var f=this._proportionallyResizeElements,d=f.length&&(/textarea/i).test(f[0].nodeName),e=d&&c.ui.hasScroll(f[0],"left")?0:l.sizeDiff.height,j=d?0:l.sizeDiff.width;var m={width:(l.size.width-j),height:(l.size.height-e)},i=(parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left))||null,k=(parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top))||null;if(!h.animate){this.element.css(c.extend(m,{top:k,left:i}))}l.helper.height(l.size.height);l.helper.width(l.size.width);if(this._helper&&!h.animate){this._proportionallyResize()}}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",g);if(this._helper){this.helper.remove()}return false},_updateCache:function(d){var e=this.options;this.offset=this.helper.offset();if(a(d.left)){this.position.left=d.left}if(a(d.top)){this.position.top=d.top}if(a(d.height)){this.size.height=d.height}if(a(d.width)){this.size.width=d.width}},_updateRatio:function(g,f){var h=this.options,i=this.position,e=this.size,d=this.axis;if(g.height){g.width=(e.height*this.aspectRatio)}else{if(g.width){g.height=(e.width/this.aspectRatio)}}if(d=="sw"){g.left=i.left+(e.width-g.width);g.top=null}if(d=="nw"){g.top=i.top+(e.height-g.height);g.left=i.left+(e.width-g.width)}return g},_respectSize:function(k,f){var i=this.helper,h=this.options,q=this._aspectRatio||f.shiftKey,p=this.axis,s=a(k.width)&&h.maxWidth&&(h.maxWidth<k.width),l=a(k.height)&&h.maxHeight&&(h.maxHeight<k.height),g=a(k.width)&&h.minWidth&&(h.minWidth>k.width),r=a(k.height)&&h.minHeight&&(h.minHeight>k.height);if(g){k.width=h.minWidth}if(r){k.height=h.minHeight}if(s){k.width=h.maxWidth}if(l){k.height=h.maxHeight}var e=this.originalPosition.left+this.originalSize.width,n=this.position.top+this.size.height;var j=/sw|nw|w/.test(p),d=/nw|ne|n/.test(p);if(g&&j){k.left=e-h.minWidth}if(s&&j){k.left=e-h.maxWidth}if(r&&d){k.top=n-h.minHeight}if(l&&d){k.top=n-h.maxHeight}var m=!k.width&&!k.height;if(m&&!k.left&&k.top){k.top=null}else{if(m&&!k.top&&k.left){k.left=null}}return k},_proportionallyResize:function(){var j=this.options;if(!this._proportionallyResizeElements.length){return}var f=this.helper||this.element;for(var e=0;e<this._proportionallyResizeElements.length;e++){var g=this._proportionallyResizeElements[e];if(!this.borderDif){var d=[g.css("borderTopWidth"),g.css("borderRightWidth"),g.css("borderBottomWidth"),g.css("borderLeftWidth")],h=[g.css("paddingTop"),g.css("paddingRight"),g.css("paddingBottom"),g.css("paddingLeft")];this.borderDif=c.map(d,function(k,m){var l=parseInt(k,10)||0,n=parseInt(h[m],10)||0;return l+n})}if(c.browser.msie&&!(!(c(f).is(":hidden")||c(f).parents(":hidden").length))){continue}g.css({height:(f.height()-this.borderDif[0]-this.borderDif[2])||0,width:(f.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var e=this.element,h=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var d=c.browser.msie&&c.browser.version<7,f=(d?1:0),g=(d?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+g,height:this.element.outerHeight()+g,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++h.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(f,e,d){return{width:this.originalSize.width+e}},w:function(g,e,d){var i=this.options,f=this.originalSize,h=this.originalPosition;return{left:h.left+e,width:f.width-e}},n:function(g,e,d){var i=this.options,f=this.originalSize,h=this.originalPosition;return{top:h.top+d,height:f.height-d}},s:function(f,e,d){return{height:this.originalSize.height+d}},se:function(f,e,d){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[f,e,d]))},sw:function(f,e,d){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,e,d]))},ne:function(f,e,d){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,e,d]))},nw:function(f,e,d){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,e,d]))}},_propagate:function(e,d){c.ui.plugin.call(this,e,[d,this.ui()]);(e!="resize"&&this._trigger(e,d,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.extend(c.ui.resizable,{version:"1.8.1"});c.ui.plugin.add("resizable","alsoResize",{start:function(e,f){var d=c(this).data("resizable"),h=d.options;var g=function(i){c(i).each(function(){c(this).data("resizable-alsoresize",{width:parseInt(c(this).width(),10),height:parseInt(c(this).height(),10),left:parseInt(c(this).css("left"),10),top:parseInt(c(this).css("top"),10)})})};if(typeof(h.alsoResize)=="object"&&!h.alsoResize.parentNode){if(h.alsoResize.length){h.alsoResize=h.alsoResize[0];g(h.alsoResize)}else{c.each(h.alsoResize,function(i,j){g(i)})}}else{g(h.alsoResize)}},resize:function(f,h){var e=c(this).data("resizable"),i=e.options,g=e.originalSize,k=e.originalPosition;var j={height:(e.size.height-g.height)||0,width:(e.size.width-g.width)||0,top:(e.position.top-k.top)||0,left:(e.position.left-k.left)||0},d=function(l,m){c(l).each(function(){var p=c(this),q=c(this).data("resizable-alsoresize"),o={},n=m&&m.length?m:["width","height","top","left"];c.each(n||["width","height","top","left"],function(r,t){var s=(q[t]||0)+(j[t]||0);if(s&&s>=0){o[t]=s||null}});if(/relative/.test(p.css("position"))&&c.browser.opera){e._revertToRelativePosition=true;p.css({position:"absolute",top:"auto",left:"auto"})}p.css(o)})};if(typeof(i.alsoResize)=="object"&&!i.alsoResize.nodeType){c.each(i.alsoResize,function(l,m){d(l,m)})}else{d(i.alsoResize)}},stop:function(e,f){var d=c(this).data("resizable");if(d._revertToRelativePosition&&c.browser.opera){d._revertToRelativePosition=false;el.css({position:"relative"})}c(this).removeData("resizable-alsoresize-start")}});c.ui.plugin.add("resizable","animate",{stop:function(h,m){var n=c(this).data("resizable"),i=n.options;var g=n._proportionallyResizeElements,d=g.length&&(/textarea/i).test(g[0].nodeName),e=d&&c.ui.hasScroll(g[0],"left")?0:n.sizeDiff.height,k=d?0:n.sizeDiff.width;var f={width:(n.size.width-k),height:(n.size.height-e)},j=(parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left))||null,l=(parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top))||null;n.element.animate(c.extend(f,l&&j?{top:l,left:j}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var o={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};if(g&&g.length){c(g[0]).css({width:o.width,height:o.height})}n._updateCache(o);n._propagate("resize",h)}})}});c.ui.plugin.add("resizable","containment",{start:function(e,q){var s=c(this).data("resizable"),i=s.options,k=s.element;var f=i.containment,j=(f instanceof c)?f.get(0):(/parent/.test(f))?k.parent().get(0):f;if(!j){return}s.containerElement=c(j);if(/document/.test(f)||f==document){s.containerOffset={left:0,top:0};s.containerPosition={left:0,top:0};s.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var m=c(j),h=[];c(["Top","Right","Left","Bottom"]).each(function(p,o){h[p]=b(m.css("padding"+o))});s.containerOffset=m.offset();s.containerPosition=m.position();s.containerSize={height:(m.innerHeight()-h[3]),width:(m.innerWidth()-h[1])};var n=s.containerOffset,d=s.containerSize.height,l=s.containerSize.width,g=(c.ui.hasScroll(j,"left")?j.scrollWidth:l),r=(c.ui.hasScroll(j)?j.scrollHeight:d);s.parentData={element:j,left:n.left,top:n.top,width:g,height:r}}},resize:function(f,p){var s=c(this).data("resizable"),h=s.options,e=s.containerSize,n=s.containerOffset,l=s.size,m=s.position,q=s._aspectRatio||f.shiftKey,d={top:0,left:0},g=s.containerElement;if(g[0]!=document&&(/static/).test(g.css("position"))){d=n}if(m.left<(s._helper?n.left:0)){s.size.width=s.size.width+(s._helper?(s.position.left-n.left):(s.position.left-d.left));if(q){s.size.height=s.size.width/h.aspectRatio}s.position.left=h.helper?n.left:0}if(m.top<(s._helper?n.top:0)){s.size.height=s.size.height+(s._helper?(s.position.top-n.top):s.position.top);if(q){s.size.width=s.size.height*h.aspectRatio}s.position.top=s._helper?n.top:0}s.offset.left=s.parentData.left+s.position.left;s.offset.top=s.parentData.top+s.position.top;var k=Math.abs((s._helper?s.offset.left-d.left:(s.offset.left-d.left))+s.sizeDiff.width),r=Math.abs((s._helper?s.offset.top-d.top:(s.offset.top-n.top))+s.sizeDiff.height);var j=s.containerElement.get(0)==s.element.parent().get(0),i=/relative|absolute/.test(s.containerElement.css("position"));if(j&&i){k-=s.parentData.left}if(k+s.size.width>=s.parentData.width){s.size.width=s.parentData.width-k;if(q){s.size.height=s.size.width/s.aspectRatio}}if(r+s.size.height>=s.parentData.height){s.size.height=s.parentData.height-r;if(q){s.size.width=s.size.height*s.aspectRatio}}},stop:function(e,m){var p=c(this).data("resizable"),f=p.options,k=p.position,l=p.containerOffset,d=p.containerPosition,g=p.containerElement;var i=c(p.helper),q=i.offset(),n=i.outerWidth()-p.sizeDiff.width,j=i.outerHeight()-p.sizeDiff.height;if(p._helper&&!f.animate&&(/relative/).test(g.css("position"))){c(this).css({left:q.left-d.left-l.left,width:n,height:j})}if(p._helper&&!f.animate&&(/static/).test(g.css("position"))){c(this).css({left:q.left-d.left-l.left,width:n,height:j})}}});c.ui.plugin.add("resizable","ghost",{start:function(f,g){var d=c(this).data("resizable"),h=d.options,e=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof h.ghost=="string"?h.ghost:"");d.ghost.appendTo(d.helper)},resize:function(e,f){var d=c(this).data("resizable"),g=d.options;if(d.ghost){d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})}},stop:function(e,f){var d=c(this).data("resizable"),g=d.options;if(d.ghost&&d.helper){d.helper.get(0).removeChild(d.ghost.get(0))}}});c.ui.plugin.add("resizable","grid",{resize:function(d,l){var n=c(this).data("resizable"),g=n.options,j=n.size,h=n.originalSize,i=n.originalPosition,m=n.axis,k=g._aspectRatio||d.shiftKey;g.grid=typeof g.grid=="number"?[g.grid,g.grid]:g.grid;var f=Math.round((j.width-h.width)/(g.grid[0]||1))*(g.grid[0]||1),e=Math.round((j.height-h.height)/(g.grid[1]||1))*(g.grid[1]||1);if(/^(se|s|e)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e}else{if(/^(ne)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e;n.position.top=i.top-e}else{if(/^(sw)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e;n.position.left=i.left-f}else{n.size.width=h.width+f;n.size.height=h.height+e;n.position.top=i.top-e;n.position.left=i.left-f}}}}});var b=function(d){return parseInt(d,10)||0};var a=function(d){return !isNaN(parseInt(d,10))}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/jquery-plugins/jquery.tourbus.js' */
(function e(b,g,d){function c(k,i){if(!g[k]){if(!b[k]){var h=typeof require=="function"&&require;if(!i&&h){return h(k,!0)}if(a){return a(k,!0)}throw new Error("Cannot find module '"+k+"'")}var j=g[k]={exports:{}};b[k][0].call(j.exports,function(l){var m=b[k][1][l];return c(m?m:l)},j,j.exports,e,b,g,d)}return g[k].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){(function(){var g,j,f,d,i,h=[].slice;g=jQuery;j=b("./modules/bus");f=b("./modules/leg");i=g.tourbus=function(){var k,l;k=1<=arguments.length?h.call(arguments,0):[];l=k[0];if(d.hasOwnProperty(l)){k=k.slice(1)}else{if(l instanceof g){l="build"}else{if(typeof l==="string"){l="build";k[0]=g(k[0])}else{g.error("Unknown method of $.tourbus --",k)}}}return d[l].apply(this,k)};g.fn.tourbus=function(){var k;k=1<=arguments.length?h.call(arguments,0):[];return this.each(function(){k.unshift(g(this));i.apply(null,["build"].concat(h.call(k)));return this})};d={build:function(m,k){var l;if(k==null){k={}}k=g.extend(true,{},i.defaults,k);l=[];if(!(m instanceof g)){m=g(m)}m.each(function(){return l.push(new j(this,k))});if(l.length===0){g.error(""+m.selector+" was not found!")}if(l.length===1){return l[0]}return l},destroyAll:function(){var l,m,n,k;n=j._busses;k=[];for(m in n){l=n[m];k.push(l.destroy())}return k},expose:function(k){return k.tourbus={Bus:j,Leg:f}}};i.defaults={debug:false,autoDepart:false,container:"body","class":null,startAt:0,onDepart:function(){return null},onStop:function(){return null},onLegStart:function(){return null},onLegEnd:function(){return null},leg:{"class":null,scrollTo:null,scrollSpeed:150,scrollContext:100,orientation:"bottom",align:"left",width:"auto",margin:10,top:null,left:null,zindex:9999,arrow:"50%"}}}).call(this)},{"./modules/bus":2,"./modules/leg":3}],2:[function(b,c,a){(function(){var g,i,f,d,h=[].slice;g=jQuery;f=b("./leg");d=b("./utils");c.exports=i=(function(){j._busses={};j._tours=0;j.uniqueId=function(){return this._tours++};function j(l,k){this.options=k;this.id=this.constructor.uniqueId();this.elId="tourbus-"+this.id;this.constructor._busses[this.id]=this;this.$original=g(l);this.rawData=this.$original.data();this.$container=g(d.dataProp(this.rawData.container,this.options.container));this.$original.data({tourbus:this});this.currentLegIndex=null;this.legs=[];this.legEls=this.$original.children("li");this.totalLegs=this.legEls.length;this._configureElement();this._setupEvents();if(d.dataProp(this.rawData.autoDepart,this.options.autoDepart)){this.$original.trigger("depart.tourbus")}this._log("built tourbus with el",l.toString(),"and options",this.options)}j.prototype.depart=function(){this.running=true;this.options.onDepart(this);this._log("departing",this);this.currentLegIndex=d.dataProp(this.rawData.startAt,this.options.startAt);return this.showLeg()};j.prototype.stop=function(k){if(!this.running){return}if(k&&k.stopPropagation){k.stopPropagation()}g.each(this.legs,g.proxy(this.hideLeg,this));this.currentLegIndex=null;this.options.onStop(this);return this.running=false};j.prototype.on=function(m,k,l){return this.$container.on(m,k,l)};j.prototype.currentLeg=function(){if(this.currentLegIndex===null){return null}return this.legs[this.currentLegIndex]};j.prototype.buildLeg=function(l){var k,n,m;k=g(this.legEls[l]);n=k.data();this.legs[l]=m=new f({bus:this,original:k,target:k.attr("data-el")||"body",index:l,rawData:n});m.render();this.$el.append(m.$el);m._position();m.hide();return m};j.prototype.showLeg=function(l){var m,k;if(l==null){l=this.currentLegIndex}m=this.legs[l]||this.buildLeg(l);this._log("showLeg:",m);k=this.options.onLegStart(m,this);if(k!==false){m.show()}if(++l<this.totalLegs&&!this.legs[l]){return this.buildLeg(l)}};j.prototype.hideLeg=function(l){var m,k;if(l==null){l=this.currentLegIndex}m=this.legs[l];if(m&&m.visible){this._log("hideLeg:",m);k=this.options.onLegEnd(m,this);if(k!==false){m.hide()}}if(--l>0&&!this.legs[l]){return this.buildLeg(l)}};j.prototype.repositionLegs=function(){return g.each(this.legs,function(k,l){if(l){l.reposition()}return})};j.prototype.next=function(k){if(k&&k.stopPropagation){k.stopPropagation()}this.hideLeg();this.currentLegIndex++;if(this.currentLegIndex>this.totalLegs-1){return this.$original.trigger("stop.tourbus")}else{return this.showLeg()}};j.prototype.prev=function(k){if(k&&k.stopPropagation){k.stopPropagation()}this.hideLeg();this.currentLegIndex--;if(this.currentLegIndex<0){return this.$original.trigger("stop.tourbus")}else{return this.showLeg()}};j.prototype.destroy=function(){g.each(this.legs,function(k,l){if(l&&l.destroy){l.destroy()}});this.legs=[];delete this.constructor._busses[this.id];this._teardownEvents();this.$original.removeData("tourbus");return this.$el.remove()};j.prototype._configureElement=function(){this.$el=g("<div class='tourbus-container'></div>");this.el=this.$el[0];this.$el.attr({id:this.elId});this.$el.addClass(d.dataProp(this.rawData["class"],this.options["class"]));return this.$container.append(this.$el)};j.prototype._log=function(){if(!d.dataProp(this.rawData.debug,this.options.debug)){return}return console.log.apply(console,["TOURBUS "+this.id+":"].concat(h.call(arguments)))};j.prototype._setupEvents=function(){this.$original.on("depart.tourbus",g.proxy(this.depart,this));this.$original.on("stop.tourbus",g.proxy(this.stop,this));this.$original.on("next.tourbus",g.proxy(this.next,this));return this.$original.on("prev.tourbus",g.proxy(this.prev,this))};j.prototype._teardownEvents=function(){return this.$original.off(".tourbus")};return j})()}).call(this)},{"./leg":3,"./utils":4}],3:[function(b,c,a){(function(){var g,f,d,h;g=jQuery;d=b("./utils");c.exports=f=(function(){function i(j){this.options=j;this.$original=this.options.original;this.bus=this.options.bus;this.rawData=this.options.rawData;this.index=this.options.index;this.$target=g(this.options.target);this.id=""+this.bus.id+"-"+this.options.index;this.elId="tourbus-leg-"+this.id;this.visible=false;if(this.$target.length===0){throw""+this.$target.selector+" is not an element!"}this.content=this.$original.html();this._setupOptions();this._configureElement();this._configureTarget();this._configureScroll();this._setupEvents();this.bus._log("leg "+this.index+" made with options",this.options)}i.prototype.render=function(){var k,j;k=this.options.orientation==="centered"?"":"tourbus-arrow";this.$el.addClass(" "+k+" tourbus-arrow-"+this.options.orientation+" ");j="<div class='tourbus-leg-inner'>\n  "+this.content+"\n</div>";this.$el.css({width:this.options.width,zIndex:this.options.zindex}).html(j);return this};i.prototype.destroy=function(){this.$el.remove();return this._teardownEvents()};i.prototype.reposition=function(){this._configureTarget();return this._position()};i.prototype._position=function(){var k,l,m,j;if(this.options.orientation!=="centered"){m={};l={top:"left",bottom:"left",left:"top",right:"top"};if(typeof this.options.arrow==="number"){this.options.arrow+="px"}m[l[this.options.orientation]]=this.options.arrow;j="#"+this.elId+".tourbus-arrow";this.bus._log("adding rule for "+this.elId,m);h(""+j+":before, "+j+":after",m)}k=this._offsets();this.bus._log("setting offsets on leg",k);return this.$el.css(k)};i.prototype.show=function(){this.visible=true;this.$el.css({visibility:"visible",opacity:1,zIndex:this.options.zindex});return this.scrollIntoView()};i.prototype.hide=function(){this.visible=false;if(this.bus.options.debug){return this.$el.css({visibility:"visible",opacity:0.4,zIndex:0})}else{return this.$el.css({visibility:"hidden"})}};i.prototype.scrollIntoView=function(){var j;if(!this.willScroll){return}j=d.dataProp(this.options.scrollTo,this.$el);this.bus._log("scrolling to",j,this.scrollSettings);return g.scrollTo(j,this.scrollSettings)};i.prototype._setupOptions=function(){var m,l,o,n,k,j;l=this.bus.options.leg;m=["class","top","left","scrollTo","scrollSpeed","scrollContext","margin","arrow","align","width","zindex","orientation"];j=[];for(n=0,k=m.length;n<k;n++){o=m[n];j.push(this.options[o]=d.dataProp(this.rawData[o],l[o]))}return j};i.prototype._configureElement=function(){this.$el=g("<div class='tourbus-leg'></div>");this.el=this.$el[0];this.$el.attr({id:this.elId});this.$el.addClass(this.options["class"]);return this.$el.css({zIndex:this.options.zindex})};i.prototype._setupEvents=function(){this.$el.on("click",".tourbus-next",g.proxy(this.bus.next,this.bus));this.$el.on("click",".tourbus-prev",g.proxy(this.bus.prev,this.bus));return this.$el.on("click",".tourbus-stop",g.proxy(this.bus.stop,this.bus))};i.prototype._teardownEvents=function(){return this.$el.off("click")};i.prototype._configureTarget=function(){this.targetOffset=this.$target.offset();if(d.dataProp(this.options.top,false)){this.targetOffset.top=this.options.top}if(d.dataProp(this.options.left,false)){this.targetOffset.left=this.options.left}this.targetWidth=this.$target.outerWidth();return this.targetHeight=this.$target.outerHeight()};i.prototype._configureScroll=function(){this.willScroll=g.fn.scrollTo&&this.options.scrollTo!==false;return this.scrollSettings={offset:-this.options.scrollContext,easing:"linear",axis:"y",duration:this.options.scrollSpeed}};i.prototype._offsets=function(){var m,u,o,t,k,j,q,s;o=this.$el.height();t=this.$el.width();var r,p;r=this.$target.width();p=this.$target.height();k={};switch(this.options.orientation){case"centered":q=g(window).height();k.top=this.options.top;if(!d.dataProp(k.top,false)){k.top=(q/2)-(o/2)}k.left=(this.targetWidth/2)-(t/2);break;case"left":var l=0;if(!(typeof this.options.arrow==="number")){var n=parseFloat(this.options.arrow);l=(n*o)/100;k.top=this.targetOffset.top+this.options.top+p/2-l}else{k.top=this.targetOffset.top-o/2+p/2+this.options.top}k.left=this.targetOffset.left-t-this.options.margin;break;case"right":k.top=this.targetOffset.top-o/2+p/2;k.left=this.targetOffset.left+this.targetWidth+this.options.margin;break;case"top":k.top=this.targetOffset.top-o-this.options.margin;k.left=this.targetOffset.left-t/2+r/2;break;case"bottom":k.top=this.targetOffset.top+this.targetHeight+this.options.margin;k.left=this.targetOffset.left-t/2+r/2}s={top:["left","right"],bottom:["left","right"],left:["top","bottom"],right:["top","bottom"]};if(d.include(this.options.orientation,s[this.options.align])){switch(this.options.align){case"right":k.left+=this.targetWidth-t;break;case"bottom":k.top+=this.targetHeight-o}}else{if(this.options.align==="center"){if(d.include(this.options.orientation,s.left)){j=this.targetWidth/2;u=t/2;m="left"}else{j=this.targetHeight/2;u=o/2;m="top"}if(j>u){k[m]+=j-u}else{k[m]-=u-j}}}return k};return i})();h=(function(i){var j;i.type="text/css";document.getElementsByTagName("head")[0].appendChild(i);j=document.styleSheets[document.styleSheets.length-1];return function(k,n){var m,l;l=g.map((function(){var p;p=[];for(m in n){p.push(m)}return p})(),function(q){return""+q+":"+n[q]}).join(";");try{if(j.insertRule){j.insertRule(""+k+" { "+l+" }",(j.cssRules||j.rules).length)}else{j.addRule(k,l)}}catch(o){}}})(document.createElement("style"))}).call(this)},{"./utils":4}],4:[function(b,c,a){(function(){c.exports={dataProp:function(f,d){if(f===null||typeof f==="undefined"){return d}return f},include:function(d,f){return $.inArray(d,f||[])!==-1}}}).call(this)},{}]},{},[1,2,3,4]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/calendar-printing.soy' */
// This file was automatically generated from calendar-printing.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.iconEventTypePrinting = function(opt_data, opt_ignored) {
  var output = '';
  var size__soy3 = '16';
  var className__soy4 = 'iconEventPrint';
  output += (opt_data.eventType == 'jira-issue') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'jira', size: size__soy3, className: className__soy4}) : (opt_data.eventType == 'jira-version') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'version_open', size: size__soy3, className: className__soy4}) : (opt_data.eventType == 'greenhopper-sprint') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'green_hopper_sprint', size: size__soy3, className: className__soy4}) : (opt_data.eventType != 'subscription') ? (opt_data.isCustom) ? Confluence.TeamCalendars.Templates.iconCustomPrinting({icon: opt_data.eventType, className: className__soy4}) : Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.eventType, size: size__soy3, className: className__soy4}) : '';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.iconEventTypePrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.iconEventTypePrinting';
}


Confluence.TeamCalendars.Templates.iconSubCalendarPrinting = function(opt_data, opt_ignored) {
  var output = '';
  var size__soy35 = '16';
  var className__soy36 = 'iconSubCalendarPrint';
  output += (opt_data.eventType == 'jira-project-releases') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'version_closed', size: size__soy35, className: className__soy36}) : (opt_data.eventType == 'jira-agile-sprint') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'greenhopper_sprint', size: size__soy35, className: className__soy36}) : (opt_data.eventType == 'leaves') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'leave', size: size__soy35, className: className__soy36}) : (opt_data.eventType != 'subscription') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.eventType, size: size__soy35, className: className__soy36}) : '';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.iconSubCalendarPrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.iconSubCalendarPrinting';
}


Confluence.TeamCalendars.Templates.iconEventTimelinePrinting = function(opt_data, opt_ignored) {
  var output = '';
  var size__soy61 = '16';
  var className__soy62 = 'iconJiraEventTimelinePrint';
  output += (opt_data.eventType == 'jira-issue') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'jira', size: size__soy61, className: className__soy62}) : (opt_data.eventType == 'jira-version') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'version_closed', size: size__soy61, className: className__soy62}) : (opt_data.eventType == 'greenhopper-sprint') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'greenhopper_sprint', size: size__soy61, className: className__soy62}) : (opt_data.eventType == 'people') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: 'people_multiple', size: size__soy61, className: 'iconEventTimelinePrint'}) : (opt_data.eventType != 'subscription') ? Confluence.TeamCalendars.Templates.renderImagePrinting({imageName: opt_data.eventType, size: '12', className: 'iconEventTimelinePrint'}) : '';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.iconEventTimelinePrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.iconEventTimelinePrinting';
}


Confluence.TeamCalendars.Templates.renderImagePrinting = function(opt_data, opt_ignored) {
  return '<img class="' + soy.$$escapeHtml(opt_data.className) + '" src="' + soy.$$escapeHtml("/wiki") + '/download/resources/com.atlassian.confluence.extra.team-calendars:calendar-resources/img/' + soy.$$escapeHtml(opt_data.imageName) + '_' + soy.$$escapeHtml(opt_data.size) + '.png" alt="" />';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.renderImagePrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.renderImagePrinting';
}


Confluence.TeamCalendars.Templates.iconCustomPrinting = function(opt_data, opt_ignored) {
  return '<img class="' + soy.$$escapeHtml(opt_data.className) + '" src="' + soy.$$escapeHtml("/wiki") + '/download/resources/com.atlassian.confluence.extra.team-calendars:calendar-resources/img/customeventtype/' + soy.$$escapeHtml(opt_data.icon) + '.png" alt="" />';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.iconCustomPrinting.soyTemplateName = 'Confluence.TeamCalendars.Templates.iconCustomPrinting';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/lib/fullcalendar.js' */
/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(av,w){var c={isDisplayTimeFormat24hour:function(){return AJS.Meta.get("team-calendars-display-time-format")==="displayTimeFormat24"},getTimelineAdapter:function(aN,aP,aO,aQ){return Confluence.TeamCalendars.getTimelineAdapter(aN,aP,aO,aQ)},Templates:function(){return Confluence.TeamCalendars.Templates},getUserTimeZone:function(){return Confluence.TeamCalendars.getUserTimeZone()}};var O={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":c.isDisplayTimeFormat24hour()===true?"HH:mm":"h:mm TT"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*",supportPrint:true};var T={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}};var aD=av.fullCalendar={version:"1.6.4"};var ag=aD.views={};av.fn.fullCalendar=function(aP){if(typeof aP=="string"){var aO=Array.prototype.slice.call(arguments,1);var aQ;this.each(function(){var aS=av.data(this,"fullCalendar");if(aS&&av.isFunction(aS[aP])){var aR=aS[aP].apply(aS,aO);if(aQ===w){aQ=aR}if(aP=="destroy"){av.removeData(this,"fullCalendar")}}});if(aQ!==w){return aQ}return this}aP=aP||{};var aN=aP.eventSources||[];delete aP.eventSources;if(aP.events){aN.push(aP.events);delete aP.events}aP=av.extend(true,{},O,(aP.isRTL||aP.isRTL===w&&O.isRTL)?T:{},aP);this.each(function(aT,aR){var aS=av(aR);var aU=new u(aS,aP,aN);aS.data("fullCalendar",aU);aU.render()});return this};function ak(aN){av.extend(true,O,aN)}function u(a7,be,bh){var bB=this;bB.options=be;bB.render=bq;bB.destroy=bD;bB.refetchEvents=a2;bB.reportEvents=a4;bB.reportEventChange=bF;bB.rerenderEvents=aQ;bB.changeView=aY;bB.select=bC;bB.unselect=aZ;bB.prev=bl;bB.next=aP;bB.prevYear=bE;bB.nextYear=aO;bB.today=a8;bB.gotoDate=bp;bB.incrementDate=bb;bB.formatDate=function(bL,bK){return E(bL,bK,be)};bB.formatDates=function(bM,bL,bK){return l(bM,bL,bK,be)};bB.getDate=bc;bB.getView=bi;bB.option=by;bB.trigger=bn;t.call(bB,be,bh);var aN=bB.isFetchNeeded;var bI=bB.fetchEvents;var bz=a7[0];var aS;var br;var a1;var bJ;var a0;var bm;var aV;var bs=0;var bA=0;var bG=new Date();var bg=[];var aT;B(bG,be.year,be.month,be.date);function bq(bR){if(!a1){bf()}else{if(bw()){bt();bH(bR)}}var bQ=av("div.plugin-calendar .calendar-layout");var bN=av("div.plugin-calendar .calendar-panel");var bP=function(bS){bt();bH(bS)};var bK=function(bS){bQ.css("width",bS);bN.css("margin-right",0);bP()};var bM=function(){bQ.css("width","");bN.css("margin-right","");var bS=navigator.userAgent.indexOf("Chrome")>-1;if(!bS){bP()}};if(be.supportPrint){var bL=Math.min(bQ.width(),1200);if(window.matchMedia){var bO=window.matchMedia("print");bO.addListener(function(bS){if(a0.name!=="timeline"){if(bS.matches){bK(bL)}else{bM()}}})}av(window).bind("beforeprint",function(){if(a0.name!=="timeline"){bK(bL*0.75)}}).bind("afterprint",function(){if(a0.name!=="timeline"){bM()}})}}function bf(){var bK=av("div.plugin-calendar .calendar-resize-listener");bJ=be.theme?"ui":"fc";a7.addClass("fc");if(be.isRTL){a7.addClass("fc-rtl")}else{a7.addClass("fc-ltr")}if(be.theme){a7.addClass("ui-widget")}a1=av("<div class='fc-content' style='position:relative'/>").prependTo(a7);aS=new U(bB,be);br=aS.render();if(br){a7.prepend(br)}aY(be.defaultView);if(bK.length&&bK[0].contentDocument&&bK[0].contentDocument.defaultView){bK[0].contentDocument.defaultView.addEventListener("resize",a3)}bo();if(!a6()){aX()}}function bo(){if(bw()){AJS.log("TC detected the width. Will go ahead !!!");bd()}else{setTimeout(bo,500)}}function aX(){setTimeout(function(){if(!a0.start&&a6()){bd()}},0)}function bD(){if(a0){bn("viewDestroy",a0,a0,a0.element);a0.triggerEventDestroy()}av(window).unbind("resize",a3);aS.destroy();a1.remove();a7.removeClass("fc fc-rtl ui-widget")}function bw(){return a7.is(":visible")}function a6(){return av("body").is(":visible")}function aY(bK){if(!a0||bK!=a0.name){bu(bK)}}function bu(bK){bA++;if(a0){bn("viewDestroy",a0,a0,a0.element);aZ();a0.triggerEventDestroy();aR();a0.element.remove();aS.deactivateButton(a0.name)}aS.activateButton(bK);a0=new ag[bK](av("<div class='fc-view fc-view-"+bK+"' style='position:relative'/>").appendTo(a1),bB);bd();a5();bA--}function bd(bK){if(!a0.start||bK||bG<a0.start||bG>=a0.end){if(bw()){bH(bK)}}}function bH(bK){bA++;if(a0.start){bn("viewDestroy",a0,a0,a0.element);aZ();bj()}aR();a0.render(bG,bK||0);bx();a5();(a0.afterRender||at)();a9();bk();bn("viewRender",a0,a0,a0.element);a0.trigger("viewDisplay",bz);bA--;aW()}function ba(){if(bw()){aZ();bj();bt();bx();aU()}}function bt(){if(be.contentHeight){aV=be.contentHeight}else{if(be.height){aV=be.height-(br?br.height():0)-I(a1)}else{aV=Math.round(a1.width()/Math.max(be.aspectRatio,0.5))}}}function bx(){if(aV===w){bt()}bA++;a0.setHeight(aV);a0.setWidth(a1.width());bA--;bm=a7.outerWidth()}function a3(){if(!bA){if(a0.start){var bK=++bs;setTimeout(function(){if(bK==bs&&!bA&&bw()){if(bm!=(bm=a7.outerWidth())){bA++;ba();a0.trigger("windowResize",bz);bA--}}},200)}else{aX()}}}function a2(){bj();bv()}function aQ(bK){bj();aU(bK)}function aU(bK){if(bw()){a0.setEventData(bg);a0.renderEvents(bg,bK);a0.trigger("eventAfterAllRender")}}function bj(){a0.triggerEventDestroy();a0.clearEvents();a0.clearEventData()}function aW(){if(!be.lazyFetching||aN(a0.visStart,a0.visEnd)){bv()}else{aU()}}function bv(){bI(a0.visStart,a0.visEnd)}function a4(bK){bg=bK;aU()}function bF(bK){aQ(bK)}function a9(){aS.updateTitle(a0.title)}function bk(){var bK=new Date();if(bK>=a0.start&&bK<a0.end){aS.disableButton("today")}else{aS.enableButton("today")}}function bC(bM,bK,bL){a0.select(bM,bK,bL===w?true:bL)}function aZ(){if(a0){a0.unselect()}}function bl(){if(a0.prev){a0.prev()}else{bd(-1)}}function aP(){if(a0.next){a0.next()}else{bd(1)}}function bE(){aj(bG,-1);bd()}function aO(){aj(bG,1);bd()}function a8(){if(a0.gotoToday){a0.gotoToday()}else{bG=new Date();bd()}}function bp(bL,bM,bK){if(bL instanceof Date){bG=P(bL)}else{B(bG,bL,bM,bK)}bd()}function bb(bL,bK,bM){if(bL!==w){aj(bG,bL)}if(bK!==w){q(bG,bK)}if(bM!==w){aF(bG,bM)}bd()}function bc(){return P(bG)}function aR(){a1.css({width:"100%",height:a1.height(),overflow:"hidden"})}function a5(){a1.css({width:"",height:"",overflow:""})}function bi(){return a0}function by(bK,bL){if(bL===w){return be[bK]}if(bK=="height"||bK=="contentHeight"||bK=="aspectRatio"){be[bK]=bL;ba()}}function bn(bK,bL){if(be[bK]){return be[bK].apply(bL||bz,Array.prototype.slice.call(arguments,2))}}if(be.droppable){av(document).bind("dragstart",function(bM,bN){var bK=bM.target;var bO=av(bK);if(!bO.parents(".fc").length){var bL=be.dropAccept;if(av.isFunction(bL)?bL.call(bK,bO):bO.is(bL)){aT=bK;a0.dragStart(aT,bM,bN)}}}).bind("dragstop",function(bK,bL){if(aT){a0.dragStop(aT,bK,bL);aT=null}})}}function U(aQ,aZ){var aY=this;aY.render=aO;aY.destroy=aU;aY.updateTitle=aS;aY.activateButton=aN;aY.deactivateButton=aW;aY.disableButton=aP;aY.enableButton=aT;var aR=av([]);var aV;function aO(){aV=aZ.theme?"ui":"fc";var a0=aZ.header;if(a0){aR=av("<table class='fc-header' style='width:100%'/>").append(av("<tr/>").append(aX("left")).append(aX("center")).append(aX("right")));return aR}}function aU(){aR.remove()}function aX(a0){var a2=av("<td class='fc-header-"+a0+"'/>");var a1=aZ.header[a0];if(a1){av.each(a1.split(" "),function(a4){if(a4>0){a2.append("<span class='fc-header-space'/>")}var a3;av.each(this.split(","),function(a7,a6){if(a6=="title"){a2.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");if(a3){a3.addClass(aV+"-corner-right")}a3=null}else{var a5;if(aQ[a6]){a5=aQ[a6]}else{if(ag[a6]){a5=function(){a8.removeClass(aV+"-state-hover");aQ.changeView(a6)}}}if(a5){var a9=aZ.theme?H(aZ.buttonIcons,a6):null;var ba=H(aZ.buttonText,a6);var a8=av("<span class='fc-button fc-button-"+a6+" "+aV+"-state-default'>"+(a9?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+a9+"'/></span>":ba)+"</span>").click(function(){if(!a8.hasClass(aV+"-state-disabled")){a5()}}).mousedown(function(){a8.not("."+aV+"-state-active").not("."+aV+"-state-disabled").addClass(aV+"-state-down")}).mouseup(function(){a8.removeClass(aV+"-state-down")}).hover(function(){a8.not("."+aV+"-state-active").not("."+aV+"-state-disabled").addClass(aV+"-state-hover")},function(){a8.removeClass(aV+"-state-hover").removeClass(aV+"-state-down")}).appendTo(a2);aM(a8);if(!a3){a8.addClass(aV+"-corner-left")}a3=a8}}});if(a3){a3.addClass(aV+"-corner-right")}})}return a2}function aS(a0){aR.find("h2").html(a0)}function aN(a0){aR.find("span.fc-button-"+a0).addClass(aV+"-state-active")}function aW(a0){aR.find("span.fc-button-"+a0).removeClass(aV+"-state-active")}function aP(a0){aR.find("span.fc-button-"+a0).addClass(aV+"-state-disabled")}function aT(a0){aR.find("span.fc-button-"+a0).removeClass(aV+"-state-disabled")}}aD.sourceNormalizers=[];aD.sourceFetchers=[];var o={dataType:"json",cache:false};var X=1;function t(aT,a1){var a3=this;a3.isFetchNeeded=aV;a3.fetchEvents=a2;a3.addEventSource=aQ;a3.removeEventSource=aR;a3.updateEvent=a6;a3.renderEvent=aZ;a3.removeEvents=bi;a3.clientEvents=bc;a3.normalizeEvent=aY;var a5=a3.trigger;var aN=a3.getView;var a8=a3.reportEvents;var ba={events:[]};var aO=[ba];var bf,bb;var aP=0;var bg=0;var be=0;var a4=[];for(var bd=0;bd<a1.length;bd++){a7(a1[bd])}function aV(bk,bj){return !bf||bk<bf||bj>bb}function a2(bn,bk){bf=bn;bb=bk;a4=[];var bm=++aP;var bj=aO.length;bg=bj;for(var bl=0;bl<bj;bl++){aU(aO[bl],bm)}}function aU(bk,bj){a9(bk,function(bm){if(bj==aP){if(bm){if(aT.eventDataTransform){bm=av.map(bm,aT.eventDataTransform)}if(bk.eventDataTransform){bm=av.map(bm,bk.eventDataTransform)}for(var bl=0;bl<bm.length;bl++){bm[bl].source=bk;aY(bm[bl])}a4=a4.concat(bm)}a8(a4)}})}function a9(bj,bt){var bo;var bs=aD.sourceFetchers;var bq;for(bo=0;bo<bs.length;bo++){bq=bs[bo](bj,bf,bb,bt);if(bq===true){return}else{if(typeof bq=="object"){a9(bq,bt);return}}}var bv=bj.events;if(bv){if(av.isFunction(bv)){aX();bv(P(bf),P(bb),function(bx){bt(bx);bh()})}else{if(av.isArray(bv)){bt(bv)}else{bt()}}}else{var bk=bj.url;if(bk){var bu=bj.success;var br=bj.error;var bl=bj.complete;var bw;if(av.isFunction(bj.data)){bw=bj.data()}else{bw=bj.data}var bn=av.extend({},bw||{});var bp=aK(bj.startParam,aT.startParam);var bm=aK(bj.endParam,aT.endParam);if(bp){bn[bp]=Math.round(+bf/1000)}if(bm){bn[bm]=Math.round(+bb/1000)}aX();av.ajax(av.extend({},o,bj,{data:bn,success:function(by){by=by||[];var bx=K(bu,this,arguments);if(av.isArray(bx)){by=bx}bt(by)},error:function(){K(br,this,arguments);bt()},complete:function(){K(bl,this,arguments);bh()}}))}else{bt()}}}function aQ(bj){bj=a7(bj);if(bj){bg++;aU(bj,aP)}}function a7(bj){if(av.isFunction(bj)||av.isArray(bj)){bj={events:bj}}else{if(typeof bj=="string"){bj={url:bj}}}if(typeof bj=="object"){a0(bj);aO.push(bj);return bj}}function aR(bj){aO=av.grep(aO,function(bk){return !aW(bk,bj)});a4=av.grep(a4,function(bk){return !aW(bk.source,bj)});a8(a4)}function a6(bo){var bm,bk=a4.length,bp,bj=aN().defaultEventEnd,bn=bo.start-bo._start,bl=bo.end?(bo.end-(bo._end||bj(bo))):0;for(bm=0;bm<bk;bm++){bp=a4[bm];if(bp._id==bo._id&&bp!=bo){bp.start=new Date(+bp.start+bn);if(bo.end){if(bp.end){bp.end=new Date(+bp.end+bl)}else{bp.end=new Date(+bj(bp)+bl)}}else{bp.end=null}bp.title=bo.title;bp.url=bo.url;bp.allDay=bo.allDay;bp.className=bo.className;bp.editable=bo.editable;bp.color=bo.color;bp.backgroundColor=bo.backgroundColor;bp.borderColor=bo.borderColor;bp.textColor=bo.textColor;aY(bp)}}aY(bo);a8(a4)}function aZ(bk,bj){aY(bk);if(!bk.source){if(bj){ba.events.push(bk);bk.source=ba}a4.push(bk)}a8(a4)}function bi(bk){if(!bk){a4=[];for(var bj=0;bj<aO.length;bj++){if(av.isArray(aO[bj].events)){aO[bj].events=[]}}}else{if(!av.isFunction(bk)){var bl=bk+"";bk=function(bm){return bm._id==bl}}a4=av.grep(a4,bk,true);for(var bj=0;bj<aO.length;bj++){if(av.isArray(aO[bj].events)){aO[bj].events=av.grep(aO[bj].events,bk,true)}}}a8(a4)}function bc(bj){if(av.isFunction(bj)){return av.grep(a4,bj)}else{if(bj){bj+="";return av.grep(a4,function(bk){return bk._id==bj})}}return a4}function aX(){if(!be++){a5("loading",null,true,aN())}}function bh(){if(!--be){a5("loading",null,false,aN())}}function aY(bk){var bl=bk.source||{};var bj=aK(bl.ignoreTimezone,aT.ignoreTimezone);bk._id=bk._id||(bk.id===w?"_fc"+X++:bk.id+"");if(bk.date){if(!bk.start){bk.start=bk.date}delete bk.date}bk._start=P(bk.start=ab(bk.start,bj));bk.end=ab(bk.end,bj);if(bk.end&&bk.end<=bk.start){bk.end=null}bk._end=bk.end?P(bk.end):null;if(bk.allDay===w){bk.allDay=aK(bl.allDayDefault,aT.allDayDefault)}if(bk.className){if(typeof bk.className=="string"){bk.className=bk.className.split(/\s+/)}}else{bk.className=[]}}function a0(bl){if(bl.className){if(typeof bl.className=="string"){bl.className=bl.className.split(/\s+/)}}else{bl.className=[]}var bk=aD.sourceNormalizers;for(var bj=0;bj<bk.length;bj++){bk[bj](bl)}}function aW(bk,bj){return bk&&bj&&aS(bk)==aS(bj)}function aS(bj){return((typeof bj=="object")?(bj.events||bj.url):"")||bj}}aD.addDays=aF;aD.cloneDate=P;aD.parseDate=ab;aD.parseISO8601=p;aD.parseTime=aJ;aD.formatDate=E;aD.formatDates=l;var R=["sun","mon","tue","wed","thu","fri","sat"],ay=86400000,am=3600000,V=60000;function aj(aO,aP,aN){aO.setFullYear(aO.getFullYear()+aP);if(!aN){f(aO)}return aO}function q(aQ,aR,aP){if(+aQ){var aN=aQ.getMonth()+aR,aO=P(aQ);aO.setDate(1);aO.setMonth(aN);aQ.setMonth(aN);if(!aP){f(aQ)}while(aQ.getMonth()!=aO.getMonth()){aQ.setDate(aQ.getDate()+(aQ<aO?1:-1))}}return aQ}function aF(aQ,aR,aP){if(+aQ){var aN=aQ.getDate()+aR,aO=P(aQ);aO.setHours(9);aO.setDate(aN);aQ.setDate(aN);if(!aP){f(aQ)}aH(aQ,aO)}return aQ}function aH(aO,aN){if(+aO){while(aO.getDate()!=aN.getDate()){aO.setTime(+aO+(aO<aN?1:-1)*am)}}}function k(aN,aO){aN.setMinutes(aN.getMinutes()+aO);return aN}function f(aN){aN.setHours(0);aN.setMinutes(0);aN.setSeconds(0);aN.setMilliseconds(0);return aN}function P(aN,aO){if(aO){return f(new Date(+aN))}return new Date(+aN)}function h(){var aN=0,aO;do{aO=new Date(1970,aN++,1)}while(aO.getHours());return aO}function aC(aO,aN){return Math.round((P(aO,true)-P(aN,true))/ay)}function B(aO,aQ,aN,aP){if(aQ!==w&&aQ!=aO.getFullYear()){aO.setDate(1);aO.setMonth(0);aO.setFullYear(aQ)}if(aN!==w&&aN!=aO.getMonth()){aO.setDate(1);aO.setMonth(aN)}if(aP!==w){aO.setDate(aP)}}function ab(aO,aN){if(typeof aO=="object"){return aO}if(typeof aO=="number"){return new Date(aO*1000)}if(typeof aO=="string"){if(aO.match(/^\d+(\.\d+)?$/)){return new Date(parseFloat(aO)*1000)}if(aN===w){aN=true}return p(aO,aN)||(aO?new Date(aO):null)}return null}function p(aR,aO){var aN=aR.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!aN){return null}var aQ=new Date(aN[1],0,1,9,0);if(aO||!aN[13]){var aP=new Date(aN[1],0,1,9,0);if(aN[3]){aQ.setMonth(aN[3]-1);aP.setMonth(aN[3]-1)}if(aN[5]){aQ.setDate(aN[5]);aP.setDate(aN[5])}aH(aQ,aP);if(aN[7]){aQ.setHours(aN[7])}if(aN[8]){aQ.setMinutes(aN[8])}if(aN[10]){aQ.setSeconds(aN[10])}if(aN[12]){aQ.setMilliseconds(Number("0."+aN[12])*1000)}aH(aQ,aP)}else{aQ.setUTCFullYear(aN[1],aN[3]?aN[3]-1:0,aN[5]||1);aQ.setUTCHours(aN[7]||0,aN[8]||0,aN[10]||0,aN[12]?Number("0."+aN[12])*1000:0);if(aN[14]){var aS=Number(aN[16])*60+(aN[18]?Number(aN[18]):0);aS*=aN[15]=="-"?1:-1;aQ=new Date(+aQ+(aS*60*1000))}}return aQ}function aJ(aP){if(typeof aP=="number"){return aP*60}if(typeof aP=="object"){return aP.getHours()*60+aP.getMinutes()}var aN=aP.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(aN){var aO=parseInt(aN[1],10);if(aN[3]){aO%=12;if(aN[3].toLowerCase().charAt(0)=="p"){aO+=12}}return aO*60+(aN[2]?parseInt(aN[2],10):0)}}function E(aO,aP,aN){return l(aO,null,aP,aN)}function l(aZ,aY,aX,a0){a0=a0||O;var aO=aZ,aQ=aY,aR,aS=aX.length,aU,aP,aW,aT="";for(aR=0;aR<aS;aR++){aU=aX.charAt(aR);if(aU=="'"){for(aP=aR+1;aP<aS;aP++){if(aX.charAt(aP)=="'"){if(aO){if(aP==aR+1){aT+="'"}else{aT+=aX.substring(aR+1,aP)}aR=aP}break}}}else{if(aU=="("){for(aP=aR+1;aP<aS;aP++){if(aX.charAt(aP)==")"){var aN=E(aO,aX.substring(aR+1,aP),a0);if(parseInt(aN.replace(/\D/,""),10)){aT+=aN}aR=aP;break}}}else{if(aU=="["){for(aP=aR+1;aP<aS;aP++){if(aX.charAt(aP)=="]"){var aV=aX.substring(aR+1,aP);var aN=E(aO,aV,a0);if(aN!=E(aQ,aV,a0)){aT+=aN}aR=aP;break}}}else{if(aU=="{"){aO=aY;aQ=aZ}else{if(aU=="}"){aO=aZ;aQ=aY}else{for(aP=aS;aP>aR;aP--){if(aW=aB[aX.substring(aR,aP)]){if(aO){aT+=aW(aO,a0)}aR=aP-1;break}}if(aP==aR){if(aO){aT+=aU}}}}}}}}return aT}var aB={s:function(aN){return aN.getSeconds()},ss:function(aN){return ad(aN.getSeconds())},m:function(aN){return aN.getMinutes()},mm:function(aN){return ad(aN.getMinutes())},h:function(aN){return aN.getHours()%12||12},hh:function(aN){return ad(aN.getHours()%12||12)},H:function(aN){return aN.getHours()},HH:function(aN){return ad(aN.getHours())},d:function(aN){return aN.getDate()},dd:function(aN){return ad(aN.getDate())},ddd:function(aO,aN){return aN.dayNamesShort[aO.getDay()]},dddd:function(aO,aN){return aN.dayNames[aO.getDay()]},M:function(aN){return aN.getMonth()+1},MM:function(aN){return ad(aN.getMonth()+1)},MMM:function(aO,aN){return aN.monthNamesShort[aO.getMonth()]},MMMM:function(aO,aN){return aN.monthNames[aO.getMonth()]},yy:function(aN){return(aN.getFullYear()+"").substring(2)},yyyy:function(aN){return aN.getFullYear()},t:function(aN){return aN.getHours()<12?"a":"p"},tt:function(aN){return aN.getHours()<12?"am":"pm"},T:function(aN){return aN.getHours()<12?"A":"P"},TT:function(aN){return aN.getHours()<12?"AM":"PM"},u:function(aN){return E(aN,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(aO){var aN=aO.getDate();if(aN>10&&aN<20){return"th"}return["st","nd","rd"][aN%10-1]||"th"},w:function(aO,aN){return aN.weekNumberCalculation(aO)},W:function(aN){return x(aN)}};aD.dateFormatters=aB;function x(aN){var aO;var aP=new Date(aN.getTime());aP.setDate(aP.getDate()+4-(aP.getDay()||7));aO=aP.getTime();aP.setMonth(0);aP.setDate(1);return Math.floor(Math.round((aO-aP)/86400000)/7)+1}aD.applyAll=K;function ap(aN){if(aN.end){return s(aN.end,aN.allDay)}else{return aF(P(aN.start),1)}}function s(aN,aO){aN=P(aN);return aO||aN.getHours()||aN.getMinutes()?aF(aN,1):f(aN)}function v(aO,aN,aP){aO.unbind("mouseover").mouseover(function(aT){var aS=aT.target,aU,aR,aQ;while(aS!=this){aU=aS;aS=aS.parentNode}if((aR=aU._fci)!==w){aU._fci=w;aQ=aN[aR];aP(aQ.event,aQ.element,aQ);av(aT.target).trigger(aT)}aT.stopPropagation()})}function aw(aP,aQ,aN){for(var aO=0,aR;aO<aP.length;aO++){aR=av(aP[aO]);aR.width(Math.max(0,aQ-j(aR,aN)))}}function aa(aQ,aN,aO){for(var aP=0,aR;aP<aQ.length;aP++){aR=av(aQ[aP]);aR.height(Math.max(0,aN-I(aR,aO)))}}function j(aO,aN){return ai(aO)+r(aO)+(aN?ah(aO):0)}function ai(aN){return(parseFloat(av.css(aN[0],"paddingLeft",true))||0)+(parseFloat(av.css(aN[0],"paddingRight",true))||0)}function ah(aN){return(parseFloat(av.css(aN[0],"marginLeft",true))||0)+(parseFloat(av.css(aN[0],"marginRight",true))||0)}function r(aN){return(parseFloat(av.css(aN[0],"borderLeftWidth",true))||0)+(parseFloat(av.css(aN[0],"borderRightWidth",true))||0)}function I(aO,aN){return A(aO)+ar(aO)+(aN?m(aO):0)}function A(aN){return(parseFloat(av.css(aN[0],"paddingTop",true))||0)+(parseFloat(av.css(aN[0],"paddingBottom",true))||0)}function m(aN){return(parseFloat(av.css(aN[0],"marginTop",true))||0)+(parseFloat(av.css(aN[0],"marginBottom",true))||0)}function ar(aN){return(parseFloat(av.css(aN[0],"borderTopWidth",true))||0)+(parseFloat(av.css(aN[0],"borderBottomWidth",true))||0)}function at(){}function a(aO,aN){return aO-aN}function au(aN){return Math.max.apply(Math,aN)}function ad(aN){return(aN<10?"0":"")+aN}function H(aR,aN){if(aR[aN]!==w){return aR[aN]}var aQ=aN.split(/(?=[A-Z])/),aP=aQ.length-1,aO;for(;aP>=0;aP--){aO=aR[aQ[aP].toLowerCase()];if(aO!==w){return aO}}return aR[""]}function aI(aN){return aN.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function aM(aN){aN.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function g(aN){aN.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function M(aN,aO){aN.each(function(aP,aQ){aQ.className=aQ.className.replace(/^fc-\w*/,"fc-"+R[aO.getDay()])})}function S(aO,aP){var aN=aO.source||{};var aU=aO.color;var aS=aN.color;var aR=aP("eventColor");var aV=aO.backgroundColor||aU||aN.backgroundColor||aS||aP("eventBackgroundColor")||aR;var aQ=aO.borderColor||aU||aN.borderColor||aS||aP("eventBorderColor")||aR;var aW=aO.textColor||aN.textColor||aP("eventTextColor");var aT=[];if(aV){aT.push("background-color:"+aV)}if(aQ){aT.push("border-color:"+aQ)}if(aW){aT.push("color:"+aW)}return aT.join(";")}function K(aQ,aR,aO){if(av.isFunction(aQ)){aQ=[aQ]}if(aQ){var aP;var aN;for(aP=0;aP<aQ.length;aP++){aN=aQ[aP].apply(aR,aO)||aN}return aN}}function aK(){for(var aN=0;aN<arguments.length;aN++){if(arguments[aN]!==w){return arguments[aN]}}}ag.timeline=z;function z(aO,aR){var aN=this;aN.name="timeline";aN.render=aP;aN.title="";var aQ=c.getTimelineAdapter(aO,aR.options.calendarPlugin,aR.options.calendarDiv,aN);function aP(aS,aT){aQ.setDate(aS)}aN.update=function(){aR.refetchEvents(true)};aN.unselect=function(){};aN.setHeight=function(){};aN.setWidth=function(){};aN.clearEvents=function(){};aN.renderEvents=function(aS){aQ.renderEvents(aS)};aN.trigger=function(aS,aT){return aR.trigger.apply(aR,[aS,aT||aN].concat(Array.prototype.slice.call(arguments,2),[aN]))};aN.next=function(){aQ.next()};aN.prev=function(){aQ.prev()};aN.gotoDate=function(aS){aR.gotoDate(aS)};aN.triggerEventDestroy=function(){};aN.clearEventData=function(){};aN.setEventData=function(aS){aQ.renderEvents(aS)};aN.element=av(".fc-view-timeline")}ag.month=ae;function ae(aS,aR){var aV=this;aV.render=aN;C.call(aV,aS,aR,"month");var aO=aV.opt;var aP=aV.renderBasic;var aT=aV.skipHiddenDays;var aQ=aV.getCellsPerWeek;var aU=aR.formatDate;function aN(aY,a3){if(a3){q(aY,a3);aY.setDate(1)}var aW=aO("firstDay");var aX=P(aY,true);aX.setDate(1);var aZ=q(P(aX),1);var a4=P(aX);aF(a4,-((a4.getDay()-aW+7)%7));aT(a4);var a0=P(aZ);aF(a0,(7-a0.getDay()+aW)%7);aT(a0,-1,true);var a2=aQ();var a1=Math.round(aC(a0,a4)/7);if(aO("weekMode")=="fixed"){aF(a0,(6-a1)*7);a1=6}aV.title=aU(aX,aO("titleFormat"));aV.start=aX;aV.end=aZ;aV.visStart=a4;aV.visEnd=a0;aP(a1,a2,true)}}ag.basicWeek=aE;function aE(aS,aR){var aV=this;aV.render=aN;C.call(aV,aS,aR,"basicWeek");var aO=aV.opt;var aP=aV.renderBasic;var aU=aV.skipHiddenDays;var aQ=aV.getCellsPerWeek;var aT=aR.formatDates;function aN(a0,a2){if(a2){aF(a0,a2*7)}var a1=aF(P(a0),-((a0.getDay()-aO("firstDay")+7)%7));var aY=aF(P(a1),7);var aX=P(a1);aU(aX);var aW=P(aY);aU(aW,-1,true);var aZ=aQ();aV.start=a1;aV.end=aY;aV.visStart=aX;aV.visEnd=aW;aV.title=aT(aX,aF(P(aW),-1),aO("titleFormat"));aP(1,aZ,false)}}ag.basicDay=L;function L(aQ,a1){var aZ=this;aZ.render=a7;var aW=0;var a4=false;C.call(aZ,aQ,a1,"basicDay");var aO=aZ.opt,a6=aZ.renderBasic,aU=aZ.skipHiddenDays,a0=a1.formatDate,aV=a1.options.calendarDiv,a3=a1.options.calendarPlugin,aX=1000*60*60*24,a5=parseInt(a3.getParameter(aV,"maxUpcomingDays")),aY=av("<div/>").appendTo(aQ),aT=a3.getParameter(aV,"autoAdjustUpcomingEventsHeight")==="true",aN=a3.getParameter(aV,"hideMoreEventsButtonInUpcomingEventsOnClick")==="true",aP=function(){if(aT){aQ.css({height:(av(".events-container",aY).height()+5)+"px",overflow:"hidden"})}},aS=false,a2=a5;var aR=function(bj,bm,bh){if(bj.length){aY.empty();a4=true;var bl=[],bb=new Date(),bd=new Date();aQ.removeClass("no-event");av.each(bj,function(bp,bo){var bn=bo.allDay;if(bo.expandDates&&bo.end&&bo.end.getTime()-bo.start.getTime()>=aX){var bq=bo.end;bb.setTime(bo.start.getTime()+aX);if(bn){while(bb<=bq){bd.setTime(bb.getTime()+aX);if(bb>=bm&&bd<=bh){bl.push(av.extend({},bo,{start:new Date(bb.getTime()),end:new Date(bd.getTime()),expanded:true}))}bb.setTime(bd.getTime())}}else{while(bb<bq){bd.setTime(bb.getTime()+Math.min(bq.getTime()-bb.getTime(),aX));if(bb>=bm&&bd<=bh){bl.push(av.extend({},bo,{start:new Date(bb.getTime()),end:new Date(bd.getTime()),allDay:bd.getTime()-bb.getTime()>=aX,showLastIndicator:bd>=bq,expanded:true}))}bb.setTime(bd.getTime())}}}});av.each(bl,function(bn,bo){bj.push(bo)});bj.sort(function(bo,bp){var bn=bo.expanded===bp.expanded?0:(bo.expanded?1:-1);if(0==bn){bn=bo.allDay===bp.allDay?0:(bo.allDay?1:-1)}if(0===bn){bn=bo.start.getTime()-bp.start.getTime()}if(0==bn){bn=bo.title>bp.title?1:(bp.title>bo.title?-1:0)}if(0==bn){bn=bo.subCalendarId>bp.subCalendarId?1:(bp.subCalendarId>bo.subCalendarId?-1:0)}return bn});bj=av.grep(bj,function(bn){return bn.start>=bm});var ba={};av.each(bj,function(bs,bp){var bn=a0(new Date(),"yyyyMMdd"),bo=a0(bp.start,"yyyyMMdd"),br=ba[bo],bq;if(!ba[bo]){br={today:bo===bn,groupKey:bo,groupDay:bo.substring(6),dateFormatKey:bo.substring(6)+bo.substring(4,6)+bo.substring(0,4),events:[bp]};ba[bo]=br}else{bq=br.events;bq.push(bp)}});var bi=parseInt(a3.getParameter(aV,"maxEventsPerUpcomingDay")),be={},bc={};av.each(ba,function(bn,bp){var bo=bp.events;if(bo&&bo.length&&bo.length>bi){bp.hiddenEventsCount=bo.length-bi;bp.events=bo.slice(0,bi)}bp.events=av.map(bp.events,function(br){var bs=bc[br.subCalendarId]||a3.getSubCalendar(aV,br.subCalendarId),bq=bc[bs.parentId]||a3.getSubCalendar(aV,bs.parentId),bt=av.extend({subCalendar:bs,parentSubCalendar:bq},br);bc[bs.id]=bs;if(bq){bc[bq.id]=bq}be[bt.id]=bt;return bt})});var bk=[];av.each(ba,function(bn){bk.push(bn)});bk.sort(function(bn,bo){return bn>bo?1:(bo>bn?-1:0)});var a8=av("<div/>").html(c.Templates().upcomingEvents({eventGroups:av.map(bk,function(bn){return ba[bn]})})),bg=av(".more-events",a8).click(function(){var bo=av(".events-container",a8),bn=bg.offset().top-bo.offset().top+bo.scrollTop(),bp=av(".toggleable",a8);if(bp.length){bp.removeClass("hidden toggleable");aQ.animate({scrollTop:bn});if(aN){bg.addClass("hidden");aQ.css("overflow","auto")}else{aP()}}else{bg.prop("disabled","disabled").text("Loading...");av.ajax({cache:false,converters:{"text json":function(bq){return bq}},data:{subCalendarIds:(function(){return av.map(av(".child-subcalendar",aV).filter(function(){return !av(this).hasClass("subcalendar-disabled")}),function(bq){return av(bq).data("subCalendarId")})})(),userTimeZoneId:c.getUserTimeZone(),start:a0(bm,"u"),daysMore:a2+=a5},dataFilter:function(bq){var br=av.parseJSON(bq||"[]");av.each(br,function(bs,bt){a1.normalizeEvent(bt)});return br},dataType:"json",error:function(bq,bs,br){a3.showAjaxError(aV,bq,bs,br)},success:function(bq){bq=a3.getEventsTruncated(aV,bq||[],true);var br=new Date(bm.getTime()+(a2*aX));aR(bq,bm,br);av(".more-events",aY).before(av("<div/>",{"class":"showing-events-till",text:AJS.format("Displaying events until {0}",a0(br,"dd MMM yyyy"))}));aP()},type:"GET",url:a3.getCalendarServiceBaseUrl(aV,"/events/multiplexed.json")})}return !(aS=true)});aY.append(a8);av(".event-description",a8).ThreeDots({max_rows:1});av(".events li",a8).each(function(bo){var bn=av(this);if(!aS&&bo>=10&&!bn.prev().length){var bp=bn.closest(".event-group");if(!bp.hasClass("toggleable")){bp.addClass("toggleable")}}a3.getEventDetailsDialog(aV,be[av(this).attr("data-event-id")],bn.hover(function(){bn.addClass("highlighted");a3.hideInlineAuiDialogs()},function(){bn.removeClass("highlighted")}),{hideDelay:10000,noBind:false})});var a9=av(".toggleable",a8).addClass("hidden");if(a9.length||!aN){bg.removeClass("hidden")}aP();var bf=function(bn,bp){var bo=bp.attr("data-group-date");bp.text(a0(new Date(parseInt(bo.substring(4)),parseInt(bo.substring(2,4),10)-1,parseInt(bo.substring(0,2),10)),bn))};av(".other-days",a8).each(function(){bf("dddd",av(this))});av(".day",a8).each(function(){bf("dd",av(this))});av(".month",a8).each(function(){bf("MMM",av(this))})}else{if(aW>1&&!a4){aY.empty();av("<div/>",{text:AJS.format("No upcoming events in the next {0} days",a5)}).appendTo(aY.empty())}else{if(!a4){aY.empty();aW=aW+1;window.setTimeout(function(){aZ.renderEvents([])},1000);av("<span class='calendar-upcoming-spinner aui-icon aui-icon-wait'>Loading...</span>").appendTo(aY.empty())}}}};av("<div/>",{"class":"no-events-message",text:"Loading..."}).appendTo(aY);aZ.renderEvents=function(a9){aQ.css("MozUserSelect","text").attr("unselectable","off").unbind("selectstart.ui");var a8=new Date(aZ.visStart.getTime()+aX*(a2=a5));aR((function(be,bd,bc){var ba=[];var bb=function(bf){if(bf.allDay){return(bf.start>=bd&&bf.start<bc)||(bf.start<bd&&bf.end>=bd)||(bf.start>=bc&&bf.start<bc)}else{return(bf.start>=bd&&bf.start<bc)||(bf.start<bd&&bf.end>bd)||(bf.start>=bc&&bf.start<bc)}};av.each(be,function(bg,bf){if(bb(bf)){ba.push(bf)}});return ba})(a9,aZ.visStart,a8),aZ.visStart,a8)};function a7(a9,bb){if(bb){aF(a9,bb)}aU(a9,bb<0?-1:1);var ba=P(a9,true);var a8=aF(P(ba),1);aZ.title=a0(a9,aO("titleFormat"));aZ.start=aZ.visStart=ba;aZ.end=aZ.visEnd=a8;a6(1,1,false)}}ak({weekMode:"fixed"});function C(a8,bz,a0){var by=this;by.renderBasic=bs;by.setHeight=bw;by.setWidth=bH;by.renderDayOverlay=bo;by.defaultSelectionEnd=bn;by.renderSelection=bA;by.clearSelection=aN;by.reportDayClick=a6;by.dragStart=aS;by.dragStop=a1;by.defaultEventEnd=bM;by.getHoverListener=function(){return aT};by.colLeft=bO;by.colRight=bb;by.colContentLeft=bv;by.colContentRight=bt;by.getIsCellAllDay=function(){return true};by.allDayRow=a5;by.getRowCnt=function(){return bf};by.getColCnt=function(){return aV};by.getColWidth=function(){return bk};by.getDaySegmentContainer=function(){return a4};aG.call(by,a8,bz,a0);d.call(by);ao.call(by);an.call(by);var bd=by.opt;var bp=by.trigger;var bK=by.renderOverlay;var aZ=by.clearOverlays;var bu=by.daySelectionMousedown;var aO=by.cellToDate;var bD=by.dateToCell;var br=by.rangeToSegments;var bx=bz.formatDate;var be;var a7;var a2;var bi;var aY;var a9;var bl;var bj;var aQ;var a4;var bL;var bN;var bk;var a3;var bf,aV;var ba;var bB;var aT;var bE;var bF;var bP;var aW;var bc;var bC;var bm;aM(a8.addClass("fc-grid"));function bs(bQ,bR,bS){bf=bQ;aV=bR;ba=bS;bI();if(!bi){aR()}bh()}function bI(){bP=bd("theme")?"ui":"fc";aW=bd("columnFormat");bc=bd("weekNumbers");bC=bd("weekNumberTitle");if(bd("weekNumberCalculation")!="iso"){bm="w"}else{bm="W"}}function aR(){a4=av("<div class='fc-event-container' style='position:absolute;z-index:1;top:0;left:0'/>").appendTo(a8)}function bh(){var bQ=bq();if(be){be.remove()}be=av(bQ).appendTo(a8);a7=be.find("thead");a2=a7.find(".fc-day-header");bi=be.find("tbody");aY=bi.find("tr");a9=bi.find(".fc-day");bl=aY.find("td:first-child");bj=aY.eq(0).find(".fc-day > div");aQ=aY.eq(0).find(".fc-day-content > div");g(a7.add(a7.find("tr")));g(aY);aY.eq(0).addClass("fc-first");aY.filter(":last").addClass("fc-last");a9.each(function(bS,bT){var bR=aO(Math.floor(bS/aV),bS%aV);bp("dayRender",by,bR,av(bT))});aU(a9)}function bq(){var bQ="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+aP()+bg()+"</table>";return bQ}function aP(){var bT=bP+"-widget-header";var bS="";var bR;var bQ;bS+="<thead><tr>";if(bc){bS+="<th class='fc-week-number "+bT+"'>"+aI(bC)+"</th>"}for(bR=0;bR<aV;bR++){bQ=aO(0,bR);bS+="<th class='fc-day-header fc-"+R[bQ.getDay()]+" "+bT+"'>"+aI(bx(bQ,aW))+"</th>"}bS+="</tr></thead>";return bS}function bg(){var bS=bP+"-widget-content";var bT="";var bU;var bR;var bQ;bT+="<tbody>";for(bU=0;bU<bf;bU++){bT+="<tr class='fc-week'>";if(bc){bQ=aO(bU,0);bT+="<td class='fc-week-number "+bS+"'><div>"+aI(bx(bQ,bm))+"</div></td>"}for(bR=0;bR<aV;bR++){bQ=aO(bU,bR);bT+=aX(bQ)}bT+="</tr>"}bT+="</tbody>";return bT}function aX(bS){var bR=bP+"-widget-content";var bU=by.start.getMonth();var bQ=f(new Date());var bT="";var bV=["fc-day","fc-"+R[bS.getDay()],bR];if(bS.getMonth()!=bU){bV.push("fc-other-month")}if(+bS==+bQ){bV.push("fc-today",bP+"-state-highlight")}else{if(bS<bQ){bV.push("fc-past")}else{bV.push("fc-future")}}bT+="<td class='"+bV.join(" ")+"' data-date='"+bx(bS,"yyyy-MM-dd")+"'><div>";if(ba){bT+="<div class='fc-day-number'>"+bS.getDate()+"</div>"}bT+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";return bT}function bw(bR){bN=bR;var bU=bN-a7.height();var bT;var bS;var bQ;if(bd("weekMode")=="variable"){bT=bS=Math.floor(bU/(bf==1?2:6))}else{bT=Math.floor(bU/bf);bS=bU-bT*(bf-1)}bl.each(function(bV,bW){if(bV<bf){bQ=av(bW);bQ.find("> div").css("min-height",(bV==bf-1?bS:bT)-I(bQ))}})}function bH(bQ){bL=bQ;bE.clear();bF.clear();a3=0;if(bc){a3=a7.find("th.fc-week-number").outerWidth()}bk=Math.floor((bL-a3)/aV);aw(a2.slice(0,-1),bk)}function aU(bQ){bQ.click(bJ).mousedown(bu)}function bJ(bR){if(!bd("selectable")){var bQ=p(av(this).data("date"));bp("dayClick",this,bQ,true,bR)}}function bo(bU,bV,bQ){if(bQ){bB.build()}var bR=br(bU,bV);for(var bS=0;bS<bR.length;bS++){var bT=bR[bS];aU(bG(bT.row,bT.leftCol,bT.row,bT.rightCol))}}function bG(bT,bU,bR,bS){var bQ=bB.rect(bT,bU,bR,bS,a8);return bK(bQ,a8)}function bn(bQ,bR){return P(bQ)}function bA(bQ,bS,bR){bo(bQ,aF(P(bS),1),true)}function aN(){aZ()}function a6(bS,bU,bT){var bQ=bD(bS);var bR=a9[bQ.row*aV+bQ.col];bp("dayClick",bR,bS,bU,bT)}function aS(bS,bQ,bR){aT.start(function(bT){aZ();if(bT){bG(bT.row,bT.col,bT.row,bT.col)}},bQ)}function a1(bU,bR,bS){var bQ=aT.stop();aZ();if(bQ){var bT=aO(bQ);bp("drop",bU,bT,true,bR,bS)}}function bM(bQ){return P(bQ.start)}bB=new Q(function(bQ,bT){var bS,bU,bR;a2.each(function(bW,bV){bS=av(bV);bU=bS.offset().left;if(bW){bR[1]=bU}bR=[bU];bT[bW]=bR});bR[1]=bU+bS.outerWidth();aY.each(function(bW,bV){if(bW<bf){bS=av(bV);bU=bS.offset().top;if(bW){bR[1]=bU}bR=[bU];bQ[bW]=bR}});bR[1]=bU+bS.outerHeight()});aT=new aq(bB);bE=new n(function(bQ){return bj.eq(bQ)});bF=new n(function(bQ){return aQ.eq(bQ)});function bO(bQ){return bE.left(bQ)}function bb(bQ){return bE.right(bQ)}function bv(bQ){return bF.left(bQ)}function bt(bQ){return bF.right(bQ)}function a5(bQ){return aY.eq(bQ)}}function an(){var aO=this;aO.renderEvents=aN;aO.clearEvents=aP;Z.call(aO);function aN(aR,aQ){aO.renderDayEvents(aR,aQ)}function aP(){aO.getDaySegmentContainer().empty()}}ag.agendaWeek=i;function i(aS,aR){var aV=this;aV.render=aN;J.call(aV,aS,aR,"agendaWeek");var aO=aV.opt;var aP=aV.renderAgenda;var aU=aV.skipHiddenDays;var aQ=aV.getCellsPerWeek;var aT=aR.formatDates;function aN(a0,a2){if(a2){aF(a0,a2*7)}var a1=aF(P(a0),-((a0.getDay()-aO("firstDay")+7)%7));var aY=aF(P(a1),7);var aX=P(a1);aU(aX);var aW=P(aY);aU(aW,-1,true);var aZ=aQ();aV.title=aT(aX,aF(P(aW),-1),aO("titleFormat"));aV.start=a1;aV.end=aY;aV.visStart=aX;aV.visEnd=aW;aP(aZ)}}ag.agendaDay=az;function az(aR,aU){var aQ=this;aQ.render=aS;J.call(aQ,aR,aU,"agendaDay");var aP=aQ.opt;var aN=aQ.renderAgenda;var aO=aQ.skipHiddenDays;var aT=aU.formatDate;function aS(aW,aY){if(aY){aF(aW,aY)}aO(aW,aY<0?-1:1);var aX=P(aW,true);var aV=aF(P(aX),1);aQ.title=aT(aW,aP("titleFormat"));aQ.start=aQ.visStart=aX;aQ.end=aQ.visEnd=aV;aN(1)}}ak({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:30,axisFormat:c.isDisplayTimeFormat24hour()===true?"HH:mm":"h(:mm)tt",timeFormat:{agenda:c.isDisplayTimeFormat24hour()===true?"HH:mm{ - HH:mm}":"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24,slotEventOverlap:true});function J(cc,a3,bg){var bd=this;bd.renderAgenda=aZ;bd.setWidth=bp;bd.setHeight=bl;bd.afterRender=bV;bd.defaultEventEnd=bU;bd.timePosition=cf;bd.getIsCellAllDay=bw;bd.allDayRow=bD;bd.getCoordinateGrid=function(){return bI};bd.getHoverListener=function(){return cb};bd.colLeft=b6;bd.colRight=bN;bd.colContentLeft=cg;bd.colContentRight=aV;bd.getDaySegmentContainer=function(){return a8};bd.getSlotSegmentContainer=function(){return aT};bd.getMinMinute=function(){return bk};bd.getMaxMinute=function(){return aP};bd.getSlotContainer=function(){return a6};bd.getRowCnt=function(){return 1};bd.getColCnt=function(){return bG};bd.getColWidth=function(){return aW};bd.getSnapHeight=function(){return b8};bd.getSnapMinutes=function(){return bt};bd.defaultSelectionEnd=bo;bd.renderDayOverlay=aR;bd.renderSelection=b4;bd.clearSelection=bZ;bd.reportDayClick=ba;bd.dragStart=aX;bd.dragStop=cd;aG.call(bd,cc,a3,bg);d.call(bd);ao.call(bd);W.call(bd);var bB=bd.opt;var bE=bd.trigger;var bs=bd.renderOverlay;var aQ=bd.clearOverlays;var bu=bd.reportSelection;var b2=bd.unselect;var bz=bd.daySelectionMousedown;var a5=bd.slotSegHtml;var bb=bd.cellToDate;var aY=bd.dateToCell;var bi=bd.rangeToSegments;var a9=a3.formatDate;var bQ;var b9;var bX;var bW;var bf;var aS;var aN;var bT;var bM;var ce;var a8;var ca;var b1;var bq;var a6;var aT;var a0;var aU;var bx;var bK;var bm;var aW;var bA;var bH;var bt;var a4;var b8;var bG;var bL;var bI;var cb;var bF;var by;var bh={};var br;var aO;var bk,aP;var a2;var bR;var bC;var bv;aM(cc.addClass("fc-agenda"));function aZ(ch){bG=ch;bJ();if(!bQ){be()}else{bP()}}function bJ(){br=bB("theme")?"ui":"fc";aO=bB("isRTL");bk=aJ(bB("minTime"));aP=aJ(bB("maxTime"));a2=bB("columnFormat");bR=bB("weekNumbers");bC=bB("weekNumberTitle");if(bB("weekNumberCalculation")!="iso"){bv="w"}else{bv="W"}bt=bB("snapMinutes")||bB("slotMinutes")}function be(){var cm=br+"-widget-header";var ch=br+"-widget-content";var cl;var co;var ck;var cn;var cj;var ci=bB("slotMinutes")%15==0;bP();ce=av("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(cc);if(bB("allDaySlot")){a8=av("<div class='fc-event-container' style='position:absolute;z-index:1;top:0;left:0'/>").appendTo(ce);cl="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+cm+" fc-agenda-axis'>"+bB("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+cm+" fc-agenda-gutter'>&nbsp;</th></tr></table>";ca=av(cl).appendTo(ce);b1=ca.find("tr");bn(b1.find("td"));ce.append("<div class='fc-agenda-divider "+cm+"'><div class='fc-agenda-divider-inner'/></div>")}else{a8=av([])}bq=av("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce);a6=av("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(bq);aT=av("<div class='fc-event-container' style='position:absolute;z-index:1;top:0;left:0'/>").appendTo(a6);cl="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";co=h();cn=k(P(co),aP);k(co,bk);bL=0;for(ck=0;co<cn;ck++){cj=co.getMinutes();cl+="<tr class='fc-slot"+ck+" "+(!cj?"":"fc-minor")+"'><th class='fc-agenda-axis "+cm+"'>"+((!ci||!cj)?a9(co,bB("axisFormat")):"&nbsp;")+"</th><td class='"+ch+"'><div style='position:relative'>&nbsp;</div></td></tr>";k(co,bB("slotMinutes"));bL++}cl+="</tbody></table>";a0=av(cl).appendTo(a6);b0(a0.find("td"))}function bP(){var ch=b7();if(bQ){bQ.remove()}bQ=av(ch).appendTo(cc);b9=bQ.find("thead");bX=b9.find("th").slice(1,-1);bW=bQ.find("tbody");bf=bW.find("td").slice(0,-1);aS=bf.find("> div");aN=bf.find(".fc-day-content > div");bT=bf.eq(0);bM=aS.eq(0);g(b9.add(b9.find("tr")));g(bW.add(bW.find("tr")))}function b7(){var ch="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+b5()+bY()+"</table>";return ch}function b5(){var ck=br+"-widget-header";var ci;var cj="";var cl;var ch;cj+="<thead><tr>";if(bR){ci=bb(0,0);cl=a9(ci,bv);if(aO){cl+=bC}else{cl=bC+cl}cj+="<th class='fc-agenda-axis fc-week-number "+ck+"'>"+aI(cl)+"</th>"}else{cj+="<th class='fc-agenda-axis "+ck+"'>&nbsp;</th>"}for(ch=0;ch<bG;ch++){ci=bb(0,ch);cj+="<th class='fc-"+R[ci.getDay()]+" fc-col"+ch+" "+ck+"'>"+aI(a9(ci,a2))+"</th>"}cj+="<th class='fc-agenda-gutter "+ck+"'>&nbsp;</th></tr></thead>";return cj}function bY(){var cj=br+"-widget-header";var ck=br+"-widget-content";var cm;var co=f(new Date());var cl;var cp;var ci;var ch;var cn="";cn+="<tbody><tr><th class='fc-agenda-axis "+cj+"'>&nbsp;</th>";cp="";for(cl=0;cl<bG;cl++){cm=bb(0,cl);ch=["fc-col"+cl,"fc-"+R[cm.getDay()],ck];if(+cm==+co){ch.push(br+"-state-highlight","fc-today")}else{if(cm<co){ch.push("fc-past")}else{ch.push("fc-future")}}ci="<td class='"+ch.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";cp+=ci}cn+=cp;cn+="<td class='fc-agenda-gutter "+ck+"'>&nbsp;</td></tr></tbody>";return cn}function bl(ch){if(ch===w){ch=bK}bK=ch;bh={};var cj=bW.position().top;var ci=bq.position().top;var ck=Math.min(ch-cj,a0.height()+ci+1);bM.height(ck-I(bT));ce.css("top",cj);bq.height(ck-ci-1);bH=a0.find("tr:first").height()+1;a4=bB("slotMinutes")/bt;b8=bH/a4}function bp(ck){bx=ck;bF.clear();by.clear();var ch=b9.find("th:first");if(ca){ch=ch.add(ca.find("th:first"))}ch=ch.add(a0.find("th:first"));bm=0;aw(ch.width("").each(function(cl,cm){bm=Math.max(bm,av(cm).outerWidth())}),bm);var ci=bQ.find(".fc-agenda-gutter");if(ca){ci=ci.add(ca.find("th.fc-agenda-gutter"))}var cj=bq[0].clientWidth;bA=bq.width()-cj;if(bA){aw(ci,bA);ci.show().prev().removeClass("fc-last")}else{ci.hide().prev().addClass("fc-last")}aW=Math.floor((cj-bm)/bG);aw(bX.slice(0,-1),aW)}function bj(){var ck=h();var ci=P(ck);ci.setHours(bB("firstHour"));var cj=cf(ck,ci)+1;function ch(){bq.scrollTop(cj)}ch();setTimeout(ch,0)}function bV(){bj()}function bn(ch){ch.click(bO).mousedown(bz)}function b0(ch){ch.click(bO).mousedown(a1)}function bO(cl){if(!bB("selectable")){var cj=Math.min(bG-1,Math.floor((cl.pageX-bQ.offset().left-bm)/aW));var ci=bb(0,cj);var cm=this.parentNode.className.match(/fc-slot(\d+)/);if(cm){var ck=parseInt(cm[1])*bB("slotMinutes");var ch=Math.floor(ck/60);ci.setHours(ch);ci.setMinutes(ck%60+bk);bE("dayClick",bf[cj],ci,false,cl)}else{bE("dayClick",bf[cj],ci,true,cl)}}}function aR(cl,cm,ch){if(ch){bI.build()}var ci=bi(cl,cm);for(var cj=0;cj<ci.length;cj++){var ck=ci[cj];bn(a7(ck.row,ck.leftCol,ck.row,ck.rightCol))}}function a7(ck,cl,ci,cj){var ch=bI.rect(ck,cl,ci,cj,ce);return bs(ch,ce)}function bc(cl,cq){for(var cj=0;cj<bG;cj++){var cm=bb(0,cj);var ci=aF(P(cm),1);var ck=new Date(Math.max(cm,cl));var cp=new Date(Math.min(ci,cq));if(ck<cp){var co=bI.rect(0,cj,0,cj,a6);var cn=cf(cm,ck);var ch=cf(cm,cp);co.top=cn;co.height=ch-cn;b0(bs(co,a6))}}}bI=new Q(function(cp,cn){var cl,ci,ch;bX.each(function(cs,cr){cl=av(cr);ci=cl.offset().left;if(cs){ch[1]=ci}ch=[ci];cn[cs]=ch});ch[1]=ci+cl.outerWidth();if(bB("allDaySlot")){cl=b1;ci=cl.offset().top;cp[0]=[ci,ci+cl.outerHeight()]}var co=a6.offset().top;var cq=bq.offset().top;var ck=cq+bq.outerHeight();function cm(cr){return Math.max(cq,Math.min(ck,cr))}for(var cj=0;cj<bL*a4;cj++){cp.push([cm(co+b8*cj),cm(co+b8*(cj+1))])}});cb=new aq(bI);bF=new n(function(ch){return aS.eq(ch)});by=new n(function(ch){return aN.eq(ch)});function b6(ch){return bF.left(ch)}function cg(ch){return by.left(ch)}function bN(ch){return bF.right(ch)}function aV(ch){return by.right(ch)}function bw(ch){return bB("allDaySlot")&&!ch.row}function bS(ch){var cj=bb(0,ch.col);var ci=ch.row;if(bB("allDaySlot")){ci--}if(ci>=0){k(cj,bk+ci*bt)}return cj}function cf(ci,cm){ci=P(ci,true);if(cm<k(P(ci),bk)){return 0}if(cm>=k(P(ci),aP)){return a0.height()}var ch=bB("slotMinutes"),cl=cm.getHours()*60+cm.getMinutes()-bk,ck=Math.floor(cl/ch),cj=bh[ck];if(cj===w){cj=bh[ck]=a0.find("tr").eq(ck).find("td div")[0].offsetTop}return Math.max(0,Math.round(cj-1+bH*((cl%ch)/ch)))}function bD(ch){return b1}function bU(ch){var ci=P(ch.start);if(ch.allDay){return ci}return k(ci,bB("defaultEventMinutes"))}function bo(ch,ci){if(ci){return P(ch)}return k(P(ch),bB("slotMinutes"))}function b4(ch,cj,ci){if(ci){if(bB("allDaySlot")){aR(ch,aF(P(cj),1),true)}}else{b3(ch,cj)}}function b3(ch,cn){var cl=bB("selectHelper");bI.build();if(cl){var cj=aY(ch).col;if(cj>=0&&cj<bG){var ck=bI.rect(0,cj,0,cj,a6);var cm=cf(ch,ch);var ci=cf(ch,cn);if(ci>cm){ck.top=cm;ck.height=ci-cm;ck.left+=2;ck.width-=5;if(av.isFunction(cl)){var co=cl(ch,cn);if(co){ck.position="absolute";aU=av(co).css(ck).appendTo(a6)}}else{ck.isStart=true;ck.isEnd=true;aU=av(a5({title:"",start:ch,end:cn,className:["fc-select-helper"],editable:false},ck));aU.css("opacity",bB("dragOpacity"))}if(aU){b0(aU);a6.append(aU);aw(aU,ck.width,true);aa(aU,ck.height,true)}}}}else{bc(ch,cn)}}function bZ(){aQ();if(aU){aU.remove();aU=null}}function a1(ch){if(ch.which==1&&bB("selectable")){b2(ch);var ci;cb.start(function(ck,cj){bZ();if(ck&&ck.col==cj.col&&!bw(ck)){var cm=bS(cj);var cl=bS(ck);ci=[cm,k(P(cm),bt),cl,k(P(cl),bt)].sort(a);b3(ci[0],ci[3])}else{ci=null}},ch);av(document).one("mouseup",function(cj){cb.stop();if(ci){if(+ci[0]==+ci[1]){ba(ci[0],false,cj)}bu(ci[0],ci[3],false,cj)}})}}function ba(ch,cj,ci){bE("dayClick",bf[aY(ch).col],ch,cj,ci)}function aX(cj,ch,ci){cb.start(function(ck){aQ();if(ck){if(bw(ck)){a7(ck.row,ck.col,ck.row,ck.col)}else{var cm=bS(ck);var cl=k(P(cm),bB("defaultEventMinutes"));bc(cm,cl)}}},ch)}function cd(ck,ci,cj){var ch=cb.stop();aQ();if(ch){bE("drop",ck,bS(ch),bw(ch),ci,cj)}}}function W(){var bm=this;bm.renderEvents=aS;bm.clearEvents=a7;bm.slotSegHtml=a8;Z.call(bm);var a2=bm.opt;var a9=bm.trigger;var aQ=bm.isEventDraggable;var br=bm.isEventResizable;var bs=bm.eventEnd;var bc=bm.eventElementHandlers;var bi=bm.setHeight;var aR=bm.getDaySegmentContainer;var bu=bm.getSlotSegmentContainer;var aP=bm.getHoverListener;var aO=bm.getMaxMinute;var bd=bm.getMinMinute;var aV=bm.timePosition;var bf=bm.getIsCellAllDay;var bh=bm.colContentLeft;var be=bm.colContentRight;var aN=bm.cellToDate;var bj=bm.getColCnt;var a3=bm.getColWidth;var bl=bm.getSnapHeight;var aX=bm.getSnapMinutes;var aZ=bm.getSlotContainer;var a0=bm.reportEventElement;var aT=bm.showEvents;var a1=bm.hideEvents;var bp=bm.eventDrop;var a5=bm.eventResize;var ba=bm.renderDayOverlay;var aU=bm.clearOverlays;var bv=bm.renderDayEvents;var bn=bm.calendar;var bk=bn.formatDate;var a4=bn.formatDates;bm.draggableDayEvent=aY;function aS(bA,by){var bz,bx=bA.length,bB=[],bw=[];for(bz=0;bz<bx;bz++){if(bA[bz].allDay){bB.push(bA[bz])}else{bw.push(bA[bz])}}if(a2("allDaySlot")){bv(bB,by);bi()}aW(a6(bw),by)}function a7(){aR().empty();bu().empty()}function a6(bG){var bE=bj(),bC=bd(),bx=aO(),bD,bA=av.map(bG,bt),bB,bz,by,bF,bw=[];for(bB=0;bB<bE;bB++){bD=aN(0,bB);k(bD,bC);bF=bg(bG,bA,bD,k(P(bD),bx-bC));bF=al(bF);for(bz=0;bz<bF.length;bz++){by=bF[bz];by.col=bB;bw.push(by)}}return bw}function bg(bI,bC,by,bB){var bz=[],bD,bF=bI.length,bx,bG,bE,bH,bJ,bw,bA;for(bD=0;bD<bF;bD++){bx=bI[bD];bG=bx.start;bE=bC[bD];if(bE>by&&bG<bB){if(bG<by){bH=P(by);bw=false}else{bH=bG;bw=true}if(bE>bB){bJ=P(bB);bA=false}else{bJ=bE;bA=true}bz.push({event:bx,start:bH,end:bJ,isStart:bw,isEnd:bA})}}return bz.sort(y)}function bt(bw){if(bw.end){return P(bw.end)}else{return k(P(bw.start),a2("defaultEventMinutes"))}}function aW(bH,bI){var bM,bP=bH.length,bO,bK,bE,bA,bB,bD,by,bJ,bw,bQ,bC="",bR,bN,bz,bG,bF,bL=bu(),bx=a2("isRTL");for(bM=0;bM<bP;bM++){bO=bH[bM];bK=bO.event;bE=aV(bO.start,bO.start);bA=aV(bO.start,bO.end);bB=bh(bO.col);bD=be(bO.col);by=bD-bB;bD-=by*0.025;by=bD-bB;bJ=by*(bO.forwardCoord-bO.backwardCoord);if(a2("slotEventOverlap")){bJ=Math.max((bJ-(20/2))*2,bJ)}if(bx){bQ=bD-bO.backwardCoord*by;bw=bQ-bJ}else{bw=bB+bO.backwardCoord*by;bQ=bw+bJ}bw=Math.max(bw,bB);bQ=Math.min(bQ,bD);bJ=bQ-bw;bO.top=bE;bO.left=bw;bO.outerWidth=bJ;bO.outerHeight=bA-bE;bC+=a8(bK,bO)}bL[0].innerHTML=bC;bR=bL.children();for(bM=0;bM<bP;bM++){bO=bH[bM];bK=bO.event;bN=av(bR[bM]);bz=a9("eventRender",bK,bK,bN);if(bz===false){bN.remove()}else{if(bz&&bz!==true){bN.remove();bN=av(bz).css({position:"absolute",top:bO.top,left:bO.left}).appendTo(bL)}bO.element=bN;if(bK._id===bI){bo(bK,bN,bO)}else{bN[0]._fci=bM}a0(bK,bN)}}v(bL,bH,bo);for(bM=0;bM<bP;bM++){bO=bH[bM];if(bN=bO.element){bO.vsides=I(bN,true);bO.hsides=j(bN,true);bG=bN.find(".fc-event-title");if(bG.length){bO.contentTop=bG[0].offsetTop}}}for(bM=0;bM<bP;bM++){bO=bH[bM];if(bN=bO.element){bN[0].style.width=Math.max(0,bO.outerWidth-bO.hsides)+"px";bF=Math.max(0,bO.outerHeight-bO.vsides);bN[0].style.height=bF+"px";bK=bO.event;if(bO.contentTop!==w&&bF-bO.contentTop<10){bN.find("div.fc-event-time").text(bk(bK.start,a2("timeFormat"))+" - "+bK.title);bN.find("div.fc-event-title").remove()}a9("eventAfterRender",bK,bK,bN)}}}function a8(bB,bw){var bA="<";var by=bB.url;var bx=S(bB,a2);var bz=["fc-event","fc-event-vert"];if(aQ(bB)){bz.push("fc-event-draggable")}if(bw.isStart){bz.push("fc-event-start")}if(bw.isEnd){bz.push("fc-event-end")}bz=bz.concat(bB.className);if(bB.source){bz=bz.concat(bB.source.className||[])}if(by){bA+="a href='"+aI(bB.url)+"'"}else{bA+="div"}bA+=" class='"+bz.join(" ")+"' style='position:absolute;top:"+bw.top+"px;left:"+bw.left+"px;"+bx+"'><div class='fc-event-inner'><div class='fc-event-time'>"+aI(a4(bB.start,bB.end,a2("timeFormat")))+"</div><div class='fc-event-title'>"+aI(bB.title||"")+"</div></div><div class='fc-event-bg'></div>";if(bw.isEnd&&br(bB)){bA+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"}bA+="</"+(by?"a":"div")+">";return bA}function bo(by,bx,bw){var bz=bx.find("div.fc-event-time");if(aQ(by)){bb(by,bx,bz)}if(bw.isEnd&&br(by)){bq(by,bx,bz)}bc(by,bx)}function aY(bx,bG,bB){var bw=bB.isStart;var bH;var bF;var bJ=true;var bA;var bz=aP();var bC=a3();var by=bl();var bI=aX();var bE=bd();bG.draggable({opacity:a2("dragOpacity","month"),revertDuration:a2("dragRevertDuration"),start:function(bK,bL){a9("eventDragStart",bG,bx,bK,bL);a1(bx,bG);bH=bG.width();bz.start(function(bN,bM){aU();if(bN){bF=false;var bP=aN(0,bM.col);var bO=aN(0,bN.col);bA=aC(bO,bP);if(!bN.row){ba(aF(P(bx.start),bA),aF(ap(bx),bA));bD()}else{if(bw){if(bJ){bG.width(bC-10);aa(bG,by*Math.round((bx.end?((bx.end-bx.start)/V):a2("defaultEventMinutes"))/bI));bG.draggable("option","grid",[bC,1]);bJ=false}}else{bF=true}}bF=bF||(bJ&&!bA)}else{bD();bF=true}bG.draggable("option","revert",bF)},bK,"drag")},stop:function(bL,bM){bz.stop();aU();a9("eventDragStop",bG,bx,bL,bM);if(bF){bD();bG.css("filter","");aT(bx,bG)}else{var bK=0;if(!bJ){bK=Math.round((bG.offset().top-aZ().offset().top)/by)*bI+bE-(bx.start.getHours()*60+bx.start.getMinutes())}bp(this,bx,bA,bK,bJ,bL,bM)}}});function bD(){if(!bJ){bG.width(bH).height("").draggable("option","grid",null);bJ=true}}}function bb(bJ,bL,by){var bE=bm.getCoordinateGrid();var bH=bj();var bQ=a3();var bI=bl();var bD=aX();var bP;var bN;var bO,bG;var bw,bz;var bx,bC;var bA;var bK,bB;bL.draggable({scroll:false,grid:[bQ,bI],axis:bH==1?"y":false,opacity:a2("dragOpacity"),revertDuration:a2("dragRevertDuration"),start:function(bR,bS){F(bR);a9("eventDragStart",bL,bJ,bR,bS);a1(bJ,bL);bE.build();bP=bL.position();bN=bE.cell(bR.pageX,bR.pageY);bO=bG=true;bw=bz=bf(bN);bx=bC=0;bA=0;bK=bB=0},drag:function(bV,bW){F(bV);var bR=bE.cell(bV.pageX,bV.pageY);bO=!!bR;if(bO){bw=bf(bR);bx=Math.round((bW.position.left-bP.left)/bQ);if(bx!=bC){var bU=aN(0,bN.col);var bT=bN.col+bx;bT=Math.max(0,bT);bT=Math.min(bH-1,bT);var bS=aN(0,bT);bA=aC(bS,bU)}if(!bw){bK=Math.round((bW.position.top-bP.top)/bI)*bD}}if(bO!=bG||bw!=bz||bx!=bC||bK!=bB){bM();bG=bO;bz=bw;bC=bx;bB=bK}bL.draggable("option","revert",!bO)},stop:function(bR,bS){F(bR);aU();a9("eventDragStop",bL,bJ,bR,bS);if(bO&&(bw||bA||bK)){bp(this,bJ,bA,bw?0:bK,bw,bR,bS)}else{bO=true;bw=false;bx=0;bA=0;bK=0;bM();bL.css("filter","");bL.css(bP);aT(bJ,bL)}}});function bM(){aU();if(bO){if(bw){by.hide();bL.draggable("option","grid",null);ba(aF(P(bJ.start),bA),aF(ap(bJ),bA))}else{bF(bK);by.css("display","");bL.draggable("option","grid",[bQ,bI])}}}function bF(bS){var bR=k(P(bJ.start),bS);var bT;if(bJ.end){bT=k(P(bJ.end),bS)}by.text(a4(bR,bT,a2("timeFormat")))}}function bq(bA,by,bB){var bz,bw;var bC=bl();var bx=aX();by.resizable({handles:{s:".ui-resizable-handle"},grid:bC,minHeight:bC,start:function(bD,bE){bz=bw=0;a9("eventResizeStart",this,bA,bD,bE)},resize:function(bD,bE){bz=Math.round((Math.max(bC,by.height())-bE.originalSize.height)/bC);if(bz!=bw){bB.text(a4(bA.start,(!bz&&!bA.end)?null:k(bs(bA),bx*bz),a2("timeFormat")));bw=bz}},stop:function(bD,bE){a9("eventResizeStop",this,bA,bD,bE);if(bz){a5(this,bA,0,bx*bz,bD,bE)}}})}}function al(aN){var aP=G(aN);var aQ=aP[0];var aO;Y(aP);if(aQ){for(aO=0;aO<aQ.length;aO++){ac(aQ[aO])}for(aO=0;aO<aQ.length;aO++){N(aQ[aO],0,0)}}return D(aP)}function G(aO){var aR=[];var aQ,aN;var aP;for(aQ=0;aQ<aO.length;aQ++){aN=aO[aQ];for(aP=0;aP<aR.length;aP++){if(!aL(aN,aR[aP]).length){break}}(aR[aP]||(aR[aP]=[])).push(aN)}return aR}function Y(aR){var aQ,aS;var aP,aN;var aO;for(aQ=0;aQ<aR.length;aQ++){aS=aR[aQ];for(aP=0;aP<aS.length;aP++){aN=aS[aP];aN.forwardSegs=[];for(aO=aQ+1;aO<aR.length;aO++){aL(aN,aR[aO],aN.forwardSegs)}}}}function ac(aO){var aN=aO.forwardSegs;var aR=0;var aQ,aP;if(aO.forwardPressure===w){for(aQ=0;aQ<aN.length;aQ++){aP=aN[aQ];ac(aP);aR=Math.max(aR,1+aP.forwardPressure)}aO.forwardPressure=aR}}function N(aO,aQ,aR){var aN=aO.forwardSegs;var aP;if(aO.forwardCoord===w){if(!aN.length){aO.forwardCoord=1}else{aN.sort(aA);N(aN[0],aQ+1,aR);aO.forwardCoord=aN[0].backwardCoord}aO.backwardCoord=aO.forwardCoord-(aO.forwardCoord-aR)/(aQ+1);for(aP=0;aP<aN.length;aP++){N(aN[aP],0,aO.forwardCoord)}}}function D(aQ){var aN=[];var aP,aR;var aO;for(aP=0;aP<aQ.length;aP++){aR=aQ[aP];for(aO=0;aO<aR.length;aO++){aN.push(aR[aO])}}return aN}function aL(aN,aQ,aP){aP=aP||[];for(var aO=0;aO<aQ.length;aO++){if(e(aN,aQ[aO])){aP.push(aQ[aO])}}return aP}function e(aO,aN){return aO.end>aN.start&&aO.start<aN.end}function aA(aO,aN){return aN.forwardPressure-aO.forwardPressure||(aO.backwardCoord||0)-(aN.backwardCoord||0)||y(aO,aN)}function y(aO,aN){return aO.start-aN.start||(aN.end-aN.start)-(aO.end-aO.start)||(aO.event.title||"").localeCompare(aN.event.title)}function aG(a2,bm,aZ){var bl=this;bl.element=a2;bl.calendar=bm;bl.name=aZ;bl.opt=a7;bl.trigger=bf;bl.isEventDraggable=aS;bl.isEventResizable=br;bl.setEventData=bo;bl.clearEventData=aR;bl.eventEnd=bs;bl.reportEventElement=a5;bl.triggerEventDestroy=be;bl.eventElementHandlers=bh;bl.showEvents=aU;bl.hideEvents=a6;bl.eventDrop=bp;bl.eventResize=ba;var bu=bl.defaultEventEnd;var bg=bm.normalizeEvent;var bq=bm.reportEventChange;var a4={};var aY={};var bt=[];var bc=bm.options;function a7(bz,bx){var by=bc[bz];if(av.isPlainObject(by)){return H(by,bx||aZ)}return by}function bf(bx,by){return bm.trigger.apply(bm,[bx,by||bl].concat(Array.prototype.slice.call(arguments,2),[bl]))}function aS(bx){var by=bx.source||{};return aK(bx.startEditable,by.startEditable,a7("eventStartEditable"),bx.editable,by.editable,a7("editable"))&&!a7("disableDragging")}function br(bx){var by=bx.source||{};return aK(bx.durationEditable,by.durationEditable,a7("eventDurationEditable"),bx.editable,by.editable,a7("editable"))&&!a7("disableResizing")}function bo(bz){a4={};var by,bx=bz.length,bA;for(by=0;by<bx;by++){bA=bz[by];if(a4[bA._id]){a4[bA._id].push(bA)}else{a4[bA._id]=[bA]}}}function aR(){a4={};aY={};bt=[]}function bs(bx){return bx.end?P(bx.end):bu(bx)}function a5(by,bx){bt.push({event:by,element:bx});if(aY[by._id]){aY[by._id].push(bx)}else{aY[by._id]=[bx]}}function be(){av.each(bt,function(bx,by){bl.trigger("eventDestroy",by.event,by.event,by.element)})}function bh(by,bx){bx.click(function(bz){if(!bx.hasClass("ui-draggable-dragging")&&!bx.hasClass("ui-resizable-resizing")){return bf("eventClick",this,by,bz)}}).hover(function(bz){bf("eventMouseover",this,by,bz)},function(bz){bf("eventMouseout",this,by,bz)})}function aU(by,bx){a3(by,bx,"show")}function a6(by,bx){a3(by,bx,"hide")}function a3(bA,bz,bC){var bB=aY[bA._id],by,bx=bB.length;for(by=0;by<bx;by++){if(!bz||bB[by][0]!=bz[0]){bB[by][bC]()}}}function bp(bA,by,bz,bB,bE,bD,bC){var bF=by.allDay;var bx=by._id;a8(a4[bx],bz,bB,bE);bf("eventDrop",bA,by,bz,bB,bE,function(){a8(a4[bx],-bz,-bB,bF);bq(bx)},bD,bC);bq(bx)}function ba(bD,bB,by,bx,bA,bC){var bz=bB._id;a0(a4[bz],by,bx);bf("eventResize",bD,bB,by,bx,function(){a0(a4[bz],-by,-bx);bq(bz)},bA,bC);bq(bz)}function a8(bB,bz,by,bC){by=by||0;for(var bD,bx=bB.length,bA=0;bA<bx;bA++){bD=bB[bA];if(bC!==w){bD.allDay=bC}k(aF(bD.start,bz,true),by);if(bD.end){bD.end=k(aF(bD.end,bz,true),by)}bg(bD,bc)}}function a0(bB,bz,by){by=by||0;for(var bC,bx=bB.length,bA=0;bA<bx;bA++){bC=bB[bA];bC.end=k(aF(bs(bC),bz,true),by);bg(bC,bc)}}bl.isHiddenDay=aW;bl.skipHiddenDays=aT;bl.getCellsPerWeek=bj;bl.dateToCell=bn;bl.dateToDayOffset=bb;bl.dayOffsetToCellOffset=aP;bl.cellOffsetToCell=a1;bl.cellToDate=aQ;bl.cellToCellOffset=aN;bl.cellOffsetToDayOffset=bd;bl.dayOffsetToDate=bw;bl.rangeToSegments=bi;var a9=a7("hiddenDays")||[];var aO=[];var bv;var aV=[];var aX=[];var bk=a7("isRTL");(function(){if(a7("weekends")===false){a9.push(0,6)}for(var by=0,bx=0;by<7;by++){aV[by]=bx;aO[by]=av.inArray(by,a9)!=-1;if(!aO[by]){aX[bx]=by;bx++}}bv=bx;if(!bv){throw"invalid hiddenDays"}})();function aW(bx){if(typeof bx=="object"){bx=bx.getDay()}return aO[bx]}function bj(){return bv}function aT(by,bz,bx){bz=bz||1;while(aO[(by.getDay()+(bx?bz:0)+7)%7]){aF(by,bz)}}function aQ(){var bz=aN.apply(null,arguments);var bx=bd(bz);var by=bw(bx);return by}function aN(bC,bA){var bz=bl.getColCnt();var by=bk?-1:1;var bx=bk?bz-1:0;if(typeof bC=="object"){bA=bC.col;bC=bC.row}var bB=bC*bz+(bA*by+bx);return bB}function bd(by){var bx=bl.visStart.getDay();by+=aV[bx];return Math.floor(by/bv)*7+aX[(by%bv+bv)%bv]-bx}function bw(bx){var by=P(bl.visStart);aF(by,bx);return by}function bn(bz){var by=bb(bz);var bA=aP(by);var bx=a1(bA);return bx}function bb(bx){return aC(bx,bl.visStart)}function aP(by){var bx=bl.visStart.getDay();by+=bx;return Math.floor(by/7)*bv+aV[(by%7+7)%7]-aV[bx]}function a1(bC){var bA=bl.getColCnt();var by=bk?-1:1;var bx=bk?bA-1:0;var bB=Math.floor(bC/bA);var bz=((bC%bA+bA)%bA)*by+bx;return{row:bB,col:bz}}function bi(by,bN){var bB=bl.getRowCnt();var bL=bl.getColCnt();var bM=[];var bP=bb(by);var bK=bb(bN);var bO=aP(bP);var bC=aP(bK)-1;for(var bD=0;bD<bB;bD++){var bz=bD*bL;var bH=bz+bL-1;var bI=Math.max(bO,bz);var bA=Math.min(bC,bH);if(bI<=bA){var bx=a1(bI);var bJ=a1(bA);var bG=[bx.col,bJ.col].sort();var bE=bd(bI)==bP;var bF=bd(bA)+1==bK;bM.push({row:bD,leftCol:bG[0],rightCol:bG[1],isStart:bE,isEnd:bF})}}return bM}}function Z(){var bu=this;bu.renderDayEvents=bB;bu.draggableDayEvent=a3;bu.resizableDayEvent=bo;var a8=bu.opt;var bl=bu.trigger;var aV=bu.isEventDraggable;var bx=bu.isEventResizable;var by=bu.eventEnd;var a6=bu.reportEventElement;var bn=bu.eventElementHandlers;var aY=bu.showEvents;var a7=bu.hideEvents;var bw=bu.eventDrop;var bc=bu.eventResize;var bC=bu.getRowCnt;var bt=bu.getColCnt;var ba=bu.getColWidth;var a2=bu.allDayRow;var bA=bu.colLeft;var a4=bu.colRight;var bs=bu.colContentLeft;var bq=bu.colContentRight;var bv=bu.dateToCell;var aW=bu.getDaySegmentContainer;var bb=bu.calendar.formatDates;var bm=bu.renderDayOverlay;var aZ=bu.clearOverlays;var aP=bu.clearSelection;var aU=bu.getHoverListener;var bp=bu.rangeToSegments;var aS=bu.cellToDate;var aO=bu.cellToCellOffset;var bj=bu.cellOffsetToDayOffset;var be=bu.dateToDayOffset;var aR=bu.dayOffsetToCellOffset;function bB(bF,bE){var bD=a1(bF,false,true);af(bD,function(bH,bG){a6(bH.event,bG)});a0(bD,bE);af(bD,function(bH,bG){bl("eventAfterRender",bH.event,bH.event,bG)})}function bf(bE,bH,bG){var bD=a1([bE],true,false);var bF=[];af(bD,function(bJ,bI){if(bJ.row===bH){bI.css("top",bG)}bF.push(bI[0])});return bF}function a1(bG,bK,bI){var bH=aW();var bF=bK?av("<div/>"):bH;var bD=a5(bG);var bE;var bJ;bz(bD);bE=bd(bD);bF[0].innerHTML=bE;bJ=bF.children();if(bK){bH.append(bJ)}aX(bD,bJ);af(bD,function(bM,bL){bM.hsides=j(bL,true)});af(bD,function(bM,bL){bL.width(Math.max(0,bM.outerWidth-bM.hsides))});af(bD,function(bM,bL){bM.outerHeight=bL.outerHeight(true)});aT(bD,bI);return bD}function a5(bF){var bD=[];for(var bE=0;bE<bF.length;bE++){var bG=bk(bF[bE]);bD.push.apply(bD,bG)}return bD}function bk(bG){var bD=bG.start;var bH=ap(bG);var bE=bp(bD,bH);for(var bF=0;bF<bE.length;bF++){bE[bF].event=bG}return bE}function bz(bE){var bH=a8("isRTL");for(var bG=0;bG<bE.length;bG++){var bI=bE[bG];var bJ=(bH?bI.isEnd:bI.isStart)?bs:bA;var bD=(bH?bI.isStart:bI.isEnd)?bq:a4;var bK=bJ(bI.leftCol);var bF=bD(bI.rightCol);bI.left=bK;bI.outerWidth=bF-bK}}function bd(bD){var bF="";for(var bE=0;bE<bD.length;bE++){bF+=a9(bD[bE])}return bF}function a9(bI){var bG="";var bF=a8("isRTL");var bH=bI.event;var bE=bH.url;var bJ=["fc-event","fc-event-hori"];if(aV(bH)){bJ.push("fc-event-draggable")}if(bI.isStart){bJ.push("fc-event-start")}if(bI.isEnd){bJ.push("fc-event-end")}bJ=bJ.concat(bH.className);if(bH.source){bJ=bJ.concat(bH.source.className||[])}var bD=S(bH,a8);if(bE){bG+="<a href='"+aI(bE)+"'"}else{bG+="<div"}bG+=" class='"+bJ.join(" ")+"' style='position:absolute;left:"+bI.left+"px;"+bD+"'><div class='fc-event-inner'>";if(!bH.allDay&&bI.isStart){bG+="<span class='fc-event-time'>"+aI(bb(bH.start,bH.end,a8("timeFormat")))+"</span>"}bG+="<span class='fc-event-title'>"+aI(bH.title||"")+"</span></div>";if(bI.isEnd&&bx(bH)){bG+="<div class='ui-resizable-handle ui-resizable-"+(bF?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"}bG+="</"+(bE?"a":"div")+">";return bG}function aX(bE,bJ){for(var bG=0;bG<bE.length;bG++){var bI=bE[bG];var bH=bI.event;var bF=bJ.eq(bG);var bD=bl("eventRender",bH,bH,bF);if(bD===false){bF.remove()}else{if(bD&&bD!==true){bD=av(bD).css({position:"absolute",left:bI.left});bF.replaceWith(bD);bF=bD}bI.element=bF}}}function aT(bF,bH){var bI=aN(bF);var bD=br();var bE=[];if(bH){for(var bG=0;bG<bD.length;bG++){bD[bG].height(bI[bG])}}for(var bG=0;bG<bD.length;bG++){bE.push(bD[bG].position().top)}af(bF,function(bK,bJ){bJ.css("top",bE[bK.row]+bK.top)})}function aN(bF){var bH=bC();var bM=bt();var bN=[];var bD=bi(bF);for(var bL=0;bL<bH;bL++){var bK=bD[bL];var bJ=[];for(var bI=0;bI<bM;bI++){bJ.push(0)}for(var bE=0;bE<bK.length;bE++){var bG=bK[bE];bG.top=au(bJ.slice(bG.leftCol,bG.rightCol+1));for(var bI=bG.leftCol;bI<=bG.rightCol;bI++){bJ[bI]=bG.top+bG.outerHeight}}bN.push(au(bJ))}return bN}function bi(bE){var bI=bC();var bH=[];var bD;var bG;var bF;for(bD=0;bD<bE.length;bD++){bG=bE[bD];bF=bG.row;if(bG.element){if(bH[bF]){bH[bF].push(bG)}else{bH[bF]=[bG]}}}for(bF=0;bF<bI;bF++){bH[bF]=aQ(bH[bF]||[])}return bH}function aQ(bE){var bG=[];var bD=bh(bE);for(var bF=0;bF<bD.length;bF++){bG.push.apply(bG,bD[bF])}return bG}function bh(bF){bF.sort(ax);var bE=[];for(var bG=0;bG<bF.length;bG++){var bH=bF[bG];for(var bD=0;bD<bE.length;bD++){if(!b(bH,bE[bD])){break}}if(bE[bD]){bE[bD].push(bH)}else{bE[bD]=[bH]}}return bE}function br(){var bD;var bF=bC();var bE=[];for(bD=0;bD<bF;bD++){bE[bD]=a2(bD).find("div.fc-day-content > div")}return bE}function a0(bE,bD){var bF=aW();af(bE,function(bJ,bH,bG){var bI=bJ.event;if(bI._id===bD){bg(bI,bH,bJ)}else{bH[0]._fci=bG}});v(bF,bE,bg)}function bg(bF,bD,bE){if(aV(bF)){bu.draggableDayEvent(bF,bD,bE)}if(bE.isEnd&&bx(bF)){bu.resizableDayEvent(bF,bD,bE)}bn(bF,bD)}function a3(bG,bF){var bE=aU();var bD;bF.draggable({delay:50,opacity:a8("dragOpacity"),revertDuration:a8("dragRevertDuration"),start:function(bH,bI){bl("eventDragStart",bF,bG,bH,bI);a7(bG,bF);bE.start(function(bK,bJ,bN,bO){bF.draggable("option","revert",!bK||!bN&&!bO);aZ();if(bK){var bM=aS(bJ);var bL=aS(bK);bD=aC(bL,bM);bm(aF(P(bG.start),bD),aF(ap(bG),bD))}else{bD=0}},bH,"drag")},stop:function(bH,bI){bE.stop();aZ();bl("eventDragStop",bF,bG,bH,bI);if(bD){bw(this,bG,bD,0,bG.allDay,bH,bI)}else{bF.css("filter","");aY(bG,bF)}}})}function bo(bG,bE,bF){var bD=a8("isRTL");var bI=bD?"w":"e";var bH=bE.find(".ui-resizable-"+bI);var bJ=false;aM(bE);bE.mousedown(function(bK){bK.preventDefault()}).click(function(bK){if(bJ){bK.preventDefault();bK.stopImmediatePropagation()}});bH.mousedown(function(bS){if(bS.which!=1){return}bJ=true;var bM=aU();var bQ=bC();var bT=bt();var bL=bE.css("top");var bO;var bK;var bR=av.extend({},bG);var bN=aR(be(bG.start));aP();av("body").css("cursor",bI+"-resize").one("mouseup",bP);bl("eventResizeStart",this,bG,bS);bM.start(function(bV,bU){if(bV){var bY=aO(bU);var bX=aO(bV);bX=Math.max(bX,bN);bO=bj(bX)-bj(bY);if(bO){bR.end=aF(by(bG),bO,true);var bW=bK;bK=bf(bR,bF.row,bL);bK=av(bK);bK.find("*").css("cursor",bI+"-resize");if(bW){bW.remove()}a7(bG)}else{if(bK){aY(bG);bK.remove();bK=null}}aZ();bm(bG.start,aF(ap(bG),bO))}},bS);function bP(bU){bl("eventResizeStop",this,bG,bU);av("body").css("cursor","");bM.stop();aZ();if(bO){bc(this,bG,bO,0,bU)}setTimeout(function(){bJ=false},0)}})}}function b(aO,aQ){for(var aN=0;aN<aQ.length;aN++){var aP=aQ[aN];if(aP.leftCol<=aO.rightCol&&aP.rightCol>=aO.leftCol){return true}}return false}function af(aN,aR){for(var aP=0;aP<aN.length;aP++){var aQ=aN[aP];var aO=aQ.element;if(aO){aR(aQ,aO,aP)}}}function ax(aO,aN){return(aN.rightCol-aN.leftCol)-(aO.rightCol-aO.leftCol)||aN.event.allDay-aO.event.allDay||aO.event.start-aN.event.start||(aO.event.title||"").localeCompare(aN.event.title)}function ao(){var aX=this;aX.select=aV;aX.unselect=aR;aX.reportSelection=aN;aX.daySelectionMousedown=aU;var aP=aX.opt;var aQ=aX.trigger;var aS=aX.defaultSelectionEnd;var aO=aX.renderSelection;var aW=aX.clearSelection;var aT=false;if(aP("selectable")&&aP("unselectAuto")){av(document).mousedown(function(aY){var aZ=aP("unselectCancel");if(aZ){if(av(aY.target).parents(aZ).length){return}}aR(aY)})}function aV(aY,a0,aZ){aR();if(!a0){a0=aS(aY,aZ)}aO(aY,a0,aZ);aN(aY,a0,aZ)}function aR(aY){if(aT){aT=false;aW();aQ("unselect",null,aY)}}function aN(aY,a1,a0,aZ){aT=true;aQ("select",null,aY,a1,a0,aZ)}function aU(a2){var a0=aX.cellToDate;var aZ=aX.getIsCellAllDay;var aY=aX.getHoverListener();var a3=aX.reportDayClick;if(a2.which==1&&aP("selectable")){aR(a2);var a1=this;var a4;aY.start(function(a6,a5){aW();if(a6&&aZ(a6)){a4=[a0(a5),a0(a6)].sort(a);aO(a4[0],a4[1],true)}else{a4=null}},a2);av(document).one("mouseup",function(a5){aY.stop();if(a4){if(+a4[0]==+a4[1]){a3(a4[0],true,a5)}aN(a4[0],a4[1],true,a5)}})}}}function d(){var aQ=this;aQ.renderOverlay=aO;aQ.clearOverlays=aN;var aP=[];var aR=[];function aO(aT,aS){var aU=aR.shift();if(!aU){aU=av("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")}if(aU[0].parentNode!=aS[0]){aU.appendTo(aS)}aP.push(aU.css(aT).show());return aU}function aN(){var aS;while(aS=aP.shift()){aR.push(aS.hide().unbind())}}}function Q(aN){var aO=this;var aP;var aQ;aO.build=function(){aP=[];aQ=[];aN(aP,aQ)};aO.cell=function(aR,aX){var aW=aP.length;var aS=aQ.length;var aT,aU=-1,aV=-1;for(aT=0;aT<aW;aT++){if(aX>=aP[aT][0]&&aX<aP[aT][1]){aU=aT;break}}for(aT=0;aT<aS;aT++){if(aR>=aQ[aT][0]&&aR<aQ[aT][1]){aV=aT;break}}return(aU>=0&&aV>=0)?{row:aU,col:aV}:null};aO.rect=function(aU,aW,aS,aT,aV){var aR=aV.offset();return{top:aP[aU][0]-aR.top,left:aQ[aW][0]-aR.left,width:aQ[aT][1]-aQ[aW][0],height:aP[aS][1]-aP[aU][0]}}}function aq(aS){var aQ=this;var aR;var aT;var aO;var aN;aQ.start=function(aU,aV,aW){aT=aU;aO=aN=null;aS.build();aP(aV);aR=aW||"mousemove";av(document).bind(aR,aP)};function aP(aU){F(aU);var aV=aS.cell(aU.pageX,aU.pageY);if(!aV!=!aN||aV&&(aV.row!=aN.row||aV.col!=aN.col)){if(aV){if(!aO){aO=aV}aT(aV,aO,aV.row-aO.row,aV.col-aO.col)}else{aT(aV,aO)}aN=aV}}aQ.stop=function(){av(document).unbind(aR,aP);return aN}}function F(aN){if(aN.pageX===w){aN.pageX=aN.originalEvent.pageX;aN.pageY=aN.originalEvent.pageY}}function n(aO){var aN=this,aP={},aS={},aR={};function aQ(aT){return aP[aT]=aP[aT]||aO(aT)}aN.left=function(aT){return aS[aT]=aS[aT]===w?aQ(aT).position().left:aS[aT]};aN.right=function(aT){return aR[aT]=aR[aT]===w?aN.left(aT)+aQ(aT).width():aR[aT]};aN.clear=function(){aP={};aS={};aR={}}}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-data-cache.js' */
define("tc/calendar-cache",["jquery"],function(a){function b(){var c=[];function d(k,h){var f=false;for(var g=0;g<h.length;g++){for(var e=0;e<c[k].data.length;e++){if(h[g].id===c[k].data[e].id){f=true;break}}if(!f){c[k].data.push(h[g])}f=false}}return{hasCalendar:function(e){return c[e]},getCalendarStart:function(e){if(c[e]){return c[e].start}return null},getCalendarEnd:function(e){if(c[e]){return c[e].end}return null},addDataToCalendar:function(f,g,h,e){if(!c[f]){c[f]={data:g}}else{d(f,g)}if(!c[f].start||h.getTime()<c[f].start.getTime()){c[f].start=h}if(!c[f].end||e.getTime()>c[f].end.getTime()){c[f].end=e}},removeCalendar:function(f){if(a.isArray(f)){var e=this;a.each(f,function(h,g){if(a.isPlainObject(g)&&g.id&&typeof g.id==="string"){e.removeCalendar(g.id)}else{e.removeCalendar(g.toString())}})}else{delete c[f]}},removeAllCalendars:function(){c=[]},getCalendarData:function(e){if(!c[e]){return null}return c[e].data}}}return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-remove-dialog/calendar-remove-dialog.js' */
define("tc/calendar-remove-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util","tc/util"],function(e,a,g,d,c,f){var b=g.View.extend({removeSubCalendarDialog:null,calendarDiv:null,subCalendar:null,calendarPlugin:null,initialize:function(h){this.calendarDiv=h.calendarDiv;this.subCalendar=h.subCalendar;this.calendarPlugin=h.calendarPlugin;this.removeSubCalendarDialog=e("#remove-calendar-dialog")},render:function(){var k=this;var h;var i=AJS.Meta.get("space-key")!==undefined||e("meta[name='ajs-page-id']").length>=1;if(this.removeSubCalendarDialog){this.removeSubCalendarDialog.remove()}h=230;this.removeSubCalendarDialog=new AJS.Dialog({width:512,height:h,id:"remove-calendar-dialog"});this.removeSubCalendarDialog.addHeader("Remove Calendar","subcalendar-remove-header calendar-dialog-panel");this.removeSubCalendarDialog.addPanel("subcalendar-remove-calendar",d.removeSubCalendar({inSpace:i}),"remove-subcalendar-form");var j=e(".calendar-to-remove",this.removeSubCalendarDialog.getPanel());j.attr("title",this.subCalendar.name);j.text(this.subCalendar.name);this.removeSubCalendarDialog.addButton("OK",function(){if(e("#deletecalendaroption:checked",k.removeSubCalendarDialog.getPanel()).length){k.calendarPlugin.deleteSubCalendar(k.calendarDiv,k.subCalendar)}else{k.calendarPlugin.unsubscribeFromSubcalendar(k.calendarDiv,k.subCalendar)}k.removeSubCalendarDialog.hide()});this.removeSubCalendarDialog.addLink("Cancel",function(){k.removeSubCalendarDialog.hide()});this.removeSubCalendarDialog.show()}});return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-feature-discovery-dialog/calendar-feature-discovery-dialog.js' */
define("tc/calendar-feature-discovery-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/dialogs","tc/calendar-util","tc/util"],function(f,a,h,d,c,b,g){var e=h.View.extend({featureDiscoveryDialog:null,calendarDiv:null,subCalendar:null,calendarPlugin:null,initialize:function(i){this.calendarDiv=i.calendarDiv;this.subCalendar=i.subCalendar;this.calendarPlugin=i.calendarPlugin;this.featureDiscoveryDialog=f("#team-calendars-feature-discovery-dialog")},render:function(){var k=this;if(this.featureDiscoveryDialog){this.featureDiscoveryDialog.remove()}var i=385,l=new AJS.Dialog({width:596,height:i,id:"team-calendars-feature-discovery-dialog"});l.addHeader("Congratulations, you have created a new Calendar!");l.addPanel("",d.subCalendarFeatures({autoConvertSupported:b.getParameter(this.calendarDiv,"autoConvertSupported")==="true",subCalendar:this.subCalendar}),"setup-calendar-panel");var j=l.getCurrentPanel().body;f(".add-event",j).click(function(){l.remove();var m=c.getEditEventDialog({start:new Date(),localizedStartTime:k.calendarPlugin.getDefaultStartTime(k.calendarDiv),localizedEndTime:k.calendarPlugin.getDefaultEndTime(k.calendarDiv),allDay:(k.calendarDiv.data(k.calendarPlugin.PREF_LAST_ALL_DAY_USED)||"true")==="true",subCalendarId:k.subCalendar.id},k.subCalendar,k.calendarPlugin,k.calendarDiv);m.show();return false});f(".restrict",j).click(function(){l.remove();k.calendarPlugin.getSubCalendarRestrictionsDialog(k.calendarDiv,k.subCalendar).show();return false});f(".embed, .embed-or-share, .share",j).click(function(){l.remove();var m=k.calendarPlugin.getSubCalendarShareDialog(k.calendarDiv,k.subCalendar);m.show();f(".share-address-field",m.getCurrentPanel().body).focus().select();return false});l.addLink("Close",function(){l.remove()});l.show()}});return e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-subcalendar-subscribe-dialog.js' */
define("tc/calendar-subcalendar-subscribe-dialog",["jquery","underscore","tc-backbone","tc/templates","tc/calendar-util","tc/util","tc/infinite-list"],function(e,a,h,c,b,f,g){var d=h.View.extend({subCalendarSubscibeDialog:null,callbackHandler:null,options:null,initialize:function(i){this.options=i;this.callbackHandler=i.callbackHandler;this.subCalendarSubscibeDialog=e(this.options.id!==undefined?this.options.id:"internal-subscription-calendar-dialog")},render:function(){var p=this;if(this.subCalendarSubscibeDialog){this.subCalendarSubscibeDialog.remove()}var k=function(G,I,F,K,E,J){var H=e(".results",G.getCurrentPanel().body);e.ajax({cache:false,converters:{"text json":function(L){return L}},data:I,dataFilter:function(L){var M=e.parseJSON(L);if(M.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(M.payload)}return M.payload},dataType:"json",error:function(N,L,M){if(K){K(I,H)}},success:function(M){if(!J){H.empty()}if(M&&M.length){var L=e(c.calendarSearchResultTable()),N=J?e("tbody",e(H)):e("tbody",L),O=function(P){N.append(e(c.calendarSearchResult({name:P.name,description:P.description||"",relatedSpace:P.spaceName||"",numSubscribers:P.subscriberCount})).click(function(){var Q=e(this),R=Q.hasClass("active");if(R){Q.removeClass("active");e(".subcalendar-select",Q).removeAttr("checked")}else{Q.addClass("active");e(".subcalendar-select",Q).attr("checked","checked")}var S=true,T=e("tr.active",N);T.each(function(){if(e(this).data("subCalendar").watchable){S=false;return false}});if(T.length){D();o()}else{w();i()}if(!T.length||S){i()}else{if(!S&&!R){o()}}}).data("subCalendar",P))};e.each(M,function(Q,P){if(Confluence.TeamCalendars.isDummySubscriptionParentSubCalendar(P)){e.each(P.childSubCalendars||[],function(R,S){O(S)})}else{O(P)}});if(!J){H.append(L)}e(".ellipsedColumn",L).each(function(){var Q=e(this);var P=Q.text();Q.attr("title",P).addClass("relative").ThreeDots({max_rows:1}).removeClass("relative")});if(E){E(M)}}else{if(K){K(I,H)}}},timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl(F)})};var v=(function(){var I=p.options.id!==undefined?p.options.id:"internal-subscription-calendar-dialog";var F=new AJS.Dialog({width:800,height:400,id:I});F.addHeader("Add Existing Team Calendar");F.addPanel("",c.subscribeDialog(),"subscribe-to-subcalendars-panel");var G=F.getCurrentPanel().body;e("#subscribe-intro",G).append("Here\'s a list of popular calendars you might also like, or you can \u003cspan class=\"show-search\"\u003e\u003ca  href=\"#\"\u003esearch for other calendars\u003c/a\u003e\u003c/span\u003e. If you don\'t see what you\'re looking for, \u003ca class=\"create-your-subcalendar\" href=\"#\"\u003ecreate a calendar\u003c/a\u003e of your own.");e(".create-your-subcalendar",G).click(function(){F.remove();var L=Confluence.TeamCalendars.Dialogs.getSubCalendarCreateDialog("parent",p.callbackHandler);f.showDialogInUpdatedHeight(L);e("input[name='name']",L.getCurrentPanel().body).focus();return false});var K=e(".search",G);e(".form",K).submit(function(){return false});var E;e("textarea[name='query']",K).text("Search").addClass("blank-search").keydown(function(L){if(L.keyCode===13){return false}var N=e(this),M=N.hasClass("blank-search")?N.removeClass("blank-search").val("").val():N.val();if(E!==undefined){clearTimeout(E)}E=setTimeout(function(){var P=N.val();if(!N.hasClass("blank-search")&&P&&P!==M){var O=AJS.Meta.get("space-key")!==undefined||e("meta[name='ajs-page-id']").length>=1;K.addClass("searching");k(F,e.extend({term:P,startIndex:0,pageSize:10,showSubscriberCount:true,showSubCalendarsInView:O},p.options.searchParams||{}),"/search/subcalendars.json",function(R,Q){K.removeClass("searching");w();i();Q.empty().append(e(document.createElement("span")).addClass("no-subcalendars-found").text(AJS.format("No results found for {0}",R.term)))},function(){K.removeClass("searching");D();r()})}},500)}).blur(function(){var L=e(this);if(!e.trim(L.val())){L.addClass("blank-search").val("Search")}});if(F.addHelpText&&e.isFunction(F.addHelpText)){F.addHelpText(e(document.createElement("span")).addClass("show-popular").html("You can also browse \u003ca href=\"#\"\u003epopular calendars\u003c/a\u003e."));e("span.show-popular a",F.getCurrentPanel().page.buttonpanel).unbind("click").click(function(){F.remove();Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog({callbackHandler:p.callbackHandler,heading:"Popular Team Calendars"}).show();return false});F.addHelpText(e(document.createElement("span")).addClass("show-search").html("You can also \u003ca href=\"#\"\u003esearch for calendars\u003c/a\u003e."));var J=function(){F.remove();Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog(e.extend(e.extend({},p.options),{callbackHandler:p.callbackHandler,heading:"Add Existing Team Calendar",showSearch:true})).show();return false};e("#"+F.id).find("span.show-search a").unbind("click").click(J)}var H=e(".dialog-button-panel",F.popup.element);if(!p.options.disableWatching){e(document.createElement("input")).attr({type:"checkbox",name:"watch"}).addClass("watch-selected-subcalendars").appendTo(H);e(document.createElement("span")).addClass("watch-select-subcalendars-label").text("Watch selected calendars").appendTo(H)}e("<span class='spinner hidden aui-icon aui-icon-wait'>Loading...</span>").appendTo(H);F.addButton("Add",function(){var M=e("tr.active",G);if(M.length&&!p.callbackHandler.isProcessingSubCalendar()){p.callbackHandler.setProcessingSubCalendar(true);var L=p.callbackHandler.setSubCalendarSpinnerIconVisible();w();i();l();e.ajax({cache:false,converters:{"text json":function(N){return N}},data:(function(){var N={color:p.callbackHandler.getNextCalendarColor(),watchSubCalendars:e(".watch-selected-subcalendars",F.popup.element).is(":checked")};var O=[];M.each(function(){O.push(e(this).data("subCalendar").id)});N.subCalendarIds=O;if(p.callbackHandler.getIncludedCalendars()){N.include=p.callbackHandler.getIncludedCalendars()}b.putCalendarContextParams(N);return N})(),dataFilter:function(N){var O=e.parseJSON(N);if(O.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(O.payload)}return O},dataType:"json",error:function(N,P,O){Confluence.TeamCalendars.showAjaxError(G,N,P,O,"error-subcalendar-refresh");p.callbackHandler.setProcessingSubCalendar(false);D();o();n()},success:function(N){if(!N.success){b.setGenericErrors(G,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.","error-subcalendar-refresh");return}p.callbackHandler.setSubCalendars(AJS.$.map(M,function(O){return e(O).data("subCalendar").id}).toString(),N.payload);p.callbackHandler.updateAvailableSubCalendarsInSubCalendarPanel();b.setGenericErrors(G,null,"error-subcalendar-refresh");F.remove();p.callbackHandler.setProcessingSubCalendar(false)},complete:function(){if(L){L.resolve()}},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars/subscribe.json")})}else{F.remove()}},"subscribe-to-subcalendar-button");F.addLink("Cancel",function(){F.remove();return false});return F})();var B=function(){var E=A.showSearch?e(".subscribe-to-subcalendars-panel.search .spinner"):e(".subscribe-to-subcalendars-panel.popular .spinner");e(E).css("display","none")};var s=function(){var E=A.showSearch?e(".subscribe-to-subcalendars-panel.search .spinner"):e(".subscribe-to-subcalendars-panel.popular .spinner");e(E).css("display","inline-block")};var y=function(){B();t.destroy()};var q=function(F,E){s();k(v,e.extend({startIndex:F,pageSize:E},p.options.searchParams||{}),"/search/subcalendars/popular",y,function(){B()},true)};var z=function(G,F){var E=e("textarea[name='query']",e(".subscribe-to-subcalendars-panel.search")).val();s();k(v,e.extend({startIndex:G,pageSize:F,term:E,showSubscriberCount:true,showSubCalendarsInView:e("meta[name='ajs-page-id']").length>=1},p.options.searchParams||{}),"/search/subcalendars.json",y,function(){B()},true)};var t=null;function r(){if(t){t.destroy()}t=g.init({$el:e(".tc-subscription-result"),load:A.showSearch?z:q,$container:e(".subscribe-to-subcalendars-panel .tc-table-content"),body:e(".subscribe-to-subcalendars-panel .tc-subscription-result")[0],scrollMargin:30,isLoadMoreItems:A.showSearch?true:false})}var C=v.getCurrentPanel();var m=C.body;var w=function(){e(".subscribe-to-subcalendar-button","#internal-subscription-calendar-dialog").attr("disabled","disabled").addClass("ui-state-disabled")};var D=function(){e(".subscribe-to-subcalendar-button","#internal-subscription-calendar-dialog").removeAttr("disabled","disabled").removeClass("ui-state-disabled")};var i=function(){e(".watch-selected-subcalendars","#internal-subscription-calendar-dialog").disable()};var o=function(){e(".watch-selected-subcalendars","#internal-subscription-calendar-dialog").enable()};var l=function(){e(".spinner","#internal-subscription-calendar-dialog").removeClass("hidden")};var n=function(){e(".spinner","#internal-subscription-calendar-dialog").addClass("hidden")};var A=e.extend({heading:"Add Existing Team Calendar"},this.options);var u=C.page.header;u.empty().text(A.heading);if(A.showSearch){u.removeClass("welcome-heading-with-logo")}else{u.addClass("welcome-heading-with-logo")}if(A.showSearch){m.removeClass("popular").addClass("search")}else{m.removeClass("search").addClass("popular")}e(".results",m).empty();e(".mode",m).removeClass().addClass("mode"+(A.showSearch?"":" new-user"));var j=e(".watch-selected-subcalendars");i();if(p.callbackHandler.isAutoWatchSet()){j.attr("checked","checked")}else{j.removeAttr("checked")}w();i();if(A.showSearch){if(Confluence.TeamCalendars.isCalendarSearchDisabled){e("#tc-subscribe-no-search-warning",m).removeClass("hidden");e(".search",m).addClass("hidden");k(v,{},"/search/subcalendars/all",n,function(){e("#tc-subscribe-no-search-warning .spinner",m).addClass("hidden")})}e("input[name='query']",m).val("");e(".dialog-tip .show-popular",C.page.buttonpanel).removeClass("hidden");e(".dialog-tip .show-search",C.page.buttonpanel).addClass("hidden")}else{var x=e(".preamble",m).addClass("loading");var n=function(){x.removeClass("loading")};k(v,e.extend({startIndex:0,pageSize:10},p.options.searchParams||{}),"/search/subcalendars/popular",n,function(){n();r()});e(".dialog-tip .show-popular",C.page.buttonpanel).addClass("hidden");e(".dialog-tip .show-search",C.page.buttonpanel).removeClass("hidden")}p.subCalendarSubscibeDialog=v;v.show();return v}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-subcalendar-subscribe-dialog-compat.js' */
require(["tc/calendar-subcalendar-subscribe-dialog"],function(a){if(!Confluence.TeamCalendars.Dialogs){Confluence.TeamCalendars.Dialogs={}}Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog=function(b){return new a(b).render()}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/add-from-macro-dialog.js' */
(function(a){Confluence.TeamCalendars.Dialogs.getAddDialogForMacro=function(d){var b=d.params?d.params.id:"";var c={isProcessingSubCalendar:function(){return false},setProcessingSubCalendar:function(e){},setSubCalendarSpinnerIconVisible:function(e){},getIncludedCalendars:function(){return b?b.split(","):[]},showAjaxUpdateError:function(e,g,f){Confluence.TeamCalendars.showAjaxError(a("#editor-messages"),e,g,f,"error-subcalendar-update")},showAjaxError:function(f,h,g,e){Confluence.TeamCalendars.showAjaxError(a("#editor-messages"),f,h,g,e)},setGenericErrors:function(f,e){Confluence.TeamCalendars.setGenericErrors(a("#editor-messages"),null,e)},setGenericUpdateError:function(){Confluence.TeamCalendars.setGenericErrors(a("#editor-messages"),null,"error-subcalendar-update")},setSubCalendars:function(e){if(!b){Confluence.TeamCalendars.fireEventForAnalytics("subcalendar.parent.embedded")}var f=e+(b?","+b:"");d.params=a.extend(d.params,{id:f});d.body="";var g=tinymce.confluence.MacroUtils.insertMacro({macro:d,contentId:Confluence.Editor.getContentId()});if(AJS.Rte!=null){AJS.Rte.BookmarkManager.restoreBookmark();a.when(g).done(function(h){if(h){var i=new Confluence.TeamCalendars.HelpTip({body:"\u003ch3\u003eCalendar added, what next?\u003c/h3\u003e \u003cp\u003eEmbed additional calendars, or modify the look of them, by pressing \u003cstrong\u003e\'Edit\'\u003c/strong\u003e when selecting this.\u003c/p\u003e\u003cp\u003eWhen you are ready, save your page to start adding events!\u003c/p\u003e",anchor:a(h),id:"first-calendar-help-tip"});i.show()}})}},setParameter:function(e,f){},getParameter:function(e){},reloadSubCalendar:function(e){},getSubCalendars:function(){return d.params},updateAvailableSubCalendarsInSubCalendarPanel:function(){},getNextCalendarColor:function(){return""},isAutoWatchSet:function(){return false},refreshCachedSubCalendars:function(f,e){},handleImport:function(e){this.setSubCalendars(e)},isCalendarInEditMode:function(){return true},suppressMessage:function(f,e){Confluence.TeamCalendars.suppressMessage(a("#editor-messages"),f,e)},showCalendarWizard:function(){Confluence.TeamCalendars.Dialogs.getAddDialog(c)},getSubCalendarsWhichCanAddEvents:function(){return[]}};if(Confluence.TeamCalendars.shouldShowTimezoneSetup()){Confluence.TeamCalendars.Dialogs.getTimeZoneSetupDialog(c).show()}else{if(AJS.Rte!=null){AJS.Rte.BookmarkManager.storeBookmark()}Confluence.TeamCalendars.Dialogs.getAddDialog(c,{title:"Insert Calendar"})}}}(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-edit-dialog.js' */
(function(a){Confluence.TeamCalendars.getEditCalendarDialogHelper=function(d,c,b){var h,g=a(".form-mode",d),f=a("input[name='spaceKey']",d),e=a("input[name='spaceKeyAutocomplete']",d);return{initSpaceDropDown:function(){e.keypress(function(i){if(i.which!==13){f.val(i.which)}});e.bind("selected.autocomplete-content",function(j,i){f.val(i.content.key);a(this).val(i.content.name);a(".spaceKeyAutocomplete-error",d).empty()})},initTimeZoneSelect:function(){a("select[name='timeZoneIdSelect']",d).change(function(){a("input[name='timeZoneId']",d).val(a("option:selected",this).val())})},initCloseButton:function(i,j){i.addLink("Cancel",function(){if(typeof j==="function"){j()}i.remove();return false})},initOkButton:function(i,j){j.addButton(i,function(){d.submit();return false},"submit");h=j.popup.element.find(".submit")},populateTimeZoneDropDown:function(j){var k=c?c.timeZoneId:Confluence.TeamCalendars.getUserTimeZone();var i=a("#timeZoneIdSelect",j.body);h.disable();Confluence.TeamCalendars.populateTimeZoneDropDown(i,k,function(){h.enable();i.addClass("ready")},function(l,n,m){b.showAjaxError(l,n,m)})},disableOkButton:function(i){h.text(i).attr("disabled","disabled").addClass("ui-state-disabled")},enableOkButton:function(i){h.text(i).removeAttr("disabled").removeClass("ui-state-disabled")},isNewCalendar:function(){return c?false:true},resetFieldErrors:function(){Confluence.TeamCalendars.setFieldErrors(d,null)},setFormModeEdit:function(){g.removeClass().addClass("form-mode edit")},setFormModeCreate:function(){g.removeClass().addClass("form-mode create")},setFormModeReadOnly:function(){g.removeClass().addClass("form-mode read-only")},setHeading:function(j,i){return i.getCurrentPanel().page.header.empty().text(j).addClass("calendar-heading")},setSubCalendarIdField:function(i){a("input[name='subCalendarId']",d).val(i)},setNameField:function(i){a("input[name='name']",d).val(i)},setDescriptionField:function(i){a("textarea[name='description']",d).val(i)},setColorField:function(i){a("input[name='color']",d).val(i)},setSpaceKeyField:function(i){f.val(i)},setSpaceKeyAutocompleteField:function(i){e.val(i)},setTimeZoneIdField:function(i){a("input[name='timeZoneId']",d).val(i)},setTimeZoneIdDisplayField:function(i){a(".timeZoneIdDisplay",d).text(i)},setSubscriptionIdField:function(i){a("input[name='subscriptionId']",d).val(i)},setLocationField:function(i){a("input[name='location']",d).val(i)},setUserNameField:function(i){a("input[name='username']",d).val(i)},setSpaceToDefault:function(){f.val(AJS.Meta.get("space-key")||"");e.val(AJS.Meta.get("space-name")||"")}}};Confluence.TeamCalendars.Dialogs.getSubCalendarCreateDialog=function(e,d){var i=require("tc/util"),c=(typeof e==="string")?e:e.type,f,h=Confluence.TeamCalendars.subcalendar[c],g=new AJS.ConfluenceDialog({width:h.dialogWidth||521,height:"auto",onSubmit:function(){f.submit();return false},id:"create-calendar-dialog"}),b=h.getDialog(g,a.isPlainObject(e)?e:null,d);g.popup.element.css("overflow","visible");f=b.initializeForm();f.submit(function(){if(d.isProcessingSubCalendar()){return false}d.setProcessingSubCalendar(true);var k=d.setSubCalendarSpinnerIconVisible(true);b.onSubmitStart();var j=b.getFormDataAsAjaxData();if(d.getIncludedCalendars()){j.include=d.getIncludedCalendars()}var l=j.subCalendarId;a.ajax({cache:false,converters:{"text json":function(m){return m}},data:j,dataFilter:function(m){var n=a.parseJSON(m);if(n.success){Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(n.payload)}return n},dataType:"json",error:function(m,o,n){d.showAjaxUpdateError(m,o,n);b.onSubmitEnd();d.setProcessingSubCalendar(false)},success:function(n){d.setGenericUpdateError();if(n.success){Confluence.TeamCalendars.setFieldErrors(f,null);var m=l;if(m){d.setSubCalendars(l,n.payload);d.reloadSubCalendar(l)}else{l=n.modifiedSubCalendarId;a("input[name='subCalendarId']",f).val(l);d.setSubCalendars(l,n.payload)}d.updateAvailableSubCalendarsInSubCalendarPanel();b.onSubmitEnd();g.remove();if(!m){Confluence.TeamCalendars.CalendarTour().start(l)}}else{Confluence.TeamCalendars.setFieldErrors(f,n.fieldErrors);b.onSubmitEnd();if(!h.dynamicDialogHeight){i.showDialogInUpdatedHeight(g)}}d.setProcessingSubCalendar(false)},complete:function(){if(k){k.resolve()}},type:"PUT",timeout:Confluence.TeamCalendars.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars.json")});return false});return g}}(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/calendar-plugin.js' */
define("tc/calendar-plugin",["jquery","underscore","ajs","tc/calendar-cache","tc/util","tc/calendar-util","tc/manage-event","tc/manage-i18n-text","tc/full-calendar-option","tc/subcalendar-panel","tc/auto-complete-search-helper","tc/calendar-remove-dialog","tc/calendar-feature-discovery-dialog","tc/calendar-share-dialog","tc/calendar-restriction-dialog","tc/myCalendarTour","tc/subcalendar-navigation-buttons-view","tc/subcalendar-restriction-button-view","tc/load-favicon"],function(f,u,k,n,h,l,i,t,p,g,s,j,e,d,a,r,c,b,m){var o=new n();var q={spinnerDeferTasks:[],ajaxTimeout:Confluence.TeamCalendars.ajaxTimeout,i18nMessages:null,dialogSequence:0,ERROR_CLASS_EVENT_UPDATE:"error-event-update",ERROR_CLASS_EVENT_DELETE:"error-event-delete",ERROR_CLASS_SUB_CALENDAR_LIST:"error-subcalendar-refresh",ERROR_CLASS_SUB_CALENDAR_DELETE:"error-subcalendar-delete",ERROR_CLASS_SUB_CALENDAR_UPDATE:"error-subcalendar-update",ERROR_CLASS_SUB_CALENDAR_WATCH:"error-subcalendar-watch",ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS:"error-subcalendar-list-events-",ERROR_CLASS_SUB_CALENDAR_TOGGLE_EVENTS:"error-subcalendar-toggle-events-",ERROR_CLASS_CONFIG_UPDATE:"error-config-update",ERROR_CLASS_PRIVATE_URL:"error-private-url",ERROR_CLASS_RESET_PRIVATE_URLS:"error-reset-private-urls",PREF_LAST_ALL_DAY_USED:"pref-all-day-event-default",init:function(w){var v=new p(q,w,o);if(q.getParameter(w,"width")){w.parent().css("width",q.getParameter(w,"width")+"px")}if(q.getParameter(w,"height")){v.height=parseInt(q.getParameter(w,"height"))}else{v.aspectRatio=1.9}if(q.getParameter(w,"displayWeekNumber")){v.weekNumbers=(q.getParameter(w,"displayWeekNumber")==="true")}this.getCalendarPanel(w).fullCalendar(v);this.initCalendarDiv(w)},getEventTypeNames:function(v){return t(this.i18nMessages).getEventTypeNames(v)},getMonthNames:function(){return t(this.i18nMessages).getMonthNames()},getMonthNamesShort:function(){return t(this.i18nMessages).getMonthNamesShort()},getDayNames:function(){return t(this.i18nMessages).getDayNames()},getDayNamesShort:function(){return t(this.i18nMessages).getDayNamesShort()},hideInlineAuiDialogs:function(){f("body").trigger("click")},isEventToolTipSuppressed:function(v){return v.data("shouldSuppressEventToolTip")},setSuppressEventToolTip:function(w,v){w.data("shouldSuppressEventToolTip",v)},setEventTooltipVisible:function(y,x,v,z){if(z&&(this.isEventEditable(y,x)||x.workingUrl)){var w=f("body > .event-tooltip").length?f("body > .event-tooltip"):f("<div/>",{"class":"event-tooltip"}).appendTo(f("body"));f("p",w).remove();if(this.isEventEditable(y,x)){w.append(f("<p/>",{text:"Hold shift then click to bring up the edit dialog"}))}if(x.workingUrl){w.append(f("<p/>",{"class":"follow-hint",text:k.format("Control/Command + click to go to {0}",x.workingUrl)}))}w.css({left:v.pageX+"px",top:(v.pageY+5)+"px"}).show()}else{f("body > .event-tooltip").hide()}},getParameter:function(w,v){return l.getParameter(w,v)},getParameters:function(v){return l.getParameters(v)},setParameter:function(x,v,w){l.setParameter(x,v,w)},getCalendarPanel:function(v){return f(".calendar-panel .calendar",v)},getTimelineHeight:function(v){return q.getParameter(v,"timelineHeight")},getMaxMonthToDisplayTimelineCalendar:function(v){return q.getParameter(v,"maxMonthToDisplayTimelineCalendar")},getDefaultStartTime:function(v){return this.getParameter(v,"timeSuggestion")[16]},getDefaultEndTime:function(v){return this.getParameter(v,"timeSuggestion")[18]},reloadSubCalendar:function(v,w){if(!w){return}w=f.isArray(w)?w:[w];f(".sub-calendar-panel .subcalendar-item",v).each(function(){var E=f(this),A=E.data("subCalendarId"),z=f(".child-subcalendar",E),F=q.getSubCalendar(v,A),y=f.map(z,function(H){return f(H).data("subCalendarId")});if(f.inArray(A,w)!==-1){var D=function(I){for(var H=0;H<z.length;H++){if(f(z[H]).data("sub-calendar-id")===I){return !f(z[H]).hasClass("subcalendar-disabled")}}return false};if(Confluence.TeamCalendars.isSubscriptionSubCalendar(F)){o.removeCalendar(A);q.removeSubCalendarEventSource(v,A);q.addSubCalendarEventSource(v,A)}q.removeSubCalendarEventSource(v,f.map(y,function(H){o.removeCalendar(H);return H}));if(F.childSubCalendars!==undefined){var x=f.map(F.childSubCalendars,function(H){if(D(H.id)||!H.eventsHidden){return H.id}});q.addSubCalendarEventSource(v,x)}}else{var C=[];z.filter(function(){return f.inArray(f(this).data("subCalendarId"),w)!==-1}).each(function(){var H=f(this),I=H.data("subCalendarId");o.removeCalendar(I);if(H.hasClass("subcalendar-disabled")){H.removeClass("subcalendar-disabled")}else{q.removeSubCalendarEventSource(v,I)}q.addSubCalendarEventSource(v,I);C.push(I)});if(C.length){var G=C;var B=q.getSubCalendar(v,A);if(!l.isDummySubscriptionParentSubCalendar(B)){G.push(B.id)}q.setSubCalendarEventsHidden(v,G,false,E)}}})},makeAutoCompleteSearch:function(y,x,w,A,v,z){s.makeAutoCompleteSearch(y,x,w,A,v,z)},isProcessingEvent:function(v){return v.data("processingEvent")},setProcessingEvent:function(x,w,v){if(v){if(w){if(v.disableOkButton){v.disableOkButton()}}else{if(v.enableOkButton){v.enableOkButton()}}}x.data("processingEvent",w)},showAjaxError:function(w,y,A,z,v,x){if(!q.isPageUnloading){Confluence.TeamCalendars.showAjaxError(w,y,A,z,v,x)}},showHTMLGenericError:function(w,x,v){if(!q.isPageUnloading){Confluence.TeamCalendars.showHTMLGenericError(w,x,v)}},showRestrictedCalendarsWarning:function(v){f(".restricted-calendars-warning",v).removeClass("hidden")},deleteEvent:function(x,y,w,v){i(q,o).deleteEvent(x,y,w,v)},getCalendarServiceBaseUrl:function(w,v){return Confluence.TeamCalendars.getCalendarServiceBaseUrl(v)},getSubCalendars:function(x,y){var w=x.data("subCalendars")||[];if(y){var v=[];f.each(w,function(A,z){if(y(z)){v.push(z)}});return v}return w},isSubCalendarDeletable:function(w,v){return this.isCalendarInEditMode(w)&&v.deletable},isSubCalendarAdministratable:function(w,v){return this.isCalendarInEditMode(w)&&v.administrable},isSubCalendarEventsUpdatable:function(w,v){return this.isCalendarInEditMode(w)&&v.eventsEditable},canAddEventsToSubcalendar:function(w,v){return this.isSubCalendarEventsUpdatable(w,v)&&!Confluence.TeamCalendars.isJiraSubCalendar(v)},doesSubCalendarHaveRestrictions:function(v){return v.usersPermittedToView.length||v.groupsPermittedToView.length||v.usersPermittedToEdit.length||v.groupsPermittedToEdit.length},getSubCalendarsWhichCanAddEvents:function(v){return this.getSubCalendars(v,function(w){return q.canAddEventsToSubcalendar(v,w)})},getParentSubCalendar:function(x,w){var v=null;f.each(this.getSubCalendars(x),function(A,z){if(z.id===w){v=z;return false}else{var y=f.grep(z.childSubCalendars||[],function(B){return B.id==w});if((v=y&&y.length?z:null)){return false}}});return v},getSubCalendar:function(w,x){var v=null;f.each(this.getSubCalendars(w),function(z,y){if(y.id===x){v=y;return false}else{v=f.grep(y.childSubCalendars||[],function(A){return A.id==x});if((v=v&&v.length?v[0]:null)){return false}}});return v},getSanboxEventTypeRemindersFromSubCalendar:function(w,x){var v=this.getSubCalendar(w,x);if(v){return v.sanboxEventTypeReminders}},getCurrentReminderForEventType:function(A,z){var B=null;var y=z.getSelectedSubCalendarId();var w=z.getSelectedEventType();if(l.isCustomEventType(w)){var x=this.getCustomEventTypeFromSubCalendar(A,y);if(x){f.each(x,function(C,D){if(D.customEventTypeId===w&&D.periodInMins>0){B=D;return false}})}}else{var v=this.getSanboxEventTypeRemindersFromSubCalendar(A,y);if(v){f.each(v,function(C,D){if(D.eventTypeId===w||D.eventTypeId===w+"-calendar"){B=D;return false}})}}return B},getCustomEventTypeFromSubCalendar:function(w,x){var v=this.getSubCalendar(w,x);if(v){return v.customEventTypes}},setSubCalendar:function(z,y,x){var w=y.data("subCalendars");for(var v=0;v<w.length;v++){if(w[v].id===z){w[v]=f.isArray(x)?x[0]:x}}y.data("subCalendars",w)},setSubCalendars:function(w,v){if(l.isSpaceCalendarView(w)){v=u.filter(v,function(x){return x.eventsViewable||l.isDummySubscriptionParentSubCalendar(x)})}w.data("subCalendars",f.isArray(v)?v:(v?[v]:null))},showSubCalendarEdit:function(y,v){var z;if(Confluence.TeamCalendars.isJiraSubCalendar(v)){var A=Confluence.TeamCalendars.isInternalSubscriptionSubCalendar(v);z=Confluence.TeamCalendars.Dialogs.getEditEventDialog({title:A?v.sourceSubCalendar.name:v.name,eventType:(A?v.sourceSubCalendar.type:v.type)+"-calendar",subCalendarId:v.id},v,q,y).show()}else{var w=Confluence.TeamCalendars.Dialogs.getSubCalendarEditDialog(v,q.getRenderedMacroCallbackHandler(y),y,q,o);z=w.render();var x=z.getCurrentPanel().body;Confluence.TeamCalendars.setFieldErrors(x,null);z.show();z.gotoPanel(l.panelEditCalendar.GENERAL_PANEL);f("input[name='name']",x).focus();z.belongedView=w;if(r.isShowCustomEventTypeFrom(v.id)){w.showAddEventTypeForm()}if(!this.isSubCalendarAdministratable(y,v)){f(z.getPanel(l.panelEditCalendar.GENERAL_PANEL).button).addClass("hidden");f(z.getPanel(l.panelEditCalendar.EVENT_TYPE_PANEL).button).addClass("hidden");f(z.getPanel(l.panelEditCalendar.RESTRICTION_PANEL).button).addClass("hidden")}z.getCurrentPanel().onselect=function(){f("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden")}}return z},showCustomEventEditForm:function(y,v,x,A){var z=this.showSubCalendarEdit(y,v);if(!(!Confluence.TeamCalendars.isInternalSubscriptionSubCalendar(v)&&Confluence.TeamCalendars.isJiraSubCalendar(v))){var w=z.belongedView;if(x){x=Confluence.TeamCalendars.isJiraType(x)?x+"-calendar":x;w.selectCustomEvent(x)}else{w.showAddEventTypeForm()}}z.gotoPanel(l.panelEditCalendar.EVENT_TYPE_PANEL);return z},updateCustomEventType:function(z,B,w){var A=this.getSubCalendars(z);for(var y=0;y<A.length;y++){if(A[y].id===B){var x=false;for(var v=0;v<A[y].customEventTypes.length;v++){if(A[y].customEventTypes[v].customEventTypeId===w.customEventTypeData){A[y].customEventTypes[v]=w;x=true;break}}if(!x){A[y].customEventTypes.push(w)}break}}z.data("subCalendars",A)},refreshCachedSubCalendars:function(y,v,w){var x={};if(q.getParameter(y,"include")){x.include=q.getParameter(y,"include")}l.putCalendarContextParams(x);f.ajax({cache:false,converters:{"text json":function(z){return z}},data:x,dataFilter:function(z){var A=f.parseJSON(z);if(A.success){q.mergeSubCalendarObjectsToArray(A.payload)}return A},dataType:"json",error:function(z,B,A){q.showAjaxError(y,z,B,A,q.ERROR_CLASS_SUB_CALENDAR_LIST);if(w){w(z,B,A)}},success:function(z){if(z.success){q.setSubCalendars(y,z.payload);if(v){v(z.payload)}q.setGenericErrors(y,null,q.ERROR_CLASS_SUB_CALENDAR_LIST)}else{q.setGenericErrors(y,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.",q.ERROR_CLASS_SUB_CALENDAR_LIST)}},type:"GET",timeout:q.ajaxTimeout,url:Confluence.TeamCalendars.getCalendarServiceBaseUrl("/subcalendars.json")})},mergeSubCalendarObjectsToArray:function(v){return Confluence.TeamCalendars.mergeSubCalendarObjectsToArray(v)},setGenericErrors:function(w,x,v){Confluence.TeamCalendars.setGenericErrors(w,x,v)},shouldShowFeatureDiscoveryDialog:function(v,w){return q.getParameter(v,"showCalendarDiscoveryDialog")==="true"},setSubCalendarEventsHidden:function(w,y,v,x){y=f.isArray(y)?y:y;return f.ajax({cache:false,data:{subCalendarId:y},dataType:"json",type:v?"PUT":"DELETE",error:function(z,B,A){f.each(y,function(C,D){q.showAjaxError(w,z,B,A,q.ERROR_CLASS_SUB_CALENDAR_TOGGLE_EVENTS+q.getStringAsHex(D))})},success:function(){f.each(y,function(z,A){q.getSubCalendar(w,A).eventsHidden=v;q.checkCalendarHasAllChildDisable(x);q.setGenericErrors(w,null,q.ERROR_CLASS_SUB_CALENDAR_TOGGLE_EVENTS+q.getStringAsHex(A))})},timeout:q.ajaxTimeout,url:q.getCalendarServiceBaseUrl(w,"/preferences/events/hidden.json")})},checkCalendarHasAllChildDisable:function(v){f(v).filter(function(){var w=f("li.child-subcalendar",v);var x=f("li.child-subcalendar:not(.subcalendar-disabled)",v);if(w.length!==0&&x.length===0){v.addClass("allchildsubcalendar-disabled").addClass("subcalendar-disabled")}else{v.removeClass("allchildsubcalendar-disabled").removeClass("subcalendar-disabled")}})},updateAvailableSubCalendarsInSubCalendarPanel:function(v){g(q,v,o).updateAvailableSubCalendarsInSubCalendarPanel()},unsubscribeFromSubcalendar:function(y,w){if(!q.isProcessingSubCalendar(y)){q.setProcessingSubCalendar(y,true);var v=q.setSubCalendarSpinnerIconVisible(y,true);var x=function(){if(v){v.resolve()}};if(w.subscriptionId){q._deleteSubCalendarInternal(y,w.id,function(z,B,A){q.showAjaxError(y,z,B,A,q.ERROR_CLASS_SUB_CALENDAR_DELETE);x();q.setProcessingSubCalendar(y,false)},function(z){if(z.success){q.setGenericErrors(y,null,q.ERROR_CLASS_SUB_CALENDAR_UPDATE);f.each(f.merge([w],w.childSubCalendars||[]),function(B,A){q.setGenericErrors(y,null,q.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+q.getStringAsHex(A.id))});q.setGenericErrors(y,null,q.ERROR_CLASS_SUB_CALENDAR_DELETE);q.removeSubCalendarEventSource(y,w.id);q.removeSubCalendarEventSource(y,w.childSubCalendars);q.setSubCalendars(y,z.payload);q.updateAvailableSubCalendarsInSubCalendarPanel(y)}else{q.setGenericErrors(y,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.",q.ERROR_CLASS_SUB_CALENDAR_DELETE)}x();q.setProcessingSubCalendar(y,false)})}else{f.ajax({cache:false,converters:{"text json":function(z){return z}},data:(function(){var z={subCalendarId:w.id};if(q.getParameter(y,"include")){z.include=q.getParameter(y,"include")}l.putCalendarContextParams(z);return z})(),dataType:"json",dataFilter:function(z){var A=f.parseJSON(z);if(A.success){q.mergeSubCalendarObjectsToArray(A.payload)}return A},error:function(z,B,A){q.showAjaxError(y,z,B,A);q.setProcessingSubCalendar(y,false)},success:function(z){if(l.isSingleCalendarView(y)){window.location.href=k.contextPath()+"/display/"+encodeURIComponent(k.Meta.get("space-key"))+"/calendars"}else{q.setGenericErrors(y,null,q.ERROR_CLASS_SUB_CALENDAR_UPDATE);q.removeSubCalendarEventSource(y,w.id);q.removeSubCalendarEventSource(y,w.childSubCalendars);q.setSubCalendars(y,z.payload);q.updateAvailableSubCalendarsInSubCalendarPanel(y);q.setProcessingSubCalendar(y,false)}k.trigger("calendar.removed")},complete:function(){x()},type:"DELETE",timeout:q.ajaxTimeout,url:q.getCalendarServiceBaseUrl(y,"/subcalendars/preferences.json")})}}},getNextUnusedSubCalendarColor:function(A){var z=q.getSubCalendars(A);var y=q.getParameter(A,"subCalendarColorClass");for(var w=0;w<y.length;++w){var x=y[w];var B=false;for(var v=0;v<z.length;++v){if(x===z[v].color){B=true;break}}if(!B){return x}}return z.length?y[z.length%y.length]:"subcalendar-blue"},setProcessingSubCalendar:function(w,v){w.data("processingSubCalendar",v)},isProcessingSubCalendar:function(v){return v.data("processingSubCalendar")},getDeleteSubCalendarConfirmationDialog:function(x,v,w){var y=this.createDeleteSubCalendarConfirmationDialog(x,v,w);f("input[name='subCalendarId']",y.getCurrentPanel().body).val(v.id);return y},createDeleteSubCalendarConfirmationDialog:function(A,w,z){var x=new k.Dialog({height:290,width:550,id:"delete-calendar-dialog"});x.addHeader(Confluence.TeamCalendars.isJiraSubCalendar(w)?"Delete Event":"Delete Calendar");x.addPanel("Delete Calendar",Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar({subCalendar:w,subscriberCount:z}),"delete-subcalendar-confirmation-panel");var y=x.getCurrentPanel().body;f("form.sub-calendar-delete-confirm",y).submit(function(){return false});var v=q.setSubCalendarSpinnerIconVisible(A,true);x.addButton(Confluence.TeamCalendars.isJiraSubCalendar(w)?"Delete Event":"Delete Calendar",function(){if(!q.isProcessingSubCalendar(A)){q.setProcessingSubCalendar(A,true);var B=q.getSubCalendar(A,f("input[name='subCalendarId']",y).val());q._deleteSubCalendarInternal(A,B.subscriptionId||B.id,function(C,E,D){q.showAjaxError(A,C,E,D,q.ERROR_CLASS_SUB_CALENDAR_DELETE);x.remove();v.resolve();q.setProcessingSubCalendar(A,false)},function(C){if(C.success){q.setGenericErrors(A,null,q.ERROR_CLASS_SUB_CALENDAR_UPDATE);f.each(f.merge([B],B.childSubCalendars||[]),function(E,D){q.setGenericErrors(A,null,q.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+q.getStringAsHex(D.id))});q.setGenericErrors(A,null,q.ERROR_CLASS_SUB_CALENDAR_DELETE);q.removeSubCalendarEventSource(A,B.id);q.removeSubCalendarEventSource(A,B.childSubCalendars);q.setSubCalendars(A,C.payload);q.updateAvailableSubCalendarsInSubCalendarPanel(A)}else{q.setGenericErrors(A,"Uh oh. Looks like something unexpectedly went wrong. Please check the Confluence log file.",q.ERROR_CLASS_SUB_CALENDAR_DELETE)}x.remove();v.resolve();q.setProcessingSubCalendar(A,false)})}return false});x.addLink("Cancel",function(){x.remove();v.resolve();return false});return x},deleteSubCalendar:function(y,w){if(!q.isProcessingSubCalendar(y)){q.setProcessingSubCalendar(y,true);var v=q.setSubCalendarSpinnerIconVisible(y,true);var x={subCalendarId:w.subscriptionId||w.id};l.putCalendarContextParams(x);f.ajax({cache:false,data:x,dataType:"json",error:function(z,B,A){q.showAjaxError(y,z,B,A,q.ERROR_CLASS_SUB_CALENDAR_DELETE);q.setProcessingSubCalendar(y,false)},success:function(A){var D=y.data("subCalendarEditFormDialog");if(D){D.hide()}var E=q.getDeleteSubCalendarConfirmationDialog(y,w,A.subscriptionCount),B=E.getCurrentPanel().body,z=f(".calendar-to-delete",B);z.removeAttr("ThreeDots").empty().append(f(document.createElement("span")).addClass("ellipsis_text").text(w.name));q.setProcessingSubCalendar(y,false);var C=function(F){if(27===F.keyCode){q.setProcessingSubCalendar(y,false);v.resolve();f(document).unbind("keypress",C)}};f(document).keypress(C);E.show();z.ThreeDots()},complete:function(){if(v){v.resolve()}},type:"GET",timeout:q.ajaxTimeout,url:q.getCalendarServiceBaseUrl(y,"/subcalendars/links.json")})}},_deleteSubCalendarInternal:function(y,z,w,v){var x={subCalendarId:z};if(q.getParameter(y,"include")){x.include=q.getParameter(y,"include")}l.putCalendarContextParams(x);f.ajax({cache:false,converters:{"text json":function(A){return A}},data:x,dataFilter:function(A){var B=f.parseJSON(A);if(B.success){q.mergeSubCalendarObjectsToArray(B.payload)}return B},dataType:"json",error:function(A,C,B){if(w){w(A,C,B)}},success:function(A){if(l.isSingleCalendarView(y)){window.location.href=k.contextPath()+"/display/"+encodeURIComponent(k.Meta.get("space-key"))+"/calendars"}else{if(v){v(A)}}k.trigger("calendar.removed")},type:"DELETE",timeout:q.ajaxTimeout,url:q.getCalendarServiceBaseUrl(y,"/subcalendars.json")})},addSubCalendarEventSource:function(w,y){if(!y){return}var x=Confluence.TeamCalendars.getAsArray(y),v=w.data("visibleEventSources")||{};f.each(x,function(A,z){if(!v[z]){v[z]=q.getSubCalendarEventSource(w,z);q.getCalendarPanel(w).fullCalendar("addEventSource",v[z])}});w.data("visibleEventSources",v)},removeSubCalendarEventSource:function(w,y){if(!y){return}var x=Confluence.TeamCalendars.getAsArray(y),v=w.data("visibleEventSources")||{};f.each(x,function(A,z){if(v[z]){q.getCalendarPanel(w).fullCalendar("removeEventSource",v[z]);v[z]=null}});w.data("visibleEventSources",v)},isHttpsServer:function(v){return q.getParameter(v,"baseUrl").substring(5,0).toLowerCase()!="https"},getSubCalendarEventSource:function(y,z){var w=y.data("eventSources")||{},v=function(A,C){var B=A.data("retrieveEventsQueue")||{};if(!B[C]){B[C]=[]}A.data("retrieveEventsQueue",B);return B[C]},x=w[z]||function(B,I,E){if(!(isNaN(B.getTime())||isNaN(I.getTime()))){if(o.hasCalendar(z)&&o.getCalendarStart(z).getTime()<B.getTime()&&o.getCalendarEnd(z).getTime()>I.getTime()){var C=q.getEventsTruncated(y,o.getCalendarData(z));E(C);return}var K=v(y,z);for(var G=0;G<K.length;++G){var J=K.shift();if(!J.aborted&&J.xhr.readyState!==4){try{J.xhr.abort()}catch(F){}J.xhr.aborted=true}}var H=new Date(B.getTime()-(1000*60*60*24*30)),L=new Date(I.getTime()+(1000*60*60*24*30)),A={subCalendarId:z,userTimeZoneId:Confluence.TeamCalendars.getUserTimeZone(),start:f.fullCalendar.formatDate(H,"u"),end:f.fullCalendar.formatDate(L,"u")},D=q.getSubCalendars(y,function(O){if(!O.childSubCalendar){return false}var N=false;f.each(O.childSubCalendar,function(P,Q){if(Q.id===z){N=true;return false}});return N});if(D.length){A.parentSubCalendarId=D[0].id}var M=f.ajax({cache:false,data:A,dataType:"json",error:function(T,P,R){if(Confluence.TeamCalendars.isRequireOauth(T)){var O=f.parseJSON(T.responseText),U=f(".jira-calendars-oauth-warnings",y),N=O.oAuthUrl,V=f("div",U).filter(function(){return N===f(this).data("oAuthUrl")}),Q=function(){U.append(Confluence.TeamCalendars.Templates.requireOauthMessage({oAuthUrl:N,subCalendarIdsArrayJson:JSON.stringify([z]),subCalendarNamesArrayJson:JSON.stringify([O.subCalendarName]),subCalendarName:f("<div/>",{text:O.subCalendarName}).html()})).find(".approve-dance").click(function(){AppLinks.authenticateRemoteCredentials(O.oAuthUrl,function(){var X=f("div",U).filter(function(){return N===f(this).data("oAuthUrl")});q.reloadSubCalendar(y,X.data("subCalendarIds"));X.remove()},function(){alert("Approval unsuccessful. Could you please try again?")});return false})},W=function(){var Y=V.data("subCalendarIds");if(f.inArray(z,Y)===-1){Y.push(z)}var X=V.data("subCalendarNames");if(f.inArray(O.subCalendarName,X)===-1){X.push(O.subCalendarName)}f("span.subcalendar-names",V.data("subCalendarIds",Y).data("subCalendarNames",X)).text(X.join(", "))};if(!V.length){Q()}else{W()}}else{if(T.status==403){if(q.getParameter(y,"showHiddenSubCalendars")==="true"){q.showRestrictedCalendarsWarning(y)}else{if(!l.isSpaceCalendarView(y)){q.showAjaxError(y,T,P,R,q.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+q.getStringAsHex(z))}}}else{if(P!=="abort"){var S=q.getSubCalendar(y,z);q.showAjaxError(y,T,P,R,q.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+q.getStringAsHex(z),S);f(y).find("#calendar-change-jql").click(function(){var Y=this;var Z=f(Y).parent().data("jiraCalendarId");if(Z){var X=q.getSubCalendar(y,Z);if(X&&X.eventsEditable){q.showSubCalendarEdit(y,X);f("#edit-calendar-dialog").find(".button-panel-button.submit").removeClass("hidden")}}})}}}E([])},success:function(P,O){var T=P.events;var S=[];q.setGenericErrors(y,null,q.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+q.getStringAsHex(z));T=f.map(T||[],function(V){if(V.className==="greenhopper-sprint"&&!V.allDay){V.allDay=!V.allDay;V.allDayFlipped=true}return V});if(O==="success"&&T){S=q.getEventsTruncated(y,T)}E(S);o.addDataToCalendar(z,S,H,L);var R=q.getSubCalendar(y,z);if(R.warnings&&R.warnings.length){q.setGenericErrors(y,R.warnings,q.ERROR_CLASS_SUB_CALENDAR_LIST_EVENTS+q.getStringAsHex(z))}var U=q.getParameter(y,"editSubCalendarId"),N=q.getParameter(y,"editEventUid");if(U&&N){var Q=q.getCalendarPanel(y).fullCalendar("clientEvents",function(V){return V.subCalendarId===U&&V.id===N});if(Q.length){q.setParameter(y,"editSubCalendarId","");q.setParameter(y,"editEventUid","");f("#calendar-dialog-panel").remove();Confluence.TeamCalendars.Dialogs.getEditEventDialog(Q[0],R,q,y).show()}}},type:"GET",timeout:q.ajaxTimeout,url:q.getCalendarServiceBaseUrl(y,"/events.json")});K.push({xhr:M})}};w[z]=x;y.data("eventSources",w);return x},getEventsTruncated:function(B,w,K){var L=this.getCalendarPanel(B).fullCalendar("getView");var C=parseInt(this.getParameter(B,"maxEventsToDisplayPerCalendar"));var z={};f.each(w,function(O,N){if(!z[N.subCalendarId]){z[N.subCalendarId]=[]}z[N.subCalendarId].push(N)});var A=function(N){N.sort(function(P,R){var O=P._start||f.fullCalendar.parseISO8601(P.start,true);var Q=R._start||f.fullCalendar.parseISO8601(R.start,true);return O.getTime()-Q.getTime()})};var I=function(R,P,O){A(R);var N;var Q=-1;f.each(R,function(U,T){var S=T._start||f.fullCalendar.parseISO8601(T.start,true);if(S>=P){Q=U;return false}});if(-1===Q){N=R.slice(-C)}else{N=R.slice(Q,Math.min(Q+C,R.length))}D.push(q.getParentSubCalendar(B,R[0].subCalendarId).name);return N};var D=[];var F={};f.each(z,function(R,Q){var P=L.visStart;var O=L.visEnd;var N=[];f.each(Q,function(V,T){var S=T._start||f.fullCalendar.parseISO8601(T.start,true);var U=T._end||(T.end?f.fullCalendar.parseISO8601(T.end,true):S);if((S>=P&&S<=O)||(U>=P&&U<=O)){N.push(T)}if(N.length>C){N=I(Q,P,O);return}});F[R]=N});if(D.length){var E=f(".events-truncated-message-container",B);var M=function(N){N.sort(function(P,O){return P>O?1:(O>P?-1:0)})};var J=function(O){var N=f(document.createElement("ul"));f.each(O,function(P,Q){N.append(f(document.createElement("li")).text(Q))});return N};var y;if(K){M(D);y=J(D)}else{var x=[];var H=f.map(f("ul li",E),function(N){return f(N).text()});var G=f.map(this.getSubCalendars(B),function(N){return N.name});f.each(H,function(O,N){if(f.inArray(N,G)>-1){x.push(N)}});f.each(D,function(N,O){if(-1===f.inArray(O,x)){x.push(O)}});M(x);y=J(x)}k.messages.warning(E.empty(),{title:"Some events were not shown in the calendars below because there were too many of them",body:f(document.createElement("div")).append(y).html()});r.start();var v=[];f.each(F,function(O,N){f.merge(v,N)});return v}else{return w}},isCalendarInEditMode:function(v){return this.getParameter(v,"readOnly")!=="true"},isEventEditable:function(w,v){return this.isCalendarInEditMode(w)&&this.isSubCalendarEventsUpdatable(w,this.getSubCalendar(w,v.subCalendarId))&&v.editable},isEventDeletable:function(x,w){var v=q.getSubCalendar(x,w.subCalendarId);return q.isEventEditable(x,w)&&!Confluence.TeamCalendars.isJiraSubCalendar(v)},getEventDetailsDialog:function(y,w,x,v){return i(q,o).getEventDetailsDialog(y,w,x,v)},updateEvent:function(y,x,w,v){i(q,o).updateEvent(y,x,w,v)},setSubCalendarSpinnerIconVisible:function(y,A){var v=f.Deferred();var w=this;this.spinnerDeferTasks.push(v.promise());var x=function(B){var C=f(".calendar-panel .right-controls .spinner, .calendar-toolbar .spinner",y);if(B){C.removeClass("invisible")}else{C.addClass("invisible")}w._toggleEnableButton(f(".page-prev",y),!B);w._toggleEnableButton(f(".page-next",y),!B)};if(A){x(A)}f.when.apply(f,this.spinnerDeferTasks).done(function(){x(false);this.spinnerDeferTasks=[]});var z=setTimeout(function(){v.resolve()},10*1000);return{resolve:function(){v.resolve();clearTimeout(z)}}},_toggleEnableButton:function(w,v){w.attr("aria-disabled",!v);if(v){w.removeAttr("disabled")}else{w.attr("disabled","disabled")}},reloadSubCalendarDisableEvent:function(y,x){if(x.uid&&(x.originalEventType!==x.eventType||x.originalSubCalendarId!==x.subCalendarId)){var w=q.getSubCalendar(y,x.subCalendarId).disableEventTypes;for(var v=0;v<w.length;v++){if(w[v]===x.eventType){w.splice(v,1);break}}q.getSubCalendar(y,x.subCalendarId).disableEventTypes=w}},initCalendarToolbar:function(w){var v=this;f(".feedback-form-trigger",w).click(function(){var y=new k.Dialog(700,512);y.addHeader("Team Calendars Plugin Feedback");y.addPanel("","<div class='loading-message'></div><iframe src='https://atlassian.wufoo.com/forms/team-calendars-feedback/' frameborder='0'></iframe>","calendar-feedback-dialog-panel");var x=y.getCurrentPanel().body;var z=f(".loading-message",x).text("Loading...");f("iframe",x).load(function(){z.remove()});y.addCancel("Cancel",function(){y.hide();return false});y.show();return false});f(".change-view",w).click(function(){v.hideInlineAuiDialogs();var x=f(this);q.getCalendarPanel(w).fullCalendar("changeView",x.data("viewName"));var y=l.getCalendarContext(w);Confluence.TeamCalendars.fireEventForAnalytics("view."+x.data("analyticsViewName")+".render."+y);return false});f(".today",w).click(function(){v.hideInlineAuiDialogs();o.removeAllCalendars();q.getCalendarPanel(w).fullCalendar("today");return false});f(".page-prev",w).click(function(){v.hideInlineAuiDialogs();var x=q.getCalendarPanel(w);delete x.fullCalendar("getView").daysMore;if(x.fullCalendar("getView").name==="basicDay"){x.fullCalendar("incrementDate",0,0,-parseInt(q.getParameter(w,"maxUpcomingDays")))}else{x.fullCalendar("prev")}return false});f(".page-next",w).click(function(){v.hideInlineAuiDialogs();var x=q.getCalendarPanel(w);delete x.fullCalendar("getView").daysMore;if(x.fullCalendar("getView").name==="basicDay"){x.fullCalendar("incrementDate",0,0,parseInt(q.getParameter(w,"maxUpcomingDays")))}else{x.fullCalendar("next")}return false})},getStringAsHex:function(w){var y="";if(w){var v=w.length;for(var z=0;z<v;++z){var x=w.charCodeAt(z);y+=x.length>1?x:"0"+x}}return y},formatDate:function(A,x,z,w){if(w){var v=f.isArray(x);if(v&&!x.length){w();return}var y={date:f.map(v?x:[x],function(B){return f.fullCalendar.formatDate(B,"ddMMyyyyHHmm")}),pattern:z};f.ajax({cache:false,data:y,dataType:"json",error:function(){w(k.format("Unable to format date/time {0}",y.date.join(", ")))},success:function(B){w(v?B:B[0])},timeout:q.ajaxTimeout,url:q.getCalendarServiceBaseUrl(A,"/util/format/date.json")})}},initWhatsNew:function(x){var w=f(".whatsnew");if(w.length){w.removeClass("hidden");var v=function(y){Confluence.TeamCalendars.suppressMessage(x,"MESSAGE_KEY_PREFIX_WHATSNEW_"+q.getParameter(x,"pluginVersion"),function(){if(f.isFunction(y)){y()}})};f("button",w).click(function(){window.open(f(this).data("url"),"_blank");return false});f(".aui-iconfont-close-dialog",w).click(function(){v(function(){w.addClass("hidden")})})}},initButtons:function(v){new c({el:"#navigation",calendarDiv:v,CalendarPlugin:this}).render();new b({el:"#calendar-restriction-buttons",calendarDiv:v,CalendarPlugin:this})},getSubCalendarRestrictionsDialog:function(x,v){var y=this.showSubCalendarEdit(x,v);var w=y.belongedView;w.showRestrictionOption();return y},removeSubCalendarDialog:function(x,v){var w=new j({calendarPlugin:this,calendarDiv:x,subCalendar:v});w.render()},getSubCalendarFeatureDiscoveryDialog:function(x,v){var w=new e({calendarPlugin:this,calendarDiv:x,subCalendar:v});return{show:function(){w.render()}}},isAutoConvertSupported:function(v){return this.getParameter(v,"autoConvertSupported")==="true"},getSubCalendarShareDialog:function(x,v){var y=this.showSubCalendarEdit(x,v);var w=y.belongedView;w.showShareOption();return y},getSubCalendarIcalAddressDialog:function(x,v){var y=this.showSubCalendarEdit(x,v);var w=y.belongedView;w.showSubscriptionOption();return y},initCalendarDiv:function(w){var v=q.getRenderedMacroCallbackHandler(w);this.initCalendarToolbar(w);g(q,w).initSubCalendarPanel();this.initWhatsNew(w);this.initButtons(w);f(document).keydown(function(x){if(x.keyCode===27){q.getCalendarPanel(w).fullCalendar("unselect")}});if(Confluence.TeamCalendars.shouldShowTimezoneSetup()){Confluence.TeamCalendars.Dialogs.getTimeZoneSetupDialog(v).show()}else{v.showCalendarWizard()}},getRenderedMacroCallbackHandler:function(v){return{isProcessingSubCalendar:function(){return q.isProcessingSubCalendar(v)},setProcessingSubCalendar:function(w){return q.setProcessingSubCalendar(v,w)},setSubCalendarSpinnerIconVisible:function(w){return q.setSubCalendarSpinnerIconVisible(v,w)},getIncludedCalendars:function(){return q.getParameter(v,"include")},mergeSubCalendarObjectsToArray:function(w){return q.mergeSubCalendarObjectsToArray(w)},showAjaxUpdateError:function(w,y,x){q.showAjaxError(v,w,y,x,q.ERROR_CLASS_SUB_CALENDAR_UPDATE)},showAjaxError:function(x,z,y,w){q.showAjaxError(v,x,z,y,w)},showHTMLGenericError:function(x,y,w){q.showHTMLGenericError(x,y,w)},setGenericUpdateError:function(){q.setGenericErrors(v,null,q.ERROR_CLASS_SUB_CALENDAR_UPDATE)},setGenericErrors:function(x,w){Confluence.TeamCalendars.setGenericErrors(v,null,w)},setParameter:function(w,x){q.setParameter(v,w,x)},getParameter:function(w){return q.getParameter(v,w)},setSubCalendar:function(x,w){q.setSubCalendar(x,v,w)},setSubCalendars:function(w,x){q.setSubCalendars(v,x)},reloadSubCalendar:function(w){q.reloadSubCalendar(v,w)},getSubCalendars:function(){return q.getSubCalendars(v)},updateAvailableSubCalendarsInSubCalendarPanel:function(){q.updateAvailableSubCalendarsInSubCalendarPanel(v)},refreshCalendarInfo:function(w){if(l.isSingleCalendarView(v)&&w.length){f("#title-text span").text(w[0].name);f(".calendar-description p").text(w[0].description)}},shouldShowFeatureDiscoveryDialog:function(w){return q.shouldShowFeatureDiscoveryDialog(v,w)},getSubCalendarFeatureDiscoveryDialog:function(w){q.getSubCalendarFeatureDiscoveryDialog(v,q.getSubCalendar(v,w)).show()},getNextCalendarColor:function(){return q.getNextUnusedSubCalendarColor(v)},isAutoWatchSet:function(){return q.getParameter(v,"autowatch")==="true"},refreshCachedSubCalendars:function(w,x){q.refreshCachedSubCalendars(v,w,x)},handleImport:function(w){this.refreshCachedSubCalendars(function(){q.updateAvailableSubCalendarsInSubCalendarPanel(v);if(q.shouldShowFeatureDiscoveryDialog(v)){q.getSubCalendarFeatureDiscoveryDialog(v,q.getSubCalendar(v,w)).show()}},function(x,z,y){q.showAjaxError(v,x,z,y,q.ERROR_CLASS_SUB_CALENDAR_UPDATE)});r.start(w)},isCalendarInEditMode:function(){return q.isCalendarInEditMode(v)},suppressMessage:function(x,w){Confluence.TeamCalendars.suppressMessage(v,x,w)},showCalendarWizard:function(){var y=function(){Confluence.TeamCalendars.Dialogs.getSubCalendarSubscribeDialog({heading:"Welcome to Team Calendars!",callbackHandler:q.getRenderedMacroCallbackHandler(v),id:"welcome-to-popular-dialog"}).show()};var w=function(){Confluence.TeamCalendars.Dialogs.getAddDialog(q.getRenderedMacroCallbackHandler(v),{title:"Welcome to Team Calendars!",addClass:"create-calendar-first-time"})};var x=k.Meta.get("space-key")?(l.getParamsFromUrl()["openAddCalDialog"]==="true"):false;if(x){if(l.isValidLicense()){w()}}else{if("true"===q.getParameter(v,"isShowCalendarWizard")){Confluence.TeamCalendars.showCalendarPopupHaveAnEmptySubcalendar(y,w)}}},getSubCalendarsWhichCanAddEvents:function(){return q.getSubCalendarsWhichCanAddEvents(v)},updateCustomEventType:function(x,w){q.updateCustomEventType(v,x,w)}}},onTeamCalendarsLoaded:function(){if(f(".user-calendar, .space-calendar").length>0){m.render()}f("div.plugin-calendar:not(.init-started)").each(function(){var A=f(this);A.addClass("init-started");var y=f("#team-calendars-display-week-number").attr("content");q.setParameter(A,"displayWeekNumber",y);if(!q.getParameter(A,"defaultView")){var w=q.getCalendarPanel(A).text("Loading...");f.ajax({cache:false,dataType:"json",error:function(){w.empty();q.init(A)},success:function(B){q.setParameter(A,"defaultView",B.view==="agendaDay"?"basicDay":B.view);w.empty();q.init(A)},timeout:q.ajaxTimeout,url:q.getCalendarServiceBaseUrl(A,"/preferences.json")})}else{var z=A.closest(".dashboard-calendar-container");if(z){var x=setInterval(function(){q.init(A);clearInterval(x)},100)}else{q.init(A)}}});var v=f(".ia-splitter-handle-highlight");v.mousedown(function(){v.on("mousemove",function(){f(window).trigger("resize")})}).mouseup(function(){f(window).trigger("resize");v.off("mousemove")});f(".expand-collapse-trigger").click(function(){f(window).trigger("resize")})}};f(function(){q.isPageUnloading=false;k.$(window).bind("beforeunload",function(){q.isPageUnloading=true});f(document).keydown(function(v){var w=true;f(".aui-inline-dialog:visible:first .event-details-popup").each(function(){if(v.keyCode===8||v.keyCode===46){f(".event-delete",this).click();w=false}});return w});f("body").keyup(function(v){if((v.keyCode?v.keyCode:v.which)===219){f(window).trigger("resize")}})});return q});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/child-subcalendars.js' */
(function(a){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}window.Confluence.TeamCalendars.subcalendar.other={getDialog:function(){AJS.log("Tried to call getDialog on child calendar type. This should not happen.")},weight:1,typeName:"Events Calendars"};window.Confluence.TeamCalendars.subcalendar.travel=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:2,typeName:"Travel"});window.Confluence.TeamCalendars.subcalendar.leaves=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:3,typeName:"Leave"});window.Confluence.TeamCalendars.subcalendar.birthdays=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:4,typeName:"Birthdays"});window.Confluence.TeamCalendars.subcalendar["jira-agile-sprint"]=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:6,typeName:"JIRA Agile Sprints"});window.Confluence.TeamCalendars.subcalendar["jira-project-releases"]=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:7,typeName:"JIRA Project Releases"});window.Confluence.TeamCalendars.subcalendar["jira-issue-dates"]=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:8,typeName:"JIRA Issue Dates"});window.Confluence.TeamCalendars.subcalendar.custom=a.extend({},window.Confluence.TeamCalendars.subcalendar.other,{weight:9,typeName:"custom_name"})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/parent-subcalendar.js' */
(function(b){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar.parent){var a=require("tc/calendar-util");window.Confluence.TeamCalendars.subcalendar.parent={getDialog:function(g,d,c){var e,f;var h=function(){var k=g.getCurrentPanel();f.resetFieldErrors();f.populateTimeZoneDropDown(k);var j=b("select[name='timeZoneIdSelect']",e);if(f.isNewCalendar()){f.setFormModeCreate();f.setHeading("Create Calendar",g);f.setSubCalendarIdField("");f.setNameField("");f.setDescriptionField("");f.setColorField(c.getNextCalendarColor());f.setSpaceToDefault();f.setTimeZoneIdField("")}else{f.setFormModeEdit();f.setHeading(d.name,g);f.setSubCalendarIdField(d.id);f.setNameField(d.name);f.setDescriptionField(d.description);f.setColorField(d.color);f.setSpaceKeyField(d.spaceKey);f.setSpaceKeyAutocompleteField(d.spaceName);f.setTimeZoneIdField(d.timeZoneId)}var l=b("input[name='name'], textarea[name='description'], input[name='spaceKeyAutocomplete']",e);if(c.isCalendarInEditMode()){l.removeAttr("readonly");j.removeAttr("disabled")}else{f.setFormModeReadOnly();l.attr("readonly","readonly");j.attr("disabled","disabled")}if(f.isNewCalendar()&&AJS.Meta.get("space-key")){var i=b(".field-group-space-permission",e);i.addClass("hidden")}};return{initializeForm:function(i){g.addHeader("Create Calendar");g.addPanel("General",Confluence.TeamCalendars.Templates.editLocalCalendar(),"calendar-dialog-panel create-calendar-dialog");e=b("form.sub-calendar-edit-form",g.getCurrentPanel().body);f=Confluence.TeamCalendars.getEditCalendarDialogHelper(e,d,c);f.initSpaceDropDown();f.initTimeZoneSelect();f.initOkButton("OK",g);f.initCloseButton(g,i);h();return e},getFormDataAsAjaxData:function(){var i={type:"parent",subCalendarId:b("input[name='subCalendarId']",e).val(),name:b("input[name='name']",e).val(),description:b("textarea[name='description']",e).val(),color:b("input[name='color']",e).val(),spaceKey:b("input[name='spaceKeyAutocomplete']",e).val()?b("input[name='spaceKey']",e).val():"",timeZoneId:b("input[name='timeZoneId']",e).val()||b("select[name='timeZoneIdSelect'] option:selected",e).val()};a.putCalendarContextParams(i);return i},onSubmitStart:function(){f.disableOkButton("Adding...")},onSubmitEnd:function(){f.enableOkButton("OK")}}},weight:1,typeName:"Calendars"}}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/jira-subcalendar.js' */
(function(a){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar.jira){window.Confluence.TeamCalendars.subcalendar.jira={weight:5,typeName:"JIRA Calendars",getDialog:function(){AJS.log("Confluence.TeamCalendars.subcalendar.jira.should never be called")}}}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/subscription-subcalendar.js' */
(function(b){if(!window.Confluence.TeamCalendars.subcalendar){window.Confluence.TeamCalendars.subcalendar={}}if(!window.Confluence.TeamCalendars.subcalendar.subscription){var a=require("tc/calendar-util");window.Confluence.TeamCalendars.subcalendar.subscription={getDialog:function(g,d,c){var f,e;var h=function(){f.resetFieldErrors();var j=function(){return b(document.createElement("div")).addClass("calendar-dialog-help-link").append(b(document.createElement("a")).attr("href","http://confluence.atlassian.com/x/YQ1cDg").attr("target","_blank").text("Help"))};if(f.isNewCalendar()){f.setFormModeCreate();f.setHeading("Subscribe",g).append(j());f.setSubCalendarIdField("");f.setNameField("");f.setDescriptionField("");f.setColorField(c.getNextCalendarColor());f.setSpaceToDefault();f.setLocationField("");f.setUserNameField("");f.setTimeZoneIdDisplayField("")}else{f.setFormModeEdit();f.setHeading(d.name,g).append(j());f.setSubCalendarIdField(d.id);f.setNameField(d.name);f.setDescriptionField(d.description);f.setColorField(d.color);f.setSpaceKeyField(d.spaceKey);f.setSpaceKeyAutocompleteField(d.spaceName);f.setLocationField(d.sourceLocation);f.setUserNameField(d.userName||"");f.setTimeZoneIdDisplayField(d.timeZoneId)}var k=b("input[name='name'], textarea[name='description'], input[name='spaceKeyAutocomplete'], input[name='location'], input[name='username'], input[name='password']",e);if(c.isCalendarInEditMode()){k.removeAttr("readonly")}else{f.setFormModeReadOnly();k.attr("readonly","readonly")}if(AJS.Meta.get("space-key")){var i=b(".field-group-space-permission",e);i.css("display","none")}};return{initializeForm:function(){g.addHeader("Subscribe");g.addPanel("General",Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar(),"calendar-dialog-panel subscribe-dialog");e=b("form.sub-calendar-edit-form",g.getCurrentPanel().body);f=Confluence.TeamCalendars.getEditCalendarDialogHelper(e,d,c);f.initSpaceDropDown();f.initOkButton("Subscribe",g);f.initCloseButton(g);h();return e},getFormDataAsAjaxData:function(){var i={type:"subscription",subCalendarId:b("input[name='subCalendarId']",e).val(),name:b("input[name='name']",e).val(),description:b("textarea[name='description']",e).val(),color:b("input[name='color']",e).val(),spaceKey:!!b("input[name='spaceKeyAutocomplete']",e).val()?b("input[name='spaceKey']",e).val():"",location:b("input[name='location']",e).val(),userName:b("input[name='username']",e).val(),password:b("input[name='password']",e).val()};a.putCalendarContextParams(i);return i},onSubmitStart:function(){f.disableOkButton("Subscribing")},onSubmitEnd:function(){f.enableOkButton("Subscribe")}}},weight:6,typeName:"Subscriptions"}}})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/remove-jira-events-dialog.js' */
(function(a){Confluence.TeamCalendars.getRemoveJiraEventsDialog=function(f,e,c){var b;b=new AJS.Dialog(400,250);b.addHeader("Remove JIRA events?");b.addPanel("",Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents({childName:c.name,parentName:f.getSubCalendar(e,c.parentId).name}),"remove-jira-events-confirmation-panel");b.addButton("Remove",function(){d();b.remove()});b.addCancel("Cancel",function(){b.remove()});b.show();function d(){var g=f.setSubCalendarSpinnerIconVisible(e,true);var h=function(){if(g){g.resolve()}};f.setProcessingSubCalendar(e,true);f._deleteSubCalendarInternal(e,c.subscriptionId||c.id,function(i,k,j){f.showAjaxError(e,i,k,j,f.ERROR_CLASS_SUB_CALENDAR_DELETE);h();f.setProcessingSubCalendar(e,false)},function(i){f.removeSubCalendarEventSource(e,c.id);f.setSubCalendars(e,i.payload);f.updateAvailableSubCalendarsInSubCalendarPanel(e);h();f.setProcessingSubCalendar(e,false)})}}}(AJS.$));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/timezone-drop-down.soy' */
// This file was automatically generated from timezone-drop-down.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.timeZoneDropDown = function(opt_data, opt_ignored) {
  var output = '';
  var timeZoneList3 = opt_data.timeZones;
  var timeZoneListLen3 = timeZoneList3.length;
  for (var timeZoneIndex3 = 0; timeZoneIndex3 < timeZoneListLen3; timeZoneIndex3++) {
    var timeZoneData3 = timeZoneList3[timeZoneIndex3];
    output += '<option value=' + soy.$$escapeHtml(timeZoneData3.name) + '>' + soy.$$escapeHtml(timeZoneData3.name) + ' (' + soy.$$escapeHtml(timeZoneData3.offset) + ')</option>';
  }
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timeZoneDropDown.soyTemplateName = 'Confluence.TeamCalendars.Templates.timeZoneDropDown';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/subcalendar-panel-entry.soy' */
// This file was automatically generated from subcalendar-panel-entry.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarPanelEntry = function(opt_data, opt_ignored) {
  return '<div class="subcalendar-item " data-sub-calendar-id="' + soy.$$escapeHtml(opt_data.subCalendar.id) + '"><div class="subcalendar-info"><div class="subcalendar-name"><span class="ellipsis_text"><b>' + soy.$$escapeHtml(opt_data.subCalendar.displayName) + '</b></span></div></div><ul class="child-subcalendars"/></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarPanelEntry.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarPanelEntry';
}


Confluence.TeamCalendars.Templates.customEventTypePanelEntry = function(opt_data, opt_ignored) {
  return '<li class="child-subcalendar ' + soy.$$escapeHtml(opt_data.customEventType.icon) + '" data-custom-event-type-id="' + soy.$$escapeHtml(opt_data.customEventType.customEventTypeId) + '" data-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.id) + '" data-parent-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.parentId) + '"><div class="child-subcalendar-color ' + soy.$$escapeHtml(opt_data.childSubCalendar.color) + '"/><div class="child-subcalendar-name">' + ((opt_data.childSubCalendar.subscriptionType) ? Confluence.TeamCalendars.Templates.iconCustomPrinting({icon: opt_data.customEventType.icon, className: 'iconSubCalendarPrint'}) : Confluence.TeamCalendars.Templates.iconCustomPrinting({icon: opt_data.customEventType.icon, className: 'iconSubCalendarPrint'})) + '<span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.customEventType.title) + '</span></div></li>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.customEventTypePanelEntry.soyTemplateName = 'Confluence.TeamCalendars.Templates.customEventTypePanelEntry';
}


Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry = function(opt_data, opt_ignored) {
  return '<li class="child-subcalendar ' + ((opt_data.childSubCalendar.subscriptionType) ? ' ' + soy.$$escapeHtml(opt_data.childSubCalendar.subscriptionType) : soy.$$escapeHtml(opt_data.childSubCalendar.type)) + '" data-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.id) + '"data-parent-sub-calendar-id="' + soy.$$escapeHtml(opt_data.childSubCalendar.parentId) + '"><div class="child-subcalendar-color ' + soy.$$escapeHtml(opt_data.childSubCalendar.color) + '"/><div class="child-subcalendar-name">' + ((opt_data.childSubCalendar.subscriptionType) ? Confluence.TeamCalendars.Templates.iconSubCalendarPrinting({eventType: opt_data.childSubCalendar.subscriptionType}) : Confluence.TeamCalendars.Templates.iconSubCalendarPrinting({eventType: opt_data.childSubCalendar.type})) + '<span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.childSubCalendar.displayName) + '</span></div></li>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry.soyTemplateName = 'Confluence.TeamCalendars.Templates.childSubCalendarPanelEntry';
}


Confluence.TeamCalendars.Templates.subCalendarMenu = function(opt_data, opt_ignored) {
  return '' + ((opt_data.subCalendar.menuOptions.showMenu) ? Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isParent: true}) : '');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarMenu';
}


Confluence.TeamCalendars.Templates.customEventTypeMenu = function(opt_data, opt_ignored) {
  return '' + ((opt_data.subCalendar.menuOptions.showMenu) ? Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isCustomEventType: true, parentSubCalendar: opt_data.parentSubCalendar, isParent: false}) : '');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.customEventTypeMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.customEventTypeMenu';
}


Confluence.TeamCalendars.Templates.childSubCalendarMenu = function(opt_data, opt_ignored) {
  return '' + ((opt_data.subCalendar.menuOptions.showMenu) ? Confluence.TeamCalendars.Templates.subCalendarPopupMenu({subCalendar: opt_data.subCalendar, autoConvertSupported: opt_data.autoConvertSupported, subCalendarClasses: opt_data.subCalendarClasses, isParent: false}) : '');
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.childSubCalendarMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.childSubCalendarMenu';
}


Confluence.TeamCalendars.Templates.subCalendarPopupMenu = function(opt_data, opt_ignored) {
  return '<div class="subcalendar-dropdown-menu ' + ((opt_data.isParent) ? 'parent-subCalendar' : '') + '"><div class="aui-dd-parent"><div class="aui-dd-trigger subcalendar-dropdown-menu-button"><button  class=\'aui-button aui-button-compact aui-button-subtle\'><span class=\'aui-icon aui-icon-small calendar-icon-more\'>More</span></button></div><ul class="aui-dropdown">' + ((opt_data.subCalendar.menuOptions.showAddEvent) ? '<li><a href="#" class="subcalendar-addevent" title="' + soy.$$escapeHtml('Add a calendar event') + '">' + soy.$$escapeHtml('Add Event') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showDisplayLink) ? '<li class="subcalendar-display-hide"><a href="#" title="' + soy.$$escapeHtml('Hide Events') + '">' + soy.$$escapeHtml('Hide Events') + '</a></li><li class="subcalendar-display-show"><a href="#" title="' + soy.$$escapeHtml('Show Events') + '">' + soy.$$escapeHtml('Show Events') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showNotifications) ? '<li class="subcalendar-watch section-end"><a href="#" title="' + soy.$$escapeHtml('Watch this calendar') + '">' + soy.$$escapeHtml('Watch') + '</a></li><li class="subcalendar-unwatch section-end"><a href="#" title="' + soy.$$escapeHtml('Stop watching this calendar') + '">' + soy.$$escapeHtml('Stop Watching') + '</a></li><li class="subcalendar-watching section-end"><a href="#" title="' + soy.$$escapeHtml('You\x27re watching this calendar via pages') + '">' + soy.$$escapeHtml('Watching') + '</a></li><li class="subcalendar-loading-watching-status section-end"><a href="#">' + soy.$$escapeHtml('Loading Watching Status') + '<span class="aui-icon aui-icon-wait"></span></a></li>' : '') + ((opt_data.subCalendar.menuOptions.showView) ? '<li><a href="#" class="subcalendar-view" title="' + soy.$$escapeHtml('View calendar details') + '">' + soy.$$escapeHtml('View Calendar') + '</a></li>' : '') + ((opt_data.parentSubCalendar && opt_data.parentSubCalendar.menuOptions.showEdit && opt_data.isCustomEventType) ? '<li><a href="#" class="custom-event-type-edit" title="' + soy.$$escapeHtml('Edit custom event type details') + '">' + soy.$$escapeHtml('Edit') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showEdit) ? '<li><a href="#" class="subcalendar-edit" title="' + soy.$$escapeHtml('Edit calendar details') + '">' + soy.$$escapeHtml('Edit') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showRestrictions) ? '<li><a href="#" class="subcalendar-restrict" title="' + soy.$$escapeHtml('Restrict access to calendar') + '">' + soy.$$escapeHtml('Restrictions') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showRemove) ? '<li class="section-end"><a href="#" class="subcalendar-remove" title="' + soy.$$escapeHtml('Remove calendar') + '">' + soy.$$escapeHtml('Remove...') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showShareAndSubscribe) ? ((opt_data.autoConvertSupported) ? '<li><a href="#" class="subcalendar-share-or-embed" title="' + soy.$$escapeHtml('Share calendar with others') + '">' + soy.$$escapeHtml('Embed') + '</a></li>' : '<li><a href="#" class="subcalendar-share" title="' + soy.$$escapeHtml('Share calendar with others') + '">' + soy.$$escapeHtml('Share') + '</a></li>') + ((opt_data.subCalendar.menuOptions.showSubscribe) ? '<li><a href="#" class="subcalendar-subscribe" title="' + soy.$$escapeHtml('Subscribe to calendar with calendar programs') + '">' + soy.$$escapeHtml('Subscribe') + '</a></li>' : '') + '<li><a href="#" class="subcalendar-icalexport" title="' + soy.$$escapeHtml('Export calendar in iCalendar format') + '">' + soy.$$escapeHtml('Export to iCalendar') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showReload) ? '<li class="section-end"><a href="#" class="subcalendar-reload" title="' + soy.$$escapeHtml('Refresh calendar') + '">' + soy.$$escapeHtml('Refresh') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showReminder) ? '<li class="subcalendar-reminder section-end"><a href="#" class="unreminder-me ' + ((opt_data.subCalendar.reminderMe == false) ? 'hidden' : '') + '" title="' + soy.$$escapeHtml('Don\x27t send me reminders for this event type') + '">' + soy.$$escapeHtml('Turn off reminders') + '</a><a href="#" class="reminder-me ' + ((opt_data.subCalendar.reminderMe) ? 'hidden' : '') + '" title="' + soy.$$escapeHtml('Send me reminders for this event type') + '">' + soy.$$escapeHtml('Turn on reminders') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showSettingReminder) ? '<li class="subcalendar-setting-reminder section-end"><a href="#" class="setting-reminder-setting" title="' + soy.$$escapeHtml('There\x27s no reminder for this event type. Add one now.') + '">' + soy.$$escapeHtml('Add Reminder') + '</a></li>' : '') + ((opt_data.subCalendar.menuOptions.showColourGrid) ? Confluence.TeamCalendars.Templates.subCalendarColourGrid(opt_data) : '') + '</ul></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarPopupMenu.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarPopupMenu';
}


Confluence.TeamCalendars.Templates.subCalendarColourGrid = function(opt_data, opt_ignored) {
  var output = '<li class="color-grid"><div class="color-cells">';
  var subCalendarColorClassList226 = opt_data.subCalendarClasses;
  var subCalendarColorClassListLen226 = subCalendarColorClassList226.length;
  for (var subCalendarColorClassIndex226 = 0; subCalendarColorClassIndex226 < subCalendarColorClassListLen226; subCalendarColorClassIndex226++) {
    var subCalendarColorClassData226 = subCalendarColorClassList226[subCalendarColorClassIndex226];
    output += '<div class="' + soy.$$escapeHtml(subCalendarColorClassData226) + ' color-cell ' + ((subCalendarColorClassIndex226 % 7 == 0) ? ' clear' : '') + '" data-colour="' + soy.$$escapeHtml(subCalendarColorClassData226) + '"></div>';
  }
  output += '<div class="clear"></div></div></li>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarColourGrid.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarColourGrid';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/edit-local-subcalendar.soy' */
// This file was automatically generated from edit-local-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editLocalCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="timeZoneId" value=""><input type="hidden" name="type" value="local"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-local"><div class="field-group field-group-name"><label for="name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">' + soy.$$escapeHtml('Description') + '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Related space') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('No spaces found') + '" data-template="{key}"><div class="description">' + soy.$$escapeHtml('Link this calendar to a space.') + '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone"><label for="timeZoneIdSelect">' + soy.$$escapeHtml('Time zone') + '</label><select name="timeZoneIdSelect" id="timeZoneIdSelect" class="select"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error timeZoneId-error"></div></div><div class="field-group field-group-timezone-display"><label>' + soy.$$escapeHtml('Time zone') + '</label><span class="timeZoneIdDisplay field-value"></span></div><div class="aui-message error calendar-error hidden"><p class="title"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml('Error(s) occurred.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editLocalCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editLocalCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/edit-people-subcalendar.soy' */
// This file was automatically generated from edit-people-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editPeopleCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="timeZoneId" value=""><input type="hidden" name="type" value="people"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-people"><div class="field-group field-group-name"><label for="name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">' + soy.$$escapeHtml('Description') + '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Related space') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('No spaces found') + '"><div class="description">' + soy.$$escapeHtml('Link this calendar to a space.') + '</div><div class="error spaceKeyAutocomplete-error"></div></div><div class="field-group field-group-timezone"><label for="timeZoneIdSelect">' + soy.$$escapeHtml('Time zone') + '</label><select name="timeZoneIdSelect" id="timeZoneIdSelect" class="select"></select><span class="spinner aui-icon aui-icon-wait"></span><div class="error timeZoneId-error"></div></div><div class="field-group field-group-timezone-display"><label>' + soy.$$escapeHtml('Time zone') + '</label><span class="timeZoneIdDisplay field-value"></span></div><div class="aui-message error calendar-error hidden"><p class="title"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml('Error(s) occurred.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editPeopleCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editPeopleCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/edit-subscription-subcalendar.soy' */
// This file was automatically generated from edit-subscription-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="subscription"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value=""><div class="form-mode create"><div class="subcalendar-type subcalendar-subscription"><div class="field-group field-group-name"><label for="name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input name="name" id="name" type="text" class="text" value="" autocomplete="off"><div class="error name-error"></div></div><div class="field-group field-group-description"><label for="description">' + soy.$$escapeHtml('Description') + '</label><textarea name="description" id="description" rows="5" class="textarea"></textarea></div><div class="field-group field-group-url"><label for="location">' + soy.$$escapeHtml('URL') + '<span class="aui-icon icon-required"></span></label><input name="location" id="location" type="text" class="text" autocomplete="off"><div class="description">' + soy.$$escapeHtml('iCal URL') + '</div><div class="error location-error"></div></div><div class="field-group field-group-username"><label for="username">' + soy.$$escapeHtml('User name') + '</label><input name="username" id="username" type="text" class="text"></div><div class="field-group field-group-password"><label for="password">' + soy.$$escapeHtml('Password') + '</label><input name="password" id="password" type="password" class="password"></div><div class="field-group field-group-space-permission"><label for="spaceKeyAutocomplete">' + soy.$$escapeHtml('Related space') + '<span class="aui-icon icon-required"></span></label><input name="spaceKeyAutocomplete" id="spaceKeyAutocomplete" type="text" class="autocomplete-space text" data-max="5" data-none-message="' + soy.$$escapeHtml('No spaces found') + '"><div class="description">' + soy.$$escapeHtml('Link this calendar to a space.') + '</div><div class="error spaceKeyAutocomplete-error"></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editSubscriptionSubcalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/edit-jira-subcalendar.soy' */
// This file was automatically generated from edit-jira-subcalendar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.hiddenJiraFields = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="subCalendarId" value=""><input type="hidden" name="type" value="jira"><input type="hidden" name="color" value=""><input type="hidden" name="spaceKey" value="">';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.hiddenJiraFields.soyTemplateName = 'Confluence.TeamCalendars.Templates.hiddenJiraFields';
}


Confluence.TeamCalendars.Templates.editJiraCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#">' + Confluence.TeamCalendars.Templates.hiddenJiraFields(null) + '<div class="form-mode create"><div class="subcalendar-type subcalendar-jira"><div class="jira-query-options option-project-selected"><fieldset class="group loading-dummy"><legend><span>' + soy.$$escapeHtml('Display') + ' <span class="aui-icon icon-required"></span></span></legend><div class="matrix"><span class="spinner aui-icon aui-icon-wait"></span></div></fieldset><fieldset class="group query-group"><legend><span>' + soy.$$escapeHtml('Display') + ' <span class="aui-icon icon-required"></span></span></legend><div class="matrix"><div class="radio radio-project"><input class="radio" type="radio" id="query-by-project" name="query-type" checked="checked" value="option-project"><label for="query-by-project">' + soy.$$escapeHtml('Project') + '</label></div><div class="radio radio-search-filter trailing-option"><input class="radio" type="radio" id="query-by-searchfilter" name="query-type" value="option-search-filter"><label for="query-by-searchfilter">' + soy.$$escapeHtml('Saved filter') + '</label></div><div class="radio radio-jql trailing-option"><input class="radio" type="radio" id="query-by-jql" name="query-type" value="option-jql"><label for="query-by-jql">' + soy.$$escapeHtml('JQL (advanced)') + '</label></div></div><div class="field-group hidden"><div class="error jiraQueryOptions-error"></div></div></fieldset><div class="field-group compatibility-group" style="position: relative;"><label for="project" class="hidden project-select-label">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"></span></label><div class="option-project option disableable-option"><div class="option-content"><select class="select content option-value" name="project" id="project"></select><div class="unavailable-message field-value"></div></div><div class="error project-error"></div></div><div class="option-search-filter option disableable-option"><input type="text" class="text option-value hidden" id="searchFilter" name="searchFilter"><label for="searchFilter" class="hidden">' + soy.$$escapeHtml('Saved filter') + '</label><div class="option-content"><input type="text" class="text content" id="searchFilterName" name="searchFilterName"><label for="searchFilterName" class="hidden">' + soy.$$escapeHtml('Saved filter') + '</label><div class="unavailable-message field-value">' + soy.$$escapeHtml('No search filters found. Please create a JIRA search filter.') + '</div><div class="search-filter-suggestions hidden"></div><div class="error searchFilterId-error"></div></div></div><div class="option-jql option"><textarea rows="20" cols="20" class="textarea option-value" id="jql" name="jql" wrap="off" autocomplete="off"></textarea><span class="jqlAutoCompleteSpinner hidden aui-icon aui-icon-wait"></span><div class="clear"></div><label for="jql" class="hidden">' + soy.$$escapeHtml('JQL (advanced)') + '</label><div class="error jql-error" id="jql-error"></div><div class="invisible jql-status"><div class="jql-ok hidden">' + soy.$$escapeHtml('Valid') + ' <a href="http://confluence.atlassian.com/x/ghGyCg" target="_blank">' + soy.$$escapeHtml('JQL') + '</a></div><div class="jql-bad hidden">' + soy.$$escapeHtml('Invalid') + ' <a href="http://confluence.atlassian.com/x/ghGyCg" target="_blank">' + soy.$$escapeHtml('JQL') + '</a></div></div></div></div><div class="date-fields-spinner-container hidden"><span class="aui-icon aui-icon-wait"></span><span>' + soy.$$escapeHtml('Loading dates to display...') + '</span></div><fieldset class="group field-group-jira field-group-jira-show hidden"><legend><span>' + soy.$$escapeHtml('Show') + '</span></legend><div class="dates"><div class="single-dates"><p class="subtitle">' + soy.$$escapeHtml('Single date:') + '</p><div class="date-fields"></div></div><div class="duration"><p class="subtitle">' + soy.$$escapeHtml('Date range:') + '</p><div class="date-fields"></div><p class="duration-desc">' + soy.$$escapeHtml('Display the time between a start and end date for an issue.') + '</p><a href="#" class="add-duration">' + soy.$$escapeHtml('Add start and end date...') + '</a></div><div class="clear"></div></div><div class="error dateFieldName-error"></div></fieldset><div class="field-group field-group-timezone-display"><label>' + soy.$$escapeHtml('Time zone') + '</label><span class="timeZoneIdDisplay field-value"></span></div></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editJiraCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.editJiraCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/edit-jira-subcalendar-duration.soy' */
// This file was automatically generated from edit-jira-subcalendar-duration.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations = function(opt_data, opt_ignored) {
  return '<p class="intro">' + soy.$$filterNoAutoescape('You can visualise the duration between two issue dates in Team Calendars. To do this, select your desired fields below or \x3ca href\x3d\x22https://confluence.atlassian.com/x/8QESCw\x22 target\x3d\x22_blank\x22\x3elearn more about creating custom dates\x3c/a\x3e.') + '</p><div class="duration-fields"><div class="duration-start"><select name="start-field"><option value="">' + soy.$$escapeHtml('Select start date...') + '</option></select></div><div class="duration-end"><select name="end-field"><option value="">' + soy.$$escapeHtml('Select end date...') + '</option></select></div><div class="clear"></div></div><div class="no-selectable-date-fields hidden"><p>' + soy.$$escapeHtml('No custom dates found for the selected JIRA query.') + '</p><p class="add-fields"></p></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations.soyTemplateName = 'Confluence.TeamCalendars.Templates.editJiraSubCalendarDurations';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-feature-discovery-dialog/subcalendar-features-dialog.soy' */
// This file was automatically generated from subcalendar-features-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subCalendarFeatures = function(opt_data, opt_ignored) {
  return '<div class="feature-discovery"><p class="didyouknow description">' + soy.$$escapeHtml('Did you know you can also:') + '</p><div class="features-table-container' + ((! opt_data.autoConvertSupported) ? ' noautoconvert' : '') + '"><table cellspacing="0" class="' + soy.$$escapeHtml(opt_data.subCalendar.type) + '"><tbody><tr class="features"><td class="feature add-event"><a class="feature-icon" alt="' + soy.$$escapeHtml('Add') + '">' + soy.$$escapeHtml('Add') + '</a><p class="title">' + soy.$$escapeHtml('Add') + '</p><p class="feature-description">' + soy.$$escapeHtml('Add events to your calendar.') + '</p></td><td class="feature restrict"><a class="feature-icon" alt="' + soy.$$escapeHtml('Restrict') + '">' + soy.$$escapeHtml('Restrict') + '</a><p class="title">' + soy.$$escapeHtml('Restrict') + '</p><p class="feature-description">' + soy.$$escapeHtml('Restrict the calendar\x27s visibility so that only certain people can   see or edit it.') + '</p></td><td class="feature embed"><a class="feature-icon" alt="' + soy.$$escapeHtml('Embed') + '">' + soy.$$escapeHtml('Embed') + '</a><p class="title">' + soy.$$escapeHtml('Embed') + '</p><p class="feature-description">' + soy.$$escapeHtml('Embed the calendar on a page or blog post.') + '</p></td><td class="feature embed-or-share"><a class="feature-icon" alt="' + soy.$$escapeHtml('Embed') + '">' + soy.$$escapeHtml('Embed') + '</a><p class="title">' + soy.$$escapeHtml('Embed') + '</p><p class="feature-description">' + soy.$$escapeHtml('Share calendar with others.') + '</p></td><td class="feature share"><a class="feature-icon" alt="' + soy.$$escapeHtml('Share') + '">' + soy.$$escapeHtml('Share') + '</a><p class="title">' + soy.$$escapeHtml('Share') + '</p><p class="feature-description">' + soy.$$escapeHtml('Share the calendar with other people for them to subscribe to.') + '</p></td></tr></tbody></table></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subCalendarFeatures.soyTemplateName = 'Confluence.TeamCalendars.Templates.subCalendarFeatures';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-reset-url-dialog/subcalendar-privateurl-reset-dialog.soy' */
// This file was automatically generated from subcalendar-privateurl-reset-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.resetSubCalendarPrivateUrl = function(opt_data, opt_ignored) {
  return '<p class="reset-reason">' + soy.$$filterNoAutoescape('Your subscription link for \x3cstrong class\x3d\x22calendar-title\x22\x3e\x3c/strong\x3e is private. If you have accidentally shared this link with others you may want to reset it.') + '</p><p class="reset-implication">' + soy.$$escapeHtml('Resetting the link to this calendar will mean you will need to re-subscribe to the calendar from your calendar application.') + '</p><div class="reset-progress"><div class="resetting"><span class="progress-icon aui-icon aui-icon-wait"></span><span class="progress-description">' + soy.$$escapeHtml('Resetting...') + '</span></div><div class="reset"><img class="progress-icon" src="' + soy.$$escapeHtml("/wiki") + '/images/icons/bullet_done.gif"><span class="progress-description">' + soy.$$escapeHtml('Subscription link has been reset.') + ' <a href="#" class="subscribe-to-calendar">' + soy.$$escapeHtml('Subscribe to this calendar') + '</a>.</span></div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.resetSubCalendarPrivateUrl.soyTemplateName = 'Confluence.TeamCalendars.Templates.resetSubCalendarPrivateUrl';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-restriction-dialog/subcalendar-restrict-dialog.soy' */
// This file was automatically generated from subcalendar-restrict-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.restrictSubCalendar = function(opt_data, opt_ignored) {
  return '<form name="editSubCalendarForm" class="sub-calendar-edit-form aui" method="POST" action="#"><input type="hidden" name="subCalendarId"><div class="field-group-permissions"><div class="permissions-type-select"><input type="radio" name="restriction-type" class="radio option-view-restrictions" id="option-view-restrictions-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" value="view"><span>' + soy.$$escapeHtml('Restrict viewing') + '</span><input type="radio" name="restriction-type" class="radio option-edit-restrictions" id="option-edit-restrictions-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" value="edit" checked="checked"><span>' + soy.$$escapeHtml('Restrict editing') + '</span></div><div class="permissions-details"><div class="permissions-input"><div class="user-picker-container"><input name="permissionsUserPicker" id="permissionsUserPicker-' + soy.$$escapeHtml(opt_data.elementIdSuffix) + '" type="text" class="text autocomplete-multiuser with-hint" value="' + soy.$$escapeHtml('Enter user name') + '" autocomplete="off" data-none-message="' + soy.$$escapeHtml('No user found. Press \x27enter\x27 to input as group.') + '" data-max="3"></div><div class="group-picker-container"><span class="or-text">' + soy.$$escapeHtml('or') + '</span><a class="group-picker-trigger" href="#"><span class="icon icon-group"></span><span>' + soy.$$escapeHtml('Group...') + '</span></a><div class="clear"></div></div></div><div class="clear"></div><div class="error permissions-error"></div><div class="view-permissions"><span class="aui-icon-small aui-iconfont-view"></span><span class="no-view-restrictions">' + soy.$$escapeHtml('No view restrictions defined for this calendar') + '</span><span class="restricted-viewing-to">' + soy.$$escapeHtml('Viewing restricted to:') + '</span><table class="permission-table hidden"><tbody class="permitted-entities"></tbody></table></div><div class="clear"></div><div class="edit-permissions"><div class="no-edit-restrictions">' + soy.$$escapeHtml('No edit restrictions defined for this calendar') + '</div><div class="restricted-editing-to">' + soy.$$escapeHtml('Editing restricted to:') + '</div><table class="permission-table hidden"><tbody class="permitted-entities"></tbody></table></div></div></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.restrictSubCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.restrictSubCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-remove-dialog/subcalendar-remove-dialog.soy' */
// This file was automatically generated from subcalendar-remove-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.removeSubCalendar = function(opt_data, opt_ignored) {
  return '<form class="sub-calendar-remove aui" action="#" method="POST"><h3>' + soy.$$filterNoAutoescape('What would you like to do with \x26quot;\x3cspan class\x3d\x22calendar-to-remove\x22\x3e\x3c/span\x3e\x26quot;?') + '</h3><fieldset class="group radios"><div class="radio"><input class="radio" type="radio" name="remove" id="removefromviewoption" checked="checked"><label for="removefromviewoption">' + ((opt_data.inSpace == true) ? soy.$$escapeHtml('Remove this calendar from space calendar view.') : soy.$$escapeHtml('Remove this calendar from my calendar view.')) + '</label></div><div class="radio"><input class="radio" type="radio" name="remove" id="deletecalendaroption" ><label for="deletecalendaroption">' + soy.$$escapeHtml('Permanently delete this calendar for all users.') + '</label></div></fieldset></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.removeSubCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.removeSubCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/subcalendar-remove-confirm-dialog.soy' */
// This file was automatically generated from subcalendar-remove-confirm-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar = function(opt_data, opt_ignored) {
  return '<form class="sub-calendar-delete-confirm aui" action="#" method="POST"><input type="hidden" name="subCalendarId" value=""><p><strong>' + soy.$$filterNoAutoescape('Are you sure you want to delete \x26quot;\x3cspan class\x3d\x22calendar-to-delete\x22\x3e\x3c/span\x3e\x26quot;?') + ((opt_data.subscriberCount > 0) ? (opt_data.subscriberCount > 1) ? '<span class="has-subscribers-warning"> ' + soy.$$escapeHtml(AJS.format('There are {0} people subscribed to this calendar.',opt_data.subscriberCount)) + '</span>' : '<span class="has-subscribers-warning"> ' + soy.$$escapeHtml('There is 1 person subscribed to this calendar.') + '</span>' : '') + '</strong></p>' + ((opt_data.subCalendar.subscriptionType == 'jira' || opt_data.subCalendar.type == 'jira') ? soy.$$escapeHtml('Removing this calendar will not change anything in JIRA. This calendar is only a view of it. The same view can be recreated again, if so desired, with the same parameters.') : '<p>' + soy.$$escapeHtml('All subscribers will be sent an iCalendar export of this calendar.') + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('If you need to restore the calendar at any time, simply choose the \x26quot;{0}\x26quot; option when adding a new calendar.','Import Calendar')) + '</p>') + '<div class="clear"></div></form>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar.soyTemplateName = 'Confluence.TeamCalendars.Templates.confirmRemoveSubCalendar';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/jira-subcalendar-remove-confirm-dialog.soy' */
// This file was automatically generated from jira-subcalendar-remove-confirm-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents = function(opt_data, opt_ignored) {
  return '<div class="delete-jira-events-hint"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to remove \x27\x27{0}\x27\x27 from \x27\x27{1}\x27\x27?',opt_data.childName,opt_data.parentName)) + '</p></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents.soyTemplateName = 'Confluence.TeamCalendars.Templates.confirmRemoveJiraEvents';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-search-result.soy' */
// This file was automatically generated from calendar-search-result.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.calendarSearchResultTable = function(opt_data, opt_ignored) {
  return '<table><thead class="tc-subscription-header"><tr><th class="subcalendar-checkbox"></th><th class="subcalendar-name">' + soy.$$escapeHtml('Calendar') + '</th><th class="subcalendar-description">' + soy.$$escapeHtml('Description') + '</th><th class="subcalendar-space">' + soy.$$escapeHtml('Related space') + '</th><th class="subcalendar-subscribercount">' + soy.$$escapeHtml('Subscribers') + '</th></tr></thead></table><table class="confluenceTable tc-table-content"><tbody class="tc-subscription-result" data-page-size="10"></tbody></table>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.calendarSearchResultTable.soyTemplateName = 'Confluence.TeamCalendars.Templates.calendarSearchResultTable';
}


Confluence.TeamCalendars.Templates.calendarSearchResult = function(opt_data, opt_ignored) {
  return '<tr><td class="confluenceTd"><input type="checkbox" class="subcalendar-select"></td><td class="confluenceTd subcalendar-name"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.name) + '" threedots="' + soy.$$escapeHtml(opt_data.name) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.name) + '</span></div></td><td class="confluenceTd subcalendar-description"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.description) + '" threedots="' + soy.$$escapeHtml(opt_data.description) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.description) + '</span></div></td><td class="confluenceTd subcalendar-space"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.relatedSpace) + '" threedots="' + soy.$$escapeHtml(opt_data.relatedSpace) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.relatedSpace) + '</span></div></td><td class="confluenceTd subcalendar-subscribercount"><div class="ellipsedColumn" title="' + soy.$$escapeHtml(opt_data.numSubscribers) + '" threedots="' + soy.$$escapeHtml(opt_data.numSubscribers) + '"><span class="ellipsis_text">' + soy.$$escapeHtml(opt_data.numSubscribers) + '</span></div></td></tr>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.calendarSearchResult.soyTemplateName = 'Confluence.TeamCalendars.Templates.calendarSearchResult';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/timeline-view.js' */
(function(a){Confluence.TeamCalendars.getTimelineAdapter=function(E,r,m,x){var n,e,p,B,c,q,g,u,l,J,w,b,L=null,j,y=null,G=500,i=0.2,K;n=r;e=m;p=E;B=x;c=1000*60*60*24*7;q=new Date();g=new Date(q.getTime()-c*2);u=new Date(q.getTime()+c*2);B.visStart=g;B.visEnd=u;l=g;J=u;function t(Q){var V,X,P,U,S=function(){if(j){P=j.dom.frame.scrollTop;U=a(j.dom.content).height()}},R=function(){var Y=a(j.dom.content).height()-U;if(Y>0){j.dom.frame.scrollTop=P+Y}else{j.dom.frame.scrollTop=P}},O=function(){if(K){var Y=a("<div/>");a.each(Q,function(ab,Z){var aa=Y.empty().html(Z.content).find("[data-event-id]").data("event-id");if(aa===K.id){j.setSelection([{row:ab}],true)}});K=null}},W=function(){var Y=a(j.dom.content).find(".timeline-event-content");a.each(Y,function(ad,aa){var Z=a(aa).parent();if(Z!==undefined&&Z.length>0){var ae=a(Z).position().left;var ab=a(j.dom.content).width();if(a(Z).width()>=ab){if(ae>0){a(aa).css("padding-left",(ab-ae)/2)}else{if(ab>=(a(Z).width()+ae)){a(aa).css("padding-left",(a(Z).width()+ae)/2-ae)}else{a(aa).css("padding-left",ab/2-ae)}}}else{var ac=(a(Z).width()+ae)/2-ae;if((ab>=(a(Z).width()+ae))&&ac>=0&&(ac<a(Z).width())){a(aa).css("padding-left",ac)}else{a(aa).css("padding-left",0)}}}})};V=n.getTimelineHeight(e)||G;var T=parseInt(n.getMaxMonthToDisplayTimelineCalendar(e))||6;X={width:"99%",height:"auto",viewHeight:V+"px",minHeight:V,editable:true,enableKeys:true,axisOnTop:false,showNavigation:true,style:"box",start:g,end:u,intervalMin:1000*60*60*6,intervalMax:c*4*T,MONTHS:n.getMonthNames(),DAYS:n.getDayNames()};S();j=new links.Timeline(p[0]);links.events.addListener(j,"select",o);links.events.addListener(j,"change",v);links.events.addListener(j,"rangechange",C);links.events.addListener(j,"rangechanged",F);links.events.addListener(j,"add",z);links.events.addListener(j,"moved",s);j.draw(Q,X);R();O();W();C()}function C(){A()}function o(O){var Q=M(),P=a(".timeline-event-box.timeline-event-selected");if(!Q){return}if(!P.length){P=a(".timeline-event-range.timeline-event-selected")}if(!d(Q)){j.setSelection([])}if(Q.disableResizing){a(".timeline-event-range-drag-left, .timeline-event-range-drag-right").addClass("hidden")}else{a(".timeline-event-range-drag-left, .timeline-event-range-drag-right").removeClass("hidden")}L=n.getEventDetailsDialog(e,Q,P);L[0].style.zIndex=1000;L.show();if(P.position().left<0){setTimeout(function(){var R=P.parent().offset().left;L.offset({left:R})},0)}}function v(){var R=M(),Q=H(),P=D(R,Q);K=R;if(!d(R)){j.cancelChange()}else{var O=n.setSubCalendarSpinnerIconVisible(e,true);n.updateEvent(e,P,function(S,U,T){if(O){O.resolve()}n.showAjaxError(e,S,U,T,n.ERROR_CLASS_EVENT_UPDATE)},function(S){if(O){O.resolve()}if(S.success){y=R.subCalendarId;n.reloadSubCalendar(e,R.subCalendarId)}else{Confluence.TeamCalendars.setGenericErrors(e,I(S.fieldErrors),n.ERROR_CLASS_EVENT_UPDATE)}})}A()}function F(){var O=j.getVisibleChartRange();k(O.start.getTime(),O.end.getTime())}function f(Q,P){if(!Q&&!P){var O=j.getVisibleChartRange();Q=new Date(O.start);P=new Date(O.end)}Confluence.TeamCalendars.updateDateDisplay(e,a.fullCalendar.formatDate(Q,"dd MMM")+" &mdash; "+a.fullCalendar.formatDate(P,"dd MMM, yyyy"))}function k(Q,P){var O=(P-Q)/2;g=new Date(Q);u=new Date(P);if(l.getTime()>Q||J.getTime()<P){l.setTime(Q-O);J.setTime(P+O);B.visStart=l;B.visEnd=J;B.update()}f(g,u)}function z(O){Confluence.TeamCalendars.Dialogs.getEditEventDialog({start:O.start,localizedStartTime:n.getDefaultStartTime(e),localizedEndTime:n.getDefaultEndTime(e),allDay:true},null,n,e).show()}function s(){A()}function d(O){return n.isEventEditable(e,O)}function h(){var P=undefined;var O=j.getSelection();if(O.length){if(O[0].row!=undefined){P=O[0].row}}return P}function M(){return w[h()]}function H(){return b[h()]}function A(){L&&L.hide()}function I(O){return a.map(O,function(P,Q){return P.field+" : "+P.errorMessages.toString()})}function N(P){function O(S){var R;if(!S.allDay){return S.end}if(S.className[0]==="jira-version"||(S.className[0]==="jira-issue"&&S.localizedStartDate===S.localizedEndDate)){return null}R=S.end||new Date(S.start.getTime());R=new Date(R.getTime());R.setHours(R.getHours()+23);R.setMinutes(59);R.setSeconds(59);return R}function Q(T){var S=T.className[0];function R(){if(a.inArray("jira-version",T.className)!==-1||a.inArray("jira-issue",T.className)!==-1){return T.title}if(a.inArray("other",T.className)!==-1||T.eventType==="custom"){if(T.shortTitle){return T.shortTitle+": "+T.title}else{if(T.invitees&&T.invitees.length){return T.invitees[0].displayName+": "+T.title}else{return T.title}}}else{return T.shortTitle||T.title}}switch(S){case"birthdays":return Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon({eventId:T.id,className:S,title:R()});break;case"travel":case"leaves":case"other":if(T.invitees&&T.invitees.length){if(T.invitees.length>1){return Confluence.TeamCalendars.Templates.timelineEventContent({eventId:T.id,iconClass:"people",title:R()})}else{return Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee({eventId:T.id,iconUrl:T.iconUrl,title:R()})}}else{return Confluence.TeamCalendars.Templates.defaultTimelineEventContent({eventId:T.id,title:T.title})}break;case"jira-issue":case"jira-version":case"greenhopper-sprint":return Confluence.TeamCalendars.Templates.timelineEventContent({eventId:T.id,iconClass:S,title:R()});break}return Confluence.TeamCalendars.Templates.defaultTimelineEventContent({eventId:T.id,title:T.title})}return a.map(P,function(R){return{start:R.start,end:O(R),content:Q(R),className:R.colorScheme}})}function D(O,Q){var P={},R=n.getSubCalendar(e,O.subCalendarId);if(O.className[0]=="jira-version"||(O.className[0]==="jira-issue"&&O.localizedStartDate===O.localizedEndDate)||(O.allDay&&Q.end.getHours()==23&&Q.end.getMinutes()==59)){P.allDayEvent=true;if(Q.end){Q.end.setHours(0);Q.end.setMinutes(0);Q.end.setSeconds(0)}}else{P.allDayEvent=false}P.subCalendarId=R.parentId;P.uid=O._id;P.originalStartDate=O.originalStart||"";P.what=O.title;P.url=O.workingUrl;P.start=a.fullCalendar.formatDate(Q.start,"ddMMyyyyHHmm");P.end=a.fullCalendar.formatDate(Q.end||Q.start,"ddMMyyyyHHmm");P.where=O.where;P.description=O.description;P.freq=O.recur?O.recur.freq:"";P.byday=O.recur?O.recur.byDay:"";P.interval=O.recur?O.recur.interval:"";P.until=O.recur?O.recur.localizedUntil||"":"";P.recurrenceId=O.recurId||"";P.editAllInRecurrenceSeries="false";P.dragAndDropUpdate=true;P.eventType=O.eventType;P.customEventTypeId=O.customEventTypeId;if(R.eventInviteesSupported){P.person=a.map(O.invitees||[],function(S){return S.id})}return P}return{renderEvents:function(P){var O=a.map(P,function(Q){return Q.subCalendarId});if(y&&a.inArray(y,O)===-1){y=null;return}w=P;b=N(P);t(b);f()},setDate:function(O){var P=u.getTime()-g.getTime();g=new Date(O.getTime()-(P/2));u=new Date(O.getTime()+(P/2));k(g.getTime(),u.getTime())},next:function(){j.move(i);F()},prev:function(){j.move(-i);F()},gotoToday:function(){j.setVisibleChartRangeNow();F()}}}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/require-oauth-message.soy' */
// This file was automatically generated from require-oauth-message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.requireOauthMessage = function(opt_data, opt_ignored) {
  return '<div class="oauth-approve aui-message hint" data-o-auth-url="' + soy.$$escapeHtml(opt_data.oAuthUrl) + '" data-sub-calendar-ids="' + soy.$$escapeHtml(opt_data.subCalendarIdsArrayJson) + '" data-sub-calendar-names="' + soy.$$escapeHtml(opt_data.subCalendarNamesArrayJson) + '"><p class="title"><span class="aui-icon aui-icon-info"></span></p><p class="info-approve">' + soy.$$filterNoAutoescape(AJS.format('\x3ca href\x3d\x22#\x22 class\x3d\x22approve-dance\x22\x3e{0}\x3c/a\x3e to see events of \x3cspan class\x3d\x22subcalendar-names\x22\x3e{1}\x3c/span\x3e','Login \x26 Approve',opt_data.subCalendarName)) + '</p></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.requireOauthMessage.soyTemplateName = 'Confluence.TeamCalendars.Templates.requireOauthMessage';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/timeline-event-content.soy' */
// This file was automatically generated from timeline-event-content.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee = function(opt_data, opt_ignored) {
  return '<div class="user-icon-container"><img class="user-icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '"><span class="single_person">' + soy.$$escapeHtml(opt_data.title) + '</span></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee.soyTemplateName = 'Confluence.TeamCalendars.Templates.timelineEventContentSingleInvitee';
}


Confluence.TeamCalendars.Templates.timelineEventContent = function(opt_data, opt_ignored) {
  return '<div class="timeline-event-content-container">' + Confluence.TeamCalendars.Templates.iconEventTimelinePrinting({eventType: opt_data.iconClass}) + '<div class="event-content-with-icon ' + soy.$$escapeHtml(opt_data.iconClass) + '-icon" data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '">' + soy.$$escapeHtml(opt_data.title) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timelineEventContent.soyTemplateName = 'Confluence.TeamCalendars.Templates.timelineEventContent';
}


Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon = function(opt_data, opt_ignored) {
  return '<div class="timeline-event-content-container ' + soy.$$escapeHtml(opt_data.className) + '">' + Confluence.TeamCalendars.Templates.iconEventTimelinePrinting({eventType: opt_data.className}) + '<div class="event-content" data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '">' + soy.$$escapeHtml(opt_data.title) + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon.soyTemplateName = 'Confluence.TeamCalendars.Templates.timelineEventContentWithEventTypeIcon';
}


Confluence.TeamCalendars.Templates.defaultTimelineEventContent = function(opt_data, opt_ignored) {
  return '<div class="timeline-event-content-container"><span data-event-id="' + soy.$$escapeHtml(opt_data.eventId) + '">' + soy.$$escapeHtml(opt_data.title) + '</span></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.defaultTimelineEventContent.soyTemplateName = 'Confluence.TeamCalendars.Templates.defaultTimelineEventContent';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/calendar-subcalendar-subscribe-dialog/calendar-subscribe-dialog.soy' */
// This file was automatically generated from calendar-subscribe-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.subscribeDialog = function(opt_data, opt_ignored) {
  return '<div class="subscribe-to-subcalendar"><div class="aui-message error calendar-error hidden"><p class="title"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml('Error(s) occurred.') + '</strong></p><div class="error-content"><ul class="error-messages hidden"></ul></div></div><div class="mode"><div id="tc-subscribe-no-search-warning" class="hidden loading"><span>' + soy.$$escapeHtml('The version of Confluence you are using does not allow calendars to be searched. Here is a list of all calendars you may subscribe to.') + '</span><span class="spinner aui-icon aui-icon-wait"></span></div><div class="preamble"><span id="subscribe-intro"></span><span class="spinner aui-icon aui-icon-wait"></span></div><div class="search"><form class="aui"><textarea name="query" class="textarea" rows="1"></textarea></form><span class="spinner aui-icon aui-icon-wait"></span></div></div></div><div class="results"></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.subscribeDialog.soyTemplateName = 'Confluence.TeamCalendars.Templates.subscribeDialog';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/event-popup-issue.soy' */
// This file was automatically generated from event-popup-issue.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupIssue = function(opt_data, opt_ignored) {
  return '<div class="event-field labeled-field field-jira-date"><span class="field-label">' + soy.$$escapeHtml(opt_data.event.extraProperties.dateField) + ':</span><div class="field-value">' + ((opt_data.event.extraProperties.resolved == 'true') ? soy.$$escapeHtml(opt_data.event.localizedEndDate) : soy.$$escapeHtml(opt_data.event.extraProperties.jiraIssueDisplayDayDuration)) + '</div></div><div class="event-field labeled-field field-jira-assignee"><span class="field-label">' + soy.$$escapeHtml('Assignee') + ':</span><div class="field-value' + ((opt_data.event.extraProperties.assigneeProfileUrl) ? ' assignee-with-link' : '') + '"><span class="plain-assignee-name">' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeName) + '</span>' + ((opt_data.event.extraProperties.assigneeProfileUrl) ? '<a class="assignee-profile-link" href="' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeProfileUrl) + '">' + soy.$$escapeHtml(opt_data.event.extraProperties.assigneeName) + '</a>' : '') + '</div></div><div class="event-field labeled-field field-jira-status"><span class="field-label">' + soy.$$escapeHtml('Status') + ':</span><div class="field-value">' + soy.$$escapeHtml(opt_data.event.extraProperties.statusText) + '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">' + soy.$$escapeHtml('Edit') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.issueLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('View Issue') + '</a></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopupIssue.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopupIssue';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/event-popup-version.soy' */
// This file was automatically generated from event-popup-version.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupVersion = function(opt_data, opt_ignored) {
  return '<div class="event-field field-duration"><div class="time"></div><div class="day-duration">' + ((opt_data.event.extraProperties.resolved == 'true') ? soy.$$escapeHtml(opt_data.event.localizedEndDate) : soy.$$escapeHtml(opt_data.event.extraProperties.jiraVersionDisplayDayDuration)) + '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">' + soy.$$escapeHtml('Edit') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.summaryLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Summary') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.viewIssuesLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('View Issues') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.releaseNotesLink) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Release Notes') + '</a></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopupVersion.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopupVersion';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/event-popup-sprint.soy' */
// This file was automatically generated from event-popup-sprint.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopupSprint = function(opt_data, opt_ignored) {
  return '<div class="event-field field-duration"><div class="time"></div><div class="all-day-label">' + soy.$$escapeHtml('All day') + '</div></div><div class="event-field field-event-links"><div class="' + ((opt_data.event.extraProperties.sprintHomePageUrl) ? 'with-sprint-homepage' : 'no-sprint-homepage') + '"><a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.viewBoardsUrl) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('View Sprint') + '</a>' + ((opt_data.event.extraProperties.sprintHomePageUrl) ? '<span class="sprintHomePageUrlContainer"> &middot; <a href="' + soy.$$escapeHtml(opt_data.event.extraProperties.sprintHomePageUrl) + '" class="event-hyperlink" target="_blank">' + soy.$$escapeHtml('Sprint Home Page') + '</a></span>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopupSprint.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopupSprint';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/event-popup.soy' */
// This file was automatically generated from event-popup.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.eventPopup = function(opt_data, opt_ignored) {
  var output = '<div class="event-details-popup ' + soy.$$escapeHtml(opt_data.contextClass) + '"><div class="' + soy.$$escapeHtml(opt_data.event.className) + '"><div class="event-icon-container"><img class="event-icon" src="' + soy.$$escapeHtml(opt_data.event.iconUrl) + '"></div><div class="event-fields"><div class="event-field field-subcalendar-name"><span class="lozenge ' + soy.$$escapeHtml(opt_data.event.colour) + '">' + soy.$$escapeHtml(opt_data.event.subCalendarDisplayName) + '</span><div class="name"><a href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/calendar/previewcalendar.action?subCalendarId=' + soy.$$escapeHtml(opt_data.event.subCalendarId) + '">' + soy.$$escapeHtml(opt_data.event.subCalendarDisplayName) + '</a></div></div><div class="event-field field-summary"><span class="field-title"> ' + soy.$$escapeHtml(opt_data.event.title) + '</span>' + ((opt_data.event.period) ? '<span class="event-field reminder-icon" title="' + soy.$$escapeHtml(opt_data.event.period) + '"></span>' : '') + '</div>' + ((opt_data.event.where) ? '<div class="event-field field-location">' + soy.$$escapeHtml(opt_data.event.where) + '</div>' : '');
  if (opt_data.event.inviteesSupported && opt_data.event.invitees && opt_data.event.invitees.length > 1) {
    output += '<div class="event-field field-invitees">';
    var inviteeList36 = opt_data.event.invitees;
    var inviteeListLen36 = inviteeList36.length;
    for (var inviteeIndex36 = 0; inviteeIndex36 < inviteeListLen36; inviteeIndex36++) {
      var inviteeData36 = inviteeList36[inviteeIndex36];
      output += '<img class="invitee" src="' + soy.$$escapeHtml(inviteeData36.avatarIconUrl) + '" title="' + soy.$$escapeHtml(inviteeData36.displayName) + '">';
    }
    output += '</div>';
  }
  if (opt_data.event.workingUrl) {
    output += '<div class="event-field field-link">';
    var eventLink__soy47 = '' + ((! opt_data.event.urlAlias) ? soy.$$escapeHtml(opt_data.event.workingUrl) : soy.$$escapeHtml(opt_data.event.urlAlias));
    output += '<a class="event-link" href="' + soy.$$escapeHtml(opt_data.event.workingUrl) + '" title="' + soy.$$escapeHtml(eventLink__soy47) + '">' + soy.$$escapeHtml(eventLink__soy47) + '</a></div>';
  }
  output += (opt_data.event.description) ? '<div class="event-field field-description">' + ((opt_data.event.descriptionRendered) ? soy.$$filterNoAutoescape(opt_data.event.descriptionRendered) : soy.$$escapeHtml(opt_data.event.description)) + '</div>' : '';
  if (opt_data.event.extraPropertiesTemplate) {
    output += '<div class="extra-fields">';
    switch (opt_data.event.extraPropertiesTemplate) {
      case 'event-details-version':
        output += Confluence.TeamCalendars.Templates.eventPopupVersion(opt_data);
        break;
      case 'event-details-issue':
        output += Confluence.TeamCalendars.Templates.eventPopupIssue(opt_data);
        break;
      case 'event-details-sprint':
        output += Confluence.TeamCalendars.Templates.eventPopupSprint(opt_data);
        break;
    }
    output += '</div>';
  }
  output += '<div class="event-field field-duration"><div class="time"></div><div class="all-day-label">' + soy.$$escapeHtml('All day') + '</div></div><div class="event-field field-event-links edit-controls"><a class="event-edit edit-control" href="#">' + soy.$$escapeHtml('Edit') + '</a> <span class="event-hyperlink-separator">&middot;</span> <a class="event-delete edit-control" href="#">' + soy.$$escapeHtml('Delete') + '</a></div></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.eventPopup.soyTemplateName = 'Confluence.TeamCalendars.Templates.eventPopup';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/templates/upcoming-events.soy' */
// This file was automatically generated from upcoming-events.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Confluence.TeamCalendars.Templates.
 */

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.TeamCalendars == 'undefined') { Confluence.TeamCalendars = {}; }
if (typeof Confluence.TeamCalendars.Templates == 'undefined') { Confluence.TeamCalendars.Templates = {}; }


Confluence.TeamCalendars.Templates.upcomingEvents = function(opt_data, opt_ignored) {
  var output = '<div class="dashboard-calendar"><div class="events-container"><ul class="group-list">';
  var eventGroupList4 = opt_data.eventGroups;
  var eventGroupListLen4 = eventGroupList4.length;
  for (var eventGroupIndex4 = 0; eventGroupIndex4 < eventGroupListLen4; eventGroupIndex4++) {
    var eventGroupData4 = eventGroupList4[eventGroupIndex4];
    output += '<li class="event-group"><div class="group-details-container"><div class="group-details"><div class="group-headline' + ((eventGroupData4.today == true) ? ' today-headline' : '') + '"><span class="other-days" data-group-date="' + soy.$$escapeHtml(eventGroupData4.dateFormatKey) + '">' + soy.$$escapeHtml('Formatting...') + '</span><span class="today">' + soy.$$escapeHtml('Today') + '</span></div><ul class="events">';
    var eventList16 = eventGroupData4.events;
    var eventListLen16 = eventList16.length;
    for (var eventIndex16 = 0; eventIndex16 < eventListLen16; eventIndex16++) {
      var eventData16 = eventList16[eventIndex16];
      output += '<li data-event-id="' + soy.$$escapeHtml(eventData16.id) + '" data-sub-calendar-name="' + soy.$$escapeHtml(eventData16.subCalendar.name) + '"><div class="event-details"><div class="event-subcalendar ' + soy.$$escapeHtml(eventData16.subCalendar.color) + '" title="' + soy.$$escapeHtml(eventData16.subCalendar.name) + '"></div>' + ((eventData16.mediumIconUrl) ? '<img class="event-icon" src="' + soy.$$escapeHtml(eventData16.mediumIconUrl) + '">' : '<img class="event-icon" src="' + soy.$$escapeHtml(eventData16.iconUrl) + '">') + '<strong class="event-name">' + soy.$$escapeHtml(eventData16.title) + '</strong><span class="event-subcalendar-name">' + ((eventData16.parentSubCalendar) ? soy.$$escapeHtml(eventData16.parentSubCalendar.name) : soy.$$escapeHtml(eventData16.subCalendar.name)) + '</span><div class="event-description">' + ((eventData16.descriptionRendered) ? '<span class="ellipsis_text">' + soy.$$filterNoAutoescape(eventData16.descriptionRendered) + '</span>' : (eventData16.description) ? '<span class="ellipsis_text">' + soy.$$escapeHtml(eventData16.description) + '</span>' : '') + '</div></div><div class="clear"></div>' + ((eventIndex16 == eventListLen16 - 1) ? (0 < eventGroupData4.hiddenEventsCount) ? (1 < eventGroupData4.hiddenEventsCount) ? '<div class="x-more-events">' + soy.$$escapeHtml(AJS.format('And {0} more events...',eventGroupData4.hiddenEventsCount)) + '</div>' : '<div class="x-more-events">' + soy.$$escapeHtml(AJS.format('And {0} more event...',eventGroupData4.hiddenEventsCount)) + '</div>' : '' : '') + '</li>';
    }
    output += '</ul></div></div><div class="group-date' + ((eventGroupData4.today) ? ' first-group-date' : '') + '"><div class="day" data-group-date="' + soy.$$escapeHtml(eventGroupData4.dateFormatKey) + '">' + soy.$$escapeHtml(eventGroupData4.groupDay) + '</div><div class="month" data-group-date="' + soy.$$escapeHtml(eventGroupData4.dateFormatKey) + '"></div></div><div class="event-group-clear"></div></li>';
  }
  output += '</ul><a href="#" class="more-events hidden">' + soy.$$escapeHtml('More') + '</a></div></div>';
  return output;
};
if (goog.DEBUG) {
  Confluence.TeamCalendars.Templates.upcomingEvents.soyTemplateName = 'Confluence.TeamCalendars.Templates.upcomingEvents';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/components/load-favicon/load-favicon.js' */
define("tc/load-favicon",["jquery"],function(a){return{render:function(){var b=(new Date()).getDate()+"";this._loadFaviconCalendar(b)},_loadFaviconCalendar:function(c){var d=a("<canvas />"),f=a("<img />"),b=a("link[rel~='icon']");if(typeof d.get(0).getContext==="function"){if(!b){b=document.createElement("link");b.setAttribute("rel","shortcut icon");b.type="image/x-icon";document.head.appendChild(b)}d.attr({width:16,height:16});var e=d.get(0).getContext("2d");f.load(function(){e.drawImage(this,0,0);e.font='bold 10px "helvetica", sans-serif';e.textAlign="center";e.fillStyle="gray";e.fillText(c,8,13);var g=!!navigator.userAgent.match(/Trident\/7.0/)&&!!navigator.userAgent.match(/.NET4.0E/);b.each(function(){if(g){this.href=Confluence.getContextPath()+"/download/resources/com.atlassian.confluence.extra.team-calendars:calendar-resources/img/logo_16.png"}else{this.href=d.get(0).toDataURL("image/png")}});a("head").append(b)});f.attr({src:Confluence.getContextPath()+"/download/resources/com.atlassian.confluence.extra.team-calendars:calendar-resources/img/calendar-favicon.png"})}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.extra.team-calendars:calendar-resources', location = 'com/atlassian/confluence/extra/calendar3/js/upcoming-events.js' */
jQuery(function(b){if(b("#dashboard-get-started").length>0){b("#dashboard-get-started").parent().after(b(".dashboard-calendar-container").children())}else{b(".welcome-message").after(b(".dashboard-calendar-container").children())}var a={initializeAddLater:function(c,e){var d=function(){b.ajax({cache:false,data:{messageKey:"MESSAGE_KEY_FULL_SIZED_EMPTY_UPCOMING_EVENTS"},error:function(){b(".show-small-sad-calendar-error",c).removeClass("hidden")},type:"DELETE",timeout:Confluence.TeamCalendars.ajaxTimeout,url:b("#confluence-context-path").attr("content")+"/rest/calendar-services/1.0/calendar/preferences/messagekey.json"})};b(".add-later",c).click(function(){var f=b(".sad-calendar",c);f.fadeTo(e,0,function(){f.addClass("small-sad-calendar").fadeTo(e,1);d()});return false})},initialize:function(c){this.initializeAddLater(c,"fast")}};b(".dashboard-calendar").each(function(){a.initialize(b(this))})});
}catch(e){WRMCB(e)};