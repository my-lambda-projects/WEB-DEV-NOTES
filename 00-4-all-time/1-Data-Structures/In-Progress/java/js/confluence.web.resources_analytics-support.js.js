WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'confluence.web.resources:analytics-support', location = 'includes/js/analytics-support.js' */
define("confluence/analytics-support","jquery ajs confluence/meta window document confluence/api/url".split(" "),function(d,q,n,k,l,e){function r(){if("undefined"===typeof m){var a=d._data(k,"events");m=a&&a.analytics&&0<a.analytics.length}return m}var b={},m;b.setAnalyticsSource=function(a,f){r()&&a.attr("href",function(a,c){a=encodeURIComponent(f);c=e.parse(c);d.isEmptyObject(c)||(c.queryParams.src=[a]);return e.format(c)})};b.srcRemovedUrl=function(a){a=e.parse(a);delete a.queryParams.src;for(var f=
Object.keys(a.queryParams),b=0;b<f.length;b++){var c=f[b],g=c.split(".");3===g.length&&"src"===g[0]&&delete a.queryParams[c];"jwt"===c&&delete a.queryParams[c]}return e.format(a)};b.srcParamValues=function(a){return(a=e.parse(a).queryParams)&&a.src?a.src:[]};b.srcAttrParamValues=function(a){a=e.parse(a).queryParams;for(var b={},p=Object.keys(a),c=0;c<p.length;c++){var g=p[c],h=g.split(".");if(3===h.length&&"src"===h[0]){var d=h[1],h=h[2];b[d]=b[d]||{};b[d][h]=decodeURIComponent(a[g][0])}}return b};
b.extractAnalyticsData=function(a){var f=[],d=b.srcParamValues(a);a=b.srcAttrParamValues(a);for(var c=0;c<d.length;c++){var g=d[c];f.push({src:g,attr:a[g]||{}})}return f};b.publish=function(a,b){q.trigger("analytics",{name:a,data:b||{}})};b.init=function(){var a=b.extractAnalyticsData(l.URL),f={userKey:n.get("remote-user-key"),pageID:n.get("page-id")};if(0<a.length){for(var e=0;e<a.length;e++){var c=a[e],g=d.extend({},f,c.attr);b.publish("confluence.viewpage.src."+c.src,g)}k.history&&k.history.replaceState&&
(a=b.srcRemovedUrl(l.URL),l.URL!==a&&k.history.replaceState(null,"",a))}else b.publish("confluence.viewpage.src.empty",f)};return b});require("confluence/module-exporter").exportModuleAsGlobal("confluence/analytics-support","AJS.Confluence.Analytics",function(d){require("ajs").toInit(d.init)});
}catch(e){WRMCB(e)};