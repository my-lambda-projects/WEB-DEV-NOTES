<h1 id="typescript">TypeScript</h1>
<p>Since v5, Sequelize provides its own TypeScript definitions. Please note that only TS &gt;= 3.1 is supported.</p>
<p>As Sequelize heavily relies on runtime property assignments, TypeScript won’t be very useful out of the box. A decent amount of manual type declarations are needed to make models workable.</p>
<h2 id="installation">Installation</h2>
<p>In order to avoid installation bloat for non TS users, you must install the following typing packages manually:</p>
<ul>
<li><code>@types/node</code> (this is universally required in node projects)</li>
<li><code>@types/validator</code></li>
</ul>
<h2 id="usage">Usage</h2>
<p>Example of a minimal TypeScript project with strict type-checking for attributes.</p>
<!--
NOTE! 
Keep the following code in sync with `typescriptDocs/ModelInit.ts` to ensure
it typechecks correctly.
-->
<div class="sourceCode" id="cb1"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb1-1" title="1"><span class="im">import</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  Sequelize<span class="op">,</span></a>
<a class="sourceLine" id="cb1-3" title="3">  Model<span class="op">,</span></a>
<a class="sourceLine" id="cb1-4" title="4">  DataTypes<span class="op">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">  HasManyGetAssociationsMixin<span class="op">,</span></a>
<a class="sourceLine" id="cb1-6" title="6">  HasManyAddAssociationMixin<span class="op">,</span></a>
<a class="sourceLine" id="cb1-7" title="7">  HasManyHasAssociationMixin<span class="op">,</span></a>
<a class="sourceLine" id="cb1-8" title="8">  Association<span class="op">,</span></a>
<a class="sourceLine" id="cb1-9" title="9">  HasManyCountAssociationsMixin<span class="op">,</span></a>
<a class="sourceLine" id="cb1-10" title="10">  HasManyCreateAssociationMixin<span class="op">,</span></a>
<a class="sourceLine" id="cb1-11" title="11">  Optional<span class="op">,</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="op">}</span> <span class="im">from</span> <span class="st">&#39;sequelize&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-13" title="13"></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="kw">const</span> sequelize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Sequelize</span>(<span class="st">&#39;mysql://root:asd123@localhost:3306/mydb&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-15" title="15"></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co">// These are all the attributes in the User model</span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="kw">interface</span> UserAttributes <span class="op">{</span></a>
<a class="sourceLine" id="cb1-18" title="18">  id<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-19" title="19">  name<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-20" title="20">  preferredName<span class="op">:</span> <span class="dt">string</span> <span class="op">|</span> <span class="dt">null</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-22" title="22"></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="co">// Some attributes are optional in `User.build` and `User.create` calls</span></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="kw">interface</span> UserCreationAttributes <span class="kw">extends</span> Optional<span class="op">&lt;</span>UserAttributes<span class="op">,</span> <span class="st">&#39;id&#39;</span><span class="op">&gt;</span> <span class="op">{}</span></a>
<a class="sourceLine" id="cb1-25" title="25"></a>
<a class="sourceLine" id="cb1-26" title="26"><span class="kw">class</span> User <span class="kw">extends</span> Model<span class="op">&lt;</span>UserAttributes<span class="op">,</span> UserCreationAttributes<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb1-27" title="27">  <span class="kw">implements</span> UserAttributes <span class="op">{</span></a>
<a class="sourceLine" id="cb1-28" title="28">  <span class="kw">public</span> id<span class="op">!:</span> <span class="dt">number</span><span class="op">;</span> <span class="co">// Note that the `null assertion` `!` is required in strict mode.</span></a>
<a class="sourceLine" id="cb1-29" title="29">  <span class="kw">public</span> name<span class="op">!:</span> <span class="dt">string</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-30" title="30">  <span class="kw">public</span> preferredName<span class="op">!:</span> <span class="dt">string</span> <span class="op">|</span> <span class="dt">null</span><span class="op">;</span> <span class="co">// for nullable fields</span></a>
<a class="sourceLine" id="cb1-31" title="31"></a>
<a class="sourceLine" id="cb1-32" title="32">  <span class="co">// timestamps!</span></a>
<a class="sourceLine" id="cb1-33" title="33">  <span class="kw">public</span> <span class="kw">readonly</span> createdAt<span class="op">!:</span> <span class="bu">Date</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-34" title="34">  <span class="kw">public</span> <span class="kw">readonly</span> updatedAt<span class="op">!:</span> <span class="bu">Date</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-35" title="35"></a>
<a class="sourceLine" id="cb1-36" title="36">  <span class="co">// Since TS cannot determine model association at compile time</span></a>
<a class="sourceLine" id="cb1-37" title="37">  <span class="co">// we have to declare them here purely virtually</span></a>
<a class="sourceLine" id="cb1-38" title="38">  <span class="co">// these will not exist until `Model.init` was called.</span></a>
<a class="sourceLine" id="cb1-39" title="39">  <span class="kw">public</span> getProjects<span class="op">!:</span> HasManyGetAssociationsMixin<span class="op">&lt;</span>Project<span class="op">&gt;;</span> <span class="co">// Note the null assertions!</span></a>
<a class="sourceLine" id="cb1-40" title="40">  <span class="kw">public</span> addProject<span class="op">!:</span> HasManyAddAssociationMixin<span class="op">&lt;</span>Project<span class="op">,</span> <span class="dt">number</span><span class="op">&gt;;</span></a>
<a class="sourceLine" id="cb1-41" title="41">  <span class="kw">public</span> hasProject<span class="op">!:</span> HasManyHasAssociationMixin<span class="op">&lt;</span>Project<span class="op">,</span> <span class="dt">number</span><span class="op">&gt;;</span></a>
<a class="sourceLine" id="cb1-42" title="42">  <span class="kw">public</span> countProjects<span class="op">!:</span> HasManyCountAssociationsMixin<span class="op">;</span></a>
<a class="sourceLine" id="cb1-43" title="43">  <span class="kw">public</span> createProject<span class="op">!:</span> HasManyCreateAssociationMixin<span class="op">&lt;</span>Project<span class="op">&gt;;</span></a>
<a class="sourceLine" id="cb1-44" title="44"></a>
<a class="sourceLine" id="cb1-45" title="45">  <span class="co">// You can also pre-declare possible inclusions, these will only be populated if you</span></a>
<a class="sourceLine" id="cb1-46" title="46">  <span class="co">// actively include a relation.</span></a>
<a class="sourceLine" id="cb1-47" title="47">  <span class="kw">public</span> <span class="kw">readonly</span> projects<span class="op">?:</span> Project<span class="op">[];</span> <span class="co">// Note this is optional since it&#39;s only populated when explicitly requested in code</span></a>
<a class="sourceLine" id="cb1-48" title="48"></a>
<a class="sourceLine" id="cb1-49" title="49">  <span class="kw">public</span> <span class="kw">static</span> associations<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-50" title="50">    projects<span class="op">:</span> Association<span class="op">&lt;</span>User<span class="op">,</span> Project<span class="op">&gt;;</span></a>
<a class="sourceLine" id="cb1-51" title="51">  <span class="op">};</span></a>
<a class="sourceLine" id="cb1-52" title="52"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-53" title="53"></a>
<a class="sourceLine" id="cb1-54" title="54"><span class="kw">interface</span> ProjectAttributes <span class="op">{</span></a>
<a class="sourceLine" id="cb1-55" title="55">  id<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-56" title="56">  ownerId<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-57" title="57">  name<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-58" title="58"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-59" title="59"></a>
<a class="sourceLine" id="cb1-60" title="60"><span class="kw">interface</span> ProjectCreationAttributes <span class="kw">extends</span> Optional<span class="op">&lt;</span>ProjectAttributes<span class="op">,</span> <span class="st">&#39;id&#39;</span><span class="op">&gt;</span> <span class="op">{}</span></a>
<a class="sourceLine" id="cb1-61" title="61"></a>
<a class="sourceLine" id="cb1-62" title="62"><span class="kw">class</span> Project <span class="kw">extends</span> Model<span class="op">&lt;</span>ProjectAttributes<span class="op">,</span> ProjectCreationAttributes<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb1-63" title="63">  <span class="kw">implements</span> ProjectAttributes <span class="op">{</span></a>
<a class="sourceLine" id="cb1-64" title="64">  <span class="kw">public</span> id<span class="op">!:</span> <span class="dt">number</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-65" title="65">  <span class="kw">public</span> ownerId<span class="op">!:</span> <span class="dt">number</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-66" title="66">  <span class="kw">public</span> name<span class="op">!:</span> <span class="dt">string</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-67" title="67"></a>
<a class="sourceLine" id="cb1-68" title="68">  <span class="kw">public</span> <span class="kw">readonly</span> createdAt<span class="op">!:</span> <span class="bu">Date</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-69" title="69">  <span class="kw">public</span> <span class="kw">readonly</span> updatedAt<span class="op">!:</span> <span class="bu">Date</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-70" title="70"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-71" title="71"></a>
<a class="sourceLine" id="cb1-72" title="72"><span class="kw">interface</span> AddressAttributes <span class="op">{</span></a>
<a class="sourceLine" id="cb1-73" title="73">  userId<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-74" title="74">  address<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-75" title="75"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-76" title="76"></a>
<a class="sourceLine" id="cb1-77" title="77"><span class="co">// You can write `extends Model&lt;AddressAttributes, AddressAttributes&gt;` instead,</span></a>
<a class="sourceLine" id="cb1-78" title="78"><span class="co">// but that will do the exact same thing as below</span></a>
<a class="sourceLine" id="cb1-79" title="79"><span class="kw">class</span> Address <span class="kw">extends</span> Model<span class="op">&lt;</span>AddressAttributes<span class="op">&gt;</span> <span class="kw">implements</span> AddressAttributes <span class="op">{</span></a>
<a class="sourceLine" id="cb1-80" title="80">  <span class="kw">public</span> userId<span class="op">!:</span> <span class="dt">number</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-81" title="81">  <span class="kw">public</span> address<span class="op">!:</span> <span class="dt">string</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-82" title="82"></a>
<a class="sourceLine" id="cb1-83" title="83">  <span class="kw">public</span> <span class="kw">readonly</span> createdAt<span class="op">!:</span> <span class="bu">Date</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-84" title="84">  <span class="kw">public</span> <span class="kw">readonly</span> updatedAt<span class="op">!:</span> <span class="bu">Date</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-85" title="85"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-86" title="86"></a>
<a class="sourceLine" id="cb1-87" title="87"><span class="va">Project</span><span class="op">.</span><span class="fu">init</span>(</a>
<a class="sourceLine" id="cb1-88" title="88">  <span class="op">{</span></a>
<a class="sourceLine" id="cb1-89" title="89">    id<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-90" title="90">      type<span class="op">:</span> <span class="va">DataTypes</span><span class="op">.</span><span class="va">INTEGER</span><span class="op">.</span><span class="at">UNSIGNED</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-91" title="91">      autoIncrement<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-92" title="92">      primaryKey<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-93" title="93">    <span class="op">},</span></a>
<a class="sourceLine" id="cb1-94" title="94">    ownerId<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-95" title="95">      type<span class="op">:</span> <span class="va">DataTypes</span><span class="op">.</span><span class="va">INTEGER</span><span class="op">.</span><span class="at">UNSIGNED</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-96" title="96">      allowNull<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-97" title="97">    <span class="op">},</span></a>
<a class="sourceLine" id="cb1-98" title="98">    name<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-99" title="99">      type<span class="op">:</span> <span class="kw">new</span> <span class="va">DataTypes</span><span class="op">.</span><span class="fu">STRING</span>(<span class="dv">128</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb1-100" title="100">      allowNull<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-101" title="101">    <span class="op">},</span></a>
<a class="sourceLine" id="cb1-102" title="102">  <span class="op">},</span></a>
<a class="sourceLine" id="cb1-103" title="103">  <span class="op">{</span></a>
<a class="sourceLine" id="cb1-104" title="104">    sequelize<span class="op">,</span></a>
<a class="sourceLine" id="cb1-105" title="105">    tableName<span class="op">:</span> <span class="st">&#39;projects&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-106" title="106">  <span class="op">},</span></a>
<a class="sourceLine" id="cb1-107" title="107">)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-108" title="108"></a>
<a class="sourceLine" id="cb1-109" title="109"><span class="va">User</span><span class="op">.</span><span class="fu">init</span>(</a>
<a class="sourceLine" id="cb1-110" title="110">  <span class="op">{</span></a>
<a class="sourceLine" id="cb1-111" title="111">    id<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-112" title="112">      type<span class="op">:</span> <span class="va">DataTypes</span><span class="op">.</span><span class="va">INTEGER</span><span class="op">.</span><span class="at">UNSIGNED</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-113" title="113">      autoIncrement<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-114" title="114">      primaryKey<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-115" title="115">    <span class="op">},</span></a>
<a class="sourceLine" id="cb1-116" title="116">    name<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-117" title="117">      type<span class="op">:</span> <span class="kw">new</span> <span class="va">DataTypes</span><span class="op">.</span><span class="fu">STRING</span>(<span class="dv">128</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb1-118" title="118">      allowNull<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-119" title="119">    <span class="op">},</span></a>
<a class="sourceLine" id="cb1-120" title="120">    preferredName<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-121" title="121">      type<span class="op">:</span> <span class="kw">new</span> <span class="va">DataTypes</span><span class="op">.</span><span class="fu">STRING</span>(<span class="dv">128</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb1-122" title="122">      allowNull<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-123" title="123">    <span class="op">},</span></a>
<a class="sourceLine" id="cb1-124" title="124">  <span class="op">},</span></a>
<a class="sourceLine" id="cb1-125" title="125">  <span class="op">{</span></a>
<a class="sourceLine" id="cb1-126" title="126">    tableName<span class="op">:</span> <span class="st">&#39;users&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-127" title="127">    sequelize<span class="op">,</span> <span class="co">// passing the `sequelize` instance is required</span></a>
<a class="sourceLine" id="cb1-128" title="128">  <span class="op">},</span></a>
<a class="sourceLine" id="cb1-129" title="129">)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-130" title="130"></a>
<a class="sourceLine" id="cb1-131" title="131"><span class="va">Address</span><span class="op">.</span><span class="fu">init</span>(</a>
<a class="sourceLine" id="cb1-132" title="132">  <span class="op">{</span></a>
<a class="sourceLine" id="cb1-133" title="133">    userId<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-134" title="134">      type<span class="op">:</span> <span class="va">DataTypes</span><span class="op">.</span><span class="va">INTEGER</span><span class="op">.</span><span class="at">UNSIGNED</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-135" title="135">    <span class="op">},</span></a>
<a class="sourceLine" id="cb1-136" title="136">    address<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-137" title="137">      type<span class="op">:</span> <span class="kw">new</span> <span class="va">DataTypes</span><span class="op">.</span><span class="fu">STRING</span>(<span class="dv">128</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb1-138" title="138">      allowNull<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-139" title="139">    <span class="op">},</span></a>
<a class="sourceLine" id="cb1-140" title="140">  <span class="op">},</span></a>
<a class="sourceLine" id="cb1-141" title="141">  <span class="op">{</span></a>
<a class="sourceLine" id="cb1-142" title="142">    tableName<span class="op">:</span> <span class="st">&#39;address&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-143" title="143">    sequelize<span class="op">,</span> <span class="co">// passing the `sequelize` instance is required</span></a>
<a class="sourceLine" id="cb1-144" title="144">  <span class="op">},</span></a>
<a class="sourceLine" id="cb1-145" title="145">)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-146" title="146"></a>
<a class="sourceLine" id="cb1-147" title="147"><span class="co">// Here we associate which actually populates out pre-declared `association` static and other methods.</span></a>
<a class="sourceLine" id="cb1-148" title="148"><span class="va">User</span><span class="op">.</span><span class="fu">hasMany</span>(Project<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-149" title="149">  sourceKey<span class="op">:</span> <span class="st">&#39;id&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-150" title="150">  foreignKey<span class="op">:</span> <span class="st">&#39;ownerId&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-151" title="151">  as<span class="op">:</span> <span class="st">&#39;projects&#39;</span><span class="op">,</span> <span class="co">// this determines the name in `associations`!</span></a>
<a class="sourceLine" id="cb1-152" title="152"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-153" title="153"></a>
<a class="sourceLine" id="cb1-154" title="154"><span class="va">Address</span><span class="op">.</span><span class="fu">belongsTo</span>(User<span class="op">,</span> <span class="op">{</span> targetKey<span class="op">:</span> <span class="st">&#39;id&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-155" title="155"><span class="va">User</span><span class="op">.</span><span class="fu">hasOne</span>(Address<span class="op">,</span> <span class="op">{</span> sourceKey<span class="op">:</span> <span class="st">&#39;id&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-156" title="156"></a>
<a class="sourceLine" id="cb1-157" title="157"><span class="kw">async</span> <span class="kw">function</span> <span class="fu">doStuffWithUser</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-158" title="158">  <span class="kw">const</span> newUser <span class="op">=</span> <span class="cf">await</span> <span class="va">User</span><span class="op">.</span><span class="fu">create</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb1-159" title="159">    name<span class="op">:</span> <span class="st">&#39;Johnny&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-160" title="160">    preferredName<span class="op">:</span> <span class="st">&#39;John&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-161" title="161">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-162" title="162">  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="va">newUser</span><span class="op">.</span><span class="at">id</span><span class="op">,</span> <span class="va">newUser</span><span class="op">.</span><span class="at">name</span><span class="op">,</span> <span class="va">newUser</span><span class="op">.</span><span class="at">preferredName</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-163" title="163"></a>
<a class="sourceLine" id="cb1-164" title="164">  <span class="kw">const</span> project <span class="op">=</span> <span class="cf">await</span> <span class="va">newUser</span><span class="op">.</span><span class="fu">createProject</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb1-165" title="165">    name<span class="op">:</span> <span class="st">&#39;first!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-166" title="166">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-167" title="167"></a>
<a class="sourceLine" id="cb1-168" title="168">  <span class="kw">const</span> ourUser <span class="op">=</span> <span class="cf">await</span> <span class="va">User</span><span class="op">.</span><span class="fu">findByPk</span>(<span class="dv">1</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-169" title="169">    include<span class="op">:</span> <span class="op">[</span><span class="va">User</span><span class="op">.</span><span class="va">associations</span><span class="op">.</span><span class="at">projects</span><span class="op">],</span></a>
<a class="sourceLine" id="cb1-170" title="170">    rejectOnEmpty<span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="co">// Specifying true here removes `null` from the return type!</span></a>
<a class="sourceLine" id="cb1-171" title="171">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-172" title="172"></a>
<a class="sourceLine" id="cb1-173" title="173">  <span class="co">// Note the `!` null assertion since TS can&#39;t know if we included</span></a>
<a class="sourceLine" id="cb1-174" title="174">  <span class="co">// the model or not</span></a>
<a class="sourceLine" id="cb1-175" title="175">  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="va">ourUser</span><span class="op">.</span><span class="at">projects</span><span class="op">![</span><span class="dv">0</span><span class="op">]</span>.<span class="at">name</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-176" title="176"><span class="op">}</span></a></code></pre></div>
<h3 id="usage-without-strict-types-for-attributes">Usage without strict types for attributes</h3>
<p>The typings for Sequelize v5 allowed you to define models without specifying types for the attributes. This is still possible for backwards compatibility and for cases where you feel strict typing for attributes isn’t worth it.</p>
<!--
NOTE! 
Keep the following code in sync with `typescriptDocs/ModelInitNoAttributes.ts` to ensure
it typechecks correctly.
-->
<div class="sourceCode" id="cb2"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb2-1" title="1"><span class="im">import</span> <span class="op">{</span> Sequelize<span class="op">,</span> Model<span class="op">,</span> DataTypes <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;sequelize&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">const</span> sequelize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Sequelize</span>(<span class="st">&#39;mysql://root:asd123@localhost:3306/mydb&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">class</span> User <span class="kw">extends</span> Model <span class="op">{</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="kw">public</span> id<span class="op">!:</span> <span class="dt">number</span><span class="op">;</span> <span class="co">// Note that the `null assertion` `!` is required in strict mode.</span></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="kw">public</span> name<span class="op">!:</span> <span class="dt">string</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="kw">public</span> preferredName<span class="op">!:</span> <span class="dt">string</span> <span class="op">|</span> <span class="dt">null</span><span class="op">;</span> <span class="co">// for nullable fields</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-10" title="10"></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="va">User</span><span class="op">.</span><span class="fu">init</span>(</a>
<a class="sourceLine" id="cb2-12" title="12">  <span class="op">{</span></a>
<a class="sourceLine" id="cb2-13" title="13">    id<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-14" title="14">      type<span class="op">:</span> <span class="va">DataTypes</span><span class="op">.</span><span class="va">INTEGER</span><span class="op">.</span><span class="at">UNSIGNED</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-15" title="15">      autoIncrement<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-16" title="16">      primaryKey<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-17" title="17">    <span class="op">},</span></a>
<a class="sourceLine" id="cb2-18" title="18">    name<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-19" title="19">      type<span class="op">:</span> <span class="kw">new</span> <span class="va">DataTypes</span><span class="op">.</span><span class="fu">STRING</span>(<span class="dv">128</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb2-20" title="20">      allowNull<span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-21" title="21">    <span class="op">},</span></a>
<a class="sourceLine" id="cb2-22" title="22">    preferredName<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-23" title="23">      type<span class="op">:</span> <span class="kw">new</span> <span class="va">DataTypes</span><span class="op">.</span><span class="fu">STRING</span>(<span class="dv">128</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb2-24" title="24">      allowNull<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-25" title="25">    <span class="op">},</span></a>
<a class="sourceLine" id="cb2-26" title="26">  <span class="op">},</span></a>
<a class="sourceLine" id="cb2-27" title="27">  <span class="op">{</span></a>
<a class="sourceLine" id="cb2-28" title="28">    tableName<span class="op">:</span> <span class="st">&#39;users&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-29" title="29">    sequelize<span class="op">,</span> <span class="co">// passing the `sequelize` instance is required</span></a>
<a class="sourceLine" id="cb2-30" title="30">  <span class="op">},</span></a>
<a class="sourceLine" id="cb2-31" title="31">)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-32" title="32"></a>
<a class="sourceLine" id="cb2-33" title="33"><span class="kw">async</span> <span class="kw">function</span> <span class="fu">doStuffWithUserModel</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-34" title="34">  <span class="kw">const</span> newUser <span class="op">=</span> <span class="cf">await</span> <span class="va">User</span><span class="op">.</span><span class="fu">create</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb2-35" title="35">    name<span class="op">:</span> <span class="st">&#39;Johnny&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-36" title="36">    preferredName<span class="op">:</span> <span class="st">&#39;John&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-37" title="37">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-38" title="38">  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="va">newUser</span><span class="op">.</span><span class="at">id</span><span class="op">,</span> <span class="va">newUser</span><span class="op">.</span><span class="at">name</span><span class="op">,</span> <span class="va">newUser</span><span class="op">.</span><span class="at">preferredName</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-39" title="39"></a>
<a class="sourceLine" id="cb2-40" title="40">  <span class="kw">const</span> foundUser <span class="op">=</span> <span class="cf">await</span> <span class="va">User</span><span class="op">.</span><span class="fu">findOne</span>(<span class="op">{</span> where<span class="op">:</span> <span class="op">{</span> name<span class="op">:</span> <span class="st">&#39;Johnny&#39;</span> <span class="op">}</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-41" title="41">  <span class="fu">if</span> (foundUser <span class="op">===</span> <span class="kw">null</span>) <span class="cf">return</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-42" title="42">  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="va">foundUser</span><span class="op">.</span><span class="at">name</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-43" title="43"><span class="op">}</span></a></code></pre></div>
<h2 id="usage-of-sequelize.define">Usage of <code>sequelize.define</code></h2>
<p>In Sequelize versions before v5, the default way of defining a model involved using <code>sequelize.define</code>. It’s still possible to define models with that, and you can also add typings to these models using interfaces.</p>
<!--
NOTE! 
Keep the following code in sync with `typescriptDocs/Define.ts` to ensure
it typechecks correctly.
-->
<div class="sourceCode" id="cb3"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb3-1" title="1"><span class="im">import</span> <span class="op">{</span> Sequelize<span class="op">,</span> Model<span class="op">,</span> DataTypes<span class="op">,</span> Optional <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;sequelize&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">const</span> sequelize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Sequelize</span>(<span class="st">&#39;mysql://root:asd123@localhost:3306/mydb&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">// We recommend you declare an interface for the attributes, for stricter typechecking</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="kw">interface</span> UserAttributes <span class="op">{</span></a>
<a class="sourceLine" id="cb3-7" title="7">  id<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-8" title="8">  name<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-10" title="10"></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">// Some fields are optional when calling UserModel.create() or UserModel.build()</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="kw">interface</span> UserCreationAttributes <span class="kw">extends</span> Optional<span class="op">&lt;</span>UserAttributes<span class="op">,</span> <span class="st">&#39;id&#39;</span><span class="op">&gt;</span> <span class="op">{}</span></a>
<a class="sourceLine" id="cb3-13" title="13"></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">// We need to declare an interface for our model that is basically what our class would be</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="kw">interface</span> UserInstance</a>
<a class="sourceLine" id="cb3-16" title="16">  <span class="kw">extends</span> Model<span class="op">&lt;</span>UserAttributes<span class="op">,</span> UserCreationAttributes<span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb3-17" title="17">    UserAttributes <span class="op">{}</span></a>
<a class="sourceLine" id="cb3-18" title="18"></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="kw">const</span> UserModel <span class="op">=</span> <span class="va">sequelize</span><span class="op">.</span><span class="fu">define</span><span class="op">&lt;</span>UserInstance<span class="op">&gt;</span>(<span class="st">&#39;User&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-20" title="20">  id<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-21" title="21">    primaryKey<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-22" title="22">    type<span class="op">:</span> <span class="va">DataTypes</span><span class="op">.</span><span class="va">INTEGER</span><span class="op">.</span><span class="at">UNSIGNED</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-23" title="23">  <span class="op">},</span></a>
<a class="sourceLine" id="cb3-24" title="24">  name<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-25" title="25">    type<span class="op">:</span> <span class="va">DataTypes</span><span class="op">.</span><span class="at">STRING</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-26" title="26">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-27" title="27"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-28" title="28"></a>
<a class="sourceLine" id="cb3-29" title="29"><span class="kw">async</span> <span class="kw">function</span> <span class="fu">doStuff</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb3-30" title="30">  <span class="kw">const</span> instance <span class="op">=</span> <span class="cf">await</span> <span class="va">UserModel</span><span class="op">.</span><span class="fu">findByPk</span>(<span class="dv">1</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-31" title="31">    rejectOnEmpty<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-32" title="32">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-33" title="33">  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="va">instance</span><span class="op">.</span><span class="at">id</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-34" title="34"><span class="op">}</span></a></code></pre></div>
<p>If you’re comfortable with somewhat less strict typing for the attributes on a model, you can save some code by defining the Instance to just extend <code>Model</code> without any attributes in the generic types.</p>
<!--
NOTE! 
Keep the following code in sync with `typescriptDocs/DefineNoAttributes.ts` to ensure
it typechecks correctly.
-->
<div class="sourceCode" id="cb4"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb4-1" title="1"><span class="im">import</span> <span class="op">{</span> Sequelize<span class="op">,</span> Model<span class="op">,</span> DataTypes <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;sequelize&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">const</span> sequelize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Sequelize</span>(<span class="st">&#39;mysql://root:asd123@localhost:3306/mydb&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4"></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">// We need to declare an interface for our model that is basically what our class would be</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="kw">interface</span> UserInstance <span class="kw">extends</span> Model <span class="op">{</span></a>
<a class="sourceLine" id="cb4-7" title="7">  id<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8">  name<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb4-10" title="10"></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="kw">const</span> UserModel <span class="op">=</span> <span class="va">sequelize</span><span class="op">.</span><span class="fu">define</span><span class="op">&lt;</span>UserInstance<span class="op">&gt;</span>(<span class="st">&#39;User&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-12" title="12">  id<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-13" title="13">    primaryKey<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-14" title="14">    type<span class="op">:</span> <span class="va">DataTypes</span><span class="op">.</span><span class="va">INTEGER</span><span class="op">.</span><span class="at">UNSIGNED</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-15" title="15">  <span class="op">},</span></a>
<a class="sourceLine" id="cb4-16" title="16">  name<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-17" title="17">    type<span class="op">:</span> <span class="va">DataTypes</span><span class="op">.</span><span class="at">STRING</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-18" title="18">  <span class="op">},</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-20" title="20"></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="kw">async</span> <span class="kw">function</span> <span class="fu">doStuff</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb4-22" title="22">  <span class="kw">const</span> instance <span class="op">=</span> <span class="cf">await</span> <span class="va">UserModel</span><span class="op">.</span><span class="fu">findByPk</span>(<span class="dv">1</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-23" title="23">    rejectOnEmpty<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-24" title="24">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-25" title="25">  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="va">instance</span><span class="op">.</span><span class="at">id</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-26" title="26"><span class="op">}</span></a></code></pre></div>
